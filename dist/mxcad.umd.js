!function(t,p){"object"==typeof exports&&"undefined"!=typeof module?p(exports,require("mxdraw")):"function"==typeof define&&define.amd?define(["exports","mxdraw"],p):p((t="undefined"!=typeof globalThis?globalThis:t||self).MxCAD={},t.Mx)}(this,(function(t,p){"use strict";function _classCallCheck$1(t,p){if(!(t instanceof p))throw new TypeError("Cannot call a class as a function")}function _typeof$2(t){return _typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$2(t)}function toPropertyKey(t){var p=function toPrimitive(t,p){if("object"!=_typeof$2(t)||!t)return t;var h=t[Symbol.toPrimitive];if(void 0!==h){var x=h.call(t,p||"default");if("object"!=_typeof$2(x))return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===p?String:Number)(t)}(t,"string");return"symbol"==_typeof$2(p)?p:String(p)}function _defineProperties$1(t,p){for(var h=0;h<p.length;h++){var x=p[h];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(t,toPropertyKey(x.key),x)}}function _createClass$1(t,p,h){return p&&_defineProperties$1(t.prototype,p),h&&_defineProperties$1(t,h),Object.defineProperty(t,"prototype",{writable:!1}),t}function _assertThisInitialized$1(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _setPrototypeOf$1(t,p){return _setPrototypeOf$1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,p){return t.__proto__=p,t},_setPrototypeOf$1(t,p)}function _inherits$1(t,p){if("function"!=typeof p&&null!==p)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(p&&p.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),p&&_setPrototypeOf$1(t,p)}function _possibleConstructorReturn$1(t,p){if(p&&("object"===_typeof$2(p)||"function"==typeof p))return p;if(void 0!==p)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$1(t)}function _getPrototypeOf$1(t){return _getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf$1(t)}function getAugmentedNamespace(t){var p=t.default;if("function"==typeof p){var a=function(){return p.apply(this,arguments)};a.prototype=p.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(t).forEach((function(p){var h=Object.getOwnPropertyDescriptor(t,p);Object.defineProperty(a,p,h.get?h:{enumerable:!0,get:function(){return t[p]}})})),a}for(var h={},x={byteLength:function byteLength(t){var p=getLens(t),h=p[0],x=p[1];return 3*(h+x)/4-x},toByteArray:function toByteArray(t){var p,h,x=getLens(t),M=x[0],N=x[1],V=new I(function _byteLength(t,p,h){return 3*(p+h)/4-h}(0,M,N)),ee=0,te=N>0?M-4:M;for(h=0;h<te;h+=4)p=k[t.charCodeAt(h)]<<18|k[t.charCodeAt(h+1)]<<12|k[t.charCodeAt(h+2)]<<6|k[t.charCodeAt(h+3)],V[ee++]=p>>16&255,V[ee++]=p>>8&255,V[ee++]=255&p;2===N&&(p=k[t.charCodeAt(h)]<<2|k[t.charCodeAt(h+1)]>>4,V[ee++]=255&p);1===N&&(p=k[t.charCodeAt(h)]<<10|k[t.charCodeAt(h+1)]<<4|k[t.charCodeAt(h+2)]>>2,V[ee++]=p>>8&255,V[ee++]=255&p);return V},fromByteArray:function fromByteArray(t){for(var p,h=t.length,x=h%3,k=[],I=16383,N=0,V=h-x;N<V;N+=I)k.push(encodeChunk(t,N,N+I>V?V:N+I));1===x?(p=t[h-1],k.push(M[p>>2]+M[p<<4&63]+"==")):2===x&&(p=(t[h-2]<<8)+t[h-1],k.push(M[p>>10]+M[p>>4&63]+M[p<<2&63]+"="));return k.join("")}},M=[],k=[],I="undefined"!=typeof Uint8Array?Uint8Array:Array,N="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",V=0;V<64;++V)M[V]=N[V],k[N.charCodeAt(V)]=V;function getLens(t){var p=t.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var h=t.indexOf("=");return-1===h&&(h=p),[h,h===p?0:4-h%4]}function encodeChunk(t,p,h){for(var x,k,I=[],N=p;N<h;N+=3)x=(t[N]<<16&16711680)+(t[N+1]<<8&65280)+(255&t[N+2]),I.push(M[(k=x)>>18&63]+M[k>>12&63]+M[k>>6&63]+M[63&k]);return I.join("")}k["-".charCodeAt(0)]=62,k["_".charCodeAt(0)]=63;var ee={};
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function _createSuper$c(t){var p=function _isNativeReflectConstruct$d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var h,x=_getPrototypeOf$1(t);if(p){var M=_getPrototypeOf$1(this).constructor;h=Reflect.construct(x,arguments,M)}else h=x.apply(this,arguments);return _possibleConstructorReturn$1(this,h)}}function asyncGeneratorStep(t,p,h,x,M,k,I){try{var N=t[k](I),V=N.value}catch(ee){return void h(ee)}N.done?p(V):Promise.resolve(V).then(x,M)}function _asyncToGenerator(t){return function(){var p=this,h=arguments;return new Promise((function(x,M){var k=t.apply(p,h);function _next(t){asyncGeneratorStep(k,x,M,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(k,x,M,_next,_throw,"throw",t)}_next(void 0)}))}}ee.read=function(t,p,h,x,M){var k,I,N=8*M-x-1,V=(1<<N)-1,ee=V>>1,te=-7,re=h?M-1:0,ne=h?-1:1,ie=t[p+re];for(re+=ne,k=ie&(1<<-te)-1,ie>>=-te,te+=N;te>0;k=256*k+t[p+re],re+=ne,te-=8);for(I=k&(1<<-te)-1,k>>=-te,te+=x;te>0;I=256*I+t[p+re],re+=ne,te-=8);if(0===k)k=1-ee;else{if(k===V)return I?NaN:1/0*(ie?-1:1);I+=Math.pow(2,x),k-=ee}return(ie?-1:1)*I*Math.pow(2,k-x)},ee.write=function(t,p,h,x,M,k){var I,N,V,ee=8*k-M-1,te=(1<<ee)-1,re=te>>1,ne=23===M?Math.pow(2,-24)-Math.pow(2,-77):0,ie=x?0:k-1,ae=x?1:-1,oe=p<0||0===p&&1/p<0?1:0;for(p=Math.abs(p),isNaN(p)||p===1/0?(N=isNaN(p)?1:0,I=te):(I=Math.floor(Math.log(p)/Math.LN2),p*(V=Math.pow(2,-I))<1&&(I--,V*=2),(p+=I+re>=1?ne/V:ne*Math.pow(2,1-re))*V>=2&&(I++,V/=2),I+re>=te?(N=0,I=te):I+re>=1?(N=(p*V-1)*Math.pow(2,M),I+=re):(N=p*Math.pow(2,re-1)*Math.pow(2,M),I=0));M>=8;t[h+ie]=255&N,ie+=ae,N/=256,M-=8);for(I=I<<M|N,ee+=M;ee>0;t[h+ie]=255&I,ie+=ae,I/=256,ee-=8);t[h+ie-ae]|=128*oe},function(t){var p=x,h=ee,M="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=Buffer,t.SlowBuffer=function SlowBuffer(t){+t!=t&&(t=0);return Buffer.alloc(+t)},t.INSPECT_MAX_BYTES=50;var k=2147483647;function createBuffer(t){if(t>k)throw new RangeError('The value "'+t+'" is invalid for option "size"');var p=new Uint8Array(t);return Object.setPrototypeOf(p,Buffer.prototype),p}function Buffer(t,p,h){if("number"==typeof t){if("string"==typeof p)throw new TypeError('The "string" argument must be of type string. Received type number');return allocUnsafe(t)}return from(t,p,h)}function from(t,p,h){if("string"==typeof t)return function fromString(t,p){"string"==typeof p&&""!==p||(p="utf8");if(!Buffer.isEncoding(p))throw new TypeError("Unknown encoding: "+p);var h=0|byteLength(t,p),x=createBuffer(h),M=x.write(t,p);M!==h&&(x=x.slice(0,M));return x}(t,p);if(ArrayBuffer.isView(t))return function fromArrayView(t){if(isInstance(t,Uint8Array)){var p=new Uint8Array(t);return fromArrayBuffer(p.buffer,p.byteOffset,p.byteLength)}return fromArrayLike(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+_typeof$2(t));if(isInstance(t,ArrayBuffer)||t&&isInstance(t.buffer,ArrayBuffer))return fromArrayBuffer(t,p,h);if("undefined"!=typeof SharedArrayBuffer&&(isInstance(t,SharedArrayBuffer)||t&&isInstance(t.buffer,SharedArrayBuffer)))return fromArrayBuffer(t,p,h);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var x=t.valueOf&&t.valueOf();if(null!=x&&x!==t)return Buffer.from(x,p,h);var M=function fromObject(t){if(Buffer.isBuffer(t)){var p=0|checked(t.length),h=createBuffer(p);return 0===h.length||t.copy(h,0,0,p),h}if(void 0!==t.length)return"number"!=typeof t.length||numberIsNaN(t.length)?createBuffer(0):fromArrayLike(t);if("Buffer"===t.type&&Array.isArray(t.data))return fromArrayLike(t.data)}(t);if(M)return M;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return Buffer.from(t[Symbol.toPrimitive]("string"),p,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+_typeof$2(t))}function assertSize(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function allocUnsafe(t){return assertSize(t),createBuffer(t<0?0:0|checked(t))}function fromArrayLike(t){for(var p=t.length<0?0:0|checked(t.length),h=createBuffer(p),x=0;x<p;x+=1)h[x]=255&t[x];return h}function fromArrayBuffer(t,p,h){if(p<0||t.byteLength<p)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<p+(h||0))throw new RangeError('"length" is outside of buffer bounds');var x;return x=void 0===p&&void 0===h?new Uint8Array(t):void 0===h?new Uint8Array(t,p):new Uint8Array(t,p,h),Object.setPrototypeOf(x,Buffer.prototype),x}function checked(t){if(t>=k)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+k.toString(16)+" bytes");return 0|t}function byteLength(t,p){if(Buffer.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||isInstance(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+_typeof$2(t));var h=t.length,x=arguments.length>2&&!0===arguments[2];if(!x&&0===h)return 0;for(var M=!1;;)switch(p){case"ascii":case"latin1":case"binary":return h;case"utf8":case"utf-8":return utf8ToBytes(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*h;case"hex":return h>>>1;case"base64":return base64ToBytes(t).length;default:if(M)return x?-1:utf8ToBytes(t).length;p=(""+p).toLowerCase(),M=!0}}function slowToString(t,p,h){var x=!1;if((void 0===p||p<0)&&(p=0),p>this.length)return"";if((void 0===h||h>this.length)&&(h=this.length),h<=0)return"";if((h>>>=0)<=(p>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return hexSlice(this,p,h);case"utf8":case"utf-8":return utf8Slice(this,p,h);case"ascii":return asciiSlice(this,p,h);case"latin1":case"binary":return latin1Slice(this,p,h);case"base64":return base64Slice(this,p,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,p,h);default:if(x)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),x=!0}}function swap(t,p,h){var x=t[p];t[p]=t[h],t[h]=x}function bidirectionalIndexOf(t,p,h,x,M){if(0===t.length)return-1;if("string"==typeof h?(x=h,h=0):h>2147483647?h=2147483647:h<-2147483648&&(h=-2147483648),numberIsNaN(h=+h)&&(h=M?0:t.length-1),h<0&&(h=t.length+h),h>=t.length){if(M)return-1;h=t.length-1}else if(h<0){if(!M)return-1;h=0}if("string"==typeof p&&(p=Buffer.from(p,x)),Buffer.isBuffer(p))return 0===p.length?-1:arrayIndexOf(t,p,h,x,M);if("number"==typeof p)return p&=255,"function"==typeof Uint8Array.prototype.indexOf?M?Uint8Array.prototype.indexOf.call(t,p,h):Uint8Array.prototype.lastIndexOf.call(t,p,h):arrayIndexOf(t,[p],h,x,M);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(t,p,h,x,M){var k,I=1,N=t.length,V=p.length;if(void 0!==x&&("ucs2"===(x=String(x).toLowerCase())||"ucs-2"===x||"utf16le"===x||"utf-16le"===x)){if(t.length<2||p.length<2)return-1;I=2,N/=2,V/=2,h/=2}function read(t,p){return 1===I?t[p]:t.readUInt16BE(p*I)}if(M){var ee=-1;for(k=h;k<N;k++)if(read(t,k)===read(p,-1===ee?0:k-ee)){if(-1===ee&&(ee=k),k-ee+1===V)return ee*I}else-1!==ee&&(k-=k-ee),ee=-1}else for(h+V>N&&(h=N-V),k=h;k>=0;k--){for(var te=!0,re=0;re<V;re++)if(read(t,k+re)!==read(p,re)){te=!1;break}if(te)return k}return-1}function hexWrite(t,p,h,x){h=Number(h)||0;var M=t.length-h;x?(x=Number(x))>M&&(x=M):x=M;var k,I=p.length;for(x>I/2&&(x=I/2),k=0;k<x;++k){var N=parseInt(p.substr(2*k,2),16);if(numberIsNaN(N))return k;t[h+k]=N}return k}function utf8Write(t,p,h,x){return blitBuffer(utf8ToBytes(p,t.length-h),t,h,x)}function asciiWrite(t,p,h,x){return blitBuffer(function asciiToBytes(t){for(var p=[],h=0;h<t.length;++h)p.push(255&t.charCodeAt(h));return p}(p),t,h,x)}function base64Write(t,p,h,x){return blitBuffer(base64ToBytes(p),t,h,x)}function ucs2Write(t,p,h,x){return blitBuffer(function utf16leToBytes(t,p){for(var h,x,M,k=[],I=0;I<t.length&&!((p-=2)<0);++I)x=(h=t.charCodeAt(I))>>8,M=h%256,k.push(M),k.push(x);return k}(p,t.length-h),t,h,x)}function base64Slice(t,h,x){return 0===h&&x===t.length?p.fromByteArray(t):p.fromByteArray(t.slice(h,x))}function utf8Slice(t,p,h){h=Math.min(t.length,h);for(var x=[],M=p;M<h;){var k=t[M],N=null,V=k>239?4:k>223?3:k>191?2:1;if(M+V<=h){var ee=void 0,te=void 0,re=void 0,ne=void 0;switch(V){case 1:k<128&&(N=k);break;case 2:128==(192&(ee=t[M+1]))&&(ne=(31&k)<<6|63&ee)>127&&(N=ne);break;case 3:ee=t[M+1],te=t[M+2],128==(192&ee)&&128==(192&te)&&(ne=(15&k)<<12|(63&ee)<<6|63&te)>2047&&(ne<55296||ne>57343)&&(N=ne);break;case 4:ee=t[M+1],te=t[M+2],re=t[M+3],128==(192&ee)&&128==(192&te)&&128==(192&re)&&(ne=(15&k)<<18|(63&ee)<<12|(63&te)<<6|63&re)>65535&&ne<1114112&&(N=ne)}}null===N?(N=65533,V=1):N>65535&&(N-=65536,x.push(N>>>10&1023|55296),N=56320|1023&N),x.push(N),M+=V}return function decodeCodePointsArray(t){var p=t.length;if(p<=I)return String.fromCharCode.apply(String,t);var h="",x=0;for(;x<p;)h+=String.fromCharCode.apply(String,t.slice(x,x+=I));return h}(x)}t.kMaxLength=k,Buffer.TYPED_ARRAY_SUPPORT=function typedArraySupport(){try{var t=new Uint8Array(1),p={foo:function foo(){return 42}};return Object.setPrototypeOf(p,Uint8Array.prototype),Object.setPrototypeOf(t,p),42===t.foo()}catch(h){return!1}}(),!Buffer.TYPED_ARRAY_SUPPORT&&"undefined"!=typeof console&&console.error,Object.defineProperty(Buffer.prototype,"parent",{enumerable:!0,get:function get(){if(Buffer.isBuffer(this))return this.buffer}}),Object.defineProperty(Buffer.prototype,"offset",{enumerable:!0,get:function get(){if(Buffer.isBuffer(this))return this.byteOffset}}),Buffer.poolSize=8192,Buffer.from=function(t,p,h){return from(t,p,h)},Object.setPrototypeOf(Buffer.prototype,Uint8Array.prototype),Object.setPrototypeOf(Buffer,Uint8Array),Buffer.alloc=function(t,p,h){return function alloc(t,p,h){return assertSize(t),t<=0?createBuffer(t):void 0!==p?"string"==typeof h?createBuffer(t).fill(p,h):createBuffer(t).fill(p):createBuffer(t)}(t,p,h)},Buffer.allocUnsafe=function(t){return allocUnsafe(t)},Buffer.allocUnsafeSlow=function(t){return allocUnsafe(t)},Buffer.isBuffer=function isBuffer(t){return null!=t&&!0===t._isBuffer&&t!==Buffer.prototype},Buffer.compare=function compare(t,p){if(isInstance(t,Uint8Array)&&(t=Buffer.from(t,t.offset,t.byteLength)),isInstance(p,Uint8Array)&&(p=Buffer.from(p,p.offset,p.byteLength)),!Buffer.isBuffer(t)||!Buffer.isBuffer(p))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===p)return 0;for(var h=t.length,x=p.length,M=0,k=Math.min(h,x);M<k;++M)if(t[M]!==p[M]){h=t[M],x=p[M];break}return h<x?-1:x<h?1:0},Buffer.isEncoding=function isEncoding(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function concat(t,p){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return Buffer.alloc(0);var h;if(void 0===p)for(p=0,h=0;h<t.length;++h)p+=t[h].length;var x=Buffer.allocUnsafe(p),M=0;for(h=0;h<t.length;++h){var k=t[h];if(isInstance(k,Uint8Array))M+k.length>x.length?(Buffer.isBuffer(k)||(k=Buffer.from(k)),k.copy(x,M)):Uint8Array.prototype.set.call(x,k,M);else{if(!Buffer.isBuffer(k))throw new TypeError('"list" argument must be an Array of Buffers');k.copy(x,M)}M+=k.length}return x},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function swap16(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var p=0;p<t;p+=2)swap(this,p,p+1);return this},Buffer.prototype.swap32=function swap32(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var p=0;p<t;p+=4)swap(this,p,p+3),swap(this,p+1,p+2);return this},Buffer.prototype.swap64=function swap64(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var p=0;p<t;p+=8)swap(this,p,p+7),swap(this,p+1,p+6),swap(this,p+2,p+5),swap(this,p+3,p+4);return this},Buffer.prototype.toString=function toString(){var t=this.length;return 0===t?"":0===arguments.length?utf8Slice(this,0,t):slowToString.apply(this,arguments)},Buffer.prototype.toLocaleString=Buffer.prototype.toString,Buffer.prototype.equals=function equals(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===Buffer.compare(this,t)},Buffer.prototype.inspect=function inspect(){var p="",h=t.INSPECT_MAX_BYTES;return p=this.toString("hex",0,h).replace(/(.{2})/g,"$1 ").trim(),this.length>h&&(p+=" ... "),"<Buffer "+p+">"},M&&(Buffer.prototype[M]=Buffer.prototype.inspect),Buffer.prototype.compare=function compare(t,p,h,x,M){if(isInstance(t,Uint8Array)&&(t=Buffer.from(t,t.offset,t.byteLength)),!Buffer.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+_typeof$2(t));if(void 0===p&&(p=0),void 0===h&&(h=t?t.length:0),void 0===x&&(x=0),void 0===M&&(M=this.length),p<0||h>t.length||x<0||M>this.length)throw new RangeError("out of range index");if(x>=M&&p>=h)return 0;if(x>=M)return-1;if(p>=h)return 1;if(this===t)return 0;for(var k=(M>>>=0)-(x>>>=0),I=(h>>>=0)-(p>>>=0),N=Math.min(k,I),V=this.slice(x,M),ee=t.slice(p,h),te=0;te<N;++te)if(V[te]!==ee[te]){k=V[te],I=ee[te];break}return k<I?-1:I<k?1:0},Buffer.prototype.includes=function includes(t,p,h){return-1!==this.indexOf(t,p,h)},Buffer.prototype.indexOf=function indexOf(t,p,h){return bidirectionalIndexOf(this,t,p,h,!0)},Buffer.prototype.lastIndexOf=function lastIndexOf(t,p,h){return bidirectionalIndexOf(this,t,p,h,!1)},Buffer.prototype.write=function write(t,p,h,x){if(void 0===p)x="utf8",h=this.length,p=0;else if(void 0===h&&"string"==typeof p)x=p,h=this.length,p=0;else{if(!isFinite(p))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");p>>>=0,isFinite(h)?(h>>>=0,void 0===x&&(x="utf8")):(x=h,h=void 0)}var M=this.length-p;if((void 0===h||h>M)&&(h=M),t.length>0&&(h<0||p<0)||p>this.length)throw new RangeError("Attempt to write outside buffer bounds");x||(x="utf8");for(var k=!1;;)switch(x){case"hex":return hexWrite(this,t,p,h);case"utf8":case"utf-8":return utf8Write(this,t,p,h);case"ascii":case"latin1":case"binary":return asciiWrite(this,t,p,h);case"base64":return base64Write(this,t,p,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,t,p,h);default:if(k)throw new TypeError("Unknown encoding: "+x);x=(""+x).toLowerCase(),k=!0}},Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function asciiSlice(t,p,h){var x="";h=Math.min(t.length,h);for(var M=p;M<h;++M)x+=String.fromCharCode(127&t[M]);return x}function latin1Slice(t,p,h){var x="";h=Math.min(t.length,h);for(var M=p;M<h;++M)x+=String.fromCharCode(t[M]);return x}function hexSlice(t,p,h){var x=t.length;(!p||p<0)&&(p=0),(!h||h<0||h>x)&&(h=x);for(var M="",k=p;k<h;++k)M+=te[t[k]];return M}function utf16leSlice(t,p,h){for(var x=t.slice(p,h),M="",k=0;k<x.length-1;k+=2)M+=String.fromCharCode(x[k]+256*x[k+1]);return M}function checkOffset(t,p,h){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+p>h)throw new RangeError("Trying to access beyond buffer length")}function checkInt(t,p,h,x,M,k){if(!Buffer.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(p>M||p<k)throw new RangeError('"value" argument is out of bounds');if(h+x>t.length)throw new RangeError("Index out of range")}function wrtBigUInt64LE(t,p,h,x,M){checkIntBI(p,x,M,t,h,7);var k=Number(p&BigInt(4294967295));t[h++]=k,k>>=8,t[h++]=k,k>>=8,t[h++]=k,k>>=8,t[h++]=k;var I=Number(p>>BigInt(32)&BigInt(4294967295));return t[h++]=I,I>>=8,t[h++]=I,I>>=8,t[h++]=I,I>>=8,t[h++]=I,h}function wrtBigUInt64BE(t,p,h,x,M){checkIntBI(p,x,M,t,h,7);var k=Number(p&BigInt(4294967295));t[h+7]=k,k>>=8,t[h+6]=k,k>>=8,t[h+5]=k,k>>=8,t[h+4]=k;var I=Number(p>>BigInt(32)&BigInt(4294967295));return t[h+3]=I,I>>=8,t[h+2]=I,I>>=8,t[h+1]=I,I>>=8,t[h]=I,h+8}function checkIEEE754(t,p,h,x,M,k){if(h+x>t.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("Index out of range")}function writeFloat(t,p,x,M,k){return p=+p,x>>>=0,k||checkIEEE754(t,0,x,4),h.write(t,p,x,M,23,4),x+4}function writeDouble(t,p,x,M,k){return p=+p,x>>>=0,k||checkIEEE754(t,0,x,8),h.write(t,p,x,M,52,8),x+8}Buffer.prototype.slice=function slice(t,p){var h=this.length;(t=~~t)<0?(t+=h)<0&&(t=0):t>h&&(t=h),(p=void 0===p?h:~~p)<0?(p+=h)<0&&(p=0):p>h&&(p=h),p<t&&(p=t);var x=this.subarray(t,p);return Object.setPrototypeOf(x,Buffer.prototype),x},Buffer.prototype.readUintLE=Buffer.prototype.readUIntLE=function readUIntLE(t,p,h){t>>>=0,p>>>=0,h||checkOffset(t,p,this.length);for(var x=this[t],M=1,k=0;++k<p&&(M*=256);)x+=this[t+k]*M;return x},Buffer.prototype.readUintBE=Buffer.prototype.readUIntBE=function readUIntBE(t,p,h){t>>>=0,p>>>=0,h||checkOffset(t,p,this.length);for(var x=this[t+--p],M=1;p>0&&(M*=256);)x+=this[t+--p]*M;return x},Buffer.prototype.readUint8=Buffer.prototype.readUInt8=function readUInt8(t,p){return t>>>=0,p||checkOffset(t,1,this.length),this[t]},Buffer.prototype.readUint16LE=Buffer.prototype.readUInt16LE=function readUInt16LE(t,p){return t>>>=0,p||checkOffset(t,2,this.length),this[t]|this[t+1]<<8},Buffer.prototype.readUint16BE=Buffer.prototype.readUInt16BE=function readUInt16BE(t,p){return t>>>=0,p||checkOffset(t,2,this.length),this[t]<<8|this[t+1]},Buffer.prototype.readUint32LE=Buffer.prototype.readUInt32LE=function readUInt32LE(t,p){return t>>>=0,p||checkOffset(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Buffer.prototype.readUint32BE=Buffer.prototype.readUInt32BE=function readUInt32BE(t,p){return t>>>=0,p||checkOffset(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Buffer.prototype.readBigUInt64LE=defineBigIntMethod((function readBigUInt64LE(t){validateNumber(t>>>=0,"offset");var p=this[t],h=this[t+7];void 0!==p&&void 0!==h||boundsError(t,this.length-8);var x=p+this[++t]*Math.pow(2,8)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,24),M=this[++t]+this[++t]*Math.pow(2,8)+this[++t]*Math.pow(2,16)+h*Math.pow(2,24);return BigInt(x)+(BigInt(M)<<BigInt(32))})),Buffer.prototype.readBigUInt64BE=defineBigIntMethod((function readBigUInt64BE(t){validateNumber(t>>>=0,"offset");var p=this[t],h=this[t+7];void 0!==p&&void 0!==h||boundsError(t,this.length-8);var x=p*Math.pow(2,24)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,8)+this[++t],M=this[++t]*Math.pow(2,24)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,8)+h;return(BigInt(x)<<BigInt(32))+BigInt(M)})),Buffer.prototype.readIntLE=function readIntLE(t,p,h){t>>>=0,p>>>=0,h||checkOffset(t,p,this.length);for(var x=this[t],M=1,k=0;++k<p&&(M*=256);)x+=this[t+k]*M;return x>=(M*=128)&&(x-=Math.pow(2,8*p)),x},Buffer.prototype.readIntBE=function readIntBE(t,p,h){t>>>=0,p>>>=0,h||checkOffset(t,p,this.length);for(var x=p,M=1,k=this[t+--x];x>0&&(M*=256);)k+=this[t+--x]*M;return k>=(M*=128)&&(k-=Math.pow(2,8*p)),k},Buffer.prototype.readInt8=function readInt8(t,p){return t>>>=0,p||checkOffset(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},Buffer.prototype.readInt16LE=function readInt16LE(t,p){t>>>=0,p||checkOffset(t,2,this.length);var h=this[t]|this[t+1]<<8;return 32768&h?4294901760|h:h},Buffer.prototype.readInt16BE=function readInt16BE(t,p){t>>>=0,p||checkOffset(t,2,this.length);var h=this[t+1]|this[t]<<8;return 32768&h?4294901760|h:h},Buffer.prototype.readInt32LE=function readInt32LE(t,p){return t>>>=0,p||checkOffset(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Buffer.prototype.readInt32BE=function readInt32BE(t,p){return t>>>=0,p||checkOffset(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Buffer.prototype.readBigInt64LE=defineBigIntMethod((function readBigInt64LE(t){validateNumber(t>>>=0,"offset");var p=this[t],h=this[t+7];void 0!==p&&void 0!==h||boundsError(t,this.length-8);var x=this[t+4]+this[t+5]*Math.pow(2,8)+this[t+6]*Math.pow(2,16)+(h<<24);return(BigInt(x)<<BigInt(32))+BigInt(p+this[++t]*Math.pow(2,8)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,24))})),Buffer.prototype.readBigInt64BE=defineBigIntMethod((function readBigInt64BE(t){validateNumber(t>>>=0,"offset");var p=this[t],h=this[t+7];void 0!==p&&void 0!==h||boundsError(t,this.length-8);var x=(p<<24)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,8)+this[++t];return(BigInt(x)<<BigInt(32))+BigInt(this[++t]*Math.pow(2,24)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,8)+h)})),Buffer.prototype.readFloatLE=function readFloatLE(t,p){return t>>>=0,p||checkOffset(t,4,this.length),h.read(this,t,!0,23,4)},Buffer.prototype.readFloatBE=function readFloatBE(t,p){return t>>>=0,p||checkOffset(t,4,this.length),h.read(this,t,!1,23,4)},Buffer.prototype.readDoubleLE=function readDoubleLE(t,p){return t>>>=0,p||checkOffset(t,8,this.length),h.read(this,t,!0,52,8)},Buffer.prototype.readDoubleBE=function readDoubleBE(t,p){return t>>>=0,p||checkOffset(t,8,this.length),h.read(this,t,!1,52,8)},Buffer.prototype.writeUintLE=Buffer.prototype.writeUIntLE=function writeUIntLE(t,p,h,x){(t=+t,p>>>=0,h>>>=0,x)||checkInt(this,t,p,h,Math.pow(2,8*h)-1,0);var M=1,k=0;for(this[p]=255&t;++k<h&&(M*=256);)this[p+k]=t/M&255;return p+h},Buffer.prototype.writeUintBE=Buffer.prototype.writeUIntBE=function writeUIntBE(t,p,h,x){(t=+t,p>>>=0,h>>>=0,x)||checkInt(this,t,p,h,Math.pow(2,8*h)-1,0);var M=h-1,k=1;for(this[p+M]=255&t;--M>=0&&(k*=256);)this[p+M]=t/k&255;return p+h},Buffer.prototype.writeUint8=Buffer.prototype.writeUInt8=function writeUInt8(t,p,h){return t=+t,p>>>=0,h||checkInt(this,t,p,1,255,0),this[p]=255&t,p+1},Buffer.prototype.writeUint16LE=Buffer.prototype.writeUInt16LE=function writeUInt16LE(t,p,h){return t=+t,p>>>=0,h||checkInt(this,t,p,2,65535,0),this[p]=255&t,this[p+1]=t>>>8,p+2},Buffer.prototype.writeUint16BE=Buffer.prototype.writeUInt16BE=function writeUInt16BE(t,p,h){return t=+t,p>>>=0,h||checkInt(this,t,p,2,65535,0),this[p]=t>>>8,this[p+1]=255&t,p+2},Buffer.prototype.writeUint32LE=Buffer.prototype.writeUInt32LE=function writeUInt32LE(t,p,h){return t=+t,p>>>=0,h||checkInt(this,t,p,4,4294967295,0),this[p+3]=t>>>24,this[p+2]=t>>>16,this[p+1]=t>>>8,this[p]=255&t,p+4},Buffer.prototype.writeUint32BE=Buffer.prototype.writeUInt32BE=function writeUInt32BE(t,p,h){return t=+t,p>>>=0,h||checkInt(this,t,p,4,4294967295,0),this[p]=t>>>24,this[p+1]=t>>>16,this[p+2]=t>>>8,this[p+3]=255&t,p+4},Buffer.prototype.writeBigUInt64LE=defineBigIntMethod((function writeBigUInt64LE(t){return wrtBigUInt64LE(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),Buffer.prototype.writeBigUInt64BE=defineBigIntMethod((function writeBigUInt64BE(t){return wrtBigUInt64BE(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),Buffer.prototype.writeIntLE=function writeIntLE(t,p,h,x){if(t=+t,p>>>=0,!x){var M=Math.pow(2,8*h-1);checkInt(this,t,p,h,M-1,-M)}var k=0,I=1,N=0;for(this[p]=255&t;++k<h&&(I*=256);)t<0&&0===N&&0!==this[p+k-1]&&(N=1),this[p+k]=(t/I>>0)-N&255;return p+h},Buffer.prototype.writeIntBE=function writeIntBE(t,p,h,x){if(t=+t,p>>>=0,!x){var M=Math.pow(2,8*h-1);checkInt(this,t,p,h,M-1,-M)}var k=h-1,I=1,N=0;for(this[p+k]=255&t;--k>=0&&(I*=256);)t<0&&0===N&&0!==this[p+k+1]&&(N=1),this[p+k]=(t/I>>0)-N&255;return p+h},Buffer.prototype.writeInt8=function writeInt8(t,p,h){return t=+t,p>>>=0,h||checkInt(this,t,p,1,127,-128),t<0&&(t=255+t+1),this[p]=255&t,p+1},Buffer.prototype.writeInt16LE=function writeInt16LE(t,p,h){return t=+t,p>>>=0,h||checkInt(this,t,p,2,32767,-32768),this[p]=255&t,this[p+1]=t>>>8,p+2},Buffer.prototype.writeInt16BE=function writeInt16BE(t,p,h){return t=+t,p>>>=0,h||checkInt(this,t,p,2,32767,-32768),this[p]=t>>>8,this[p+1]=255&t,p+2},Buffer.prototype.writeInt32LE=function writeInt32LE(t,p,h){return t=+t,p>>>=0,h||checkInt(this,t,p,4,2147483647,-2147483648),this[p]=255&t,this[p+1]=t>>>8,this[p+2]=t>>>16,this[p+3]=t>>>24,p+4},Buffer.prototype.writeInt32BE=function writeInt32BE(t,p,h){return t=+t,p>>>=0,h||checkInt(this,t,p,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[p]=t>>>24,this[p+1]=t>>>16,this[p+2]=t>>>8,this[p+3]=255&t,p+4},Buffer.prototype.writeBigInt64LE=defineBigIntMethod((function writeBigInt64LE(t){return wrtBigUInt64LE(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),Buffer.prototype.writeBigInt64BE=defineBigIntMethod((function writeBigInt64BE(t){return wrtBigUInt64BE(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),Buffer.prototype.writeFloatLE=function writeFloatLE(t,p,h){return writeFloat(this,t,p,!0,h)},Buffer.prototype.writeFloatBE=function writeFloatBE(t,p,h){return writeFloat(this,t,p,!1,h)},Buffer.prototype.writeDoubleLE=function writeDoubleLE(t,p,h){return writeDouble(this,t,p,!0,h)},Buffer.prototype.writeDoubleBE=function writeDoubleBE(t,p,h){return writeDouble(this,t,p,!1,h)},Buffer.prototype.copy=function copy(t,p,h,x){if(!Buffer.isBuffer(t))throw new TypeError("argument should be a Buffer");if(h||(h=0),x||0===x||(x=this.length),p>=t.length&&(p=t.length),p||(p=0),x>0&&x<h&&(x=h),x===h)return 0;if(0===t.length||0===this.length)return 0;if(p<0)throw new RangeError("targetStart out of bounds");if(h<0||h>=this.length)throw new RangeError("Index out of range");if(x<0)throw new RangeError("sourceEnd out of bounds");x>this.length&&(x=this.length),t.length-p<x-h&&(x=t.length-p+h);var M=x-h;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(p,h,x):Uint8Array.prototype.set.call(t,this.subarray(h,x),p),M},Buffer.prototype.fill=function fill(t,p,h,x){if("string"==typeof t){if("string"==typeof p?(x=p,p=0,h=this.length):"string"==typeof h&&(x=h,h=this.length),void 0!==x&&"string"!=typeof x)throw new TypeError("encoding must be a string");if("string"==typeof x&&!Buffer.isEncoding(x))throw new TypeError("Unknown encoding: "+x);if(1===t.length){var M=t.charCodeAt(0);("utf8"===x&&M<128||"latin1"===x)&&(t=M)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(p<0||this.length<p||this.length<h)throw new RangeError("Out of range index");if(h<=p)return this;var k;if(p>>>=0,h=void 0===h?this.length:h>>>0,t||(t=0),"number"==typeof t)for(k=p;k<h;++k)this[k]=t;else{var I=Buffer.isBuffer(t)?t:Buffer.from(t,x),N=I.length;if(0===N)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(k=0;k<h-p;++k)this[k+p]=I[k%N]}return this};var N={};function E(t,p,h){N[t]=function(h){_inherits$1(NodeError,h);var x=_createSuper$c(NodeError);function NodeError(){var h;return _classCallCheck$1(this,NodeError),h=x.call(this),Object.defineProperty(_assertThisInitialized$1(h),"message",{value:p.apply(_assertThisInitialized$1(h),arguments),writable:!0,configurable:!0}),h.name="".concat(h.name," [").concat(t,"]"),h.stack,delete h.name,h}return _createClass$1(NodeError,[{key:"code",get:function get(){return t},set:function set(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}},{key:"toString",value:function toString(){return"".concat(this.name," [").concat(t,"]: ").concat(this.message)}}]),NodeError}(h)}function addNumericalSeparator(t){for(var p="",h=t.length,x="-"===t[0]?1:0;h>=x+4;h-=3)p="_".concat(t.slice(h-3,h)).concat(p);return"".concat(t.slice(0,h)).concat(p)}function checkIntBI(t,p,h,x,M,k){if(t>h||t<p){var I,V="bigint"==typeof p?"n":"";throw I=k>3?0===p||p===BigInt(0)?">= 0".concat(V," and < 2").concat(V," ** ").concat(8*(k+1)).concat(V):">= -(2".concat(V," ** ").concat(8*(k+1)-1).concat(V,") and < 2 ** ")+"".concat(8*(k+1)-1).concat(V):">= ".concat(p).concat(V," and <= ").concat(h).concat(V),new N.ERR_OUT_OF_RANGE("value",I,t)}!function checkBounds(t,p,h){validateNumber(p,"offset"),void 0!==t[p]&&void 0!==t[p+h]||boundsError(p,t.length-(h+1))}(x,M,k)}function validateNumber(t,p){if("number"!=typeof t)throw new N.ERR_INVALID_ARG_TYPE(p,"number",t)}function boundsError(t,p,h){if(Math.floor(t)!==t)throw validateNumber(t,h),new N.ERR_OUT_OF_RANGE(h||"offset","an integer",t);if(p<0)throw new N.ERR_BUFFER_OUT_OF_BOUNDS;throw new N.ERR_OUT_OF_RANGE(h||"offset",">= ".concat(h?1:0," and <= ").concat(p),t)}E("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?"".concat(t," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),E("ERR_INVALID_ARG_TYPE",(function(t,p){return'The "'.concat(t,'" argument must be of type number. Received type ').concat(_typeof$2(p))}),TypeError),E("ERR_OUT_OF_RANGE",(function(t,p,h){var x='The value of "'.concat(t,'" is out of range.'),M=h;return Number.isInteger(h)&&Math.abs(h)>Math.pow(2,32)?M=addNumericalSeparator(String(h)):"bigint"==typeof h&&(M=String(h),(h>Math.pow(BigInt(2),BigInt(32))||h<-Math.pow(BigInt(2),BigInt(32)))&&(M=addNumericalSeparator(M)),M+="n"),x+=" It must be ".concat(p,". Received ").concat(M)}),RangeError);var V=/[^+/0-9A-Za-z-_]/g;function utf8ToBytes(t,p){var h;p=p||1/0;for(var x=t.length,M=null,k=[],I=0;I<x;++I){if((h=t.charCodeAt(I))>55295&&h<57344){if(!M){if(h>56319){(p-=3)>-1&&k.push(239,191,189);continue}if(I+1===x){(p-=3)>-1&&k.push(239,191,189);continue}M=h;continue}if(h<56320){(p-=3)>-1&&k.push(239,191,189),M=h;continue}h=65536+(M-55296<<10|h-56320)}else M&&(p-=3)>-1&&k.push(239,191,189);if(M=null,h<128){if((p-=1)<0)break;k.push(h)}else if(h<2048){if((p-=2)<0)break;k.push(h>>6|192,63&h|128)}else if(h<65536){if((p-=3)<0)break;k.push(h>>12|224,h>>6&63|128,63&h|128)}else{if(!(h<1114112))throw new Error("Invalid code point");if((p-=4)<0)break;k.push(h>>18|240,h>>12&63|128,h>>6&63|128,63&h|128)}}return k}function base64ToBytes(t){return p.toByteArray(function base64clean(t){if((t=(t=t.split("=")[0]).trim().replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function blitBuffer(t,p,h,x){var M;for(M=0;M<x&&!(M+h>=p.length||M>=t.length);++M)p[M+h]=t[M];return M}function isInstance(t,p){return t instanceof p||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===p.name}function numberIsNaN(t){return t!=t}var te=function(){for(var t="0123456789abcdef",p=new Array(256),h=0;h<16;++h)for(var x=16*h,M=0;M<16;++M)p[x+M]=t[h]+t[M];return p}();function defineBigIntMethod(t){return"undefined"==typeof BigInt?BufferBigIntNotDefined:t}function BufferBigIntNotDefined(){throw new Error("BigInt not supported")}}(h);var te={exports:{}},re={exports:{}};!function(t){function _typeof(p){return t.exports=_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,_typeof(p)}t.exports=_typeof,t.exports.__esModule=!0,t.exports.default=t.exports}(re),function(t){var p=re.exports.default;function _regeneratorRuntime(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
t.exports=_regeneratorRuntime=function _regeneratorRuntime(){return x},t.exports.__esModule=!0,t.exports.default=t.exports;var h,x={},M=Object.prototype,k=M.hasOwnProperty,I=Object.defineProperty||function(t,p,h){t[p]=h.value},N="function"==typeof Symbol?Symbol:{},V=N.iterator||"@@iterator",ee=N.asyncIterator||"@@asyncIterator",te=N.toStringTag||"@@toStringTag";function define(t,p,h){return Object.defineProperty(t,p,{value:h,enumerable:!0,configurable:!0,writable:!0}),t[p]}try{define({},"")}catch(h){define=function define(t,p,h){return t[p]=h}}function wrap(t,p,h,x){var M=p&&p.prototype instanceof Generator?p:Generator,k=Object.create(M.prototype),N=new Context(x||[]);return I(k,"_invoke",{value:makeInvokeMethod(t,h,N)}),k}function tryCatch(t,p,h){try{return{type:"normal",arg:t.call(p,h)}}catch(t){return{type:"throw",arg:t}}}x.wrap=wrap;var re="suspendedStart",ne="suspendedYield",ie="executing",ae="completed",oe={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var se={};define(se,V,(function(){return this}));var ce=Object.getPrototypeOf,ue=ce&&ce(ce(values([])));ue&&ue!==M&&k.call(ue,V)&&(se=ue);var le=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(se);function defineIteratorMethods(t){["next","throw","return"].forEach((function(p){define(t,p,(function(t){return this._invoke(p,t)}))}))}function AsyncIterator(t,h){function invoke(x,M,I,N){var V=tryCatch(t[x],t,M);if("throw"!==V.type){var ee=V.arg,te=ee.value;return te&&"object"==p(te)&&k.call(te,"__await")?h.resolve(te.__await).then((function(t){invoke("next",t,I,N)}),(function(t){invoke("throw",t,I,N)})):h.resolve(te).then((function(t){ee.value=t,I(ee)}),(function(t){return invoke("throw",t,I,N)}))}N(V.arg)}var x;I(this,"_invoke",{value:function value(t,p){function callInvokeWithMethodAndArg(){return new h((function(h,x){invoke(t,p,h,x)}))}return x=x?x.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,p,x){var M=re;return function(k,I){if(M===ie)throw new Error("Generator is already running");if(M===ae){if("throw"===k)throw I;return{value:h,done:!0}}for(x.method=k,x.arg=I;;){var N=x.delegate;if(N){var V=maybeInvokeDelegate(N,x);if(V){if(V===oe)continue;return V}}if("next"===x.method)x.sent=x._sent=x.arg;else if("throw"===x.method){if(M===re)throw M=ae,x.arg;x.dispatchException(x.arg)}else"return"===x.method&&x.abrupt("return",x.arg);M=ie;var ee=tryCatch(t,p,x);if("normal"===ee.type){if(M=x.done?ae:ne,ee.arg===oe)continue;return{value:ee.arg,done:x.done}}"throw"===ee.type&&(M=ae,x.method="throw",x.arg=ee.arg)}}}function maybeInvokeDelegate(t,p){var x=p.method,M=t.iterator[x];if(M===h)return p.delegate=null,"throw"===x&&t.iterator.return&&(p.method="return",p.arg=h,maybeInvokeDelegate(t,p),"throw"===p.method)||"return"!==x&&(p.method="throw",p.arg=new TypeError("The iterator does not provide a '"+x+"' method")),oe;var k=tryCatch(M,t.iterator,p.arg);if("throw"===k.type)return p.method="throw",p.arg=k.arg,p.delegate=null,oe;var I=k.arg;return I?I.done?(p[t.resultName]=I.value,p.next=t.nextLoc,"return"!==p.method&&(p.method="next",p.arg=h),p.delegate=null,oe):I:(p.method="throw",p.arg=new TypeError("iterator result is not an object"),p.delegate=null,oe)}function pushTryEntry(t){var p={tryLoc:t[0]};1 in t&&(p.catchLoc=t[1]),2 in t&&(p.finallyLoc=t[2],p.afterLoc=t[3]),this.tryEntries.push(p)}function resetTryEntry(t){var p=t.completion||{};p.type="normal",delete p.arg,t.completion=p}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t||""===t){var x=t[V];if(x)return x.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var M=-1,I=function next(){for(;++M<t.length;)if(k.call(t,M))return next.value=t[M],next.done=!1,next;return next.value=h,next.done=!0,next};return I.next=I}}throw new TypeError(p(t)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,I(le,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),I(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,te,"GeneratorFunction"),x.isGeneratorFunction=function(t){var p="function"==typeof t&&t.constructor;return!!p&&(p===GeneratorFunction||"GeneratorFunction"===(p.displayName||p.name))},x.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,te,"GeneratorFunction")),t.prototype=Object.create(le),t},x.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,ee,(function(){return this})),x.AsyncIterator=AsyncIterator,x.async=function(t,p,h,M,k){void 0===k&&(k=Promise);var I=new AsyncIterator(wrap(t,p,h,M),k);return x.isGeneratorFunction(p)?I:I.next().then((function(t){return t.done?t.value:I.next()}))},defineIteratorMethods(le),define(le,te,"Generator"),define(le,V,(function(){return this})),define(le,"toString",(function(){return"[object Generator]"})),x.keys=function(t){var p=Object(t),h=[];for(var x in p)h.push(x);return h.reverse(),function next(){for(;h.length;){var t=h.pop();if(t in p)return next.value=t,next.done=!1,next}return next.done=!0,next}},x.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=h,this.done=!1,this.delegate=null,this.method="next",this.arg=h,this.tryEntries.forEach(resetTryEntry),!t)for(var p in this)"t"===p.charAt(0)&&k.call(this,p)&&!isNaN(+p.slice(1))&&(this[p]=h)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var p=this;function handle(x,M){return I.type="throw",I.arg=t,p.next=x,M&&(p.method="next",p.arg=h),!!M}for(var x=this.tryEntries.length-1;x>=0;--x){var M=this.tryEntries[x],I=M.completion;if("root"===M.tryLoc)return handle("end");if(M.tryLoc<=this.prev){var N=k.call(M,"catchLoc"),V=k.call(M,"finallyLoc");if(N&&V){if(this.prev<M.catchLoc)return handle(M.catchLoc,!0);if(this.prev<M.finallyLoc)return handle(M.finallyLoc)}else if(N){if(this.prev<M.catchLoc)return handle(M.catchLoc,!0)}else{if(!V)throw new Error("try statement without catch or finally");if(this.prev<M.finallyLoc)return handle(M.finallyLoc)}}}},abrupt:function abrupt(t,p){for(var h=this.tryEntries.length-1;h>=0;--h){var x=this.tryEntries[h];if(x.tryLoc<=this.prev&&k.call(x,"finallyLoc")&&this.prev<x.finallyLoc){var M=x;break}}M&&("break"===t||"continue"===t)&&M.tryLoc<=p&&p<=M.finallyLoc&&(M=null);var I=M?M.completion:{};return I.type=t,I.arg=p,M?(this.method="next",this.next=M.finallyLoc,oe):this.complete(I)},complete:function complete(t,p){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&p&&(this.next=p),oe},finish:function finish(t){for(var p=this.tryEntries.length-1;p>=0;--p){var h=this.tryEntries[p];if(h.finallyLoc===t)return this.complete(h.completion,h.afterLoc),resetTryEntry(h),oe}},catch:function _catch(t){for(var p=this.tryEntries.length-1;p>=0;--p){var h=this.tryEntries[p];if(h.tryLoc===t){var x=h.completion;if("throw"===x.type){var M=x.arg;resetTryEntry(h)}return M}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,p,x){return this.delegate={iterator:values(t),resultName:p,nextLoc:x},"next"===this.method&&(this.arg=h),oe}},x}t.exports=_regeneratorRuntime,t.exports.__esModule=!0,t.exports.default=t.exports}(te);var ne=te.exports(),ie=ne;try{regeneratorRuntime=ne}catch(xm){"object"===("undefined"==typeof globalThis?"undefined":_typeof$2(globalThis))?globalThis.regeneratorRuntime=ne:Function("r","regeneratorRuntime = r")(ne)}function b64Encode(t){return btoa(unescape(encodeURIComponent(t)))}function b64Decode(t){return decodeURIComponent(escape(atob(t)))}function saveAsFileDialog(t){return _saveAsFileDialog.apply(this,arguments)}function _saveAsFileDialog(){return(_saveAsFileDialog=_asyncToGenerator(ie.mark((function _callee3(t){var p,h,x,M,k,I,N,V,ee,te,re;return ie.wrap((function _callee3$(ne){for(;;)switch(ne.prev=ne.next){case 0:if(p=t.blob,h=t.filename,x=void 0===h?"":h,M=t.types,k=void 0===M?[{description:"mxweb File",accept:{"application/octet-stream":[".mxweb"]}}]:M,ne.prev=1,!window.showSaveFilePicker){ne.next=28;break}if(null===(N=window.navigator)||void 0===N||null===(V=N.userActivation)||void 0===V||!V.isActive){ne.next=27;break}if(ne.prev=4,window.showSaveFilePicker){ne.next=7;break}return ne.abrupt("return");case 7:return ne.next=9,window.showSaveFilePicker({suggestedName:x,types:k});case 9:return ee=ne.sent,ne.next=12,ee.createWritable();case 12:return te=ne.sent,ne.next=15,te.write(p);case 15:return ne.next=17,te.close();case 17:return ne.abrupt("return",ee);case 20:if(ne.prev=20,ne.t0=ne.catch(4),"AbortError"!==(null===ne.t0||void 0===ne.t0?void 0:ne.t0.name)){ne.next=24;break}return ne.abrupt("return");case 24:case 25:ne.next=28;break;case 27:case 28:if(null===(I=window.navigator)||void 0===I||!I.msSaveOrOpenBlob){ne.next=31;break}return window.navigator.msSaveOrOpenBlob(p,x),ne.abrupt("return");case 31:(re=document.createElement("a")).href=window.URL.createObjectURL(p),re.download=x,re.style.display="none",document.body.appendChild(re),re.click(),document.body.removeChild(re),"function"==typeof window.URL.revokeObjectURL?window.URL.revokeObjectURL(re.href):void 0!==window.webkitURL&&"function"==typeof window.webkitURL.revokeObjectURL?window.webkitURL.revokeObjectURL(re.href):window.URL.revokeObjectURL(re.href),ne.next=44;break;case 41:ne.prev=41,ne.t1=ne.catch(1);case 44:case"end":return ne.stop()}}),_callee3,null,[[1,41],[4,20]])})))).apply(this,arguments)}function downloadFile(t,p){var h=document.createElement("a");h.href=window.URL.createObjectURL(t),h.download=p,h.click()}function downloadFileFromUrl(t,p){fetch(t).then((function(t){return t.blob()})).then((function(t){var h=document.createElement("a");h.href=window.URL.createObjectURL(t),h.download=p,h.click()}))}var ae=function(){var t=_asyncToGenerator(ie.mark((function _callee(t){return ie.wrap((function _callee$(p){for(;;)switch(p.prev=p.next){case 0:return p.prev=0,p.next=3,fetch(t);case 3:return p.next=5,p.sent.json();case 5:return p.abrupt("return",p.sent);case 8:p.prev=8,p.t0=p.catch(0);case 11:case"end":return p.stop()}}),_callee,null,[[0,8]])})));return function getJsonFromUrl(p){return t.apply(this,arguments)}}(),oe=function(){var t=_asyncToGenerator(ie.mark((function _callee2(t){return ie.wrap((function _callee2$(p){for(;;)switch(p.prev=p.next){case 0:return p.prev=0,p.next=3,fetch(t);case 3:return p.abrupt("return",p.sent);case 6:p.prev=6,p.t0=p.catch(0);case 9:case"end":return p.stop()}}),_callee2,null,[[0,6]])})));return function getFileFromUrl(p){return t.apply(this,arguments)}}();function _ML_String(t,h){return p.MxFun.getLanguageString(t,h)}function IsZero(t){return Math.abs(t)<1e-7}function postMemoryFile(t,p,h,x,M){try{var k=new FormData,I=new Blob([t],{type:"application/octet-stream"});k.append("file",new File([I],h)),M&&k.append("param",M);var N=new XMLHttpRequest;N.open("POST",p),N.send(k),N.onreadystatechange=function(){N.readyState===XMLHttpRequest.DONE&&(200===N.status?x(0,N.responseText):x(4,"server error"))}}catch(V){x(-1,"catch error")}}function postEmscriptenIndexedDBFile(t,p,h,x){var M=window.indexedDB.open("emscripten_filesystem",1);M.onerror=function(){h(1,"open emscripten_filesystem failed")},M.onsuccess=function(M){try{if(null!=M.target){var k=M.target.result.transaction("FILES","readonly").objectStore("FILES").get(t);k.onerror=function(){h(3,"get file error")},k.onsuccess=function(){var t=k.result;if(t){var M=new FormData;M.append("file",t),x&&M.append("param",x);var I=new XMLHttpRequest;I.open("POST",p),I.send(M),I.onreadystatechange=function(){I.readyState===XMLHttpRequest.DONE&&(200===I.status?h(0,I.responseText):h(4,"server error"))}}else h(5,"get file data error")}}else h(2,"event.target == null")}catch(I){h(-1,"catch error")}}}function createCursorHelp(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,h=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],x=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#ffffff",M=arguments.length>4&&void 0!==arguments[4]?arguments[4]:document.createElement("canvas"),k=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"transparent";M.width=M.height=t,M.style.background=k;var I=M.getContext("2d"),N=t%2==0?-.5:0,V=p%2==0?-.5:0;return I.strokeStyle=x,I.lineWidth=0,I.imageSmoothingEnabled=!1,h&&(I.beginPath(),I.moveTo(M.width/2+N,N),I.lineTo(M.width/2+N,M.height+N),I.stroke(),I.beginPath(),I.moveTo(N,M.height/2+N),I.lineTo(M.width+N,M.height/2+N),I.stroke()),I.beginPath(),I.strokeRect(t/2-p/2+V,t/2-p/2+V,p,p),I.stroke(),M.toDataURL("image/png")}function createCursor(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#ffffff";return{Rect:"url('".concat(createCursorHelp(t,p,!1,h),"') ").concat(t/2," ").concat(t/2,", auto"),Cross:"url('".concat(createCursorHelp(t,0,!0,h),"') ").concat(t/2," ").concat(t/2," , auto"),Normal:"url('".concat(createCursorHelp(t,p,!0,h),"') ").concat(t/2," ").concat(t/2,", auto")}}var se={b64Encode:b64Encode,b64Decode:b64Decode,saveAsFileDialog:saveAsFileDialog,downloadFile:downloadFile,downloadFileFromUrl:downloadFileFromUrl,getJsonFromUrl:ae,getFileFromUrl:oe,_ML_String:_ML_String,IsZero:IsZero,postEmscriptenIndexedDBFile:postEmscriptenIndexedDBFile,postMemoryFile:postMemoryFile,createCursor:createCursor};function _defineProperty(t,p,h){return(p=toPropertyKey(p))in t?Object.defineProperty(t,p,{value:h,enumerable:!0,configurable:!0,writable:!0}):t[p]=h,t}var ce,ue=function(){function MxCanvas2Image(){var t,p,h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;_classCallCheck$1(this,MxCanvas2Image),_defineProperty(this,"$support",void 0),_defineProperty(this,"downloadMime","image/octet-stream"),_defineProperty(this,"mydocument",document),h&&(this.mydocument=h),this.$support=(t=h.createElement("canvas"),{canvas:!!(p=t.getContext("2d")),imageData:!!p.getImageData,dataURL:!!t.toDataURL,btoa:!!window.btoa})}return _createClass$1(MxCanvas2Image,[{key:"scaleCanvas",value:function scaleCanvas(t,p,h){var x=t.width,M=t.height;null==p&&(p=x),null==h&&(h=M);var k=this.mydocument.createElement("canvas"),I=k.getContext("2d");return k.width=p,k.height=h,I.drawImage(t,0,0,x,M,0,0,p,h),k}},{key:"getDataURL",value:function getDataURL(t,p,h,x){return(t=this.scaleCanvas(t,h,x)).toDataURL(p)}},{key:"saveFile",value:function saveFile(t){var p=this.mydocument.createElement("a");p.href=t,p.download="save.bmp",p.click()}},{key:"genImage",value:function genImage(t){var p=this.mydocument.createElement("img");return p.src=t,p}},{key:"fixType",value:function fixType(t){return"image/"+(t=t.toLowerCase().replace(/jpg/i,"jpeg")).match(/png|jpeg|bmp|gif/)[0]}},{key:"encodeData",value:function encodeData(t){if(!window.btoa)throw"btoa undefined";var p="";if("string"==typeof t)p=t;else for(var h=0;h<t.length;h++)p+=String.fromCharCode(t[h]);return btoa(p)}},{key:"getImageData",value:function getImageData(t){var p=t.width,h=t.height;return t.getContext("2d").getImageData(0,0,p,h)}},{key:"makeURI",value:function makeURI(t,p){return"data:"+p+";base64,"+t}},{key:"genBitmapImage",value:function genBitmapImage(t){var p=t.width,h=t.height,x=p*h*3,M=x+54,k=[66,77,255&M,M>>8&255,M>>16&255,M>>24&255,0,0,0,0,54,0,0,0],I=[40,0,0,0,255&p,p>>8&255,p>>16&255,p>>24&255,255&h,h>>8&255,h>>16&255,h>>24&255,1,0,24,0,0,0,0,0,255&x,x>>8&255,x>>16&255,x>>24&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],N=(4-3*p%4)%4,V=t.data,ee="",te=p<<2,re=h,ne=String.fromCharCode;do{for(var ie=te*(re-1),ae="",oe=0;oe<p;oe++){var se=oe<<2;ae+=ne(V[ie+se+2])+ne(V[ie+se+1])+ne(V[ie+se])}for(var ce=0;ce<N;ce++)ae+=String.fromCharCode(0);ee+=ae}while(--re);return this.encodeData(k.concat(I))+this.encodeData(ee)}},{key:"saveAsImage",value:function saveAsImage(t,p,h,x){if(this.$support.canvas&&this.$support.dataURL)if("string"==typeof t&&(t=this.mydocument.getElementById(t)),null==x&&(x="png"),x=this.fixType(x),/bmp/.test(x)){var M=this.getImageData(this.scaleCanvas(t,p,h)),k=this.genBitmapImage(M);this.saveFile(this.makeURI(k,this.downloadMime))}else{var I=this.getDataURL(t,x,p,h);this.saveFile(I.replace(x,this.downloadMime))}}},{key:"convertToImage",value:function convertToImage(t,p,h,x){if(this.$support.canvas&&this.$support.dataURL){if("string"==typeof t&&(t=this.mydocument.getElementById(t)),null==x&&(x="png"),x=this.fixType(x),/bmp/.test(x)){var M=this.getImageData(this.scaleCanvas(t,p,h)),k=this.genBitmapImage(M);return this.genImage(this.makeURI(k,"image/bmp"))}var I=this.getDataURL(t,x,p,h);return this.genImage(I)}}}]),MxCanvas2Image}(),le={exports:{}},pe=h,he=pe.Buffer,fe={};for(ce in pe)pe.hasOwnProperty(ce)&&"SlowBuffer"!==ce&&"Buffer"!==ce&&(fe[ce]=pe[ce]);var de=fe.Buffer={};for(ce in he)he.hasOwnProperty(ce)&&"allocUnsafe"!==ce&&"allocUnsafeSlow"!==ce&&(de[ce]=he[ce]);if(fe.Buffer.prototype=he.prototype,de.from&&de.from!==Uint8Array.from||(de.from=function(t,p,h){if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type '+_typeof$2(t));if(t&&void 0===t.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+_typeof$2(t));return he(t,p,h)}),de.alloc||(de.alloc=function(t,p,h){if("number"!=typeof t)throw new TypeError('The "size" argument must be of type number. Received type '+_typeof$2(t));if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var x=he(t);return p&&0!==p.length?"string"==typeof h?x.fill(p,h):x.fill(p):x.fill(0),x}),!fe.kStringMaxLength)try{fe.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch(bm){}fe.constants||(fe.constants={MAX_LENGTH:fe.kMaxLength},fe.kStringMaxLength&&(fe.constants.MAX_STRING_LENGTH=fe.kStringMaxLength));var me=fe,ge={};function PrependBOMWrapper(t,p){this.encoder=t,this.addBOM=!0}function StripBOMWrapper(t,p){this.decoder=t,this.pass=!1,this.options=p||{}}ge.PrependBOM=PrependBOMWrapper,PrependBOMWrapper.prototype.write=function(t){return this.addBOM&&(t="\ufeff"+t,this.addBOM=!1),this.encoder.write(t)},PrependBOMWrapper.prototype.end=function(){return this.encoder.end()},ge.StripBOM=StripBOMWrapper,StripBOMWrapper.prototype.write=function(t){var p=this.decoder.write(t);return this.pass||!p||("\ufeff"===p[0]&&(p=p.slice(1),"function"==typeof this.options.stripBOM&&this.options.stripBOM()),this.pass=!0),p},StripBOMWrapper.prototype.end=function(){return this.decoder.end()};var ve,ye,xe,be,_e={},Me={},Ce={exports:{}};function requireString_decoder(){if(ye)return Me;ye=1;var t=function requireSafeBuffer(){return ve||(ve=1,function(t,p){var x=h,M=x.Buffer;function copyProps(t,p){for(var h in t)p[h]=t[h]}function SafeBuffer(t,p,h){return M(t,p,h)}M.from&&M.alloc&&M.allocUnsafe&&M.allocUnsafeSlow?t.exports=x:(copyProps(x,p),p.Buffer=SafeBuffer),SafeBuffer.prototype=Object.create(M.prototype),copyProps(M,SafeBuffer),SafeBuffer.from=function(t,p,h){if("number"==typeof t)throw new TypeError("Argument must not be a number");return M(t,p,h)},SafeBuffer.alloc=function(t,p,h){if("number"!=typeof t)throw new TypeError("Argument must be a number");var x=M(t);return void 0!==p?"string"==typeof h?x.fill(p,h):x.fill(p):x.fill(0),x},SafeBuffer.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return M(t)},SafeBuffer.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return x.SlowBuffer(t)}}(Ce,Ce.exports)),Ce.exports}().Buffer,p=t.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function StringDecoder(h){var x;switch(this.encoding=function normalizeEncoding(h){var x=function _normalizeEncoding(t){if(!t)return"utf8";for(var p;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(p)return;t=(""+t).toLowerCase(),p=!0}}(h);if("string"!=typeof x&&(t.isEncoding===p||!p(h)))throw new Error("Unknown encoding: "+h);return x||h}(h),this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,x=4;break;case"utf8":this.fillLast=utf8FillLast,x=4;break;case"base64":this.text=base64Text,this.end=base64End,x=3;break;default:return this.write=simpleWrite,void(this.end=simpleEnd)}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(x)}function utf8CheckByte(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function utf8FillLast(t){var p=this.lastTotal-this.lastNeed,h=function utf8CheckExtraBytes(t,p,h){if(128!=(192&p[0]))return t.lastNeed=0,"";if(t.lastNeed>1&&p.length>1){if(128!=(192&p[1]))return t.lastNeed=1,"";if(t.lastNeed>2&&p.length>2&&128!=(192&p[2]))return t.lastNeed=2,""}}(this,t);return void 0!==h?h:this.lastNeed<=t.length?(t.copy(this.lastChar,p,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,p,0,t.length),void(this.lastNeed-=t.length))}function utf16Text(t,p){if((t.length-p)%2==0){var h=t.toString("utf16le",p);if(h){var x=h.charCodeAt(h.length-1);if(x>=55296&&x<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],h.slice(0,-1)}return h}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",p,t.length-1)}function utf16End(t){var p=t&&t.length?this.write(t):"";if(this.lastNeed){var h=this.lastTotal-this.lastNeed;return p+this.lastChar.toString("utf16le",0,h)}return p}function base64Text(t,p){var h=(t.length-p)%3;return 0===h?t.toString("base64",p):(this.lastNeed=3-h,this.lastTotal=3,1===h?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",p,t.length-h))}function base64End(t){var p=t&&t.length?this.write(t):"";return this.lastNeed?p+this.lastChar.toString("base64",0,3-this.lastNeed):p}function simpleWrite(t){return t.toString(this.encoding)}function simpleEnd(t){return t&&t.length?this.write(t):""}return Me.StringDecoder=StringDecoder,StringDecoder.prototype.write=function(t){if(0===t.length)return"";var p,h;if(this.lastNeed){if(void 0===(p=this.fillLast(t)))return"";h=this.lastNeed,this.lastNeed=0}else h=0;return h<t.length?p?p+this.text(t,h):this.text(t,h):p||""},StringDecoder.prototype.end=function utf8End(t){var p=t&&t.length?this.write(t):"";return this.lastNeed?p+"":p},StringDecoder.prototype.text=function utf8Text(t,p){var h=function utf8CheckIncomplete(t,p,h){var x=p.length-1;if(x<h)return 0;var M=utf8CheckByte(p[x]);if(M>=0)return M>0&&(t.lastNeed=M-1),M;if(--x<h||-2===M)return 0;if(M=utf8CheckByte(p[x]),M>=0)return M>0&&(t.lastNeed=M-2),M;if(--x<h||-2===M)return 0;if(M=utf8CheckByte(p[x]),M>=0)return M>0&&(2===M?M=0:t.lastNeed=M-3),M;return 0}(this,t,p);if(!this.lastNeed)return t.toString("utf8",p);this.lastTotal=h;var x=t.length-(h-this.lastNeed);return t.copy(this.lastChar,0,x),t.toString("utf8",p,x)},StringDecoder.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length},Me}function requireInternal(){if(be)return xe;be=1;var t=me.Buffer;function InternalCodec(p,h){this.enc=p.encodingName,this.bomAware=p.bomAware,"base64"===this.enc?this.encoder=InternalEncoderBase64:"cesu8"===this.enc&&(this.enc="utf8",this.encoder=InternalEncoderCesu8,""!==t.from("eda0bdedb2a9","hex").toString()&&(this.decoder=InternalDecoderCesu8,this.defaultCharUnicode=h.defaultCharUnicode))}xe={utf8:{type:"_internal",bomAware:!0},cesu8:{type:"_internal",bomAware:!0},unicode11utf8:"utf8",ucs2:{type:"_internal",bomAware:!0},utf16le:"ucs2",binary:{type:"_internal"},base64:{type:"_internal"},hex:{type:"_internal"},_internal:InternalCodec},InternalCodec.prototype.encoder=InternalEncoder,InternalCodec.prototype.decoder=InternalDecoder;var p=requireString_decoder().StringDecoder;function InternalDecoder(t,h){this.decoder=new p(h.enc)}function InternalEncoder(t,p){this.enc=p.enc}function InternalEncoderBase64(t,p){this.prevStr=""}function InternalEncoderCesu8(t,p){}function InternalDecoderCesu8(t,p){this.acc=0,this.contBytes=0,this.accBytes=0,this.defaultCharUnicode=p.defaultCharUnicode}return p.prototype.end||(p.prototype.end=function(){}),InternalDecoder.prototype.write=function(p){return t.isBuffer(p)||(p=t.from(p)),this.decoder.write(p)},InternalDecoder.prototype.end=function(){return this.decoder.end()},InternalEncoder.prototype.write=function(p){return t.from(p,this.enc)},InternalEncoder.prototype.end=function(){},InternalEncoderBase64.prototype.write=function(p){var h=(p=this.prevStr+p).length-p.length%4;return this.prevStr=p.slice(h),p=p.slice(0,h),t.from(p,"base64")},InternalEncoderBase64.prototype.end=function(){return t.from(this.prevStr,"base64")},InternalEncoderCesu8.prototype.write=function(p){for(var h=t.alloc(3*p.length),x=0,M=0;M<p.length;M++){var k=p.charCodeAt(M);k<128?h[x++]=k:k<2048?(h[x++]=192+(k>>>6),h[x++]=128+(63&k)):(h[x++]=224+(k>>>12),h[x++]=128+(k>>>6&63),h[x++]=128+(63&k))}return h.slice(0,x)},InternalEncoderCesu8.prototype.end=function(){},InternalDecoderCesu8.prototype.write=function(t){for(var p=this.acc,h=this.contBytes,x=this.accBytes,M="",k=0;k<t.length;k++){var I=t[k];128!=(192&I)?(h>0&&(M+=this.defaultCharUnicode,h=0),I<128?M+=String.fromCharCode(I):I<224?(p=31&I,h=1,x=1):I<240?(p=15&I,h=2,x=1):M+=this.defaultCharUnicode):h>0?(p=p<<6|63&I,x++,0===--h&&(M+=2===x&&p<128&&p>0||3===x&&p<2048?this.defaultCharUnicode:String.fromCharCode(p))):M+=this.defaultCharUnicode}return this.acc=p,this.contBytes=h,this.accBytes=x,M},InternalDecoderCesu8.prototype.end=function(){var t=0;return this.contBytes>0&&(t+=this.defaultCharUnicode),t},xe}var we,Se={};function requireUtf32(){if(we)return Se;we=1;var t=me.Buffer;function Utf32Codec(t,p){this.iconv=p,this.bomAware=!0,this.isLE=t.isLE}function Utf32Encoder(t,p){this.isLE=p.isLE,this.highSurrogate=0}function Utf32Decoder(t,p){this.isLE=p.isLE,this.badChar=p.iconv.defaultCharUnicode.charCodeAt(0),this.overflow=[]}function _writeCodepoint(t,p,h,x){if((h<0||h>1114111)&&(h=x),h>=65536){var M=55296|(h-=65536)>>10;t[p++]=255&M,t[p++]=M>>8;h=56320|1023&h}return t[p++]=255&h,t[p++]=h>>8,p}function Utf32AutoCodec(t,p){this.iconv=p}function Utf32AutoEncoder(t,p){void 0===(t=t||{}).addBOM&&(t.addBOM=!0),this.encoder=p.iconv.getEncoder(t.defaultEncoding||"utf-32le",t)}function Utf32AutoDecoder(t,p){this.decoder=null,this.initialBufs=[],this.initialBufsLen=0,this.options=t||{},this.iconv=p.iconv}function detectEncoding(t,p){var h=[],x=0,M=0,k=0,I=0,N=0;e:for(var V=0;V<t.length;V++)for(var ee=t[V],te=0;te<ee.length;te++)if(h.push(ee[te]),4===h.length){if(0===x){if(255===h[0]&&254===h[1]&&0===h[2]&&0===h[3])return"utf-32le";if(0===h[0]&&0===h[1]&&254===h[2]&&255===h[3])return"utf-32be"}if((0!==h[0]||h[1]>16)&&k++,(0!==h[3]||h[2]>16)&&M++,0!==h[0]||0!==h[1]||0===h[2]&&0===h[3]||N++,0===h[0]&&0===h[1]||0!==h[2]||0!==h[3]||I++,h.length=0,++x>=100)break e}return N-k>I-M?"utf-32be":N-k<I-M?"utf-32le":p||"utf-32le"}return Se._utf32=Utf32Codec,Se.utf32le={type:"_utf32",isLE:!0},Se.utf32be={type:"_utf32",isLE:!1},Se.ucs4le="utf32le",Se.ucs4be="utf32be",Utf32Codec.prototype.encoder=Utf32Encoder,Utf32Codec.prototype.decoder=Utf32Decoder,Utf32Encoder.prototype.write=function(p){for(var h=t.from(p,"ucs2"),x=t.alloc(2*h.length),M=this.isLE?x.writeUInt32LE:x.writeUInt32BE,k=0,I=0;I<h.length;I+=2){var N=h.readUInt16LE(I),V=55296<=N&&N<56320,ee=56320<=N&&N<57344;if(this.highSurrogate){if(!V&&ee){var te=65536+(this.highSurrogate-55296<<10|N-56320);M.call(x,te,k),k+=4,this.highSurrogate=0;continue}M.call(x,this.highSurrogate,k),k+=4}V?this.highSurrogate=N:(M.call(x,N,k),k+=4,this.highSurrogate=0)}return k<x.length&&(x=x.slice(0,k)),x},Utf32Encoder.prototype.end=function(){if(this.highSurrogate){var p=t.alloc(4);return this.isLE?p.writeUInt32LE(this.highSurrogate,0):p.writeUInt32BE(this.highSurrogate,0),this.highSurrogate=0,p}},Utf32Decoder.prototype.write=function(p){if(0===p.length)return"";var h=0,x=0,M=t.alloc(p.length+4),k=0,I=this.isLE,N=this.overflow,V=this.badChar;if(N.length>0){for(;h<p.length&&N.length<4;h++)N.push(p[h]);4===N.length&&(x=I?N[h]|N[h+1]<<8|N[h+2]<<16|N[h+3]<<24:N[h+3]|N[h+2]<<8|N[h+1]<<16|N[h]<<24,N.length=0,k=_writeCodepoint(M,k,x,V))}for(;h<p.length-3;h+=4)k=_writeCodepoint(M,k,x=I?p[h]|p[h+1]<<8|p[h+2]<<16|p[h+3]<<24:p[h+3]|p[h+2]<<8|p[h+1]<<16|p[h]<<24,V);for(;h<p.length;h++)N.push(p[h]);return M.slice(0,k).toString("ucs2")},Utf32Decoder.prototype.end=function(){this.overflow.length=0},Se.utf32=Utf32AutoCodec,Se.ucs4="utf32",Utf32AutoCodec.prototype.encoder=Utf32AutoEncoder,Utf32AutoCodec.prototype.decoder=Utf32AutoDecoder,Utf32AutoEncoder.prototype.write=function(t){return this.encoder.write(t)},Utf32AutoEncoder.prototype.end=function(){return this.encoder.end()},Utf32AutoDecoder.prototype.write=function(t){if(!this.decoder){if(this.initialBufs.push(t),this.initialBufsLen+=t.length,this.initialBufsLen<32)return"";var p=detectEncoding(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(p,this.options);for(var h="",x=0;x<this.initialBufs.length;x++)h+=this.decoder.write(this.initialBufs[x]);return this.initialBufs.length=this.initialBufsLen=0,h}return this.decoder.write(t)},Utf32AutoDecoder.prototype.end=function(){if(!this.decoder){var t=detectEncoding(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(t,this.options);for(var p="",h=0;h<this.initialBufs.length;h++)p+=this.decoder.write(this.initialBufs[h]);var x=this.decoder.end();return x&&(p+=x),this.initialBufs.length=this.initialBufsLen=0,p}return this.decoder.end()},Se}var Te,Ae={};function requireUtf16(){if(Te)return Ae;Te=1;var t=me.Buffer;function Utf16BECodec(){}function Utf16BEEncoder(){}function Utf16BEDecoder(){this.overflowByte=-1}function Utf16Codec(t,p){this.iconv=p}function Utf16Encoder(t,p){void 0===(t=t||{}).addBOM&&(t.addBOM=!0),this.encoder=p.iconv.getEncoder("utf-16le",t)}function Utf16Decoder(t,p){this.decoder=null,this.initialBufs=[],this.initialBufsLen=0,this.options=t||{},this.iconv=p.iconv}function detectEncoding(t,p){var h=[],x=0,M=0,k=0;e:for(var I=0;I<t.length;I++)for(var N=t[I],V=0;V<N.length;V++)if(h.push(N[V]),2===h.length){if(0===x){if(255===h[0]&&254===h[1])return"utf-16le";if(254===h[0]&&255===h[1])return"utf-16be"}if(0===h[0]&&0!==h[1]&&k++,0!==h[0]&&0===h[1]&&M++,h.length=0,++x>=100)break e}return k>M?"utf-16be":k<M?"utf-16le":p||"utf-16le"}return Ae.utf16be=Utf16BECodec,Utf16BECodec.prototype.encoder=Utf16BEEncoder,Utf16BECodec.prototype.decoder=Utf16BEDecoder,Utf16BECodec.prototype.bomAware=!0,Utf16BEEncoder.prototype.write=function(p){for(var h=t.from(p,"ucs2"),x=0;x<h.length;x+=2){var M=h[x];h[x]=h[x+1],h[x+1]=M}return h},Utf16BEEncoder.prototype.end=function(){},Utf16BEDecoder.prototype.write=function(p){if(0==p.length)return"";var h=t.alloc(p.length+1),x=0,M=0;for(-1!==this.overflowByte&&(h[0]=p[0],h[1]=this.overflowByte,x=1,M=2);x<p.length-1;x+=2,M+=2)h[M]=p[x+1],h[M+1]=p[x];return this.overflowByte=x==p.length-1?p[p.length-1]:-1,h.slice(0,M).toString("ucs2")},Utf16BEDecoder.prototype.end=function(){this.overflowByte=-1},Ae.utf16=Utf16Codec,Utf16Codec.prototype.encoder=Utf16Encoder,Utf16Codec.prototype.decoder=Utf16Decoder,Utf16Encoder.prototype.write=function(t){return this.encoder.write(t)},Utf16Encoder.prototype.end=function(){return this.encoder.end()},Utf16Decoder.prototype.write=function(t){if(!this.decoder){if(this.initialBufs.push(t),this.initialBufsLen+=t.length,this.initialBufsLen<16)return"";var p=detectEncoding(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(p,this.options);for(var h="",x=0;x<this.initialBufs.length;x++)h+=this.decoder.write(this.initialBufs[x]);return this.initialBufs.length=this.initialBufsLen=0,h}return this.decoder.write(t)},Utf16Decoder.prototype.end=function(){if(!this.decoder){var t=detectEncoding(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(t,this.options);for(var p="",h=0;h<this.initialBufs.length;h++)p+=this.decoder.write(this.initialBufs[h]);var x=this.decoder.end();return x&&(p+=x),this.initialBufs.length=this.initialBufsLen=0,p}return this.decoder.end()},Ae}var ke,De={};function requireUtf7(){if(ke)return De;ke=1;var t=me.Buffer;function Utf7Codec(t,p){this.iconv=p}De.utf7=Utf7Codec,De.unicode11utf7="utf7",Utf7Codec.prototype.encoder=Utf7Encoder,Utf7Codec.prototype.decoder=Utf7Decoder,Utf7Codec.prototype.bomAware=!0;var p=/[^A-Za-z0-9'\(\),-\.\/:\? \n\r\t]+/g;function Utf7Encoder(t,p){this.iconv=p.iconv}function Utf7Decoder(t,p){this.iconv=p.iconv,this.inBase64=!1,this.base64Accum=""}Utf7Encoder.prototype.write=function(h){return t.from(h.replace(p,function(t){return"+"+("+"===t?"":this.iconv.encode(t,"utf16-be").toString("base64").replace(/=+$/,""))+"-"}.bind(this)))},Utf7Encoder.prototype.end=function(){};for(var h=/[A-Za-z0-9\/+]/,x=[],M=0;M<256;M++)x[M]=h.test(String.fromCharCode(M));var k="+".charCodeAt(0),I="-".charCodeAt(0),N="&".charCodeAt(0);function Utf7IMAPCodec(t,p){this.iconv=p}function Utf7IMAPEncoder(p,h){this.iconv=h.iconv,this.inBase64=!1,this.base64Accum=t.alloc(6),this.base64AccumIdx=0}function Utf7IMAPDecoder(t,p){this.iconv=p.iconv,this.inBase64=!1,this.base64Accum=""}Utf7Decoder.prototype.write=function(p){for(var h="",M=0,N=this.inBase64,V=this.base64Accum,ee=0;ee<p.length;ee++)if(N){if(!x[p[ee]]){if(ee==M&&p[ee]==I)h+="+";else{var te=V+this.iconv.decode(p.slice(M,ee),"ascii");h+=this.iconv.decode(t.from(te,"base64"),"utf16-be")}p[ee]!=I&&ee--,M=ee+1,N=!1,V=""}}else p[ee]==k&&(h+=this.iconv.decode(p.slice(M,ee),"ascii"),M=ee+1,N=!0);if(N){var re=(te=V+this.iconv.decode(p.slice(M),"ascii")).length-te.length%8;V=te.slice(re),te=te.slice(0,re),h+=this.iconv.decode(t.from(te,"base64"),"utf16-be")}else h+=this.iconv.decode(p.slice(M),"ascii");return this.inBase64=N,this.base64Accum=V,h},Utf7Decoder.prototype.end=function(){var p="";return this.inBase64&&this.base64Accum.length>0&&(p=this.iconv.decode(t.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",p},De.utf7imap=Utf7IMAPCodec,Utf7IMAPCodec.prototype.encoder=Utf7IMAPEncoder,Utf7IMAPCodec.prototype.decoder=Utf7IMAPDecoder,Utf7IMAPCodec.prototype.bomAware=!0,Utf7IMAPEncoder.prototype.write=function(p){for(var h=this.inBase64,x=this.base64Accum,M=this.base64AccumIdx,k=t.alloc(5*p.length+10),V=0,ee=0;ee<p.length;ee++){var te=p.charCodeAt(ee);32<=te&&te<=126?(h&&(M>0&&(V+=k.write(x.slice(0,M).toString("base64").replace(/\//g,",").replace(/=+$/,""),V),M=0),k[V++]=I,h=!1),h||(k[V++]=te,te===N&&(k[V++]=I))):(h||(k[V++]=N,h=!0),h&&(x[M++]=te>>8,x[M++]=255&te,M==x.length&&(V+=k.write(x.toString("base64").replace(/\//g,","),V),M=0)))}return this.inBase64=h,this.base64AccumIdx=M,k.slice(0,V)},Utf7IMAPEncoder.prototype.end=function(){var p=t.alloc(10),h=0;return this.inBase64&&(this.base64AccumIdx>0&&(h+=p.write(this.base64Accum.slice(0,this.base64AccumIdx).toString("base64").replace(/\//g,",").replace(/=+$/,""),h),this.base64AccumIdx=0),p[h++]=I,this.inBase64=!1),p.slice(0,h)};var V=x.slice();return V[",".charCodeAt(0)]=!0,Utf7IMAPDecoder.prototype.write=function(p){for(var h="",x=0,M=this.inBase64,k=this.base64Accum,ee=0;ee<p.length;ee++)if(M){if(!V[p[ee]]){if(ee==x&&p[ee]==I)h+="&";else{var te=k+this.iconv.decode(p.slice(x,ee),"ascii").replace(/,/g,"/");h+=this.iconv.decode(t.from(te,"base64"),"utf16-be")}p[ee]!=I&&ee--,x=ee+1,M=!1,k=""}}else p[ee]==N&&(h+=this.iconv.decode(p.slice(x,ee),"ascii"),x=ee+1,M=!0);if(M){var re=(te=k+this.iconv.decode(p.slice(x),"ascii").replace(/,/g,"/")).length-te.length%8;k=te.slice(re),te=te.slice(0,re),h+=this.iconv.decode(t.from(te,"base64"),"utf16-be")}else h+=this.iconv.decode(p.slice(x),"ascii");return this.inBase64=M,this.base64Accum=k,h},Utf7IMAPDecoder.prototype.end=function(){var p="";return this.inBase64&&this.base64Accum.length>0&&(p=this.iconv.decode(t.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",p},De}var Oe,Ie,Le,Ee,Re,Be={};function requireSbcsCodec(){if(Oe)return Be;Oe=1;var t=me.Buffer;function SBCSCodec(p,h){if(!p)throw new Error("SBCS codec is called without the data.");if(!p.chars||128!==p.chars.length&&256!==p.chars.length)throw new Error("Encoding '"+p.type+"' has incorrect 'chars' (must be of len 128 or 256)");if(128===p.chars.length){for(var x="",M=0;M<128;M++)x+=String.fromCharCode(M);p.chars=x+p.chars}this.decodeBuf=t.from(p.chars,"ucs2");var k=t.alloc(65536,h.defaultCharSingleByte.charCodeAt(0));for(M=0;M<p.chars.length;M++)k[p.chars.charCodeAt(M)]=M;this.encodeBuf=k}function SBCSEncoder(t,p){this.encodeBuf=p.encodeBuf}function SBCSDecoder(t,p){this.decodeBuf=p.decodeBuf}return Be._sbcs=SBCSCodec,SBCSCodec.prototype.encoder=SBCSEncoder,SBCSCodec.prototype.decoder=SBCSDecoder,SBCSEncoder.prototype.write=function(p){for(var h=t.alloc(p.length),x=0;x<p.length;x++)h[x]=this.encodeBuf[p.charCodeAt(x)];return h},SBCSEncoder.prototype.end=function(){},SBCSDecoder.prototype.write=function(p){for(var h=this.decodeBuf,x=t.alloc(2*p.length),M=0,k=0,I=0;I<p.length;I++)M=2*p[I],x[k=2*I]=h[M],x[k+1]=h[M+1];return x.toString("ucs2")},SBCSDecoder.prototype.end=function(){},Be}var Ne,Ge={};function requireDbcsCodec(){if(Ne)return Ge;Ne=1;var t=me.Buffer;Ge._dbcs=DBCSCodec;for(var p=-1,h=-2,x=-10,M=-1e3,k=new Array(256),I=0;I<256;I++)k[I]=p;function DBCSCodec(t,x){if(this.encodingName=t.encodingName,!t)throw new Error("DBCS codec is called without the data.");if(!t.table)throw new Error("Encoding '"+this.encodingName+"' has no data.");var I=t.table();this.decodeTables=[],this.decodeTables[0]=k.slice(0),this.decodeTableSeq=[];for(var N=0;N<I.length;N++)this._addDecodeChunk(I[N]);if("function"==typeof t.gb18030){this.gb18030=t.gb18030();var V=this.decodeTables.length;this.decodeTables.push(k.slice(0));var ee=this.decodeTables.length;this.decodeTables.push(k.slice(0));var te=this.decodeTables[0];for(N=129;N<=254;N++)for(var re=this.decodeTables[M-te[N]],ne=48;ne<=57;ne++){if(re[ne]===p)re[ne]=M-V;else if(re[ne]>M)throw new Error("gb18030 decode tables conflict at byte 2");for(var ie=this.decodeTables[M-re[ne]],ae=129;ae<=254;ae++){if(ie[ae]===p)ie[ae]=M-ee;else{if(ie[ae]===M-ee)continue;if(ie[ae]>M)throw new Error("gb18030 decode tables conflict at byte 3")}for(var oe=this.decodeTables[M-ie[ae]],se=48;se<=57;se++)oe[se]===p&&(oe[se]=h)}}}this.defaultCharUnicode=x.defaultCharUnicode,this.encodeTable=[],this.encodeTableSeq=[];var ce={};if(t.encodeSkipVals)for(N=0;N<t.encodeSkipVals.length;N++){var ue=t.encodeSkipVals[N];if("number"==typeof ue)ce[ue]=!0;else for(ne=ue.from;ne<=ue.to;ne++)ce[ne]=!0}if(this._fillEncodeTable(0,0,ce),t.encodeAdd)for(var le in t.encodeAdd)Object.prototype.hasOwnProperty.call(t.encodeAdd,le)&&this._setEncodeChar(le.charCodeAt(0),t.encodeAdd[le]);this.defCharSB=this.encodeTable[0][x.defaultCharSingleByte.charCodeAt(0)],this.defCharSB===p&&(this.defCharSB=this.encodeTable[0]["?"]),this.defCharSB===p&&(this.defCharSB="?".charCodeAt(0))}function DBCSEncoder(t,p){this.leadSurrogate=-1,this.seqObj=void 0,this.encodeTable=p.encodeTable,this.encodeTableSeq=p.encodeTableSeq,this.defaultCharSingleByte=p.defCharSB,this.gb18030=p.gb18030}function DBCSDecoder(t,p){this.nodeIdx=0,this.prevBytes=[],this.decodeTables=p.decodeTables,this.decodeTableSeq=p.decodeTableSeq,this.defaultCharUnicode=p.defaultCharUnicode,this.gb18030=p.gb18030}function findIdx(t,p){if(t[0]>p)return-1;for(var h=0,x=t.length;h<x-1;){var M=h+(x-h+1>>1);t[M]<=p?h=M:x=M}return h}return DBCSCodec.prototype.encoder=DBCSEncoder,DBCSCodec.prototype.decoder=DBCSDecoder,DBCSCodec.prototype._getDecodeTrieNode=function(t){for(var h=[];t>0;t>>>=8)h.push(255&t);0==h.length&&h.push(0);for(var x=this.decodeTables[0],I=h.length-1;I>0;I--){var N=x[h[I]];if(N==p)x[h[I]]=M-this.decodeTables.length,this.decodeTables.push(x=k.slice(0));else{if(!(N<=M))throw new Error("Overwrite byte in "+this.encodingName+", addr: "+t.toString(16));x=this.decodeTables[M-N]}}return x},DBCSCodec.prototype._addDecodeChunk=function(t){var p=parseInt(t[0],16),h=this._getDecodeTrieNode(p);p&=255;for(var M=1;M<t.length;M++){var k=t[M];if("string"==typeof k)for(var I=0;I<k.length;){var N=k.charCodeAt(I++);if(55296<=N&&N<56320){var V=k.charCodeAt(I++);if(!(56320<=V&&V<57344))throw new Error("Incorrect surrogate pair in "+this.encodingName+" at chunk "+t[0]);h[p++]=65536+1024*(N-55296)+(V-56320)}else if(4080<N&&N<=4095){for(var ee=4095-N+2,te=[],re=0;re<ee;re++)te.push(k.charCodeAt(I++));h[p++]=x-this.decodeTableSeq.length,this.decodeTableSeq.push(te)}else h[p++]=N}else{if("number"!=typeof k)throw new Error("Incorrect type '"+_typeof$2(k)+"' given in "+this.encodingName+" at chunk "+t[0]);var ne=h[p-1]+1;for(I=0;I<k;I++)h[p++]=ne++}}if(p>255)throw new Error("Incorrect chunk in "+this.encodingName+" at addr "+t[0]+": too long"+p)},DBCSCodec.prototype._getEncodeBucket=function(t){var p=t>>8;return void 0===this.encodeTable[p]&&(this.encodeTable[p]=k.slice(0)),this.encodeTable[p]},DBCSCodec.prototype._setEncodeChar=function(t,h){var M=this._getEncodeBucket(t),k=255&t;M[k]<=x?this.encodeTableSeq[x-M[k]][-1]=h:M[k]==p&&(M[k]=h)},DBCSCodec.prototype._setEncodeSequence=function(t,h){var M,k=t[0],I=this._getEncodeBucket(k),N=255&k;I[N]<=x?M=this.encodeTableSeq[x-I[N]]:(M={},I[N]!==p&&(M[-1]=I[N]),I[N]=x-this.encodeTableSeq.length,this.encodeTableSeq.push(M));for(var V=1;V<t.length-1;V++){var ee=M[k];"object"===_typeof$2(ee)?M=ee:(M=M[k]={},void 0!==ee&&(M[-1]=ee))}M[k=t[t.length-1]]=h},DBCSCodec.prototype._fillEncodeTable=function(t,p,h){for(var k=this.decodeTables[t],I=!1,N={},V=0;V<256;V++){var ee=k[V],te=p+V;if(!h[te])if(ee>=0)this._setEncodeChar(ee,te),I=!0;else if(ee<=M){var re=M-ee;if(!N[re]){var ne=te<<8>>>0;this._fillEncodeTable(re,ne,h)?I=!0:N[re]=!0}}else ee<=x&&(this._setEncodeSequence(this.decodeTableSeq[x-ee],te),I=!0)}return I},DBCSEncoder.prototype.write=function(h){for(var M=t.alloc(h.length*(this.gb18030?4:3)),k=this.leadSurrogate,I=this.seqObj,N=-1,V=0,ee=0;;){if(-1===N){if(V==h.length)break;var te=h.charCodeAt(V++)}else{te=N;N=-1}if(55296<=te&&te<57344)if(te<56320){if(-1===k){k=te;continue}k=te,te=p}else-1!==k?(te=65536+1024*(k-55296)+(te-56320),k=-1):te=p;else-1!==k&&(N=te,te=p,k=-1);var re=p;if(void 0!==I&&te!=p){var ne=I[te];if("object"===_typeof$2(ne)){I=ne;continue}"number"==typeof ne?re=ne:null==ne&&void 0!==(ne=I[-1])&&(re=ne,N=te),I=void 0}else if(te>=0){var ie=this.encodeTable[te>>8];if(void 0!==ie&&(re=ie[255&te]),re<=x){I=this.encodeTableSeq[x-re];continue}if(re==p&&this.gb18030){var ae=findIdx(this.gb18030.uChars,te);if(-1!=ae){re=this.gb18030.gbChars[ae]+(te-this.gb18030.uChars[ae]);M[ee++]=129+Math.floor(re/12600),re%=12600,M[ee++]=48+Math.floor(re/1260),re%=1260,M[ee++]=129+Math.floor(re/10),re%=10,M[ee++]=48+re;continue}}}re===p&&(re=this.defaultCharSingleByte),re<256?M[ee++]=re:re<65536?(M[ee++]=re>>8,M[ee++]=255&re):re<16777216?(M[ee++]=re>>16,M[ee++]=re>>8&255,M[ee++]=255&re):(M[ee++]=re>>>24,M[ee++]=re>>>16&255,M[ee++]=re>>>8&255,M[ee++]=255&re)}return this.seqObj=I,this.leadSurrogate=k,M.slice(0,ee)},DBCSEncoder.prototype.end=function(){if(-1!==this.leadSurrogate||void 0!==this.seqObj){var p=t.alloc(10),h=0;if(this.seqObj){var x=this.seqObj[-1];void 0!==x&&(x<256?p[h++]=x:(p[h++]=x>>8,p[h++]=255&x)),this.seqObj=void 0}return-1!==this.leadSurrogate&&(p[h++]=this.defaultCharSingleByte,this.leadSurrogate=-1),p.slice(0,h)}},DBCSEncoder.prototype.findIdx=findIdx,DBCSDecoder.prototype.write=function(k){for(var I=t.alloc(2*k.length),N=this.nodeIdx,V=this.prevBytes,ee=this.prevBytes.length,te=-this.prevBytes.length,re=0,ne=0;re<k.length;re++){var ie,ae=re>=0?k[re]:V[re+ee];if((ie=this.decodeTables[N][ae])>=0);else if(ie===p)ie=this.defaultCharUnicode.charCodeAt(0),re=te;else if(ie===h){if(re>=3)var oe=12600*(k[re-3]-129)+1260*(k[re-2]-48)+10*(k[re-1]-129)+(ae-48);else oe=12600*(V[re-3+ee]-129)+1260*((re-2>=0?k[re-2]:V[re-2+ee])-48)+10*((re-1>=0?k[re-1]:V[re-1+ee])-129)+(ae-48);var se=findIdx(this.gb18030.gbChars,oe);ie=this.gb18030.uChars[se]+oe-this.gb18030.gbChars[se]}else{if(ie<=M){N=M-ie;continue}if(!(ie<=x))throw new Error("iconv-lite internal error: invalid decoding table value "+ie+" at "+N+"/"+ae);for(var ce=this.decodeTableSeq[x-ie],ue=0;ue<ce.length-1;ue++)ie=ce[ue],I[ne++]=255&ie,I[ne++]=ie>>8;ie=ce[ce.length-1]}if(ie>=65536){var le=55296|(ie-=65536)>>10;I[ne++]=255&le,I[ne++]=le>>8,ie=56320|1023&ie}I[ne++]=255&ie,I[ne++]=ie>>8,N=0,te=re+1}return this.nodeIdx=N,this.prevBytes=te>=0?Array.prototype.slice.call(k,te):V.slice(te+ee).concat(Array.prototype.slice.call(k)),I.slice(0,ne).toString("ucs2")},DBCSDecoder.prototype.end=function(){for(var t="";this.prevBytes.length>0;){t+=this.defaultCharUnicode;var p=this.prevBytes.slice(1);this.prevBytes=[],this.nodeIdx=0,p.length>0&&(t+=this.write(p))}return this.prevBytes=[],this.nodeIdx=0,t},Ge}const Fe=[["0","\0",128],["a1","",62],["8140","",9,""],["8180",""],["81b8",""],["81c8",""],["81da",""],["81f0",""],["81fc",""],["824f","",9],["8260","",25],["8281","",25],["829f","",82],["8340","",62],["8380","",22],["839f","",16,"",6],["83bf","",16,"",6],["8440","",5,"",25],["8470","",5,"",7],["8480","",17],["849f",""],["8740","",19,"",9],["875f",""],["877e",""],["8780","",4,""],["889f",""],["8940",""],["8980",""],["8a40",""],["8a80",""],["8b40",""],["8b80",""],["8c40",""],["8c80",""],["8d40",""],["8d80",""],["8e40",""],["8e80",""],["8f40",""],["8f80",""],["9040",""],["9080",""],["9140",""],["9180",""],["9240",""],["9280",""],["9340",""],["9380",""],["9440",""],["9480",""],["9540",""],["9580",""],["9640",""],["9680",""],["9740",""],["9780",""],["9840",""],["989f",""],["9940",""],["9980",""],["9a40",""],["9a80",""],["9b40",""],["9b80",""],["9c40",""],["9c80",""],["9d40",""],["9d80",""],["9e40",""],["9e80",""],["9f40",""],["9f80",""],["e040",""],["e080",""],["e140",""],["e180",""],["e240",""],["e280",""],["e340",""],["e380",""],["e440",""],["e480",""],["e540",""],["e580",""],["e640",""],["e680",""],["e740",""],["e780",""],["e840",""],["e880",""],["e940",""],["e980",""],["ea40",""],["ea80",""],["ed40",""],["ed80",""],["ee40",""],["ee80",""],["eeef","",9,""],["f040","",62],["f080","",124],["f140","",62],["f180","",124],["f240","",62],["f280","",124],["f340","",62],["f380","",124],["f440","",62],["f480","",124],["f540","",62],["f580","",124],["f640","",62],["f680","",124],["f740","",62],["f780","",124],["f840","",62],["f880","",124],["f940",""],["fa40","",9,"",9,""],["fa80",""],["fb40",""],["fb80",""],["fc40",""]],Ve=[["0","\0",127],["8ea1","",62],["a1a1","",9,""],["a2a1",""],["a2ba",""],["a2ca",""],["a2dc",""],["a2f2",""],["a2fe",""],["a3b0","",9],["a3c1","",25],["a3e1","",25],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a7a1","",5,"",25],["a7d1","",5,"",25],["a8a1",""],["ada1","",19,"",9],["adc0",""],["addf","",4,""],["b0a1",""],["b1a1",""],["b2a1",""],["b3a1",""],["b4a1",""],["b5a1",""],["b6a1",""],["b7a1",""],["b8a1",""],["b9a1",""],["baa1",""],["bba1",""],["bca1",""],["bda1",""],["bea1",""],["bfa1",""],["c0a1",""],["c1a1",""],["c2a1",""],["c3a1",""],["c4a1",""],["c5a1",""],["c6a1",""],["c7a1",""],["c8a1",""],["c9a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1",""],["d2a1",""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fcf1","",9,""],["8fa2af",""],["8fa2c2",""],["8fa2eb",""],["8fa6e1",""],["8fa6e7",""],["8fa6e9",""],["8fa6ec",""],["8fa6f1",""],["8fa7c2","",10,""],["8fa7f2","",10,""],["8fa9a1",""],["8fa9a4",""],["8fa9a6",""],["8fa9a8",""],["8fa9ab",""],["8fa9af",""],["8fa9c1",""],["8faaa1",""],["8faaba",""],["8faba1",""],["8fabbd",""],["8fabc5",""],["8fb0a1",""],["8fb1a1",""],["8fb2a1","",4,""],["8fb3a1",""],["8fb4a1",""],["8fb5a1",""],["8fb6a1","",5,"",4,""],["8fb7a1","",4,""],["8fb8a1",""],["8fb9a1",""],["8fbaa1","",4,""],["8fbba1",""],["8fbca1","",4,""],["8fbda1","",4,""],["8fbea1","",4,""],["8fbfa1",""],["8fc0a1",""],["8fc1a1",""],["8fc2a1",""],["8fc3a1","",4,""],["8fc4a1",""],["8fc5a1",""],["8fc6a1",""],["8fc7a1",""],["8fc8a1",""],["8fc9a1","",4,"",4,""],["8fcaa1",""],["8fcba1",""],["8fcca1","",9,""],["8fcda1","",5,""],["8fcea1","",6,""],["8fcfa1",""],["8fd0a1",""],["8fd1a1",""],["8fd2a1","",5],["8fd3a1",""],["8fd4a1","",4,""],["8fd5a1",""],["8fd6a1",""],["8fd7a1",""],["8fd8a1",""],["8fd9a1","",4,"",6,""],["8fdaa1","",4,""],["8fdba1","",6,""],["8fdca1","",4,""],["8fdda1","",4,""],["8fdea1","",4,""],["8fdfa1",""],["8fe0a1",""],["8fe1a1","",4,""],["8fe2a1",""],["8fe3a1","",5,"",4,""],["8fe4a1","",4,""],["8fe5a1","",4,""],["8fe6a1",""],["8fe7a1",""],["8fe8a1","",4,""],["8fe9a1","",4],["8feaa1","",4,""],["8feba1","",4,""],["8feca1",""],["8feda1","",4,"",4,""]],Ue=[["0","\0",127,""],["8140","",5,"",9,"",6,""],["8180","",6,"",4,"",4,"",5,""],["8240","",4,"",8,"",4,"",11],["8280","",10,"",4,"",7,"",5,"",8,"",20,"",4,"",6,""],["8340","",17,"",5,"",10,"",4,"",9,""],["8380","",5,"",13,"",28,"",4,"",4,"",5],["8440","",5,"",5,""],["8480","",9,"",4,"",6,"",6,"",9,"",5,"",10,"",7,""],["8540","",9,""],["8580","",4,"",6,"",4,"",4,"",7,""],["8640","",4,"",5,"",4,"",5,""],["8680","",4,"",4,"",5,"",6,"",8,"",4,"",4,"",4,""],["8740","",7,"",11,"",4,"",4],["8780","",7,"",6,"",14,"",10,"",6,"",12,"",8,"",5,"",6],["8840","",9,"",4,"",4,""],["8880","",4,"",6,"",8,"",6,"",7,"",4,"",4,"",7],["8940","",5,"",6,"",4,"",5,"",4,"",16,""],["8980","",4,"",4,"",7,"",17,"",10,"",13,"",5,"",7,"",4,""],["8a40","",4,"",12,""],["8a80","",5,"",6,"",4,"",11,"",6,"",4,"",4,"",9,"",5],["8b40","",8,"",17,"",6,"",13,""],["8b80","",4,"",4,"",5,"",4,"",4,"",22,"",11,"",25,"",7,"",6],["8c40","",7,""],["8c80","",8,"",4,"",6,"",6,"",6,"",4,"",4,"",4],["8d40","",5,"",5,"",5,"",6,"",9,"",4],["8d80","",5,"",4,"",4,"",4,"",7,"",7,"",10,"",10,"",12,"",21,""],["8e40","",21,"",12,"",6,"",12,""],["8e80","",4,"",7,"",4,"",4,"",5,"",6,"",4,"",14,"",4,"",4,"",6],["8f40","",5,"",11,"",8,""],["8f80","",6,"",14,"",5,"",5,"",4,""],["9040","",4,"",4,"",6,""],["9080","",7,"",4,"",4,"",4,"",4,"",18,"",6],["9140","",6,"",6,"",18,"",4,""],["9180","",6,"",8,"",9,"",5,"",4,"",4,"",16,"",13,"",8,"",5,"",4,""],["9240","",6,"",5,""],["9280","",5,"",7,"",6,""],["9340","",6,"",4,"",4,"",5,""],["9380","",5,"",4,"",6,"",4,"",7,"",9,"",6,"",8,"",4,"",6,""],["9440","",24,"",7,"",7,"",4,"",8],["9480","",4,"",4,"",14,"",7,"",7,""],["9540","",4,"",4,"",6,""],["9580","",4,"",4,"",8,"",4,"",4,"",25,"",7,"",5,""],["9640","",5,"",4,""],["9680","",7,"",9,"",7,"",4,"",6,"",6,"",5],["9740","",7,"",8,"",7,"",9,""],["9780","",6,"",5,"",4,"",9,"",4,"",11,"",7,"",16,""],["9840","",4,"",5,"",9,""],["9880","",7,"",5,"",11,"",9,"",9,"",11,"",5,"",5,"",6,"",4,"",7,"",6,""],["9940","",4,"",10,"",6,"",8,"",4,"",7,"",5],["9980","",114,"",6],["9a40","",11,"",7,"",13,""],["9a80","",4,"",7,"",7,"",6,"",4,"",4,"",7,"",6,"",4,"",4,""],["9b40","",4,""],["9b80","",5,"",4,"",4,"",5,""],["9c40","",7,""],["9c80","",7,"",7,"",10,"",14,"",4,"",6,"",5],["9d40","",7,"",4,"",9,"",6,""],["9d80","",9,"",5,"",6,"",12,"",4,"",10,"",5,"",5,"",6,"",10,""],["9e40","",7,"",32,"",7,"",6,"",6],["9e80","",9,"",17,"",13,"",11,"",12,"",12,""],["9f40","",6,"",10,"",4,"",10,"",7,""],["9f80","",13,"",12,"",4,"",4,"",5,"",4,"",4,"",6,"",5,"",8,"",9,"",4],["a040","",9,"",5,"",9,"",11,"",19],["a080","",9,"",6,"",4,"",11,"",11,"",6,""],["a1a1","",7,""],["a2a1","",9],["a2b1","",19,"",19,"",9],["a2e5","",9],["a2f1","",11],["a3a1","",88,""],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a6e0",""],["a6ee",""],["a6f4",""],["a7a1","",5,"",25],["a7d1","",5,"",25],["a840","",35,"",6],["a880","",7,""],["a8a1",""],["a8bd",""],["a8c0",""],["a8c5","",36],["a940","",8,""],["a959",""],["a95c",""],["a960","",9,"",8],["a980","",4,""],["a996",""],["a9a4","",75],["aa40","",5,"",5,"",8],["aa80","",7,"",10,""],["ab40","",11,"",4,"",5,"",4],["ab80","",6,"",4],["ac40","",10,"",8,"",5,"",4,"",11],["ac80","",6,"",12,"",4,""],["ad40","",10,"",7,"",15,"",12],["ad80","",9,"",8,"",6,""],["ae40","",6,"",7,"",4,""],["ae80","",7,"",6,"",4,""],["af40","",4,""],["af80",""],["b040","",6,"",5,"",4,"",6,"",7,""],["b080","",7,"",8,"",9,""],["b140","",4,"",7,"",10,""],["b180","",4,"",7,"",7,""],["b240","",11,"",5,"",11,"",4],["b280","",12,"",8,"",4,""],["b340","",5,""],["b380","",11,"",7,"",6,""],["b440","",7,"",9],["b480","",4,"",5,"",6,""],["b540","",5,"",9,"",4,"",14,"",4,"",8,""],["b580","",6,"",4,""],["b640","",6,"",11,"",10,"",4,"",5,""],["b680","",6,"",4,""],["b740","",14,"",5,"",9,"",4,"",16],["b780","",6,""],["b840","",4,"",10,"",10,"",9,"",5,""],["b880","",4,""],["b940","",5,"",10,"",6,""],["b980","",7,""],["ba40","",4,"",4,"",7,"",5,""],["ba80","",4,"",5,"",12,"",5,""],["bb40","",9,"",36,"",5,"",9],["bb80","",6,"",4,""],["bc40","",6,"",6,"",5,"",7,"",13,"",5],["bc80","",14,"",6,""],["bd40","",54,"",7],["bd80","",32,""],["be40","",12,"",6,"",42],["be80","",32,""],["bf40","",62],["bf80","",4,"",4,"",21,""],["c040","",35,"",23,""],["c080","",6,"",9,""],["c140","",4,"",7,"",4,"",4,"",6,""],["c180","",4,"",4,"",5,""],["c240","",6,"",5,""],["c280","",13,"",5,"",11,""],["c340","",5,"",4,"",6,""],["c380","",12,"",4,""],["c440","",5,"",4,"",4,"",5,"",4,""],["c480","",7,"",5,"",6,""],["c540","",14,"",4,"",5,"",4,"",5,""],["c580","",7,"",7,""],["c640",""],["c680","",4,"",9,""],["c740","",4,"",4,"",6,"",6,"",6,""],["c780",""],["c840","",4,"",5,"",5,"",7,"",5,"",7,""],["c880","",6,"",4,"",4,""],["c940","",4,"",7,"",12,""],["c980","",4,"",4,"",10,""],["ca40","",8,"",8,"",9,"",4,"",10],["ca80","",4,"",8,""],["cb40","",6,"",10,"",6,"",5,"",6,"",6,"",4,""],["cb80","",5,"",6,"",14,""],["cc40","",4,"",10,"",15,"",13,""],["cc80","",11,"",4,"",7,""],["cd40","",6,"",6,"",4,"",5,"",4,"",4,""],["cd80",""],["ce40","",6,"",5,"",7,""],["ce80","",4,"",6,"",4,""],["cf40","",4,"",4,"",6,"",9],["cf80","",5,"",7,"",4,""],["d040","",13,"",5,"",5,"",5,"",6,""],["d080","",4,"",4,"",5,""],["d140","",4,"",4,"",6,"",5],["d180","",4,"",4,"",4,""],["d240","",8,"",24,"",5,"",19,""],["d280","",26,""],["d340","",30,"",6],["d380","",4,"",5,"",21,""],["d440","",31,"",8,"",21],["d480","",25,"",6,""],["d540","",7,"",7,"",46],["d580","",32,""],["d640","",34,"",27],["d680","",30,""],["d740","",31,"",4,"",25],["d780","",24,""],["d840","",8,"",7,"",5,"",6,"",6,"",6,""],["d880","",6,"",20,""],["d940","",62],["d980","",32,""],["da40","",14,"",8,"",4,"",9,""],["da80","",12,""],["db40","",6,"",7,"",4,""],["db80","",4,"",5,"",11,""],["dc40","",4,"",6,"",6,"",11,"",6,"",7],["dc80","",10,"",21,""],["dd40","",62],["dd80","",32,""],["de40","",32,""],["de80","",4,""],["df40","",5,"",4,"",4,"",5,"",4,"",6,""],["df80","",4,""],["e040","",19,""],["e080","",10,"",6,"",8,""],["e140","",4,"",6,"",5,"",5,""],["e180","",10,"",9,"",8,""],["e240","",62],["e280","",32,"",5,""],["e340","",45,"",16],["e380","",7,"",24,""],["e440","",5,"",24,"",31],["e480","",32,""],["e540","",51,"",10],["e580","",31,""],["e640","",34,"",27],["e680","",29,""],["e740","",7,"",54],["e780","",32,"",6,"",4,""],["e840","",14,"",43,""],["e880","",20,""],["e940","",7,"",42],["e980","",32,""],["ea40","",27,"",6,""],["ea80","",4,"",12,""],["eb40","",9,"",7,"",9,"",6,""],["eb80","",4,""],["ec40","",8,"",4,"",18,"",7],["ec80","",4,"",7,"",4,"",4,""],["ed40","",6,"",46],["ed80","",4,"",23,""],["ee40","",62],["ee80","",32,"",4,"",6,""],["ef40","",5,"",37,"",4],["ef80","",30,"",4,"",8,""],["f040","",4,"",28,"",26],["f080","",9,"",12,"",4,"",6,""],["f140","",10,"",47],["f180","",32,""],["f240","",62],["f280","",32,""],["f340","",17,"",6,"",4,""],["f380","",8,"",6,""],["f440","",5,"",10,"",10,"",7,"",5],["f480","",32,""],["f540","",62],["f580","",32,""],["f640","",62],["f680","",32,"",5,"",5,"",4,"",7,""],["f740","",62],["f780","",4,"",4,""],["f840","",62],["f880","",32],["f940","",62],["f980","",32],["fa40","",62],["fa80","",32],["fb40","",27,"",9,""],["fb80","",5,"",8,"",5,""],["fc40","",8,"",4,"",8,"",6],["fc80","",4,"",5,"",8,""],["fd40","",4,"",4,"",10,"",38],["fd80","",5,"",11,"",4,""],["fe40",""]],je=[["a140","",62],["a180","",32],["a240","",62],["a280","",32],["a2ab","",5],["a2e3",""],["a2ef",""],["a2fd",""],["a340","",62],["a380","",31,""],["a440","",62],["a480","",32],["a4f4","",10],["a540","",62],["a580","",32],["a5f7","",7],["a640","",62],["a680","",32],["a6b9","",7],["a6d9","",6],["a6ec",""],["a6f3",""],["a6f6","",8],["a740","",62],["a780","",32],["a7c2","",14],["a7f2","",12],["a896","",10],["a8bc",""],["a8bf",""],["a8c1",""],["a8ea","",20],["a958",""],["a95b",""],["a95d",""],["a989","",11],["a997","",12],["a9f0","",14],["aaa1","",93],["aba1","",93],["aca1","",93],["ada1","",93],["aea1","",93],["afa1","",93],["d7fa","",4],["f8a1","",93],["f9a1","",93],["faa1","",93],["fba1","",93],["fca1","",93],["fda1","",93],["fe50",""],["fe80","",6,"",93],["8135f437",""]],We={uChars:[128,165,169,178,184,216,226,235,238,244,248,251,253,258,276,284,300,325,329,334,364,463,465,467,469,471,473,475,477,506,594,610,712,716,730,930,938,962,970,1026,1104,1106,8209,8215,8218,8222,8231,8241,8244,8246,8252,8365,8452,8454,8458,8471,8482,8556,8570,8596,8602,8713,8720,8722,8726,8731,8737,8740,8742,8748,8751,8760,8766,8777,8781,8787,8802,8808,8816,8854,8858,8870,8896,8979,9322,9372,9548,9588,9616,9622,9634,9652,9662,9672,9676,9680,9702,9735,9738,9793,9795,11906,11909,11913,11917,11928,11944,11947,11951,11956,11960,11964,11979,12284,12292,12312,12319,12330,12351,12436,12447,12535,12543,12586,12842,12850,12964,13200,13215,13218,13253,13263,13267,13270,13384,13428,13727,13839,13851,14617,14703,14801,14816,14964,15183,15471,15585,16471,16736,17208,17325,17330,17374,17623,17997,18018,18212,18218,18301,18318,18760,18811,18814,18820,18823,18844,18848,18872,19576,19620,19738,19887,40870,59244,59336,59367,59413,59417,59423,59431,59437,59443,59452,59460,59478,59493,63789,63866,63894,63976,63986,64016,64018,64021,64025,64034,64037,64042,65074,65093,65107,65112,65127,65132,65375,65510,65536],gbChars:[0,36,38,45,50,81,89,95,96,100,103,104,105,109,126,133,148,172,175,179,208,306,307,308,309,310,311,312,313,341,428,443,544,545,558,741,742,749,750,805,819,820,7922,7924,7925,7927,7934,7943,7944,7945,7950,8062,8148,8149,8152,8164,8174,8236,8240,8262,8264,8374,8380,8381,8384,8388,8390,8392,8393,8394,8396,8401,8406,8416,8419,8424,8437,8439,8445,8482,8485,8496,8521,8603,8936,8946,9046,9050,9063,9066,9076,9092,9100,9108,9111,9113,9131,9162,9164,9218,9219,11329,11331,11334,11336,11346,11361,11363,11366,11370,11372,11375,11389,11682,11686,11687,11692,11694,11714,11716,11723,11725,11730,11736,11982,11989,12102,12336,12348,12350,12384,12393,12395,12397,12510,12553,12851,12962,12973,13738,13823,13919,13933,14080,14298,14585,14698,15583,15847,16318,16434,16438,16481,16729,17102,17122,17315,17320,17402,17418,17859,17909,17911,17915,17916,17936,17939,17961,18664,18703,18814,18962,19043,33469,33470,33471,33484,33485,33490,33497,33501,33505,33513,33520,33536,33550,37845,37921,37948,38029,38038,38064,38065,38066,38069,38075,38076,38078,39108,39109,39113,39114,39115,39116,39265,39394,189e3]},ze=[["0","\0",127],["8141","",4,"",6,""],["8161","",9,"",5,""],["8181","",18,"",4,"",6,"",5,"",6,"",7,"",7,"",4,"",4,""],["8241","",7,"",5],["8261","",6,"",5,""],["8281","",7,"",7,"",4,"",10,"",5,"",17,"",7,"",6,"",7,"",18],["8341","",5,"",5,"",7],["8361","",18,""],["8381","",4,"",6,"",5,"",5,"",46,"",6,"",5,"",8],["8441","",5,"",8],["8461","",18],["8481","",7,"",6,"",5,"",10,"",5,"",18,"",5,"",6,"",5,"",26,""],["8541","",5,"",4,"",6,"",4],["8561","",5,"",5,"",6,""],["8581","",6,"",6,"",9,"",26,"",29,"",6,"",5,""],["8641","",6,"",5,""],["8661","",6,"",10],["8681","",22,"",4,"",6,"",5,"",6,"",22,"",4,""],["8741","",9,"",15],["8761","",18,""],["8781","",5,"",7,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",4],["8841","",4,"",5,"",6,"",4],["8861","",4,""],["8881","",15,"",4,"",6,"",5,"",54,""],["8941","",6,"",5,""],["8961","",10,"",5,""],["8981","",21,"",18,"",18,"",6,"",6,"",7,"",15],["8a41","",10,"",6,""],["8a61","",4,"",18,""],["8a81","",4,"",19,"",5,"",7,"",5,"",6,"",5,"",4,"",5,"",26,""],["8b41","",5,"",4,"",6,""],["8b61","",6,"",8],["8b81","",52,"",4,"",6,"",5,"",18,"",18],["8c41","",15,"",4],["8c61","",6,"",5,"",6,"",5],["8c81","",12,"",26,"",50,"",5,"",16],["8d41","",16,"",8],["8d61","",17,""],["8d81","",4,"",33,"",6,"",7,"",6,"",9,"",6,"",5,"",6,""],["8e41","",6,"",5,"",8],["8e61","",4,"",19],["8e81","",13,"",6,"",4,"",6,"",5,"",6,"",5,"",11,"",7,"",6,"",5,"",7],["8f41","",7,"",17],["8f61","",7,"",6,"",4],["8f81","",5,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",5],["9041","",6,"",5,""],["9061","",5,"",15],["9081","",12,"",6,"",5,"",4,"",6,"",4,"",5,"",11,"",33,""],["9141","",6,"",5],["9161","",9,"",5],["9181","",20,"",4,"",5,"",14,"",33,"",7,"",5,"",6],["9241","",7,"",4,""],["9261","",7,"",7,"",4],["9281","",21,"",18,"",6,"",7,"",6,"",35,""],["9341","",4,""],["9361","",6,"",8],["9381","",37,"",4,"",4,"",6,"",5,"",7,"",22,""],["9441","",5,"",5,"",8],["9461","",5,"",6,"",12],["9481","",5,"",6,"",6,"",9,"",22,"",4,"",6,"",10,"",6,"",24],["9541","",11,"",5,""],["9561","",6,"",5,""],["9581","",6,"",35,"",4,"",4,"",4,"",6,"",5,"",13,"",14],["9641","",23,""],["9661","",6,"",5,"",8],["9681","",10,"",5,"",13,"",33,"",6,"",44],["9741","",16,"",8],["9761","",17,"",7],["9781","",11,"",5,"",6,"",89,""],["9841","",16,"",5,""],["9861","",6,"",15],["9881","",21,"",6,"",5,"",4,"",6,"",5,"",6,"",5,"",6,"",5,""],["9941","",6,"",5,""],["9961","",6,"",5,""],["9981","",8,"",5,"",4,"",11,"",5,"",6,"",6,"",6,"",7,"",6,"",5,""],["9a41","",16],["9a61","",6,"",6,""],["9a81","",4,"",6,"",5,"",5,"",6,"",5,"",5,"",33,"",5,"",6,""],["9b41","",6,"",8],["9b61","",17,"",7],["9b81","",25,"",4,"",5,"",50,"",22,""],["9c41","",4,"",5,"",5],["9c61","",8,"",6,"",9],["9c81","",8,"",6,"",6,"",9,"",26,"",6,"",5,"",18,"",6,"",12],["9d41","",13,"",8],["9d61","",25],["9d81","",8,"",5,"",9,"",6,"",10,"",6,"",5,"",6,"",5,""],["9e41","",7,"",9,""],["9e61","",4,"",6,""],["9e81","",6,"",6,"",6,"",5,"",10,"",5,"",6,"",5,"",6,""],["9f41","",5,"",4,"",5,""],["9f61","",6,"",5,""],["9f81","",4,"",5,"",6,"",5,"",6,"",4,"",6,"",7,"",4,"",4,""],["a041","",5,"",6,""],["a061","",5,"",13],["a081","",4,"",4,"",4,"",6,"",5,"",6,"",5,"",26,"",4,"",5,"",7,""],["a141","",18,""],["a161","",6,"",5,""],["a181","",14,"",5,"",4,"",9,""],["a241","",5,"",18],["a261","",6,"",18],["a281","",7,"",6,"",7,""],["a341","",6,"",10,""],["a361","",6,"",16],["a381","",16,"",4,"",58,"",32,""],["a441","",5,""],["a461","",5,"",12],["a481","",28,"",93],["a541","",4,"",6,"",5,""],["a561","",17,"",5,""],["a581","",16,"",14,"",9],["a5b0","",9],["a5c1","",16,"",6],["a5e1","",16,"",6],["a641","",19,""],["a661","",5,"",5,"",6],["a681","",6,"",18,"",7],["a741","",4,"",6,"",7],["a761","",22,""],["a781","",6,"",5,"",7,"",9,"",9,"",4,"",5,"",4,""],["a841","",10,"",14],["a861","",18,"",6],["a881","",19,"",11,""],["a8a6",""],["a8a8",""],["a8b1","",27,"",25,"",14,""],["a941","",14,"",10],["a961","",18],["a981","",14,"",6,"",27,"",25,"",14,""],["aa41","",6,"",4,""],["aa61","",4,"",5,"",6,""],["aa81","",29,"",82],["ab41","",6,"",5,""],["ab61","",6,"",5,"",5],["ab81","",8,"",6,"",12,"",85],["ac41","",5,"",6,""],["ac61","",11,"",4],["ac81","",28,"",5,"",25],["acd1","",5,"",25],["ad41","",6,"",5,"",7],["ad61","",6,"",10,""],["ad81","",5,"",18,""],["ae41","",5,"",16],["ae61","",5,"",6,"",4],["ae81","",6,"",5,""],["af41","",19],["af61","",13,"",5,""],["af81","",5,"",6,"",5,""],["b041","",5,"",5,"",12],["b061","",5,"",19],["b081","",13,"",6,"",5,"",7,"",4,""],["b141","",6,"",5,""],["b161","",6,"",5,"",11],["b181","",14,"",6,""],["b241","",6,"",5,""],["b261","",18,"",5,""],["b281","",5,"",18,"",6,""],["b341","",19,""],["b361","",5,"",5,"",5],["b381","",5,"",5,"",19,"",4,""],["b441","",5,"",6,"",5],["b461","",6,"",10,""],["b481","",6,"",18,"",4,"",4,""],["b541","",14,"",5],["b561","",5,"",5,"",4],["b581","",6,"",5,"",11,""],["b641","",7,"",17],["b661","",15,""],["b681","",5,"",6,"",5,""],["b741","",13,"",6,""],["b761","",20,""],["b781","",6,"",14,""],["b841","",7,"",17],["b861","",8,"",13],["b881","",5,"",24,"",4,""],["b941","",6,"",5,""],["b961","",14,"",6,""],["b981","",22,"",4,"",4,""],["ba41","",5,"",6,""],["ba61","",5,"",4,"",5],["ba81","",6,"",9,""],["bb41","",4,"",5,"",4,""],["bb61","",6,"",5,""],["bb81","",31,""],["bc41","",17,""],["bc61","",5,"",6,""],["bc81","",4,"",6,"",5,"",5,"",4,""],["bd41","",7,"",7,""],["bd61","",5,"",13],["bd81","",5,"",25,""],["be41","",7,"",14],["be61","",7,"",7,""],["be81","",4,"",4,"",5,"",8,"",6,""],["bf41","",10,"",14],["bf61","",18,""],["bf81","",5,"",7,"",6,"",5,""],["c041","",5,"",6,"",5],["c061","",25],["c081","",6,"",5,"",7,""],["c141","",5,"",6,""],["c161","",19,""],["c181","",31,""],["c241","",4,"",5,""],["c261","",4,"",5,"",6,""],["c281","",5,"",7,"",9,""],["c341","",4],["c361","",4,"",5,"",11],["c381","",5,"",7,"",5,""],["c441","",7,"",7,""],["c461","",5,"",4],["c481","",5,"",11,""],["c541","",6,"",5,""],["c561","",6,"",5,"",4],["c581","",6,"",5,""],["c641","",6,"",5],["c6a1",""],["c7a1",""],["c8a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1","",5,"",4,""],["d2a1","",4,"",5,"",10,"",7,"",5,""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f5a1",""],["f6a1",""],["f7a1",""],["f8a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fda1",""]],He=[["0","\0",127],["a140",""],["a1a1","",4,""],["a240","",7,""],["a2a1","",9,"",9,"",8,"",25,"",21],["a340","",16,"",6,"",16,"",6,"",10],["a3a1","",25,""],["a3e1",""],["a440",""],["a4a1",""],["a540",""],["a5a1",""],["a640",""],["a6a1",""],["a740",""],["a7a1",""],["a840",""],["a8a1",""],["a940",""],["a9a1",""],["aa40",""],["aaa1",""],["ab40",""],["aba1",""],["ac40",""],["aca1",""],["ad40",""],["ada1",""],["ae40",""],["aea1",""],["af40",""],["afa1",""],["b040",""],["b0a1",""],["b140",""],["b1a1",""],["b240",""],["b2a1",""],["b340",""],["b3a1",""],["b440",""],["b4a1",""],["b540",""],["b5a1",""],["b640",""],["b6a1",""],["b740",""],["b7a1",""],["b840",""],["b8a1",""],["b940",""],["b9a1",""],["ba40",""],["baa1",""],["bb40",""],["bba1",""],["bc40",""],["bca1",""],["bd40",""],["bda1",""],["be40",""],["bea1",""],["bf40",""],["bfa1",""],["c040",""],["c0a1",""],["c140",""],["c1a1",""],["c240",""],["c2a1",""],["c340",""],["c3a1",""],["c440",""],["c4a1",""],["c540",""],["c5a1",""],["c640",""],["c940",""],["c9a1",""],["ca40",""],["caa1",""],["cb40",""],["cba1",""],["cc40",""],["cca1",""],["cd40",""],["cda1",""],["ce40",""],["cea1",""],["cf40",""],["cfa1",""],["d040",""],["d0a1",""],["d140",""],["d1a1",""],["d240",""],["d2a1",""],["d340",""],["d3a1",""],["d440",""],["d4a1",""],["d540",""],["d5a1",""],["d640",""],["d6a1",""],["d740",""],["d7a1",""],["d840",""],["d8a1",""],["d940",""],["d9a1",""],["da40",""],["daa1",""],["db40",""],["dba1",""],["dc40",""],["dca1",""],["dd40",""],["dda1",""],["de40",""],["dea1",""],["df40",""],["dfa1",""],["e040",""],["e0a1",""],["e140",""],["e1a1",""],["e240",""],["e2a1",""],["e340",""],["e3a1",""],["e440",""],["e4a1",""],["e540",""],["e5a1",""],["e640",""],["e6a1",""],["e740",""],["e7a1",""],["e840",""],["e8a1",""],["e940",""],["e9a1",""],["ea40",""],["eaa1",""],["eb40",""],["eba1",""],["ec40",""],["eca1",""],["ed40",""],["eda1",""],["ee40",""],["eea1",""],["ef40",""],["efa1",""],["f040",""],["f0a1",""],["f140",""],["f1a1",""],["f240",""],["f2a1",""],["f340",""],["f3a1",""],["f440",""],["f4a1",""],["f540",""],["f5a1",""],["f640",""],["f6a1",""],["f740",""],["f7a1",""],["f840",""],["f8a1",""],["f940",""],["f9a1",""]],$e=[["8740",""],["8767",""],["87a1",""],["8840","",4,""],["88a1",""],["8940",""],["8943",""],["8946",""],["894c",""],["89a1",""],["89ab",""],["89b0",""],["89b5",""],["89c1",""],["89c5",""],["8a40",""],["8a43",""],["8a64",""],["8a76",""],["8aa1",""],["8aac",""],["8ab2",""],["8abb",""],["8ac9",""],["8ace",""],["8adf",""],["8af6",""],["8b40",""],["8b55",""],["8ba1",""],["8bde",""],["8c40",""],["8ca1",""],["8ca7",""],["8cc9",""],["8cce",""],["8ce6",""],["8d40",""],["8d42",""],["8da1",""],["8e40",""],["8ea1",""],["8f40",""],["8fa1",""],["9040",""],["90a1",""],["9140",""],["91a1",""],["9240",""],["92a1",""],["9340",""],["93a1",""],["9440",""],["94a1",""],["9540",""],["95a1",""],["9640",""],["96a1",""],["9740",""],["97a1",""],["9840",""],["98a1",""],["9940",""],["99a1",""],["9a40",""],["9aa1",""],["9b40",""],["9b62",""],["9ba1",""],["9c40",""],["9ca1",""],["9d40",""],["9da1",""],["9e40",""],["9ea1",""],["9ead",""],["9ec5",""],["9ef5",""],["9f40",""],["9f4f",""],["9fa1",""],["9fae",""],["9fb2",""],["9fc1",""],["9fc9",""],["9fdb",""],["9fe7",""],["9feb",""],["9ff0",""],["a040",""],["a055",""],["a058",""],["a05b",""],["a063",""],["a073",""],["a0a1",""],["a0a6",""],["a0ae",""],["a0b0",""],["a0d4",""],["a0e2",""],["a3c0","",31,""],["c6a1","",9,"",9,"",9,"",23],["c740","",58,""],["c7a1","",81,"",5,"",4],["c840","",26,"",25,""],["c8a1",""],["c8cd",""],["c8f5",""],["f9fe",""],["fa40",""],["faa1",""],["fb40",""],["fba1",""],["fc40",""],["fca1",""],["fd40",""],["fda1",""],["fe40",""],["fea1",""]];var Ye,Ke,Xe,qe,Ze;function requireStreams(){if(Ze)return qe;Ze=1;var t=me.Buffer;return qe=function streams(p){var h=p.Transform;function IconvLiteEncoderStream(t,p){this.conv=t,(p=p||{}).decodeStrings=!1,h.call(this,p)}function IconvLiteDecoderStream(t,p){this.conv=t,(p=p||{}).encoding=this.encoding="utf8",h.call(this,p)}return IconvLiteEncoderStream.prototype=Object.create(h.prototype,{constructor:{value:IconvLiteEncoderStream}}),IconvLiteEncoderStream.prototype._transform=function(t,p,h){if("string"!=typeof t)return h(new Error("Iconv encoding stream needs strings as its input."));try{var x=this.conv.write(t);x&&x.length&&this.push(x),h()}catch(bm){h(bm)}},IconvLiteEncoderStream.prototype._flush=function(t){try{var p=this.conv.end();p&&p.length&&this.push(p),t()}catch(bm){t(bm)}},IconvLiteEncoderStream.prototype.collect=function(p){var h=[];return this.on("error",p),this.on("data",(function(t){h.push(t)})),this.on("end",(function(){p(null,t.concat(h))})),this},IconvLiteDecoderStream.prototype=Object.create(h.prototype,{constructor:{value:IconvLiteDecoderStream}}),IconvLiteDecoderStream.prototype._transform=function(p,h,x){if(!(t.isBuffer(p)||p instanceof Uint8Array))return x(new Error("Iconv decoding stream needs buffers as its input."));try{var M=this.conv.write(p);M&&M.length&&this.push(M,this.encoding),x()}catch(bm){x(bm)}},IconvLiteDecoderStream.prototype._flush=function(t){try{var p=this.conv.end();p&&p.length&&this.push(p,this.encoding),t()}catch(bm){t(bm)}},IconvLiteDecoderStream.prototype.collect=function(t){var p="";return this.on("error",t),this.on("data",(function(t){p+=t})),this.on("end",(function(){t(null,p)})),this},{IconvLiteEncoderStream:IconvLiteEncoderStream,IconvLiteDecoderStream:IconvLiteDecoderStream}}}const Je=getAugmentedNamespace(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));!function(t){var p,h=me.Buffer,x=ge,M=t.exports;M.encodings=null,M.defaultCharUnicode="",M.defaultCharSingleByte="?",M.encode=function encode(t,p,x){t=""+(t||"");var k=M.getEncoder(p,x),I=k.write(t),N=k.end();return N&&N.length>0?h.concat([I,N]):I},M.decode=function decode(t,p,x){"string"==typeof t&&(M.skipDecodeWarning||(M.skipDecodeWarning=!0),t=h.from(""+(t||""),"binary"));var k=M.getDecoder(p,x),I=k.write(t),N=k.end();return N?I+N:I},M.encodingExists=function encodingExists(t){try{return M.getCodec(t),!0}catch(bm){return!1}},M.toEncoding=M.encode,M.fromEncoding=M.decode,M._codecDataCache={},M.getCodec=function getCodec(t){M.encodings||(M.encodings=function requireEncodings(){return Xe||(Xe=1,function(t){for(var p=[requireInternal(),requireUtf32(),requireUtf16(),requireUtf7(),requireSbcsCodec(),Le?Ie:(Le=1,Ie={10029:"maccenteuro",maccenteuro:{type:"_sbcs",chars:""},808:"cp808",ibm808:"cp808",cp808:{type:"_sbcs",chars:""},mik:{type:"_sbcs",chars:""},cp720:{type:"_sbcs",chars:""},ascii8bit:"ascii",usascii:"ascii",ansix34:"ascii",ansix341968:"ascii",ansix341986:"ascii",csascii:"ascii",cp367:"ascii",ibm367:"ascii",isoir6:"ascii",iso646us:"ascii",iso646irv:"ascii",us:"ascii",latin1:"iso88591",latin2:"iso88592",latin3:"iso88593",latin4:"iso88594",latin5:"iso88599",latin6:"iso885910",latin7:"iso885913",latin8:"iso885914",latin9:"iso885915",latin10:"iso885916",csisolatin1:"iso88591",csisolatin2:"iso88592",csisolatin3:"iso88593",csisolatin4:"iso88594",csisolatincyrillic:"iso88595",csisolatinarabic:"iso88596",csisolatingreek:"iso88597",csisolatinhebrew:"iso88598",csisolatin5:"iso88599",csisolatin6:"iso885910",l1:"iso88591",l2:"iso88592",l3:"iso88593",l4:"iso88594",l5:"iso88599",l6:"iso885910",l7:"iso885913",l8:"iso885914",l9:"iso885915",l10:"iso885916",isoir14:"iso646jp",isoir57:"iso646cn",isoir100:"iso88591",isoir101:"iso88592",isoir109:"iso88593",isoir110:"iso88594",isoir144:"iso88595",isoir127:"iso88596",isoir126:"iso88597",isoir138:"iso88598",isoir148:"iso88599",isoir157:"iso885910",isoir166:"tis620",isoir179:"iso885913",isoir199:"iso885914",isoir203:"iso885915",isoir226:"iso885916",cp819:"iso88591",ibm819:"iso88591",cyrillic:"iso88595",arabic:"iso88596",arabic8:"iso88596",ecma114:"iso88596",asmo708:"iso88596",greek:"iso88597",greek8:"iso88597",ecma118:"iso88597",elot928:"iso88597",hebrew:"iso88598",hebrew8:"iso88598",turkish:"iso88599",turkish8:"iso88599",thai:"iso885911",thai8:"iso885911",celtic:"iso885914",celtic8:"iso885914",isoceltic:"iso885914",tis6200:"tis620",tis62025291:"tis620",tis62025330:"tis620",1e4:"macroman",10006:"macgreek",10007:"maccyrillic",10079:"maciceland",10081:"macturkish",cspc8codepage437:"cp437",cspc775baltic:"cp775",cspc850multilingual:"cp850",cspcp852:"cp852",cspc862latinhebrew:"cp862",cpgr:"cp869",msee:"cp1250",mscyrl:"cp1251",msansi:"cp1252",msgreek:"cp1253",msturk:"cp1254",mshebr:"cp1255",msarab:"cp1256",winbaltrim:"cp1257",cp20866:"koi8r",20866:"koi8r",ibm878:"koi8r",cskoi8r:"koi8r",cp21866:"koi8u",21866:"koi8u",ibm1168:"koi8u",strk10482002:"rk1048",tcvn5712:"tcvn",tcvn57121:"tcvn",gb198880:"iso646cn",cn:"iso646cn",csiso14jisc6220ro:"iso646jp",jisc62201969ro:"iso646jp",jp:"iso646jp",cshproman8:"hproman8",r8:"hproman8",roman8:"hproman8",xroman8:"hproman8",ibm1051:"hproman8",mac:"macintosh",csmacintosh:"macintosh"}),Re?Ee:(Re=1,Ee={437:"cp437",737:"cp737",775:"cp775",850:"cp850",852:"cp852",855:"cp855",856:"cp856",857:"cp857",858:"cp858",860:"cp860",861:"cp861",862:"cp862",863:"cp863",864:"cp864",865:"cp865",866:"cp866",869:"cp869",874:"windows874",922:"cp922",1046:"cp1046",1124:"cp1124",1125:"cp1125",1129:"cp1129",1133:"cp1133",1161:"cp1161",1162:"cp1162",1163:"cp1163",1250:"windows1250",1251:"windows1251",1252:"windows1252",1253:"windows1253",1254:"windows1254",1255:"windows1255",1256:"windows1256",1257:"windows1257",1258:"windows1258",28591:"iso88591",28592:"iso88592",28593:"iso88593",28594:"iso88594",28595:"iso88595",28596:"iso88596",28597:"iso88597",28598:"iso88598",28599:"iso88599",28600:"iso885910",28601:"iso885911",28603:"iso885913",28604:"iso885914",28605:"iso885915",28606:"iso885916",windows874:{type:"_sbcs",chars:""},win874:"windows874",cp874:"windows874",windows1250:{type:"_sbcs",chars:""},win1250:"windows1250",cp1250:"windows1250",windows1251:{type:"_sbcs",chars:""},win1251:"windows1251",cp1251:"windows1251",windows1252:{type:"_sbcs",chars:""},win1252:"windows1252",cp1252:"windows1252",windows1253:{type:"_sbcs",chars:""},win1253:"windows1253",cp1253:"windows1253",windows1254:{type:"_sbcs",chars:""},win1254:"windows1254",cp1254:"windows1254",windows1255:{type:"_sbcs",chars:""},win1255:"windows1255",cp1255:"windows1255",windows1256:{type:"_sbcs",chars:""},win1256:"windows1256",cp1256:"windows1256",windows1257:{type:"_sbcs",chars:""},win1257:"windows1257",cp1257:"windows1257",windows1258:{type:"_sbcs",chars:""},win1258:"windows1258",cp1258:"windows1258",iso88591:{type:"_sbcs",chars:""},cp28591:"iso88591",iso88592:{type:"_sbcs",chars:""},cp28592:"iso88592",iso88593:{type:"_sbcs",chars:""},cp28593:"iso88593",iso88594:{type:"_sbcs",chars:""},cp28594:"iso88594",iso88595:{type:"_sbcs",chars:""},cp28595:"iso88595",iso88596:{type:"_sbcs",chars:""},cp28596:"iso88596",iso88597:{type:"_sbcs",chars:""},cp28597:"iso88597",iso88598:{type:"_sbcs",chars:""},cp28598:"iso88598",iso88599:{type:"_sbcs",chars:""},cp28599:"iso88599",iso885910:{type:"_sbcs",chars:""},cp28600:"iso885910",iso885911:{type:"_sbcs",chars:""},cp28601:"iso885911",iso885913:{type:"_sbcs",chars:""},cp28603:"iso885913",iso885914:{type:"_sbcs",chars:""},cp28604:"iso885914",iso885915:{type:"_sbcs",chars:""},cp28605:"iso885915",iso885916:{type:"_sbcs",chars:""},cp28606:"iso885916",cp437:{type:"_sbcs",chars:""},ibm437:"cp437",csibm437:"cp437",cp737:{type:"_sbcs",chars:""},ibm737:"cp737",csibm737:"cp737",cp775:{type:"_sbcs",chars:""},ibm775:"cp775",csibm775:"cp775",cp850:{type:"_sbcs",chars:""},ibm850:"cp850",csibm850:"cp850",cp852:{type:"_sbcs",chars:""},ibm852:"cp852",csibm852:"cp852",cp855:{type:"_sbcs",chars:""},ibm855:"cp855",csibm855:"cp855",cp856:{type:"_sbcs",chars:""},ibm856:"cp856",csibm856:"cp856",cp857:{type:"_sbcs",chars:""},ibm857:"cp857",csibm857:"cp857",cp858:{type:"_sbcs",chars:""},ibm858:"cp858",csibm858:"cp858",cp860:{type:"_sbcs",chars:""},ibm860:"cp860",csibm860:"cp860",cp861:{type:"_sbcs",chars:""},ibm861:"cp861",csibm861:"cp861",cp862:{type:"_sbcs",chars:""},ibm862:"cp862",csibm862:"cp862",cp863:{type:"_sbcs",chars:""},ibm863:"cp863",csibm863:"cp863",cp864:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},ibm864:"cp864",csibm864:"cp864",cp865:{type:"_sbcs",chars:""},ibm865:"cp865",csibm865:"cp865",cp866:{type:"_sbcs",chars:""},ibm866:"cp866",csibm866:"cp866",cp869:{type:"_sbcs",chars:""},ibm869:"cp869",csibm869:"cp869",cp922:{type:"_sbcs",chars:""},ibm922:"cp922",csibm922:"cp922",cp1046:{type:"_sbcs",chars:""},ibm1046:"cp1046",csibm1046:"cp1046",cp1124:{type:"_sbcs",chars:""},ibm1124:"cp1124",csibm1124:"cp1124",cp1125:{type:"_sbcs",chars:""},ibm1125:"cp1125",csibm1125:"cp1125",cp1129:{type:"_sbcs",chars:""},ibm1129:"cp1129",csibm1129:"cp1129",cp1133:{type:"_sbcs",chars:""},ibm1133:"cp1133",csibm1133:"cp1133",cp1161:{type:"_sbcs",chars:""},ibm1161:"cp1161",csibm1161:"cp1161",cp1162:{type:"_sbcs",chars:""},ibm1162:"cp1162",csibm1162:"cp1162",cp1163:{type:"_sbcs",chars:""},ibm1163:"cp1163",csibm1163:"cp1163",maccroatian:{type:"_sbcs",chars:""},maccyrillic:{type:"_sbcs",chars:""},macgreek:{type:"_sbcs",chars:""},maciceland:{type:"_sbcs",chars:""},macroman:{type:"_sbcs",chars:""},macromania:{type:"_sbcs",chars:""},macthai:{type:"_sbcs",chars:"\ufeff"},macturkish:{type:"_sbcs",chars:""},macukraine:{type:"_sbcs",chars:""},koi8r:{type:"_sbcs",chars:""},koi8u:{type:"_sbcs",chars:""},koi8ru:{type:"_sbcs",chars:""},koi8t:{type:"_sbcs",chars:""},armscii8:{type:"_sbcs",chars:")(.,-"},rk1048:{type:"_sbcs",chars:""},tcvn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},georgianacademy:{type:"_sbcs",chars:""},georgianps:{type:"_sbcs",chars:""},pt154:{type:"_sbcs",chars:""},viscii:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},iso646cn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}"},iso646jp:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}"},hproman8:{type:"_sbcs",chars:""},macintosh:{type:"_sbcs",chars:""},ascii:{type:"_sbcs",chars:""},tis620:{type:"_sbcs",chars:""}}),requireDbcsCodec(),Ke?Ye:(Ke=1,Ye={shiftjis:{type:"_dbcs",table:function table(){return Fe},encodeAdd:{"":92,"":126},encodeSkipVals:[{from:60736,to:63808}]},csshiftjis:"shiftjis",mskanji:"shiftjis",sjis:"shiftjis",windows31j:"shiftjis",ms31j:"shiftjis",xsjis:"shiftjis",windows932:"shiftjis",ms932:"shiftjis",932:"shiftjis",cp932:"shiftjis",eucjp:{type:"_dbcs",table:function table(){return Ve},encodeAdd:{"":92,"":126}},gb2312:"cp936",gb231280:"cp936",gb23121980:"cp936",csgb2312:"cp936",csiso58gb231280:"cp936",euccn:"cp936",windows936:"cp936",ms936:"cp936",936:"cp936",cp936:{type:"_dbcs",table:function table(){return Ue}},gbk:{type:"_dbcs",table:function table(){return Ue.concat(je)}},xgbk:"gbk",isoir58:"gbk",gb18030:{type:"_dbcs",table:function table(){return Ue.concat(je)},gb18030:function gb18030(){return We},encodeSkipVals:[128],encodeAdd:{"":41699}},chinese:"gb18030",windows949:"cp949",ms949:"cp949",949:"cp949",cp949:{type:"_dbcs",table:function table(){return ze}},cseuckr:"cp949",csksc56011987:"cp949",euckr:"cp949",isoir149:"cp949",korean:"cp949",ksc56011987:"cp949",ksc56011989:"cp949",ksc5601:"cp949",windows950:"cp950",ms950:"cp950",950:"cp950",cp950:{type:"_dbcs",table:function table(){return He}},big5:"big5hkscs",big5hkscs:{type:"_dbcs",table:function table(){return He.concat($e)},encodeSkipVals:[36457,36463,36478,36523,36532,36557,36560,36695,36713,36718,36811,36862,36973,36986,37060,37084,37105,37311,37551,37552,37553,37554,37585,37959,38090,38361,38652,39285,39798,39800,39803,39878,39902,39916,39926,40002,40019,40034,40040,40043,40055,40124,40125,40144,40279,40282,40388,40431,40443,40617,40687,40701,40800,40907,41079,41180,41183,36812,37576,38468,38637,41636,41637,41639,41638,41676,41678]},cnbig5:"big5hkscs",csbig5:"big5hkscs",xxbig5:"big5hkscs"})],h=0;h<p.length;h++){var x=p[h];for(var M in x)Object.prototype.hasOwnProperty.call(x,M)&&(t[M]=x[M])}}(_e)),_e}());for(var p=M._canonicalizeEncoding(t),h={};;){var x=M._codecDataCache[p];if(x)return x;var k=M.encodings[p];switch(_typeof$2(k)){case"string":p=k;break;case"object":for(var I in k)h[I]=k[I];h.encodingName||(h.encodingName=p),p=k.type;break;case"function":return h.encodingName||(h.encodingName=p),x=new k(h,M),M._codecDataCache[h.encodingName]=x,x;default:throw new Error("Encoding not recognized: '"+t+"' (searched as: '"+p+"')")}}},M._canonicalizeEncoding=function(t){return(""+t).toLowerCase().replace(/:\d{4}$|[^0-9a-z]/g,"")},M.getEncoder=function getEncoder(t,p){var h=M.getCodec(t),k=new h.encoder(p,h);return h.bomAware&&p&&p.addBOM&&(k=new x.PrependBOM(k,p)),k},M.getDecoder=function getDecoder(t,p){var h=M.getCodec(t),k=new h.decoder(p,h);return!h.bomAware||p&&!1===p.stripBOM||(k=new x.StripBOM(k,p)),k},M.enableStreamingAPI=function enableStreamingAPI(t){if(!M.supportsStreams){var p=requireStreams()(t);M.IconvLiteEncoderStream=p.IconvLiteEncoderStream,M.IconvLiteDecoderStream=p.IconvLiteDecoderStream,M.encodeStream=function encodeStream(t,p){return new M.IconvLiteEncoderStream(M.getEncoder(t,p),p)},M.decodeStream=function decodeStream(t,p){return new M.IconvLiteDecoderStream(M.getDecoder(t,p),p)},M.supportsStreams=!0}};try{p=Je}catch(bm){}p&&p.Transform?M.enableStreamingAPI(p):M.encodeStream=M.decodeStream=function(){throw new Error("iconv-lite Streaming API is not enabled. Use iconv.enableStreamingAPI(require('stream')); to enable it.")}}(le);var Qe={exports:{}};!function(t,p){var x=h,M=x.Buffer;function copyProps(t,p){for(var h in t)p[h]=t[h]}function SafeBuffer(t,p,h){return M(t,p,h)}M.from&&M.alloc&&M.allocUnsafe&&M.allocUnsafeSlow?t.exports=x:(copyProps(x,p),p.Buffer=SafeBuffer),copyProps(M,SafeBuffer),SafeBuffer.from=function(t,p,h){if("number"==typeof t)throw new TypeError("Argument must not be a number");return M(t,p,h)},SafeBuffer.alloc=function(t,p,h){if("number"!=typeof t)throw new TypeError("Argument must be a number");var x=M(t);return void 0!==p?"string"==typeof h?x.fill(p,h):x.fill(p):x.fill(0),x},SafeBuffer.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return M(t)},SafeBuffer.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return x.SlowBuffer(t)}}(Qe,Qe.exports);var et=function(){function MxG2312(){_classCallCheck$1(this,MxG2312),_defineProperty(this,"isUseUtf8",!1)}return _createClass$1(MxG2312,[{key:"encodeToGb2312Imp",value:function encodeToGb2312Imp(t){var p=le.exports.encode(t,"gb2312"),h="";return p.forEach((function(t){h+="%"+t.toString(16)})),h}},{key:"decodeFromGb2312Imp",value:function decodeFromGb2312Imp(t){for(var p=[],h=t.length,x=0;x<h;){if("%"!=t.charAt(x))break;x+=1;var M=parseInt(t.slice(x,x+2),16);p.push(M),x+=2}return le.exports.decode(Qe.exports.Buffer.from(p),"gb2312")}},{key:"encodeToGb2312",value:function encodeToGb2312(t){return this.isUseUtf8?t:this.encodeToGb2312Imp(t)}},{key:"decodeFromGb2312",value:function decodeFromGb2312(t){return this.isUseUtf8?t:this.decodeFromGb2312Imp(t)}}]),MxG2312}(),tt=new et,rt=window;rt.McDrawObjectEvent_utf8ToAscii=function(t){return tt.encodeToGb2312Imp(t)},rt.McDrawObjectEvent_asciiToUTF8=function(t){return tt.decodeFromGb2312Imp(t)};const nt="1.0.297";var it="SharedArrayBuffer"in window,ot=document.currentScript&&/unpkg\.com\/mxcad/.test(document.currentScript.src),st=function get2DFileURL(t){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self.location.href;return ot?"https://unpkg.com/mxcad@".concat(nt,"/dist/wasm/2d-st/").concat(t):p+t},ct=function get2DSTFileURL(t){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self.location.href;return ot?"https://unpkg.com/mxcad@".concat(nt,"/dist/wasm/2d/").concat(t):p+t},ut=function get3DFileURL(t){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self.location.href;return ot?"https://unpkg.com/mxcad@".concat(nt,"/dist/wasm/3d/").concat(t):p+t},lt=function loadScript(t){return new Promise((function(p,h){var x=document.createElement("script");x.src=t,x.type="text/javascript",x.crossOrigin="anonymous",document.body.appendChild(x),x.onload=function(){p()},x.onerror=function(t){h(t)}}))},pt=function(){var t=_asyncToGenerator(ie.mark((function _callee(t,p,h){var x,M;return ie.wrap((function _callee$(k){for(;;)switch(k.prev=k.next){case 0:return x=h.locateFile,M=x(t+".js"),k.prev=2,k.next=5,lt(M);case 5:return k.next=7,globalThis[p](h);case 7:return k.abrupt("return",k.sent);case 10:k.prev=10,k.t0=k.catch(2);case 14:case"end":return k.stop()}}),_callee,null,[[2,10]])})));return function loadWams(p,h,x){return t.apply(this,arguments)}}();function _arrayLikeToArray$6(t,p){(null==p||p>t.length)&&(p=t.length);for(var h=0,x=new Array(p);h<p;h++)x[h]=t[h];return x}function _unsupportedIterableToArray$6(t,p){if(t){if("string"==typeof t)return _arrayLikeToArray$6(t,p);var h=Object.prototype.toString.call(t).slice(8,-1);return"Object"===h&&t.constructor&&(h=t.constructor.name),"Map"===h||"Set"===h?Array.from(t):"Arguments"===h||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h)?_arrayLikeToArray$6(t,p):void 0}}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray$6(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray$6(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ht=new FinalizationRegistry((function(p){t.MxCpp.App.destroyObject(p)})),ft={},dt=function(){function McRxObject(t){_classCallCheck$1(this,McRxObject),_defineProperty(this,"imp",0),this.imp=t,this.imp&&(this.imp.isNull(),ht.register(this,t,ft))}return _createClass$1(McRxObject,[{key:"constructor_MxCADResbuf",value:function constructor_MxCADResbuf(t){this.imp=t,this.imp&&ht.register(this,t,ft)}},{key:"getImp",value:function getImp(){return this.imp}},{key:"initTempObject",value:function initTempObject(t){this.imp=t}},{key:"objectName",get:function get(){return this.imp.getObjectName()}},{key:"dxf0",get:function get(){return this.imp.getDxf0()}},{key:"getJson",value:function getJson(){var t=this.imp.getJson();return tt.decodeFromGb2312(t)}},{key:"setJson",value:function setJson(t){var p=tt.encodeToGb2312(t);return this.imp.setJson(p)}},{key:"isKindOf",value:function isKindOf(t){return this.imp.isKindOf(t)}},{key:"isNull",value:function isNull(){return this.imp.isNull()}}]),McRxObject}();function _createSuper$b(t){var p=function _isNativeReflectConstruct$c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(bm){return!1}}();return function _createSuperInternal(){var h,x=_getPrototypeOf$1(t);if(p){var M=_getPrototypeOf$1(this).constructor;h=Reflect.construct(x,arguments,M)}else h=x.apply(this,arguments);return _possibleConstructorReturn$1(this,h)}}var mt=function(t){return t[t.kMxCAD=0]="kMxCAD",t[t.kMxDraw=1]="kMxDraw",t[t.kInvalid=2]="kInvalid",t}(mt||{}),gt=function(){function McObjectId(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;_classCallCheck$1(this,McObjectId),_defineProperty(this,"id",void 0),_defineProperty(this,"type",void 0),this.id=t,this.type=t?2==p?0:p:2}return _createClass$1(McObjectId,[{key:"isValid",value:function isValid(){return 2!=this.type&&0!=this.id}},{key:"isNull",value:function isNull(){return 2==this.type||0==this.id}},{key:"isErase",value:function isErase(){return!!this.isValid()&&(0==this.type&&0!=this.id&&t.MxCpp.App.getImp().isObjectEraseSataus(this.id))}},{key:"erase",value:function erase(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isValid()&&(1==this.type?p.MxFun.getCurrentDraw().eraseMxEntity(this.id):0==this.type&&Mt.eraseObject(this.id,t))}},{key:"getMcDbObject",value:function getMcDbObject(){return this.isValid()&&0==this.type?t.MxCpp.App.objectIdToObject(this.id):null}},{key:"isKindOf",value:function isKindOf(p){return!!this.isValid()&&(0==this.type&&t.MxCpp.App.objectIdIsKindOf(this.id,p))}},{key:"getMcDbEntity",value:function getMcDbEntity(){return this.isValid()&&0==this.type&&t.MxCpp.App.objectIdIsKindOf(this.id,"McDbEntity")?t.MxCpp.App.objectIdToObject(this.id):null}},{key:"getMcDbCurve",value:function getMcDbCurve(){return this.isValid()&&0==this.type&&t.MxCpp.App.objectIdIsKindOf(this.id,"McDbCurve")?t.MxCpp.App.objectIdToObject(this.id):null}},{key:"getMcDbBlockTableRecord",value:function getMcDbBlockTableRecord(){return this.isValid()&&0==this.type&&t.MxCpp.App.objectIdIsKindOf(this.id,"McDbBlockTableRecord")?t.MxCpp.App.objectIdToObject(this.id):null}},{key:"getMcDbLayerTableRecord",value:function getMcDbLayerTableRecord(){return this.isValid()&&0==this.type&&t.MxCpp.App.objectIdIsKindOf(this.id,"McDbLayerTableRecord")?t.MxCpp.App.objectIdToObject(this.id):null}},{key:"getMcDbDimStyleTableRecord",value:function getMcDbDimStyleTableRecord(){return this.isValid()&&0==this.type&&t.MxCpp.App.objectIdIsKindOf(this.id,"McDbDimStyleTableRecord")?t.MxCpp.App.objectIdToObject(this.id):null}},{key:"getMcDbLinetypeTableRecord",value:function getMcDbLinetypeTableRecord(){return this.isValid()&&0==this.type&&t.MxCpp.App.objectIdIsKindOf(this.id,"McDbLinetypeTableRecord")?t.MxCpp.App.objectIdToObject(this.id):null}},{key:"getMcDbTextStyleTableRecord",value:function getMcDbTextStyleTableRecord(){return this.isValid()&&0==this.type&&t.MxCpp.App.objectIdIsKindOf(this.id,"McDbTextStyleTableRecord")?t.MxCpp.App.objectIdToObject(this.id):null}},{key:"getMcDbDimension",value:function getMcDbDimension(){return this.isValid()&&0==this.type&&t.MxCpp.App.objectIdIsKindOf(this.id,"McDbDimension")?t.MxCpp.App.objectIdToObject(this.id):null}},{key:"getMcDbCustomEntity",value:function getMcDbCustomEntity(){return this.isValid()&&0==this.type&&t.MxCpp.App.objectIdIsKindOf(this.id,"McDbCustomEntity")?t.MxCpp.App.objectIdToObject(this.id):null}},{key:"clone",value:function clone(){if(!this.isValid())return null;if(0==this.type){var p=t.MxCpp.App.getImp();if(p.ObjectIdIsKindOf(this.id,"McDbCustomEntity")){var h=this.getMcDbCustomEntity();return h?h.clone():null}var x=p.ObjectIdToMdObject(this.id);if(!x)return null;var M=x.Clone();return t.MxCpp.App.destroyObject(x),t.MxCpp.App.createCloneObject(M)}return null}},{key:"getObjectName",value:function getObjectName(){if(0==this.type)return t.MxCpp.App.getImp().ObjectIdToObjectName(this.id);if(1==this.type){var h=p.MxFun.getCurrentDraw().getMxEntity(this.id);if(h)return h.getTypeName()}return""}},{key:"getMxDbEntity",value:function getMxDbEntity(){return this.isValid()&&1==this.type?p.MxFun.getCurrentDraw().getMxEntity(this.id):null}},{key:"getMcDbRasterImageDef",value:function getMcDbRasterImageDef(){return this.isValid()&&0==this.type&&t.MxCpp.App.objectIdIsKindOf(this.id,"McDbRasterImageDef")?t.MxCpp.App.objectIdToObject(this.id):null}},{key:"getMcDbDictionary",value:function getMcDbDictionary(){return this.isValid()&&0==this.type&&t.MxCpp.App.objectIdIsKindOf(this.id,"McDbDictionary")?t.MxCpp.App.objectIdToObject(this.id):null}},{key:"getMcDbXrecord",value:function getMcDbXrecord(){return this.isValid()&&0==this.type&&t.MxCpp.App.objectIdIsKindOf(this.id,"McDbXrecord")?t.MxCpp.App.objectIdToObject(this.id):null}},{key:"getMcDbGroup",value:function getMcDbGroup(){return this.isValid()&&0==this.type&&t.MxCpp.App.objectIdIsKindOf(this.id,"McDbGroup")?t.MxCpp.App.objectIdToObject(this.id):null}}]),McObjectId}(),vt=function(p){_inherits$1(McDbObject,p);var h=_createSuper$b(McDbObject);function McDbObject(t){return _classCallCheck$1(this,McDbObject),h.call(this,t)}return _createClass$1(McDbObject,[{key:"getObjectID",value:function getObjectID(){return new gt(this.imp.GetObjectID(),0)}},{key:"erase",value:function erase(){return this.imp.Erase()}},{key:"isErased",value:function isErased(){return this.imp.isErased()}},{key:"unErase",value:function unErase(){return this.imp.unErase()}},{key:"clone",value:function clone(){var p=this.imp.Clone();return t.MxCpp.App.createCloneObject(p)}},{key:"getHandle",value:function getHandle(){return this.imp.GetHandle()}},{key:"getDatabase",value:function getDatabase(){return new Er(this.imp.GetDatabase())}},{key:"getOwnerID",value:function getOwnerID(){return this.imp.GetOwnerID()}},{key:"getExtensionDictionary",value:function getExtensionDictionary(){return new Gr(this.imp.GetExtensionDictionary())}},{key:"isHaveExtensionDictionary",value:function isHaveExtensionDictionary(){return this.imp.IsHaveExtensionDictionary()}},{key:"createExtensionDictionary",value:function createExtensionDictionary(){return this.imp.createExtensionDictionary()}},{key:"getDatabaseIndexId",value:function getDatabaseIndexId(){return this.imp.GetDatabaseIndexId()}},{key:"moveGripPointsAt",value:function moveGripPointsAt(t,p,h,x){return this.imp.moveGripPointsAt(t,p,h,x)}},{key:"getGripPoints",value:function getGripPoints(){return new pn(this.imp.getGripPoints())}},{key:"tempRelationObject",value:function tempRelationObject(){return 0}},{key:"freeTempRelationObject",value:function freeTempRelationObject(){}},{key:"assertObjectModification",value:function assertObjectModification(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.imp.assertObjectModification(t)}}]),McDbObject}(dt),yt=function(){function McDbObjectArray(p){if(_classCallCheck$1(this,McDbObjectArray),_defineProperty(this,"aryVal",[]),p){for(var h=0,x=p.length();h<x;h++){var M=p.release(h),k=t.MxCpp.App.createCloneObject(M);null!=k&&this.aryVal.push(k)}t.MxCpp.App.destroyObject(p)}}return _createClass$1(McDbObjectArray,[{key:"forEach",value:function forEach(t){for(var p=this.aryVal.length,h=0;h<p;h++)t(this.aryVal[h],h)}},{key:"length",value:function length(){return this.aryVal.length}},{key:"empty",value:function empty(){return 0==this.aryVal.length}}]),McDbObjectArray}();function _createSuper$a(t){var p=function _isNativeReflectConstruct$b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(bm){return!1}}();return function _createSuperInternal(){var h,x=_getPrototypeOf$1(t);if(p){var M=_getPrototypeOf$1(this).constructor;h=Reflect.construct(x,arguments,M)}else h=x.apply(this,arguments);return _possibleConstructorReturn$1(this,h)}}var xt=function(){function MxCoordConvertType(){_classCallCheck$1(this,MxCoordConvertType)}return _createClass$1(MxCoordConvertType,[{key:"doc2cad",value:function doc2cad(t){return t}},{key:"cad2doc",value:function cad2doc(t){return t}},{key:"doc2cad1",value:function doc2cad1(t){return new nn(t.x,t.y,t.z)}},{key:"doc2cad2",value:function doc2cad2(t,p,h){return new nn(t,p,h)}},{key:"cad2doc1",value:function cad2doc1(t){return new THREE.Vector3(t.x,t.y,t.z)}},{key:"cad2doc2",value:function cad2doc2(t,p,h){return new THREE.Vector3(t,p,h)}}]),MxCoordConvertType}();function getFilterImp(){var p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return p?p.getImp():new t.MxCpp.mxcadassemblyimp.McDrawResbuf}t.MxCoordConvert=void 0,t.MxCoordConvert=new xt;var bt=function(p){_inherits$1(MxCADResbuf,p);var h=_createSuper$a(MxCADResbuf);function MxCADResbuf(p){var x;if(_classCallCheck$1(this,MxCADResbuf),p)if(p instanceof Array){(x=h.call(this)).initTempObject(new t.MxCpp.mxcadassemblyimp.McDrawResbuf);for(var M=p.length,k=!1,I=0;I<M;I++)if(p[I]instanceof Object){k=!0;break}if(k)x.setJson(JSON.stringify(p));else{for(var N=[],V=0;V+1<M;V+=2)"number"==typeof p[V]&&N.push({type:p[V],val:p[V+1]});N.length>0&&x.setJson(JSON.stringify(N))}}else(x=h.call(this)).constructor_MxCADResbuf(p);else(x=h.call(this)).initTempObject(new t.MxCpp.mxcadassemblyimp.McDrawResbuf);return _possibleConstructorReturn$1(x)}return _createClass$1(MxCADResbuf,[{key:"Clear",value:function Clear(){this.imp.Clear()}},{key:"forEach",value:function forEach(t){for(var p=this.GetCount(),h=0;h<p;h++){var x=this.ItemDataType(h),M=this.ItemDataDxf(h);5005==x?t(this.AtString(h,!0).val,x,M,h):5009==x?t(this.AtPoint(h).val,x,M,h):5001==x?t(this.AtDouble(h).val,x,M,h):5003==x||5010==x?t(this.AtLong(h).val,5010,M,h):-8500==M?t(this.AtObject(h).val,-8500,-8500,h):-8e3==x||-8001==x||-8002==x||-8003==x||-8004==x?t(this.AtObjectId(h).val,-8e3,-8e3,h):t(void 0,x,M,h)}}},{key:"GetCount",value:function GetCount(){return this.imp.GetCount()}},{key:"GetPoints",value:function GetPoints(){var t=new pn;return this.forEach((function(p,h,x){if(1010===x){var M=new nn(p.x,p.y,p.z);t.append(M)}})),t}},{key:"AtDouble",value:function AtDouble(p){return{val:this.imp.AtDouble(p),ret:0==t.MxCpp.getCallResult()}}},{key:"AtLong",value:function AtLong(p){return{val:this.imp.Atlong(p),ret:0==t.MxCpp.getCallResult()}}},{key:"AtObject",value:function AtObject(p){if(p>=this.imp.GetCount())return{val:void 0,ret:!1};var h=this.imp.AtObject(p),x=t.MxCpp.App.createCloneObject(h);return null===x?{val:void 0,ret:!1}:{val:x,ret:!0}}},{key:"AddObject",value:function AddObject(t){this.imp.AddObject(t.getImp())}},{key:"AtObjectId",value:function AtObjectId(p){return{val:new gt(this.imp.AtObjectId(p),mt.kMxCAD),ret:0==t.MxCpp.getCallResult()}}},{key:"AtString",value:function AtString(p){return!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?{val:tt.decodeFromGb2312(this.imp.AtString(p,!0)),ret:0==t.MxCpp.getCallResult()}:{val:this.imp.AtString(p,!0),ret:0==t.MxCpp.getCallResult()}}},{key:"AtPoint",value:function AtPoint(p){return{val:new nn(this.imp.AtPoint(p)),ret:0==t.MxCpp.getCallResult()}}},{key:"ItemDataType",value:function ItemDataType(t){return this.imp.ItemDataType(t)}},{key:"ItemDataDxf",value:function ItemDataDxf(t){return this.imp.ItemDataDxf(t)}},{key:"AddDouble",value:function AddDouble(t){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-10;return this.imp.AddDouble(t,p)}},{key:"AddLong",value:function AddLong(t){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-10;return this.imp.Addlong(t,p)}},{key:"AddObjectId",value:function AddObjectId(t){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-10;return this.imp.AddObjectId(t,p)}},{key:"AddString",value:function AddString(t){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-10;return!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?this.imp.AddString(tt.encodeToGb2312(t),p):this.imp.AddString(t,p)}},{key:"AddAppName",value:function AddAppName(t){return!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?this.imp.AddAppName(tt.encodeToGb2312(t)):this.imp.AddAppName(t)}},{key:"AddMcDbEntityTypes",value:function AddMcDbEntityTypes(t){return this.imp.AddString(t,5020)}},{key:"AddPoint",value:function AddPoint(t){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-10;return this.imp.AddPoint(t.imp,p)}},{key:"RemoveAll",value:function RemoveAll(){this.imp.RemoveAll()}},{key:"Remove",value:function Remove(t){this.imp.Remove(t)}},{key:"PrintData",value:function PrintData(){this.imp.PrintData()}}]),MxCADResbuf}(dt),_t=function(){function MxCADUtilityClass(){_classCallCheck$1(this,MxCADUtilityClass),_defineProperty(this,"imp",void 0)}var h,x;return _createClass$1(MxCADUtilityClass,[{key:"eraseObject",value:function eraseObject(t){var p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.init(),this.imp.eraseObject(t,p)}},{key:"highlightEntity",value:function highlightEntity(t){var p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.init(),this.imp.highlightEntity(t,p)}},{key:"findEntAtPoint",value:function findEntAtPoint(t,p,h){var x=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,M=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.init();var k=this.imp.findEntAtPoint(t,p,h,x,getFilterImp(M));return new gt(k,mt.kMxCAD)}},{key:"selectEnt",value:function selectEnt(h){var x=this,M=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,k=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],I=arguments.length>3?arguments[3]:void 0,N=arguments.length>4?arguments[4]:void 0;return this.init(),new Promise(function(){var V=_asyncToGenerator(ie.mark((function _callee(V){var ee,te,re,ne,ae;return ie.wrap((function _callee$(ie){for(;;)switch(ie.prev=ie.next){case 0:return ee=new p.MrxDbgUiPrPoint,"function"==typeof I&&I(ee),h&&ee.setMessage(h),ee.setCursorType(p.MxCursorType.kRect),ee.disableAllTrace(),ee.setDynamicInputType(p.DynamicInputType.kDynTip),ie.next=8,ee.go();case 8:if(te=ie.sent){ie.next=12;break}return V([]),ie.abrupt("return");case 12:"function"==typeof N&&N((new nn).setFromVector3(te)),ee.clearLastInputPoint(),k?p.MrxDbgUtils.findEntAtPoint(te).then((function(p){var h=[];p.forEach((function(t){h.push(new gt(t,mt.kMxDraw))}));var k=t.MxCoordConvert.doc2cad1(te),I=x.findEntAtPoint(k.x,k.y,k.z,-1,M);I.isValid()&&h.push(I),V(h)})):(re=[],ne=t.MxCoordConvert.doc2cad1(te),(ae=x.findEntAtPoint(ne.x,ne.y,ne.z,-1,M)).isValid()&&re.push(ae),V(re));case 15:case"end":return ie.stop()}}),_callee)})));return function(t){return V.apply(this,arguments)}}())}},{key:"getCurrentSelectPoints",value:function getCurrentSelectPoints(){var t=p.MxFun.getCurrentDraw().getSelectPoints();return t.isvalid?{point1:new nn(t.point1),point2:new nn(t.point2),isvalid:!0}:{point1:new nn,point2:new nn,isvalid:!1}}},{key:"getCurrentSelect",value:function getCurrentSelect(){var h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,x=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],M=[];arguments.length>2&&void 0!==arguments[2]&&!arguments[2]||p.MxFun.getCurrentDraw().getMxCurrentSelect().forEach((function(t){M.push(new gt(t,mt.kMxDraw))}));if(x){var k=p.MxFun.getCurrentDraw().getMxCADCurrentSelect();if(k.length<=0)return M;if(h){var I=new un;k.forEach((function(t){I.append(t)}));var N=new t.MxCpp.mxcadassemblyimp.McDrawSelSet,V=N.getFilterEntity(I.imp,getFilterImp(h));t.MxCpp.App.destroyObject(N),k=[];for(var ee=V.length(),te=0;te<ee;te++)k.push(V.at(te))}k.forEach((function(t){M.push(new gt(t,mt.kMxCAD))}))}return M}},{key:"userSelect",value:(x=_asyncToGenerator(ie.mark((function _callee2(t){var p,h,x,M,k=arguments;return ie.wrap((function _callee2$(I){for(;;)switch(I.prev=I.next){case 0:if(p=k.length>1&&void 0!==k[1]?k[1]:null,h=k.length>2?k[2]:void 0,0!=(x=this.getCurrentSelect(p)).length){I.next=9;break}return M=new wt,I.next=7,M.userSelect(t,p,(function(t){h&&h(M,t)}));case 7:if(!I.sent){I.next=9;break}M.forEach((function(t){x.push(t)}));case 9:return I.abrupt("return",new Promise((function(t){t(x)})));case 10:case"end":return I.stop()}}),_callee2,this)}))),function userSelect(t){return x.apply(this,arguments)})},{key:"init",value:function init(){this.imp||(this.imp=new t.MxCpp.mxcadassemblyimp.McDrawUtility,(new qn).rxInit())}},{key:"getCorner",value:(h=_asyncToGenerator(ie.mark((function _callee3(h,x,M){var k,I,N,V,ee,te,re,ne,ae=arguments;return ie.wrap((function _callee3$(ie){for(;;)switch(ie.prev=ie.next){case 0:k=ae.length>3&&void 0!==ae[3]&&ae[3],I=ae.length>4&&void 0!==ae[4]&&ae[4],N=ae.length>5?ae[5]:void 0,V=0,ee=void 0;case 5:if(x){ie.next=16;break}return te=new Tt,h&&te.setMessage(h),I&&te.disableAllTrace(!0),N&&N(te),te.setDynamicInputType(p.DynamicInputType.kDynTip),ie.next=14,te.go();case 14:x=ie.sent,V=te.getDetailedResult();case 16:if(x){ie.next=18;break}return ie.abrupt("break",26);case 18:return re=t.MxCoordConvert.cad2doc1(x),ie.next=21,p.MrxDbgUtils.getCorner(re,h,k,(function(t){V=t.detailedResult}),I);case 21:return(ne=ie.sent)&&(ee=t.MxCoordConvert.doc2cad1(ne)),ie.abrupt("break",26);case 26:return M&&M(V),ie.abrupt("return",new Promise((function(t){V==p.DetailedResult.kEcsIn||V==p.DetailedResult.kNewCommadIn||V==p.DetailedResult.kUnknown?t(null):t(x&&ee?{pt1:x,pt2:ee}:null)})));case 28:case"end":return ie.stop()}}),_callee3)}))),function getCorner(t,p,x){return h.apply(this,arguments)})},{key:"getMcDbEntitysBoundingBox",value:function getMcDbEntitysBoundingBox(t){var p=void 0,h=void 0;return t.forEach((function(t){var x=t.getMcDbEntity();if(null!=x){var M=x.getBoundingBox();M.ret&&(p&&h?(p.x>M.minPt.x&&(p.x=M.minPt.x),p.y>M.minPt.y&&(p.y=M.minPt.y),h.x<M.maxPt.x&&(h.x=M.maxPt.x),h.y<M.maxPt.y&&(h.y=M.maxPt.y)):(p=new THREE.Vector3(M.minPt.x,M.minPt.y,0),h=new THREE.Vector3(M.maxPt.x,M.maxPt.y,0)))}})),p&&h?{minPt:new nn(p),maxPt:new nn(h)}:void 0}},{key:"calcBulge",value:function calcBulge(p,h,x){return{val:this.imp.calcBulge(p.imp,h.imp,x.imp),ret:0==t.MxCpp.getCallResult()}}},{key:"pointInPolygon",value:function pointInPolygon(t,p,h){return this.imp.pointInPolygon(t.imp,p,h)}},{key:"builderHatchFromPoint",value:function builderHatchFromPoint(p){var h=this.imp.builderHatchFromPoint(p.x,p.y);return h.isNull()?(t.MxCpp.App.destroyObject(h),null):new Zt(h)}},{key:"getTextBox",value:function getTextBox(p,h,x,M){if(M.type!=mt.kMxCAD)return{minPt:new nn,maxPt:new nn,ret:!1};var k=this.imp.getTextBox(tt.encodeToGb2312(p),h,x,M.id);if(k){var I={minPt:new nn,maxPt:new nn,ret:!1};return 0!=k.GetCount()&&(I={minPt:new nn(k.AtPoint(0)),maxPt:new nn(k.AtPoint(1)),ret:!0}),t.MxCpp.App.destroyObject(k),I}return{minPt:new nn,maxPt:new nn,ret:!1}}},{key:"getTextEntityBox",value:function getTextEntityBox(p){var h=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],x=this.imp.getTextEntityBox(p.imp,h);if(x){var M={minPt:new nn,maxPt:new nn,ret:!1};return 0!=x.GetCount()&&(M={minPt:new nn(x.AtPoint(0)),maxPt:new nn(x.AtPoint(1)),ret:!0}),t.MxCpp.App.destroyObject(x),M}return{minPt:new nn,maxPt:new nn,ret:!1}}}]),MxCADUtilityClass}(),Mt=new _t,Ct=function(t){return t[t.kSelected=0]="kSelected",t[t.kNone=1]="kNone",t[t.kCanceled=2]="kCanceled",t[t.kRejected=3]="kRejected",t[t.kKeyword=4]="kKeyword",t}(Ct||{}),wt=function(h){_inherits$1(MxCADSelectionSet,h);var x,M=_createSuper$a(MxCADSelectionSet);function MxCADSelectionSet(){var p;return _classCallCheck$1(this,MxCADSelectionSet),_defineProperty(_assertThisInitialized$1(p=M.call(this)),"isWhileSelect",!0),_defineProperty(_assertThisInitialized$1(p),"isSelectHighlight",!0),_defineProperty(_assertThisInitialized$1(p),"selectPt1",new nn),_defineProperty(_assertThisInitialized$1(p),"selectPt2",new nn),p.initTempObject(new t.MxCpp.mxcadassemblyimp.McDrawSelSet),p}return _createClass$1(MxCADSelectionSet,[{key:"getSelectPoint",value:function getSelectPoint(){return{pt1:this.selectPt1,pt2:this.selectPt2}}},{key:"allSelect",value:function allSelect(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.imp.allSelect(getFilterImp(t))}},{key:"pointSelect",value:function pointSelect(t,p){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,x=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;return this.imp.pointSelect(t,p,getFilterImp(h),x)}},{key:"crossingSelect",value:function crossingSelect(t,p,h,x){var M=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return this.imp.crossingSelect(t,p,h,x,getFilterImp(M))}},{key:"count",value:function count(){return this.imp.count()}},{key:"isNull",value:function isNull(){return 0==this.imp.count()}},{key:"item",value:function item(t){return new gt(this.imp.item(t),mt.kMxCAD)}},{key:"forEach",value:function forEach(t){for(var p=this.imp.count(),h=0;h<p;h++)t(this.item(h))}},{key:"getIds",value:function getIds(){for(var t=[],p=this.imp.count(),h=0;h<p;h++)t.push(this.item(h));return t}},{key:"userSelect",value:(x=_asyncToGenerator(ie.mark((function _callee4(h){var x,M,k,I,N,V,ee,te,re,ne=arguments;return ie.wrap((function _callee4$(ie){for(;;)switch(ie.prev=ie.next){case 0:x=ne.length>1&&void 0!==ne[1]?ne[1]:null,M=ne.length>2?ne[2]:void 0,this.selectPt1=new nn,this.selectPt2=new nn,k=new p.MrxDbgUiPrPoint,h&&k.setMessage(h),k.setCursorType(p.MxCursorType.kRect),k.setDynamicInputType(p.DynamicInputType.kDynTip),k.disableAllTrace(),I=0,M&&M(k),N=getFilterImp(x);case 12:return k.setDynamicInputType(p.DynamicInputType.kDynTip),ie.next=16,k.go();case 16:if(V=ie.sent,k.clearLastInputPoint(),I=k.getDetailedResult(),V){ie.next=21;break}return ie.abrupt("break",43);case 21:if(ee=t.MxCoordConvert.doc2cad1(V),0!=this.imp.userPointSelect(ee.x,ee.y,N,this.isSelectHighlight)){ie.next=30;break}if(this.selectPt1.copy(ee),this.selectPt2.copy(ee),!this.isWhileSelect){ie.next=29;break}return ie.abrupt("continue",12);case 29:return ie.abrupt("break",43);case 30:return ie.next=32,p.MrxDbgUtils.getCorner(V,h,!0,(function(t){I=t.detailedResult}));case 32:if(te=ie.sent){ie.next=35;break}return ie.abrupt("break",43);case 35:if(re=t.MxCoordConvert.doc2cad1(te),this.imp.userSelect(ee.x,ee.y,re.x,re.y,N,this.isSelectHighlight),this.selectPt1.copy(ee),this.selectPt2.copy(re),this.isWhileSelect){ie.next=41;break}return ie.abrupt("break",43);case 41:ie.next=12;break;case 43:if(this.isSelectHighlight&&this.imp.highlightEntity(!1),I!=p.DetailedResult.kEcsIn&&I!=p.DetailedResult.kNewCommadIn&&I!=p.DetailedResult.kUnknown){ie.next=48;break}return ie.abrupt("return",new Promise((function(t){t(!1)})));case 48:return ie.abrupt("return",new Promise((function(t){t(!0)})));case 49:case"end":return ie.stop()}}),_callee4,this)}))),function userSelect(t){return x.apply(this,arguments)})}]),MxCADSelectionSet}(dt),St=function(){function MxCADUiPrBase(t){_classCallCheck$1(this,MxCADUiPrBase),_defineProperty(this,"imp",void 0),_defineProperty(this,"mxobj",void 0),this.imp=t,this.mxobj=p.MxFun.getCurrentDraw()}return _createClass$1(MxCADUiPrBase,[{key:"doc2cad1",value:function doc2cad1(t){return new nn(t.x,t.y,t.z)}},{key:"doc2cad2",value:function doc2cad2(t,p,h){return new nn(t,p,h)}},{key:"cad2doc1",value:function cad2doc1(t){return new THREE.Vector3(t.x,t.y,t.z)}},{key:"cad2doc2",value:function cad2doc2(t,p,h){return new THREE.Vector3(t,p,h)}},{key:"keyWords",value:function keyWords(){return this.imp.keyWords()}},{key:"setKeyWords",value:function setKeyWords(t){this.imp.setKeyWords(t)}},{key:"clearLastInputPoint",value:function clearLastInputPoint(){this.imp.clearLastInputPoint()}},{key:"setLastInputPoint",value:function setLastInputPoint(t){this.imp.setLastInputPoint(this.cad2doc1(t))}},{key:"message",value:function message(){return this.imp.message()}},{key:"setMessage",value:function setMessage(t){this.imp.setMessage(t)}},{key:"keyWordPicked",value:function keyWordPicked(){return this.imp.keyWordPicked()}},{key:"isKeyWordPicked",value:function isKeyWordPicked(t){return this.imp.isKeyWordPicked(t)}},{key:"setUserDraw",value:function setUserDraw(t){var p=this;this.imp.setUserDraw((function(h,x){t(p.doc2cad1(h),x)}))}},{key:"getDetailedResult",value:function getDetailedResult(){return this.imp.getDetailedResult()}},{key:"getStatus",value:function getStatus(){return this.imp.getStatus()}},{key:"drawReserve",value:function drawReserve(t){this.imp.drawReserve(t)}},{key:"setInputToucheType",value:function setInputToucheType(t){this.imp.setInputToucheType(t)}},{key:"getInputToucheType",value:function getInputToucheType(){return this.imp.getInputToucheType()}},{key:"setCursorType",value:function setCursorType(t){this.imp.setCursorType(t)}},{key:"getCursorType",value:function getCursorType(){return this.imp.getCursorType()}},{key:"setDynamicInputType",value:function setDynamicInputType(t){this.imp.setDynamicInputType(t)}},{key:"getDynamicInputType",value:function getDynamicInputType(){return this.imp.getDynamicInputType()}},{key:"isDisableDynInput",value:function isDisableDynInput(){return this.imp.isDisableDynInput()}},{key:"setDisableDynInput",value:function setDisableDynInput(t){this.imp.setDisableDynInput(t)}},{key:"setDisableOsnap",value:function setDisableOsnap(t){this.imp.setDisableOsnap(t)}},{key:"isDisableOsnap",value:function isDisableOsnap(){return this.imp.isDisableOsnap()}},{key:"isOffsetInputPostion",value:function isOffsetInputPostion(){return this.imp.isOffsetInputPostion()}},{key:"setOffsetInputPostion",value:function setOffsetInputPostion(t){return this.imp.setOffsetInputPostion(t)}},{key:"setDisableDynamicTrace",value:function setDisableDynamicTrace(t){this.imp.setDisableDynamicTrace(t)}},{key:"isDisableDynamicTrace",value:function isDisableDynamicTrace(){return this.imp.isDisableDynamicTrace()}},{key:"setDisablePolarAxisTrace",value:function setDisablePolarAxisTrace(t){this.imp.setDisablePolarAxisTrace(t)}},{key:"isDisablePolarAxisTrace",value:function isDisablePolarAxisTrace(){return this.imp.isDisablePolarAxisTrace()}},{key:"setDisableGridTrace",value:function setDisableGridTrace(t){this.imp.setDisableGridTrace(t)}},{key:"isDisableGridTrace",value:function isDisableGridTrace(){return this.imp.isDisableGridTrace()}},{key:"setDisableOrthoTrace",value:function setDisableOrthoTrace(t){this.imp.setDisableOrthoTrace(t)}},{key:"isDisableOrthoTrace",value:function isDisableOrthoTrace(){return this.imp.isDisableOrtho()}},{key:"disableAllTrace",value:function disableAllTrace(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.imp.disableAllTrace(t)}},{key:"userInputControls",value:function userInputControls(){return this.imp.userInputControls()}},{key:"setUserInputControls",value:function setUserInputControls(t){this.imp.setUserInputControls(t)}},{key:"abort",value:function abort(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.DetailedResult.kCodeAbort;this.imp.abort(t)}}]),MxCADUiPrBase}(),Tt=function(t){_inherits$1(MxCADUiPrPoint,t);var h=_createSuper$a(MxCADUiPrPoint);function MxCADUiPrPoint(){return _classCallCheck$1(this,MxCADUiPrPoint),h.call(this,new p.MrxDbgUiPrPoint)}return _createClass$1(MxCADUiPrPoint,[{key:"go",value:function go(){var t=this;return new Promise((function(p){t.imp.go((function(h){p(0!=h?null:t.doc2cad1(t.imp.value()))}))}))}},{key:"value",value:function value(){return this.doc2cad1(this.imp.value())}},{key:"getDocValue",value:function getDocValue(){return new nn(this.imp.value())}},{key:"basePt",value:function basePt(){return this.doc2cad1(this.imp.basePt())}},{key:"setBasePt",value:function setBasePt(t){this.imp.setBasePt(this.cad2doc1(t)),this.imp.setUseBasePt(!0)}},{key:"setUseBasePt",value:function setUseBasePt(t){this.imp.setUseBasePt(t)}}]),MxCADUiPrPoint}(St),At=function(t){_inherits$1(MxCADUiPrDist,t);var h=_createSuper$a(MxCADUiPrDist);function MxCADUiPrDist(){return _classCallCheck$1(this,MxCADUiPrDist),h.call(this,new p.MrxDbgUiPrDist)}return _createClass$1(MxCADUiPrDist,[{key:"value",value:function value(){return this.imp.value()}},{key:"basePt",value:function basePt(){return this.doc2cad1(this.imp.basePt())}},{key:"setBasePt",value:function setBasePt(t){this.imp.setBasePt(this.cad2doc1(t)),this.imp.setUseBasePt(!0)}},{key:"setUseBasePt",value:function setUseBasePt(t){return this.imp.setUseBasePt(t)}},{key:"go",value:function go(){return this.imp.go()}}]),MxCADUiPrDist}(St),kt=function(t){_inherits$1(MxCADUiPrAngle,t);var h=_createSuper$a(MxCADUiPrAngle);function MxCADUiPrAngle(){return _classCallCheck$1(this,MxCADUiPrAngle),h.call(this,new p.MrxDbgUiPrAngle)}return _createClass$1(MxCADUiPrAngle,[{key:"value",value:function value(){return this.imp.value()}},{key:"basePt",value:function basePt(){return this.doc2cad1(this.imp.basePt())}},{key:"setBasePt",value:function setBasePt(t){this.imp.setBasePt(this.cad2doc1(t)),this.imp.setUseBasePt(!0)}},{key:"setUseBasePt",value:function setUseBasePt(t){return this.imp.setUseBasePt(t)}},{key:"go",value:function go(){return this.imp.go()}}]),MxCADUiPrAngle}(St),Dt=function(t){_inherits$1(MxCADUiPrInt,t);var h=_createSuper$a(MxCADUiPrInt);function MxCADUiPrInt(){return _classCallCheck$1(this,MxCADUiPrInt),h.call(this,new p.MrxDbgUiPrInt)}return _createClass$1(MxCADUiPrInt,[{key:"value",value:function value(){return this.imp.value()}},{key:"go",value:function go(){return this.imp.go()}}]),MxCADUiPrInt}(St),Pt=function(t){_inherits$1(MxCADUiPrKeyWord,t);var h=_createSuper$a(MxCADUiPrKeyWord);function MxCADUiPrKeyWord(){return _classCallCheck$1(this,MxCADUiPrKeyWord),h.call(this,new p.MrxDbgUiPrKeyWord)}return _createClass$1(MxCADUiPrKeyWord,[{key:"go",value:function go(){return this.imp.go()}}]),MxCADUiPrKeyWord}(St),Ot=function(t){_inherits$1(MxCADUiPrString,t);var h=_createSuper$a(MxCADUiPrString);function MxCADUiPrString(){var t;return _classCallCheck$1(this,MxCADUiPrString),(t=h.call(this,new p.MrxDbgUiPrString)).setDynamicInputType(p.DynamicInputType.kNoInput),t.disableAllTrace(),t}return _createClass$1(MxCADUiPrString,[{key:"value",value:function value(){return this.imp.value()}},{key:"go",value:function go(){return this.imp.go()}}]),MxCADUiPrString}(St),It=function(t){_inherits$1(MxCADUiPrEntity,t);var h=_createSuper$a(MxCADUiPrEntity);function MxCADUiPrEntity(){var t;return _classCallCheck$1(this,MxCADUiPrEntity),_defineProperty(_assertThisInitialized$1(t=h.call(this,new p.MrxDbgUiPrPoint)),"filter",void 0),_defineProperty(_assertThisInitialized$1(t),"id",new gt),t.setCursorType(p.MxCursorType.kRect),t.setDynamicInputType(p.DynamicInputType.kDynTip),t.disableAllTrace(),t}return _createClass$1(MxCADUiPrEntity,[{key:"setFilter",value:function setFilter(t){this.filter=t}},{key:"getFilter",value:function getFilter(){return this.filter}},{key:"go",value:function go(){var t=this;return new Promise((function(p){var h=t;t.imp.go((function(t){if(h.clearLastInputPoint(),0!=t)p(new gt);else{var x=h.imp.value(),M=h.doc2cad1(x);h.id=Mt.findEntAtPoint(M.x,M.y,M.z,-1,h.filter),p(h.id)}}))}))}},{key:"pickPoint",value:function pickPoint(){return this.doc2cad1(this.imp.value())}},{key:"value",value:function value(){return this.id}},{key:"getDocPickPoint",value:function getDocPickPoint(){return new nn(this.imp.value())}}]),MxCADUiPrEntity}(St);function _createSuper$9(t){var p=function _isNativeReflectConstruct$a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(bm){return!1}}();return function _createSuperInternal(){var h,x=_getPrototypeOf$1(t);if(p){var M=_getPrototypeOf$1(this).constructor;h=Reflect.construct(x,arguments,M)}else h=x.apply(this,arguments);return _possibleConstructorReturn$1(this,h)}}var Lt=function(p){_inherits$1(McDbEntity,p);var h=_createSuper$9(McDbEntity);function McDbEntity(t){return _classCallCheck$1(this,McDbEntity),h.call(this,t)}return _createClass$1(McDbEntity,[{key:"explode",value:function explode(){var t=this.imp.explode();return new bt(t)}},{key:"trueColor",get:function get(){return new Sr(this.imp.TrueColor())},set:function set(t){this.imp.SetTrueColor(t.getImp())}},{key:"colorIndex",get:function get(){return this.imp.ColorIndex()},set:function set(t){this.imp.SetColorIndex(t)}},{key:"layer",get:function get(){return tt.decodeFromGb2312(this.imp.Layer())},set:function set(t){this.imp.SetLayer(tt.encodeToGb2312(t))}},{key:"linetype",get:function get(){return tt.decodeFromGb2312(this.imp.Linetype())},set:function set(t){this.imp.SetLinetype(tt.encodeToGb2312(t))}},{key:"linetypeScale",get:function get(){return this.imp.LinetypeScale()},set:function set(t){this.imp.SetLinetypeScale(t)}},{key:"visible",get:function get(){return this.imp.Visible()},set:function set(t){this.imp.SetVisible(t)}},{key:"lineweight",get:function get(){return this.imp.Lineweight()},set:function set(t){this.imp.SetLineweight(t)}},{key:"textStyle",get:function get(){return tt.decodeFromGb2312(this.imp.TextStyle())},set:function set(t){this.imp.SetTextStyle(tt.encodeToGb2312(t))}},{key:"highlight",value:function highlight(t){this.imp.Highlight(t)}},{key:"move",value:function move(t,p){this.tempRelationObject();var h=this.imp.Move(t.imp,p.imp);return this.freeTempRelationObject(),h}},{key:"rotate",value:function rotate(t,p){this.tempRelationObject();var h=this.imp.Rotate(t.imp,p);return this.freeTempRelationObject(),h}},{key:"mirror",value:function mirror(t,p){this.tempRelationObject();var h=this.imp.Mirror(t.imp,p.imp);return this.freeTempRelationObject(),h}},{key:"scaleEntity",value:function scaleEntity(t,p){this.tempRelationObject();var h=this.imp.ScaleEntity(t.imp,p);return this.freeTempRelationObject(),h}},{key:"transformBy",value:function transformBy(t){return this.imp.TransformBy(t.imp)}},{key:"getBoundingBox",value:function getBoundingBox(){var p=this.imp.GetBoundingBox();if(p){if(p.GetCount()<2)return t.MxCpp.App.destroyObject(p),{minPt:new nn,maxPt:new nn,ret:!1};var h={minPt:new nn(p.AtPoint(0)),maxPt:new nn(p.AtPoint(1)),ret:!0};return t.MxCpp.App.destroyObject(p),h}return{minPt:new nn,maxPt:new nn,ret:!1}}},{key:"getxData",value:function getxData(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new bt(this.imp.GetXData(tt.encodeToGb2312(t)))}},{key:"setxData",value:function setxData(t){return this.imp.SetXData(t.getImp())}},{key:"getxDataString",value:function getxDataString(p){var h=this.imp.GetxDataString(tt.encodeToGb2312(p),0);return{val:tt.decodeFromGb2312(h),ret:0==t.MxCpp.getCallResult()}}},{key:"setxDataString",value:function setxDataString(t,p){return this.imp.SetxDataString(tt.encodeToGb2312(t),0,tt.encodeToGb2312(p))}},{key:"getxDataDouble",value:function getxDataDouble(p){return{val:this.imp.GetxDataDouble(tt.encodeToGb2312(p),0),ret:0==t.MxCpp.getCallResult()}}},{key:"setxDataDouble",value:function setxDataDouble(t,p){return this.imp.SetxDataDouble(tt.encodeToGb2312(t),0,p)}},{key:"getxDataLong",value:function getxDataLong(p){return{val:this.imp.GetxDataLong(tt.encodeToGb2312(p),0),ret:0==t.MxCpp.getCallResult()}}},{key:"setxDataLong",value:function setxDataLong(t,p){return this.imp.SetxDataLong(tt.encodeToGb2312(t),0,p)}},{key:"getxDataPoint",value:function getxDataPoint(p){var h=this.imp.GetxDataPoint(tt.encodeToGb2312(p),0),x=new nn;if(0==t.MxCpp.getCallResult()){var M=!1;return h&&(x.x=h.x,x.y=h.y,x.z=h.z,t.MxCpp.App.getImp().DestroyMdGePoint3d(h),M=!0),{val:x,ret:M}}return{val:x,ret:!1}}},{key:"setxDataPoint",value:function setxDataPoint(t,p){return this.imp.SetxDataPoint(tt.encodeToGb2312(t),0,p.imp)}},{key:"deleteXData",value:function deleteXData(t){return this.imp.DeleteXData(tt.encodeToGb2312(t))}},{key:"getAllAppName",value:function getAllAppName(){return new ln(this.imp.GetAllAppName())}},{key:"layerId",get:function get(){return new gt(this.imp.LayerId(),mt.kMxCAD)},set:function set(t){t.type==mt.kMxCAD&&this.imp.SetLayerId(t.id)}},{key:"linetypeId",get:function get(){return new gt(this.imp.LinetypeId(),mt.kMxCAD)},set:function set(t){t.type==mt.kMxCAD&&this.imp.SetLinetypeId(t.id)}},{key:"textStyleId",get:function get(){return new gt(this.imp.TextStyleId(),mt.kMxCAD)},set:function set(t){t.type==mt.kMxCAD&&this.imp.SetTextStyleId(t.id)}},{key:"IntersectWith",value:function IntersectWith(t,p){return new pn(this.imp.IntersectWith(t.imp,p))}},{key:"getArea",value:function getArea(){return{val:this.imp.getArea(),ret:0==t.MxCpp.getCallResult()}}},{key:"disableDisplay",value:function disableDisplay(t){this.imp.disableUpdateDisplay(t)}},{key:"updateDisplay",value:function updateDisplay(){this.imp.updateDisplay()}},{key:"syncData",value:function syncData(){return!1}},{key:"drawOrder",get:function get(){return this.imp.DrawOrder()},set:function set(t){this.imp.SetDrawOrder(t)}},{key:"normal",get:function get(){return new sn(this.imp.normal())},set:function set(t){this.imp.setNormal(t.imp)}}]),McDbEntity}(vt),Et=function(p){_inherits$1(McDbCurve,p);var h=_createSuper$9(McDbCurve);function McDbCurve(t){return _classCallCheck$1(this,McDbCurve),h.call(this,t)}return _createClass$1(McDbCurve,[{key:"getStartParam",value:function getStartParam(){return{val:this.imp.getStartParam(),ret:0==t.MxCpp.getCallResult()}}},{key:"getEndParam",value:function getEndParam(){return{val:this.imp.getEndParam(),ret:0==t.MxCpp.getCallResult()}}},{key:"getDistAtParam",value:function getDistAtParam(p){return{val:this.imp.getDistAtParam(p),ret:0==t.MxCpp.getCallResult()}}},{key:"getParamAtDist",value:function getParamAtDist(p){return{val:this.imp.getParamAtDist(p),ret:0==t.MxCpp.getCallResult()}}},{key:"getDistAtPoint",value:function getDistAtPoint(p){return{val:this.imp.getDistAtPoint(p.imp),ret:0==t.MxCpp.getCallResult()}}},{key:"getPointAtDist",value:function getPointAtDist(p){return{val:new nn(this.imp.getPointAtDist(p)),ret:0==t.MxCpp.getCallResult()}}},{key:"getStartPoint",value:function getStartPoint(){return{val:new nn(this.imp.getStartPoint()),ret:0==t.MxCpp.getCallResult()}}},{key:"getEndPoint",value:function getEndPoint(){return{val:new nn(this.imp.getEndPoint()),ret:0==t.MxCpp.getCallResult()}}},{key:"getPointAtParam",value:function getPointAtParam(p){return{val:new nn(this.imp.getPointAtParam(p)),ret:0==t.MxCpp.getCallResult()}}},{key:"getParamAtPoint",value:function getParamAtPoint(p){return{val:this.imp.getParamAtPoint(p.imp),ret:0==t.MxCpp.getCallResult()}}},{key:"getFirstDerivFromParam",value:function getFirstDerivFromParam(p){return{val:new sn(this.imp.getFirstDeriv(p)),ret:0==t.MxCpp.getCallResult()}}},{key:"getFirstDeriv",value:function getFirstDeriv(p){return{val:new sn(this.imp.getFirstDerivEx(p.imp)),ret:0==t.MxCpp.getCallResult()}}},{key:"getClosestPointTo",value:function getClosestPointTo(p,h){return{val:new nn(this.imp.getClosestPointTo(p.imp,h)),ret:0==t.MxCpp.getCallResult()}}},{key:"offsetCurves",value:function offsetCurves(t,p){var h=this.imp.offsetCurves(t,p.imp);return new yt(h)}},{key:"splitCurves",value:function splitCurves(t){var p=new bt;t.forEach((function(t){p.AddPoint(t)}));var h=this.imp.splitCurves(p.getImp());return new yt(h)}},{key:"splitCurvesFromParam",value:function splitCurvesFromParam(t){var p=new bt;t.forEach((function(t){p.AddDouble(t)}));var h=this.imp.splitCurves(p.getImp());return new yt(h)}},{key:"getSamplePoints",value:function getSamplePoints(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e-4,p=this.imp.getSamplePoints(t);return new bt(p)}},{key:"getLength",value:function getLength(){return{val:this.imp.getLength(),ret:0==t.MxCpp.getCallResult()}}}]),McDbCurve}(Lt),Rt=function(p){_inherits$1(McDbLine,p);var h=_createSuper$9(McDbLine);function McDbLine(p,x,M,k,I,N){var V;return _classCallCheck$1(this,McDbLine),p instanceof Object?p instanceof nn?((V=h.call(this)).initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbLine),x instanceof nn&&(V.startPoint=p,V.endPoint=x)):V=h.call(this,p):((V=h.call(this)).initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbLine),V.startPoint=new nn(p,x,M),V.endPoint=new nn(k,I,N)),_possibleConstructorReturn$1(V)}return _createClass$1(McDbLine,[{key:"startPoint",get:function get(){return new nn(this.imp.startPoint())},set:function set(t){this.imp.setStartPoint(t.imp)}},{key:"endPoint",get:function get(){return new nn(this.imp.endPoint())},set:function set(t){this.imp.setEndPoint(t.imp)}}]),McDbLine}(Et),Bt=function(p){_inherits$1(McDbText,p);var h=_createSuper$9(McDbText);function McDbText(p){var x;return _classCallCheck$1(this,McDbText),x=h.call(this,p),p||x.initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbText),x}return _createClass$1(McDbText,[{key:"position",get:function get(){return new nn(this.imp.position())},set:function set(t){this.imp.setPosition(t.imp)}},{key:"alignmentPoint",get:function get(){return new nn(this.imp.position())},set:function set(t){this.imp.setAlignmentPoint(t.imp)}},{key:"oblique",get:function get(){return this.imp.oblique()},set:function set(t){this.imp.setOblique(t)}},{key:"rotation",get:function get(){return this.imp.rotation()},set:function set(t){this.imp.setRotation(t)}},{key:"height",get:function get(){return this.imp.height()},set:function set(t){this.imp.setHeight(t)}},{key:"widthFactor",get:function get(){return this.imp.widthFactor()},set:function set(t){this.imp.setWidthFactor(t)}},{key:"textString",get:function get(){return tt.decodeFromGb2312(this.imp.textString())},set:function set(t){this.imp.setTextString(tt.encodeToGb2312(t))}},{key:"horizontalMode",get:function get(){return this.imp.horizontalMode()},set:function set(t){this.imp.setHorizontalMode(t)}},{key:"verticalMode",get:function get(){return this.imp.verticalMode()},set:function set(t){this.imp.setVerticalMode(t)}}]),McDbText}(Lt),Nt=function(p){_inherits$1(McDbAttribute,p);var h=_createSuper$9(McDbAttribute);function McDbAttribute(p){var x;return _classCallCheck$1(this,McDbAttribute),x=h.call(this,p),p||x.initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbAttribute),x}return _createClass$1(McDbAttribute,[{key:"tag",get:function get(){return tt.decodeFromGb2312(this.imp.tag())},set:function set(t){this.imp.setTag(tt.encodeToGb2312(t))}},{key:"isInvisible",get:function get(){return this.imp.isInvisible()},set:function set(t){this.imp.setInvisible(t)}}]),McDbAttribute}(Bt),Gt=function(p){_inherits$1(McDbAttributeDefinition,p);var h=_createSuper$9(McDbAttributeDefinition);function McDbAttributeDefinition(p){var x;return _classCallCheck$1(this,McDbAttributeDefinition),x=h.call(this,p),p||x.initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbAttributeDefinition),x}return _createClass$1(McDbAttributeDefinition,[{key:"tag",get:function get(){return tt.decodeFromGb2312(this.imp.tag())},set:function set(t){this.imp.setTag(tt.encodeToGb2312(t))}},{key:"isInvisible",get:function get(){return this.imp.isInvisible()},set:function set(t){this.imp.setInvisible(t)}},{key:"prompt",get:function get(){return tt.decodeFromGb2312(this.imp.prompt())},set:function set(t){this.imp.setPrompt(tt.encodeToGb2312(t))}},{key:"isConstant",get:function get(){return this.imp.isConstant()},set:function set(t){this.imp.setConstant(t)}},{key:"isVerifiable",get:function get(){return this.imp.isVerifiable()},set:function set(t){this.imp.setVerifiable(t)}},{key:"isPreset",get:function get(){return this.imp.isPreset()},set:function set(t){this.imp.setPreset(t)}}]),McDbAttributeDefinition}(Bt),Ft=function(p){_inherits$1(McDbMText,p);var h=_createSuper$9(McDbMText);function McDbMText(p){var x;return _classCallCheck$1(this,McDbMText),x=h.call(this,p),p||x.initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbMText),x}return _createClass$1(McDbMText,[{key:"location",get:function get(){return new nn(this.imp.location())},set:function set(t){this.imp.setLocation(t.imp)}},{key:"rotation",get:function get(){return this.imp.rotation()},set:function set(t){this.imp.setRotation(t)}},{key:"width",get:function get(){return this.imp.width()},set:function set(t){this.imp.setWidth(t)}},{key:"textHeight",get:function get(){return this.imp.textHeight()},set:function set(t){this.imp.setTextHeight(t)}},{key:"attachment",get:function get(){return this.imp.attachment()},set:function set(t){this.imp.setAttachment(t)}},{key:"contents",get:function get(){return tt.decodeFromGb2312(this.imp.contents())},set:function set(t){this.imp.setContents(tt.encodeToGb2312(t))}},{key:"getTextString",value:function getTextString(){return tt.decodeFromGb2312(this.imp.getTextString())}},{key:"reCompute",value:function reCompute(){return this.imp.reCompute()}}]),McDbMText}(Lt),Vt=function(p){_inherits$1(McDbCircle,p);var h=_createSuper$9(McDbCircle);function McDbCircle(p,x,M,k){var I;return _classCallCheck$1(this,McDbCircle),p instanceof Object?I=h.call(this,p):((I=h.call(this)).initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbCircle),"number"==typeof p&&(I.imp.setCenter(new nn(p,x,M).imp),I.imp.setRadius(k))),_possibleConstructorReturn$1(I)}return _createClass$1(McDbCircle,[{key:"setCenter",value:function setCenter(t,p,h){this.imp.setCenter(new nn(t,p,h).imp)}},{key:"center",get:function get(){return new nn(this.imp.center())},set:function set(t){this.imp.setCenter(t.imp)}},{key:"radius",get:function get(){return this.imp.radius()},set:function set(t){this.imp.setRadius(t)}}]),McDbCircle}(Et),Ut=function(p){_inherits$1(McDbPolyline,p);var h=_createSuper$9(McDbPolyline);function McDbPolyline(p){var x;return _classCallCheck$1(this,McDbPolyline),x=h.call(this,p),p||x.initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbPolyline),x}return _createClass$1(McDbPolyline,[{key:"isClosed",get:function get(){return this.imp.isClosed()},set:function set(t){this.imp.setClosed(t)}},{key:"constantWidth",get:function get(){return this.imp.getConstantWidth()},set:function set(t){this.imp.setConstantWidth(t)}},{key:"addVertexAt",value:function addVertexAt(p){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,x=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,M=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,k=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(p instanceof THREE.Vector3){var I=new t.MxCpp.mxcadassemblyimp.MdGePoint3d;return I.x=p.x,I.y=p.y,I.z=p.z,this.imp.addVertexAt(k,I,h,x,M)}return this.imp.addVertexAt(k,p.imp,h,x,M)}},{key:"removeVertexAt",value:function removeVertexAt(t){return this.imp.removeVertexAt(t)}},{key:"numVerts",value:function numVerts(){return this.imp.numVerts()}},{key:"getPointAt",value:function getPointAt(p){return{val:new nn(this.imp.getPointAt(p)),ret:t.MxCpp.getCallResult()}}},{key:"getBulgeAt",value:function getBulgeAt(t){return this.imp.getBulgeAt(t)}},{key:"getWidthsAt",value:function getWidthsAt(p){return{val1:this.imp.getStartWidthsAt(p),val2:this.imp.getEndWidthsAt(p),ret:0==t.MxCpp.getCallResult()}}},{key:"setPointAt",value:function setPointAt(t,p){return this.imp.setPointAt(t,p.imp)}},{key:"setBulgeAt",value:function setBulgeAt(t,p){return this.imp.setBulgeAt(t,p)}},{key:"pointInPolygon",value:function pointInPolygon(t,p){return this.imp.pointInPolygon(t,p)}},{key:"setWidthsAt",value:function setWidthsAt(t,p,h){return this.imp.setWidthsAt(t,p,h)}},{key:"getType",value:function getType(){return this.imp.getType()}},{key:"setType",value:function setType(t){return this.imp.setType(t)}}]),McDbPolyline}(Et),jt=function(p){_inherits$1(McDbBlockReference,p);var h=_createSuper$9(McDbBlockReference);function McDbBlockReference(p){var x;return _classCallCheck$1(this,McDbBlockReference),x=h.call(this,p),p||x.initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbBlockReference),x}return _createClass$1(McDbBlockReference,[{key:"blockTableRecordId",get:function get(){return new gt(this.imp.blockTableRecordId(),mt.kMxCAD)},set:function set(t){this.imp.setBlockTableRecordId(t.id)}},{key:"position",get:function get(){return new nn(this.imp.position())},set:function set(t){this.imp.setPosition(t.imp)}},{key:"scaleFactors",get:function get(){return new nn(this.imp.scaleFactors())},set:function set(t){this.imp.setScaleFactors(t.imp)}},{key:"setScale",value:function setScale(t){this.imp.setScaleFactors(new nn(t,t,t).imp)}},{key:"getScale",value:function getScale(){return this.imp.scaleFactors().x}},{key:"rotation",get:function get(){return this.imp.rotation()},set:function set(t){this.imp.setRotation(t)}},{key:"blockTransform",get:function get(){return new cn(this.imp.blockTransform())},set:function set(t){this.imp.setBlockTransform(t.imp)}},{key:"blockName",get:function get(){return tt.decodeFromGb2312(this.imp.getBlockName())}},{key:"appendAttribute",value:function appendAttribute(t){return new gt(this.imp.appendAttribute(t.getImp()),mt.kMxCAD)}},{key:"getAllAttribute",value:function getAllAttribute(){for(var p=[],h=this.imp.getAllAttribute(),x=h.length(),M=0;M<x;M++)p.push(new gt(h.at(M),mt.kMxCAD));return t.MxCpp.App.getImp().DestroyMdGeLongArray(h),p}},{key:"createAttribute",value:function createAttribute(){return this.imp.createAttribute()}},{key:"getSpatialFilterId",value:function getSpatialFilterId(){return new gt(this.imp.getSpatialFilterId(),mt.kMxCAD)}},{key:"createSpatialFilter",value:function createSpatialFilter(){return this.imp.createSpatialFilter()}},{key:"clearSpatialFilterCache",value:function clearSpatialFilterCache(){return this.imp.clearSpatialFilterCache()}},{key:"copyAttribute",value:function copyAttribute(t){return this.imp.copyAttribute(t.imp)}},{key:"eraseAllAttribute",value:function eraseAllAttribute(){this.imp.eraseAllAttribute()}}]),McDbBlockReference}(Lt),Wt=function(p){_inherits$1(McDbSpatialFilter,p);var h=_createSuper$9(McDbSpatialFilter);function McDbSpatialFilter(p){var x;return _classCallCheck$1(this,McDbSpatialFilter),x=h.call(this,p),p||x.initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbSpatialFilter),x}return _createClass$1(McDbSpatialFilter,[{key:"boundary",value:function boundary(){return new pn(this.imp.boundary())}},{key:"setBoundary",value:function setBoundary(t){return this.imp.setBoundary(t.imp)}},{key:"isFilterInverted",value:function isFilterInverted(){return this.imp.isFilterInverted()}},{key:"setFilterInverted",value:function setFilterInverted(t){return this.imp.setFilterInverted(t)}},{key:"isEnabled",value:function isEnabled(){return this.imp.isEnabled()}},{key:"setEnable",value:function setEnable(t){return this.imp.setEnable(t)}}]),McDbSpatialFilter}(vt),zt=function(t){_inherits$1(McDbDimension,t);var p=_createSuper$9(McDbDimension);function McDbDimension(t){return _classCallCheck$1(this,McDbDimension),p.call(this,t)}return _createClass$1(McDbDimension,[{key:"textPosition",get:function get(){return new nn(this.imp.textPosition())},set:function set(t){this.imp.setTextPosition(t.imp)}},{key:"isUsingDefaultTextPosition",value:function isUsingDefaultTextPosition(){return this.imp.isUsingDefaultTextPosition()}},{key:"useSetTextPosition",value:function useSetTextPosition(){return this.imp.useSetTextPosition()}},{key:"useDefaultTextPosition",value:function useDefaultTextPosition(){return this.imp.useDefaultTextPosition()}},{key:"elevation",get:function get(){return this.imp.elevation()},set:function set(t){this.imp.setElevation(t)}},{key:"dimensionText",get:function get(){return tt.decodeFromGb2312(this.imp.dimensionText())},set:function set(t){this.imp.setDimensionText(tt.encodeToGb2312(t))}},{key:"textRotation",get:function get(){return this.imp.textRotation()},set:function set(t){this.imp.setTextRotation(t)}},{key:"dimensionStyle",get:function get(){return new gt(this.imp.dimensionStyle(),mt.kMxCAD)},set:function set(t){this.imp.setDimensionStyle(t.id)}},{key:"textAttachment",get:function get(){return this.imp.textAttachment()},set:function set(t){this.imp.setTextAttachment(t)}},{key:"needToUpdateDimBlock",value:function needToUpdateDimBlock(t){this.imp.SetUpDimBlock(t)}},{key:"horizontalRotation",get:function get(){return this.imp.horizontalRotation()},set:function set(t){this.imp.setHorizontalRotation(t)}},{key:"recomputeDimBlock",value:function recomputeDimBlock(){this.imp.recomputeDimBlock(!0)}},{key:"getDimVarInt",value:function getDimVarInt(t){return this.imp.GetDimVarInt(t)}},{key:"setDimVarInt",value:function setDimVarInt(t,p){this.imp.SetDimVarInt(t,p)}},{key:"getDimVarDouble",value:function getDimVarDouble(t){return this.imp.GetDimVarDouble(t)}},{key:"setDimVarDouble",value:function setDimVarDouble(t,p){this.imp.SetDimVarDouble(t,p)}},{key:"getDimVarString",value:function getDimVarString(t){return this.imp.GetDimVarString(t)}},{key:"setDimVarString",value:function setDimVarString(t,p){this.imp.SetDimVarString(t,p)}},{key:"getDimVarObjectId",value:function getDimVarObjectId(t){return new gt(this.imp.GetDimVarObjectId(t),mt.kMxCAD)}},{key:"setDimVarObjectId",value:function setDimVarObjectId(t,p){this.imp.SetDimVarObjectId(t,p.id)}},{key:"GetAllText",value:function GetAllText(){return new ln(this.imp.GetAllText())}}]),McDbDimension}(Lt),Ht=function(p){_inherits$1(McDbAlignedDimension,p);var h=_createSuper$9(McDbAlignedDimension);function McDbAlignedDimension(p){var x;return _classCallCheck$1(this,McDbAlignedDimension),x=h.call(this,p),p||x.initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbAlignedDimension),x}return _createClass$1(McDbAlignedDimension,[{key:"xLine1Point",get:function get(){return new nn(this.imp.xLine1Point())},set:function set(t){this.imp.setXLine1Point(t.imp)}},{key:"xLine2Point",get:function get(){return new nn(this.imp.xLine2Point())},set:function set(t){this.imp.setXLine2Point(t.imp)}},{key:"dimLinePoint",get:function get(){return new nn(this.imp.dimLinePoint())},set:function set(t){this.imp.setDimLinePoint(t.imp)}},{key:"oblique",get:function get(){return this.imp.oblique()},set:function set(t){this.imp.setOblique(t)}}]),McDbAlignedDimension}(zt),$t=function(p){_inherits$1(McDbRotatedDimension,p);var h=_createSuper$9(McDbRotatedDimension);function McDbRotatedDimension(p){var x;return _classCallCheck$1(this,McDbRotatedDimension),x=h.call(this,p),p||x.initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbRotatedDimension),x}return _createClass$1(McDbRotatedDimension,[{key:"xLine1Point",get:function get(){return new nn(this.imp.xLine1Point())},set:function set(t){this.imp.setXLine1Point(t.imp)}},{key:"xLine2Point",get:function get(){return new nn(this.imp.xLine2Point())},set:function set(t){this.imp.setXLine2Point(t.imp)}},{key:"dimLinePoint",get:function get(){return new nn(this.imp.dimLinePoint())},set:function set(t){this.imp.setDimLinePoint(t.imp)}},{key:"oblique",get:function get(){return this.imp.oblique()},set:function set(t){this.imp.setOblique(t)}},{key:"rotation",get:function get(){return this.imp.rotation()},set:function set(t){this.imp.setRotation(t)}}]),McDbRotatedDimension}(zt),Yt=function(p){_inherits$1(McDb2LineAngularDimension,p);var h=_createSuper$9(McDb2LineAngularDimension);function McDb2LineAngularDimension(p){var x;return _classCallCheck$1(this,McDb2LineAngularDimension),x=h.call(this,p),p||x.initTempObject(new t.MxCpp.mxcadassemblyimp.MdDb2LineAngularDimension),x}return _createClass$1(McDb2LineAngularDimension,[{key:"arcPoint",get:function get(){return new nn(this.imp.arcPoint())},set:function set(t){this.imp.setArcPoint(t.imp)}},{key:"xLine1Start",get:function get(){return new nn(this.imp.xLine1Start())},set:function set(t){this.imp.setXLine1Start(t.imp)}},{key:"xLine1End",get:function get(){return new nn(this.imp.xLine1End())},set:function set(t){this.imp.setXLine1End(t.imp)}},{key:"xLine2Start",get:function get(){return new nn(this.imp.xLine2Start())},set:function set(t){this.imp.setXLine2Start(t.imp)}},{key:"xLine2End",get:function get(){return new nn(this.imp.xLine2End())},set:function set(t){this.imp.setXLine2End(t.imp)}},{key:"compute",value:function compute(t,p,h,x,M,k,I,N){return this.imp.compute(t,p,h,x,M,k,I,N)}}]),McDb2LineAngularDimension}(zt),Kt=function(p){_inherits$1(McDbArc,p);var h=_createSuper$9(McDbArc);function McDbArc(p){var x;return _classCallCheck$1(this,McDbArc),x=h.call(this,p),p||x.initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbArc),x}return _createClass$1(McDbArc,[{key:"setCenter",value:function setCenter(t,p,h){this.imp.setCenter(new nn(t,p,h).imp)}},{key:"center",get:function get(){return new nn(this.imp.center())},set:function set(t){this.imp.setCenter(t.imp)}},{key:"radius",get:function get(){return this.imp.radius()},set:function set(t){this.imp.setRadius(t)}},{key:"startAngle",get:function get(){return this.imp.startAngle()},set:function set(t){this.imp.setStartAngle(t)}},{key:"endAngle",get:function get(){return this.imp.endAngle()},set:function set(t){this.imp.setEndAngle(t)}},{key:"computeArc",value:function computeArc(t,p,h,x,M,k){return this.imp.computeArc(t,p,h,x,M,k)}}]),McDbArc}(Et),Xt=function(p){_inherits$1(McDbEllipse,p);var h=_createSuper$9(McDbEllipse);function McDbEllipse(p,x,M,k,I,N,V,ee,te){var re;return _classCallCheck$1(this,McDbEllipse),p instanceof Object?re=h.call(this,p):((re=h.call(this)).initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbEllipse),"number"==typeof p&&(V||(V=1),"number"!=typeof ee&&(ee=0),"number"!=typeof te&&(te=2*Math.PI),re.imp.InitData(new nn(p,x,M).imp,new sn(k,I,N).imp,V,ee,te))),_possibleConstructorReturn$1(re)}return _createClass$1(McDbEllipse,[{key:"setCenter",value:function setCenter(t,p,h){this.imp.setCenter(new nn(t,p,h).imp)}},{key:"center",get:function get(){return new nn(this.imp.center())},set:function set(t){this.imp.setCenter(t.imp)}},{key:"setMajorAxis",value:function setMajorAxis(t,p,h){this.imp.setMajorAxis(new sn(t,p,h).imp)}},{key:"majorAxis",get:function get(){return new sn(this.imp.majorAxis())},set:function set(t){this.imp.setMajorAxis(t.imp)}},{key:"setMinorAxis",value:function setMinorAxis(t,p,h){this.imp.setMinorAxis(new sn(t,p,h).imp)}},{key:"minorAxis",get:function get(){return new sn(this.imp.minorAxis())},set:function set(t){this.imp.setMinorAxis(t.imp)}},{key:"radiusRatio",get:function get(){return this.imp.radiusRatio()},set:function set(t){this.imp.setRadiusRatio(t)}},{key:"startAngle",get:function get(){return this.imp.startAngle()},set:function set(t){this.imp.setStartAngle(t)}},{key:"endAngle",get:function get(){return this.imp.endAngle()},set:function set(t){this.imp.setEndAngle(t)}}]),McDbEllipse}(Et),qt=function(p){_inherits$1(McDbPoint,p);var h=_createSuper$9(McDbPoint);function McDbPoint(p,x,M){var k;return _classCallCheck$1(this,McDbPoint),p instanceof Object?p instanceof nn?((k=h.call(this)).initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbPoint),k.imp.setPosition(p.imp)):k=h.call(this,p):((k=h.call(this)).initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbPoint),"number"==typeof p&&k.imp.setPosition(new nn(p,x,M).imp)),_possibleConstructorReturn$1(k)}return _createClass$1(McDbPoint,[{key:"setPosition",value:function setPosition(t,p,h){this.imp.setPosition(new nn(t,p,h).imp)}},{key:"position",get:function get(){return new nn(this.imp.position())},set:function set(t){this.imp.setPosition(t.imp)}}]),McDbPoint}(Lt),Zt=function(p){_inherits$1(McDbHatch,p);var h=_createSuper$9(McDbHatch);function McDbHatch(p){var x;return _classCallCheck$1(this,McDbHatch),p instanceof Object?x=h.call(this,p):(x=h.call(this)).initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbHatch),_possibleConstructorReturn$1(x)}return _createClass$1(McDbHatch,[{key:"numLoops",get:function get(){return this.imp.numLoops()}},{key:"loopTypeAt",value:function loopTypeAt(t){return this.imp.loopTypeAt(t)}},{key:"getLoopAt",value:function getLoopAt(p){var h=this.imp.getLoopAt(p);if(!h)return{ret:!1,lootype:0,vertices:[],bulges:[]};var x=h.GetCount();if(x<=0)return t.MxCpp.App.destroyObject(h),{ret:!1,lootype:0,vertices:[],bulges:[]};var M;M=h.Atlong(0);for(var k=[],I=[],N=1;N+1<x;N+=2)k.push(new nn(h.AtPoint(N))),I.push(h.AtDouble(N+1));return t.MxCpp.App.destroyObject(h),{ret:!0,lootype:M,vertices:k,bulges:I}}},{key:"patternType",value:function patternType(){return this.imp.patternType()}},{key:"patternName",value:function patternName(){return tt.decodeFromGb2312(this.imp.patternName())}},{key:"setPattern",value:function setPattern(t,p){this.imp.setPattern(t,tt.encodeToGb2312(p))}},{key:"patternAngle",get:function get(){return this.imp.patternAngle()},set:function set(t){this.imp.setPatternAngle(t)}},{key:"patternScale",get:function get(){return this.imp.patternScale()},set:function set(t){this.imp.setPatternScale(t)}},{key:"patternSpace",get:function get(){return this.imp.patternSpace()},set:function set(t){this.imp.setPatternSpace(t)}},{key:"patternDouble",get:function get(){return this.imp.patternDouble()},set:function set(t){this.imp.setPatternDouble(t)}},{key:"numPatternDefinitions",get:function get(){return this.imp.numPatternDefinitions()}},{key:"getPatternDefinitionAt",value:function getPatternDefinitionAt(p){var h=this.imp.getPatternDefinitionAt(p);if(!h)return{ret:!1,angle:0,baseX:0,baseY:0,offsetX:0,offsetY:0,aryDashes:[]};var x=h.length();if(x<5)return t.MxCpp.App.getImp().DestroyMdGeDoubleArray(h),{ret:!1,angle:0,baseX:0,baseY:0,offsetX:0,offsetY:0,aryDashes:[]};for(var M=h.at(0),k=h.at(1),I=h.at(2),N=h.at(3),V=h.at(4),ee=[],te=5;te<x;te++)ee.push(h.at(te));return t.MxCpp.App.getImp().DestroyMdGeDoubleArray(h),{ret:!1,angle:M,baseX:k,baseY:I,offsetX:N,offsetY:V,aryDashes:ee}}},{key:"addPatternDefinition",value:function addPatternDefinition(t,p,h,x,M,k){var I=new hn;return k.forEach((function(t){I.append(t)})),this.imp.addPatternDefinition(t,p,h,x,M,I.imp)}},{key:"clearPatternDefinition",value:function clearPatternDefinition(){return this.imp.clearPatternDefinition()}},{key:"hatchStyle",value:function hatchStyle(){return this.imp.hatchStyle()}},{key:"setHatchStyle",value:function setHatchStyle(t){return this.imp.setHatchStyle(t)}},{key:"appendLoop",value:function appendLoop(p){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],x=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.McDb.HatchLoopType.kPolyline,M=new hn;return h.forEach((function(t){M.append(t)})),this.imp.appendLoop(x,p.imp,M.imp)}},{key:"appendCircleLoop",value:function appendCircleLoop(p,h,x){var M=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,k=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t.McDb.HatchLoopType.kPolyline;return this.imp.appendCircleLoop(k,p,h,0,x,M)}},{key:"removeLoopAt",value:function removeLoopAt(t){return this.imp.removeLoopAt(t)}},{key:"removeAllLoop",value:function removeAllLoop(){return this.imp.removeAllLoop()}},{key:"setLoopAt",value:function setLoopAt(p,h,x){var M=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.McDb.HatchLoopType.kPolyline,k=new hn;return x.forEach((function(t){k.append(t)})),this.imp.setLoopAt(p,M,h.imp,k.imp)}},{key:"isSolid",value:function isSolid(){return this.imp.isSolid()}},{key:"scalePattern",value:function scalePattern(t){return this.imp.scalePattern(t)}}]),McDbHatch}(Lt),Jt=function(p){_inherits$1(McDbProxyEntity,p);var h=_createSuper$9(McDbProxyEntity);function McDbProxyEntity(p){var x;return _classCallCheck$1(this,McDbProxyEntity),p instanceof Object?x=h.call(this,p):(x=h.call(this)).initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbProxyEntity),_possibleConstructorReturn$1(x)}return _createClass$1(McDbProxyEntity,[{key:"getAllTextContent",value:function getAllTextContent(){return new ln(this.imp.getAllTextContent())}},{key:"getAllEntityIds",value:function getAllEntityIds(){for(var p=[],h=this.imp.getAllEntityIds(),x=h.length(),M=0;M<x;M++)p.push(new gt(h.at(M),mt.kMxCAD));return t.MxCpp.App.getImp().DestroyMdGeLongArray(h),p}},{key:"getOriginalClassName",value:function getOriginalClassName(){return this.imp.getOriginalClassName()}}]),McDbProxyEntity}(Lt),Qt=function(p){_inherits$1(McDbRasterImage,p);var h=_createSuper$9(McDbRasterImage);function McDbRasterImage(p){var x;return _classCallCheck$1(this,McDbRasterImage),p instanceof Object?x=h.call(this,p):(x=h.call(this)).initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbRasterImage),_possibleConstructorReturn$1(x)}return _createClass$1(McDbRasterImage,[{key:"setOrientation",value:function setOrientation(t,p,h){return this.imp.setOrientation(t.imp,p.imp,h.imp)}},{key:"getOrientation",value:function getOrientation(){var t=this.imp.getOrientation();return t.length()<3?{origin:new nn,uCorner:sn.kXAxis.clone(),vOnPlane:sn.kYAxis.clone()}:{origin:new nn(t.at(0)),uCorner:new sn(t.at(1)),vOnPlane:new sn(t.at(2))}}},{key:"setDwgImageSize",value:function setDwgImageSize(t,p){return this.imp.setImageSize(t,p)}},{key:"getDwgImageSize",value:function getDwgImageSize(){var t=this.imp.getImageSize();return[t.x,t.y]}},{key:"setImageDefId",value:function setImageDefId(t){t.type==mt.kMxCAD&&this.imp.setImageDefId(t.id)}},{key:"imageDefId",value:function imageDefId(){return new gt(this.imp.imageDefId(),mt.kMxCAD)}},{key:"setClipBoundary",value:function setClipBoundary(t,p){return this.imp.setClipBoundary(t,p.imp)}},{key:"clipBoundary",value:function clipBoundary(){return new pn(this.imp.clipBoundary())}},{key:"clipBoundaryType",value:function clipBoundaryType(){return this.imp.clipBoundaryType()}}]),McDbRasterImage}(Lt),er=function(p){_inherits$1(McDbWipeout,p);var h=_createSuper$9(McDbWipeout);function McDbWipeout(p){var x;return _classCallCheck$1(this,McDbWipeout),p instanceof Object?x=h.call(this,p):(x=h.call(this)).initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbWipeout),_possibleConstructorReturn$1(x)}return _createClass$1(McDbWipeout,[{key:"setVertices",value:function setVertices(t){return this.imp.setVertices(t.imp)}},{key:"getVertices",value:function getVertices(){return new pn(this.imp.getVertices())}}]),McDbWipeout}(Lt),tr=function(p){_inherits$1(McDbBackgroundEntity,p);var h=_createSuper$9(McDbBackgroundEntity);function McDbBackgroundEntity(t){return _classCallCheck$1(this,McDbBackgroundEntity),h.call(this,t)}return _createClass$1(McDbBackgroundEntity,[{key:"setShow",value:function setShow(t,p){return this.imp.setShow(tt.encodeToGb2312(t),p)}},{key:"isShow",value:function isShow(t){return this.imp.isShow(tt.encodeToGb2312(t))}},{key:"setShowColor",value:function setShowColor(t,p){return this.imp.setShowColor(tt.encodeToGb2312(t),p)}},{key:"getBackgroundDatabase",value:function getBackgroundDatabase(p){var h=this.imp.getBackgroundDatabase(tt.encodeToGb2312(p));return h.isNull()?(t.MxCpp.App.destroyObject(h),null):new Er(h)}},{key:"clearAll",value:function clearAll(){return this.imp.clearAll()}},{key:"clearDwg",value:function clearDwg(t){return this.imp.clearDwg(tt.encodeToGb2312(t))}}]),McDbBackgroundEntity}(Lt),rr=function(p){_inherits$1(McDbSpline,p);var h=_createSuper$9(McDbSpline);function McDbSpline(p){var x;return _classCallCheck$1(this,McDbSpline),x=h.call(this,p),p||x.initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbSpline),x}return _createClass$1(McDbSpline,[{key:"getNurbsData",value:function getNurbsData(){var p=this.imp.GetNurbsDataParam(),h=p.Atlong(0),x=1==p.Atlong(1),M=1==p.Atlong(2),k=1==p.Atlong(3),I=p.AtDouble(4),N=p.AtDouble(5);return t.MxCpp.App.destroyObject(p),{degree:h,rational:x,closed:M,periodic:k,controlPoints:new pn(this.imp.GetControlPoints(),!0),knots:new hn(this.imp.GetKnots(),!0),weights:new hn(this.imp.GetWeights(),!0),controlPtTol:I,knotTol:N}}},{key:"setNurbsData",value:function setNurbsData(t){var p=new bt;return p.AddLong(t.degree),p.AddLong(t.rational?1:0),p.AddLong(t.closed?1:0),p.AddLong(t.periodic?1:0),p.AddDouble(t.controlPtTol),p.AddDouble(t.knotTol),this.imp.SetNurbsData(p.getImp(),t.controlPoints.imp,t.knots.imp,t.weights.imp),!0}},{key:"getFitPoints",value:function getFitPoints(){var p=this.imp.GetFitDataParam(),h=p.Atlong(0),x=p.AtDouble(1),M=1==p.Atlong(2),k=p.AtPoint(3),I=p.AtPoint(4),N=new sn(k.x,k.y,k.z),V=new sn(I.x,I.y,I.z);return t.MxCpp.App.destroyObject(p),{degree:h,fitTolerance:x,tangentsExist:M,startTangent:N,endTangent:V,fitPoints:new pn(this.imp.GeFitPoints(),!0)}}},{key:"setFitPoints",value:function setFitPoints(t){var p=new bt;return p.AddLong(t.degree),p.AddDouble(t.fitTolerance),p.AddLong(t.tangentsExist?1:0),p.AddPoint(new nn(t.startTangent.x,t.startTangent.y,t.startTangent.z)),p.AddPoint(new nn(t.endTangent.x,t.endTangent.y,t.endTangent.z)),this.imp.SetFitData(p.getImp(),t.fitPoints.imp),!0}}]),McDbSpline}(Et);function _createSuper$8(t){var p=function _isNativeReflectConstruct$9(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(bm){return!1}}();return function _createSuperInternal(){var h,x=_getPrototypeOf$1(t);if(p){var M=_getPrototypeOf$1(this).constructor;h=Reflect.construct(x,arguments,M)}else h=x.apply(this,arguments);return _possibleConstructorReturn$1(this,h)}}var nr=function(t){return t[t.kClone=1]="kClone",t[t.kDragClone=2]="kDragClone",t[t.kCPPClone=3]="kCPPClone",t}(nr||{}),ir=function(t){return t[t.kWorldDraw=1]="kWorldDraw",t[t.kExplodeDraw=2]="kExplodeDraw",t}(ir||{}),ar=function(){function IMcDbDwgFiler(t){_classCallCheck$1(this,IMcDbDwgFiler),_defineProperty(this,"type",1),this.type=t}return _createClass$1(IMcDbDwgFiler,[{key:"getType",value:function getType(){return this.type}},{key:"writePoints",value:function writePoints(t,p){var h=this;this.writeLong(t+"_n",p.length),p.forEach((function(p,x){h.writePoint(t+"_"+x,p)}))}},{key:"readPoints",value:function readPoints(t){var p=[],h=this.readLong(t+"_n");if(h.ret)for(var x=0;x<h.val;x++){var M=this.readPoint(t+"_"+x);M.ret&&p.push(M.val)}return{val:p,ret:!0}}}]),IMcDbDwgFiler}(),or=function(t){_inherits$1(McDbDwgFiler,t);var p=_createSuper$8(McDbDwgFiler);function McDbDwgFiler(){var t,h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return _classCallCheck$1(this,McDbDwgFiler),_defineProperty(_assertThisInitialized$1(t=p.call(this,h)),"data",{}),t}return _createClass$1(McDbDwgFiler,[{key:"writePoint",value:function writePoint(t,p){this.data[t]=p.clone()}},{key:"readPoint",value:function readPoint(t){return this.data[t]&&this.data[t]instanceof nn?{val:this.data[t],ret:!0}:{val:new nn(0,0,0),ret:!1}}},{key:"writeLong",value:function writeLong(t,p){this.data[t]=p}},{key:"readLong",value:function readLong(t){return this.data[t]&&"number"==typeof this.data[t]?{val:this.data[t],ret:!0}:{val:0,ret:!1}}},{key:"writeDouble",value:function writeDouble(t,p){this.data[t]=p}},{key:"readDouble",value:function readDouble(t){return this.data[t]&&"number"==typeof this.data[t]?{val:this.data[t],ret:!0}:{val:0,ret:!1}}},{key:"writeString",value:function writeString(t,p){this.data[t]=p}},{key:"readString",value:function readString(t){return this.data[t]&&"string"==typeof this.data[t]?{val:this.data[t],ret:!0}:{val:"",ret:!1}}}]),McDbDwgFiler}(ar),sr=function(){function MxCADWorldDraw(p){_classCallCheck$1(this,MxCADWorldDraw),_defineProperty(this,"imp",void 0),_defineProperty(this,"type",1),this.imp=new t.MxCpp.mxcadassemblyimp.MdGiWorldDraw(p)}return _createClass$1(MxCADWorldDraw,[{key:"drawEntity",value:function drawEntity(t){this.imp.drawEntity(t.imp)}},{key:"drawOsnapEntity",value:function drawOsnapEntity(t){this.imp.drawOsnapEntity(t.imp)}},{key:"trueColor",get:function get(){return new Sr(this.imp.trueColor())},set:function set(t){this.imp.setTrueColor(t.getImp())}},{key:"getType",value:function getType(){return this.type}},{key:"initType",value:function initType(t){this.type=t}}]),MxCADWorldDraw}(),cr=function(p){_inherits$1(McDbCustomEntity,p);var h=_createSuper$8(McDbCustomEntity);function McDbCustomEntity(p){var x;return _classCallCheck$1(this,McDbCustomEntity),p instanceof Object?x=h.call(this,p):(x=h.call(this)).initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbCustomEntity(x.getTypeName())),_possibleConstructorReturn$1(x)}return _createClass$1(McDbCustomEntity,[{key:"rxInit",value:function rxInit(){ur.rxInit(this)}},{key:"clone",value:function clone(){var t=this.create(),p=new or(1);return this.dwgOutFields(p),t.dwgInFields(p),t}},{key:"syncData",value:function syncData(){if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){var p=this.imp.getFilter(!0),h=new pr(p);this.dwgOutFields(h),t.MxCpp.App.getImp().DestroyMdDbCustomEntityDwgFiler(p)}else{var x=this.imp.getFilter(!1),M=new pr(x);this.dwgInFields(M),t.MxCpp.App.getImp().DestroyMdDbCustomEntityDwgFiler(x)}return!0}},{key:"tempRelationObject",value:function tempRelationObject(){return ur.tmpRelationObject(this)}},{key:"freeTempRelationObject",value:function freeTempRelationObject(){ur.freeTmpObject(this)}},{key:"assertWrite",value:function assertWrite(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.imp.assertWrite(t,!0,!0,!0,!1)}},{key:"moveGripPointsAt",value:function moveGripPointsAt(t,p,h,x){}},{key:"getGripPoints",value:function getGripPoints(){return new pn}},{key:"transformBy",value:function transformBy(t){return!1}},{key:"getName",value:function getName(){return this.getTypeName()}},{key:"getBoundingBox",value:function getBoundingBox(){return{minPt:new nn,maxPt:new nn,ret:!1}}}]),McDbCustomEntity}(Lt);function _createSuper$7(t){var p=function _isNativeReflectConstruct$8(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(bm){return!1}}();return function _createSuperInternal(){var h,x=_getPrototypeOf$1(t);if(p){var M=_getPrototypeOf$1(this).constructor;h=Reflect.construct(x,arguments,M)}else h=x.apply(this,arguments);return _possibleConstructorReturn$1(this,h)}}var ur,lr=function(){function MxCustomEntityManagerImp(){_classCallCheck$1(this,MxCustomEntityManagerImp),_defineProperty(this,"mapType2Create",new Map),_defineProperty(this,"mapId2DatabaseMap",{}),_defineProperty(this,"alloc_id",1),_defineProperty(this,"alloc_tempid",1),_defineProperty(this,"mapTempId2Entity",new Map)}return _createClass$1(MxCustomEntityManagerImp,[{key:"rxInit",value:function rxInit(t){var p=t.getTypeName();this.mapType2Create.get(p),this.mapType2Create.set(p,t)}},{key:"tmpRelationObject",value:function tmpRelationObject(t){return this.alloc_tempid>9007199254740900&&(this.alloc_tempid=1),this.alloc_tempid+=1,t.imp.setCustomEntityTempid(this.alloc_tempid),this.mapTempId2Entity.set(this.alloc_tempid,t),this.alloc_tempid}},{key:"freeTmpObject",value:function freeTmpObject(t){if("number"==typeof t)this.mapTempId2Entity.delete(t);else{var p=t.imp.getCustomEntityTempid();t.imp.setCustomEntityTempid(0),this.mapTempId2Entity.delete(p)}}},{key:"getTmpObject",value:function getTmpObject(t){return this.mapTempId2Entity.get(t)}},{key:"allocId",value:function allocId(){return this.alloc_id>9007199254740900&&(this.alloc_id=1),this.alloc_id+=1,this.alloc_id}},{key:"isHaveType",value:function isHaveType(t){return this.mapType2Create.has(t)}},{key:"createMxEntity",value:function createMxEntity(t,p){if(0==t.length)return null;var h=this.mapType2Create.get(t);if(!h)return null;var x=h.create(p);return x.getTypeName(),x}},{key:"relationObject",value:function relationObject(t,p){if(0==p)return 0;var h=this.allocId(),x=this.mapId2DatabaseMap[p];return x||(x=new Map,this.mapId2DatabaseMap[p]=x),x.set(h,{idIndex:t,init:!1,customEntity:null}),h}},{key:"freeObject",value:function freeObject(t){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0==p)for(var h in this.mapId2DatabaseMap){this.mapId2DatabaseMap[h].delete(t)}else{var x=this.mapId2DatabaseMap[p];if(!x)return;x.delete(t)}}},{key:"freeDatabase",value:function freeDatabase(t){this.mapId2DatabaseMap.hasOwnProperty(t)&&delete this.mapId2DatabaseMap[t]}},{key:"getObjectFormId",value:function getObjectFormId(p){return p.isValid()&&p.type==mt.kMxCAD&&t.MxCpp.App.objectIdIsKindOf(p.id,"McDbCustomEntity")?t.MxCpp.App.objectIdToObject(p.id):null}},{key:"getObject",value:function getObject(p){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0==p)return null;var x=void 0;if(0!=h){var M=this.mapId2DatabaseMap[h];if(!M)return null;x=M.get(p)}else for(var k in this.mapId2DatabaseMap){if(x=this.mapId2DatabaseMap[k].get(p)){h=parseInt(k);break}}if(!x)return null;if(x.customEntity)return x.customEntity;if(x.init)return null;x.init=!0;var I=t.MxCpp.App.getImp().ObjectIdToMdDbCustomEntity(x.idIndex);if(!I)return null;var N=ur.createMxEntity(I.getCustomEntityTypeName(),I);return null==N?null:(N.syncData(!1),x.customEntity=N,N)}},{key:"init",value:function init(){var t=window;t.MxCustomEntityManager_freeObject=function(t,p){ur.freeObject(t,p)},t.MxCustomEntityManager_relationObject=function(t,p){return ur.relationObject(t,p)},t.MxCustomEntityManager_freeDatabase=function(t){ur.freeDatabase(t)},t.MxCustomEntityManager_worldDraw=function(t,p,h,x,M,k){var I;if(I=0!=x?ur.getTmpObject(x):ur.getObject(t,p)){var N=new sr(h);0!==M&&N.imp.connectVecOsnapEntity(M),0!==k&&(N.initType(ir.kExplodeDraw),N.imp.connectVecExplodeEntity(k)),I.worldDraw(N)}},t.MxCustomEntityManager_getGeomExtents=function(t,p,h,x){var M;if(M=0!=x?ur.getTmpObject(x):ur.getObject(t,p)){var k=M.getBoundingBox();if(k.ret){var I=new bt;I.getImp().Connect(h,!1),I.AddPoint(k.minPt),I.AddPoint(k.maxPt)}}},t.MxCustomEntityManager_syncData=function(t,p,h){var x=ur.getObject(t,p);x&&x.syncData(0!=h)},t.MxCustomEntityManager_transformBy=function(t,p,h,x){var M,k=new cn;k.imp.copyFormPointer(h),(M=0!=x?ur.getTmpObject(x):ur.getObject(t,p))&&M.transformBy(k)}}}]),MxCustomEntityManagerImp}(),pr=function(p){_inherits$1(McDbDwgFilerCpp,p);var h=_createSuper$7(McDbDwgFilerCpp);function McDbDwgFilerCpp(p){var x;return _classCallCheck$1(this,McDbDwgFilerCpp),_defineProperty(_assertThisInitialized$1(x=h.call(this,nr.kCPPClone)),"imp",void 0),p||(p=new t.MxCpp.mxcadassemblyimp.MdDbCustomEntityDwgFiler),x.imp=p,x}return _createClass$1(McDbDwgFilerCpp,[{key:"writePoint",value:function writePoint(t,p){this.imp.writePoint(t,p.imp.x,p.imp.y,p.imp.z)}},{key:"readPoint",value:function readPoint(p){var h=this.imp.readPoint(p),x={};return x=0==t.MxCpp.getCallResult()?{val:new nn(h),ret:!0}:{val:new nn,ret:!1},t.MxCpp.App.getImp().DestroyMdGePoint3d(h),x}},{key:"writeLong",value:function writeLong(t,p){this.imp.writeLong(t,p)}},{key:"readLong",value:function readLong(p){var h=this.imp.readLong(p);return 0==t.MxCpp.getCallResult()?{val:h,ret:!0}:{val:0,ret:!1}}},{key:"writeDouble",value:function writeDouble(t,p){this.imp.writeDouble(t,p)}},{key:"readDouble",value:function readDouble(p){var h=this.imp.readDouble(p);return 0==t.MxCpp.getCallResult()?{val:h,ret:!0}:{val:0,ret:!1}}},{key:"writeString",value:function writeString(t,p){this.imp.writeString(t,p)}},{key:"readString",value:function readString(p){var h=this.imp.readString(p);return 0==t.MxCpp.getCallResult()?{val:h,ret:!0}:{val:"",ret:!1}}}]),McDbDwgFilerCpp}(ar);function _createSuper$6(t){var p=function _isNativeReflectConstruct$7(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(bm){return!1}}();return function _createSuperInternal(){var h,x=_getPrototypeOf$1(t);if(p){var M=_getPrototypeOf$1(this).constructor;h=Reflect.construct(x,arguments,M)}else h=x.apply(this,arguments);return _possibleConstructorReturn$1(this,h)}}ur=new lr;var hr,fr,dr,mr,gr,vr,yr,xr,br,_r,Mr,Cr,wr=function(t){return t[t.kEntityType=5020]="kEntityType",t[t.kLayer=8]="kLayer",t[t.kBlockName=2]="kBlockName",t[t.kColor=62]="kColor",t[t.kAppName=-3]="kAppName",t[t.kLong=1071]="kLong",t[t.kDouble=1040]="kDouble",t[t.kString=1e3]="kString",t[t.kPoint=1010]="kPoint",t[t.kEntityId=-8e3]="kEntityId",t[t.kEntity=-8500]="kEntity",t[t.kExDataName=1001]="kExDataName",t}(wr||{});t.McDb=void 0,hr=t.McDb||(t.McDb={}),(fr=hr.PolylineType||(hr.PolylineType={}))[fr.kLwPolyline=0]="kLwPolyline",fr[fr.k3dPolyline=2]="k3dPolyline",(dr=hr.TextHorzMode||(hr.TextHorzMode={}))[dr.kTextLeft=0]="kTextLeft",dr[dr.kTextCenter=1]="kTextCenter",dr[dr.kTextRight=2]="kTextRight",dr[dr.kTextAlign=3]="kTextAlign",dr[dr.kTextMid=4]="kTextMid",dr[dr.kTextFit=5]="kTextFit",(mr=hr.Intersect||(hr.Intersect={}))[mr.kOnBothOperands=0]="kOnBothOperands",mr[mr.kExtendThis=1]="kExtendThis",mr[mr.kExtendArg=2]="kExtendArg",mr[mr.kExtendBoth=3]="kExtendBoth",(gr=hr.TextVertMode||(hr.TextVertMode={}))[gr.kTextBase=0]="kTextBase",gr[gr.kTextBottom=1]="kTextBottom",gr[gr.kTextVertMid=2]="kTextVertMid",gr[gr.kTextTop=3]="kTextTop",(vr=hr.AttachmentPoint||(hr.AttachmentPoint={}))[vr.kTopLeft=1]="kTopLeft",vr[vr.kTopCenter=2]="kTopCenter",vr[vr.kTopRight=3]="kTopRight",vr[vr.kMiddleLeft=4]="kMiddleLeft",vr[vr.kMiddleCenter=5]="kMiddleCenter",vr[vr.kMiddleRight=6]="kMiddleRight",vr[vr.kBottomLeft=7]="kBottomLeft",vr[vr.kBottomCenter=8]="kBottomCenter",vr[vr.kBottomRight=9]="kBottomRight",vr[vr.kBaseLeft=10]="kBaseLeft",vr[vr.kBaseCenter=11]="kBaseCenter",vr[vr.kBaseRight=12]="kBaseRight",vr[vr.kBaseAlign=13]="kBaseAlign",vr[vr.kBottomAlign=14]="kBottomAlign",vr[vr.kMiddleAlign=15]="kMiddleAlign",vr[vr.kTopAlign=16]="kTopAlign",vr[vr.kBaseFit=17]="kBaseFit",vr[vr.kBottomFit=18]="kBottomFit",vr[vr.kMiddleFit=19]="kMiddleFit",vr[vr.kTopFit=20]="kTopFit",vr[vr.kBaseMid=21]="kBaseMid",vr[vr.kBottomMid=22]="kBottomMid",vr[vr.kMiddleMid=23]="kMiddleMid",vr[vr.kTopMid=24]="kTopMid",(yr=hr.LineWeight||(hr.LineWeight={}))[yr.kLnWt000=0]="kLnWt000",yr[yr.kLnWt005=5]="kLnWt005",yr[yr.kLnWt009=9]="kLnWt009",yr[yr.kLnWt013=13]="kLnWt013",yr[yr.kLnWt015=15]="kLnWt015",yr[yr.kLnWt018=18]="kLnWt018",yr[yr.kLnWt020=20]="kLnWt020",yr[yr.kLnWt025=25]="kLnWt025",yr[yr.kLnWt030=30]="kLnWt030",yr[yr.kLnWt035=35]="kLnWt035",yr[yr.kLnWt040=40]="kLnWt040",yr[yr.kLnWt050=50]="kLnWt050",yr[yr.kLnWt053=53]="kLnWt053",yr[yr.kLnWt060=60]="kLnWt060",yr[yr.kLnWt070=70]="kLnWt070",yr[yr.kLnWt080=80]="kLnWt080",yr[yr.kLnWt090=90]="kLnWt090",yr[yr.kLnWt100=100]="kLnWt100",yr[yr.kLnWt106=106]="kLnWt106",yr[yr.kLnWt120=120]="kLnWt120",yr[yr.kLnWt140=140]="kLnWt140",yr[yr.kLnWt158=158]="kLnWt158",yr[yr.kLnWt200=200]="kLnWt200",yr[yr.kLnWt211=211]="kLnWt211",yr[yr.kLnWtByLayer=-1]="kLnWtByLayer",yr[yr.kLnWtByBlock=-2]="kLnWtByBlock",yr[yr.kLnWtByLwDefault=-3]="kLnWtByLwDefault",(xr=hr.HatchLoopType||(hr.HatchLoopType={}))[xr.kDefault=0]="kDefault",xr[xr.kExternal=1]="kExternal",xr[xr.kPolyline=2]="kPolyline",xr[xr.kDerived=4]="kDerived",xr[xr.kTextbox=8]="kTextbox",xr[xr.kOutermost=16]="kOutermost",xr[xr.kNotClosed=32]="kNotClosed",xr[xr.kSelfIntersecting=64]="kSelfIntersecting",xr[xr.kTextIsland=128]="kTextIsland",(br=hr.HatchEdgeType||(hr.HatchEdgeType={}))[br.kLine=1]="kLine",br[br.kCirArc=2]="kCirArc",br[br.kEllArc=3]="kEllArc",br[br.kSpline=4]="kSpline",(_r=hr.HatchPatternType||(hr.HatchPatternType={}))[_r.kUserDefined=0]="kUserDefined",_r[_r.kPreDefined=1]="kPreDefined",_r[_r.kCustomDefined=2]="kCustomDefined",(Mr=hr.HatchStyle||(hr.HatchStyle={}))[Mr.kNormal=0]="kNormal",Mr[Mr.kOuter=1]="kOuter",Mr[Mr.kIgnore=2]="kIgnore",(Cr=hr.ClipBoundaryType||(hr.ClipBoundaryType={}))[Cr.kInvalid=0]="kInvalid",Cr[Cr.kRect=1]="kRect",Cr[Cr.kPoly=2]="kPoly";var Sr=function(){function McCmColor(p,h,x,M){_classCallCheck$1(this,McCmColor),_defineProperty(this,"imp",void 0),this.imp=new t.MxCpp.mxcadassemblyimp.MdCmColor,p instanceof Object?(this.imp.red=p.red,this.imp.green=p.green,this.imp.blue=p.blue,this.imp.method=p.method,this.imp.n=p.n,this.imp.colorIndex=p.colorIndex):"number"==typeof p&&"number"==typeof h&&"number"==typeof x&&(this.imp.setRGB(p,h,x),"number"==typeof M&&(this.imp.n=M))}return _createClass$1(McCmColor,[{key:"getImp",value:function getImp(){return this.imp}},{key:"copy",value:function copy(t){return this.imp.red=t.imp.red,this.imp.green=t.imp.green,this.imp.blue=t.imp.blue,this.imp.method=t.imp.method,this.imp.n=t.imp.n,this.imp.colorIndex=t.imp.colorIndex,this}},{key:"clone",value:function clone(){return new McCmColor(this.imp)}},{key:"setColorIndex",value:function setColorIndex(t){this.imp.setColorIndex(t)}},{key:"setRGB",value:function setRGB(t,p,h){this.imp.setRGB(t,p,h)}},{key:"red",get:function get(){return this.imp.red},set:function set(t){this.imp.red=t}},{key:"green",get:function get(){return this.imp.green},set:function set(t){this.imp.green=t}},{key:"blue",get:function get(){return this.imp.blue},set:function set(t){this.imp.blue=t}},{key:"n",get:function get(){return this.imp.n},set:function set(t){this.imp.n=t}},{key:"method",get:function get(){return this.imp.method},set:function set(t){this.imp.method=t}},{key:"colorIndex",get:function get(){return this.imp.colorIndex},set:function set(t){this.imp.colorIndex=t}},{key:"getColorString",value:function getColorString(){return this.imp.getColorString()}},{key:"getColorValue",value:function getColorValue(t,p){var h=0;(null==t?void 0:t.type)==mt.kMxCAD&&(h=t.id);var x=0;return(null==p?void 0:p.type)==mt.kMxCAD&&(x=p.id),this.imp.getColorValue(h,x)}},{key:"getStyle",value:function getStyle(){var t=this.red,p=this.green,h=this.blue,x=this.colorIndex,M=Di(t/255,p/255,h/255);if(x===ki.kWhite){var k={h:0,s:0,l:0};M.getHSL(k),k.h=(k.h+.5)%1,M.setHSL(k.h,k.s,k.l)}return M.getStyle()}}]),McCmColor}(),Tr=function(p){_inherits$1(McDbLinetypeTableRecord,p);var h=_createSuper$6(McDbLinetypeTableRecord);function McDbLinetypeTableRecord(p){var x;return _classCallCheck$1(this,McDbLinetypeTableRecord),x=h.call(this,p),p||x.initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbLinetypeTableRecord),x}return _createClass$1(McDbLinetypeTableRecord,[{key:"name",get:function get(){return tt.decodeFromGb2312(this.imp.getName())},set:function set(t){this.imp.setName(tt.encodeToGb2312(t))}},{key:"numDashes",get:function get(){return this.imp.numDashes()},set:function set(t){this.imp.setNumDashes(t)}},{key:"dashLengthAt",value:function dashLengthAt(t){return this.imp.dashLengthAt(t)}},{key:"setDashLengthAt",value:function setDashLengthAt(t,p){return this.imp.setDashLengthAt(t,p)}},{key:"comments",get:function get(){return tt.decodeFromGb2312(this.imp.comments())},set:function set(t){this.imp.setComments(tt.encodeToGb2312(t))}},{key:"shapeStyleAt",value:function shapeStyleAt(t){return this.imp.shapeStyleAt(t)}},{key:"setShapeStyleAt",value:function setShapeStyleAt(t,p){return this.imp.setShapeStyleAt(t,p)}},{key:"shapeNumberAt",value:function shapeNumberAt(t){return this.imp.shapeNumberAt(t)}},{key:"setShapeNumberAt",value:function setShapeNumberAt(t,p){return this.imp.setShapeNumberAt(t,p)}},{key:"shapeOffsetAt",value:function shapeOffsetAt(t){return new sn(this.imp.shapeOffsetAt(t))}},{key:"setShapeOffsetAt",value:function setShapeOffsetAt(t,p){return this.imp.setShapeOffsetAt(t,p.imp)}},{key:"shapeScaleAt",value:function shapeScaleAt(t){return this.imp.shapeScaleAt(t)}},{key:"setShapeScaleAt",value:function setShapeScaleAt(t,p){return this.imp.setShapeScaleAt(t,p)}},{key:"isScaledToFit",get:function get(){return this.imp.isScaledToFit()},set:function set(t){this.imp.setIsScaledToFit(t)}},{key:"shapeIsUcsOrientedAt",value:function shapeIsUcsOrientedAt(t){return this.imp.shapeIsUcsOrientedAt(t)}},{key:"setShapeIsUcsOrientedAt",value:function setShapeIsUcsOrientedAt(t,p){return this.imp.setShapeScaleAt(t,p)}},{key:"shapeRotationAt",value:function shapeRotationAt(t){return this.imp.shapeRotationAt(t)}},{key:"setShapeRotationAt",value:function setShapeRotationAt(t,p){return this.imp.setShapeRotationAt(t,p)}},{key:"textAt",value:function textAt(t){return tt.decodeFromGb2312(this.imp.textAt(t))}},{key:"setTextAt",value:function setTextAt(t,p){return this.imp.setTextAt(t,tt.encodeToGb2312(p))}}]),McDbLinetypeTableRecord}(vt),Ar=function(p){_inherits$1(McDbDimStyleTableRecord,p);var h=_createSuper$6(McDbDimStyleTableRecord);function McDbDimStyleTableRecord(p){var x;return _classCallCheck$1(this,McDbDimStyleTableRecord),x=h.call(this,p),p||x.initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbDimStyleTableRecord),x}return _createClass$1(McDbDimStyleTableRecord,[{key:"name",get:function get(){return tt.decodeFromGb2312(this.imp.getName())},set:function set(t){this.imp.setName(tt.encodeToGb2312(t))}},{key:"getDimVarInt",value:function getDimVarInt(t){return this.imp.getDimVarInt(t)}},{key:"setDimVarInt",value:function setDimVarInt(t,p){return this.imp.setDimVarInt(t,p)}},{key:"getDimVarDouble",value:function getDimVarDouble(t){return this.imp.getDimVarDouble(t)}},{key:"setDimVarDouble",value:function setDimVarDouble(t,p){return this.imp.setDimVarDouble(t,p)}},{key:"getDimVarString",value:function getDimVarString(t){return tt.decodeFromGb2312(this.imp.getDimVarString(t))}},{key:"setDimVarString",value:function setDimVarString(t,p){return this.imp.setDimVarString(t,tt.encodeToGb2312(p))}},{key:"getDimVarObjectId",value:function getDimVarObjectId(t){return new gt(this.imp.getDimVarObjectId(t),mt.kMxCAD)}},{key:"setDimVarObjectId",value:function setDimVarObjectId(t,p){return this.imp.setDimVarObjectId(t,p.id)}},{key:"getDimblk",value:function getDimblk(){return this.imp.getDimblk()}},{key:"setDimblk",value:function setDimblk(t){return this.imp.setDimblk(t)}},{key:"getDimblk1",value:function getDimblk1(){return this.imp.getDimblk1()}},{key:"setDimblk1",value:function setDimblk1(t){return this.imp.setDimblk1(t)}},{key:"getDimblk2",value:function getDimblk2(){return this.imp.getDimblk2()}},{key:"setDimblk2",value:function setDimblk2(t){return this.imp.setDimblk2(t)}},{key:"getDimldrblk",value:function getDimldrblk(){return this.imp.getDimldrblk()}},{key:"setDimldrblk",value:function setDimldrblk(t){return this.imp.setDimldrblk(t)}}]),McDbDimStyleTableRecord}(vt),kr=function(p){_inherits$1(McDbTextStyleTableRecord,p);var h=_createSuper$6(McDbTextStyleTableRecord);function McDbTextStyleTableRecord(p){var x;return _classCallCheck$1(this,McDbTextStyleTableRecord),x=h.call(this,p),p||x.initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbTextStyleTableRecord),x}return _createClass$1(McDbTextStyleTableRecord,[{key:"name",get:function get(){return tt.decodeFromGb2312(this.imp.getName())},set:function set(t){this.imp.setName(tt.encodeToGb2312(t))}},{key:"isShapeFile",get:function get(){return this.imp.isShapeFile()},set:function set(t){this.imp.setIsShapeFile(t)}},{key:"isVertical",get:function get(){return this.imp.isVertical()},set:function set(t){this.imp.setIsVertical(t)}},{key:"textSize",get:function get(){return this.imp.textSize()},set:function set(t){this.imp.setTextSize(t)}},{key:"xScale",get:function get(){return this.imp.xScale()},set:function set(t){this.imp.setXScale(t)}},{key:"obliquingAngle",get:function get(){return this.imp.obliquingAngle()},set:function set(t){this.imp.setObliquingAngle(t)}},{key:"flagBits",get:function get(){return this.imp.flagBits()},set:function set(t){this.imp.setFlagBits(t)}},{key:"fileName",get:function get(){return tt.decodeFromGb2312(this.imp.fileName())},set:function set(t){this.imp.setFileName(tt.encodeToGb2312(t))}},{key:"bigFontFileName",get:function get(){return tt.decodeFromGb2312(this.imp.bigFontFileName())},set:function set(t){this.imp.setBigFontFileName(tt.encodeToGb2312(t))}},{key:"setFont",value:function setFont(t,p,h,x,M){return this.imp.setFont(tt.encodeToGb2312(t),p,h,x,M)}},{key:"font",value:function font(){var t=this.imp.font();return t?{sTypeface:tt.decodeFromGb2312(t.AtString(0,!0)),bold:0!=t.Atlong(1),italic:0!=t.Atlong(2),charset:t.Atlong(3),pitchAndFamily:t.Atlong(4)}:{sTypeface:"",bold:!1,italic:!1,charset:0,pitchAndFamily:0}}}]),McDbTextStyleTableRecord}(vt),Dr=function(p){_inherits$1(McDbLayerTableRecord,p);var h=_createSuper$6(McDbLayerTableRecord);function McDbLayerTableRecord(p){var x;return _classCallCheck$1(this,McDbLayerTableRecord),x=h.call(this,p),p||x.initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbLayerTableRecord),x}return _createClass$1(McDbLayerTableRecord,[{key:"name",get:function get(){return tt.decodeFromGb2312(this.imp.getName())},set:function set(t){this.imp.setName(tt.encodeToGb2312(t))}},{key:"isFrozen",get:function get(){return this.imp.isFrozen()},set:function set(t){this.imp.setIsFrozen(t)}},{key:"isOff",get:function get(){return this.imp.isOff()},set:function set(t){this.imp.setIsOff(t)}},{key:"isLocked",get:function get(){return this.imp.isLocked()},set:function set(t){this.imp.setIsLocked(t)}},{key:"color",get:function get(){return new Sr(this.imp.color())},set:function set(t){this.imp.setColor(t.getImp())}},{key:"linetypeObjectId",get:function get(){return new gt(this.imp.linetypeObjectId(),mt.kMxCAD)},set:function set(t){this.imp.setLinetypeObjectId(t.id)}},{key:"lineWeight",get:function get(){return this.imp.lineWeight()},set:function set(t){this.imp.setLineWeight(t)}}]),McDbLayerTableRecord}(vt),Pr=function(p){_inherits$1(McDbLayerTable,p);var h=_createSuper$6(McDbLayerTable);function McDbLayerTable(t){return _classCallCheck$1(this,McDbLayerTable),h.call(this,t)}return _createClass$1(McDbLayerTable,[{key:"getAllRecordId",value:function getAllRecordId(){for(var p=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],h=[],x=this.imp.getAllRecordId(p),M=x.length(),k=0;k<M;k++)h.push(new gt(x.at(k),mt.kMxCAD));return t.MxCpp.App.getImp().DestroyMdGeLongArray(x),h}},{key:"add",value:function add(t){return new gt(this.imp.add(t.getImp()),mt.kMxCAD)}},{key:"get",value:function get(t){var p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],h=tt.encodeToGb2312(t);return new gt(this.imp.get(h,p))}},{key:"has",value:function has(t){var p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],h=tt.encodeToGb2312(t);return 0!=this.imp.get(h,p)}}]),McDbLayerTable}(vt),Or=function(p){_inherits$1(McDbLinetypeTable,p);var h=_createSuper$6(McDbLinetypeTable);function McDbLinetypeTable(t){return _classCallCheck$1(this,McDbLinetypeTable),h.call(this,t)}return _createClass$1(McDbLinetypeTable,[{key:"getAllRecordId",value:function getAllRecordId(){for(var p=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],h=[],x=this.imp.getAllRecordId(p),M=x.length(),k=0;k<M;k++)h.push(new gt(x.at(k),mt.kMxCAD));return t.MxCpp.App.getImp().DestroyMdGeLongArray(x),h}},{key:"add",value:function add(t){return new gt(this.imp.add(t.getImp()),mt.kMxCAD)}},{key:"get",value:function get(t){var p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],h=tt.encodeToGb2312(t);return new gt(this.imp.get(h,p))}},{key:"has",value:function has(t){var p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],h=tt.encodeToGb2312(t);return 0!=this.imp.get(h,p)}}]),McDbLinetypeTable}(vt),Ir=function(p){_inherits$1(McDbDimStyleTable,p);var h=_createSuper$6(McDbDimStyleTable);function McDbDimStyleTable(t){return _classCallCheck$1(this,McDbDimStyleTable),h.call(this,t)}return _createClass$1(McDbDimStyleTable,[{key:"getAllRecordId",value:function getAllRecordId(){for(var p=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],h=[],x=this.imp.getAllRecordId(p),M=x.length(),k=0;k<M;k++)h.push(new gt(x.at(k),mt.kMxCAD));return t.MxCpp.App.getImp().DestroyMdGeLongArray(x),h}},{key:"add",value:function add(t){return new gt(this.imp.add(t.getImp()),mt.kMxCAD)}},{key:"get",value:function get(t){var p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],h=tt.encodeToGb2312(t);return new gt(this.imp.get(h,p))}},{key:"has",value:function has(t){var p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],h=tt.encodeToGb2312(t);return 0!=this.imp.get(h,p)}}]),McDbDimStyleTable}(vt),Lr=function(p){_inherits$1(McDbTextStyleTable,p);var h=_createSuper$6(McDbTextStyleTable);function McDbTextStyleTable(t){return _classCallCheck$1(this,McDbTextStyleTable),h.call(this,t)}return _createClass$1(McDbTextStyleTable,[{key:"getAllRecordId",value:function getAllRecordId(){for(var p=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],h=[],x=this.imp.getAllRecordId(p),M=x.length(),k=0;k<M;k++)h.push(new gt(x.at(k),mt.kMxCAD));return t.MxCpp.App.getImp().DestroyMdGeLongArray(x),h}},{key:"add",value:function add(t){return new gt(this.imp.add(t.getImp()),mt.kMxCAD)}},{key:"get",value:function get(t){var p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],h=tt.encodeToGb2312(t);return new gt(this.imp.get(h,p))}},{key:"has",value:function has(t){var p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],h=tt.encodeToGb2312(t);return 0!=this.imp.get(h,p)}}]),McDbTextStyleTable}(vt),Er=function(p){_inherits$1(McDbDatabase,p);var h=_createSuper$6(McDbDatabase);function McDbDatabase(p){var x;return _classCallCheck$1(this,McDbDatabase),x=h.call(this,p),p||x.initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbDatabase),x}return _createClass$1(McDbDatabase,[{key:"ucsMatrix",get:function get(){return new cn(this.imp.getUcsMatrix())},set:function set(t){this.imp.setUcsMatrix(t.imp)}},{key:"getLayerTable",value:function getLayerTable(){return new Pr(this.imp.GetLayerTable())}},{key:"wblock",value:function wblock(t,p,h){h||(h=nn.kOrigin);var x=new un;return p.forEach((function(t){x.append(t.id)})),this.imp.wblock(t.getImp(),x.imp,h.imp)}},{key:"insert",value:function insert(t,p){var h=tt.encodeToGb2312(p);return new gt(this.imp.insert(t.getImp(),h),mt.kMxCAD)}},{key:"readFile",value:function readFile(t){return this.imp.readFile(t)}},{key:"saveAs",value:function saveAs(t){return this.imp.saveAs(t)}},{key:"layerTable",get:function get(){return new Pr(this.imp.GetLayerTable())}},{key:"getLinetypeTable",value:function getLinetypeTable(){return new Or(this.imp.GetLinetypeTable())}},{key:"getDimStyleTable",value:function getDimStyleTable(){return new Ir(this.imp.GetDimStyleTable())}},{key:"dimStyleTable",get:function get(){return new Ir(this.imp.GetDimStyleTable())}},{key:"linetypeTable",get:function get(){return new Or(this.imp.GetLinetypeTable())}},{key:"getTextStyleTable",value:function getTextStyleTable(){return new Lr(this.imp.GetTextStyleTable())}},{key:"textStyleTable",get:function get(){return new Lr(this.imp.GetTextStyleTable())}},{key:"getBlockTable",value:function getBlockTable(){return new Br(this.imp.GetBlockTable())}},{key:"getNamedObjectsDictionary",value:function getNamedObjectsDictionary(){return new Gr(this.imp.GetNamedObjectsDictionary())}},{key:"getEntitiesInTheGroup",value:function getEntitiesInTheGroup(p){for(var h=[],x=this.imp.getEntitiesInTheGroup(p.id),M=x.length(),k=0;k<M;k++)h.push(new gt(x.at(k),mt.kMxCAD));return t.MxCpp.App.getImp().DestroyMdGeLongArray(x),h}},{key:"GetGroupDictionary",value:function GetGroupDictionary(){return new Gr(this.imp.GetGroupDictionary())}},{key:"CreateGroup",value:function CreateGroup(t){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",h=this.GetGroupDictionary(),x=new Vr;return x.appendArray(t),x.name=p,h.addObject(p,x),!0}},{key:"blockTable",get:function get(){return new Br(this.imp.GetBlockTable())}},{key:"currentSpace",get:function get(){return new Rr(this.imp.CurrentSpace())}},{key:"getCurrentlyLineTypeScale",value:function getCurrentlyLineTypeScale(){return this.imp.GetCurrentlyLineTypeScale()}},{key:"setCurrentlyLineTypeScale",value:function setCurrentlyLineTypeScale(t){return this.imp.SetCurrentlyLineTypeScale(t)}},{key:"getCurrentlyLineTypeName",value:function getCurrentlyLineTypeName(){var t=this.imp.GetCurrentlyLineTypeName();return tt.decodeFromGb2312(t)}},{key:"setCurrentlyLineTypeName",value:function setCurrentlyLineTypeName(t){var p=tt.encodeToGb2312(t);this.imp.SetCurrentlyLineTypeName(p)}},{key:"getCurrentlyLayerName",value:function getCurrentlyLayerName(){var t=this.imp.GetCurrentlyLayerName();return tt.decodeFromGb2312(t)}},{key:"setCurrentlyLayerName",value:function setCurrentlyLayerName(t){var p=tt.encodeToGb2312(t);this.imp.SetCurrentlyLayerName(p)}},{key:"getCurrentlyTrueColor",value:function getCurrentlyTrueColor(){return new Sr(this.imp.GetCurrentlyTrueColor())}},{key:"getCurrentlyDrawColor",value:function getCurrentlyDrawColor(){var t=this.imp.GetCurrentlyDrawColor(),p=new THREE.Color;return p.setRGB(t.at(0)/255,t.at(1)/255,t.at(2)/255),p}},{key:"setCurrentlyTrueColor",value:function setCurrentlyTrueColor(t){return this.imp.SetCurrentlyTrueColor(t.getImp())}},{key:"getCurrentlyColorIndex",value:function getCurrentlyColorIndex(){return this.imp.GetCurrentlyColorIndex()}},{key:"setCurrentlyColorIndex",value:function setCurrentlyColorIndex(t){return this.imp.SetCurrentlyColorIndex(t)}},{key:"getCurrentlyTextStyleName",value:function getCurrentlyTextStyleName(){var t=this.imp.GetCurrentlyTextStyleName();return tt.decodeFromGb2312(t)}},{key:"setCurrentlyTextStyle",value:function setCurrentlyTextStyle(t){var p=tt.encodeToGb2312(t);this.imp.SetCurrentlyTextStyle(p)}},{key:"getCurrentlyLineWeight",value:function getCurrentlyLineWeight(){return this.imp.GetCurrentlyLineWeight()}},{key:"setCurrentlyLineWeight",value:function setCurrentlyLineWeight(t){return this.imp.SetCurrentlyLineWeight(t)}},{key:"getCurrentlyTextStyleId",value:function getCurrentlyTextStyleId(){return new gt(this.imp.GetCurrentlyTextStyleId(),mt.kMxCAD)}},{key:"SetCurrentlyTextStyleId",value:function SetCurrentlyTextStyleId(t){return this.imp.SetCurrentlyTextStyleId(t.id)}},{key:"getCurrentlyDimStyleId",value:function getCurrentlyDimStyleId(){return new gt(this.imp.GetCurrentlyDimStyleId(),mt.kMxCAD)}},{key:"setCurrentlyDimStyleId",value:function setCurrentlyDimStyleId(t){return this.imp.SetCurrentlyDimStyleId(t.id)}},{key:"getCurrentlyLayerId",value:function getCurrentlyLayerId(){return new gt(this.imp.GetCurrentlyLayerId(),mt.kMxCAD)}},{key:"setCurrentlyLayerId",value:function setCurrentlyLayerId(t){return this.imp.SetCurrentlyLayerId(t.id)}},{key:"getCurrentlyLinetypeId",value:function getCurrentlyLinetypeId(){return new gt(this.imp.GetCurrentlyLinetypeId(),mt.kMxCAD)}},{key:"setCurrentlyLinetypeId",value:function setCurrentlyLinetypeId(t){return this.imp.SetCurrentlyLinetypeId(t.id)}},{key:"handleToIdIndex",value:function handleToIdIndex(t){var p=this.imp.HandleToIdIndex(t);return new gt(p,mt.kMxCAD)}},{key:"isModifyed",value:function isModifyed(){return this.imp.IsModifyed()}},{key:"resetModificationStatus",value:function resetModificationStatus(){return this.imp.SetModifyed(!1)}}]),McDbDatabase}(dt),Rr=function(p){_inherits$1(McDbBlockTableRecord,p);var h=_createSuper$6(McDbBlockTableRecord);function McDbBlockTableRecord(p){var x;return _classCallCheck$1(this,McDbBlockTableRecord),x=h.call(this,p),p||x.initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbBlockTableRecord),x}return _createClass$1(McDbBlockTableRecord,[{key:"appendAcDbEntity",value:function appendAcDbEntity(t){var p=t.syncData(!0),h=new gt(this.imp.appendAcDbEntity(t.getImp()),mt.kMxCAD);return p&&ur.getObjectFormId(h),h}},{key:"getAllEntityId",value:function getAllEntityId(){for(var p=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],h=[],x=this.imp.getAllEntityId(p),M=x.length(),k=0;k<M;k++)h.push(new gt(x.at(k),mt.kMxCAD));return t.MxCpp.App.getImp().DestroyMdGeLongArray(x),h}},{key:"getMinMaxDrawOrder",value:function getMinMaxDrawOrder(){var t=this.imp.getMinMaxDrawOrder();return{minDrawOrder:t.x,maxDrawOrder:t.y}}},{key:"origin",get:function get(){return new nn(this.imp.origin())},set:function set(t){this.imp.setOrigin(t.imp)}},{key:"getBoundingBox",value:function getBoundingBox(){var t=this.imp.getBoundingBox();return t.length()<2?{minPt:new nn,maxPt:new nn,ret:!1}:{minPt:new nn(t.at(0)),maxPt:new nn(t.at(1)),ret:!0}}},{key:"invalidBoundingBoxBuffer",value:function invalidBoundingBoxBuffer(){this.imp.invalidBoundingBoxBuffer()}},{key:"name",get:function get(){return tt.decodeFromGb2312(this.imp.getName())},set:function set(t){this.imp.setName(tt.encodeToGb2312(t))}}]),McDbBlockTableRecord}(vt),Br=function(p){_inherits$1(McDbBlockTable,p);var h=_createSuper$6(McDbBlockTable);function McDbBlockTable(p){var x;return _classCallCheck$1(this,McDbBlockTable),x=h.call(this,p),p||x.initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbBlockTable),x}return _createClass$1(McDbBlockTable,[{key:"getAllRecordId",value:function getAllRecordId(){for(var p=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],h=[],x=this.imp.getAllRecordId(p),M=x.length(),k=0;k<M;k++)h.push(new gt(x.at(k),mt.kMxCAD));return t.MxCpp.App.getImp().DestroyMdGeLongArray(x),h}},{key:"add",value:function add(t){if("string"==typeof t){if(t.length>0){var p=this.get(t,!1);if(p.isValid()){var h=p.getMcDbBlockTableRecord();return h&&h.isErased()&&h.unErase(),p}}var x=new Rr;return x.name=t,new gt(this.imp.add(x.getImp()),mt.kMxCAD)}return new gt(this.imp.add(t.getImp()),mt.kMxCAD)}},{key:"get",value:function get(t){var p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],h=tt.encodeToGb2312(t);return new gt(this.imp.get(h,p))}},{key:"has",value:function has(t){var p=tt.encodeToGb2312(t);return 0!=this.imp.get(p,!0)}}]),McDbBlockTable}(vt),Nr=function(p){_inherits$1(McDbRasterImageDef,p);var h=_createSuper$6(McDbRasterImageDef);function McDbRasterImageDef(p){var x;return _classCallCheck$1(this,McDbRasterImageDef),x=h.call(this,p),p||x.initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbRasterImageDef),x}return _createClass$1(McDbRasterImageDef,[{key:"sourceFileName",get:function get(){return tt.decodeFromGb2312(this.imp.sourceFileName())},set:function set(t){this.imp.setSourceFileName(tt.encodeToGb2312(t))}},{key:"saveToBase64",value:function saveToBase64(t){return this.imp.saveToBase64(t)}}]),McDbRasterImageDef}(vt),Gr=function(p){_inherits$1(McDbDictionary,p);var h=_createSuper$6(McDbDictionary);function McDbDictionary(p){var x;return _classCallCheck$1(this,McDbDictionary),x=h.call(this,p),p||x.initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbDictionary),x}return _createClass$1(McDbDictionary,[{key:"getAllObject",value:function getAllObject(){for(var p=[],h=this.imp.getAllObject(),x=h.length(),M=0;M<x;M++)p.push(new gt(h.at(M),mt.kMxCAD));return t.MxCpp.App.getImp().DestroyMdGeLongArray(h),p}},{key:"getAllObjectName",value:function getAllObjectName(){var p=this.imp.getAllObjectName(),h=new ln(p);return t.MxCpp.App.getImp().DestroyMdGeStringArray(p),h}},{key:"remove",value:function remove(t){var p=tt.encodeToGb2312(t);return this.imp.remove(p)}},{key:"addObject",value:function addObject(t,p){var h=tt.encodeToGb2312(t);return new gt(this.imp.addObject(h,p.getImp()),mt.kMxCAD)}},{key:"getAt",value:function getAt(t){var p=arguments.length>1&&void 0!==arguments[1]&&arguments[1],h=tt.encodeToGb2312(t);return new gt(this.imp.getAt(h,p),mt.kMxCAD)}}]),McDbDictionary}(vt),Fr=function(p){_inherits$1(McDbXrecord,p);var h=_createSuper$6(McDbXrecord);function McDbXrecord(p){var x;return _classCallCheck$1(this,McDbXrecord),x=h.call(this,p),p||x.initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbXrecord),x}return _createClass$1(McDbXrecord,[{key:"setData",value:function setData(t){return this.imp.setData(t.getImp())}},{key:"getData",value:function getData(){return new bt(this.imp.getData())}}]),McDbXrecord}(vt),Vr=function(p){_inherits$1(McDbGroup,p);var h=_createSuper$6(McDbGroup);function McDbGroup(p){var x;return _classCallCheck$1(this,McDbGroup),x=h.call(this,p),p||x.initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbGroup),x}return _createClass$1(McDbGroup,[{key:"description",get:function get(){return tt.decodeFromGb2312(this.imp.description())},set:function set(t){this.imp.setDescription(tt.encodeToGb2312(t))}},{key:"name",get:function get(){return tt.decodeFromGb2312(this.imp.name())},set:function set(t){this.imp.setName(tt.encodeToGb2312(t))}},{key:"isSelectable",get:function get(){return this.imp.isSelectable()},set:function set(t){this.imp.setSelectable(t)}},{key:"clear",value:function clear(){return this.imp.clear()}},{key:"append",value:function append(t){return this.imp.append(t.id)}},{key:"appendArray",value:function appendArray(t){var p=new un;return p.copyFormAryId(t),this.imp.appendArray(p.imp)}},{key:"has",value:function has(t){return this.imp.has(t.id)}},{key:"getAllEntityId",value:function getAllEntityId(){for(var p=[],h=this.imp.getAllEntityId(),x=h.length(),M=0;M<x;M++)p.push(new gt(h.at(M),mt.kMxCAD));return t.MxCpp.App.getImp().DestroyMdGeLongArray(h),p}},{key:"numEntities",value:function numEntities(){return this.imp.numEntities()}}]),McDbGroup}(vt);function angleTo(t,p,h,x){var M=t-h,k=p-x,I=0;return I=0==M?Math.PI/2:Math.atan(Math.abs(k/M)),M<0&&k>=0?I=Math.PI-I:M<0&&k<0?I=Math.PI+I:M>=0&&k<0&&(I=2*Math.PI-I),I}function findArcCenter(t,p,h){var x=(t.x+p.x)/2,M=(t.y+p.y)/2,k=Math.sqrt(Math.pow(t.x-x,2)+Math.pow(t.y-M,2))/Math.sin(h/2),I={x:p.x-t.x,y:p.y-t.y},N={x:I.x/Math.sqrt(Math.pow(I.x,2)+Math.pow(I.y,2)),y:I.y/Math.sqrt(Math.pow(I.x,2)+Math.pow(I.y,2))};return new nn(x+k*-N.y,M+k*N.x)}function getHostUrl(){var t=window.location.hostname;return"http"!=t.substring(0,4)&&(t=document.location.protocol+"//"+t),t}function calculateDistanceFromPointToLine(t,p,h){var x,M=p.clone(),k=h.clone(),I=t.clone(),N=I.sub(M),V=k.sub(M),ee=I.sub(k),te=N.crossProduct(V).length()/V.length(),re=N.dotProduct(V);return x=re<0?N.length():re>Math.pow(V.length(),2)?ee.length():te,Math.floor(x)}function selectLineSegmentFromPolylineByPoint(t,p){for(var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,x=t.numVerts(),M=0;M<t.numVerts();M++){var k=t.getPointAt(M).val,I=t.getPointAt(M+1).val,N=t.getBulgeAt(M);if(0===N){if(M+1===x&&t.isClosed&&(I=t.getPointAt(0).val),I&&calculateDistanceFromPointToLine(p,k,I)<h)return{start:k,end:I,startIndex:M,endIndex:M+1,bulge:N}}else if(I){var V=t.getParamAtPoint(k).val,ee=t.getParamAtPoint(I).val,te=t.getParamAtPoint(p).val;if(ee>te&&te>V)return{start:k,end:I,startIndex:M,endIndex:M+1,bulge:N}}}if(t.isClosed){var re=t.getPointAt(0).val,ne=t.getPointAt(t.numVerts()-1).val,ie=t.getBulgeAt(t.numVerts()-1);if(calculateDistanceFromPointToLine(p,ne,re)<h)return{start:ne,end:re,startIndex:t.numVerts()-1,endIndex:0,isClosed:!0,bulge:ie}}}function darkenColor(t,p){var h=t.r,x=t.g,M=t.b;h*=p,x*=p,M*=p,t.r=Math.max(Math.min(h,1),0),t.g=Math.max(Math.min(x,1),0),t.b=Math.max(Math.min(M,1),0)}function isSegmentStartCloserToPoint(t,p,h,x){var M=calculateDistanceFromPointToLine(x,t,h),k=calculateDistanceFromPointToLine(x,p,h);return!!isNaN(k)||!isNaN(M)&&(k===M?h.distanceTo(t)>h.distanceTo(p):M<k)}function createChamferedLinesFromSegments(t,p,h,x,M,k,I){var N=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],V=new Rt,ee=t.endPoint.sub(t.startPoint).normalize().mult(k),te=p.endPoint.sub(p.startPoint).normalize().mult(I);if(x){ee.negate();var re=h.clone().addvec(ee);N&&(t.endPoint=re),V.startPoint=re.clone()}else{var ne=h.clone().addvec(ee);N&&(t.startPoint=ne),V.startPoint=ne.clone()}if(M){te.negate();var ie=h.clone().addvec(te);N&&(p.endPoint=ie),V.endPoint=ie.clone()}else{var ae=h.clone().addvec(te);N&&(p.startPoint=ae),V.endPoint=ae.clone()}if(!(k<=0&&I<=0))return V}function createLineSegmentRoundJoin(p,h,x,M,k,I){var N=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],V=arguments.length>7&&void 0!==arguments[7]&&arguments[7],ee=h.startPoint,te=h.endPoint,re=x.startPoint,ne=x.endPoint,ie=M.sub(k?ee:te),ae=M.sub(I?re:ne),oe=p/Math.tan(ie.angleTo1(ae)/2),se=createChamferedLinesFromSegments(h,x,M,k,I,V?0:oe,V?0:oe,N);if(!se)return{segmentLine:se,chamferDist:oe};var ce=se.startPoint.sub(M).perpVector(),ue=se.endPoint.sub(M).perpVector();se.endPoint.addvec(ue);var le=new Rt(se.startPoint,se.startPoint.clone().addvec(ce)).IntersectWith(new Rt(se.endPoint,se.endPoint.clone().addvec(ue)),t.McDb.Intersect.kExtendBoth);if(!le.isEmpty()){var pe=le.at(0),he=pe.clone().addvec(M.sub(pe).normalize().mult(p)),fe=new Kt,de=Mt.calcBulge(se.startPoint,he,se.endPoint).val;return fe.computeArc(se.startPoint.x,se.startPoint.y,he.x,he.y,se.endPoint.x,se.endPoint.y),{arc:fe,bulge:de,segmentLine:se,chamferDist:oe,center:pe,midPoint:he}}}function calculateSlope(t,p){return(p.y-t.y)/(p.x-t.x)}function areLinesCollinear(t,p){var h=calculateSlope(t.startPoint,t.endPoint),x=calculateSlope(p.startPoint,p.endPoint);return isNaN(h)&&isNaN(x)?t.startPoint.x===p.startPoint.x:h===x}var Ur=function(){function MxAI(){_classCallCheck$1(this,MxAI),_defineProperty(this,"serverUrl",""),_defineProperty(this,"mapFun",{})}return _createClass$1(MxAI,[{key:"init",value:function init(t){"http://localhost"==t.substring(0,16)&&(t=getHostUrl()+t.substring(16)),this.serverUrl=t}},{key:"addFunction",value:function addFunction(t,p){this.mapFun[t]=p}},{key:"registTool",value:function registTool(t){if(0!=this.serverUrl.length){var p=new XMLHttpRequest,h=this.serverUrl+"/add_toolfun";p.open("POST",h),p.setRequestHeader("Content-Type","application/json"),p.send(JSON.stringify(t)),p.onreadystatechange=function(){4===p.readyState&&p.status}}}},{key:"reloadTools",value:function reloadTools(t){if(0!=this.serverUrl.length){var p=new XMLHttpRequest,h=this.serverUrl+"/reload_toolfun";p.open("POST",h),p.setRequestHeader("Content-Type","application/json"),p.send(JSON.stringify(t)),p.onreadystatechange=function(){4===p.readyState&&p.status}}}},{key:"chat_tool",value:function chat_tool(t){if(0!=this.serverUrl.length){var p=this,h={text:t},x=new XMLHttpRequest,M=this.serverUrl+"/post";x.open("POST",M),x.setRequestHeader("Content-Type","application/json"),x.send(JSON.stringify(h)),x.onreadystatechange=function(){if(4===x.readyState&&200===x.status)try{var t=JSON.parse(x.responseText).results;t&&t.name&&p.mapFun[t.name]&&p.mapFun[t.name](t.parameters)}catch(h){}}}}}]),MxAI}(),jr=function(){function McAppFunctonImp(){_classCallCheck$1(this,McAppFunctonImp),_defineProperty(this,"mapCppCall",{}),_defineProperty(this,"currentOptNum",1)}return _createClass$1(McAppFunctonImp,[{key:"init",value:function init(){var t=window,p=this;t.loadFonts_complete=function(t){p.mapCppCall[t]&&(p.mapCppCall[t](),delete p.mapCppCall[t])}}},{key:"loadFonts",value:function loadFonts(p,h,x,M){if(0!=p.length||0!=h.length||0!=x.length){var k=new ln;p.forEach((function(t){k.append(t)})),h.forEach((function(t){k.append("{big}"+t)})),x.forEach((function(t){k.append("{font}"+t)})),this.currentOptNum++,this.mapCppCall[this.currentOptNum]=M,t.MxCpp.App.getImp().loadFonts(k.imp,this.currentOptNum)}else M()}}]),McAppFunctonImp}(),Wr=new jr,zr=function(t){return t[t.EMSCRIPTEN_FETCH_LOAD_TO_MEMORY=1]="EMSCRIPTEN_FETCH_LOAD_TO_MEMORY",t[t.EMSCRIPTEN_FETCH_PERSIST_FILE=4]="EMSCRIPTEN_FETCH_PERSIST_FILE",t[t.EMSCRIPTEN_FETCH_APPEND=8]="EMSCRIPTEN_FETCH_APPEND",t[t.EMSCRIPTEN_FETCH_REPLACE=16]="EMSCRIPTEN_FETCH_REPLACE",t}(zr||{}),Hr=function(){function McObject(t){_classCallCheck$1(this,McObject),_defineProperty(this,"imp",void 0),_defineProperty(this,"event",{}),_defineProperty(this,"currentFileName",""),_defineProperty(this,"currentOriginalFileName",""),_defineProperty(this,"firstTimeOpenFile",!0),_defineProperty(this,"authorized_service",""),_defineProperty(this,"isInitMxObject",!1),this.imp=t}return _createClass$1(McObject,[{key:"creaeCallId",value:function creaeCallId(){return Math.round(1e7*Math.random())}},{key:"setAttribute",value:function setAttribute(t){return this.imp.setAttribute(JSON.stringify(t))}},{key:"getMxDrawObject",value:function getMxDrawObject(){return this.imp.mxdrawObject}},{key:"mxdraw",get:function get(){return this.imp.mxdrawObject}},{key:"getImp",value:function getImp(){return this.imp}},{key:"init",value:function init(t){this.imp=t}},{key:"create",value:function create(t){Ti(t,this)}},{key:"on",value:function on(t,p){if(this.event[t])if(this.event[t]instanceof Array)this.event[t].includes(p)||this.event[t].push(p);else{var h=this.event[t];if(h==p)return;this.event[t]=[],this.event[t].push(h),this.event[t].push(p)}else this.event[t]=p;this.isInitMxObject&&(this.event=this.synchronizeMxDrawEvent(this.event))}},{key:"off",value:function off(t,p){if(this.event[t])if(p)if(this.event[t]instanceof Array){var h=this.event[t].indexOf(p);if(h<0)return;this.event[t].splice(h,1)}else this.event[t]===p&&(this.event[t]=[]);else this.event[t]=[]}},{key:"callEvent",value:function callEvent(t,p){try{var h=this.event[t];if(!h)return!1;if(h instanceof Array){var x=!1;return h.forEach((function(t){x=t(p)})),x}return h(p)}catch(M){throw M}}},{key:"synchronizeMxDrawEvent",value:function synchronizeMxDrawEvent(t){var p=this.getMxDrawObject().getMxObjectImplement(),h={selectChange:!0,openFileComplete:!0,init:!0,init_mxdraw:!0,init_mxcad:!0,init_before_mxdraw:!0},x={};for(var M in t){var k=t[M];h[M]?x[M]=k:k instanceof Array?k.forEach((function(t){p.addEvent(M,t)})):p.addEvent(M,k)}return x}},{key:"initMxObject",value:function initMxObject(t){var h=this;this.isInitMxObject=!0,t.tmp||(t.tmp=new p.MxDrawObject(t)),this.imp.mxdrawObject=t.tmp,t.addEvent("selectChange",(function(p){var x=[];p.forEach((function(t){x.push(new gt(t,mt.kMxCAD))})),t.getMxAllSelect().forEach((function(t){x.push(new gt(t,mt.kMxDraw))})),h.callEvent("selectChange",x)})),t.addEvent("mxdrawSelectChange",(function(p){var x=[];p.forEach((function(t){x.push(new gt(t,mt.kMxDraw))})),t.getMxCADAllSelect().forEach((function(t){x.push(new gt(t,mt.kMxCAD))})),h.callEvent("selectChange",x)}));var x=this;t.addEvent("openFileComplete",(function(){h.callEvent("openFileComplete",x)})),this.event=this.synchronizeMxDrawEvent(this.event)}},{key:"regen",value:function regen(){var t=this,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;p<=0?this.imp.regen():setTimeout((function(){t.imp.regen(),t.updateDisplay(!1)}),p)}},{key:"zoomAll",value:function zoomAll(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],p=this.database.currentSpace.getBoundingBox();return!!p.ret&&(this.getMxDrawObject().zoomW(p.minPt.toVector3(),p.maxPt.toVector3(),void 0,void 0,t),!0)}},{key:"zoomScale",value:function zoomScale(t){this.getMxDrawObject().zoomScale(t)}},{key:"addCurrentSelect",value:function addCurrentSelect(t){var p=this,h=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t instanceof Array){var x=!1,M=!1;t.forEach((function(t){t.type==mt.kMxDraw?p.getMxDrawObject().addMxCurrentSelect(t.id,!1,h)&&(x=!0):t.type==mt.kMxCAD&&p.getMxDrawObject().addMxCADCurrentSelect(t.id,!1,h)&&(M=!0)})),x&&this.getMxDrawObject().fireSelectChange(!1),M&&this.getMxDrawObject().fireSelectChange(!0)}else t.type==mt.kMxDraw?this.getMxDrawObject().addMxCurrentSelect(t.id,!0,h):t.type==mt.kMxCAD&&this.getMxDrawObject().addMxCADCurrentSelect(t.id,!0,h)}},{key:"clearMxCurrentSelect",value:function clearMxCurrentSelect(){this.getMxDrawObject().clearMxCurrentSelect()}},{key:"zoomW",value:function zoomW(t,p){this.getMxDrawObject().zoomW(t.toVector3(),p.toVector3())}},{key:"zoomCenter",value:function zoomCenter(t,p){this.getMxDrawObject().zoomCenter(t,p)}},{key:"zoomAngle",value:function zoomAngle(t){this.getMxDrawObject().setViewAngle(t),this.updateDisplay(!1,100)}},{key:"openWebFile",value:function openWebFile(p,h){var x=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],M=arguments.length>3?arguments[3]:void 0,k=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,I=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],N=this.imp.mxdrawObject,V=Math.round(1e7*Math.random());if(h){var ee=window;ee["mx_exception handling"]=function(){ee["mx_exception handling"]=void 0,h(-10)};N.addEvent("openFileComplete",(function funOpenCall(t,p){V==p&&(ee["mx_exception handling"]=void 0,N.removeEventFuction("openFileComplete",funOpenCall),h(t))}))}this.currentFileName=p.split("/").pop(),this.currentOriginalFileName=this.currentFileName;var te="";if(M&&(te=JSON.stringify(M)),this.firstTimeOpenFile||this.getMxDrawObject().clearAllObject(),this.firstTimeOpenFile=!1,3==t.MxCpp.App.getImp().getCodeVersion()){var re="";if(0!=this.authorized_service.length)if("same_current_page_url"==this.authorized_service){var ne=window.location.port;re="80"==ne?getHostUrl()+"/create_app_param":getHostUrl()+":"+ne+"/create_app_param"}else re=this.authorized_service;else re=getHostUrl()+":3090/create_app_param";var ie=this,ae=new XMLHttpRequest;return ae.open("POST",re),ae.setRequestHeader("Content-Type","application/json"),ae.onreadystatechange=function(){200===ae.status?4===ae.readyState&&(ae.responseText&&0!=ae.responseText.length?ie.imp.openWebFile(ae.responseText,x,V,te,k,I):ie.imp.openWebFile("",x,V,te,k,I)):ie.imp.openWebFile("",x,V,te,k,I)},ae.send(JSON.stringify({param:t.MxCpp.App.getImp().createAppParam(p)})),!0}return this.imp.openWebFile(p,x,V,te,k,I)}},{key:"newFile",value:function newFile(){return this.currentFileName="",this.currentOriginalFileName="",this.getMxDrawObject().clearAllObject(),this.imp.newFile()}},{key:"insertBlock",value:function insertBlock(t,p){var h=this,x=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],M=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,k=arguments.length>4&&void 0!==arguments[4]&&arguments[4],I=arguments.length>5&&void 0!==arguments[5]&&arguments[5],N=this.imp.mxdrawObject,V=Math.round(1e7*Math.random());return new Promise((function(ee){N.addEvent("insertBlockComplete",(function funCall(t){t&&0!=t.length||ee(new gt);var p=JSON.parse(t);p.callid==V&&(N.removeEventFuction("insertBlockComplete",funCall),p.result,ee(new gt(p.blkrecid,mt.kMxCAD)))}));h.imp.insertBlock(t,tt.encodeToGb2312(p),x,V,"",M,k,I)}))}},{key:"getCurrentFileName",value:function getCurrentFileName(){return this.currentFileName}},{key:"setCurrentFileName",value:function setCurrentFileName(t){this.currentFileName=t}},{key:"getCurrentOriginaFileName",value:function getCurrentOriginaFileName(){return this.currentOriginalFileName}},{key:"setCurrentOriginaFileName",value:function setCurrentOriginaFileName(t){this.currentOriginalFileName=t}},{key:"saveFileToUrl",value:function saveFileToUrl(p,h,x,M){var k=this.imp.saveFileToMemory();if(0==k.getSize())return h(-1,"save failed"),!1;var I=k.getData(),N=k.getSize(),V=t.MxCpp.mxcadassemblyimp.HEAPU8.subarray(I,I+N),ee=new ArrayBuffer(k.getSize()),te=new Uint8Array(ee);return te.set(V),k.clear(),se.postMemoryFile(te,p,x||"temp.mxweb",h,M),!0}},{key:"saveFile",value:function saveFile(t,p){var h=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],x=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],M=arguments.length>4?arguments[4]:void 0;t||0==(t=this.getCurrentFileName()).length&&(t="temp_empty.mxweb"),(-1==t.indexOf(".")||".mxweb"!=t.substring(t.length-6))&&(t+=".mxweb");var k=window;k.mx_saveFile_call=function(M){if(p&&p(M),M){var I;if(h)I=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?new Blob([M.buffer],{type:"application/octet-stream"}):new Blob([M.buffer],{type:"application/octet-binary"}),x?se.saveAsFileDialog({blob:I,filename:t,types:[{description:"mxweb File",accept:{"application/octet-stream":[".mxweb"]}}]}):se.downloadFile(I,t);k.mx_saveFile_call=null}};var I="";return M&&(I=JSON.stringify(M)),this.imp.saveFile(t,I)}},{key:"getDatabase",value:function getDatabase(){return this.imp.McDbDatabase||(this.imp.McDbDatabase=new Er(this.imp.GetDatabase())),this.imp.McDbDatabase}},{key:"database",get:function get(){return this.getDatabase()}},{key:"setBrowse",value:function setBrowse(t){this.imp.setBrowse(t),t&&p.MxFun.setIniset({ForbiddenDynInput:!0})}},{key:"getSysVarString",value:function getSysVarString(t){return this.imp.GetSysVarString(t)}},{key:"setSysVarString",value:function setSysVarString(t,p){return this.imp.SetSysVarString(t,p)}},{key:"getSysVarDouble",value:function getSysVarDouble(t){return this.imp.GetSysVarDouble(t)}},{key:"getSysVarPoint",value:function getSysVarPoint(t){return new nn(this.imp.GetSysVarPoint(t))}},{key:"setSysVarPoint",value:function setSysVarPoint(t,p){return this.imp.SetSysVarPoint(t,p.imp,!1)}},{key:"setSysVarPoint2d",value:function setSysVarPoint2d(t,p){return this.imp.SetSysVarPoint(t,p.imp,!0)}},{key:"setSysVarDouble",value:function setSysVarDouble(t,p){return this.imp.SetSysVarDouble(t,p)}},{key:"getSysVarLong",value:function getSysVarLong(t){return this.imp.GetSysVarLong(t)}},{key:"setSysVarLong",value:function setSysVarLong(t,p){return this.imp.SetSysVarLong(t,p)}},{key:"drawColor",get:function get(){return new Sr(this.imp.GetDrawColor())},set:function set(t){this.imp.SetDrawColor(t.getImp())}},{key:"drawColorIndex",get:function get(){return this.imp.GetDrawColor().colorIndex},set:function set(t){var p=new Sr;p.setColorIndex(t),this.imp.SetDrawColor(p.getImp())}},{key:"drawLineWeight",get:function get(){return this.imp.GetDrawLineWeight()},set:function set(t){this.imp.SetDrawLineWeight(t)}},{key:"drawLineTypeScale",get:function get(){return this.imp.GetDrawLineTypeScale()},set:function set(t){this.imp.SetDrawLineTypeScale(t)}},{key:"drawLinetype",get:function get(){return tt.decodeFromGb2312(this.imp.GetDrawLinetype())},set:function set(t){this.imp.SetDrawLinetype(tt.encodeToGb2312(t))}},{key:"drawTextStyle",get:function get(){return tt.decodeFromGb2312(this.imp.GetDrawTextStyle())},set:function set(t){this.imp.SetDrawTextStyle(tt.encodeToGb2312(t))}},{key:"drawLayer",get:function get(){return tt.decodeFromGb2312(this.imp.GetDrawLayer())},set:function set(t){this.imp.SetDrawLayer(tt.encodeToGb2312(t))}},{key:"addLayer",value:function addLayer(t){return new gt(this.imp.AddLayer(tt.encodeToGb2312(t)))}},{key:"addTextStyle",value:function addTextStyle(t,p,h){var x=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new gt(this.imp.AddTextStyle(tt.encodeToGb2312(t),tt.encodeToGb2312(p),tt.encodeToGb2312(h),x))}},{key:"AddTureTypeTextStyle",value:function AddTureTypeTextStyle(t){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return new gt(this.imp.AddTureTypeTextStyle(tt.encodeToGb2312(t),tt.encodeToGb2312(p),h))}},{key:"addLinetype",value:function addLinetype(t,p){return new gt(this.imp.AddLinetype(tt.encodeToGb2312(t),tt.encodeToGb2312(p)))}},{key:"addLinetypeEx",value:function addLinetypeEx(t,p){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return new gt(this.imp.AddLinetypeEx(tt.encodeToGb2312(t),tt.encodeToGb2312(p),tt.encodeToGb2312(h)))}},{key:"drawLine",value:function drawLine(t,p,h,x){return new gt(this.imp.DrawLine(t,p,0,h,x,0))}},{key:"drawLine3d",value:function drawLine3d(t,p,h,x,M,k){return new gt(this.imp.DrawLine(t,p,h,x,M,k))}},{key:"addDimStyle",value:function addDimStyle(t,p,h,x,M){return new gt(this.imp.AddDimStyle(tt.encodeToGb2312(t),tt.encodeToGb2312(p),tt.encodeToGb2312(h),tt.encodeToGb2312(x),tt.encodeToGb2312(M)))}},{key:"drawDimStyle",get:function get(){return tt.decodeFromGb2312(this.imp.GetDrawDimStyle())},set:function set(t){this.imp.SetDrawDimStyle(tt.encodeToGb2312(t))}},{key:"pathMakeExclude",value:function pathMakeExclude(t){this.imp.PathMakeExclude(t)}},{key:"addPatternDefinition",value:function addPatternDefinition(t,p){this.imp.AddPatternDefinition(tt.encodeToGb2312(t),p)}},{key:"drawPatternDefinition",get:function get(){return tt.decodeFromGb2312(this.imp.GetPatternDefinition())},set:function set(t){this.imp.SetPatternDefinition(tt.encodeToGb2312(t))}},{key:"drawLineWidth",get:function get(){return this.imp.GetDrawLineWidth()},set:function set(t){this.imp.SetDrawLineWidth(t)}},{key:"drawUseDefaultProperties",get:function get(){return this.imp.GetDrawUseDefaultProperties()},set:function set(t){this.imp.SetDrawUseDefaultProperties(t)}},{key:"drawArc",value:function drawArc(t,p,h,x,M){return new gt(this.imp.DrawArc(t,p,h,x,M))}},{key:"drawArc2",value:function drawArc2(t,p,h,x,M,k){return new gt(this.imp.DrawArc2(t,p,h,x,M,k))}},{key:"drawArc3",value:function drawArc3(t,p,h,x,M){return new gt(this.imp.DrawArc3(t,p,h,x,M))}},{key:"drawCircle",value:function drawCircle(t,p,h){return new gt(this.imp.DrawCircle(t,p,h))}},{key:"loadImage",value:function loadImage(t,p){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.imp.mxdrawObject.getMxObjectImplement().loadMxCADImage(t,p,h)}},{key:"drawImage",value:function drawImage(t,p,h,x,M,k){var I=arguments.length>6&&void 0!==arguments[6]&&arguments[6],N=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,V=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1;return new gt(this.imp.DrawImage(t,p,h,x,M,tt.encodeToGb2312(k),I,N,V))}},{key:"addImageDefine",value:function addImageDefine(t){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",h=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new gt(this.imp.addImageDefine(tt.encodeToGb2312(t),tt.encodeToGb2312(p),h))}},{key:"showLineWeight",value:function showLineWeight(t){var p=this.imp.showLineWeight(t);return this.updateDisplay(!1),p}},{key:"loadDwgBackground",value:function loadDwgBackground(t,p){var h=this,x=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,M=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],k=this.creaeCallId(),I=this.imp.mxdrawObject;I.addEvent("load_dwg_gackground_result",(function funOpenCall(t){(t=JSON.parse(t)).callid==k&&(I.removeEventFuction("load_dwg_gackground_result",funOpenCall),p(1==t.l_param),1==t.l_param&&M&&h.regen(100))})),this.imp.loadDwgBackground(t,x,k,M)}},{key:"getBackgroundEntity",value:function getBackgroundEntity(){return new tr(this.imp.GetBackgroundEntity())}},{key:"clearDwgBackground",value:function clearDwgBackground(){this.getBackgroundEntity().clearAll()}},{key:"addSystemVarNameForEvent",value:function addSystemVarNameForEvent(t){var p=this;t.forEach((function(t){p.imp.addSystemVarNameForEvent(t)}))}},{key:"drawEllipse",value:function drawEllipse(t,p,h,x,M){return new gt(this.imp.DrawEllipse(t,p,h,x,M))}},{key:"drawEllipseArc",value:function drawEllipseArc(t,p,h,x,M,k,I){return new gt(this.imp.DrawEllipseArc(t,p,h,x,M,k,I))}},{key:"drawPoint",value:function drawPoint(t,p){return new gt(this.imp.DrawPoint(t,p))}},{key:"drawSolid",value:function drawSolid(t,p,h,x,M,k,I,N){return new gt(this.imp.DrawSolid(t,p,h,x,M,k,I,N))}},{key:"drawMText",value:function drawMText(t,p,h,x,M,k,I){return new gt(this.imp.DrawMText(t,p,tt.encodeToGb2312(h),x,M,k,I))}},{key:"drawText",value:function drawText(t,p,h,x,M,k,I){return new gt(this.imp.DrawText(t,p,tt.encodeToGb2312(h),x,M,k,I))}},{key:"drawBlockReference",value:function drawBlockReference(t,p,h,x,M){return new gt(this.imp.DrawBlockReference(t,p,tt.encodeToGb2312(h),x,M))}},{key:"drawDimAligned",value:function drawDimAligned(t,p,h,x,M,k){return new gt(this.imp.DrawDimAligned(t,p,h,x,M,k))}},{key:"drawDimAngular",value:function drawDimAngular(t,p,h,x,M,k,I,N){return new gt(this.imp.DrawDimAngular(t,p,h,x,M,k,I,N))}},{key:"drawDimDiametric",value:function drawDimDiametric(t,p,h,x,M){return new gt(this.imp.DrawDimDiametric(t,p,h,x,M))}},{key:"drawDimRotated",value:function drawDimRotated(t,p,h,x,M,k,I){return new gt(this.imp.DrawDimRotated(t,p,h,x,M,k,I))}},{key:"drawDimOrdinate",value:function drawDimOrdinate(t,p,h,x,M){return new gt(this.imp.DrawDimOrdinate(t,p,h,x,M))}},{key:"drawDimRadial",value:function drawDimRadial(t,p,h,x,M){return new gt(this.imp.DrawDimRadial(t,p,h,x,M))}},{key:"pathMoveTo",value:function pathMoveTo(t,p){this.imp.PathMoveTo(t,p)}},{key:"pathMoveToEx",value:function pathMoveToEx(t,p,h,x,M){this.imp.PathMoveToEx(t,p,h,x,M)}},{key:"pathLineTo",value:function pathLineTo(t,p){this.imp.PathLineTo(t,p)}},{key:"pathLineToEx",value:function pathLineToEx(t,p,h,x,M){this.imp.PathLineToEx(t,p,h,x,M)}},{key:"pathCircle",value:function pathCircle(t,p,h){var x=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,M=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return this.imp.PathCircle(t,p,h,x,M)}},{key:"drawPathToPolyline",value:function drawPathToPolyline(){return new gt(this.imp.DrawPathToPolyline())}},{key:"drawPathToSpline",value:function drawPathToSpline(){return new gt(this.imp.DrawPathToSpline())}},{key:"pathMakeClosed",value:function pathMakeClosed(){this.imp.PathMakeClosed()}},{key:"drawPathToHatch",value:function drawPathToHatch(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new gt(this.imp.DrawPathToHatch(t))}},{key:"drawEntity",value:function drawEntity(t){var p=arguments.length>1&&void 0!==arguments[1]&&arguments[1],h=t.syncData(!0),x=new gt(this.imp.DrawEntity(t.getImp(),p));return h&&ur.getObjectFormId(x),x}},{key:"drawHatch",value:function drawHatch(t){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new gt(this.imp.DrawHatch(t.getImp(),p))}},{key:"objectIdToObject",value:function objectIdToObject(p){return t.MxCpp.App.objectIdToObject(p)}},{key:"destroyObject",value:function destroyObject(p){p&&t.MxCpp.App.getImp().DestroyObject(p)}},{key:"getAllLayoutName",value:function getAllLayoutName(){return new ln(this.imp.GetAllLayoutName())}},{key:"setCurrentLayout",value:function setCurrentLayout(t){this.imp.SetCurrentLayout(tt.encodeToGb2312(t))}},{key:"getMxCpp",value:function getMxCpp(){return t.MxCpp}},{key:"getViewCADCoord",value:function getViewCADCoord(){var t=this.getMxDrawObject().getViewDocCoord();return{pt1:new nn(t.pt1),pt2:new nn(t.pt2),pt3:new nn(t.pt3),pt4:new nn(t.pt4)}}},{key:"updateDisplay",value:function updateDisplay(){var t=this,p=arguments.length>0&&void 0!==arguments[0]&&arguments[0],h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;h<=0?this.imp.mxdrawObject.updateDisplay(p):setTimeout((function(){t.imp.mxdrawObject.updateDisplay(p)}),h)}},{key:"updateLayerDisplayStatus",value:function updateLayerDisplayStatus(){this.imp.UpdateLayerDisplayStatus()}},{key:"initRegist",value:function initRegist(t){this.imp.initRegist(t)}},{key:"iniAuthorizedService",value:function iniAuthorizedService(t){this.imp.initAuthorizedService(t),this.authorized_service=t}},{key:"isTryVersion",value:function isTryVersion(){return this.imp.isTryVersion()}},{key:"setViewBackgroundColor",value:function setViewBackgroundColor(t,p,h){var x=this.getMxDrawObject();return x&&(t&&p&&h?x.setViewColor(t<<16|p<<8|h):x.setViewColor(t)),t&&p&&h?this.imp.setViewBackgroundColor(t,p,h):this.imp.setViewBackgroundColor((16711680&t)>>16,(65280&t)>>8,255&t)}},{key:"getViewBackgroundColor",value:function getViewBackgroundColor(){return this.imp.getViewBackgroundColor()}},{key:"getCurrentDatabaseDrawColor",value:function getCurrentDatabaseDrawColor(){var t=this.getDatabase().getImp().GetCurrentlyDrawColor(),p=this.getMxDrawObject().isWhiteViewColor(),h=t.at(0),x=t.at(1),M=t.at(2);p?255==h&&255==x&&255==M&&(h=0,x=0,M=0):0==h&&0==x&&0==M&&(h=255,x=255,M=255);var k=new THREE.Color;return k.setRGB(h/255,x/255,M/255),k}},{key:"undo",value:function undo(){this.imp.undo(),this.updateDisplay(!1)}},{key:"redo",value:function redo(){this.imp.redo(),this.updateDisplay()}},{key:"undoMark",value:function undoMark(){this.imp.undoMark()}}]),McObject}(),$r=function(){function McAppType(){_classCallCheck$1(this,McAppType),_defineProperty(this,"imp",void 0),_defineProperty(this,"MxCADAssist",void 0),_defineProperty(this,"objectIdToObjectCalls",{}),_defineProperty(this,"classNameToCreateCalls",{}),_defineProperty(this,"shxFonts",["txt.shx"]),_defineProperty(this,"shxBigFonts",["hztxt.shx"]),_defineProperty(this,"trueFonts",{syadobe:{name:"syadobe",zhname:"",file:"syadobe.otf"}}),_defineProperty(this,"dMcGeBakTol",-1)}return _createClass$1(McAppType,[{key:"init",value:function init(p){this.imp=p,sn.kZAxis=new sn(0,0,1),sn.kNegateZAxis=new sn(0,0,-1),sn.kXAxis=new sn(1,0,0),sn.kYAxis=new sn(0,1,0),sn.kIdentity=new sn(0,0,0),nn.kOrigin=new nn(0,0,0),cn.kIdentity=new cn,this.MxCADAssist=new t.MxCpp.mxcadassemblyimp.MxDrawAssist,this.initCalls(),Wr.init()}},{key:"getImp",value:function getImp(){return this.imp}},{key:"getLastCallResult",value:function getLastCallResult(){return this.imp.getLastCallResult()}},{key:"destroyObject",value:function destroyObject(t){this.imp.DestroyObject(t)}},{key:"getCurrentMxCAD",value:function getCurrentMxCAD(){var t=this.imp.GetCurrentMxDraw();return t.McObject||(t.McObject=new Hr(this.imp.GetCurrentMxDraw())),t.McObject}},{key:"mcedRGB2Index",value:function mcedRGB2Index(t,p,h){var x=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this.imp.mcedRGB2Index(t,p,h,x)}},{key:"setDefaultViewBackgroundColor",value:function setDefaultViewBackgroundColor(t,p,h){return this.imp.setDefaultViewBackgroundColor(t,p,h)}},{key:"objectIdIsKindOf",value:function objectIdIsKindOf(t,p){return this.imp.ObjectIdIsKindOf(t,p)}},{key:"initCalls",value:function initCalls(){var t=this;this.objectIdToObjectCalls.McDbCurve=function(p){return new Et(t.imp.ObjectIdToMdDbCurve(p))},this.objectIdToObjectCalls.McDbEntity=function(p){return new Lt(t.imp.ObjectIdToMdDbEntity(p))},this.objectIdToObjectCalls.McDbDimension=function(p){return new zt(t.imp.ObjectIdToMdDbDimension(p))},this.classNameToCreateCalls.McDbDimension=function(){return new zt},this.objectIdToObjectCalls.McDbLine=function(p){return new Rt(t.imp.ObjectIdToMdDbLine(p))},this.classNameToCreateCalls.McDbLine=function(){return new Rt},this.objectIdToObjectCalls.McDbText=function(p){return new Bt(t.imp.ObjectIdToMdDbText(p))},this.classNameToCreateCalls.McDbText=function(){return new Bt},this.objectIdToObjectCalls.McDbAttribute=function(p){return new Nt(t.imp.ObjectIdToMdDbAttribute(p))},this.classNameToCreateCalls.McDbAttribute=function(){return new Nt},this.objectIdToObjectCalls.McDbAttributeDefinition=function(p){return new Gt(t.imp.ObjectIdToMdDbAttributeDefinition(p))},this.classNameToCreateCalls.McDbAttributeDefinition=function(){return new Gt},this.objectIdToObjectCalls.McDbPolyline=function(p){return new Ut(t.imp.ObjectIdToMdDbPolyline(p))},this.classNameToCreateCalls.McDbPolyline=function(){return new Ut},this.objectIdToObjectCalls.McDbCircle=function(p){return new Vt(t.imp.ObjectIdToMdDbCircle(p))},this.classNameToCreateCalls.McDbCircle=function(){return new Vt},this.objectIdToObjectCalls.McDbArc=function(p){return new Kt(t.imp.ObjectIdToMdDbArc(p))},this.classNameToCreateCalls.McDbArc=function(){return new Kt},this.objectIdToObjectCalls.McDbBlockReference=function(p){return new jt(t.imp.ObjectIdToMdDbBlockReference(p))},this.classNameToCreateCalls.McDbBlockReference=function(){return new jt},this.objectIdToObjectCalls.McDbSpatialFilter=function(p){return new Wt(t.imp.ObjectIdToMdDbSpatialFilter(p))},this.classNameToCreateCalls.McDbSpatialFilter=function(){return new Wt},this.objectIdToObjectCalls.McDbAlignedDimension=function(p){return new Ht(t.imp.ObjectIdToMdDbAlignedDimension(p))},this.classNameToCreateCalls.McDbAlignedDimension=function(){return new Ht},this.objectIdToObjectCalls.McDbRotatedDimension=function(p){return new $t(t.imp.ObjectIdToMdDbRotatedDimension(p))},this.classNameToCreateCalls.McDbRotatedDimension=function(){return new $t},this.objectIdToObjectCalls.McDb2LineAngularDimension=function(p){return new Yt(t.imp.ObjectIdToMdDb2LineAngularDimension(p))},this.classNameToCreateCalls.McDb2LineAngularDimension=function(){return new Yt},this.objectIdToObjectCalls.McDbMText=function(p){return new Ft(t.imp.ObjectIdToMdDbMText(p))},this.classNameToCreateCalls.McDbMText=function(){return new Ft},this.objectIdToObjectCalls.McDbEllipse=function(p){return new Xt(t.imp.ObjectIdToMdDbEllipse(p))},this.classNameToCreateCalls.McDbEllipse=function(){return new Xt},this.objectIdToObjectCalls.McDbPoint=function(p){return new qt(t.imp.ObjectIdToMdDbPoint(p))},this.classNameToCreateCalls.McDbPoint=function(){return new qt},this.objectIdToObjectCalls.McDbBlockTableRecord=function(p){return new Rr(t.imp.ObjectIdToMdDbBlockTableRecord(p))},this.classNameToCreateCalls.McDbBlockTableRecord=function(){return new Rr},this.objectIdToObjectCalls.McDbLayerTableRecord=function(p){return new Dr(t.imp.ObjectIdToMdDbLayerTableRecord(p))},this.classNameToCreateCalls.McDbLayerTableRecord=function(){return new Dr},this.objectIdToObjectCalls.McDbLinetypeTableRecord=function(p){return new Tr(t.imp.ObjectIdToMdDbLinetypeTableRecord(p))},this.classNameToCreateCalls.McDbLinetypeTableRecord=function(){return new Tr},this.objectIdToObjectCalls.McDbDimStyleTableRecord=function(p){return new Ar(t.imp.ObjectIdToMdDbDimStyleTableRecord(p))},this.classNameToCreateCalls.McDbDimStyleTableRecord=function(){return new Ar},this.objectIdToObjectCalls.McDbTextStyleTableRecord=function(p){return new kr(t.imp.ObjectIdToMdDbTextStyleTableRecord(p))},this.classNameToCreateCalls.McDbTextStyleTableRecord=function(){return new kr},this.objectIdToObjectCalls.McDbHatch=function(p){return new Zt(t.imp.ObjectIdToMdDbHatch(p))},this.classNameToCreateCalls.McDbHatch=function(){return new Zt},this.objectIdToObjectCalls.McDbProxyEntity=function(p){return new Jt(t.imp.ObjectIdToMdDbProxyEntity(p))},this.classNameToCreateCalls.McDbProxyEntity=function(){return new Jt},this.objectIdToObjectCalls.McDbRasterImage=function(p){return new Qt(t.imp.ObjectIdToMdDbRasterImage(p))},this.classNameToCreateCalls.McDbRasterImage=function(){return new Qt},this.objectIdToObjectCalls.McDbRasterImageDef=function(p){return new Nr(t.imp.ObjectIdToMdDbRasterImageDef(p))},this.classNameToCreateCalls.McDbRasterImageDef=function(){return new Nr},this.objectIdToObjectCalls.McDbWipeout=function(p){return new er(t.imp.ObjectIdToMdDbWipeout(p))},this.classNameToCreateCalls.McDbWipeout=function(){return new er},this.objectIdToObjectCalls.McDbSpline=function(p){return new rr(t.imp.ObjectIdToMdDbSpline(p))},this.classNameToCreateCalls.McDbSpline=function(){return new rr},this.objectIdToObjectCalls.McDbDictionary=function(p){return new Gr(t.imp.ObjectIdToMdDbDictionary(p))},this.classNameToCreateCalls.McDbDictionary=function(){return new Gr},this.objectIdToObjectCalls.McDbXrecord=function(p){return new Fr(t.imp.ObjectIdToMdDbXrecord(p))},this.classNameToCreateCalls.McDbXrecord=function(){return new Fr},this.objectIdToObjectCalls.McDbGroup=function(p){return new Vr(t.imp.ObjectIdToMdDbGroup(p))},this.classNameToCreateCalls.McDbGroup=function(){return new Vr}}},{key:"objectIdToObject",value:function objectIdToObject(p){if(!p)return null;var h=this.imp.ObjectIdToObjectName(p);if(this.objectIdToObjectCalls[h])return this.objectIdToObjectCalls[h](p);if("McDbCustomEntity"==h){var x=this.imp.ObjectIdToMdDbCustomEntity(p);if(!x)return null;var M=x.getCustomEntityid(),k=x.GetDatabaseIndexId();return t.MxCpp.App.destroyObject(x),0==M||0==k?null:ur.getObject(M,k)}if(this.imp.ObjectIdIsKindOf(p,"McDbCurve"))return this.objectIdToObjectCalls.McDbCurve(p);if(this.imp.ObjectIdIsKindOf(p,"McDbDimension"))return this.objectIdToObjectCalls.McDbDimension(p);if(this.imp.ObjectIdIsKindOf(p,"McDbEntity"))return this.objectIdToObjectCalls.McDbEntity(p);var I=this.imp.ObjectIdToMdObject(p);return new vt(I)}},{key:"createCloneObject",value:function createCloneObject(p){if(!p)return null;var h=p.getObjectName();if("McDbCustomEntity"==h){var x=p.getCustomEntityid(),M=p.GetDatabaseIndexId(),k=null;return 0==x||0==M?(k=ur.createMxEntity(p.getCustomEntityTypeName()))&&(k.getImp().ConnectionTempObject(p),k.syncData(!1)):k=ur.getObject(x,M),t.MxCpp.App.destroyObject(p),k}var I=null;return this.classNameToCreateCalls[h]?I=this.classNameToCreateCalls[h]():p.isKindOf("McDbCurve")?(I=new Et).initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbCurve):p.isKindOf("McDbEntity")&&(I=new Lt).initTempObject(new t.MxCpp.mxcadassemblyimp.MdDbEntity),I?(I.getImp().ConnectionTempObject(p),t.MxCpp.App.destroyObject(p),I):new vt(p)}},{key:"setFontFilePath",value:function setFontFilePath(t){this.imp.setFontFilePath(t)}},{key:"setDefaultTrueTypeFontFile",value:function setDefaultTrueTypeFontFile(t){this.imp.setDefaultTrueTypeFontFile(t)}},{key:"addNetworkLoadingFont",value:function addNetworkLoadingFont(t){var p,h=this,x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],M=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"string"==typeof t?(this.imp.addNetworkLoadingFont(t),M||(this.shxFonts=[]),this.shxFonts.push(t)):(M?(p=this.shxFonts).push.apply(p,_toConsumableArray(t)):this.shxFonts=t,t.forEach((function(t){h.imp.addNetworkLoadingFont(t)})));x.forEach((function(t){h.imp.addFontsLoadOnInitialization(t,0)}))}},{key:"IniSet",value:function IniSet(t){return t.UseUtf8&&(tt.isUseUtf8=t.UseUtf8),this.imp.IniSet(JSON.stringify(t))}},{key:"setMcGeTol",value:function setMcGeTol(t){return this.dMcGeBakTol=this.imp.setMcGeTol(t),this.dMcGeBakTol}},{key:"restoreMcGeTol",value:function restoreMcGeTol(){this.dMcGeBakTol>0&&(this.imp.setMcGeTol(this.dMcGeBakTol),this.dMcGeBakTol=-1)}},{key:"addNetworkLoadingBigFont",value:function addNetworkLoadingBigFont(t){var p,h=this,x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],M=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"string"==typeof t?(this.imp.addNetworkLoadingFont(t),M||(this.shxBigFonts=[]),this.shxBigFonts.push(t)):(M?(p=this.shxBigFonts).push.apply(p,_toConsumableArray(t)):this.shxBigFonts=t,t.forEach((function(t){h.imp.addNetworkLoadingFont(t)})));x.forEach((function(t){h.imp.addFontsLoadOnInitialization(t,1)}))}},{key:"addNetworkLoadingTrueTypeFont",value:function addNetworkLoadingTrueTypeFont(t,p,h){for(var x=this,M=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],k=t.length,I=0;I<k;I++)this.imp.addNetworkLoadingTrueTypeFont(t[I],p[I],h[I]),this.trueFonts[t[I]]={name:t[I],zhname:p[I],file:h[I]};M.forEach((function(t){x.imp.addFontsLoadOnInitialization(t,2)}))}},{key:"getShxFonts",value:function getShxFonts(){return this.shxFonts}},{key:"getShxBigFonts",value:function getShxBigFonts(){return this.shxBigFonts}},{key:"loadFonts",value:function loadFonts(t,p,h,x){var M=this,k=[],I=[],N=[];t.forEach((function(t){M.imp.isAlreadyNetworkLoaded(t)||k.push(t)})),p.forEach((function(t){M.imp.isAlreadyNetworkLoaded("{big}"+t)||I.push(t)})),h.forEach((function(t){M.imp.isAlreadyNetworkLoaded("{font}"+t)||N.push(t)})),Wr.loadFonts(k,I,N,x)}},{key:"isAlreadyLoaded",value:function isAlreadyLoaded(t){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0==p?this.imp.isAlreadyNetworkLoaded(t):1==p?this.imp.isAlreadyNetworkLoaded("{big}"+t):2!=p||this.imp.isAlreadyNetworkLoaded("{font}"+t)}},{key:"getTrueTypeFonts",value:function getTrueTypeFonts(){var t=this,p=[];return Object.keys(this.trueFonts).forEach((function(h){p.push(t.trueFonts[h])})),p}},{key:"getVersionString",value:function getVersionString(){return this.imp.GetVersionString()}},{key:"GetVersionDateString",value:function GetVersionDateString(){return this.imp.GetVersionDateString()}},{key:"newMcObjectId",value:function newMcObjectId(t,p){return new gt(t,p)}}]),McAppType}(),Yr=function(){function MxCppType(){_classCallCheck$1(this,MxCppType),_defineProperty(this,"mxcadassemblyimp",void 0),_defineProperty(this,"App",new $r),_defineProperty(this,"PropertiesWindow",new Qr),_defineProperty(this,"Ai",new Ur)}return _createClass$1(MxCppType,[{key:"getCallResult",value:function getCallResult(){return this.App.getLastCallResult()}},{key:"newMcGePoint3d",value:function newMcGePoint3d(t){var p=new nn;return t&&"number"==typeof t.x&&"number"==typeof t.y&&(p.x=t.x,p.y=t.y,"number"==typeof t.z&&(p.z=t.z)),p}},{key:"newMcGeVector3d",value:function newMcGeVector3d(t){var p=new sn;return t&&"number"==typeof t.x&&"number"==typeof t.y&&(p.x=t.x,p.y=t.y,"number"==typeof t.z&&(p.z=t.z)),p}},{key:"getCurrentMxCAD",value:function getCurrentMxCAD(){return this.App.getCurrentMxCAD()}},{key:"getCurrentDatabase",value:function getCurrentDatabase(){return this.App.getCurrentMxCAD().getDatabase()}},{key:"decodeFromGb2312",value:function decodeFromGb2312(t){return tt.decodeFromGb2312(t)}},{key:"encodeToGb2312",value:function encodeToGb2312(t){return tt.encodeToGb2312(t)}}]),MxCppType}(),Kr=_createClass$1((function MxCADPluginMapDefaultData(){_classCallCheck$1(this,MxCADPluginMapDefaultData),_defineProperty(this,"mapOrigin",[]),_defineProperty(this,"cadOrigin",[]),_defineProperty(this,"meterInCADUnits",1),_defineProperty(this,"mapbox_accessToken",""),_defineProperty(this,"openFile",void 0),_defineProperty(this,"rasterTileLayerList",[]),_defineProperty(this,"rasterTileKey",void 0),_defineProperty(this,"providers",void 0),_defineProperty(this,"viewColor",void 0)})),Xr=_createClass$1((function MxCADPluginSampleCode(){_classCallCheck$1(this,MxCADPluginSampleCode),_defineProperty(this,"type",""),_defineProperty(this,"name",""),_defineProperty(this,"code","")})),qr=_createClass$1((function MxCADPluginBase(){_classCallCheck$1(this,MxCADPluginBase),_defineProperty(this,"sRegistData",""),_defineProperty(this,"mxcadui",void 0),_defineProperty(this,"openFile",void 0),_defineProperty(this,"map_default_data",void 0),_defineProperty(this,"sampleCode",void 0)})),Zr=function(t){return t[t.kInt=1]="kInt",t[t.kDouble=2]="kDouble",t[t.kString=3]="kString",t}(Zr||{}),Jr=_createClass$1((function MxPropertiesWindowCustomValue(){_classCallCheck$1(this,MxPropertiesWindowCustomValue),_defineProperty(this,"sVarName",""),_defineProperty(this,"iVarType",1),_defineProperty(this,"val",void 0),_defineProperty(this,"isOnlyRead",!1)})),Qr=function(){function MxPropertiesWindowCustom(){_classCallCheck$1(this,MxPropertiesWindowCustom),_defineProperty(this,"getPropertiesCall",null),_defineProperty(this,"setPropertiesCall",null)}return _createClass$1(MxPropertiesWindowCustom,[{key:"onEvent_getProperties",value:function onEvent_getProperties(t){this.getPropertiesCall=t}},{key:"onEvent_setProperties",value:function onEvent_setProperties(t){this.setPropertiesCall=t}},{key:"setEntitySupportCustom",value:function setEntitySupportCustom(t){var p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],h=t.getMcDbEntity();h&&h.getImp().setPropertiesWindowCustom(p)}},{key:"getEntityProperties",value:function getEntityProperties(t){var p=t.getMcDbEntity();return p&&p.getImp().isPropertiesWindowCustom()?null==this.getPropertiesCall?[]:this.getPropertiesCall(t):[]}},{key:"setEntityProperties",value:function setEntityProperties(t,p){var h=t.getMcDbEntity();if(h&&h.getImp().isPropertiesWindowCustom())return null==this.setPropertiesCall?void 0:this.setPropertiesCall(t,p)}}]),MxPropertiesWindowCustom}(),en=function(){function MxCompare(){_classCallCheck$1(this,MxCompare),_defineProperty(this,"imp",void 0),_defineProperty(this,"result",[]),this.imp=new t.MxCpp.mxcadassemblyimp.MxCompare}return _createClass$1(MxCompare,[{key:"getTypeString",value:function getTypeString(t){var p="";switch(t){case 0:p="no modify";break;case 1:default:p="unknown";break;case 2:p="object modify";break;case 3:p="object erase";break;case 4:p="object add"}return p}},{key:"do",value:function _do(t){if(this.result=[],this.imp.Do(t.imp)){for(var p=new bt(this.imp.getResult()),h=p.GetCount(),x=0;x+2<h;x+=3){var M=p.AtLong(x);if(!M.ret)break;var k=p.AtPoint(x+1);if(!k.ret)break;var I=p.AtLong(x+2);if(!I.ret)break;this.result.push({id:new gt(M.val),pos:k.val,type:I.val,str:this.getTypeString(I.val)})}return!0}return!1}},{key:"getResult",value:function getResult(){return this.result}}]),MxCompare}(),tn=function(){function MxModifyColor(){_classCallCheck$1(this,MxModifyColor),_defineProperty(this,"imp",void 0),this.imp=new t.MxCpp.mxcadassemblyimp.MxTempModifyColor}return _createClass$1(MxModifyColor,[{key:"Do",value:function Do(t,p){return this.imp.Do(t.imp,p.getImp())}},{key:"DoRestore",value:function DoRestore(){this.imp.DoRestore()}}]),MxModifyColor}(),rn=function(){function MxCADTempForbiddenIntelliSelect(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];_classCallCheck$1(this,MxCADTempForbiddenIntelliSelect),_defineProperty(this,"bakIsIntelliSelect",!0),this.bakIsIntelliSelect=p.MxFun.getIniSet().EnableIntelliSelect,p.MxFun.setIniset({EnableIntelliSelect:!t})}return _createClass$1(MxCADTempForbiddenIntelliSelect,[{key:"restoreSettings",value:function restoreSettings(){p.MxFun.setIniset({EnableIntelliSelect:this.bakIsIntelliSelect})}}]),MxCADTempForbiddenIntelliSelect}();function loadMxCADassembly(t){return _loadMxCADassembly.apply(this,arguments)}function _loadMxCADassembly(){return _loadMxCADassembly=_asyncToGenerator(ie.mark((function _callee2(p){var h,x,M,k,I=arguments;return ie.wrap((function _callee2$(N){for(;;)switch(N.prev=N.next){case 0:return h=I.length>1&&void 0!==I[1]?I[1]:it||!ot?st:ct,x=I.length>2?I[2]:void 0,M=I.length>3?I[3]:void 0,k=I.length>4?I[4]:void 0,N.abrupt("return",new Promise(function(){var I=_asyncToGenerator(ie.mark((function _callee(I,N){var V,ee;return ie.wrap((function _callee$(te){for(;;)switch(te.prev=te.next){case 0:if(te.prev=0,t.MxCpp||(t.MxCpp=new Yr),!t.MxCpp.mxcadassemblyimp){te.next=5;break}return p&&p(t.MxCpp),te.abrupt("return",I(t.MxCpp));case 5:return"mxdrawassembly_min",te.next=8,pt("mxdrawassembly_min","mxdrawassembly",{locateFile:h,wasmBinary:x});case 8:V=te.sent,t.MxCpp.mxcadassemblyimp=V,ee=new V.McApp,M?ee.setFontFilePath(M):ee.setFontFilePath("fonts"),ee.Init(),ur.init(),t.MxCpp.App.init(ee),k?t.MxCpp.App.addNetworkLoadingFont(k):t.MxCpp.App.addNetworkLoadingFont(["txt.shx","hztxt.shx"]),window.__MxCpp__=t.MxCpp,p&&p(t.MxCpp),I(t.MxCpp),te.next=25;break;case 22:te.prev=22,te.t0=te.catch(0),N(te.t0);case 25:case"end":return te.stop()}}),_callee,null,[[0,22]])})));return function(t,p){return I.apply(this,arguments)}}()));case 5:case"end":return N.stop()}}),_callee2)}))),_loadMxCADassembly.apply(this,arguments)}function MxCheckTheBrowser(){var t,p={},h=navigator.userAgent.toLowerCase();if((t=h.match(/edg\/([\d.]+)/))?p.edge=t[1]:(t=h.match(/rv:([\d.]+)\) like gecko/))||(t=h.match(/msie ([\d.]+)/))?p.ie=t[1]:(t=h.match(/firefox\/([\d.]+)/))?p.firefox=t[1]:(t=h.match(/chrome\/([\d.]+)/))?p.chrome=t[1]:(t=h.match(/opera.([\d.]+)/))?p.opera=t[1]:(t=h.match(/version\/([\d.]+).*safari/))&&(p.safari=t[1]),p.ie)return{ok:!1,error:"iechromeedge",var:p};if(p.edge){if(null!=new RegExp("edg/([0-9]{1,}[.0-9]{0,})").exec(h)&&parseFloat(RegExp.$1)<107)return{ok:!1,error:"edgeedge",var:p}}else if(p.chrome){if(null!=new RegExp("chrome/([0-9]{1,}[.0-9]{0,})").exec(h))if(parseFloat(RegExp.$1)<107)return{ok:!1,error:"chrome",var:p}}else if(p.firefox){if(null!=new RegExp("firefox/([0-9]{1,}[.0-9]{0,})").exec(h))if(parseFloat(RegExp.$1)<101)return{ok:!1,error:"firefoxfirefox",var:p}}else if(!p.safari)return p.opera?{ok:!1,error:"operachromeedge",var:p}:{ok:!1,error:"chromeedge",var:p};return{ok:!0,error:"",var:p}}t.MxCpp=void 0;var nn=function(){function McGePoint3d(p,h,x){_classCallCheck$1(this,McGePoint3d),_defineProperty(this,"imp",void 0),this.imp=new t.MxCpp.mxcadassemblyimp.MdGePoint3d,p instanceof Object?(this.imp.x=p.x,this.imp.y=p.y,this.imp.z=p.z):(this.imp.x=p||0,this.imp.y=h||0,this.imp.z=x||0)}return _createClass$1(McGePoint3d,[{key:"toVector3",value:function toVector3(){return new THREE.Vector3(this.imp.x,this.imp.y,this.imp.z)}},{key:"setFromVector3",value:function setFromVector3(t){return this.imp.x=t.x,this.imp.y=t.y,this.imp.z=t.z,this}},{key:"copy",value:function copy(t){return this.imp.x=t.x,this.imp.y=t.y,this.imp.z=t.z,this}},{key:"transformBy",value:function transformBy(t){return this.imp.transformBy(t.imp),this}},{key:"addvec",value:function addvec(t){return this.imp.addvec(t.imp),this}},{key:"av",value:function av(t){return this.imp.addvec(t.imp),this}},{key:"subvec",value:function subvec(t){return this.imp.subvec(t.imp),this}},{key:"sv",value:function sv(t){return this.imp.subvec(t.imp),this}},{key:"sub",value:function sub(t){return new sn(this.imp.sub(t.imp))}},{key:"distanceTo",value:function distanceTo(t){return this.imp.distanceTo(t.imp)}},{key:"isEqualTo",value:function isEqualTo(t){return this.imp.isEqualTo(t.imp)}},{key:"clone",value:function clone(){return new McGePoint3d(this.imp)}},{key:"c",value:function c(){return new McGePoint3d(this.imp)}},{key:"x",get:function get(){return this.imp.x},set:function set(t){this.imp.x=t}},{key:"y",get:function get(){return this.imp.y},set:function set(t){this.imp.y=t}},{key:"z",get:function get(){return this.imp.z},set:function set(t){this.imp.z=t}}]),McGePoint3d}();_defineProperty(nn,"kOrigin",void 0);var sn=function(){function McGeVector3d(p,h,x){_classCallCheck$1(this,McGeVector3d),_defineProperty(this,"imp",void 0),this.imp=new t.MxCpp.mxcadassemblyimp.MdGeVector3d,p instanceof Object?(this.imp.x=p.x,this.imp.y=p.y,this.imp.z=p.z):(this.imp.x=p||0,this.imp.y=h||0,this.imp.z=x||0)}return _createClass$1(McGeVector3d,[{key:"toVector3",value:function toVector3(){return new THREE.Vector3(this.imp.x,this.imp.y,this.imp.z)}},{key:"copy",value:function copy(t){return this.imp.x=t.imp.x,this.imp.y=t.imp.y,this.imp.z=t.imp.z,this}},{key:"clone",value:function clone(){return new McGeVector3d(this.imp)}},{key:"c",value:function c(){return new McGeVector3d(this.imp)}},{key:"rotateBy",value:function rotateBy(t,p){return p||(p=McGeVector3d.kZAxis),this.imp.rotateBy(t,p.imp),this}},{key:"negate",value:function negate(){return this.imp.negate(),this}},{key:"perpVector",value:function perpVector(){return this.imp.perpVector(),this}},{key:"angleTo1",value:function angleTo1(t){return this.imp.angleTo(t.imp)}},{key:"angleTo2",value:function angleTo2(t,p){return p||(p=McGeVector3d.kNegateZAxis),this.imp.angleTo(t.imp,p.imp)}},{key:"normalize",value:function normalize(){return this.imp.normalize(),this}},{key:"length",value:function length(){return this.imp.length()}},{key:"isUnitLength",value:function isUnitLength(){return this.imp.isUnitLength()}},{key:"isZeroLength",value:function isZeroLength(){return this.imp.isZeroLength()}},{key:"dotProduct",value:function dotProduct(t){return this.imp.dotProduct(t.imp)}},{key:"crossProduct",value:function crossProduct(t){var p=new McGeVector3d;return p.imp=this.imp.crossProduct(t.imp),p}},{key:"isEqualTo",value:function isEqualTo(t){return this.imp.isEqualTo(t.imp)}},{key:"mult",value:function mult(t){return this.imp.mult(t),this}},{key:"x",get:function get(){return this.imp.x},set:function set(t){this.imp.x=t}},{key:"y",get:function get(){return this.imp.y},set:function set(t){this.imp.y=t}},{key:"z",get:function get(){return this.imp.z},set:function set(t){this.imp.z=t}}]),McGeVector3d}();_defineProperty(sn,"kIdentity",void 0),_defineProperty(sn,"kXAxis",void 0),_defineProperty(sn,"kYAxis",void 0),_defineProperty(sn,"kZAxis",void 0),_defineProperty(sn,"kNegateZAxis",void 0);var cn=function(){function McGeMatrix3d(p){_classCallCheck$1(this,McGeMatrix3d),_defineProperty(this,"imp",void 0),this.imp=new t.MxCpp.mxcadassemblyimp.MdGeMatrix3d,p instanceof Object&&this.imp.copy(p)}return _createClass$1(McGeMatrix3d,[{key:"copy",value:function copy(t){return this.imp.copy(t.imp),this}},{key:"clone",value:function clone(){return new McGeMatrix3d(this.imp)}},{key:"setToIdentity",value:function setToIdentity(){return this.imp.setToIdentity(),this}},{key:"preMultBy",value:function preMultBy(t){return this.imp.preMultBy(t.imp),this}},{key:"postMultBy",value:function postMultBy(t){return this.imp.postMultBy(t.imp),this}},{key:"setToProduct",value:function setToProduct(t,p){return this.imp.setToProduct(t.imp,p.imp),this}},{key:"invert",value:function invert(){return this.imp.invert(),this}},{key:"isSingular",value:function isSingular(){return this.imp.isSingular()}},{key:"transposeIt",value:function transposeIt(){return this.imp.transposeIt(),this}},{key:"isEqualTo",value:function isEqualTo(t){return this.imp.isEqualTo(t.imp)}},{key:"det",value:function det(){return this.imp.det()}},{key:"setCoordSystem",value:function setCoordSystem(t,p,h,x){return this.imp.setCoordSystem(t.imp,p.imp,h.imp,x.imp),this}},{key:"setToTranslation",value:function setToTranslation(t){return this.imp.setToTranslation(t.imp),this}},{key:"setToRotation",value:function setToRotation(t,p,h){return this.imp.setToRotation(t,p.imp,h.imp),this}},{key:"setToScaling",value:function setToScaling(t,p){return this.imp.setToScaling(t,p.imp),this}},{key:"setMirror",value:function setMirror(t,p){return this.imp.setMirror(t.imp,p.imp),this}},{key:"scale",value:function scale(){return this.imp.scale()}},{key:"angleXYPlane",value:function angleXYPlane(){return this.imp.angleXYPlane()}},{key:"getData",value:function getData(t,p){return this.imp.getData(t,p)}},{key:"setData",value:function setData(t,p,h){return this.imp.setData(t,p,h)}}]),McGeMatrix3d}();_defineProperty(cn,"kIdentity",void 0);var un=function(){function McGeLongArray(p){_classCallCheck$1(this,McGeLongArray),_defineProperty(this,"imp",void 0),this.imp=new t.MxCpp.mxcadassemblyimp.MdGeLongArray,p instanceof Object&&this.imp.copy(p)}return _createClass$1(McGeLongArray,[{key:"copy",value:function copy(t){return this.imp.clear(),this.imp.copy(t.imp),this}},{key:"copyFormAryId",value:function copyFormAryId(t){var p=this;return this.imp.clear(),t.forEach((function(t){p.imp.append(t.id)})),this}},{key:"append",value:function append(t){this.imp.append(t)}},{key:"length",value:function length(){return this.imp.length()}},{key:"at",value:function at(t){return this.imp.at(t)}},{key:"setAt",value:function setAt(t,p){this.imp.setAt(t,p)}},{key:"clear",value:function clear(){this.imp.clear()}},{key:"forEach",value:function forEach(t){for(var p=this.imp.length(),h=0;h<p;h++)t(this.imp.at(h),h)}}]),McGeLongArray}(),ln=function(){function McGeStringArray(p){_classCallCheck$1(this,McGeStringArray),_defineProperty(this,"imp",void 0),this.imp=new t.MxCpp.mxcadassemblyimp.MdGeStringArray,p instanceof Object&&this.imp.copy(p)}return _createClass$1(McGeStringArray,[{key:"copy",value:function copy(t){return this.imp.copy(t.imp),this}},{key:"append",value:function append(t){this.imp.append(t)}},{key:"length",value:function length(){return this.imp.length()}},{key:"at",value:function at(t){return!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?tt.decodeFromGb2312(this.imp.at(t)):this.imp.at(t)}},{key:"setAt",value:function setAt(t,p){!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?this.imp.setAt(t,tt.encodeToGb2312(p)):this.imp.setAt(t,p)}},{key:"forEach",value:function forEach(t){for(var p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],h=this.imp.length(),x=0;x<h;x++)t(p?tt.decodeFromGb2312(this.imp.at(x)):this.imp.at(x),x)}},{key:"clear",value:function clear(){this.imp.clear()}}]),McGeStringArray}(),pn=function(){function McGePoint3dArray(p,h){var x=this;_classCallCheck$1(this,McGePoint3dArray),_defineProperty(this,"imp",void 0),this.imp=new t.MxCpp.mxcadassemblyimp.MdGePoint3dArray,p instanceof Array?p.forEach((function(t){x.imp.append(t.imp)})):p instanceof Object&&(this.imp.copy(p),h&&t.MxCpp.App.getImp().DestroyMdGePoint3dArray(p))}return _createClass$1(McGePoint3dArray,[{key:"copy",value:function copy(t){var p=this;return t instanceof Array?t.forEach((function(t){p.imp.append(t.imp)})):this.imp.copy(t.imp),this}},{key:"append",value:function append(t){this.imp.append(t.imp)}},{key:"length",value:function length(){return this.imp.length()}},{key:"isEmpty",value:function isEmpty(){return 0==this.imp.length()}},{key:"at",value:function at(t){return new nn(this.imp.at(t))}},{key:"setAt",value:function setAt(t,p){this.imp.setAt(t,p.imp)}},{key:"clear",value:function clear(){this.imp.clear()}},{key:"forEach",value:function forEach(t){for(var p=this.imp.length(),h=0;h<p;h++)t(new nn(this.imp.at(h)),h)}}]),McGePoint3dArray}(),hn=function(){function McGeDoubleArray(p,h){_classCallCheck$1(this,McGeDoubleArray),_defineProperty(this,"imp",void 0),this.imp=new t.MxCpp.mxcadassemblyimp.MdGeDoubleArray,p instanceof Object&&(this.imp.copy(p),h&&t.MxCpp.App.getImp().DestroyMdGeDoubleArray(p))}return _createClass$1(McGeDoubleArray,[{key:"copy",value:function copy(t){return this.imp.clear(),this.imp.copy(t.imp),this}},{key:"append",value:function append(t){this.imp.append(t)}},{key:"length",value:function length(){return this.imp.length()}},{key:"at",value:function at(t){return this.imp.at(t)}},{key:"setAt",value:function setAt(t,p){this.imp.setAt(t,p)}},{key:"clear",value:function clear(){this.imp.clear()}},{key:"forEach",value:function forEach(t){for(var p=this.imp.length(),h=0;h<p;h++)t(this.imp.at(h),h)}}]),McGeDoubleArray}(),fn=function(){function McGeBound(t){_classCallCheck$1(this,McGeBound),_defineProperty(this,"minPoint",void 0),_defineProperty(this,"maxPoint",void 0),_defineProperty(this,"isValid",void 0),this.minPoint=new nn,this.maxPoint=new nn,this.isValid=!1,t&&this.addPoints(t)}return _createClass$1(McGeBound,[{key:"addPoint",value:function addPoint(t){this.isValid?(this.minPoint.x>t.x&&(this.minPoint.x=t.x),this.minPoint.y>t.y&&(this.minPoint.y=t.y),this.minPoint.z>t.z&&(this.minPoint.y=t.z),this.maxPoint.x<t.x&&(this.maxPoint.x=t.x),this.maxPoint.y<t.y&&(this.maxPoint.y=t.y),this.maxPoint.z<t.z&&(this.maxPoint.z=t.z)):(this.minPoint.x=t.x,this.minPoint.y=t.y,this.minPoint.z=t.z,this.maxPoint.x=t.x,this.maxPoint.y=t.y,this.maxPoint.z=t.z,this.isValid=!0)}},{key:"addPoints",value:function addPoints(t){var p=this;t.forEach((function(t){p.addPoint(t)}))}}]),McGeBound}(),dn=_createClass$1((function MxCADBaseCustomElement(){_classCallCheck$1(this,MxCADBaseCustomElement)})),mn=function(t){return t.None="none",t.Overflow="overflow",t.Word="word",t.Forced="forced",t}(mn||{}),gn=function(t){return t.Left="l",t.Center="c",t.Right="r",t.Justify="j",t.Distribute="d",t}(gn||{}),vn=function(t){return t.Paragraph="P",t.Color="c",t.ColorIndex="C",t.Font="f",t.FontAlt="F",t.FontHeight="H",t.Overline="O",t.OverlineEnd="o",t.Strike="K",t.StrikeEnd="k",t.Underline="L",t.UnderlineEnd="l",t.TiltAngle="Q",t.Tracking="T",t.WidthFactor="W",t.SuperSubScript="S",t.LineSpacing="pxsm",t}(vn||{}),yn=function(t){return t.Chinese="chinese",t.Continuous="continuous",t.Breakable="breakable",t.Element="element",t.TextNode="textNode",t}(yn||{});function isElement(t){return!(null==t||!t.children)}function isText(t){return"text"in t}var xn={CHINESE:/[\u4e00-\u9fa5]/,WHITESPACE:/\s/},bn=new RegExp("".concat(xn.CHINESE.source,"|").concat(xn.WHITESPACE.source));function isBreakableChar(t){return bn.test(t)}function createFragment(t,p,h,x){return{node:t,nodeIndex:p,startOffset:h,endOffset:x,text:isElement(t)?"":t.text.substring(h,x)}}function createSequence(t,p){return{type:t,fragments:[p],text:p.text}}function appendToSequence(t,p){t.fragments.push(p),t.text+=p.text}function createNewLine(t,p){return{nodes:[],height:0,width:0,breakInfo:{isWrapped:!1,breakType:mn.None},bottomSpacing:t*(p-1)}}function addTextFragmentToLine(t,p,h){t.nodes.push(p),t.width+=p.width,t.height=Math.max(t.height,h)}function updateLineBreakInfo(t,p,h){!function ensureBreakInfo(t){t.breakInfo||(t.breakInfo={isWrapped:!1,breakType:mn.None})}(t),t.breakInfo.isWrapped=p,t.breakInfo.breakType=h}var _n=new Map,Mn=function getCalculateData(t,p,h){var x=_n.get(p);if(x)return x;var M=qn.elementTextManager.get(p.type),k=null==M?void 0:M.calculate(t,p,h);return k?(k&&_n.set(p,k),k):{width:0,height:0}},Cn=new WeakMap;function generateFragmentKey(t){return"".concat(t.nodeIndex,"_").concat(t.startOffset,"_").concat(t.endOffset)}function calculateSequenceWidth(t,p,h){var x=Cn.get(p);if(x)return x.width;var M,k=new Map;if(p.type===yn.Element){var I=p.fragments[0].node,N=Mn(t,I).width;M=N}else p.type===yn.Continuous?M=function calculateContinuousSequenceWidth(t,p,h){var x=p.baseHeight,M=p.getTextWidth;if(function hasUniformStyle(t){if(t.length<=1)return!0;var p=t[0].node;return t.every((function(t){return t.node===p}))}(t.fragments)){var k=M(t.text,t.fragments[0].node,x),I=k/t.fragments.length;return t.fragments.forEach((function(t){h.set(generateFragmentKey(t),I)})),k}var N=0;return t.fragments.forEach((function(t){var p=M(t.text,t.node,x);h.set(generateFragmentKey(t),p),N+=p})),N}(p,h,k):(M=0,p.fragments.forEach((function(t){var p=function calculateBreakableFragmentWidth(t,p){var h=p.baseHeight;return(0,p.getTextWidth)(t.text,t.node,h)}(t,h);k.set(generateFragmentKey(t),p),M+=p})));return Cn.set(p,{width:M,fragmentWidths:k}),M}function getFragmentWidth(t,p){var h=Cn.get(t);if(!h)throw new Error("Sequence width not calculated");var x=h.fragmentWidths.get(generateFragmentKey(p));if(void 0===x)throw new Error("Fragment width not found");return x}function _createForOfIteratorHelper$5(t,p){var h="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!h){if(Array.isArray(t)||(h=function _unsupportedIterableToArray$5(t,p){if(!t)return;if("string"==typeof t)return _arrayLikeToArray$5(t,p);var h=Object.prototype.toString.call(t).slice(8,-1);"Object"===h&&t.constructor&&(h=t.constructor.name);if("Map"===h||"Set"===h)return Array.from(t);if("Arguments"===h||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return _arrayLikeToArray$5(t,p)}(t))||p&&t&&"number"==typeof t.length){h&&(t=h);var x=0,M=function F(){};return{s:M,n:function n(){return x>=t.length?{done:!0}:{done:!1,value:t[x++]}},e:function e(t){throw t},f:M}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var k,I=!0,N=!1;return{s:function s(){h=h.call(t)},n:function n(){var t=h.next();return I=t.done,t},e:function e(t){N=!0,k=t},f:function f(){try{I||null==h.return||h.return()}finally{if(N)throw k}}}}function _arrayLikeToArray$5(t,p){(null==p||p>t.length)&&(p=t.length);for(var h=0,x=new Array(p);h<p;h++)x[h]=t[h];return x}function calculateLineBreaks(t,p,h,x){var M=x.maxWidth,k=x.baseHeight,I=x.getTextHeight,N=x.lineHeightRatio,V=x.isWidthOffset;if(null==p||!p.length)return[];var ee,te=function findTextSequences(t){var p=[],h=null;return t.forEach((function(t,x){if(isText(t)){if(t.type&&qn.elementTextManager.hasText(t.type))return h=null,void p.push(createSequence(yn.TextNode,createFragment(t,x,0,t.text.length)));var M=t.text,k=0;if(0===M.length)p.push(createSequence(yn.Continuous,createFragment(t,x,k,k)));else for(;k<M.length;){var I;if(isBreakableChar(M[k]))h=null,p.push(createSequence(yn.Breakable,createFragment(t,x,k,k+1))),k++;else{for(var N=k+1;N<M.length&&!isBreakableChar(M[N]);)N++;var V=createFragment(t,x,k,N);(null===(I=h)||void 0===I?void 0:I.type)===yn.Continuous?appendToSequence(h,V):(h=createSequence(yn.Continuous,V),p.push(h)),k=N}}}else isElement(t)&&qn.elementTextManager.has(t.type)&&(h=null,p.push(createSequence(yn.Element,createFragment(t,x,0,0))))})),p}(p),re=[],ne=createNewLine(k,N),ie=0,ae=function updateSequence(p,x){if(isElement(x.node)){var M=Mn(t,x.node),N=M.height,V=M.width;addTextFragmentToLine(ne,{node:x.node,path:[h,x.nodeIndex],startOffset:x.startOffset,endOffset:x.endOffset,width:V,index:x.nodeIndex,height:N},N)}else{var ee=I(x.node,k);addTextFragmentToLine(ne,{node:x.node,path:[h,x.nodeIndex],startOffset:x.startOffset,endOffset:x.endOffset,width:getFragmentWidth(p,x),index:x.nodeIndex,height:ee},ee)}},oe=function applyCharLevelSpacing(){if(V){var t=M-ie;if(t>0){var p=ne.nodes.reduce((function(t,p){return isElement(p.node)||isText(p.node)&&p.node.type&&qn.elementTextManager.hasText(p.node.type)?t+1:t+p.endOffset-p.startOffset}),0),h=0;h=1===p?t/2:t/(p-1),ne.nodes.forEach((function(t){t.hasCharLevelSpacing=!0,t.extraCharSpacing=h}))}}},se=_createForOfIteratorHelper$5(te);try{var ce=function _loop(){var p=ee.value,h=calculateSequenceWidth(t,p,x);if(0===ie&&h>=M||ie+h>=M&&ie>0)return p.fragments.forEach((function(t){ae(p,t)})),oe(),updateLineBreakInfo(ne,!0,p.type===yn.Continuous||p.isAutoBreak?mn.Word:mn.Forced),re.push(ne),ne=createNewLine(k,N),ie=0,1;p.fragments.forEach((function(t){ae(p,t)})),ie+=h};for(se.s();!(ee=se.n()).done;)ce()}catch(ue){se.e(ue)}finally{se.f()}return ne.nodes.length>0&&(updateLineBreakInfo(ne,!0,mn.Forced),oe(),ne.isEndLine=!0,re.push(ne)),re}function _slicedToArray$1(t,p){return function _arrayWithHoles$1(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit$1(t,p){var h=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=h){var x,M,k,I,N=[],V=!0,ee=!1;try{if(k=(h=h.call(t)).next,0===p){if(Object(h)!==h)return;V=!1}else for(;!(V=(x=k.call(h)).done)&&(N.push(x.value),N.length!==p);V=!0);}catch(t){ee=!0,M=t}finally{try{if(!V&&null!=h.return&&(I=h.return(),Object(I)!==I))return}finally{if(ee)throw M}}return N}}(t,p)||_unsupportedIterableToArray$6(t,p)||function _nonIterableRest$1(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var wn=function setColor(t,p){var h=Sn(t);return h&&(p.trueColor=h),h},Sn=function getColor(t){var p;if("number"==typeof t.color)(p=new Sr).setColorIndex(t.color);else if(Array.isArray(t.color)){var h=_slicedToArray$1(t.color,3),x=h[0],M=void 0===x?255:x,k=h[1],I=void 0===k?255:k,N=h[2],V=void 0===N?255:N;(p=new Sr).setRGB(M,I,V)}return p},Tn=new Map,An=function getTextCalculateData(t,p){var h=Tn.get(p);if(h)return h;if(p.type&&qn.elementTextManager.hasText(p.type)){var x=qn.elementTextManager.getText(p.type),M=null==x?void 0:x.calculate(t,p);if(M)return M&&Tn.set(p,M),M}return{width:0,height:0}},kn=function getTextHeight(t,p,h){return t.type&&qn.elementTextManager.hasText(t.type)?(An(h,t)||{width:0}).height:p*((null==t?void 0:t.fontSize)||1)};function createFormattedTextNode(t,p){var h={text:t};return p.bold&&(h.bold=!0),p.italic&&(h.italic=!0),p.underline&&(h.underline=!0),p.overline&&(h.overline=!0),p.strike&&(h.strike=!0),p.font&&(h.font=p.font),p.fontSize&&(h.fontSize=p.fontSize),p.style&&(h.style=p.style),void 0!==p.color&&null!==p.color&&(h.color=p.color),void 0!==p.tiltAngle&&(h.tiltAngle=p.tiltAngle),void 0!==p.tracking&&(h.tracking=p.tracking),void 0!==p.widthFactor&&(h.widthFactor=p.widthFactor),void 0!==p.textPosition&&(h.textPosition=p.textPosition),h}function escapeCADSpecialChars(t){for(var p="",h=0;h<t.length;){var x=t[h];if("\\"===x){if(h+1<t.length){var M=t[h+1];if("\\"===M||"{"===M||"}"===M){p+=x+M,h+=2;continue}}p+="\\\\"}else p+="{"===x||"}"===x?"\\"+x:x;h++}return p}var Dn=function createMcText(p,h){var x=h.baseHeight,M=h.position,k=h.style,I=h.ent,N=new Ft;return N.contents=escapeCADSpecialChars(p.text),N.textHeight=kn(p,x,I),N.location=M,function setFont(p,h,x){x||(x=t.MxCpp.getCurrentMxCAD().getDatabase().getCurrentlyTextStyleName()),h.textStyle=x,h.contents=function combinationMTextContents(t,p){var h=t.bold,x=t.italic,M=t.font,k=t.tiltAngle,I=t.tracking,N=t.widthFactor;t.textPosition;var V=p,ee="";return void 0===M&&!0!==h&&!0!==x||(ee+="\\f".concat(null!=M?M:"","|").concat(h?"b1":"b0","|").concat(x?"i1":"i0","|c134|p49;")),"number"==typeof k&&(ee+="\\Q".concat(k,";")),"number"==typeof I&&(ee+="\\T".concat(I,";")),"number"==typeof N&&(ee+="\\W".concat(N,";")),"{"+ee+V+"}"}(p,h.contents)}(p,N,k),N},Pn=function getTextPosition(t){var p=t.basePosition,h=t.horizontalOffset,x=t.verticalOffset;return p.clone().addvec(sn.kXAxis.clone().mult(h)).addvec(sn.kYAxis.clone().negate().mult(x))};function ownKeys$5(t,p){var h=Object.keys(t);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(t);p&&(x=x.filter((function(p){return Object.getOwnPropertyDescriptor(t,p).enumerable}))),h.push.apply(h,x)}return h}function _objectSpread$5(t){for(var p=1;p<arguments.length;p++){var h=null!=arguments[p]?arguments[p]:{};p%2?ownKeys$5(Object(h),!0).forEach((function(p){_defineProperty(t,p,h[p])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(h)):ownKeys$5(Object(h)).forEach((function(p){Object.defineProperty(t,p,Object.getOwnPropertyDescriptor(h,p))}))}return t}var On=function createTextEntity(t){var p=t.node,h=t.text,x=t.height,M=t.position,k=t.style,I=t.ent,N=Dn(_objectSpread$5(_objectSpread$5({},p),{},{text:h}),{baseHeight:x,position:Pn(M),style:k,ent:I});return wn(p,N),N},In=function getTextNodeBoxInfo(t,p){var h=Dn(t,p);return h.reCompute(),function getBoxInfo(t){var p=Mt.getTextEntityBox(t,!1),h=p.maxPt.clone(),x=new nn(p.minPt.x,h.y),M=x.distanceTo(h),k=x.distanceTo(p.maxPt);return{start:x,end:h,width:M,height:k,box:p}}(h)};function ownKeys$4(t,p){var h=Object.keys(t);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(t);p&&(x=x.filter((function(p){return Object.getOwnPropertyDescriptor(t,p).enumerable}))),h.push.apply(h,x)}return h}function _objectSpread$4(t){for(var p=1;p<arguments.length;p++){var h=null!=arguments[p]?arguments[p]:{};p%2?ownKeys$4(Object(h),!0).forEach((function(p){_defineProperty(t,p,h[p])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(h)):ownKeys$4(Object(h)).forEach((function(p){Object.defineProperty(t,p,Object.getOwnPropertyDescriptor(h,p))}))}return t}var Ln=new Map,En=4;function getCachedCharacterWidth(t,p,h,x,M,k){var I=Ln.get(p);if(I&&I.baseHeight===x||(I={charWidths:new Map,baseHeight:x},Ln.set(p,I)),!I.charWidths.has(t)){var N=getBasicTextWidth(t.repeat(En),h,x,M,k)/En;I.charWidths.set(t,N)}return I.charWidths.get(t)}function getBasicTextWidth(t,p,h,x,M,k){var I=_objectSpread$4(_objectSpread$4({},p),{},{text:t}),N=In(I,{position:new nn(0,0,0),baseHeight:h,style:x,ent:M}).width,V=(null==p?void 0:p.tracking)||1;return"superscript"!==p.textPosition&&"subscript"!==p.textPosition||(V=.5),N*V+(k||0)}function calculateTextWidth(t,p,h,x,M,k){if(0===t.length)return 0;var I=function generateNodeFingerprint(t,p,h){var x=t.font,M=void 0===x?"":x,k=t.fontSize,I=void 0===k?0:k,N=t.bold,V=void 0!==N&&N,ee=t.italic,te=void 0!==ee&&ee,re=t.underline,ne=void 0!==re&&re,ie=t.strike,ae=void 0!==ie&&ie,oe=t.overline,se=void 0!==oe&&oe,ce=t.type,ue=void 0===ce?"":ce,le=t.tiltAngle,pe=void 0===le?0:le,he=t.tracking,fe=void 0===he?0:he,de=t.widthFactor,me=void 0===de?0:de,ge=t.textPosition,ve=void 0===ge?"":ge;return"".concat(ue,"_").concat(ve,"_").concat(h,"_").concat(M,"_").concat(I,"_").concat(Number(V),"_").concat(Number(te),"_").concat(Number(ne),"_").concat(Number(ae),"_").concat(Number(se),"_").concat(pe,"_").concat(fe,"_").concat(me,"_").concat(p)}(p,h,x);if(p.type&&qn.elementTextManager.hasText(p.type))return getCachedCharacterWidth(t,I,p,h,x,M);if(1===t.length)return getCachedCharacterWidth(t,I,p,h,x,M);for(var N=0,V=0,ee=/[^\u4e00-\u9fa5]/;V<t.length;)if(ee.test(t[V])){for(var te="";V<t.length&&ee.test(t[V]);)te+=t[V],V++;N+=getBasicTextWidth(te,p,h,x,M,k)}else N+=getCachedCharacterWidth(t[V],I,p,h,x,M),V++;return N}function getTextWidth(t,p,h,x,M){return p.type&&qn.elementTextManager.hasText(p.type)?(An(M,p)||{width:0}).width:calculateTextWidth(t,p,h,x,M)}function ownKeys$3(t,p){var h=Object.keys(t);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(t);p&&(x=x.filter((function(p){return Object.getOwnPropertyDescriptor(t,p).enumerable}))),h.push.apply(h,x)}return h}function _objectSpread$3(t){for(var p=1;p<arguments.length;p++){var h=null!=arguments[p]?arguments[p]:{};p%2?ownKeys$3(Object(h),!0).forEach((function(p){_defineProperty(t,p,h[p])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(h)):ownKeys$3(Object(h)).forEach((function(p){Object.defineProperty(t,p,Object.getOwnPropertyDescriptor(h,p))}))}return t}function _createForOfIteratorHelper$4(t,p){var h="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!h){if(Array.isArray(t)||(h=function _unsupportedIterableToArray$4(t,p){if(!t)return;if("string"==typeof t)return _arrayLikeToArray$4(t,p);var h=Object.prototype.toString.call(t).slice(8,-1);"Object"===h&&t.constructor&&(h=t.constructor.name);if("Map"===h||"Set"===h)return Array.from(t);if("Arguments"===h||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return _arrayLikeToArray$4(t,p)}(t))||p&&t&&"number"==typeof t.length){h&&(t=h);var x=0,M=function F(){};return{s:M,n:function n(){return x>=t.length?{done:!0}:{done:!1,value:t[x++]}},e:function e(t){throw t},f:M}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var k,I=!0,N=!1;return{s:function s(){h=h.call(t)},n:function n(){var t=h.next();return I=t.done,t},e:function e(t){N=!0,k=t},f:function f(){try{I||null==h.return||h.return()}finally{if(N)throw k}}}}function _arrayLikeToArray$4(t,p){(null==p||p>t.length)&&(p=t.length);for(var h=0,x=new Array(p);h<p;h++)x[h]=t[h];return x}var Rn={color:function color(t){var color=t.color;if(void 0===color)return"";if(Array.isArray(color)){var p=_slicedToArray$1(color,3),h=p[0]+256*p[1]+256*p[2]*256;return"\\".concat(vn.Color).concat(h,";")}if("number"==typeof color)return"\\".concat(vn.ColorIndex).concat(color,";");if("string"==typeof color){var x=color.replace(/^#/,""),M=parseInt(x.substring(0,2),16)+256*parseInt(x.substring(2,4),16)+256*parseInt(x.substring(4,6),16)*256;return"\\".concat(vn.Color).concat(M,";")}return""},font:function font(t){var p=t,font=p.font||"",h=p.bold?"|b1":"|b0",x=p.italic?"|i1":"|i0";return"\\".concat(vn.Font).concat(font).concat(h).concat(x,"|c134|p49;")},fontSize:function fontSize(t){var fontSize=t.fontSize;return void 0===fontSize?"":"\\".concat(vn.FontHeight).concat(fontSize,"x;")},bold:function bold(t){return t.bold?t.font?"":"\\".concat(vn.Font,"|b1|i0|c134|p49;"):""},italic:function italic(t){return t.italic?t.font?"":"\\".concat(vn.Font,"|b0|i1|c134|p49;"):""},underline:function underline(t){return t.underline?"\\".concat(vn.Underline):""},overline:function overline(t){return t.overline?"\\".concat(vn.Overline):""},strike:function strike(t){return t.strike?"\\".concat(vn.Strike):""},tiltAngle:function tiltAngle(t){var tiltAngle=t.tiltAngle;return void 0===tiltAngle?"":"\\".concat(vn.TiltAngle).concat(tiltAngle,";")},tracking:function tracking(t){var tracking=t.tracking;return void 0===tracking?"":"\\".concat(vn.Tracking).concat(tracking,";")},widthFactor:function widthFactor(t){var widthFactor=t.widthFactor;return void 0===widthFactor?"":"\\".concat(vn.WidthFactor).concat(widthFactor,";")}};function processText(t){var p=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).isDecorative,h=void 0===p||p,x="",M=function extractFormatFromNode(t){var p={},h=t;if(h.bold&&(p.bold=!0),h.italic&&(p.italic=!0),h.underline&&(p.underline=!0),h.overline&&(p.overline=!0),h.strike&&(p.strike=!0),h.font&&(p.font=h.font),h.style&&(p.style=h.style),h.fontSize&&(p.fontSize=h.fontSize),h.color){var x=h.color;"number"==typeof x?p.color=x:Array.isArray(x)&&(p.color=_toConsumableArray(x))}return void 0!==h.tiltAngle&&(p.tiltAngle=h.tiltAngle),void 0!==h.tracking&&(p.tracking=h.tracking),void 0!==h.widthFactor&&(p.widthFactor=h.widthFactor),void 0!==h.textPosition&&(p.textPosition=h.textPosition),p}(t);if(Object.keys(M).length>0){x+="{",void 0===M.font&&!0!==M.bold&&!0!==M.italic||(x+=Rn.font(t));for(var k=0,I=["fontSize","color","tiltAngle","tracking","widthFactor"];k<I.length;k++){var N=I[k];if(void 0!==M[N])x+=(0,Rn[N])(t)}if(h)(!0===M.underline||!0===M.overline||!0===M.strike)&&(x+=function generateDecorationCommands(t){var p="";return t.underline&&(p+="\\".concat(vn.Underline)),t.overline&&(p+="\\".concat(vn.Overline)),t.strike&&(p+="\\".concat(vn.Strike)),p||""}(M));var V=t.textPosition;x+="superscript"===V?"\\".concat(vn.SuperSubScript).concat(escapeCADSpecialChars(t.text),"^;"):"subscript"===V?"\\".concat(vn.SuperSubScript,"^").concat(escapeCADSpecialChars(t.text),";"):escapeCADSpecialChars(t.text),x+="}"}else x+=escapeCADSpecialChars(t.text);return x}function processElement(t){if("paragraph"!==t.type)return"";var p="";void 0!==t.alignment&&(p+=function getParagraphAlignmentCommand(t){var p=gn.Left;switch(t){case"center":p=gn.Center;break;case"right":p=gn.Right;break;case"justify":p=gn.Justify;break;case"distribute":p=gn.Distribute;break;default:p=gn.Left}return"\\pxq".concat(p,";")}(t.alignment)),void 0!==t.lineHeightRatio&&(p+="\\".concat(vn.LineSpacing).concat(t.lineHeightRatio.toFixed(2),";"));var h,x=_createForOfIteratorHelper$4(t.children);try{for(x.s();!(h=x.n()).done;){p+=processText(h.value)}}catch(M){x.e(M)}finally{x.f()}return p}function _createForOfIteratorHelper$3(t,p){var h="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!h){if(Array.isArray(t)||(h=function _unsupportedIterableToArray$3(t,p){if(!t)return;if("string"==typeof t)return _arrayLikeToArray$3(t,p);var h=Object.prototype.toString.call(t).slice(8,-1);"Object"===h&&t.constructor&&(h=t.constructor.name);if("Map"===h||"Set"===h)return Array.from(t);if("Arguments"===h||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return _arrayLikeToArray$3(t,p)}(t))||p&&t&&"number"==typeof t.length){h&&(t=h);var x=0,M=function F(){};return{s:M,n:function n(){return x>=t.length?{done:!0}:{done:!1,value:t[x++]}},e:function e(t){throw t},f:M}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var k,I=!0,N=!1;return{s:function s(){h=h.call(t)},n:function n(){var t=h.next();return I=t.done,t},e:function e(t){N=!0,k=t},f:function f(){try{I||null==h.return||h.return()}finally{if(N)throw k}}}}function _arrayLikeToArray$3(t,p){(null==p||p>t.length)&&(p=t.length);for(var h=0,x=new Array(p);h<p;h++)x[h]=t[h];return x}function ownKeys$2(t,p){var h=Object.keys(t);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(t);p&&(x=x.filter((function(p){return Object.getOwnPropertyDescriptor(t,p).enumerable}))),h.push.apply(h,x)}return h}function _objectSpread$2(t){for(var p=1;p<arguments.length;p++){var h=null!=arguments[p]?arguments[p]:{};p%2?ownKeys$2(Object(h),!0).forEach((function(p){_defineProperty(t,p,h[p])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(h)):ownKeys$2(Object(h)).forEach((function(p){Object.defineProperty(t,p,Object.getOwnPropertyDescriptor(h,p))}))}return t}var Bn=function drawLine(t,p,h,x){var M=new nn(p.x,p.y,p.z),k=new nn(h.x,h.y,h.z),I=new Rt(M,k);return x&&I.transformBy(x),t.drawEntity(I),I};function calculateLineOffset(p,h,x){if(10===p)return 0;if(11===p)return 0;switch(p){case t.McDb.AttachmentPoint.kMiddleCenter:case t.McDb.AttachmentPoint.kTopCenter:case t.McDb.AttachmentPoint.kBottomCenter:return(x-h)/2;case t.McDb.AttachmentPoint.kMiddleRight:case t.McDb.AttachmentPoint.kTopRight:case t.McDb.AttachmentPoint.kBottomRight:return x-h;default:return 0}}var Nn=function renderParagraph(p,h,x){var M=x.position,k=x.height,I=x.lines,N=x.contentHeight,V=x.width,ee=x.transformsMatrix,te=x.node,re=[],ne=0,ie=new WeakMap,ae=new Set,oe=function renderMText(){var t=Array.from(ae)[0];if(!t)return 0;var x=ie.get(t);if(!x)return 0;var M=x.positionInfo,I=x.lineHeight,N=0,te=0,ne=Array.from(ae).map((function(t){var x=ie.get(t),V=Object.assign({},t);if(x){V.text=x.text;var ne=kn(t,k,p);te=Math.max(te,ne);var ae=Object.assign({},M);if(ae.verticalOffset+=I-ne,ae.horizontalOffset+=N,t.color){var oe=Sn(t);oe&&(h.trueColor=oe)}var se=Pn(ae),ce=se.clone().addvec(sn.kXAxis.clone().mult(x.width)).addvec(sn.kYAxis.clone().negate().mult(ne));t.underline&&re.push(Bn(h,new nn(se.x,ce.y),ce,he.isEditState?void 0:ee)),t.strike&&re.push(Bn(h,se.clone().addvec(sn.kYAxis.clone().mult(.5*-ne)),ce.clone().subvec(sn.kYAxis.clone().mult(.5*-ne)),he.isEditState?void 0:ee)),t.overline&&re.push(Bn(h,se,new nn(ce.x,se.y,se.z),he.isEditState?void 0:ee)),h.trueColor=p.trueColor,N+=x.width}return V}));M.verticalOffset+=I-te;var oe,ce=N,ue=Math.max(V,N),le=new Ft,pe="",fe=_createForOfIteratorHelper$3(ne);try{for(fe.s();!(oe=fe.n()).done;){pe+=processText(oe.value,{isDecorative:!1})}}catch(de){fe.e(de)}finally{fe.f()}return 11===se&&pe.length>1&&ue<V&&(pe="\\pxqd;".concat(pe)),le.contents=pe,le.textHeight=k,le.location=Pn(M),le.width=ue,le.trueColor=p.trueColor,ae.clear(),ie=new WeakMap,he.isEditState||le.transformBy(ee),h.drawEntity(le),re.push(le),ce},se=p.textAlignment;if(isElement(te)&&"paragraph"===te.type){var ce=te;ce.alignment&&(se="justify"===ce.alignment?p.textAlignment:function getAttachmentPointFromAlignment(p){switch(p){case"center":return t.McDb.AttachmentPoint.kTopCenter;case"right":return t.McDb.AttachmentPoint.kTopRight;case"justify":return 10;case"distribute":return 11;default:return t.McDb.AttachmentPoint.kTopLeft}}(ce.alignment))}var ue=p.lineHeightRatio;if(isElement(te)&&"paragraph"===te.type){var le=te;void 0!==le.lineHeightRatio&&(ue=le.lineHeightRatio)}var pe=function calculateLinesOffset(t,p,h){return t.map((function(t){return _objectSpread$2(_objectSpread$2({},t),{},{horizontalOffset:calculateLineOffset(p,t.width,h)})}))}(I,se,V),he=p.getMTextImp();return pe.forEach((function(t){var x=t.horizontalOffset||0,I=t.nodes.reduce((function(t,p){return isText(p.node)&&p.node.type&&qn.elementTextManager.hasText(p.node.type)||isElement(p.node)?t+1:t+(p.endOffset-p.startOffset)}),0);t.nodes.forEach((function(N){var V={basePosition:M,horizontalOffset:x,verticalOffset:ne+t.height},te=1===I&&N.hasCharLevelSpacing;if(te&&(V.horizontalOffset+=N.extraCharSpacing||0),isText(N.node)){var se="superscript"===N.node.textPosition||"subscript"===N.node.textPosition;if(N.node.type&&qn.elementTextManager.hasText(N.node.type)){var ce=oe();x+=ce;var ue=qn.elementTextManager.getText(N.node.type),le=An(p,N.node),pe=le||{width:0,height:0},fe=pe.width,de=pe.height;V.verticalOffset-=de,te||(V.horizontalOffset=x);var me=Pn(V),ge=(null==ue?void 0:ue.create(p,N.node,le||{width:fe,height:de},{position:me}))||[];ge.forEach((function(t){var p=wn(N.node,t);he.isEditState||t.transformBy(ee),p&&(h.trueColor=p),h.drawEntity(t)})),re.push.apply(re,_toConsumableArray(ge)),x+=fe+(N.extraCharSpacing||0)}else if(se){var ve=oe();x+=ve,te||(V.horizontalOffset=x);var ye=N.node.text.substring(N.startOffset,N.endOffset),xe=("mtext"!==p.getMTextImp().entityType||p.getMTextImp().isEditState?N.hasCharLevelSpacing:N.hasCharLevelSpacing&&t.isEndLine)||N.node.tracking,be={basePosition:V.basePosition.clone(),horizontalOffset:V.horizontalOffset,verticalOffset:V.verticalOffset-t.height},_e=kn(N.node,k/2,p);if("superscript"===N.node.textPosition?t.height>N.height&&(be.verticalOffset-=t.height-N.height):be.verticalOffset+=t.height-_e,xe)for(var Me=0;Me<ye.length;Me++){var Ce=ye[Me],we=On({node:N.node,text:Ce,height:k/2,position:be,style:p.textStyle,ent:p});he.isEditState||we.transformBy(ee);var Se=N.width/ye.length,Te=0;if(N.hasCharLevelSpacing){var Ae=t.nodes.indexOf(N)===t.nodes.length-1,ke=Me===ye.length-1;Ae&&ke||(Te=N.extraCharSpacing||0)}N.node.tracking&&(Te+=N.node.tracking*(k/2));var De=Se+Te,Oe=we.location.clone(),Ie=Oe.clone().addvec(sn.kXAxis.clone().mult(De)).addvec(sn.kYAxis.clone().negate().mult(_e));if(N.node.color){var Le=Sn(N.node);Le&&(h.trueColor=Le)}if(N.node.underline){var Ee=Bn(h,new nn(Oe.x,Ie.y,Oe.z),new nn(Ie.x,Ie.y,Oe.z),he.isEditState?void 0:ee);re.push(Ee)}if(N.node.strike){var Re=Oe.y-.5*_e,Be=Bn(h,new nn(Oe.x,Re,Oe.z),new nn(Ie.x,Re,Oe.z),he.isEditState?void 0:ee);re.push(Be)}if(N.node.overline){var Ne=Bn(h,new nn(Oe.x,Oe.y,Oe.z),new nn(Ie.x,Oe.y,Oe.z),he.isEditState?void 0:ee);re.push(Ne)}h.drawEntity(we),re.push(we),h.trueColor=p.trueColor,be.horizontalOffset+=De,x+=De}else{var Ge=On({node:N.node,text:ye,height:k/2,position:be,style:p.textStyle,ent:p});if(he.isEditState||Ge.transformBy(ee),N.node.color){var Fe=Sn(N.node);Fe&&(h.trueColor=Fe)}h.drawEntity(Ge),re.push(Ge);var Ve=Ge.location.clone(),Ue=Ve.clone().addvec(sn.kXAxis.clone().mult(N.width)).addvec(sn.kYAxis.clone().negate().mult(_e));if(N.node.underline){var je=Bn(h,new nn(Ve.x,Ue.y,Ve.z),new nn(Ue.x,Ue.y,Ve.z),he.isEditState?void 0:ee);re.push(je)}if(N.node.strike){var We=Ve.y-.5*_e,ze=Bn(h,new nn(Ve.x,We,Ve.z),new nn(Ue.x,We,Ve.z),he.isEditState?void 0:ee);re.push(ze)}if(N.node.overline){var He=Bn(h,new nn(Ve.x,Ve.y,Ve.z),new nn(Ue.x,Ve.y,Ve.z),he.isEditState?void 0:ee);re.push(He)}h.trueColor=p.trueColor,x+=N.width+(N.extraCharSpacing||0)}}else if(("mtext"!==p.getMTextImp().entityType||p.getMTextImp().isEditState?N.hasCharLevelSpacing:N.hasCharLevelSpacing&&t.isEndLine)||N.node.tracking){var $e=oe();x+=$e,te||(V.horizontalOffset=x);var Ye=N.node.text.substring(N.startOffset,N.endOffset),Ke=kn(N.node,k,p);V.verticalOffset-=Ke;for(var Xe=0;Xe<Ye.length;Xe++){var qe=Ye[Xe],Ze=On({node:N.node,text:qe,height:k,position:V,style:p.textStyle,ent:p});he.isEditState||Ze.transformBy(ee);var Je=getTextWidth(qe,N.node,k,p.textStyle,p),Qe=0;if(N.hasCharLevelSpacing)if(1===I)Qe=0;else{var et=t.nodes.indexOf(N)===t.nodes.length-1,tt=Xe===Ye.length-1;et&&tt||(Qe=N.extraCharSpacing||0)}var rt=Je+Qe;V.horizontalOffset+=rt;var nt=Ze.location.clone(),it=nt.clone().addvec(sn.kXAxis.clone().mult(rt)).addvec(sn.kYAxis.clone().negate().mult(Ke));if(N.node.color){var ot=Sn(N.node);ot&&(h.trueColor=ot)}if(N.node.underline){var st=Bn(h,new nn(nt.x,it.y,nt.z),new nn(it.x,it.y,nt.z),he.isEditState?void 0:ee);re.push(st)}if(N.node.strike){var ct=nt.y-.5*Ke,ut=Bn(h,new nn(nt.x,ct,nt.z),new nn(it.x,ct,nt.z),he.isEditState?void 0:ee);re.push(ut)}if(N.node.overline){var lt=Bn(h,new nn(nt.x,nt.y,nt.z),new nn(it.x,nt.y,nt.z),he.isEditState?void 0:ee);re.push(lt)}h.drawEntity(Ze),re.push(Ze),h.trueColor=p.trueColor,x+=rt}}else{ae.add(N.node);var pt=N.node.text.substring(N.startOffset,N.endOffset);if(ie.has(N.node)){var ht=ie.get(N.node);ht&&(ht.text+=pt,ht.width+=N.width)}else V.verticalOffset-=t.height,ie.set(N.node,{positionInfo:V,text:pt,width:N.width,lineHeight:t.height})}}else if(isElement(N.node)){var ft=oe();x+=ft,te||(V.horizontalOffset=x);var dt=qn.elementTextManager.get(N.node.type),mt=Mn(p,N.node),gt=mt.width,vt=mt.height;V.verticalOffset-=vt;var yt=Pn(V),xt=((null==dt?void 0:dt.render(p,h,N.node,mt,{position:yt,index:N.index,alignmentWidth:gt}))||{}).entitys,bt=void 0===xt?[]:xt;bt.forEach((function(t){he.isEditState||t.transformBy(ee)})),re.push.apply(re,_toConsumableArray(bt)),x+=gt+(N.extraCharSpacing||0)}})),oe();var N=t.height*(ue-1);t.bottomSpacing=N,ne+=t.height+(t.bottomSpacing||0)})),{entitys:re,position:M,width:x.width,height:N,lines:pe}};function _createSuper$5(t){var p=function _isNativeReflectConstruct$6(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(bm){return!1}}();return function _createSuperInternal(){var h,x=_getPrototypeOf$1(t);if(p){var M=_getPrototypeOf$1(this).constructor;h=Reflect.construct(x,arguments,M)}else h=x.apply(this,arguments);return _possibleConstructorReturn$1(this,h)}}var Gn=function(t){_inherits$1(MxCADParagraphElement,t);var p=_createSuper$5(MxCADParagraphElement);function MxCADParagraphElement(){var t;_classCallCheck$1(this,MxCADParagraphElement);for(var h=arguments.length,x=new Array(h),M=0;M<h;M++)x[M]=arguments[M];return _defineProperty(_assertThisInitialized$1(t=p.call.apply(p,[this].concat(x))),"type","paragraph"),t}return _createClass$1(MxCADParagraphElement,[{key:"render",value:function render(t,p,h,x,M){var k=M.position,I=M.index,N=M.alignmentWidth,V=t.textBaseHeight,ee=t.isWordWrap,te=t.getMTextImp().met;return Nn(t,p,{position:k,isWordWrap:ee,height:V,index:I,lines:x.lines||[],width:N,contentHeight:x.height,transformsMatrix:te,calculateData:x,node:h})}},{key:"calculate",value:function calculate(t,p,h){return function calculateParagraph(t,p,h,x){var M=t.lineHeightRatio;if("paragraph"===p.type){var k=p;void 0!==k.lineHeightRatio&&(M=k.lineHeightRatio)}var I,N=p.children;if(0===N.length||1===N.length&&isText(N[0])&&""===N[0].text){var V=[x,0],ee={nodes:[{node:N[0]||_objectSpread$3({text:""},Object.create(null)),path:V,startOffset:0,endOffset:0,width:0,height:h,index:0}],height:h,width:0,breakInfo:{isWrapped:!1,breakType:mn.None},horizontalOffset:0,bottomSpacing:h*(M-1)};return{width:0,height:h+ee.bottomSpacing,lines:[ee]}}var te=!1;if("paragraph"===p.type&&(te="distribute"===p.alignment),t.isWordWrap){var re=t.getMTextImp();I=calculateLineBreaks(t,N,x,{maxWidth:re.maxWidth,baseHeight:h,getTextWidth:function getTextWidth$1(){for(var p=arguments.length,h=new Array(p),x=0;x<p;x++)h[x]=arguments[x];return getTextWidth.apply(void 0,h.concat([t.textStyle,t]))},getTextHeight:function getTextHeight$1(p,h){return kn(p,h,t)},style:t.textStyle,lineHeightRatio:M,isWidthOffset:te})}else{var ne=N.reduce((function(p,x){return isElement(x)?p+Mn(t,x).width:p+getTextWidth(x.text,x,h,t.textStyle,t)}),0),ie=Math.max.apply(Math,_toConsumableArray(N.map((function(p){return isElement(p)?Mn(t,p).height:kn(p,h,t)}))));I=[{nodes:N.map((function(p,M){var k=0,I=0;if(isElement(p)){var N=Mn(t,p);k=N.width,I=N.height}else k=getTextWidth(p.text,p,h,t.textStyle,t),I=kn(p,h,t);return{node:p,path:[x,M],startOffset:0,endOffset:isText(p)?p.text.length:0,width:k,height:I,index:M}})),height:ie,bottomSpacing:h*(M-1),width:ne,breakInfo:{isWrapped:!1,breakType:mn.None}}]}var ae=I.reduce((function(t,p){return t+p.height+(p.bottomSpacing||0)}),0);return{width:Math.max.apply(Math,_toConsumableArray(I.map((function(t){return t.width})))),height:ae,lines:I}}(t,p,t.textBaseHeight,h)}}]),MxCADParagraphElement}(dn),Fn=function(){function ElementTextManager(){_classCallCheck$1(this,ElementTextManager),_defineProperty(this,"elementMap",new Map),_defineProperty(this,"textMap",new Map),this.registerElement(new Gn)}return _createClass$1(ElementTextManager,[{key:"registerElement",value:function registerElement(t){this.elementMap.set(t.type,t)}},{key:"registerTextNode",value:function registerTextNode(t){this.textMap.set(t.type,t)}},{key:"getText",value:function getText(t){return this.textMap.get(t)}},{key:"hasText",value:function hasText(t){return this.textMap.has(t)}},{key:"get",value:function get(t){return this.elementMap.get(t)}},{key:"has",value:function has(t){return this.elementMap.has(t)}}]),ElementTextManager}(),Vn=function(){function PubSub(){_classCallCheck$1(this,PubSub),_defineProperty(this,"events",void 0),this.events={}}return _createClass$1(PubSub,[{key:"on",value:function on(t,p){var h=this;h.events.hasOwnProperty(t)||(h.events[t]=[]),h.events[t].push(p)}},{key:"once",value:function once(t,p){var h=this;this.on(t,(function onceWrapper(){p.apply(void 0,arguments),h.off(t,onceWrapper)}))}},{key:"emit",value:function emit(t){for(var p=arguments.length,h=new Array(p>1?p-1:0),x=1;x<p;x++)h[x-1]=arguments[x];this.events.hasOwnProperty(t)&&this.events[t].map((function(t){return t.apply(void 0,h)}))}},{key:"off",value:function off(t,p){if(this.events[t])if(void 0===p)this.events[t]=[];else{var h=this.events[t].indexOf(p);this.events[t].splice(h,1)}}}]),PubSub}();function getActualRenderStartPosition(){var p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.actualHeight,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.actualWidth,x=this.getTopLeftPt(),M=x.y-this.maxHeight/2,k=x.x+this.maxWidth/2,I=x.y,N=x.x;switch(this.textAlignment){case t.McDb.AttachmentPoint.kMiddleLeft:case t.McDb.AttachmentPoint.kMiddleCenter:case t.McDb.AttachmentPoint.kMiddleRight:I=M+p/2;break;case t.McDb.AttachmentPoint.kBottomLeft:case t.McDb.AttachmentPoint.kBottomCenter:case t.McDb.AttachmentPoint.kBottomRight:I=x.y-this.maxHeight+p;break;default:I=x.y}if(h>this.maxWidth)switch(this.textAlignment){case t.McDb.AttachmentPoint.kTopCenter:case t.McDb.AttachmentPoint.kMiddleCenter:case t.McDb.AttachmentPoint.kBottomCenter:N=k-h/2;break;case t.McDb.AttachmentPoint.kTopRight:case t.McDb.AttachmentPoint.kMiddleRight:case t.McDb.AttachmentPoint.kBottomRight:N=x.x+this.maxWidth-h;break;default:N=x.x}else switch(this.textAlignment){case t.McDb.AttachmentPoint.kTopCenter:case t.McDb.AttachmentPoint.kMiddleCenter:case t.McDb.AttachmentPoint.kBottomCenter:N=k-h/2;break;case t.McDb.AttachmentPoint.kTopRight:case t.McDb.AttachmentPoint.kMiddleRight:case t.McDb.AttachmentPoint.kBottomRight:N=x.x+this.maxWidth-h;break;default:N=x.x}return new nn(N,I,x.z)}var Un=function calculateParagraphPosition(t,p,h){for(var x=0,M=t.getMTextImp(),k=0;k<h;k++){var I=M.getParagraphLines(k);I&&(x+=I.reduce((function(t,p){return t+p.height+(p.bottomSpacing||0)}),0))}return p.clone().subvec(sn.kYAxis.clone().mult(x))},jn=function calculateLineVerticalPosition(t,p){var h,x,M=0;if(!t.lines||0===(null===(h=t.lines)||void 0===h?void 0:h.length))return{accumulatedHeight:0,lineHeight:0};for(var k=0;k<p;k++){var I=t.lines[k];M+=I.height+(I.bottomSpacing||0)}return{accumulatedHeight:M,lineHeight:(null===(x=t.lines[p])||void 0===x?void 0:x.height)||0}};function getLinePosition(t,p){var h=this.__PARAGRAPH_INFOS__[t];if(!h)return null;var x=h.position,M=h.lines;if(!M)return null;if(!x)return null;var k=M[p];if(!k)return null;var I=jn(h,p),N=0,V=k.nodes.some((function(t){return t.extraCharSpacing}));if(V){var ee=k.nodes.reduce((function(t,p){return isElement(p.node)||isText(p.node)&&p.node.type&&qn.elementTextManager.hasText(p.node.type)?t+1:t+(p.endOffset-p.startOffset)}),0);if(1===ee){var te=k.nodes[0];N=te.width,te.extraCharSpacing&&(N+=te.extraCharSpacing)}else if(2===ee)for(var re=0;re<k.nodes.length;re++){var ne=k.nodes[re];N+=ne.width,0===re&&ne.extraCharSpacing&&(N+=2*ne.extraCharSpacing)}else for(var ie=0;ie<k.nodes.length;ie++){var ae=k.nodes[ie];if(N+=ae.width,ae.extraCharSpacing){var oe=ie===k.nodes.length-1,se=0;isText(ae.node)&&ae.node.type&&qn.elementTextManager.hasText(ae.node.type)||isElement(ae.node)?(N+=ae.extraCharSpacing,se=1):se=ae.endOffset-ae.startOffset,N+=oe?ae.extraCharSpacing*Math.max(0,se-1):ae.extraCharSpacing*se}}}else N=k.nodes.reduce((function(t,p){return t+p.width}),0);return function calculateLinePosition(t,p,h){var x=h.accumulatedHeight,M=h.lineHeight,k=t.y-x,I=k-M;return{start:new nn(t.x,k),end:new nn(t.x+p,k),minPt:new nn(t.x,k),maxPt:new nn(t.x+p,I),height:M}}(x,N,I)}function _createSuper$4(t){var p=function _isNativeReflectConstruct$5(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(bm){return!1}}();return function _createSuperInternal(){var h,x=_getPrototypeOf$1(t);if(p){var M=_getPrototypeOf$1(this).constructor;h=Reflect.construct(x,arguments,M)}else h=x.apply(this,arguments);return _possibleConstructorReturn$1(this,h)}}var Wn,zn=function(p){_inherits$1(MxCADMTextImp,p);var h=_createSuper$4(MxCADMTextImp);function MxCADMTextImp(){var p;_classCallCheck$1(this,MxCADMTextImp);for(var x=arguments.length,M=new Array(x),k=0;k<x;k++)M[k]=arguments[k];return _defineProperty(_assertThisInitialized$1(p=h.call.apply(h,[this].concat(M))),"position",new nn),_defineProperty(_assertThisInitialized$1(p),"maxWidth",0),_defineProperty(_assertThisInitialized$1(p),"maxHeight",0),_defineProperty(_assertThisInitialized$1(p),"textBaseHeight",20),_defineProperty(_assertThisInitialized$1(p),"data",void 0),_defineProperty(_assertThisInitialized$1(p),"isWordWrap",!0),_defineProperty(_assertThisInitialized$1(p),"textAlignment",t.McDb.AttachmentPoint.kTopLeft),_defineProperty(_assertThisInitialized$1(p),"actualHeight",0),_defineProperty(_assertThisInitialized$1(p),"actualWidth",0),_defineProperty(_assertThisInitialized$1(p),"met",new cn),_defineProperty(_assertThisInitialized$1(p),"angle",0),_defineProperty(_assertThisInitialized$1(p),"lineHeightRatio",1.65),_defineProperty(_assertThisInitialized$1(p),"entityType","custom"),_defineProperty(_assertThisInitialized$1(p),"isEditState",!1),_defineProperty(_assertThisInitialized$1(p),"__PARAGRAPH_INFOS__",[]),_defineProperty(_assertThisInitialized$1(p),"getActualRenderStartPosition",getActualRenderStartPosition),_defineProperty(_assertThisInitialized$1(p),"getLinePosition",getLinePosition),_defineProperty(_assertThisInitialized$1(p),"getTextHeight",kn),_defineProperty(_assertThisInitialized$1(p),"getColor",Sn),p}return _createClass$1(MxCADMTextImp,[{key:"isCustomTextOrElement",get:function get(){var t=this;if(!this.data||0===this.data.length)return!1;return this.data.some((function isSome(p){if(isText(p)){if(p.type&&qn.elementTextManager.hasText(p.type))return!0;if("tracking"in p&&1!==p.tracking)return!0;if("textPosition"in p&&("superscript"===p.textPosition||"subscript"===p.textPosition))return!0;if("underline"in p&&p.underline)return!0;if("strike"in p&&p.strike)return!0;if("overline"in p&&p.overline)return!0}if(isElement(p)){if(function isParagraph(t){return"paragraph"===t.type}(p)){if("distribute"===p.alignment)return!0;if("number"==typeof p.lineHeightRatio&&p.lineHeightRatio!==t.lineHeightRatio)return!0}else if(qn.elementTextManager.has(p.type))return!0;return p.children.some(isSome)}return!1}))}},{key:"dwgInFields",value:function dwgInFields(t){this.position=t.readPoint("position").val,this.maxWidth=t.readDouble("maxWidth").val,this.maxHeight=t.readDouble("maxHeight").val,this.textBaseHeight=t.readDouble("textBaseHeight").val;var p=t.readString("data").val;this.data=JSON.parse(p),this.textAlignment=t.readDouble("textAlignment").val,this.angle=t.readDouble("angle").val,this.lineHeightRatio=t.readDouble("lineHeightRatio").val||1;for(var h=t.readString("met").val,x=JSON.parse(h),M=0;M<x.length;M++)for(var k=x[M],I=0;I<k.length;I++){var N=k[I];this.met.setData(M,I,N)}return this.isWordWrap=1===t.readDouble("isWordWrap").val,this.entityType=t.readString("entityType").val||"custom",!0}},{key:"dwgOutFields",value:function dwgOutFields(t){t.writePoint("position",this.position),t.writeDouble("maxWidth",this.maxWidth),t.writeDouble("maxHeight",this.maxHeight),t.writeDouble("textBaseHeight",this.textBaseHeight),t.writeString("data",JSON.stringify(this.data)),t.writeDouble("textAlignment",this.textAlignment),t.writeDouble("angle",this.angle),t.writeDouble("lineHeightRatio",this.lineHeightRatio),t.writeDouble("isWordWrap",this.isWordWrap?1:0),t.writeString("entityType",this.entityType);for(var p=[],h=0;h<4;h++){p[h]=[];for(var x=0;x<4;x++){var M=this.met.getData(h,x);p[h][x]=M}}return t.writeString("met",JSON.stringify(p)),!0}},{key:"getGripPoints",value:function getGripPoints(){var t=new pn;if(this.isEditState)return t;var p=this.position.clone(),h=new nn(this.position.x+this.maxWidth,this.position.y,this.position.z),x=new nn(this.position.x+this.maxWidth/2,this.position.y-this.maxHeight,this.position.z),M=p.transformBy(this.met),k=h.transformBy(this.met),I=x.transformBy(this.met);return t.append(M),t.append(k),t.append(I),t}},{key:"moveGripPointsAt",value:function moveGripPointsAt(t,p,h,x){var M=new cn;if(M.copy(this.met),M.invert(),0===t){var k=this.position.clone().transformBy(this.met);k.x+=p,k.y+=h,k.z+=x,this.position=k.transformBy(M)}else if(1===t){var I=new nn(this.position.x+this.maxWidth,this.position.y,this.position.z).clone().transformBy(this.met);I.x+=p,I.y+=h,I.z+=x;var N=I.transformBy(M);this.maxWidth=N.x-this.position.x,this.maxWidth<=0&&(this.maxWidth=this.textBaseHeight)}else if(2===t){var V=new nn(this.position.x+this.maxWidth/2,this.position.y-this.maxHeight,this.position.z).clone().transformBy(this.met);V.x+=p,V.y+=h,V.z+=x;var ee=V.transformBy(M);this.maxHeight=this.position.y-ee.y,this.maxHeight<0&&(this.maxHeight=0)}}},{key:"getParagraphLines",value:function getParagraphLines(t){var p=this.__PARAGRAPH_INFOS__[t];return(null==p?void 0:p.lines)||[]}},{key:"getLineCount",value:function getLineCount(t){var p,h=this.__PARAGRAPH_INFOS__[t];return h?null===(p=h.lines)||void 0===p?void 0:p.length:0}},{key:"setData",value:function setData(t){this.data=t}},{key:"getTopLeftPt",value:function getTopLeftPt(){return this.isEditState?this.position.clone().transformBy(this.met):this.position.clone()}},{key:"getLineHorizontalOffset",value:function getLineHorizontalOffset(t,p){var h,x=this.__PARAGRAPH_INFOS__[t];return x&&null!==(h=x.lines)&&void 0!==h&&h[p]&&x.lines[p].horizontalOffset||0}},{key:"getTotalContentHeight",value:function getTotalContentHeight(){return this.__PARAGRAPH_INFOS__.reduce((function(t,p){return t+((null==p?void 0:p.height)||0)}),0)}},{key:"setEntityType",value:function setEntityType(t){this.entityType!==t&&(this.entityType=t)}}]),MxCADMTextImp}(Vn);function ownKeys$1(t,p){var h=Object.keys(t);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(t);p&&(x=x.filter((function(p){return Object.getOwnPropertyDescriptor(t,p).enumerable}))),h.push.apply(h,x)}return h}function _objectSpread$1(t){for(var p=1;p<arguments.length;p++){var h=null!=arguments[p]?arguments[p]:{};p%2?ownKeys$1(Object(h),!0).forEach((function(p){_defineProperty(t,p,h[p])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(h)):ownKeys$1(Object(h)).forEach((function(p){Object.defineProperty(t,p,Object.getOwnPropertyDescriptor(h,p))}))}return t}function setFormat(t,p,h){flushCurrentText(t),t.formats=_objectSpread$1(_objectSpread$1({},t.formats),{},_defineProperty({},p,h))}function createBooleanFormatHandler(t,p){return function(h){setFormat(h,t,p)}}var Hn=(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(Wn={},vn.Paragraph,(function(t){flushCurrentText(t),t.currentBlock.children.length>0&&t.blocks.push(t.currentBlock),t.currentBlock={type:"paragraph",children:[]}})),vn.Color,(function(t,p){setFormat(t,"color",function decimalToRgb(t){return[255&t,t>>8&255,t>>16]}(parseInt(p,10)))})),vn.ColorIndex,(function(t,p){var h=0;try{h=parseInt(p,10)}catch(bm){}setFormat(t,"color",h)})),vn.Font,handleFontCommand),vn.FontAlt,handleFontCommand),vn.FontHeight,(function(t,p){var h=p.replace(/x$/i,"");setFormat(t,"fontSize",parseFloat(h))})),vn.Overline,createBooleanFormatHandler("overline",!0)),vn.OverlineEnd,createBooleanFormatHandler("overline",!1)),vn.Strike,createBooleanFormatHandler("strike",!0)),vn.StrikeEnd,createBooleanFormatHandler("strike",!1)),_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(Wn,vn.Underline,createBooleanFormatHandler("underline",!0)),vn.UnderlineEnd,createBooleanFormatHandler("underline",!1)),vn.SuperSubScript,(function(t,p){flushCurrentText(t);var h=p;if(h.startsWith("^")){var x=h.substring(1);if(x.length>0){var M=_objectSpread$1(_objectSpread$1({},t.formats),{},{textPosition:"subscript"});t.currentBlock.children.push(createFormattedTextNode(x,M))}}else if(h.endsWith("^")&&!h.startsWith("^")){var k=h.substring(0,h.length-1);if(k.length>0){var I=_objectSpread$1(_objectSpread$1({},t.formats),{},{textPosition:"superscript"});t.currentBlock.children.push(createFormattedTextNode(k,I))}}else t.currentText+=h})),vn.TiltAngle,(function(t,p){var h=parseFloat(p);isNaN(h)||setFormat(t,"tiltAngle",h)})),vn.Tracking,(function(t,p){var h=parseFloat(p);isNaN(h)||setFormat(t,"tracking",h)})),vn.WidthFactor,(function(t,p){var h=parseFloat(p);isNaN(h)||setFormat(t,"widthFactor",h)})));function handleFontCommand(t,p){flushCurrentText(t);var h=p.split("|"),x=h[0],M="b1"===h.find((function(t){return t.startsWith("b")})),k="i1"===h.find((function(t){return t.startsWith("i")}));t.formats=_objectSpread$1(_objectSpread$1({},t.formats),{},{font:x||void 0,bold:M,italic:k})}function flushCurrentText(t){t.currentText.length>0&&(t.currentBlock.children.push(createFormattedTextNode(t.currentText,t.formats)),t.currentText="")}function getCommandTypeFromChar(t){switch(t){case vn.Paragraph:return vn.Paragraph;case vn.Color:return vn.Color;case vn.ColorIndex:return vn.ColorIndex;case vn.Font:return vn.Font;case vn.FontAlt:return vn.FontAlt;case vn.FontHeight:return vn.FontHeight;case vn.Overline:return vn.Overline;case vn.OverlineEnd:return vn.OverlineEnd;case vn.Strike:return vn.Strike;case vn.StrikeEnd:return vn.StrikeEnd;case vn.Underline:return vn.Underline;case vn.UnderlineEnd:return vn.UnderlineEnd;case vn.TiltAngle:return vn.TiltAngle;case vn.Tracking:return vn.Tracking;case vn.WidthFactor:return vn.WidthFactor;case vn.SuperSubScript:return vn.SuperSubScript;default:return null}}function isNoParamCommand(t){return["P","O","K","L","o","k","l"].includes(t)}function processCommand(t,p){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("p"===p&&h.startsWith("xq")&&h.length>=3){var x=h[2];return!!"clrjd".includes(x)&&(t.currentBlock.alignment=function getParagraphAlignmentValue(t){switch(t){case gn.Center:return"center";case gn.Right:return"right";case gn.Justify:return"justify";case gn.Distribute:return"distribute";case gn.Left:default:return"left"}}(x),!0)}if("p"===p&&h.startsWith("xsm")&&h.length>3){var M=h.substring(3),k=parseFloat(M);return!isNaN(k)&&k>0&&(t.currentBlock.lineHeightRatio=k,!0)}if(p===vn.SuperSubScript){var I=h.endsWith(";")?h.slice(0,-1):h,N=getCommandTypeFromChar(p);if(N&&Hn[N])return Hn[N](t,I),!0}var V=getCommandTypeFromChar(p);return!(!V||!Hn[V])&&(Hn[V](t,h),!0)}var $n=function(){function MultilineTextConverter(){_classCallCheck$1(this,MultilineTextConverter)}return _createClass$1(MultilineTextConverter,null,[{key:"fromMText",value:function fromMText(p){var h,x=new qn,M=p.getBoundingBox(),k=p.location,I=0===p.width?M.maxPt.x-M.minPt.x:p.width,N=M.maxPt.y-M.minPt.y;switch(p.attachment){case t.McDb.AttachmentPoint.kTopLeft:h=k.clone();break;case t.McDb.AttachmentPoint.kTopCenter:h=new nn(k.x-I/2,k.y,k.z);break;case t.McDb.AttachmentPoint.kTopRight:h=new nn(k.x-I,k.y,k.z);break;case t.McDb.AttachmentPoint.kMiddleLeft:h=new nn(k.x,k.y+N/2,k.z);break;case t.McDb.AttachmentPoint.kMiddleCenter:h=new nn(k.x-I/2,k.y+N/2,k.z);break;case t.McDb.AttachmentPoint.kMiddleRight:h=new nn(k.x-I,k.y+N/2,k.z);break;case t.McDb.AttachmentPoint.kBottomLeft:h=new nn(k.x,k.y+N,k.z);break;case t.McDb.AttachmentPoint.kBottomCenter:h=new nn(k.x-I/2,k.y+N,k.z);break;case t.McDb.AttachmentPoint.kBottomRight:h=new nn(k.x-I,k.y+N,k.z);break;default:h=k.clone()}x.position=h,x.maxWidth=I,x.maxHeight=N,x.layer=p.layer,x.drawOrder=p.drawOrder,x.linetype=p.linetype,x.normal=p.normal,x.lineweight=p.lineweight,x.linetypeScale=p.linetypeScale,x.textBaseHeight=p.textHeight,x.textAlignment=p.attachment,x.angle=THREE.MathUtils.radToDeg(p.rotation),x.textStyle=p.textStyle;var V=function cadTextToSlate(t){for(var p={currentText:"",formats:{},blocks:[],currentBlock:{type:"paragraph",children:[]},inBlock:!1,inCommand:!1,commandBuffer:"",commandGroups:[],formatStack:[]},h=0;h<t.length;){var x=t[h];if(p.inCommand)";"===x||1===p.commandBuffer.length&&isNoParamCommand(p.commandBuffer)?(processCommand(p,p.commandBuffer,""),p.inCommand=!1,p.commandBuffer="",h++):(p.commandBuffer+=x,h++);else if("\\"===x)if(h+1<t.length){var M=t[h+1];if("\\"===M)p.currentText+="\\",h+=2;else if("{"===M||"}"===M)p.currentText+=M,h+=2;else{if(flushCurrentText(p),M===vn.SuperSubScript){for(var k=h+2,I=0,N=-1;k<t.length;){var V=t[k];if("{"===V)I++;else if("}"===V)I--;else if(";"===V&&0===I){N=k;break}k++}if(-1!==N){var ee=h+2;processCommand(p,M,t.substring(ee,N)),h=N+1;continue}}if(isNoParamCommand(M)){processCommand(p,M,""),h+=2;continue}var te=t.indexOf(";",h);if(-1!==te){var re=M,ne=h+2;processCommand(p,re,ne<te?t.substring(ne,te):"")?h=te+1:(p.currentText+="\\"+re,h+=2)}else p.inCommand=!0,p.commandBuffer=M,h+=2}}else p.currentText+=x,h++;else"{"===x?(p.inBlock=!0,flushCurrentText(p),p.formatStack||(p.formatStack=[]),p.formatStack.push(_objectSpread$1({},p.formats)),h++):"}"===x?(p.inBlock=!1,flushCurrentText(p),p.formatStack&&p.formatStack.length>0?p.formats=p.formatStack.pop()||{}:p.formats={},h++):(p.currentText+=x,h++)}return flushCurrentText(p),p.currentBlock.children.length>0&&p.blocks.push(p.currentBlock),0===p.blocks.length&&p.blocks.push({type:"paragraph",children:[createFormattedTextNode("",{})]}),p.blocks}(p.contents);return x.data=V,x}},{key:"toMText",value:function toMText(p,h){var x=p.getMTextImp(),M=[];if(x.isCustomTextOrElement)return x.__PARAGRAPH_INFOS__.forEach((function(t){t.entitys.forEach((function(t){t&&M.push(t.clone())}))})),M;var k,I=p.isWordWrap?x.maxWidth:x.actualWidth,N=p.isWordWrap?x.maxHeight:x.actualHeight,V=x.getActualRenderStartPosition();switch(p.textAlignment){case t.McDb.AttachmentPoint.kTopLeft:k=V.clone();break;case t.McDb.AttachmentPoint.kTopCenter:k=new nn(V.x+I/2,V.y,V.z);break;case t.McDb.AttachmentPoint.kTopRight:k=new nn(V.x+I,V.y,V.z);break;case t.McDb.AttachmentPoint.kMiddleLeft:k=new nn(V.x,V.y-N/2,V.z);break;case t.McDb.AttachmentPoint.kMiddleCenter:k=new nn(V.x+I/2,V.y-N/2,V.z);break;case t.McDb.AttachmentPoint.kMiddleRight:k=new nn(V.x+I,V.y-N/2,V.z);break;case t.McDb.AttachmentPoint.kBottomLeft:k=new nn(V.x,V.y-N,V.z);break;case t.McDb.AttachmentPoint.kBottomCenter:k=new nn(V.x+I/2,V.y-N,V.z);break;case t.McDb.AttachmentPoint.kBottomRight:k=new nn(V.x+I,V.y-N,V.z);break;default:k=V.clone()}var ee=function slateToCADText(t){var p,h=[],x=_createForOfIteratorHelper$4(t);try{for(x.s();!(p=x.n()).done;){var M=processElement(p.value);h.push(M)}}catch(k){x.e(k)}finally{x.f()}return h.join("\\".concat(vn.Paragraph))}(x.data);return M.push(function createText(t,x){if(h||(h=new Ft),h.textHeight=p.textBaseHeight,h.textStyle=p.textStyle,h.location=x,h.attachment=p.textAlignment,h.contents=t,!p.isWordWrap&&h.width<I){h.width=2*I,h.reCompute();var M=h.getBoundingBox(),k=M.minPt,N=M.maxPt;I=1.01*k.distanceTo(new nn(N.x,k.y))}return h.width=I,h.rotation=THREE.MathUtils.degToRad(p.angle),h}(ee,k)),M}}]),MultilineTextConverter}(),Yn=function calculateContentWidth(t){for(var p=t.getMTextImp(),h=p.data.length,x=0,M=0;M<h;M++){var k=p.getParagraphLines(M);if(k)for(var I=0;I<k.length;I++){var N=p.getLinePosition(M,I);if(N){var V=N.maxPt.x-N.minPt.x;x=Math.max(x,V)}}}return{maxWidth:x,alignmentWidth:Math.max(p.maxWidth,x)}},Kn=function calculateLineStartX(p,h,x,M,k){var I=p.getMTextImp(),N=I.textAlignment;if(void 0!==k){var V=I.data[k];if(V&&"paragraph"===V.type){var ee=V;if(ee.alignment)if("justify"===ee.alignment);else{if("distribute"===ee.alignment)return h.x;switch(ee.alignment){case"center":N=t.McDb.AttachmentPoint.kTopCenter;break;case"right":N=t.McDb.AttachmentPoint.kTopRight;break;default:N=t.McDb.AttachmentPoint.kTopLeft}}}}var te=h.x;switch(N){case t.McDb.AttachmentPoint.kTopCenter:case t.McDb.AttachmentPoint.kMiddleCenter:case t.McDb.AttachmentPoint.kBottomCenter:te=h.x+(x-M)/2;break;case t.McDb.AttachmentPoint.kTopRight:case t.McDb.AttachmentPoint.kMiddleRight:case t.McDb.AttachmentPoint.kBottomRight:te=h.x+x-M}return te};function convertCadPointToSlatePoint(t){for(var p=this,h=t.x,x=t.y,M=this.getMTextImp(),k=M.getTotalContentHeight(),I=Yn(this).alignmentWidth,N=M.getActualRenderStartPosition(k,I),V=0;V<M.__PARAGRAPH_INFOS__.length;V++){var ee,te,re=M.__PARAGRAPH_INFOS__[V];if(re){var ne=Un(this,N,V),ie=null===(ee=re.lines)||void 0===ee?void 0:ee.some((function(t){var p;return null===(p=t.nodes)||void 0===p?void 0:p.some((function(t){return!!isElement(t.node)||t.endOffset>t.startOffset}))}));if(null!==(te=re.lines)&&void 0!==te&&te.length&&ie){for(var ae,oe=function _loop(){var t,k=re.lines[se];if(null===(t=k.nodes)||void 0===t||!t.length)return 0;var N=jn(re,se).accumulatedHeight,ee=ne.y-N,te=ee-k.height-(k.bottomSpacing||0);if(x<=ee&&x>=te){for(var ie=Kn(p,ne,I,k.width,V),ae=k.nodes.some((function(t){return t.hasCharLevelSpacing})),oe=k.nodes.reduce((function(t,p){return isElement(p.node)&&qn.elementTextManager.has(p.node.type)||isText(p.node)&&p.node.type&&qn.elementTextManager.hasText(p.node.type)?t+1:t+(p.endOffset-p.startOffset)}),0),ce=[],ue=ie,le=0;le<k.nodes.length;le++){var pe=k.nodes[le],he=0;if(isElement(pe.node)&&qn.elementTextManager.has(pe.node.type))he=Mn(p,pe.node).width;else if(isText(pe.node)&&pe.node.type&&qn.elementTextManager.hasText(pe.node.type)){he=An(p,pe.node).width}else he=pe.width;ce.push({startX:ue,endX:ue+he,nodeInfo:pe}),ue+=he}if(ae&&oe>1){for(var fe=[],de=0;de<k.nodes.length;de++){var me=k.nodes[de];if(me.extraCharSpacing){var ge=0,ve=ge=isText(me.node)&&me.node.type&&qn.elementTextManager.hasText(me.node.type)||isElement(me.node)&&qn.elementTextManager.has(me.node.type)?1:me.endOffset-me.startOffset;de===k.nodes.length-1&&(ve=Math.max(0,ge-1));var ye=me.extraCharSpacing*ve;fe.push(ye)}else fe.push(0)}for(var xe=0;xe<ce.length;xe++){for(var be=0,_e=0;_e<xe;_e++)be+=fe[_e];ce[xe].startX+=be,ce[xe].endX+=be+fe[xe]}}else if(ae&&1===oe){var Me=k.nodes[0],Ce=0;if(isElement(Me.node)&&qn.elementTextManager.has(Me.node.type))Ce=Mn(p,Me.node).width;else if(isText(Me.node)&&Me.node.type&&qn.elementTextManager.hasText(Me.node.type)){Ce=An(p,Me.node).width}else Ce=Me.width;if(Me.hasCharLevelSpacing||Me.extraCharSpacing){var we=(I-Ce)/2;we>0&&(ce[0].startX+=we,ce[0].endX+=we)}}if(h<=ie){if(1===oe&&k.nodes.length>0){var Se=k.nodes[0],Te=ce.find((function(t){return t.nodeInfo===Se}));if(Te){var Ae=(Te.startX+Te.endX)/2;return h>=Ae?{v:{path:Se.path,offset:Se.endOffset}}:{v:{path:Se.path,offset:Se.startOffset}}}var ke=Se.width;return h>=ie+ke/2?{v:{path:Se.path,offset:Se.endOffset}}:{v:{path:Se.path,offset:Se.startOffset}}}if(k.nodes.length>0)return{v:{path:k.nodes[0].path,offset:k.nodes[0].startOffset}}}for(var De,Oe=function _loop2(){var t=k.nodes[Ie],x=t.startOffset,N=ce.find((function(p){return p.nodeInfo===t})),V=N?N.startX:ie+(Ie>0?k.nodes.slice(0,Ie).reduce((function(t,p){return t+p.width}),0):0),ee=N?N.endX:V+t.width;if(h>=V&&h<=ee){if(isElement(t.node)){if(h<(V+ee)/2){if(Ie>0){var te=k.nodes[Ie-1];return{v:{v:{path:te.path,offset:te.endOffset}}}}if(se>0){var ne=re.lines[se-1],ue=ne.nodes[ne.nodes.length-1];return{v:{v:{path:ue.path,offset:ue.endOffset}}}}return{v:{v:{path:t.path,offset:t.startOffset}}}}if(Ie<k.nodes.length-1){var le=k.nodes[Ie+1];return{v:{v:{path:le.path,offset:le.startOffset}}}}return{v:{v:{path:t.path,offset:t.endOffset}}}}if(t.node.type&&qn.elementTextManager.hasText(t.node.type))return h>=V+(ee-V)/2?{v:{v:{path:t.path,offset:t.endOffset}}}:{v:{v:{path:t.path,offset:t.startOffset}}};if(isText(t.node)){if(t.endOffset-t.startOffset==1)return h>=(V+ee)/2?{v:{v:{path:t.path,offset:t.endOffset}}}:{v:{v:{path:t.path,offset:t.startOffset}}};for(var pe=Number.MAX_VALUE,he=t.startOffset,fe=t.endOffset;he<=fe;){var de=Math.floor((he+fe)/2);if(isText(t.node)){var me=t.node.text.substring(t.startOffset,de),ge=V+getTextWidth(me,t.node,M.textBaseHeight,p.textStyle,p),ve=0;if(ae)if(1===oe){if(t.extraCharSpacing){var ye=t.node.text.substring(t.startOffset,t.endOffset),xe=getTextWidth(ye,t.node,M.textBaseHeight,p.textStyle,p),be=(I-xe)/2;if(be>0)ve=be*(me.length/ye.length)}}else if(2===oe){var _e=0===Ie,Me=de-t.startOffset;if(Ie===k.nodes.length-1&&de===t.endOffset);else if(_e)Me>0&&t.extraCharSpacing&&(ve=t.extraCharSpacing*Math.min(2,Me));else if(t.extraCharSpacing){var Ce=k.nodes[Ie-1];Ce.extraCharSpacing&&(ve+=2*Ce.extraCharSpacing),ve+=t.extraCharSpacing*Me}}else{for(var we=0;we<Ie;we++){var Se=k.nodes[we];if(Se.extraCharSpacing){var Te=0;Te=isText(Se.node)&&Se.node.type&&qn.elementTextManager.hasText(Se.node.type)||isElement(Se.node)&&qn.elementTextManager.has(Se.node.type)?1:Se.endOffset-Se.startOffset;var Ae=we===k.nodes.length-1&&Se.endOffset===t.endOffset?Math.max(0,Te-1):Te;ve+=Se.extraCharSpacing*Ae}}if(t.extraCharSpacing){var ke=de-t.startOffset,De=Ie===k.nodes.length-1,Oe=de===t.endOffset;De&&Oe?ke>0&&(ve+=t.extraCharSpacing*(ke-1)):ve+=t.extraCharSpacing*ke}}var Le=ge+ve;if(de<t.endOffset){var Ee=t.node.text.charAt(de);if(Ee){var Re=getTextWidth(Ee,t.node,M.textBaseHeight,p.textStyle,p),Be=0;if(ae&&t.extraCharSpacing)Ie===k.nodes.length-1&&de===t.endOffset-1||(Be=t.extraCharSpacing);var Ne=Le+(Re+Be)/2;if(h>=Ne){var Ge=Math.abs(Ne-h);Ge<pe&&(pe=Ge,x=de+1),he=de+1;continue}var Fe=Math.abs(Ne-h);Fe<pe&&(pe=Fe,x=de),fe=de-1;continue}}var Ve=Math.abs(Le-h);Ve<pe&&(pe=Ve,x=de),Le<h?he=de+1:fe=de-1}else if(isElement(t.node))break}}return{v:{v:{path:t.path,offset:x}}}}},Ie=0;Ie<k.nodes.length;Ie++)if(De=Oe())return De.v;if(h>(ce.length>0?ce[ce.length-1].endX:ie+k.width)&&k.nodes.length>0){var Le,Ee=k.nodes[k.nodes.length-1];if(null!==(Le=k.breakInfo)&&void 0!==Le&&Le.isWrapped&&re.lines[se+1]){var Re=re.lines[se+1].nodes[0];if(Re)return{v:{path:Re.path,offset:Re.startOffset}}}return{v:{path:Ee.path,offset:Ee.endOffset}}}}},se=0;se<re.lines.length;se++)if(0!==(ae=oe())&&ae)return ae.v}else{var ce=Kn(this,ne,I,0,V);if(x<=ne.y&&x>=ne.y-re.height&&h>=ce)return{path:[V,0],offset:0}}}}return null}function _createForOfIteratorHelper$2(t,p){var h="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!h){if(Array.isArray(t)||(h=function _unsupportedIterableToArray$2(t,p){if(!t)return;if("string"==typeof t)return _arrayLikeToArray$2(t,p);var h=Object.prototype.toString.call(t).slice(8,-1);"Object"===h&&t.constructor&&(h=t.constructor.name);if("Map"===h||"Set"===h)return Array.from(t);if("Arguments"===h||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return _arrayLikeToArray$2(t,p)}(t))||p&&t&&"number"==typeof t.length){h&&(t=h);var x=0,M=function F(){};return{s:M,n:function n(){return x>=t.length?{done:!0}:{done:!1,value:t[x++]}},e:function e(t){throw t},f:M}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var k,I=!0,N=!1;return{s:function s(){h=h.call(t)},n:function n(){var t=h.next();return I=t.done,t},e:function e(t){N=!0,k=t},f:function f(){try{I||null==h.return||h.return()}finally{if(N)throw k}}}}function _arrayLikeToArray$2(t,p){(null==p||p>t.length)&&(p=t.length);for(var h=0,x=new Array(p);h<p;h++)x[h]=t[h];return x}function convertSlatePointToCadPoint(t){var p,h,x=this,M=this.getMTextImp(),k=t.path,I=t.offset,N=M.getTotalContentHeight(),V=Yn(this).alignmentWidth,ee=M.getActualRenderStartPosition(N,V),te=k[0],re=M.__PARAGRAPH_INFOS__[te];if(!re)return null;var ne=Un(this,ee,te),ie=null===(p=re.lines)||void 0===p?void 0:p.some((function(t){var p;return null===(p=t.nodes)||void 0===p?void 0:p.some((function(t){return!!isElement(t.node)||t.endOffset>t.startOffset}))}));if(null===(h=re.lines)||void 0===h||!h.length||!ie){var ae=Kn(this,ne,V,0,te);return{point:new nn(ae,ne.y),lineIndex:0}}for(var oe=0;oe<re.lines.length;oe++){var se,ce=re.lines[oe],ue=ce.nodes.some((function(t){return t.hasCharLevelSpacing}));if(null!==(se=ce.nodes)&&void 0!==se&&se.length){for(var le=Kn(this,ne,V,ce.width,te),pe=jn(re,oe).accumulatedHeight,he=le,fe=!1,de=ce.nodes.reduce((function(t,p){return isElement(p.node)&&qn.elementTextManager.has(p.node.type)||isText(p.node)&&p.node.type&&qn.elementTextManager.hasText(p.node.type)?t+1:t+(p.endOffset-p.startOffset)}),0),me=[],ge=le,ve=ue,ye=0;ye<ce.nodes.length;ye++){var xe=ce.nodes[ye],be=0;if(isElement(xe.node)&&qn.elementTextManager.has(xe.node.type))be=Mn(this,xe.node).width;else if(isText(xe.node)&&xe.node.type&&qn.elementTextManager.hasText(xe.node.type)){be=An(this,xe.node).width}else be=xe.width;me.push({startX:ge,endX:ge+be,nodeInfo:xe}),ge+=be}if(ve&&de>1){for(var _e=[],Me=0;Me<ce.nodes.length;Me++){var Ce=ce.nodes[Me];if(Ce.extraCharSpacing){var we=0,Se=we=isText(Ce.node)&&Ce.node.type&&qn.elementTextManager.hasText(Ce.node.type)||isElement(Ce.node)&&qn.elementTextManager.has(Ce.node.type)?1:Ce.endOffset-Ce.startOffset;Me===ce.nodes.length-1&&(Se=Math.max(0,we-1));var Te=Ce.extraCharSpacing*Se;_e.push(Te)}else _e.push(0)}for(var Ae=0;Ae<me.length;Ae++){for(var ke=0,De=0;De<Ae;De++)ke+=_e[De];me[Ae].startX+=ke,me[Ae].endX+=ke+_e[Ae]}}else if(ve&&1===de){var Oe=ce.nodes[0],Ie=0;if(isElement(Oe.node)&&qn.elementTextManager.has(Oe.node.type))Ie=Mn(this,Oe.node).width;else if(isText(Oe.node)&&Oe.node.type&&qn.elementTextManager.hasText(Oe.node.type)){Ie=An(this,Oe.node).width}else Ie=Oe.width;if(Oe.hasCharLevelSpacing||Oe.extraCharSpacing){var Le=(V-Ie)/2;Le>0&&(me[0].startX+=Le,me[0].endX+=Le)}}var Ee,Re=_createForOfIteratorHelper$2(ce.nodes);try{var Be,Ne=function _loop(){var t=Ee.value;if(t.path[0]===k[0]&&t.path[1]===k[1]&&I>=t.startOffset&&I<=t.endOffset){var p;if(fe=!0,I===t.endOffset&&t===ce.nodes[ce.nodes.length-1]&&null!==(p=ce.breakInfo)&&void 0!==p&&p.isWrapped){var h=re.lines[oe+1];if(h){var N=jn(re,oe+1).accumulatedHeight,ee=ne.y-N,ie=Kn(x,ne,V,h.width,te);return{v:{point:new nn(ie,ee),lineIndex:oe+1}}}}var ae=t.node.type&&qn.elementTextManager.hasText(t.node.type),se=me.find((function(p){return p.nodeInfo===t}));if(isElement(t.node)){var ge;if(se)ge=0===I?se.startX:se.endX;else{var ve=Mn(x,t.node).width;if(ge=he,1===I&&(ge+=ve),ue&&1===de)if(1===I&&t.extraCharSpacing){var ye=(V-ve)/2;ye>0&&(ge=le+ye+ve)}else if(0===I&&t.extraCharSpacing){var xe=(V-ve)/2;xe>0&&(ge=le+xe)}}var be=ne.y-pe;return{v:{point:new nn(ge,be),lineIndex:oe}}}if(ae){var _e;if(se)_e=0===I?se.startX:se.endX;else{var Me=An(x,t.node).width;if(_e=he,1===I&&(_e+=Me),ue&&1===de)if(1===I&&t.extraCharSpacing){var Ce=(V-Me)/2;Ce>0&&(_e=le+Ce+Me)}else if(0===I&&t.extraCharSpacing){var we=(V-Me)/2;we>0&&(_e=le+we)}}var Se=ne.y-pe;return{v:{point:new nn(_e,Se),lineIndex:oe}}}var Te=t.node.text.substring(t.startOffset,I),Ae=he+getTextWidth(Te,t.node,M.textBaseHeight,x.textStyle,x);if(ue)if(1===de){var ke=t.node.text.substring(t.startOffset,t.endOffset),De=getTextWidth(ke,t.node,M.textBaseHeight,x.textStyle,x),Oe=(V-De)/2;if(Oe>0){var Ie=Te.length/ke.length;Ae=le+Oe+Ie*De}}else{for(var Le=0,Re=0;Re<ce.nodes.length;Re++){var Be=ce.nodes[Re];if(Be===t){if(Be.extraCharSpacing){var Ne=I-Be.startOffset,Ge=Re===ce.nodes.length-1,Fe=I===Be.endOffset;Ge&&Fe?Ne>0&&(Le+=Be.extraCharSpacing*(Ne-1)):Le+=Be.extraCharSpacing*Ne}break}if(Be.extraCharSpacing){var Ve=0,Ue=Ve=isText(Be.node)&&Be.node.type&&qn.elementTextManager.hasText(Be.node.type)||isElement(Be.node)&&qn.elementTextManager.has(Be.node.type)?1:Be.endOffset-Be.startOffset;Re===ce.nodes.length-1&&(Ue=Math.max(0,Ve-1)),Le+=Be.extraCharSpacing*Ue}}Ae+=Le}var je=ne.y-pe;return{v:{point:new nn(Ae,je),lineIndex:oe}}}he+=t.width};for(Re.s();!(Ee=Re.n()).done;)if(Be=Ne())return Be.v}catch(Fe){Re.e(Fe)}finally{Re.f()}if(fe){var Ge=ne.y-pe;return{point:new nn(he,Ge),lineIndex:oe}}}}return{point:new nn(ne.x,ne.y),lineIndex:0}}function transformBy(t){var p=this.getMTextImp();this.assertWrite(),p.met=t;var h=this.position.clone(),x=new nn(h.x+this.maxWidth,h.y,h.z),M=new sn(this.maxWidth,0,0).normalize(),k=h.clone().transformBy(t),I=x.clone().transformBy(t),N=new sn(I.x-k.x,I.y-k.y,I.z-k.z).normalize(),V=M.crossProduct(N),ee=M.dotProduct(N),te=180*Math.acos(Math.min(Math.max(ee,-1),1))/Math.PI;return te=V.z<0?360-te:te,p.angle=te,!0}function ownKeys(t,p){var h=Object.keys(t);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(t);p&&(x=x.filter((function(p){return Object.getOwnPropertyDescriptor(t,p).enumerable}))),h.push.apply(h,x)}return h}function _objectSpread(t){for(var p=1;p<arguments.length;p++){var h=null!=arguments[p]?arguments[p]:{};p%2?ownKeys(Object(h),!0).forEach((function(p){_defineProperty(t,p,h[p])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(h)):ownKeys(Object(h)).forEach((function(p){Object.defineProperty(t,p,Object.getOwnPropertyDescriptor(h,p))}))}return t}function worldDraw(t){var p=this;!function clearCalculateData(){_n.clear()}(),function clearTextCalculateData(){Tn.clear()}();var h=this.getMTextImp();h.__PARAGRAPH_INFOS__=[];var x=0,M=0;h.actualWidth=h.maxWidth,h.actualHeight=h.maxHeight;var k=h.data.map((function(t,h){if(isElement(t)){var k=qn.elementTextManager.get(t.type);if(k){var I=null==k?void 0:k.calculate(p,t,h);return I&&(x+=I.height,M=Math.max(M,I.width)),I}}})),I=Math.max(h.maxWidth,M),N=h.getActualRenderStartPosition(x,I),V=0;h.data.forEach((function(x,M){if(isElement(x)){var ee=qn.elementTextManager.get(x.type);if(ee){var te=k[M];if(te){var re=N.clone().subvec(sn.kYAxis.clone().mult(V)),ne=ee.render(p,t,x,te,{position:re,index:M,alignmentWidth:I});ne&&(V+=te.height,h.__PARAGRAPH_INFOS__[M]=_objectSpread(_objectSpread({},te),ne))}}}})),h.actualWidth=Math.max(h.maxWidth,M),h.actualHeight=Math.max(h.maxHeight,x),h.emit("changed")}var Xn=_createClass$1((function MxCADBaseCustomText(){_classCallCheck$1(this,MxCADBaseCustomText)}));function _createSuper$3(t){var p=function _isNativeReflectConstruct$4(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(bm){return!1}}();return function _createSuperInternal(){var h,x=_getPrototypeOf$1(t);if(p){var M=_getPrototypeOf$1(this).constructor;h=Reflect.construct(x,arguments,M)}else h=x.apply(this,arguments);return _possibleConstructorReturn$1(this,h)}}var qn=function(t){_inherits$1(MxCADMText,t);var p=_createSuper$3(MxCADMText);function MxCADMText(t){var h;return _classCallCheck$1(this,MxCADMText),_defineProperty(_assertThisInitialized$1(h=p.call(this,t)),"impMText",void 0),_defineProperty(_assertThisInitialized$1(h),"worldDraw",worldDraw),_defineProperty(_assertThisInitialized$1(h),"convertCadPointToSlatePoint",convertCadPointToSlatePoint),_defineProperty(_assertThisInitialized$1(h),"convertSlatePointToCadPoint",convertSlatePointToCadPoint),_defineProperty(_assertThisInitialized$1(h),"transformBy",transformBy),h.impMText||(h.impMText=new zn),h}return _createClass$1(MxCADMText,[{key:"getMTextImp",value:function getMTextImp(){return this.impMText}},{key:"data",get:function get(){return this.impMText.data},set:function set(t){this.assertWrite(),this.impMText.data=t}},{key:"textBaseHeight",get:function get(){return this.impMText.textBaseHeight},set:function set(t){this.assertWrite(),this.impMText.textBaseHeight=t}},{key:"angle",get:function get(){return this.impMText.angle},set:function set(t){this.assertWrite(),this.impMText.angle=t;var p=new cn;p.setToRotation(THREE.MathUtils.degToRad(t),sn.kZAxis,this.position),this.impMText.met=p}},{key:"position",get:function get(){return this.impMText.position},set:function set(t){this.assertWrite(),this.impMText.position=t}},{key:"maxWidth",get:function get(){return this.impMText.maxWidth},set:function set(t){this.assertWrite(),t<=0&&(t=this.textBaseHeight),this.impMText.maxWidth=t}},{key:"maxHeight",get:function get(){return this.impMText.maxHeight},set:function set(t){this.assertWrite(),t<=0&&(t=this.textBaseHeight),this.impMText.maxHeight=t}},{key:"isWordWrap",get:function get(){return this.impMText.isWordWrap},set:function set(t){this.impMText.isWordWrap!==t&&(this.impMText.isWordWrap=t,this.updateDisplay())}},{key:"lineHeightRatio",get:function get(){return this.impMText.lineHeightRatio},set:function set(t){this.assertWrite();var p=Math.max(.5,Math.min(3,t));this.impMText.lineHeightRatio!==p&&(this.impMText.lineHeightRatio=p,this.updateDisplay())}},{key:"textAlignment",get:function get(){return this.impMText.textAlignment},set:function set(t){this.assertWrite(),this.impMText.textAlignment=t,this.updateDisplay()}},{key:"create",value:function create(t){return new MxCADMText(t)}},{key:"getTypeName",value:function getTypeName(){return"MxCADMText"}},{key:"getName",value:function getName(){return"MxCAD"}},{key:"dwgInFields",value:function dwgInFields(t){return this.impMText.dwgInFields(t),!0}},{key:"dwgOutFields",value:function dwgOutFields(t){return this.impMText.dwgOutFields(t),!0}},{key:"moveGripPointsAt",value:function moveGripPointsAt(t,p,h,x){return this.assertWrite(),this.impMText.moveGripPointsAt(t,p,h,x)}},{key:"getGripPoints",value:function getGripPoints(){return this.impMText.getGripPoints()}}]),MxCADMText}(cr);_defineProperty(qn,"fromMText",$n.fromMText),_defineProperty(qn,"toMText",$n.toMText),_defineProperty(qn,"elementTextManager",new Fn);function __awaiter(t,p,h,x){return new(h||(h=Promise))((function(M,k){function fulfilled(t){try{step(x.next(t))}catch(bm){k(bm)}}function rejected(t){try{step(x.throw(t))}catch(bm){k(bm)}}function step(t){t.done?M(t.value):function adopt(t){return t instanceof h?t:new h((function(p){p(t)}))}(t.value).then(fulfilled,rejected)}step((x=x.apply(t,p||[])).next())}))}function __generator(t,p){var h,x,M,k,I={label:0,sent:function sent(){if(1&M[0])throw M[1];return M[1]},trys:[],ops:[]};return k={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k;function verb(N){return function(V){return function step(N){if(h)throw new TypeError("Generator is already executing.");for(;k&&(k=0,N[0]&&(I=0)),I;)try{if(h=1,x&&(M=2&N[0]?x.return:N[0]?x.throw||((M=x.return)&&M.call(x),0):x.next)&&!(M=M.call(x,N[1])).done)return M;switch(x=0,M&&(N=[2&N[0],M.value]),N[0]){case 0:case 1:M=N;break;case 4:return I.label++,{value:N[1],done:!1};case 5:I.label++,x=N[1],N=[0];continue;case 7:N=I.ops.pop(),I.trys.pop();continue;default:if(!(M=I.trys,(M=M.length>0&&M[M.length-1])||6!==N[0]&&2!==N[0])){I=0;continue}if(3===N[0]&&(!M||N[1]>M[0]&&N[1]<M[3])){I.label=N[1];break}if(6===N[0]&&I.label<M[1]){I.label=M[1],M=N;break}if(M&&I.label<M[2]){I.label=M[2],I.ops.push(N);break}M[2]&&I.ops.pop(),I.trys.pop();continue}N=p.call(t,I)}catch(bm){N=[6,bm],x=0}finally{h=M=0}if(5&N[0])throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}([N,V])}}}function __spreadArray(t,p,h){if(h||2===arguments.length)for(var x,M=0,k=p.length;M<k;M++)!x&&M in p||(x||(x=Array.prototype.slice.call(p,0,M)),x[M]=p[M]);return t.concat(x||Array.prototype.slice.call(p))}"function"==typeof SuppressedError&&SuppressedError;var Zn="4.5.0";function wait(t,p){return new Promise((function(h){return setTimeout(h,t,p)}))}function isPromise(t){return!!t&&"function"==typeof t.then}function awaitIfAsync(t,p){try{var h=t();isPromise(h)?h.then((function(t){return p(!0,t)}),(function(t){return p(!1,t)})):p(!0,h)}catch(x){p(!1,x)}}function mapWithBreaks(t,p,h){return void 0===h&&(h=16),__awaiter(this,void 0,void 0,(function(){var x,M,k,I;return __generator(this,(function(N){switch(N.label){case 0:x=Array(t.length),M=Date.now(),k=0,N.label=1;case 1:return k<t.length?(x[k]=p(t[k],k),(I=Date.now())>=M+h?(M=I,[4,new Promise((function(t){var p=new MessageChannel;p.port1.onmessage=function(){return t()},p.port2.postMessage(null)}))]):[3,3]):[3,4];case 2:N.sent(),N.label=3;case 3:return++k,[3,1];case 4:return[2,x]}}))}))}function suppressUnhandledRejectionWarning(t){return t.then(void 0,(function(){})),t}function toInt(t){return parseInt(t)}function toFloat(t){return parseFloat(t)}function replaceNaN(t,p){return"number"==typeof t&&isNaN(t)?p:t}function countTruthy(t){return t.reduce((function(t,p){return t+(p?1:0)}),0)}function round(t,p){if(void 0===p&&(p=1),Math.abs(p)>=1)return Math.round(t/p)*p;var h=1/p;return Math.round(t*h)/h}function x64Add(t,p){var h=t[0]>>>16,x=65535&t[0],M=t[1]>>>16,k=65535&t[1],I=p[0]>>>16,N=65535&p[0],V=p[1]>>>16,ee=0,te=0,re=0,ne=0;re+=(ne+=k+(65535&p[1]))>>>16,ne&=65535,te+=(re+=M+V)>>>16,re&=65535,ee+=(te+=x+N)>>>16,te&=65535,ee+=h+I,ee&=65535,t[0]=ee<<16|te,t[1]=re<<16|ne}function x64Multiply(t,p){var h=t[0]>>>16,x=65535&t[0],M=t[1]>>>16,k=65535&t[1],I=p[0]>>>16,N=65535&p[0],V=p[1]>>>16,ee=65535&p[1],te=0,re=0,ne=0,ie=0;ne+=(ie+=k*ee)>>>16,ie&=65535,re+=(ne+=M*ee)>>>16,ne&=65535,re+=(ne+=k*V)>>>16,ne&=65535,te+=(re+=x*ee)>>>16,re&=65535,te+=(re+=M*V)>>>16,re&=65535,te+=(re+=k*N)>>>16,re&=65535,te+=h*ee+x*V+M*N+k*I,te&=65535,t[0]=te<<16|re,t[1]=ne<<16|ie}function x64Rotl(t,p){var h=t[0];32===(p%=64)?(t[0]=t[1],t[1]=h):p<32?(t[0]=h<<p|t[1]>>>32-p,t[1]=t[1]<<p|h>>>32-p):(p-=32,t[0]=t[1]<<p|h>>>32-p,t[1]=h<<p|t[1]>>>32-p)}function x64LeftShift(t,p){0!==(p%=64)&&(p<32?(t[0]=t[1]>>>32-p,t[1]=t[1]<<p):(t[0]=t[1]<<p-32,t[1]=0))}function x64Xor(t,p){t[0]^=p[0],t[1]^=p[1]}var Jn=[4283543511,3981806797],Qn=[3301882366,444984403];function x64Fmix(t){var p=[0,t[0]>>>1];x64Xor(t,p),x64Multiply(t,Jn),p[1]=t[0]>>>1,x64Xor(t,p),x64Multiply(t,Qn),p[1]=t[0]>>>1,x64Xor(t,p)}var ei=[2277735313,289559509],ti=[1291169091,658871167],ri=[0,5],ni=[0,1390208809],ii=[0,944331445];function x64hash128(t,p){var h=function getUTF8Bytes(t){for(var p=new Uint8Array(t.length),h=0;h<t.length;h++){var x=t.charCodeAt(h);if(x>127)return(new TextEncoder).encode(t);p[h]=x}return p}(t);p=p||0;var x,M=[0,h.length],k=M[1]%16,I=M[1]-k,N=[0,p],V=[0,p],ee=[0,0],te=[0,0];for(x=0;x<I;x+=16)ee[0]=h[x+4]|h[x+5]<<8|h[x+6]<<16|h[x+7]<<24,ee[1]=h[x]|h[x+1]<<8|h[x+2]<<16|h[x+3]<<24,te[0]=h[x+12]|h[x+13]<<8|h[x+14]<<16|h[x+15]<<24,te[1]=h[x+8]|h[x+9]<<8|h[x+10]<<16|h[x+11]<<24,x64Multiply(ee,ei),x64Rotl(ee,31),x64Multiply(ee,ti),x64Xor(N,ee),x64Rotl(N,27),x64Add(N,V),x64Multiply(N,ri),x64Add(N,ni),x64Multiply(te,ti),x64Rotl(te,33),x64Multiply(te,ei),x64Xor(V,te),x64Rotl(V,31),x64Add(V,N),x64Multiply(V,ri),x64Add(V,ii);ee[0]=0,ee[1]=0,te[0]=0,te[1]=0;var re=[0,0];switch(k){case 15:re[1]=h[x+14],x64LeftShift(re,48),x64Xor(te,re);case 14:re[1]=h[x+13],x64LeftShift(re,40),x64Xor(te,re);case 13:re[1]=h[x+12],x64LeftShift(re,32),x64Xor(te,re);case 12:re[1]=h[x+11],x64LeftShift(re,24),x64Xor(te,re);case 11:re[1]=h[x+10],x64LeftShift(re,16),x64Xor(te,re);case 10:re[1]=h[x+9],x64LeftShift(re,8),x64Xor(te,re);case 9:re[1]=h[x+8],x64Xor(te,re),x64Multiply(te,ti),x64Rotl(te,33),x64Multiply(te,ei),x64Xor(V,te);case 8:re[1]=h[x+7],x64LeftShift(re,56),x64Xor(ee,re);case 7:re[1]=h[x+6],x64LeftShift(re,48),x64Xor(ee,re);case 6:re[1]=h[x+5],x64LeftShift(re,40),x64Xor(ee,re);case 5:re[1]=h[x+4],x64LeftShift(re,32),x64Xor(ee,re);case 4:re[1]=h[x+3],x64LeftShift(re,24),x64Xor(ee,re);case 3:re[1]=h[x+2],x64LeftShift(re,16),x64Xor(ee,re);case 2:re[1]=h[x+1],x64LeftShift(re,8),x64Xor(ee,re);case 1:re[1]=h[x],x64Xor(ee,re),x64Multiply(ee,ei),x64Rotl(ee,31),x64Multiply(ee,ti),x64Xor(N,ee)}return x64Xor(N,M),x64Xor(V,M),x64Add(N,V),x64Add(V,N),x64Fmix(N),x64Fmix(V),x64Add(N,V),x64Add(V,N),("00000000"+(N[0]>>>0).toString(16)).slice(-8)+("00000000"+(N[1]>>>0).toString(16)).slice(-8)+("00000000"+(V[0]>>>0).toString(16)).slice(-8)+("00000000"+(V[1]>>>0).toString(16)).slice(-8)}function loadSources(t,p,h,x){var M=Object.keys(t).filter((function(t){return function excludes(t,p){return!function includes(t,p){for(var h=0,x=t.length;h<x;++h)if(t[h]===p)return!0;return!1}(t,p)}(h,t)})),k=suppressUnhandledRejectionWarning(mapWithBreaks(M,(function(h){return function loadSource(t,p){var h=suppressUnhandledRejectionWarning(new Promise((function(h){var x=Date.now();awaitIfAsync(t.bind(null,p),(function(){for(var t=[],p=0;p<arguments.length;p++)t[p]=arguments[p];var M=Date.now()-x;if(!t[0])return h((function(){return{error:t[1],duration:M}}));var k=t[1];if(function isFinalResultLoaded(t){return"function"!=typeof t}(k))return h((function(){return{value:k,duration:M}}));h((function(){return new Promise((function(t){var p=Date.now();awaitIfAsync(k,(function(){for(var h=[],x=0;x<arguments.length;x++)h[x]=arguments[x];var k=M+Date.now()-p;if(!h[0])return t({error:h[1],duration:k});t({value:h[1],duration:k})}))}))}))}))})));return function getComponent(){return h.then((function(t){return t()}))}}(t[h],p)}),x));return function getComponents(){return __awaiter(this,void 0,void 0,(function(){var t,p,h,I;return __generator(this,(function(N){switch(N.label){case 0:return[4,k];case 1:return[4,mapWithBreaks(N.sent(),(function(t){return suppressUnhandledRejectionWarning(t())}),x)];case 2:return t=N.sent(),[4,Promise.all(t)];case 3:for(p=N.sent(),h={},I=0;I<M.length;++I)h[M[I]]=p[I];return[2,h]}}))}))}}function isTrident(){var t=window,p=navigator;return countTruthy(["MSCSSMatrix"in t,"msSetImmediate"in t,"msIndexedDB"in t,"msMaxTouchPoints"in p,"msPointerEnabled"in p])>=4}function isChromium(){var t=window,p=navigator;return countTruthy(["webkitPersistentStorage"in p,"webkitTemporaryStorage"in p,0===p.vendor.indexOf("Google"),"webkitResolveLocalFileSystemURL"in t,"BatteryManager"in t,"webkitMediaStream"in t,"webkitSpeechGrammar"in t])>=5}function isWebKit(){var t=window;return countTruthy(["ApplePayError"in t,"CSSPrimitiveValue"in t,"Counter"in t,0===navigator.vendor.indexOf("Apple"),"RGBColor"in t,"WebKitMediaKeys"in t])>=4}function isDesktopWebKit(){var t=window,p=t.HTMLElement,h=t.Document;return countTruthy(["safari"in t,!("ongestureend"in t),!("TouchEvent"in t),!("orientation"in t),p&&!("autocapitalize"in p.prototype),h&&"pointerLockElement"in h.prototype])>=4}function isSafariWebKit(){var t=window;return function isFunctionNative(t){return/^function\s.*?\{\s*\[native code]\s*}$/.test(String(t))}(t.print)&&"[object WebPageNamespace]"===String(t.browser)}function isGecko(){var t,p,h=window;return countTruthy(["buildID"in navigator,"MozAppearance"in(null!==(p=null===(t=document.documentElement)||void 0===t?void 0:t.style)&&void 0!==p?p:{}),"onmozfullscreenchange"in h,"mozInnerScreenX"in h,"CSSMozDocumentRule"in h,"CanvasCaptureMediaStream"in h])>=4}function isWebKit616OrNewer(){var t=window,p=navigator,h=t.CSS,x=t.HTMLButtonElement;return countTruthy([!("getStorageUpdates"in p),x&&"popover"in x.prototype,"CSSCounterStyleRule"in t,h.supports("font-size-adjust: ex-height 0.5"),h.supports("text-transform: full-width")])>=4}function isAndroid(){var t=isChromium(),p=isGecko(),h=window,x=navigator,M="connection";return t?countTruthy([!("SharedWorker"in h),x[M]&&"ontypechange"in x[M],!("sinkId"in new window.Audio)])>=2:!!p&&countTruthy(["onorientationchange"in h,"orientation"in h,/android/i.test(navigator.appVersion)])>=2}function makeInnerError(t){var p=new Error(t);return p.name=t,p}function withIframe(t,p,h){var x,M,k;return void 0===h&&(h=50),__awaiter(this,void 0,void 0,(function(){var I,N;return __generator(this,(function(V){switch(V.label){case 0:I=document,V.label=1;case 1:return I.body?[3,3]:[4,wait(h)];case 2:return V.sent(),[3,1];case 3:N=I.createElement("iframe"),V.label=4;case 4:return V.trys.push([4,,10,11]),[4,new Promise((function(t,h){var x=!1,M=function resolve(){x=!0,t()};N.onload=M,N.onerror=function reject(t){x=!0,h(t)};var k=N.style;k.setProperty("display","block","important"),k.position="absolute",k.top="0",k.left="0",k.visibility="hidden",p&&"srcdoc"in N?N.srcdoc=p:N.src="about:blank",I.body.appendChild(N);!function checkReadyState(){var t,p;x||("complete"===(null===(p=null===(t=N.contentWindow)||void 0===t?void 0:t.document)||void 0===p?void 0:p.readyState)?M():setTimeout(checkReadyState,10))}()}))];case 5:V.sent(),V.label=6;case 6:return(null===(M=null===(x=N.contentWindow)||void 0===x?void 0:x.document)||void 0===M?void 0:M.body)?[3,8]:[4,wait(h)];case 7:return V.sent(),[3,6];case 8:return[4,t(N,N.contentWindow)];case 9:return[2,V.sent()];case 10:return null===(k=N.parentNode)||void 0===k||k.removeChild(N),[7];case 11:return[2]}}))}))}function selectorToElement(t){for(var p=function parseSimpleCssSelector(t){for(var p,h,x="Unexpected syntax '".concat(t,"'"),M=/^\s*([a-z-]*)(.*)$/i.exec(t),k=M[1]||void 0,I={},N=/([.:#][\w-]+|\[.+?\])/gi,V=function addAttribute(t,p){I[t]=I[t]||[],I[t].push(p)};;){var ee=N.exec(M[2]);if(!ee)break;var te=ee[0];switch(te[0]){case".":V("class",te.slice(1));break;case"#":V("id",te.slice(1));break;case"[":var re=/^\[([\w-]+)([~|^$*]?=("(.*?)"|([\w-]+)))?(\s+[is])?\]$/.exec(te);if(!re)throw new Error(x);V(re[1],null!==(h=null!==(p=re[4])&&void 0!==p?p:re[5])&&void 0!==h?h:"");break;default:throw new Error(x)}}return[k,I]}(t),h=p[0],x=p[1],M=document.createElement(null!=h?h:"div"),k=0,I=Object.keys(x);k<I.length;k++){var N=I[k],V=x[N].join(" ");"style"===N?addStyleString(M.style,V):M.setAttribute(N,V)}return M}function addStyleString(t,p){for(var h=0,x=p.split(";");h<x.length;h++){var M=x[h],k=/^\s*([\w-]+)\s*:\s*(.+?)(\s*!([\w-]+))?\s*$/.exec(M);if(k){var I=k[1],N=k[2],V=k[4];t.setProperty(I,N,V||"")}}}var ai=["monospace","sans-serif","serif"],oi=["sans-serif-thin","ARNO PRO","Agency FB","Arabic Typesetting","Arial Unicode MS","AvantGarde Bk BT","BankGothic Md BT","Batang","Bitstream Vera Sans Mono","Calibri","Century","Century Gothic","Clarendon","EUROSTILE","Franklin Gothic","Futura Bk BT","Futura Md BT","GOTHAM","Gill Sans","HELV","Haettenschweiler","Helvetica Neue","Humanst521 BT","Leelawadee","Letter Gothic","Levenim MT","Lucida Bright","Lucida Sans","Menlo","MS Mincho","MS Outlook","MS Reference Specialty","MS UI Gothic","MT Extra","MYRIAD PRO","Marlett","Meiryo UI","Microsoft Uighur","Minion Pro","Monotype Corsiva","PMingLiU","Pristina","SCRIPTINA","Segoe UI Light","Serifa","SimHei","Small Fonts","Staccato222 BT","TRAJAN PRO","Univers CE 55 Medium","Vrinda","ZWAdobeF"];function canvasToString(t){return t.toDataURL()}var si,ci,ui=2500;function getUnstableScreenFrame(){var t=this;return function watchScreenFrame(){void 0===ci&&function checkScreenFrame(){var t=getCurrentScreenFrame();isFrameSizeNull(t)?ci=setTimeout(checkScreenFrame,ui):(si=t,ci=void 0)}()}(),function(){return __awaiter(t,void 0,void 0,(function(){var t;return __generator(this,(function(p){switch(p.label){case 0:return isFrameSizeNull(t=getCurrentScreenFrame())?si?[2,__spreadArray([],si,!0)]:function getFullscreenElement(){var t=document;return t.fullscreenElement||t.msFullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||null}()?[4,(h=document,(h.exitFullscreen||h.msExitFullscreen||h.mozCancelFullScreen||h.webkitExitFullscreen).call(h))]:[3,2]:[3,2];case 1:p.sent(),t=getCurrentScreenFrame(),p.label=2;case 2:return isFrameSizeNull(t)||(si=t),[2,t]}var h}))}))}}function getCurrentScreenFrame(){var t=screen;return[replaceNaN(toFloat(t.availTop),null),replaceNaN(toFloat(t.width)-toFloat(t.availWidth)-replaceNaN(toFloat(t.availLeft),0),null),replaceNaN(toFloat(t.height)-toFloat(t.availHeight)-replaceNaN(toFloat(t.availTop),0),null),replaceNaN(toFloat(t.availLeft),null)]}function isFrameSizeNull(t){for(var p=0;p<4;++p)if(t[p])return!1;return!0}function getBlockedSelectors(t){var p;return __awaiter(this,void 0,void 0,(function(){var h,x,M,k,I,N,V;return __generator(this,(function(ee){switch(ee.label){case 0:for(h=document,x=h.createElement("div"),M=new Array(t.length),k={},forceShow(x),V=0;V<t.length;++V)"DIALOG"===(I=selectorToElement(t[V])).tagName&&I.show(),forceShow(N=h.createElement("div")),N.appendChild(I),x.appendChild(N),M[V]=I;ee.label=1;case 1:return h.body?[3,3]:[4,wait(50)];case 2:return ee.sent(),[3,1];case 3:h.body.appendChild(x);try{for(V=0;V<t.length;++V)M[V].offsetParent||(k[t[V]]=!0)}finally{null===(p=x.parentNode)||void 0===p||p.removeChild(x)}return[2,k]}}))}))}function forceShow(t){t.style.setProperty("visibility","hidden","important"),t.style.setProperty("display","block","important")}function doesMatch$5(t){return matchMedia("(inverted-colors: ".concat(t,")")).matches}function doesMatch$4(t){return matchMedia("(forced-colors: ".concat(t,")")).matches}function doesMatch$3(t){return matchMedia("(prefers-contrast: ".concat(t,")")).matches}function doesMatch$2(t){return matchMedia("(prefers-reduced-motion: ".concat(t,")")).matches}function doesMatch$1(t){return matchMedia("(prefers-reduced-transparency: ".concat(t,")")).matches}function doesMatch(t){return matchMedia("(dynamic-range: ".concat(t,")")).matches}var li=Math,pi=function fallbackFn(){return 0};var hi={default:[],apple:[{font:"-apple-system-body"}],serif:[{fontFamily:"serif"}],sans:[{fontFamily:"sans-serif"}],mono:[{fontFamily:"monospace"}],min:[{fontSize:"1px"}],system:[{fontFamily:"system-ui"}]};var fi=function isAnyParentCrossOrigin(){for(var t=window;;){var p=t.parent;if(!p||p===t)return!1;try{if(p.location.origin!==t.location.origin)return!0}catch(h){if(h instanceof Error&&"SecurityError"===h.name)return!0;throw h}t=p}};var di=new Set([10752,2849,2884,2885,2886,2928,2929,2930,2931,2932,2960,2961,2962,2963,2964,2965,2966,2967,2968,2978,3024,3042,3088,3089,3106,3107,32773,32777,32777,32823,32824,32936,32937,32938,32939,32968,32969,32970,32971,3317,33170,3333,3379,3386,33901,33902,34016,34024,34076,3408,3410,3411,3412,3413,3414,3415,34467,34816,34817,34818,34819,34877,34921,34930,35660,35661,35724,35738,35739,36003,36004,36005,36347,36348,36349,37440,37441,37443,7936,7937,7938]),mi=new Set([34047,35723,36063,34852,34853,34854,34229,36392,36795,38449]),gi=["FRAGMENT_SHADER","VERTEX_SHADER"],vi=["LOW_FLOAT","MEDIUM_FLOAT","HIGH_FLOAT","LOW_INT","MEDIUM_INT","HIGH_INT"],yi="WEBGL_debug_renderer_info";function getWebGLContext(t){if(t.webgl)return t.webgl.context;var p,h=document.createElement("canvas");h.addEventListener("webglCreateContextError",(function(){return p=void 0}));for(var x=0,M=["webgl","experimental-webgl"];x<M.length;x++){var k=M[x];try{p=h.getContext(k)}catch(I){}if(p)break}return t.webgl={context:p},p}function getShaderPrecision(t,p,h){var x=t.getShaderPrecisionFormat(t[p],t[h]);return x?[x.rangeMin,x.rangeMax,x.precision]:[]}function getConstantsFromPrototype(t){return Object.keys(t.__proto__).filter(isConstantLike)}function isConstantLike(t){return"string"==typeof t&&!t.match(/[^A-Z0-9_x]/)}function shouldAvoidDebugRendererInfo(){return isGecko()}function isValidParameterGetter(t){return"function"==typeof t.getParameter}var xi={fonts:function getFonts(){var t=this;return withIframe((function(p,h){var x=h.document;return __awaiter(t,void 0,void 0,(function(){var t,p,h,M,k,I,N,V,ee,te,re;return __generator(this,(function(ne){for((t=x.body).style.fontSize="48px",(p=x.createElement("div")).style.setProperty("visibility","hidden","important"),h={},M={},k=function createSpan(t){var h=x.createElement("span"),M=h.style;return M.position="absolute",M.top="0",M.left="0",M.fontFamily=t,h.textContent="mmMwWLliI0O&1",p.appendChild(h),h},I=function createSpanWithFonts(t,p){return k("'".concat(t,"',").concat(p))},N=function initializeFontsSpans(){for(var t={},p=function _loop_1(p){t[p]=ai.map((function(t){return I(p,t)}))},h=0,x=oi;h<x.length;h++){p(x[h])}return t},V=function isFontAvailable(t){return ai.some((function(p,x){return t[x].offsetWidth!==h[p]||t[x].offsetHeight!==M[p]}))},ee=function initializeBaseFontsSpans(){return ai.map(k)}(),te=N(),t.appendChild(p),re=0;re<ai.length;re++)h[ai[re]]=ee[re].offsetWidth,M[ai[re]]=ee[re].offsetHeight;return[2,oi.filter((function(t){return V(te[t])}))]}))}))}))},domBlockers:function getDomBlockers(t){var p=(void 0===t?{}:t).debug;return __awaiter(this,void 0,void 0,(function(){var t,h,x,M,k;return __generator(this,(function(I){switch(I.label){case 0:return function isApplicable(){return isWebKit()||isAndroid()}()?(t=function getFilters(){var t=atob;return{abpIndo:["#Iklan-Melayang","#Kolom-Iklan-728","#SidebarIklan-wrapper",'[title="ALIENBOLA" i]',t("I0JveC1CYW5uZXItYWRz")],abpvn:[".quangcao","#mobileCatfish",t("LmNsb3NlLWFkcw=="),'[id^="bn_bottom_fixed_"]',"#pmadv"],adBlockFinland:[".mainostila",t("LnNwb25zb3JpdA=="),".ylamainos",t("YVtocmVmKj0iL2NsaWNrdGhyZ2guYXNwPyJd"),t("YVtocmVmXj0iaHR0cHM6Ly9hcHAucmVhZHBlYWsuY29tL2FkcyJd")],adBlockPersian:["#navbar_notice_50",".kadr",'TABLE[width="140px"]',"#divAgahi",t("YVtocmVmXj0iaHR0cDovL2cxLnYuZndtcm0ubmV0L2FkLyJd")],adBlockWarningRemoval:["#adblock-honeypot",".adblocker-root",".wp_adblock_detect",t("LmhlYWRlci1ibG9ja2VkLWFk"),t("I2FkX2Jsb2NrZXI=")],adGuardAnnoyances:[".hs-sosyal","#cookieconsentdiv",'div[class^="app_gdpr"]',".as-oil",'[data-cypress="soft-push-notification-modal"]'],adGuardBase:[".BetterJsPopOverlay",t("I2FkXzMwMFgyNTA="),t("I2Jhbm5lcmZsb2F0MjI="),t("I2NhbXBhaWduLWJhbm5lcg=="),t("I0FkLUNvbnRlbnQ=")],adGuardChinese:[t("LlppX2FkX2FfSA=="),t("YVtocmVmKj0iLmh0aGJldDM0LmNvbSJd"),"#widget-quan",t("YVtocmVmKj0iLzg0OTkyMDIwLnh5eiJd"),t("YVtocmVmKj0iLjE5NTZobC5jb20vIl0=")],adGuardFrench:["#pavePub",t("LmFkLWRlc2t0b3AtcmVjdGFuZ2xl"),".mobile_adhesion",".widgetadv",t("LmFkc19iYW4=")],adGuardGerman:['aside[data-portal-id="leaderboard"]'],adGuardJapanese:["#kauli_yad_1",t("YVtocmVmXj0iaHR0cDovL2FkMi50cmFmZmljZ2F0ZS5uZXQvIl0="),t("Ll9wb3BJbl9pbmZpbml0ZV9hZA=="),t("LmFkZ29vZ2xl"),t("Ll9faXNib29zdFJldHVybkFk")],adGuardMobile:[t("YW1wLWF1dG8tYWRz"),t("LmFtcF9hZA=="),'amp-embed[type="24smi"]',"#mgid_iframe1",t("I2FkX2ludmlld19hcmVh")],adGuardRussian:[t("YVtocmVmXj0iaHR0cHM6Ly9hZC5sZXRtZWFkcy5jb20vIl0="),t("LnJlY2xhbWE="),'div[id^="smi2adblock"]',t("ZGl2W2lkXj0iQWRGb3hfYmFubmVyXyJd"),"#psyduckpockeball"],adGuardSocial:[t("YVtocmVmXj0iLy93d3cuc3R1bWJsZXVwb24uY29tL3N1Ym1pdD91cmw9Il0="),t("YVtocmVmXj0iLy90ZWxlZ3JhbS5tZS9zaGFyZS91cmw/Il0="),".etsy-tweet","#inlineShare",".popup-social"],adGuardSpanishPortuguese:["#barraPublicidade","#Publicidade","#publiEspecial","#queTooltip",".cnt-publi"],adGuardTrackingProtection:["#qoo-counter",t("YVtocmVmXj0iaHR0cDovL2NsaWNrLmhvdGxvZy5ydS8iXQ=="),t("YVtocmVmXj0iaHR0cDovL2hpdGNvdW50ZXIucnUvdG9wL3N0YXQucGhwIl0="),t("YVtocmVmXj0iaHR0cDovL3RvcC5tYWlsLnJ1L2p1bXAiXQ=="),"#top100counter"],adGuardTurkish:["#backkapat",t("I3Jla2xhbWk="),t("YVtocmVmXj0iaHR0cDovL2Fkc2Vydi5vbnRlay5jb20udHIvIl0="),t("YVtocmVmXj0iaHR0cDovL2l6bGVuemkuY29tL2NhbXBhaWduLyJd"),t("YVtocmVmXj0iaHR0cDovL3d3dy5pbnN0YWxsYWRzLm5ldC8iXQ==")],bulgarian:[t("dGQjZnJlZW5ldF90YWJsZV9hZHM="),"#ea_intext_div",".lapni-pop-over","#xenium_hot_offers"],easyList:[".yb-floorad",t("LndpZGdldF9wb19hZHNfd2lkZ2V0"),t("LnRyYWZmaWNqdW5reS1hZA=="),".textad_headline",t("LnNwb25zb3JlZC10ZXh0LWxpbmtz")],easyListChina:[t("LmFwcGd1aWRlLXdyYXBbb25jbGljayo9ImJjZWJvcy5jb20iXQ=="),t("LmZyb250cGFnZUFkdk0="),"#taotaole","#aafoot.top_box",".cfa_popup"],easyListCookie:[".ezmob-footer",".cc-CookieWarning","[data-cookie-number]",t("LmF3LWNvb2tpZS1iYW5uZXI="),".sygnal24-gdpr-modal-wrap"],easyListCzechSlovak:["#onlajny-stickers",t("I3Jla2xhbW5pLWJveA=="),t("LnJla2xhbWEtbWVnYWJvYXJk"),".sklik",t("W2lkXj0ic2tsaWtSZWtsYW1hIl0=")],easyListDutch:[t("I2FkdmVydGVudGll"),t("I3ZpcEFkbWFya3RCYW5uZXJCbG9jaw=="),".adstekst",t("YVtocmVmXj0iaHR0cHM6Ly94bHR1YmUubmwvY2xpY2svIl0="),"#semilo-lrectangle"],easyListGermany:["#SSpotIMPopSlider",t("LnNwb25zb3JsaW5rZ3J1ZW4="),t("I3dlcmJ1bmdza3k="),t("I3Jla2xhbWUtcmVjaHRzLW1pdHRl"),t("YVtocmVmXj0iaHR0cHM6Ly9iZDc0Mi5jb20vIl0=")],easyListItaly:[t("LmJveF9hZHZfYW5udW5jaQ=="),".sb-box-pubbliredazionale",t("YVtocmVmXj0iaHR0cDovL2FmZmlsaWF6aW9uaWFkcy5zbmFpLml0LyJd"),t("YVtocmVmXj0iaHR0cHM6Ly9hZHNlcnZlci5odG1sLml0LyJd"),t("YVtocmVmXj0iaHR0cHM6Ly9hZmZpbGlhemlvbmlhZHMuc25haS5pdC8iXQ==")],easyListLithuania:[t("LnJla2xhbW9zX3RhcnBhcw=="),t("LnJla2xhbW9zX251b3JvZG9z"),t("aW1nW2FsdD0iUmVrbGFtaW5pcyBza3lkZWxpcyJd"),t("aW1nW2FsdD0iRGVkaWt1b3RpLmx0IHNlcnZlcmlhaSJd"),t("aW1nW2FsdD0iSG9zdGluZ2FzIFNlcnZlcmlhaS5sdCJd")],estonian:[t("QVtocmVmKj0iaHR0cDovL3BheTRyZXN1bHRzMjQuZXUiXQ==")],fanboyAnnoyances:["#ac-lre-player",".navigate-to-top","#subscribe_popup",".newsletter_holder","#back-top"],fanboyAntiFacebook:[".util-bar-module-firefly-visible"],fanboyEnhancedTrackers:[".open.pushModal","#issuem-leaky-paywall-articles-zero-remaining-nag","#sovrn_container",'div[class$="-hide"][zoompage-fontsize][style="display: block;"]',".BlockNag__Card"],fanboySocial:["#FollowUs","#meteored_share","#social_follow",".article-sharer",".community__social-desc"],frellwitSwedish:[t("YVtocmVmKj0iY2FzaW5vcHJvLnNlIl1bdGFyZ2V0PSJfYmxhbmsiXQ=="),t("YVtocmVmKj0iZG9rdG9yLXNlLm9uZWxpbmsubWUiXQ=="),"article.category-samarbete",t("ZGl2LmhvbGlkQWRz"),"ul.adsmodern"],greekAdBlock:[t("QVtocmVmKj0iYWRtYW4ub3RlbmV0LmdyL2NsaWNrPyJd"),t("QVtocmVmKj0iaHR0cDovL2F4aWFiYW5uZXJzLmV4b2R1cy5nci8iXQ=="),t("QVtocmVmKj0iaHR0cDovL2ludGVyYWN0aXZlLmZvcnRobmV0LmdyL2NsaWNrPyJd"),"DIV.agores300","TABLE.advright"],hungarian:["#cemp_doboz",".optimonk-iframe-container",t("LmFkX19tYWlu"),t("W2NsYXNzKj0iR29vZ2xlQWRzIl0="),"#hirdetesek_box"],iDontCareAboutCookies:['.alert-info[data-block-track*="CookieNotice"]',".ModuleTemplateCookieIndicator",".o--cookies--container","#cookies-policy-sticky","#stickyCookieBar"],icelandicAbp:[t("QVtocmVmXj0iL2ZyYW1ld29yay9yZXNvdXJjZXMvZm9ybXMvYWRzLmFzcHgiXQ==")],latvian:[t("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiAxMjBweDsgaGVpZ2h0OiA0MHB4OyBvdmVyZmxvdzogaGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7Il0="),t("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiA4OHB4OyBoZWlnaHQ6IDMxcHg7IG92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsiXQ==")],listKr:[t("YVtocmVmKj0iLy9hZC5wbGFuYnBsdXMuY28ua3IvIl0="),t("I2xpdmVyZUFkV3JhcHBlcg=="),t("YVtocmVmKj0iLy9hZHYuaW1hZHJlcC5jby5rci8iXQ=="),t("aW5zLmZhc3R2aWV3LWFk"),".revenue_unit_item.dable"],listeAr:[t("LmdlbWluaUxCMUFk"),".right-and-left-sponsers",t("YVtocmVmKj0iLmFmbGFtLmluZm8iXQ=="),t("YVtocmVmKj0iYm9vcmFxLm9yZyJd"),t("YVtocmVmKj0iZHViaXp6bGUuY29tL2FyLz91dG1fc291cmNlPSJd")],listeFr:[t("YVtocmVmXj0iaHR0cDovL3Byb21vLnZhZG9yLmNvbS8iXQ=="),t("I2FkY29udGFpbmVyX3JlY2hlcmNoZQ=="),t("YVtocmVmKj0id2Vib3JhbWEuZnIvZmNnaS1iaW4vIl0="),".site-pub-interstitiel",'div[id^="crt-"][data-criteo-id]'],officialPolish:["#ceneo-placeholder-ceneo-12",t("W2hyZWZePSJodHRwczovL2FmZi5zZW5kaHViLnBsLyJd"),t("YVtocmVmXj0iaHR0cDovL2Fkdm1hbmFnZXIudGVjaGZ1bi5wbC9yZWRpcmVjdC8iXQ=="),t("YVtocmVmXj0iaHR0cDovL3d3dy50cml6ZXIucGwvP3V0bV9zb3VyY2UiXQ=="),t("ZGl2I3NrYXBpZWNfYWQ=")],ro:[t("YVtocmVmXj0iLy9hZmZ0cmsuYWx0ZXgucm8vQ291bnRlci9DbGljayJd"),t("YVtocmVmXj0iaHR0cHM6Ly9ibGFja2ZyaWRheXNhbGVzLnJvL3Ryay9zaG9wLyJd"),t("YVtocmVmXj0iaHR0cHM6Ly9ldmVudC4ycGVyZm9ybWFudC5jb20vZXZlbnRzL2NsaWNrIl0="),t("YVtocmVmXj0iaHR0cHM6Ly9sLnByb2ZpdHNoYXJlLnJvLyJd"),'a[href^="/url/"]'],ruAd:[t("YVtocmVmKj0iLy9mZWJyYXJlLnJ1LyJd"),t("YVtocmVmKj0iLy91dGltZy5ydS8iXQ=="),t("YVtocmVmKj0iOi8vY2hpa2lkaWtpLnJ1Il0="),"#pgeldiz",".yandex-rtb-block"],thaiAds:["a[href*=macau-uta-popup]",t("I2Fkcy1nb29nbGUtbWlkZGxlX3JlY3RhbmdsZS1ncm91cA=="),t("LmFkczMwMHM="),".bumq",".img-kosana"],webAnnoyancesUltralist:["#mod-social-share-2","#social-tools",t("LmN0cGwtZnVsbGJhbm5lcg=="),".zergnet-recommend",".yt.btn-link.btn-md.btn"]}}(),h=Object.keys(t),[4,getBlockedSelectors((k=[]).concat.apply(k,h.map((function(p){return t[p]}))))]):[2,void 0];case 1:return x=I.sent(),p&&function printDebug(t,p){for(var h=0,x=Object.keys(t);h<x.length;h++){var M=x[h];"\n".concat(M,":");for(var k=0,I=t[M];k<I.length;k++){var N=I[k];"\n  ".concat(p[N]?"":""," ").concat(N)}}}(t,x),(M=h.filter((function(p){var h=t[p];return countTruthy(h.map((function(t){return x[t]})))>.6*h.length}))).sort(),[2,M]}}))}))},fontPreferences:function getFontPreferences(){return function withNaturalFonts(t,p){void 0===p&&(p=4e3);return withIframe((function(h,x){var M=x.document,k=M.body,I=k.style;I.width="".concat(p,"px"),I.webkitTextSizeAdjust=I.textSizeAdjust="none",isChromium()?k.style.zoom="".concat(1/x.devicePixelRatio):isWebKit()&&(k.style.zoom="reset");var N=M.createElement("div");return N.textContent=__spreadArray([],Array(p/20<<0),!0).map((function(){return"word"})).join(" "),k.appendChild(N),t(M,k)}),'<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1">')}((function(t,p){for(var h={},x={},M=0,k=Object.keys(hi);M<k.length;M++){var I=k[M],N=hi[I],V=N[0],ee=void 0===V?{}:V,te=N[1],re=void 0===te?"mmMwWLliI0fiflO&1":te,ne=t.createElement("span");ne.textContent=re,ne.style.whiteSpace="nowrap";for(var ie=0,ae=Object.keys(ee);ie<ae.length;ie++){var oe=ae[ie],se=ee[oe];void 0!==se&&(ne.style[oe]=se)}h[I]=ne,p.append(t.createElement("br"),ne)}for(var ce=0,ue=Object.keys(hi);ce<ue.length;ce++){x[I=ue[ce]]=h[I].getBoundingClientRect().width}return x}))},audio:function getAudioFingerprint(){return function doesBrowserPerformAntifingerprinting$1(){return isWebKit()&&isWebKit616OrNewer()&&isSafariWebKit()}()?-4:function getUnstableAudioFingerprint(){var t=window,p=t.OfflineAudioContext||t.webkitOfflineAudioContext;if(!p)return-2;if(function doesBrowserSuspendAudioContext(){return isWebKit()&&!isDesktopWebKit()&&!function isWebKit606OrNewer(){var t=window;return countTruthy(["DOMRectList"in t,"RTCPeerConnectionIceEvent"in t,"SVGGeometryElement"in t,"ontransitioncancel"in t])>=3}()}())return-1;var h=4500,x=new p(1,5e3,44100),M=x.createOscillator();M.type="triangle",M.frequency.value=1e4;var k=x.createDynamicsCompressor();k.threshold.value=-50,k.knee.value=40,k.ratio.value=12,k.attack.value=0,k.release.value=.25,M.connect(k),k.connect(x.destination),M.start(0);var I=function startRenderingAudio(t){var p=3,h=500,x=500,M=5e3,k=function finalize(){},I=new Promise((function(I,N){var V=!1,ee=0,te=0;t.oncomplete=function(t){return I(t.renderedBuffer)};var re=function startRunningTimeout(){setTimeout((function(){return N(makeInnerError("timeout"))}),Math.min(x,te+M-Date.now()))};(function tryRender(){try{var x=t.startRendering();switch(isPromise(x)&&suppressUnhandledRejectionWarning(x),t.state){case"running":te=Date.now(),V&&re();break;case"suspended":document.hidden||ee++,V&&ee>=p?N(makeInnerError("suspended")):setTimeout(tryRender,h)}}catch(M){N(M)}})(),k=function finalize(){V||(V=!0,te>0&&re())}}));return[I,k]}(x),N=I[0],V=I[1],ee=suppressUnhandledRejectionWarning(N.then((function(t){return function getHash(t){for(var p=0,h=0;h<t.length;++h)p+=Math.abs(t[h]);return p}(t.getChannelData(0).subarray(h))}),(function(t){if("timeout"===t.name||"suspended"===t.name)return-3;throw t})));return function(){return V(),ee}}()},screenFrame:function getScreenFrame(){var t=this;if(isWebKit()&&isWebKit616OrNewer()&&isSafariWebKit())return function(){return Promise.resolve(void 0)};var p=getUnstableScreenFrame();return function(){return __awaiter(t,void 0,void 0,(function(){var t,h;return __generator(this,(function(x){switch(x.label){case 0:return[4,p()];case 1:return t=x.sent(),[2,[(h=function processSize(t){return null===t?null:round(t,10)})(t[0]),h(t[1]),h(t[2]),h(t[3])]]}}))}))}},canvas:function getCanvasFingerprint(){return function getUnstableCanvasFingerprint(t){var p,h,x,M=!1,k=function makeCanvasContext(){var t=document.createElement("canvas");return t.width=1,t.height=1,[t,t.getContext("2d")]}(),I=k[0],N=k[1];!function isSupported(t,p){return!(!p||!t.toDataURL)}(I,N)?h=x="unsupported":(M=function doesSupportWinding(t){return t.rect(0,0,10,10),t.rect(2,2,6,6),!t.isPointInPath(5,5,"evenodd")}(N),t?h=x="skipped":(p=function renderImages(t,p){!function renderTextImage(t,p){t.width=240,t.height=60,p.textBaseline="alphabetic",p.fillStyle="#f60",p.fillRect(100,1,62,20),p.fillStyle="#069",p.font='11pt "Times New Roman"';var h="Cwm fjordbank gly ".concat(String.fromCharCode(55357,56835));p.fillText(h,2,15),p.fillStyle="rgba(102, 204, 0, 0.2)",p.font="18pt Arial",p.fillText(h,4,45)}(t,p);var h=canvasToString(t),x=canvasToString(t);if(h!==x)return["unstable","unstable"];!function renderGeometryImage(t,p){t.width=122,t.height=110,p.globalCompositeOperation="multiply";for(var h=0,x=[["#f2f",40,40],["#2ff",80,40],["#ff2",60,80]];h<x.length;h++){var M=x[h],k=M[0],I=M[1],N=M[2];p.fillStyle=k,p.beginPath(),p.arc(I,N,40,0,2*Math.PI,!0),p.closePath(),p.fill()}p.fillStyle="#f9c",p.arc(60,60,60,0,2*Math.PI,!0),p.arc(60,60,20,0,2*Math.PI,!0),p.fill("evenodd")}(t,p);var M=canvasToString(t);return[M,h]}(I,N),h=p[0],x=p[1]));return{winding:M,geometry:h,text:x}}(function doesBrowserPerformAntifingerprinting(){return isWebKit()&&isWebKit616OrNewer()&&isSafariWebKit()}())},osCpu:function getOsCpu(){return navigator.oscpu},languages:function getLanguages(){var t=navigator,p=[],h=t.language||t.userLanguage||t.browserLanguage||t.systemLanguage;if(void 0!==h&&p.push([h]),Array.isArray(t.languages))isChromium()&&function isChromium86OrNewer(){var t=window;return countTruthy([!("MediaSettingsRange"in t),"RTCEncodedAudioFrame"in t,""+t.Intl=="[object Intl]",""+t.Reflect=="[object Reflect]"])>=3}()||p.push(t.languages);else if("string"==typeof t.languages){var x=t.languages;x&&p.push(x.split(","))}return p},colorDepth:function getColorDepth(){return window.screen.colorDepth},deviceMemory:function getDeviceMemory(){return replaceNaN(toFloat(navigator.deviceMemory),void 0)},screenResolution:function getScreenResolution(){if(!(isWebKit()&&isWebKit616OrNewer()&&isSafariWebKit()))return function getUnstableScreenResolution(){var t=screen,p=function parseDimension(t){return replaceNaN(toInt(t),null)},h=[p(t.width),p(t.height)];return h.sort().reverse(),h}()},hardwareConcurrency:function getHardwareConcurrency(){return replaceNaN(toInt(navigator.hardwareConcurrency),void 0)},timezone:function getTimezone(){var t,p=null===(t=window.Intl)||void 0===t?void 0:t.DateTimeFormat;if(p){var h=(new p).resolvedOptions().timeZone;if(h)return h}var x=-function getTimezoneOffset(){var t=(new Date).getFullYear();return Math.max(toFloat(new Date(t,0,1).getTimezoneOffset()),toFloat(new Date(t,6,1).getTimezoneOffset()))}();return"UTC".concat(x>=0?"+":"").concat(x)},sessionStorage:function getSessionStorage(){try{return!!window.sessionStorage}catch(t){return!0}},localStorage:function getLocalStorage(){try{return!!window.localStorage}catch(bm){return!0}},indexedDB:function getIndexedDB(){if(!isTrident()&&!function isEdgeHTML(){var t=window,p=navigator;return countTruthy(["msWriteProfilerMark"in t,"MSStream"in t,"msLaunchUri"in p,"msSaveBlob"in p])>=3&&!isTrident()}())try{return!!window.indexedDB}catch(bm){return!0}},openDatabase:function getOpenDatabase(){return!!window.openDatabase},cpuClass:function getCpuClass(){return navigator.cpuClass},platform:function getPlatform(){var t=navigator.platform;return"MacIntel"===t&&isWebKit()&&!isDesktopWebKit()?function isIPad(){if("iPad"===navigator.platform)return!0;var t=screen,p=t.width/t.height;return countTruthy(["MediaSource"in window,!!Element.prototype.webkitRequestFullscreen,p>.65&&p<1.53])>=2}()?"iPad":"iPhone":t},plugins:function getPlugins(){var t=navigator.plugins;if(t){for(var p=[],h=0;h<t.length;++h){var x=t[h];if(x){for(var M=[],k=0;k<x.length;++k){var I=x[k];M.push({type:I.type,suffixes:I.suffixes})}p.push({name:x.name,description:x.description,mimeTypes:M})}}return p}},touchSupport:function getTouchSupport(){var t,p=navigator,h=0;void 0!==p.maxTouchPoints?h=toInt(p.maxTouchPoints):void 0!==p.msMaxTouchPoints&&(h=p.msMaxTouchPoints);try{document.createEvent("TouchEvent"),t=!0}catch(x){t=!1}return{maxTouchPoints:h,touchEvent:t,touchStart:"ontouchstart"in window}},vendor:function getVendor(){return navigator.vendor||""},vendorFlavors:function getVendorFlavors(){for(var t=[],p=0,h=["chrome","safari","__crWeb","__gCrWeb","yandex","__yb","__ybro","__firefox__","__edgeTrackingPreventionStatistics","webkit","oprt","samsungAr","ucweb","UCShellJava","puffinDevice"];p<h.length;p++){var x=h[p],M=window[x];M&&"object"===_typeof$2(M)&&t.push(x)}return t.sort()},cookiesEnabled:function areCookiesEnabled(){var t=document;try{t.cookie="cookietest=1; SameSite=Strict;";var p=-1!==t.cookie.indexOf("cookietest=");return t.cookie="cookietest=1; SameSite=Strict; expires=Thu, 01-Jan-1970 00:00:01 GMT",p}catch(bm){return!1}},colorGamut:function getColorGamut(){for(var t=0,p=["rec2020","p3","srgb"];t<p.length;t++){var h=p[t];if(matchMedia("(color-gamut: ".concat(h,")")).matches)return h}},invertedColors:function areColorsInverted(){return!!doesMatch$5("inverted")||!doesMatch$5("none")&&void 0},forcedColors:function areColorsForced(){return!!doesMatch$4("active")||!doesMatch$4("none")&&void 0},monochrome:function getMonochromeDepth(){if(matchMedia("(min-monochrome: 0)").matches){for(var t=0;t<=100;++t)if(matchMedia("(max-monochrome: ".concat(t,")")).matches)return t;throw new Error("Too high value")}},contrast:function getContrastPreference(){return doesMatch$3("no-preference")?0:doesMatch$3("high")||doesMatch$3("more")?1:doesMatch$3("low")||doesMatch$3("less")?-1:doesMatch$3("forced")?10:void 0},reducedMotion:function isMotionReduced(){return!!doesMatch$2("reduce")||!doesMatch$2("no-preference")&&void 0},reducedTransparency:function isTransparencyReduced(){return!!doesMatch$1("reduce")||!doesMatch$1("no-preference")&&void 0},hdr:function isHDR(){return!!doesMatch("high")||!doesMatch("standard")&&void 0},math:function getMathFingerprint(){var t=li.acos||pi,p=li.acosh||pi,h=li.asin||pi,x=li.asinh||pi,M=li.atanh||pi,k=li.atan||pi,I=li.sin||pi,N=li.sinh||pi,V=li.cos||pi,ee=li.cosh||pi,te=li.tan||pi,re=li.tanh||pi,ne=li.exp||pi,ie=li.expm1||pi,ae=li.log1p||pi;return{acos:t(.12312423423423424),acosh:p(1e308),acoshPf:function acoshPf(t){return li.log(t+li.sqrt(t*t-1))}(1e154),asin:h(.12312423423423424),asinh:x(1),asinhPf:function asinhPf(t){return li.log(t+li.sqrt(t*t+1))}(1),atanh:M(.5),atanhPf:function atanhPf(t){return li.log((1+t)/(1-t))/2}(.5),atan:k(.5),sin:I(-1e300),sinh:N(1),sinhPf:function sinhPf(t){return li.exp(t)-1/li.exp(t)/2}(1),cos:V(10.000000000123),cosh:ee(1),coshPf:function coshPf(t){return(li.exp(t)+1/li.exp(t))/2}(1),tan:te(-1e300),tanh:re(1),tanhPf:function tanhPf(t){return(li.exp(2*t)-1)/(li.exp(2*t)+1)}(1),exp:ne(1),expm1:ie(1),expm1Pf:function expm1Pf(t){return li.exp(t)-1}(1),log1p:ae(10),log1pPf:function log1pPf(t){return li.log(1+t)}(10),powPI:function powPI(t){return li.pow(li.PI,t)}(-100)}},pdfViewerEnabled:function isPdfViewerEnabled(){return navigator.pdfViewerEnabled},architecture:function getArchitecture(){var t=new Float32Array(1),p=new Uint8Array(t.buffer);return t[0]=1/0,t[0]=t[0]-t[0],p[3]},applePay:function getApplePayState(){var t=window.ApplePaySession;if("function"!=typeof(null==t?void 0:t.canMakePayments))return-1;if(fi())return-3;try{return t.canMakePayments()?1:0}catch(p){return function getStateFromError(t){if(t instanceof Error&&"InvalidAccessError"===t.name&&/\bfrom\b.*\binsecure\b/i.test(t.message))return-2;throw t}(p)}},privateClickMeasurement:function getPrivateClickMeasurement(){var t,p=document.createElement("a"),h=null!==(t=p.attributionSourceId)&&void 0!==t?t:p.attributionsourceid;return void 0===h?void 0:String(h)},audioBaseLatency:function getAudioContextBaseLatency(){var t;return isAndroid()||isWebKit()?window.AudioContext&&null!==(t=(new AudioContext).baseLatency)&&void 0!==t?t:-1:-2},webGlBasics:function getWebGlBasics(t){var p,h,x,M,k,I,N=getWebGLContext(t.cache);if(!N)return-1;if(!isValidParameterGetter(N))return-2;var V=shouldAvoidDebugRendererInfo()?null:N.getExtension(yi);return{version:(null===(p=N.getParameter(N.VERSION))||void 0===p?void 0:p.toString())||"",vendor:(null===(h=N.getParameter(N.VENDOR))||void 0===h?void 0:h.toString())||"",vendorUnmasked:V?null===(x=N.getParameter(V.UNMASKED_VENDOR_WEBGL))||void 0===x?void 0:x.toString():"",renderer:(null===(M=N.getParameter(N.RENDERER))||void 0===M?void 0:M.toString())||"",rendererUnmasked:V?null===(k=N.getParameter(V.UNMASKED_RENDERER_WEBGL))||void 0===k?void 0:k.toString():"",shadingLanguageVersion:(null===(I=N.getParameter(N.SHADING_LANGUAGE_VERSION))||void 0===I?void 0:I.toString())||""}},webGlExtensions:function getWebGlExtensions(t){var p=getWebGLContext(t.cache);if(!p)return-1;if(!isValidParameterGetter(p))return-2;var h=p.getSupportedExtensions(),x=p.getContextAttributes(),M=[],k=[],I=[],N=[],V=[];if(x)for(var ee=0,te=Object.keys(x);ee<te.length;ee++){var re=te[ee];k.push("".concat(re,"=").concat(x[re]))}for(var ne=0,ie=getConstantsFromPrototype(p);ne<ie.length;ne++){var ae=p[he=ie[ne]];I.push("".concat(he,"=").concat(ae).concat(di.has(ae)?"=".concat(p.getParameter(ae)):""))}if(h)for(var oe=0,se=h;oe<se.length;oe++){var ce=se[oe];if(!(ce===yi&&shouldAvoidDebugRendererInfo()||"WEBGL_polygon_mode"===ce&&(isChromium()||isWebKit()))){var ue=p.getExtension(ce);if(ue)for(var le=0,pe=getConstantsFromPrototype(ue);le<pe.length;le++){var he;ae=ue[he=pe[le]];N.push("".concat(he,"=").concat(ae).concat(mi.has(ae)?"=".concat(p.getParameter(ae)):""))}else M.push(ce)}}for(var fe=0,de=gi;fe<de.length;fe++)for(var me=de[fe],ge=0,ve=vi;ge<ve.length;ge++){var ye=ve[ge],xe=getShaderPrecision(p,me,ye);V.push("".concat(me,".").concat(ye,"=").concat(xe.join(",")))}return N.sort(),I.sort(),{contextAttributes:k,parameters:I,shaderPrecisions:V,extensions:h,extensionParameters:N,unsupportedExtensions:M}}};var bi="$ if upgrade to Pro: https://fpjs.dev/pro";function getConfidence(t){var p=function getOpenConfidenceScore(t){if(isAndroid())return.4;if(isWebKit())return!isDesktopWebKit()||isWebKit616OrNewer()&&isSafariWebKit()?.3:.5;var p="value"in t.platform?t.platform.value:"";if(/^Win/.test(p))return.6;if(/^Mac/.test(p))return.5;return.7}(t),h=function deriveProConfidenceScore(t){return round(.99+.01*t,1e-4)}(p);return{score:p,comment:bi.replace(/\$/g,"".concat(h))}}function hashComponents(t){return x64hash128(function componentsToCanonicalString(t){for(var p="",h=0,x=Object.keys(t).sort();h<x.length;h++){var M=x[h],k=t[M],I="error"in k?"error":JSON.stringify(k.value);p+="".concat(p?"|":"").concat(M.replace(/([:|\\])/g,"\\$1"),":").concat(I)}return p}(t))}function prepareForSources(t){return void 0===t&&(t=50),function requestIdleCallbackIfAvailable(t,p){void 0===p&&(p=1/0);var h=window.requestIdleCallback;return h?new Promise((function(t){return h.call(window,(function(){return t()}),{timeout:p})})):wait(Math.min(t,p))}(t,2*t)}function makeAgent(t,p){Date.now();return{get:function get(h){return __awaiter(this,void 0,void 0,(function(){var x,M;return __generator(this,(function(k){switch(k.label){case 0:return Date.now(),[4,t()];case 1:return x=k.sent(),M=function makeLazyGetResult(t){var p;return{get visitorId(){return void 0===p&&(p=hashComponents(this.components)),p},set visitorId(t){p=t},confidence:getConfidence(t),components:t,version:Zn}}(x),p||null==h||h.debug,[2,M]}}))}))}}}function load(t){var p;return void 0===t&&(t={}),__awaiter(this,void 0,void 0,(function(){var h,x,M;return __generator(this,(function(k){switch(k.label){case 0:return(null===(p=t.monitoring)||void 0===p||p)&&function monitor(){if(!(window.__fpjs_d_m||Math.random()>=.001))try{var t=new XMLHttpRequest;t.open("get","https://m1.openfpcdn.io/fingerprintjs/v".concat(Zn,"/npm-monitoring"),!0),t.send()}catch(p){}}(),h=t.delayFallback,x=t.debug,[4,prepareForSources(h)];case 1:return k.sent(),M=function loadBuiltinSources(t){return loadSources(xi,t,[])}({cache:{},debug:x}),[2,makeAgent(M,x)]}}))}))}var _i=function getCanvasId(t){var p=null;if("string"==typeof t&&t.length>0){if(!(p=document.querySelector(t)))return t.replace(/^#/,"")}else t instanceof HTMLCanvasElement&&(p=t);if(p)return p.id||(p.id=Math.random().toString(16).slice(2)),p.id},Mi=function createMxDraw(t,h,x,M,k){return new Promise((function(I,N){try{p.MxFun.createMxObject({canvasId:_i(t),isCPPMxCAD:!0,mapBox:x,callback:function callback(t){t.initRendererParam({webgl2:!0!==M}),t.setViewMovementMethod(void 0===h||h),k&&k.callEvent("init_before_mxdraw",t),t.addEvent("initObject",(function(){t.isWebgl2(),I(t)}))}})}catch(bm){N(bm)}}))},Ci=function createMxCadCppObject(t,p,h,x,M,k,I,N){var V=t.CreateMxDraw(p,h,x,M,k,I);return N?N.init(V):N=new Hr(V),V.McObject=N,V.McObject};function Mx_About(){}var Si,Ti=function(){var h=_asyncToGenerator(ie.mark((function _callee(h,x){var M,k,I,N,V,ee,te,re,ne,oe,se,ce,ue,le,pe,he,fe,de,me,ge,ve,ye,xe,be,_e,Me,Ce,we,Se,Te,Ae;return ie.wrap((function _callee$(ie){for(;;)switch(ie.prev=ie.next){case 0:if(p.store.state.MxFun){ie.next=3;break}return ie.next=3,p.loadCoreCode();case 3:return k=(M=h||{}).openParameter,I=M.networkFonts,N=M.fontspath,V=M.locateFile,ee=M.wasmBinary,te=M.canvas,re=M.onOpenFileComplete,ne=M.fileUrl,oe=M.onInit,se=M.middlePan,ce=M.registdata,ue=M.registfile,le=M.authorized_service,pe=M.viewBackgroundColor,he=M.map,fe=M.multipleSelect,de=M.enableUndo,me=M.enableIntelliSelect,ge=M.browse,ve=M.webgl1,ie.next=6,loadMxCADassembly((function(){}),V,ee,N,I);case 6:return p.MxFun.initMxCpp(t.MxCpp),Mt.init(),p.MxFun.setIniset({EnableIntelliSelect:void 0===me||me}),void 0!==de&&t.MxCpp.App.IniSet({EnableUndo:de}),pe&&t.MxCpp.App.setDefaultViewBackgroundColor(pe.red,pe.green,pe.blue),oe&&oe(),x&&x.callEvent("init"),ie.next=15,Mi(te,se,he,ve,x);case 15:if(ye=ie.sent,void 0!==fe&&ye.setMultipleSelect(fe),pe&&ye.setViewColor(pe.red<<16|pe.green<<8|pe.blue),x&&x.callEvent("init_mxdraw",ye),xe=p.MxFun.getMxFunTHREE(),be=new xe.Vector2,ye.getRenderer().getSize(be),_e=Ci(t.MxCpp.App.getImp(),be.width,be.height,ye.getCanvas().id,ye.isWebgl2(),ye.getId(),!!he,x),1==(Me=t.MxCpp.App.getImp().getCodeVersion())||2==Me){ie.next=35;break}if(!(ce&&ce.length>0)){ie.next=29;break}_e.initRegist(ce),ie.next=35;break;case 29:return Ce=ue,ue&&ue.length>0||(Ce="mxkey.json.frontpage.json"),ie.next=33,ae(Ce);case 33:(we=ie.sent)&&we.registdata?(_e.initRegist(we.registdata),le?"same_current_page_url"==le&&we.authorized_service&&we.authorized_service.length>0?_e.iniAuthorizedService(we.authorized_service):_e.iniAuthorizedService(le):we.authorized_service&&we.authorized_service.length>0&&_e.iniAuthorizedService(we.authorized_service)):le&&_e.iniAuthorizedService(le);case 35:if(3!=Me){ie.next=48;break}if((Se=localStorage.getItem("_mx_tmp_id_"))&&0!=Se.length){ie.next=47;break}return window.__fpjs_d_m=!0,ie.next=42,load();case 42:return Te=ie.sent,ie.next=45,Te.get();case 45:Se=ie.sent.visitorId,localStorage.setItem("_mx_tmp_id_",Se);case 47:t.MxCpp.App.getImp().addFontsLoadOnInitialization(Se,-121);case 48:return ye.initMxCpp(_e),ye.addEvent("openFileComplete",(function(){re&&re(_e)})),_e&&(!0===ge||1===ge?(_e.setBrowse(!0),void 0===se&&(se=0)):2==ge&&(void 0===se&&(se=0),p.MxFun.setIniset({ForbiddenDynInput:!0,EnableCADEntityGripEdit:0})),void 0!==se&&_e.mxdraw.setMouseMiddlePan(se),_e.callEvent("init_mxcad",_e)),ne&&(Ae=0,k&&k&&(Ae=k),_e.openWebFile(ne,void 0,!0,k,Ae)),ie.abrupt("return",_e);case 53:case"end":return ie.stop()}}),_callee)})));return function createMxCad(t,p){return h.apply(this,arguments)}}(),Ai=function(t){return t[t.kByLayer=1]="kByLayer",t[t.kByBlock=2]="kByBlock",t[t.kByColor=3]="kByColor",t[t.kByACI=4]="kByACI",t[t.kByPen=5]="kByPen",t[t.kForeground=6]="kForeground",t[t.kLayerOff=7]="kLayerOff",t[t.kLayerFrozen=8]="kLayerFrozen",t[t.kNone=9]="kNone",t}(Ai||{}),ki=function(t){return t[t.kByblock=0]="kByblock",t[t.kRed=1]="kRed",t[t.kYellow=2]="kYellow",t[t.kGreen=3]="kGreen",t[t.KCyan=4]="KCyan",t[t.kBlue=5]="kBlue",t[t.kMagenta=6]="kMagenta",t[t.kWhite=7]="kWhite",t[t.kBylayer=256]="kBylayer",t}(ki||{}),Di=function getColorUtils(){if(!Si){var t=p.MxFun.getMxFunTHREE();Si=new t.Color}for(var h,x=arguments.length,M=new Array(x),k=0;k<x;k++)M[k]=arguments[k];if(function isRGB(t){return 3===t.length}(M))(h=Si).setRGB.apply(h,M);else if(function isColor(t){return"object"===_typeof$2(t[0])&&t[0].isColor}(M)){var I;(I=Si).set.apply(I,M)}else if(function isNumber(t){return"number"==typeof t[0]&&1===t.length}(M)){var N;(N=Si).set.apply(N,M)}else if(function isString(t){return"string"==typeof t[0]&&1===t.length}(M)){var V;(V=Si).set.apply(V,M)}return Si},Pi=function createMcCmColor(){for(var t=new Sr,p=arguments.length,h=new Array(p),x=0;x<p;x++)h[x]=arguments[x];return Oi.apply(void 0,[t].concat(h)),t},Oi=function setMcCmColor(p){for(var h=arguments.length,x=new Array(h>1?h-1:0),M=1;M<h;M++)x[M-1]=arguments[M];if(function isTHREEColorAges(t){return t.length>1||"object"===_typeof$2(t[0])&&t[0].isColor||"string"==typeof t[0]||"number"==typeof t[0]}(x)){var k=Di.apply(void 0,x),I=k.r,N=k.g,V=k.b;p.red=255*I,p.green=255*N,p.blue=255*V}(function isMcCmColor(t){return"object"===_typeof$2(t[0])&&!(t[0]&&t[0].isColor)})(x)&&(p=Object.assign(p,x[0])),function setColorIndex(p){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.MxCpp.App.mcedRGB2Index(p.red,p.green,p.blue,!1);-1===h?p.method=3:p.setColorIndex(h),7===h?p.method=4:0===h?p.method=2:256===h?p.method=1:-1!==h&&(p.method=4),p.colorIndex=h}(p)};function drawText(){return _drawText.apply(this,arguments)}function _drawText(){return _drawText=_asyncToGenerator(ie.mark((function _callee(){var p,h,x,M,k,I,N,V,ee,te,re,ne,ae,oe,se,ce;return ie.wrap((function _callee$(ie){for(;;)switch(ie.prev=ie.next){case 0:return k=function createText(){var k=new Bt;return k.height=p||100,k.textString=h||"",k.position=x||new nn,k.trueColor=new Sr(t.MxCpp.getCurrentMxCAD().getCurrentDatabaseDrawColor()),k.rotation=M||0,k},(I=new Ot).setMessage(""),ie.next=5,I.go();case 5:if(N=ie.sent){ie.next=8;break}return ie.abrupt("return");case 8:return h=N,(V=new Tt).clearLastInputPoint(),V.setMessage(""),V.setUserDraw((function(t,p){x=t,p.drawMcDbEntity(k())})),ie.next=15,V.go();case 15:if(ee=ie.sent){ie.next=18;break}return ie.abrupt("return");case 18:return x=ee,(te=new At).setBasePt(x),te.setMessage(_ML_String("Mx_Text_Height","")),te.setUserDraw((function(t,h){x&&(p=t.distanceTo(x)),h.drawMcDbEntity(k())})),ie.next=25,te.go();case 25:if(re=ie.sent){ie.next=28;break}return ie.abrupt("return");case 28:return p=re,(ne=new kt).setBasePt(x),ne.clearLastInputPoint(),ne.setMessage(_ML_String("Mx_Text_Angle","")),ne.setUserDraw((function(t,p){x&&(M=angleTo(t.x,t.y,x.x,x.y)),p.drawMcDbEntity(k())})),ie.next=36,ne.go();case 36:return null!==(ae=ie.sent)&&8===ne.getDetailedResult()&&(M=ae),oe=k(),se=t.MxCpp.getCurrentMxCAD(),ce=se.drawEntity(oe),se.updateDisplay(),ie.abrupt("return",ce);case 43:case"end":return ie.stop()}}),_callee)}))),_drawText.apply(this,arguments)}function _construct(t,p,h){return _construct=function _isNativeReflectConstruct$3(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(bm){return!1}}()?Reflect.construct.bind():function _construct(t,p,h){var x=[null];x.push.apply(x,p);var M=new(Function.bind.apply(t,x));return h&&_setPrototypeOf$1(M,h.prototype),M},_construct.apply(null,arguments)}function _createForOfIteratorHelper$1(t,p){var h="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!h){if(Array.isArray(t)||(h=function _unsupportedIterableToArray$1(t,p){if(!t)return;if("string"==typeof t)return _arrayLikeToArray$1(t,p);var h=Object.prototype.toString.call(t).slice(8,-1);"Object"===h&&t.constructor&&(h=t.constructor.name);if("Map"===h||"Set"===h)return Array.from(t);if("Arguments"===h||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return _arrayLikeToArray$1(t,p)}(t))||p&&t&&"number"==typeof t.length){h&&(t=h);var x=0,M=function F(){};return{s:M,n:function n(){return x>=t.length?{done:!0}:{done:!1,value:t[x++]}},e:function e(t){throw t},f:M}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var k,I=!0,N=!1;return{s:function s(){h=h.call(t)},n:function n(){var t=h.next();return I=t.done,t},e:function e(t){N=!0,k=t},f:function f(){try{I||null==h.return||h.return()}finally{if(N)throw k}}}}function _arrayLikeToArray$1(t,p){(null==p||p>t.length)&&(p=t.length);for(var h=0,x=new Array(p);h<p;h++)x[h]=t[h];return x}function createParallelLines(t,p){var h=t.endPoint.sub(t.startPoint).normalize(),x=new sn(-h.y,h.x,0).mult(p),M=t.startPoint.clone().addvec(x),k=t.endPoint.clone().addvec(x),I=t.startPoint.clone().subvec(x),N=t.endPoint.clone().subvec(x);return[new Rt(M,k),new Rt(I,N)]}function createOffsetShapes(t,p,h){var x=function getOffsetCircle(t){return[_construct(Vt,_toConsumableArray(t.center.toVector3().toArray()).concat([Math.max(0,t.radius-p)])),_construct(Vt,_toConsumableArray(t.center.toVector3().toArray()).concat([t.radius+p]))]};if(t instanceof Ut&&h){var M=selectLineSegmentFromPolylineByPoint(t,h,.1)||{},k=M.start,I=M.end,N=M.bulge;if(!k||!I)return[];if(N&&0!==N){var V=function calculateCenter(t,p,h){var x=t.distanceTo(p)/2,M=x*h,k=(x*x+M*M)/(2*M),I=(t.x+p.x)/2,N=(t.y+p.y)/2;return new nn(I,N).addvec(p.clone().sub(t).perpVector().normalize().mult(k-M))}(k,I,N);return x(_construct(Vt,_toConsumableArray(V.toVector3().toArray()).concat([V.distanceTo(k)])))}return createParallelLines(new Rt(k,I),p)}if(t instanceof Rt){var ee=_slicedToArray$1(createParallelLines(t,p),2);return[ee[0],ee[1]]}return t instanceof Vt||t instanceof Kt?x(t):[]}function findTangentCircles(p,h,x,M,k){var I,N=createOffsetShapes(p,x,M),V=createOffsetShapes(h,x,k),ee=[],te=_createForOfIteratorHelper$1(N);try{for(te.s();!(I=te.n()).done;){var re,ne=I.value,ie=_createForOfIteratorHelper$1(V);try{var ae=function _loop(){var p=re.value,h=[],x=ne instanceof Vt&&p instanceof Vt?t.McDb.Intersect.kOnBothOperands:t.McDb.Intersect.kExtendBoth;ne.IntersectWith(p,x).forEach((function(t){h.push(t)})),ee.push.apply(ee,h)};for(ie.s();!(re=ie.n()).done;)ae()}catch(oe){ie.e(oe)}finally{ie.f()}}}catch(oe){te.e(oe)}finally{te.f()}return ee}var Ii,Li=function threePointsToDetermineTheCenterOfTheCircle(t){var p=_slicedToArray$1(t,3),h=p[0],x=p[1],M=p[2],k=h.x,I=h.y,N=h.z,V=x.x,ee=x.y,te=x.z,re=M.x,ne=M.y,ie=M.z,ae=I*te-ee*N-I*ie+ne*N+ee*ie-ne*te,oe=-(k*te-V*N-k*ie+re*N+V*ie-re*te),se=k*ee-V*I-k*ne+re*I+V*ne-re*ee,ce=-(k*ee*ie-k*ne*te-V*I*ie+V*ne*N+re*I*te-re*ee*N),ue=2*(V-k),le=2*(ee-I),pe=2*(te-N),he=k*k+I*I+N*N-V*V-ee*ee-te*te,fe=2*(re-k),de=2*(ne-I),me=2*(ie-N),ge=k*k+I*I+N*N-re*re-ne*ne-ie*ie;return new nn(-(oe*pe*ge-oe*me*he-le*se*ge+le*me*ce+de*se*he-de*pe*ce)/(ae*le*me-ae*de*pe-ue*oe*me+ue*de*se+fe*oe*pe-fe*le*se),(ae*pe*ge-ae*me*he-ue*se*ge+ue*me*ce+fe*se*he-fe*pe*ce)/(ae*le*me-ae*de*pe-ue*oe*me+ue*de*se+fe*oe*pe-fe*le*se),-(ae*le*ge-ae*de*he-ue*oe*ge+ue*de*ce+fe*oe*he-fe*le*ce)/(ae*le*me-ae*de*pe-ue*oe*me+ue*de*se+fe*oe*pe-fe*le*se))};function drawCircle(){return _drawCircle.apply(this,arguments)}function _drawCircle(){return _drawCircle=_asyncToGenerator(ie.mark((function _callee(){var h,x,M,k,I,N,V,ee,te,re,ne,ae,oe,se,ce;return ie.wrap((function _callee$(ue){for(;;)switch(ue.prev=ue.next){case 0:h=new Tt,x=new Vt,M=t.MxCpp.getCurrentMxCAD().getCurrentDatabaseDrawColor(),x.trueColor=new Sr(M),(oe=new bt).AddMcDbEntityTypes("ARC,LINE,LWPOLYLINE,CIRCLE"),se=ie.mark((function _loop2(){var M,se,ce,ue,le,pe,he,fe,de,me,ge,ve,ye,xe,be,_e,Me,Ce,we,Se,Te,Ae,ke,De,Oe,Ie;return ie.wrap((function _loop2$(ie){for(;;)switch(ie.prev=ie.next){case 0:if(void 0===k&&(h.setKeyWords("[(3P)/(2P)/(T)]"),k="default"),"default"!==k){ie.next=47;break}if(N){ie.next=19;break}return h.setMessage("\n"),ie.next=6,h.go();case 6:if(M=ie.sent,!h.isKeyWordPicked("3P")){ie.next=10;break}return k="3P",ie.abrupt("return",0);case 10:if(!h.isKeyWordPicked("2P")){ie.next=13;break}return k="2P",ie.abrupt("return",0);case 13:if(!h.isKeyWordPicked("T")){ie.next=16;break}return k="T",ie.abrupt("return",0);case 16:if(M){ie.next=18;break}return ie.abrupt("return",{v:void 0});case 18:N=M;case 19:if(V){ie.next=44;break}return(se=new At).setBasePt(N),void 0===I&&(se.setKeyWords("[(D)]"),I=!0),se.setMessage(_ML_String("McDbCircle_Radius",""+(I?"":""))),se.setUserDraw((function(t,p){if(N){var h=new Vt(N.x,N.y,N.z,I?N.distanceTo(t):N.distanceTo(t)/2);p.drawMcDbEntity(h),p.drawLine(h.center.toVector3(),t.toVector3())}})),ie.next=27,se.go();case 27:if(ce=ie.sent,!se.isKeyWordPicked("D")){ie.next=40;break}return I=!1,se.clearLastInputPoint(),se.setBasePt(N),se.setMessage(_ML_String("McDbCircle_Diameter","")),se.setKeyWords(""),ie.next=36,se.go();case 36:if(ue=ie.sent){ie.next=39;break}return ie.abrupt("return",{v:void 0});case 39:V=ue/2;case 40:if(V){ie.next=44;break}if(ce){ie.next=43;break}return ie.abrupt("return",{v:void 0});case 43:V=ce;case 44:return x.center=N,x.radius=V,ie.abrupt("return",{v:t.MxCpp.getCurrentMxCAD().drawEntity(x,!0)});case 47:if("3P"!==k){ie.next=77;break}if(ee){ie.next=56;break}return h.setMessage(""),h.setKeyWords(""),ie.next=53,h.go();case 53:if(ee=ie.sent){ie.next=56;break}return ie.abrupt("return",{v:void 0});case 56:if(te){ie.next=65;break}return h.setMessage(""),h.setKeyWords(""),h.setUserDraw((function(t,p){ee&&p.drawLine(ee.toVector3(),t.toVector3())})),ie.next=62,h.go();case 62:if(te=ie.sent){ie.next=65;break}return ie.abrupt("return",{v:void 0});case 65:if(re){ie.next=74;break}return h.setMessage(""),h.setKeyWords(""),h.setUserDraw((function(t,p){if(ee&&te){var h=Li([ee,te,t]);if(h){var x=new Vt(h.x,h.y,h.z,h.distanceTo(ee));p.drawMcDbEntity(x)}}})),ie.next=71,h.go();case 71:if(re=ie.sent){ie.next=74;break}return ie.abrupt("return",{v:void 0});case 74:return le=Li([ee,te,re]),pe=new Vt(le.x,le.y,le.z,le.distanceTo(ee)),ie.abrupt("return",{v:t.MxCpp.getCurrentMxCAD().drawEntity(pe,!0)});case 77:if("2P"!==k){ie.next=98;break}if(ne){ie.next=86;break}return h.setMessage(""),h.setKeyWords(""),ie.next=83,h.go();case 83:if(ne=ie.sent){ie.next=86;break}return ie.abrupt("return",{v:void 0});case 86:if(ae){ie.next=95;break}return h.setMessage(""),h.setKeyWords(""),h.setUserDraw((function(t,p){ne&&(N=new nn((t.x+ne.x)/2,(t.y+ne.y)/2,(t.z+ne.z)/2),V=N.distanceTo(ne),p.drawMcDbEntity(new Vt(N.x,N.y,N.z,V)))})),ie.next=92,h.go();case 92:if(ae=ie.sent){ie.next=95;break}return ie.abrupt("return",{v:void 0});case 95:return N=new nn((ae.x+ne.x)/2,(ae.y+ne.y)/2,(ae.z+ne.z)/2),V=N.distanceTo(ne),ie.abrupt("return",{v:t.MxCpp.getCurrentMxCAD().drawEntity(new Vt(N.x,N.y,N.z,V),!0)});case 98:if("T"!==k){ie.next=156;break}return h.setMessage(""),h.setKeyWords(""),ie.next=103,h.go();case 103:if(he=ie.sent){ie.next=106;break}return ie.abrupt("return",{v:void 0});case 106:if(fe=Mt.findEntAtPoint(he.x,he.y,he.z,-1,oe),de=fe.getMcDbCurve()){ie.next=110;break}return ie.abrupt("return",0);case 110:return h.setMessage(""),h.clearLastInputPoint(),ie.next=114,h.go();case 114:if(me=ie.sent){ie.next=117;break}return ie.abrupt("return",{v:void 0});case 117:if(ge=Mt.findEntAtPoint(me.x,me.y,me.z,-1,oe),ve=ge.getMcDbCurve()){ie.next=121;break}return ie.abrupt("return",0);case 121:return(ye=new At).setMessage(""),ie.next=125,ye.go();case 125:if(xe=ie.sent){ie.next=128;break}return ie.abrupt("return",{v:void 0});case 128:if((be=findTangentCircles(de,ve,xe,he,me))&&0!==be.length){ie.next=131;break}return ie.abrupt("return",{v:void 0});case 131:if(1!==be.length){ie.next=137;break}return _e=_slicedToArray$1(be,1),Me=_e[0],Ce=new Vt(Me.x,Me.y,Me.z,xe),ie.abrupt("return",{v:t.MxCpp.getCurrentMxCAD().drawEntity(Ce)});case 137:return(we=new Tt).clearLastInputPoint(),we.setMessage(""),Se=function getCenter(t){var p=be.map((function(p){return p.distanceTo(t)})),h=Math.min.apply(Math,_toConsumableArray(p)),x=p.indexOf(h);return be[x]},we.setUserDraw((function(t,p){var h=Se(t);p.drawCircle(h.toVector3(),xe)})),ie.next=144,we.go();case 144:if(Te=ie.sent,we.getStatus()!==p.MrxDbgUiPrBaseReturn.kCancel){ie.next=147;break}return ie.abrupt("return",{v:void 0});case 147:if(Te){ie.next=153;break}return Ae=_slicedToArray$1(be,1),ke=Ae[0],De=new Vt(ke.x,ke.y,ke.z,xe),ie.abrupt("return",{v:t.MxCpp.getCurrentMxCAD().drawEntity(De)});case 153:return Oe=Se(Te),Ie=new Vt(Oe.x,Oe.y,Oe.z,xe),ie.abrupt("return",{v:t.MxCpp.getCurrentMxCAD().drawEntity(Ie)});case 156:case"end":return ie.stop()}}),_loop2)}));case 7:return ue.delegateYield(se(),"t0",9);case 9:if(0!==(ce=ue.t0)){ue.next=12;break}return ue.abrupt("continue",7);case 12:if(!ce){ue.next=14;break}return ue.abrupt("return",ce.v);case 14:ue.next=7;break;case 16:case"end":return ue.stop()}}),_callee)}))),_drawCircle.apply(this,arguments)}function drawLine(){return _drawLine.apply(this,arguments)}function _drawLine(){return _drawLine=_asyncToGenerator(ie.mark((function _callee(){var p,h,x,M,k,I,N,V,ee,te;return ie.wrap((function _callee$(re){for(;;)switch(re.prev=re.next){case 0:return(p=new Tt).setMessage("\n:"),re.next=4,p.go();case 4:if(h=re.sent,x=h,h){re.next=8;break}return re.abrupt("return");case 8:p.setMessage("\n:"),M=0,k=[];case 11:return M>=2?p.setKeyWords("[(E)/(C)/(U)]"):M>0?p.setKeyWords("[(E)/(U)]"):p.setKeyWords(""),p.setBasePt(h),re.next=16,p.go();case 16:if(I=re.sent,!p.isKeyWordPicked("C")){re.next=23;break}return N=new Rt(x,h),t.MxCpp.getCurrentMxCAD().drawEntity(N),re.abrupt("return");case 23:if(!p.isKeyWordPicked("E")){re.next=27;break}return re.abrupt("return");case 27:if(!p.isKeyWordPicked("U")){re.next=36;break}if(0!=k.length){re.next=30;break}return re.abrupt("continue",11);case 30:return V=k[k.length-1],k.pop(),M--,h=V.prvPoint,V.id.erase(),re.abrupt("continue",11);case 36:if(I){re.next=38;break}return re.abrupt("return");case 38:ee=new Rt(h,I),M++,te=t.MxCpp.getCurrentMxCAD().drawEntity(ee),k.push({id:te,prvPoint:h}),h=I,re.next=11;break;case 45:case"end":return re.stop()}}),_callee)}))),_drawLine.apply(this,arguments)}function Mx_Point(){return _Mx_Point.apply(this,arguments)}function _Mx_Point(){return(_Mx_Point=_asyncToGenerator(ie.mark((function _callee2(){var p,h;return ie.wrap((function _callee2$(x){for(;;)switch(x.prev=x.next){case 0:(p=new Tt).setMessage("");case 2:return p.clearLastInputPoint(),x.next=6,p.go();case 6:if(null!=(h=x.sent)){x.next=9;break}return x.abrupt("break",12);case 9:t.MxCpp.getCurrentMxCAD().drawEntity(new qt(h)),x.next=2;break;case 12:case"end":return x.stop()}}),_callee2)})))).apply(this,arguments)}function MxDb_Spline(){return _MxDb_Spline.apply(this,arguments)}function _MxDb_Spline(){return(_MxDb_Spline=_asyncToGenerator(ie.mark((function _callee3(){var p,h,x,M,k;return ie.wrap((function _callee3$(I){for(;;)switch(I.prev=I.next){case 0:return(p=new Tt).setMessage("\n:"),I.next=4,p.go();case 4:if(h=I.sent){I.next=7;break}return I.abrupt("return");case 7:p.setMessage("\n:"),(x=new pn).append(h);case 10:return p.setBasePt(h),1==x.length()?p.setUseBasePt(!0):(p.setUseBasePt(!1),p.setUserDraw((function(t,p){var h=new pn;h.copy(x),h.append(t);var M=new rr;M.setFitPoints({degree:3,fitTolerance:1e-6,tangentsExist:!1,startTangent:sn.kIdentity,endTangent:sn.kIdentity,fitPoints:h}),p.drawMcDbEntity(M)}))),I.next=15,p.go();case 15:if(M=I.sent){I.next=18;break}return I.abrupt("break",22);case 18:x.append(M),h=M,I.next=10;break;case 22:x.length()>2&&((k=new rr).setFitPoints({degree:3,fitTolerance:1e-6,tangentsExist:!1,startTangent:sn.kIdentity,endTangent:sn.kIdentity,fitPoints:x}),t.MxCpp.getCurrentMxCAD().drawEntity(k));case 23:case"end":return I.stop()}}),_callee3)})))).apply(this,arguments)}function drawMText(){return _drawMText.apply(this,arguments)}function _drawMText(){return _drawMText=_asyncToGenerator(ie.mark((function _callee(){var p,h,x,M,k,I,N,V,ee,te,re,ne,ae,oe,se,ce;return ie.wrap((function _callee$(ie){for(;;)switch(ie.prev=ie.next){case 0:return k=function createMText(){var k=new Ft;return k.textHeight=p||100,k.contents=h||"",k.location=x||new nn,k.trueColor=new Sr(t.MxCpp.getCurrentMxCAD().getCurrentDatabaseDrawColor()),k.rotation=M||0,k},(I=new Ot).setMessage(""),ie.next=5,I.go();case 5:if(N=ie.sent){ie.next=8;break}return ie.abrupt("return");case 8:return h=N,(V=new Tt).clearLastInputPoint(),V.setMessage(""),V.setUserDraw((function(t,p){x=t,p.drawMcDbEntity(k())})),ie.next=15,V.go();case 15:if(ee=ie.sent){ie.next=18;break}return ie.abrupt("return");case 18:return x=ee,(te=new At).setBasePt(x),te.setMessage(_ML_String("Mx_Text_Height","")),te.setUserDraw((function(t,h){x&&(p=t.distanceTo(x)),h.drawMcDbEntity(k())})),ie.next=25,te.go();case 25:if(re=ie.sent){ie.next=28;break}return ie.abrupt("return");case 28:return p=re,(ne=new kt).setBasePt(x),ne.clearLastInputPoint(),ne.setMessage(_ML_String("Mx_MText_Angle","")),ne.setUserDraw((function(t,p){x&&(M=angleTo(t.x,t.y,x.x,x.y)),p.drawMcDbEntity(k())})),ie.next=36,ne.go();case 36:return null!==(ae=ie.sent)&&8===ne.getDetailedResult()&&(M=ae),oe=k(),se=t.MxCpp.getCurrentMxCAD(),ce=se.drawEntity(oe),se.updateDisplay(),ie.abrupt("return",ce);case 43:case"end":return ie.stop()}}),_callee)}))),_drawMText.apply(this,arguments)}function CMxDrawPolylineDragArcDraw_CalcArcBulge(p,h,x){if(p.isEqualTo(h))return 0;var M=p.c().addvec(h.c().sub(p).mult(.5)),k=h.c().sub(p);k.rotateBy(Math.PI/2,sn.kZAxis);var I=new Rt(M,M.c().addvec(k)),N=x.c();N.rotateBy(Math.PI/2,sn.kZAxis);var V=new Rt(p,p.c().addvec(N)),ee=I.IntersectWith(V,t.McDb.Intersect.kExtendBoth);if(ee.isEmpty())return 0;var te=ee.at(0),re=te.distanceTo(p);k.normalize(),k.mult(re);var ne=te.c().addvec(k),ie=te.c().subvec(k),ae=ne.c().sub(p),oe=ie.c().sub(p),se=ne;return ae.angleTo1(x)>oe.angleTo1(x)&&(se=ie),Mt.calcBulge(p,se,h).val}function drawPolyLine(){return _drawPolyLine.apply(this,arguments)}function _drawPolyLine(){return _drawPolyLine=_asyncToGenerator(ie.mark((function _callee(){var h,x,M,k,I,N,V,ee,te,re,ne,ae,oe,se,ce,ue,le,pe,he,fe;return ie.wrap((function _callee$(de){for(;;)switch(de.prev=de.next){case 0:return(h=new Tt).setMessage("\n:"),de.next=4,h.go();case 4:if(null!==(x=de.sent)){de.next=7;break}return de.abrupt("return");case 7:M=[],(I={}).dStartWidth=k=0,I.dEndWidth=k,I.pt=x,I.dBulge=0,M.push(I),N=!1,V=!0,ee=!1,te=k,re=k,ne=[],ae=t.MxCpp.getCurrentMxCAD(),p.MxFun.acutPrintf("\n  {0}",k+""),oe=!1,se=function onKeydown(t){"Control"===t.key&&(oe=!0)},ce=function onkeyup(){return oe=!1},window.addEventListener("keydown",se),window.addEventListener("keyup",ce),ue=ie.mark((function _loop(){var t,h,I,se,ce,ue,le,pe,he,fe,de,me,ge,ve,ye,xe,be,_e,Me,Ce,we,Se,Te,Ae,ke,De,Oe,Ie,Le,Ee,Re,Be,Ne,Ge,Fe,Ve,Ue,je,We,ze,He,$e,Ye,Ke,Xe,qe,Ze,Je,Qe,et,tt,rt,nt,it,ot,st,ct,ut,lt,pt,ht,ft,dt,mt,gt,vt,yt,xt,bt,_t,Ct,wt,St,Dt,Pt,Ot,It,Lt,Et,Rt,Bt,Nt,Gt,Ft,Vt,jt,Wt,zt,Ht,$t,Yt,Xt,qt,Zt,Jt,Qt,er,tr,rr,nr,ir,ar,or,sr,cr,ur,lr,pr,hr,fr,dr,mr,gr,vr,yr,xr,br,_r,Mr,Cr,wr,Sr,Tr,Ar,kr,Dr,Pr,Or,Ir,Lr,Er,Rr;return ie.wrap((function _loop$(ie){for(;;)switch(ie.prev=ie.next){case 0:if(!V){ie.next=107;break}return t=_ML_String("ID_ARX_PL2",":"),h="[(A)/(W)/(L)/(H)]",M.length>=3?h=ee?"[(U)/(A)/(W)/(L)/(H)]":"[(U)/(A)/(W)/(L)/(H)/(C)]":M.length>=2&&(h="[(U)/(A)/(W)/(H)/(L)]"),(I=new Tt).setMessage(t),I.setKeyWords(h),se=M[M.length-1],I.setUserDraw((function(t,p){var h=new Ut;h.addVertexAt(se.pt,se.dBulge,se.dStartWidth,se.dEndWidth),h.addVertexAt(t),p.drawMcDbEntity(h)})),ie.next=11,I.go();case 11:if(null===(ce=ie.sent)){ie.next=22;break}(ue={}).dStartWidth=te,ue.dEndWidth=re,ue.pt=ce,ue.dBulge=0,M.push(ue),M.length>=2&&((le=new Ut).addVertexAt(M[M.length-2].pt,0,M[M.length-2].dStartWidth,M[M.length-2].dEndWidth),le.addVertexAt(M[M.length-1].pt),ne.push(ae.drawEntity(le))),ie.next=105;break;case 22:if(I.getStatus()!=p.MrxDbgUiPrBaseReturn.kKeyWord){ie.next=104;break}if(!I.isKeyWordPicked("A")){ie.next=27;break}V=!1,ie.next=102;break;case 27:if(!I.isKeyWordPicked("W")){ie.next=49;break}return(pe=new At).setMessage(_ML_String("ID_ARX_PLGETSTARTWIDTH","")),ie.next=32,pe.go();case 32:if(null!==ie.sent){ie.next=35;break}return ie.abrupt("return",0);case 35:return te=pe.value(),pe.setMessage(_ML_String("ID_ARX_PLGETVERITXWIDTH","")),ie.next=39,pe.go();case 39:if(null!==ie.sent){ie.next=42;break}return ie.abrupt("return",0);case 42:re=pe.value(),k=re,M[M.length-1].dStartWidth=te,M[M.length-1].dEndWidth=re,te=re,ie.next=102;break;case 49:if(!I.isKeyWordPicked("H")){ie.next=71;break}return(he=new At).setMessage(_ML_String("ID_ARX_PLGETSTARTWIDTH","")),ie.next=54,he.go();case 54:if(null!==ie.sent){ie.next=57;break}return ie.abrupt("return",0);case 57:return te=2*he.value(),he.setMessage(_ML_String("ID_ARX_PLGETVERITXWIDTH","")),ie.next=61,he.go();case 61:if(null!==ie.sent){ie.next=64;break}return ie.abrupt("return",0);case 64:re=2*he.value(),k=re,M[M.length-1].dStartWidth=te,M[M.length-1].dEndWidth=re,te=re,ie.next=102;break;case 71:if(!I.isKeyWordPicked("C")){ie.next=76;break}return N=!0,ie.abrupt("return",0);case 76:if(!I.isKeyWordPicked("U")){ie.next=80;break}M.length>1&&(M.pop(),ne[ne.length-1].erase(),ne.pop(),M.length>0&&I.setLastInputPoint(M[M.length-1].pt)),ie.next=102;break;case 80:if(!I.isKeyWordPicked("L")){ie.next=102;break}return de=sn.kXAxis,I.setMessage(""),I.setKeyWords(""),ie.next=86,I.go();case 86:if(ge=ie.sent){ie.next=89;break}return ie.abrupt("return",{v:void 0});case 89:ve=M[M.length-1].pt,ye=ge.distanceTo(ve),(xe=null===(fe=M[M.length-2])||void 0===fe?void 0:fe.pt)&&(de=xe.sub(ve)),me=ve.clone().addvec(de.normalize().mult(-ye)),(be={}).dStartWidth=te,be.dEndWidth=re,be.pt=me,be.dBulge=0,M.push(be),I.setLastInputPoint(me),M.length>=2&&((_e=new Ut).addVertexAt(M[M.length-2].pt,0,M[M.length-2].dStartWidth,M[M.length-2].dEndWidth),_e.addVertexAt(M[M.length-1].pt),ne.push(ae.drawEntity(_e)));case 102:ie.next=105;break;case 104:return ie.abrupt("return",0);case 105:ie.next=495;break;case 107:return Me=_ML_String("NO1_ID_ARX_PL5","( Ctrl )"),Ce="[(A)/(S)/(CE)/(D)/(L)/(R)/(W)/(H)]",M.length>=3?Ce=ee?"[(A)/(S)/(CE)/(D)/(U)/(L)/(R)/(W)/(H)]":"[(A)/(S)/(CE)/(D)/(U)/(L)/(R)/(W)/(H)/(C)]":M.length>=2&&(Ce="[(A)/(S)/(CE)/(D)/(U)/(L)/(R)/(W)/(H)]"),(we=new Tt).setMessage(Me),we.setKeyWords(Ce),Se=new sn,M.length<2?Se.copy(sn.kXAxis):(Te=M.length,Ae=M[Te-2].pt,ke=M[Te-2].dBulge,De=M[Te-1].pt,IsZero(ke)?Se=new nn(De.x,De.y,0).sub(new nn(Ae.x,Ae.y,0)):((Oe=new Ut).addVertexAt(Ae,ke),Oe.addVertexAt(De),(Ie=Oe.getFirstDeriv(new nn(De.x,De.y,0))).ret?Se=Ie.val:Se.copy(sn.kXAxis))),Le=M[M.length-1],we.setUserDraw((function(t,p){var h=CMxDrawPolylineDragArcDraw_CalcArcBulge(Le.pt,t,oe?Se.clone().negate():Se),x=new Ut;x.addVertexAt(Le.pt,h,Le.dStartWidth,Le.dEndWidth),x.addVertexAt(t),p.drawMcDbEntity(x)})),ie.next=119,we.go();case 119:if(null===(Ee=ie.sent)){ie.next=132;break}(Re={}).dStartWidth=te,Re.dEndWidth=re,Re.dBulge=0,Re.pt=Ee,M[M.length-1].dBulge=CMxDrawPolylineDragArcDraw_CalcArcBulge(Le.pt,Re.pt,oe?Se.clone().negate():Se),M.push(Re),(Be=M.length)>=2&&((Ne=new Ut).addVertexAt(M[Be-2].pt,M[Be-2].dBulge,M[Be-2].dStartWidth,M[Be-2].dEndWidth),Ne.addVertexAt(M[Be-1].pt),ne.push(ae.drawEntity(Ne))),ie.next=495;break;case 132:if(we.getStatus()!=p.MrxDbgUiPrBaseReturn.kKeyWord){ie.next=494;break}if(!we.isKeyWordPicked("A")){ie.next=215;break}return(Ge=new kt).setBasePt(Le.pt),Ge.setMessage(_ML_String("ID_ARX_PLGET_I_ANGLE","")),ie.next=139,Ge.go();case 139:if(null!==(Fe=ie.sent)){ie.next=142;break}return ie.abrupt("return",0);case 142:return we.setMessage("( Ctrl )"),we.setKeyWords("[(CE)/(R)]"),we.setLastInputPoint(Le.pt),Ve=M[M.length-1].pt,Ue=function getBulge(t){var p=Math.PI/2-Fe/2,h=new nn((t.x+Ve.x)/2,(t.y+Ve.y)/2),x=h.distanceTo(Ve),M=x/Math.sin(p),k=x/Math.tan(p),I=h.sub(Ve).rotateBy(Math.PI/2).normalize().mult(oe?-M-k:M-k),N=h.addvec(I);return Mt.calcBulge(Ve,N,t).val},we.setUserDraw((function(t,p){var h=Ue(t),x=new Ut;x.addVertexAt(Le.pt,h,Le.dStartWidth,Le.dEndWidth),x.addVertexAt(t),p.drawMcDbEntity(x)})),ie.next=150,we.go();case 150:if(je=ie.sent,!we.isKeyWordPicked("CE")){ie.next=174;break}return we.setMessage(""),we.setKeyWords(""),we.setBasePt(Ve),we.setUserDraw((function(t,p){var h=t.distanceTo(Ve),x=t.addvec(t.sub(Ve).rotateBy(Fe).normalize().mult(h)),M=Ue(x),k=new Ut;k.addVertexAt(Le.pt,M,Le.dStartWidth,Le.dEndWidth),k.addVertexAt(x),p.drawMcDbEntity(k)})),ie.next=158,we.go();case 158:if(We=ie.sent){ie.next=161;break}return ie.abrupt("return",0);case 161:return ze=We.distanceTo(Ve),He=We.addvec(We.sub(Ve).rotateBy(Fe).normalize().mult(ze)),($e={}).dStartWidth=te,$e.dEndWidth=re,$e.dBulge=0,$e.pt=He,M[M.length-1].dBulge=Ue(He),M.push($e),(Ye=M.length)>=2&&((Ke=new Ut).addVertexAt(M[Ye-2].pt,M[Ye-2].dBulge,M[Ye-2].dStartWidth,M[Ye-2].dEndWidth),Ke.addVertexAt(M[Ye-1].pt),ne.push(ae.drawEntity(Ke))),we.setLastInputPoint(He),ie.abrupt("return",1);case 174:if(!we.isKeyWordPicked("R")){ie.next=204;break}return(Xe=new At).setMessage(""),Xe.setKeyWords(""),ie.next=180,Xe.go();case 180:if("number"==typeof(qe=ie.sent)){ie.next=183;break}return ie.abrupt("return",0);case 183:return Ze=qe*Math.sin(Fe/2),we.setBasePt(Ve),we.setMessage("(Ctrl)"),we.setKeyWords(""),we.setUserDraw((function(t,p){var h=Ve.clone().addvec(t.sub(Ve).normalize().mult(2*Ze)),x=Ue(h),M=new Ut;M.addVertexAt(Le.pt,x,Le.dStartWidth,Le.dEndWidth),M.addVertexAt(h),p.drawMcDbEntity(M)})),ie.next=190,we.go();case 190:if(Je=ie.sent){ie.next=193;break}return ie.abrupt("return",0);case 193:return Qe=Ve.clone().addvec(Je.sub(Ve).normalize().mult(2*Ze)),(et={}).dStartWidth=te,et.dEndWidth=re,et.dBulge=0,et.pt=Qe,M[M.length-1].dBulge=Ue(Qe),M.push(et),(tt=M.length)>=2&&((rt=new Ut).addVertexAt(M[tt-2].pt,M[tt-2].dBulge,M[tt-2].dStartWidth,M[tt-2].dEndWidth),rt.addVertexAt(M[tt-1].pt),ne.push(ae.drawEntity(rt))),ie.abrupt("return",1);case 204:if(je){ie.next=206;break}return ie.abrupt("return",0);case 206:(nt={}).dStartWidth=te,nt.dEndWidth=re,nt.dBulge=0,nt.pt=je,M[M.length-1].dBulge=Ue(je),M.push(nt),(it=M.length)>=2&&((ot=new Ut).addVertexAt(M[it-2].pt,M[it-2].dBulge,M[it-2].dStartWidth,M[it-2].dEndWidth),ot.addVertexAt(M[it-1].pt),ne.push(ae.drawEntity(ot)));case 215:if(!we.isKeyWordPicked("CE")){ie.next=311;break}return we.setMessage(""),we.setKeyWords(""),we.setUserDraw((function(){})),ie.next=221,we.go();case 221:if(st=ie.sent){ie.next=224;break}return ie.abrupt("return",{v:void 0});case 224:return ct=Le.pt,ut=st.distanceTo(ct),we.setLastInputPoint(ct),we.setMessage("( Ctrl )"),we.setKeyWords("[(A)/(L)]"),we.clearLastInputPoint(),we.setUserDraw((function(t,p){p.drawLine(t.toVector3(),st.toVector3());var h=st.clone().addvec(t.sub(st).normalize().mult(ut)),x=st.sub(ct).angleTo2(st.sub(h),sn.kZAxis),M=new nn((ct.x+h.x)/2,(ct.y+h.y)/2),k=st.sub(M).normalize().mult(-ut),I=st.clone().addvec((oe?x<Math.PI:x>Math.PI)?k.negate():k),N=Mt.calcBulge(ct,I,h).val,V=new Ut;V.addVertexAt(Le.pt,N,Le.dStartWidth,Le.dEndWidth),V.addVertexAt(h),p.drawMcDbEntity(V)})),ie.next=233,we.go();case 233:if(lt=ie.sent,!we.isKeyWordPicked("A")){ie.next=261;break}return(pt=new kt).setBasePt(st),pt.setMessage(_ML_String("ID_ARX_PLGET_I_ANGLE","( Ctrl ")),pt.setKeyWords(""),pt.setUserDraw((function(t,p){var h=sn.kXAxis.clone().angleTo2(t.sub(st),sn.kZAxis),x=oe?2*Math.PI-h/2:h/2,M=ct.sub(st).rotateBy(x).normalize().mult(ut),k=ct.sub(st).rotateBy(h).normalize().mult(ut),I=st.clone().addvec(M),N=st.clone().addvec(k),V=Mt.calcBulge(ct,I,N).val,ee=new Ut;ee.addVertexAt(Le.pt,V,Le.dStartWidth,Le.dEndWidth),ee.addVertexAt(N),p.drawMcDbEntity(ee)})),ie.next=242,pt.go();case 242:if(null!==(ht=ie.sent)){ie.next=245;break}return ie.abrupt("return",0);case 245:return ft=oe?2*Math.PI-ht/2:ht/2,dt=ct.sub(st).rotateBy(ft).normalize().mult(ut),mt=ct.sub(st).rotateBy(ht).normalize().mult(ut),gt=st.clone().addvec(dt),vt=st.clone().addvec(mt),yt=Mt.calcBulge(ct,gt,vt).val,(xt={}).dStartWidth=te,xt.dEndWidth=re,xt.dBulge=0,xt.pt=vt,M[M.length-1].dBulge=yt,M.push(xt),(bt=M.length)>=2&&((_t=new Ut).addVertexAt(M[bt-2].pt,M[bt-2].dBulge,M[bt-2].dStartWidth,M[bt-2].dEndWidth),_t.addVertexAt(M[bt-1].pt),ne.push(ae.drawEntity(_t))),ie.abrupt("return",1);case 261:if(!we.isKeyWordPicked("L")){ie.next=292;break}return(Ct=new At).setMessage("( Ctrl )"),Ct.setKeyWords(""),Ct.setBasePt(ct),Ct.setUserDraw((function(t,p){var h=t.distanceTo(ct);if(!(h>2*ut)){var x=2*Math.asin(h/2/ut),M=ct.sub(st).normalize().mult(ut),k=st.clone().addvec(M.clone().rotateBy(oe?Math.PI-x/2:x/2)),I=st.clone().addvec(M.clone().rotateBy(x)),N=Mt.calcBulge(ct,k,I).val,V=new Ut;V.addVertexAt(Le.pt,N,Le.dStartWidth,Le.dEndWidth),V.addVertexAt(I),p.drawMcDbEntity(V)}})),ie.next=269,Ct.go();case 269:if("number"==typeof(wt=ie.sent)){ie.next=272;break}return ie.abrupt("return",0);case 272:if(!(wt>2*ut)){ie.next=276;break}return p.MxFun.acutPrintf("* *"),we.setLastInputPoint(ct),ie.abrupt("return",1);case 276:return St=2*Math.asin(wt/2/ut),Dt=ct.sub(st).normalize().mult(ut),Pt=st.clone().addvec(Dt.clone().rotateBy(oe?Math.PI-St/2:St/2)),Ot=st.clone().addvec(Dt.clone().rotateBy(St)),It=Mt.calcBulge(ct,Pt,Ot).val,(Lt={}).dStartWidth=te,Lt.dEndWidth=re,Lt.dBulge=0,Lt.pt=Ot,M[M.length-1].dBulge=It,M.push(Lt),(Et=M.length)>=2&&((Rt=new Ut).addVertexAt(M[Et-2].pt,M[Et-2].dBulge,M[Et-2].dStartWidth,M[Et-2].dEndWidth),Rt.addVertexAt(M[Et-1].pt),ne.push(ae.drawEntity(Rt))),we.setLastInputPoint(Ot),ie.abrupt("return",1);case 292:if(lt){ie.next=294;break}return ie.abrupt("return",{v:void 0});case 294:return Bt=st.clone().addvec(lt.sub(st).normalize().mult(ut)),Nt=st.sub(ct).angleTo2(st.sub(Bt),sn.kZAxis),Gt=new nn((ct.x+Bt.x)/2,(ct.y+Bt.y)/2),Ft=st.sub(Gt).normalize().mult(-ut),Vt=st.clone().addvec((oe?Nt<Math.PI:Nt>Math.PI)?Ft.negate():Ft),jt=Mt.calcBulge(ct,Vt,Bt).val,(Wt={}).dStartWidth=te,Wt.dEndWidth=re,Wt.dBulge=0,Wt.pt=Bt,M[M.length-1].dBulge=jt,M.push(Wt),(zt=M.length)>=2&&((Ht=new Ut).addVertexAt(M[zt-2].pt,M[zt-2].dBulge,M[zt-2].dStartWidth,M[zt-2].dEndWidth),Ht.addVertexAt(M[zt-1].pt),ne.push(ae.drawEntity(Ht))),we.setLastInputPoint(Bt),ie.abrupt("return",1);case 311:if(!we.isKeyWordPicked("R")){ie.next=383;break}return($t=new At).setMessage(_ML_String("ID_ARX_PLGETSTARTRADIUS","")),$t.setKeyWords(""),ie.next=317,$t.go();case 317:if(null!==(Yt=ie.sent)){ie.next=320;break}return ie.abrupt("return",0);case 320:return Xt=Le.pt,we.setLastInputPoint(Xt),we.setMessage("( Ctrl )"),we.setKeyWords("[(A)]"),we.setUserDraw((function(t,p){if(Yt){var h=t.distanceTo(Xt);if(!(h>2*Yt)){var x=Math.acos(h/2/Yt),M=Xt.clone().addvec(t.sub(Xt).rotateBy(x).normalize().mult(Yt)),k=M.clone().addvec(new nn((Xt.x+t.x)/2,(Xt.y+t.y)/2).sub(M).normalize().mult(oe?-Yt:Yt)),I=Mt.calcBulge(Xt,k,t).val,N=new Ut;N.addVertexAt(Le.pt,I,Le.dStartWidth,Le.dEndWidth),N.addVertexAt(t),p.drawMcDbEntity(N)}}})),ie.next=327,we.go();case 327:if(qt=ie.sent,!we.isKeyWordPicked("A")){ie.next=363;break}return(Zt=new kt).setMessage(_ML_String("ID_ARX_PLGET_I_ANGLE","")),Zt.setKeyWords(""),Zt.setBasePt(Xt),ie.next=335,Zt.go();case 335:if("number"==typeof(Jt=ie.sent)){ie.next=338;break}return ie.abrupt("return",0);case 338:return Qt=Math.sin(Jt/2)*Yt*2,we.setMessage("( Ctrl )"),we.setKeyWords(""),we.setBasePt(Xt),we.setUserDraw((function(t,p){if(Yt){var h=t.sub(Xt).normalize(),x=Xt.clone().addvec(h.clone().mult(Qt)),M=x.clone().addvec(h.clone().negate().rotateBy(-(Math.PI/2-Jt/2)).mult(Yt)),k=M.clone().addvec(M.sub(new nn((Xt.x+x.x)/2,(Xt.y+x.y)/2)).normalize().mult(oe?Yt:-Yt)),I=Mt.calcBulge(Xt,k,x).val,N=new Ut;N.addVertexAt(Le.pt,I,Le.dStartWidth,Le.dEndWidth),N.addVertexAt(x),p.drawMcDbEntity(N)}})),ie.next=345,we.go();case 345:if(er=ie.sent){ie.next=348;break}return ie.abrupt("return",0);case 348:return tr=er.sub(Xt).normalize(),rr=Xt.clone().addvec(tr.clone().mult(Qt)),nr=rr.clone().addvec(tr.clone().negate().rotateBy(-(Math.PI/2-Jt/2)).mult(Yt)),ir=nr.clone().addvec(nr.sub(new nn((Xt.x+rr.x)/2,(Xt.y+rr.y)/2)).normalize().mult(oe?Yt:-Yt)),ar=Mt.calcBulge(Xt,ir,rr).val,(or={}).dStartWidth=te,or.dEndWidth=re,or.dBulge=0,or.pt=rr,M[M.length-1].dBulge=ar,M.push(or),(sr=M.length)>=2&&((cr=new Ut).addVertexAt(M[sr-2].pt,M[sr-2].dBulge,M[sr-2].dStartWidth,M[sr-2].dEndWidth),cr.addVertexAt(M[sr-1].pt),ne.push(ae.drawEntity(cr))),ie.abrupt("return",1);case 363:if(qt){ie.next=365;break}return ie.abrupt("return",0);case 365:if(!((ur=qt.distanceTo(Xt))>2*Yt)){ie.next=369;break}return p.MxFun.acutPrintf(" **"),ie.abrupt("return",1);case 369:return lr=Math.acos(ur/2/Yt),pr=Xt.clone().addvec(qt.sub(Xt).rotateBy(lr).normalize().mult(Yt)),hr=pr.clone().addvec(new nn((Xt.x+qt.x)/2,(Xt.y+qt.y)/2).sub(pr).normalize().mult(oe?-Yt:Yt)),fr=Mt.calcBulge(Xt,hr,qt).val,(dr={}).dStartWidth=te,dr.dEndWidth=re,dr.dBulge=0,dr.pt=qt,M[M.length-1].dBulge=fr,M.push(dr),(mr=M.length)>=2&&((gr=new Ut).addVertexAt(M[mr-2].pt,M[mr-2].dBulge,M[mr-2].dStartWidth,M[mr-2].dEndWidth),gr.addVertexAt(M[mr-1].pt),ne.push(ae.drawEntity(gr))),ie.abrupt("return",1);case 383:if(!we.isKeyWordPicked("H")){ie.next=404;break}return(vr=new At).setMessage(_ML_String("ID_ARX_PLGETSTARTWIDTH","")),ie.next=388,vr.go();case 388:if(null!==ie.sent){ie.next=391;break}return ie.abrupt("return",0);case 391:return te=2*vr.value(),vr.setMessage(_ML_String("ID_ARX_PLGETVERITXWIDTH","")),ie.next=395,vr.go();case 395:if(null!==ie.sent){ie.next=398;break}return ie.abrupt("return",0);case 398:return re=2*vr.value(),k=re,M[M.length-1].dStartWidth=te,M[M.length-1].dEndWidth=re,te=re,ie.abrupt("return",1);case 404:if(!we.isKeyWordPicked("D")){ie.next=433;break}return we.setMessage(""),we.setKeyWords(""),we.setLastInputPoint(Le.pt),we.setUserDraw((function(t,p){p.drawLine(t.toVector3(),Le.pt.toVector3())})),ie.next=411,we.go();case 411:if(yr=ie.sent){ie.next=414;break}return ie.abrupt("return",0);case 414:return xr=yr.sub(Le.pt),we.setLastInputPoint(Le.pt),we.setBasePt(Le.pt),we.setMessage("( Ctrl )"),we.setKeyWords(""),we.setUserDraw((function(t,p){var h=CMxDrawPolylineDragArcDraw_CalcArcBulge(Le.pt,t,oe?xr.clone().negate():xr),x=new Ut;x.addVertexAt(Le.pt,h,Le.dStartWidth,Le.dEndWidth),x.addVertexAt(t),p.drawMcDbEntity(x)})),ie.next=422,we.go();case 422:return br=ie.sent,(_r={}).dStartWidth=te,_r.dEndWidth=re,_r.dBulge=0,_r.pt=br,M[M.length-1].dBulge=CMxDrawPolylineDragArcDraw_CalcArcBulge(Le.pt,_r.pt,oe?xr.clone().negate():xr),M.push(_r),(Mr=M.length)>=2&&((Cr=new Ut).addVertexAt(M[Mr-2].pt,M[Mr-2].dBulge,M[Mr-2].dStartWidth,M[Mr-2].dEndWidth),Cr.addVertexAt(M[Mr-1].pt),ne.push(ae.drawEntity(Cr))),ie.abrupt("return",1);case 433:if(!we.isKeyWordPicked("L")){ie.next=437;break}V=!0,ie.next=492;break;case 437:if(!we.isKeyWordPicked("S")){ie.next=463;break}return wr=new nn(M[M.length-1].pt.x,M[M.length-1].pt.y,0),(Sr=new Tt).setMessage(_ML_String("NO1_ID_SPECIFY_ARC2","")),Sr.setBasePt(wr),ie.next=444,Sr.go();case 444:if(null!==(Tr=ie.sent)){ie.next=447;break}return ie.abrupt("return",0);case 447:return(Ar=new Tt).setMessage(_ML_String("ID_CIRCULAR_ENDPOINT","( Ctrl )")),Ar.setUserDraw((function(t,p){var h=new Kt;h.computeArc(wr.x,wr.y,Tr.x,Tr.y,t.x,t.y);var x=Tr;oe&&(x=h.center.clone().addvec(h.center.clone().sub(x)),h.computeArc(wr.x,wr.y,x.x,x.y,t.x,t.y)),p.drawMcDbEntity(h)})),ie.next=452,Ar.go();case 452:if(null===(kr=ie.sent)){ie.next=460;break}Dr=Tr,oe&&((Pr=new Kt).computeArc(wr.x,wr.y,Dr.x,Dr.y,kr.x,kr.y),Dr=Pr.center.clone().addvec(Pr.center.clone().sub(Dr))),(Or=Mt.calcBulge(wr,Dr,kr)).ret?((Ir={}).dStartWidth=te,Ir.dEndWidth=re,Ir.pt=kr,Ir.dBluge=0,M[M.length-1].dBulge=Or.val,M.push(Ir),(Lr=M.length)>=2&&((Er=new Ut).addVertexAt(M[Lr-2].pt,M[Lr-2].dBulge,M[Lr-2].dStartWidth,M[Lr-2].dEndWidth),Er.addVertexAt(M[Lr-1].pt),ne.push(ae.drawEntity(Er)))):p.MxFun.acutPrintf(_ML_String("ID_ENDPOINT_INVALID1","\n  **")),ie.next=461;break;case 460:return ie.abrupt("return",0);case 461:ie.next=492;break;case 463:if(!we.isKeyWordPicked("W")){ie.next=485;break}return(Rr=new At).setMessage(_ML_String("ID_ARX_PLGETSTARTWIDTH","")),ie.next=468,Rr.go();case 468:if(null!==ie.sent){ie.next=471;break}return ie.abrupt("return",0);case 471:return te=Rr.value(),Rr.setMessage(_ML_String("ID_ARX_PLGETVERITXWIDTH","")),ie.next=475,Rr.go();case 475:if(null!==ie.sent){ie.next=478;break}return ie.abrupt("return",0);case 478:re=Rr.value(),k=re,M[M.length-1].dStartWidth=te,M[M.length-1].dEndWidth=re,te=re,ie.next=492;break;case 485:if(!we.isKeyWordPicked("C")){ie.next=491;break}return M[M.length-1].dBulge=CMxDrawPolylineDragArcDraw_CalcArcBulge(Le.pt,x,oe?Se.clone().negate():Se),N=!0,ie.abrupt("return",0);case 491:we.isKeyWordPicked("U")&&M.length>1&&(M.pop(),ne[ne.length-1].erase(),ne.pop(),M.length>0&&we.setLastInputPoint(M[M.length-1].pt));case 492:ie.next=495;break;case 494:return ie.abrupt("return",0);case 495:case"end":return ie.stop()}}),_loop)}));case 29:return de.delegateYield(ue(),"t0",31);case 31:if(0!==(le=de.t0)){de.next=34;break}return de.abrupt("break",40);case 34:if(1!==le){de.next=36;break}return de.abrupt("continue",29);case 36:if(!le){de.next=38;break}return de.abrupt("return",le.v);case 38:de.next=29;break;case 40:for(ee&&(N=!0),pe=0;pe<ne.length;pe++)ne[pe].erase();if(!(M.length>1)){de.next=47;break}for(he=new Ut,fe=0;fe<M.length;fe++)he.addVertexAt(M[fe].pt,M[fe].dBulge,M[fe].dStartWidth,M[fe].dEndWidth);return he.isClosed=N,de.abrupt("return",ae.drawEntity(he));case 47:window.removeEventListener("keydown",se),window.removeEventListener("keyup",ce);case 49:case"end":return de.stop()}}),_callee)}))),_drawPolyLine.apply(this,arguments)}function computeRegularPolygonVertices(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new nn,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new nn,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,x=[];h=Math.max(3,h),x.push(p);for(var M=2*Math.PI/h,k=1;k<h;k++){var I=Math.cos(M*k),N=Math.sin(M*k),V=t.clone(),ee=p.clone(),te=ee.x-V.x,re=ee.y-V.y,ne=te*I-re*N+V.x,ie=te*N+re*I+V.y,ae=new nn(ne,ie);x.push(ae)}return x}function computePolygonVerticesFromMidpoint(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new nn,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new nn,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,x=p.x,M=p.y,k=t.x,I=t.y,N=Math.max(3,h),V=Math.sqrt(Math.pow(x-k,2)+Math.pow(M-I,2))/Math.cos(Math.PI/N),ee=Math.atan2(M-I,x-k)-Math.PI/N,te=[],re=0;re<N;re++){var ne=ee+2*re*Math.PI/N,ie=k+V*Math.cos(ne),ae=I+V*Math.sin(ne);te.push(new nn(ie,ae))}return te}function computePolygonVerticesFromEdge(t,p,h){for(var x=p.x-t.x,M=p.y-t.y,k=Math.sqrt(x*x+M*M),I=Math.atan2(M,x),N=2*Math.PI/Math.max(3,h),V=[t,p],ee=0;ee<h;ee++){var te=t.x+k*Math.cos(I+ee*N),re=t.y+k*Math.sin(I+ee*N);t=new nn(te,re),V.push(t)}return V}function drawPolygon(){return _drawPolygon.apply(this,arguments)}function _drawPolygon(){return _drawPolygon=_asyncToGenerator(ie.mark((function _callee2(){var h,x,M,k,I,N,V,ee,te,re,ne,ae,oe,se;return ie.wrap((function _callee2$(ce){for(;;)switch(ce.prev=ce.next){case 0:if(V=new Tt,h){ce.next=11;break}return(ee=new Dt).setMessage("\n <5>"),ce.next=6,ee.go();case 6:if(h=ce.sent,ee.getStatus()!==p.MrxDbgUiPrBaseReturn.kCancel){ce.next=9;break}return ce.abrupt("return");case 9:ee.getStatus()===p.MrxDbgUiPrBaseReturn.kNone&&(h=5),ee.clearLastInputPoint();case 11:te=function(){var p=_asyncToGenerator(ie.mark((function _callee(){var p;return ie.wrap((function _callee$(x){for(;;)switch(x.prev=x.next){case 0:if(p=function createStarEndPointPolygon(t){var p=new Ut;return computePolygonVerticesFromEdge(k,t,h||5).forEach((function(t){p.addVertexAt(t)})),p.isClosed=!0,p},k){x.next=10;break}return V.setMessage("\n"),V.setKeyWords(""),x.next=6,V.go();case 6:if(k=x.sent){x.next=9;break}return x.abrupt("return");case 9:V.setUserDraw((function(t,h){h.drawMcDbEntity(p(t))}));case 10:if(I){x.next=15;break}return V.setMessage("\n"),x.next=14,V.go();case 14:I=x.sent;case 15:if(I){x.next=17;break}return x.abrupt("return");case 17:t.MxCpp.getCurrentMxCAD().drawEntity(p(I));case 18:case"end":return x.stop()}}),_callee)})));return function drawToEdgePolygon(){return p.apply(this,arguments)}}(),ce.next=16;break;case 15:return ce.abrupt("return",ce.sent);case 16:if(V.setMessage("\n"),V.setKeyWords("[(E)]"),V.setCursorType(p.MxCursorType.kCross),x){ce.next=23;break}return ce.next=22,V.go();case 22:x=ce.sent;case 23:if(x){ce.next=28;break}if(!V.isKeyWordPicked("e")){ce.next=27;break}return ce.next=27,te();case 27:return ce.abrupt("return");case 28:if("boolean"==typeof M){ce.next=38;break}return V.setMessage("\n"),V.setKeyWords("[(I)/(C)]"),V.clearLastInputPoint(),ce.next=34,V.go();case 34:if(V.getStatus()!==p.MrxDbgUiPrBaseReturn.kCancel){ce.next=36;break}return ce.abrupt("return");case 36:V.isKeyWordPicked("i")&&(M=!1),V.isKeyWordPicked("c")&&(M=!0);case 38:if(re=function createMcDbPolyline(p){var k=t.MxCpp.getCurrentMxCAD().getCurrentDatabaseDrawColor(),I=new Ut;return I.trueColor=new Sr(k),(M?computePolygonVerticesFromMidpoint(x,p,h):computeRegularPolygonVertices(x,p,h)).forEach((function(t){I.addVertexAt(t)})),I.isClosed=!0,I},ae=new sn,N){ce.next=52;break}return(oe=new At).setBasePt(x),oe.setUserDraw((function(t,p){p.drawMcDbEntity(re(t)),x&&(ae=t.sub(x))})),oe.setMessage(_ML_String("McDbPolyline_Radius","\n")),oe.setKeyWords(""),ce.next=48,oe.go();case 48:if(se=ce.sent){ce.next=51;break}return ce.abrupt("return");case 51:N=se;case 52:ae=ae.normalize().mult(N),ne=x.clone().addvec(ae),t.MxCpp.getCurrentMxCAD().drawEntity(re(ne),!0);case 55:case"end":return ce.stop()}}),_callee2)}))),_drawPolygon.apply(this,arguments)}function calculateEndPoint(t,p,h,x,M,k){var I=h-t,N=x-p,V=M/k,ee=I*Math.cos(V)-N*Math.sin(V),te=I*Math.sin(V)+N*Math.cos(V);return new nn(ee+=t,te+=p)}function findArcCenterWithRadius(t,p,h){var x=Math.sqrt(Math.pow(h,2)-(Math.pow(t.x-p.x,2)+Math.pow(t.y-p.y,2))/4),M=(t.x+p.x)/2,k=(t.y+p.y)/2;return new nn(M-x*(p.y-t.y)/Math.sqrt(Math.pow(t.x-p.x,2)+Math.pow(t.y-p.y,2)),k-x*(t.x-p.x)/Math.sqrt(Math.pow(t.x-p.x,2)+Math.pow(t.y-p.y,2)))}function findEndPoint(t,p,h,x){var M=p+h;return new nn(t.x+x*Math.cos(M),t.y+x*Math.sin(M))}function calculateChordLength(t,p,h){var x=Math.sqrt(Math.pow(p.x-t.x,2)+Math.pow(p.y-t.y,2)),M=p.x-t.x,k=p.y-t.y,I=h.x-t.x,N=h.y-t.y,V=M*I+k*N,ee=M*N-k*I,te=Math.atan2(ee,V);return 2*x*Math.sin(te/2)}function drawArc(){return _drawArc.apply(this,arguments)}function _drawArc(){return _drawArc=_asyncToGenerator(ie.mark((function _callee2(){var h,x,M,k,I,N,V,ee,te,re,ne,ae,oe,se,ce,ue,le,pe,he,fe,de,me,ge,ve,ye;return ie.wrap((function _callee2$(xe){for(;;)switch(xe.prev=xe.next){case 0:h=t.MxCpp.getCurrentMxCAD(),x=new Tt,M=new Kt,ne=function draw(){},ae="\n:",oe="[(C)]",se=!1,ce=function keydown(t){t.ctrlKey&&(se=!0)},ue=function keyup(){se=!1},le=function onEventCtrlDown(){window.removeEventListener("keydown",ce),window.removeEventListener("keyup",ue),window.addEventListener("keydown",ce),window.addEventListener("keyup",ue)},pe=new Rt,(he=new Sr).setRGB(255,211,13),pe.trueColor=he,pe.linetype="ACAD_ISO02W100",fe=!1,me=function drawCenterArc(t,p){se?(M.startAngle=te,M.endAngle=ee):(M.startAngle=ee,M.endAngle=te),M.radius=re,M.center=V,pe.endPoint=t,p.drawMcDbEntity(M),p.drawMcDbEntity(pe)},ge=function draw3PArc(t){M.computeArc(k.x,k.y,I.x,I.y,N.x,N.y),t.drawMcDbEntity(M)},ve=ie.mark((function _loop(){var ce,ue,he,ve,ye,xe,be;return ie.wrap((function _loop$(_e){for(;;)switch(_e.prev=_e.next){case 0:return x.setUserDraw(ne),x.setMessage(ae),x.setKeyWords(oe),_e.next=5,x.go();case 5:if(ce=_e.sent,!x.isKeyWordPicked("C")){_e.next=30;break}if(de="C",fe=!0,!k){_e.next=27;break}return x.setMessage("\n"),x.setKeyWords(""),_e.next=14,x.go();case 14:if(ue=_e.sent){_e.next=17;break}return _e.abrupt("return",{v:void 0});case 17:V=ue,ae="\n( ctrl )",oe="[(A)/(L)/(R)]",x.setLastInputPoint(V),pe.startPoint=V,re=V.distanceTo(k),ne=function draw(t,p){ee=angleTo(V.x,V.y,k.x,k.y)-Math.PI,te=angleTo(V.x,V.y,t.x,t.y)-Math.PI,pe.endPoint=t,me(t,p)},le(),_e.next=29;break;case 27:ae="\n",oe="";case 29:return _e.abrupt("return",0);case 30:if(!fe){_e.next=124;break}if(!x.isKeyWordPicked("R")){_e.next=55;break}if("E"!==de){_e.next=41;break}return he=0,ve=function(){var t=_asyncToGenerator(ie.mark((function _callee(){return ie.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return x.setLastInputPoint(k),x.setMessage("\n( ctrl )"),x.setKeyWords(""),x.setLastInputPoint(k),pe.startPoint=k,le(),ne=function draw(t,p){he<0?(pe.endPoint=t,p.drawMcDbEntity(pe),he=0):(re=t.distanceTo(k),V=findArcCenterWithRadius(k,N,re),ee=angleTo(V.x,V.y,k.x,k.y)-Math.PI,te=angleTo(V.x,V.y,N.x,N.y)-Math.PI,me(t,p),he=calculateChordLength(V,k,N))},x.setUserDraw(ne),t.next=10,x.go();case 10:if(t.sent){t.next=13;break}return t.abrupt("return",!0);case 13:if(!((he=calculateChordLength(V,k,N))<0)){t.next=20;break}return p.MxFun.acutPrintf("\n"+he),he=0,t.next=19,ve();case 19:return t.abrupt("return",t.sent);case 20:h.drawEntity(M);case 21:case"end":return t.stop()}}),_callee)})));return function run(){return t.apply(this,arguments)}}(),_e.next=37,ve();case 37:return _e.t0=_e.sent,_e.abrupt("return",{v:_e.t0});case 41:return x.setLastInputPoint(V),x.setMessage(_ML_String("draw_arc_id","<"+M.radius+">")),x.setKeyWords(""),x.setUserDraw((function(t,p){pe.startPoint=V,pe.endPoint=t,p.drawMcDbEntity(pe)})),_e.next=47,x.go();case 47:if(ye=_e.sent){_e.next=50;break}return _e.abrupt("return",{v:void 0});case 50:re=ye.distanceTo(V),ae="\n( ctrl )",oe="[(A)/(L)/(R)]",le();case 54:return _e.abrupt("return",0);case 55:if(!x.isKeyWordPicked("A")){_e.next=74;break}if("C"!==de&&"L"!==de){_e.next=66;break}return ae="( ctrl )",oe="[(R)]",ee=Math.PI+angleTo(V.x,V.y,k.x,k.y),x.setLastInputPoint(V),pe.startPoint=V,re||(re=V.distanceTo(k)),ne=function draw(t,p){var h,x,M,I,ne,ie,ae,oe,se=angleTo(V.x,V.y,t.x,t.y)-Math.PI;N=findEndPoint(V,ee,se,re),h=V,M=N,I=ee,ne={x:(x=k).x-h.x,y:x.y-h.y},ie={x:M.x-h.x,y:M.y-h.y},ae=Math.atan2(ne.y,ne.x),(oe=Math.atan2(ie.y,ie.x)-ae)<0&&(oe+=2*Math.PI),te=I+oe,me(t,p)},le(),_e.abrupt("return",0);case 66:if("E"!==de){_e.next=74;break}return ae="( ctrl )",oe="",x.setLastInputPoint(k),pe.startPoint=k,ne=function draw(t,p){var h=angleTo(k.x,k.y,t.x,t.y)-Math.PI;V=findArcCenter(k,N,h),re=V.distanceTo(k),ee=angleTo(V.x,V.y,k.x,k.y)-Math.PI,te=angleTo(V.x,V.y,N.x,N.y)-Math.PI,me(t,p)},le(),_e.abrupt("return",0);case 74:if(!x.isKeyWordPicked("L")){_e.next=83;break}return de="L",ae="\n( ctrl )",oe="[(R)]",x.setLastInputPoint(k),pe.startPoint=k,ne=function draw(t,p){var h=t.distanceTo(k);if(h>2*re)return pe.endPoint=t,void p.drawMcDbEntity(pe);N=calculateEndPoint(V.x,V.y,k.x,k.y,h,M.radius),te=angleTo(V.x,V.y,N.x,N.y)-Math.PI,me(t,p)},le(),_e.abrupt("return",0);case 83:if(!x.isKeyWordPicked("D")){_e.next=98;break}return x.setMessage("\n( ctrl "),x.setKeyWords(""),x.setLastInputPoint(k),pe.startPoint=k,xe=new Ut,le(),x.setUserDraw((function(t,p){var h=t.sub(k),x=CMxDrawPolylineDragArcDraw_CalcArcBulge(se?k:N,se?N:k,h);(xe=new Ut).addVertexAt(k,x),xe.addVertexAt(N),pe.endPoint=t,p.drawMcDbEntity(xe),p.drawMcDbEntity(pe)})),_e.next=93,x.go();case 93:if(_e.sent){_e.next=96;break}return _e.abrupt("return",{v:void 0});case 96:return h.drawEntity(xe),_e.abrupt("return",{v:void 0});case 98:if(ce){_e.next=100;break}return _e.abrupt("return",{v:void 0});case 100:if("L"!==de){_e.next=106;break}if(!(ce.distanceTo(k)>2*re)){_e.next=106;break}return x.clearLastInputPoint(),p.MxFun.acutPrintf("\n"+re),_e.abrupt("return",0);case 106:if(V){_e.next=111;break}return V=ce,ae="\n",ne=function draw(t,p){p.drawLine(t.toVector3(),V.toVector3())},_e.abrupt("return",0);case 111:if(k){_e.next=122;break}return k=ce,ee=angleTo(V.x,V.y,k.x,k.y)-Math.PI,re=k.distanceTo(V),ae="\n( ctrl )",oe="[(A)/(L)/(R)]",x.setLastInputPoint(V),pe.startPoint=V,ne=function draw(t,p){te=angleTo(V.x,V.y,t.x,t.y)-Math.PI,me(t,p)},le(),_e.abrupt("return",0);case 122:return h.drawEntity(M),_e.abrupt("return",{v:void 0});case 124:if(!x.isKeyWordPicked("E")){_e.next=146;break}return de="E",x.clearLastInputPoint(),x.setMessage("\n"),x.setKeyWords(""),pe.startPoint=k,x.setUserDraw((function(t,p){pe.endPoint=t,p.drawMcDbEntity(pe)})),_e.next=134,x.go();case 134:if(be=_e.sent){_e.next=137;break}return _e.abrupt("return",{v:void 0});case 137:return N=be,fe=!0,ae="\n( ctrl )",oe="[(A)/(D)/(R)]",x.setLastInputPoint(N),pe.startPoint=N,ne=function draw(t,p){re=(V=t).distanceTo(k),ee=angleTo(V.x,V.y,k.x,k.y)-Math.PI,te=angleTo(V.x,V.y,N.x,N.y)-Math.PI,me(t,p)},le(),_e.abrupt("return",0);case 146:if(ce){_e.next=148;break}return _e.abrupt("return",{v:void 0});case 148:if(k){_e.next=155;break}return k=ce,ae="\n",oe="[(C)/(E)]",ne=function draw(t,p){p.drawLine(k.toVector3(),t.toVector3())},x.clearLastInputPoint(),_e.abrupt("return",0);case 155:if(I){_e.next=161;break}return I=ce,ae="\n",oe="",ne=function draw(t,p){N=t,ge(p)},_e.abrupt("return",0);case 161:return ne(I,{drawMcDbEntity:function drawMcDbEntity(p){t.MxCpp.getCurrentMxCAD().drawEntity(p,!0)}}),_e.abrupt("return",{v:void 0});case 163:case"end":return _e.stop()}}),_loop)}));case 19:return xe.delegateYield(ve(),"t0",21);case 21:if(0!==(ye=xe.t0)){xe.next=24;break}return xe.abrupt("continue",19);case 24:if(!ye){xe.next=26;break}return xe.abrupt("return",ye.v);case 26:xe.next=19;break;case 28:case"end":return xe.stop()}}),_callee2)}))),_drawArc.apply(this,arguments)}function drawEllipticalArc(){return _drawEllipticalArc.apply(this,arguments)}function _drawEllipticalArc(){return _drawEllipticalArc=_asyncToGenerator(ie.mark((function _callee(){var p,h,x,M,k,I,N,V,ee;return ie.wrap((function _callee$(te){for(;;)switch(te.prev=te.next){case 0:M=1,k=0,I=2*Math.PI,0,N=function createEllipse(){var t=new Xt;return t.center=p,t.majorAxis=h,t.minorAxis=x,t.radiusRatio=M,t.startAngle=k,t.endAngle=I,t.rotate(p,0),t},V=ie.mark((function _loop(){var V,ee,te,re,ne,ae,oe,se,ce,ue,le,pe;return ie.wrap((function _loop$(ie){for(;;)switch(ie.prev=ie.next){case 0:return(V=new Tt).setMessage(""),V.setKeyWords("[(C)]"),ie.next=5,V.go();case 5:if(ee=ie.sent,te=0,re=null,!V.isKeyWordPicked("C")){ie.next=29;break}return V.setMessage(""),V.setKeyWords(""),V.clearLastInputPoint(),ie.next=14,V.go();case 14:if(ne=ie.sent){ie.next=17;break}return ie.abrupt("return",{v:void 0});case 17:return p=ne,V.setMessage(""),V.setBasePt(p),ie.next=22,V.go();case 22:if(re=ie.sent){ie.next=25;break}return ie.abrupt("return",{v:void 0});case 25:h=x=p.sub(re),te=p.distanceTo(re),ie.next=42;break;case 29:if(ee){ie.next=31;break}return ie.abrupt("return",{v:void 0});case 31:return V.setBasePt(ee),V.setMessage(""),V.setKeyWords(""),ie.next=36,V.go();case 36:if(re=ie.sent){ie.next=39;break}return ie.abrupt("return",{v:void 0});case 39:p=new nn((ee.x+re.x)/2,(ee.y+re.y)/2),h=x=ee.sub(re),te=ee.distanceTo(re)/2;case 42:return(ae=new At).setMessage(_ML_String("McDbEllipse_lengh","")),ae.setKeyWords("[(R)]"),ae.setBasePt(p),ae.setUserDraw((function(t,h){var x=p.distanceTo(t)/2;M=x/te;var k=N();h.drawMcDbEntity(k)})),ie.next=49,ae.go();case 49:if(oe=ie.sent,!ae.isKeyWordPicked("R")){ie.next=63;break}return ae.setMessage(_ML_String("McDbEllipse_Rotation","")),ae.setKeyWords(""),ae.setBasePt(p),ae.setUserDraw((function(t,h){var x=Math.abs(t.x-p.x),k=Math.abs(t.y-p.y);M=x/(x+k);var I=N();h.drawMcDbEntity(I)})),ie.next=57,ae.go();case 57:if(se=ie.sent){ie.next=60;break}return ie.abrupt("return",{v:void 0});case 60:8===ae.getDetailedResult()&&(M=se),ie.next=67;break;case 63:if(oe){ie.next=65;break}return ie.abrupt("return",{v:void 0});case 65:M=oe/2/te;case 67:if(re){ie.next=69;break}return ie.abrupt("return",{v:void 0});case 69:return ce=Math.atan2(h.y,h.x)-Math.PI/2,ae.setMessage(_ML_String("McDbEllipse_startAngle","")),ae.setKeyWords(""),ae.setBasePt(p),ae.setUserDraw((function(t,h){var x=Math.atan2(t.y-p.y,t.x-p.x);k=(x-ce+2*Math.PI)%(2*Math.PI);var M=N();h.drawMcDbEntity(M)})),ie.next=76,ae.go();case 76:if(ue=ie.sent){ie.next=79;break}return ie.abrupt("return",{v:void 0});case 79:return 8===ae.getDetailedResult()&&(k=ue),ae.clearLastInputPoint(),ae.setBasePt(p),ae.setMessage(_ML_String("McDbEllipse_endAngle","")),ae.setKeyWords("[(I)]"),ae.setUserDraw((function(t,h){var x=Math.atan2(t.y-p.y,t.x-p.x);(I=(x-ce+2*Math.PI)%(2*Math.PI))<k&&(I+=2*Math.PI);var M=N();h.drawMcDbEntity(M)})),ie.next=87,ae.go();case 87:if(le=ie.sent,!ae.isKeyWordPicked("I")){ie.next=99;break}return ae.setMessage(_ML_String("McDbEllipse_IncludedAngle","")),ae.setKeyWords(""),ae.setUserDraw((function(t,h){I=angleTo(p.x,p.y,t.x,t.y);var x=N();h.drawMcDbEntity(x)})),ie.next=94,ae.go();case 94:if(pe=ie.sent){ie.next=97;break}return ie.abrupt("return",{v:void 0});case 97:return 8===ae.getDetailedResult()&&(I=pe),ie.abrupt("return",{v:t.MxCpp.getCurrentMxCAD().drawEntity(N())});case 99:if(le){ie.next=101;break}return ie.abrupt("return",{v:void 0});case 101:return 8===ae.getDetailedResult()&&(I=le),ie.abrupt("return",{v:t.MxCpp.getCurrentMxCAD().drawEntity(N())});case 103:case"end":return ie.stop()}}),_loop)}));case 6:return te.delegateYield(V(),"t0",8);case 8:if(!(ee=te.t0)){te.next=11;break}return te.abrupt("return",ee.v);case 11:te.next=6;break;case 13:case"end":return te.stop()}}),_callee)}))),_drawEllipticalArc.apply(this,arguments)}function drawMxDbEllipse(){return _drawMxDbEllipse.apply(this,arguments)}function _drawMxDbEllipse(){return(_drawMxDbEllipse=_asyncToGenerator(ie.mark((function _callee2(){var h,x,M,k,I,N,V,ee,te,re;return ie.wrap((function _callee2$(ne){for(;;)switch(ne.prev=ne.next){case 0:h=new Tt,I=1,N=0,V=2*Math.PI,h.setMessage("\n"),h.setKeyWords("[(A)/(C)]"),ee=function createEllipse(){var t=new Xt;return t.center=x,t.majorAxis=M,t.minorAxis=k,t.radiusRatio=I,t.startAngle=N,t.endAngle=V,t},te=ie.mark((function _loop2(){var te,re,ne,ae,oe,se,ce,ue,le,pe,he,fe,de,me,ge,ve,ye;return ie.wrap((function _loop2$(ie){for(;;)switch(ie.prev=ie.next){case 0:return te=!1,re=!1,ne=!1,ie.next=5,h.go();case 5:if(ae=ie.sent,!h.isKeyWordPicked("A")){ie.next=17;break}return h.setMessage("\n"),h.setKeyWords("[(C)]"),ie.next=11,h.go();case 11:if(oe=ie.sent,h.isKeyWordPicked("C")&&(ne=!0),oe||ne){ie.next=15;break}return ie.abrupt("return",{v:void 0});case 15:oe&&(ae=oe),te=!0;case 17:if(!h.isKeyWordPicked("C")&&!ne){ie.next=27;break}return h.setMessage("\n"),h.setKeyWords(""),ie.next=22,h.go();case 22:if(se=ie.sent){ie.next=25;break}return ie.abrupt("return",{v:void 0});case 25:x=ae=se,re=!0;case 27:if(ae||te||re){ie.next=29;break}return ie.abrupt("return",{v:void 0});case 29:return h.setUserDraw((function(t,p){p.drawMcDbLine(ae.x,ae.y,ae.z,t.x,t.y,t.z)})),h.setMessage(re?"\n":"\n"),h.setKeyWords(""),ie.next=34,h.go();case 34:if(ce=ie.sent){ie.next=37;break}return ie.abrupt("return",{v:void 0});case 37:return x=re?ae:new nn((ae.x+ce.x)/2,(ae.y+ce.y)/2),(ue=new At).setBasePt(x),le=ae.distanceTo(ce)/2,k=M=ae.sub(ce),pe=function drawEllipse(t,p){var h=ee(),M=new Rt(x,t);M.trueColor=new Sr,M.trueColor.setRGB(255,255,0),p.drawMcDbEntity(M),p.drawMcDbEntity(h)},ue.setUserDraw((function(t,p){var h=x.distanceTo(t)/2;I=h/le,pe(t,p)})),ue.setMessage(_ML_String("EllipticalArc_length","")),ue.setKeyWords(""),ie.next=48,ue.go();case 48:if(he=ie.sent){ie.next=51;break}return ie.abrupt("return",{v:void 0});case 51:if(ue.getDetailedResult()===p.DetailedResult.kCoordIn&&(I=he/2/le),ue.setLastInputPoint(x),!te){ie.next=86;break}return ue.setMessage(_ML_String("EllipticalArc_startAngle","")),ue.setKeyWords(""),fe=Math.atan2(M.y,M.x)-Math.PI/2,ue.setUserDraw((function(t,p){var h=Math.atan2(t.y-x.y,t.x-x.x);N=(h-fe+2*Math.PI)%(2*Math.PI),pe(t,p)})),ie.next=60,ue.go();case 60:if(de=ie.sent){ie.next=63;break}return ie.abrupt("return",{v:void 0});case 63:return ue.getDetailedResult()==p.DetailedResult.kCoordIn&&(N=de),ue.setLastInputPoint(x),ue.setMessage(_ML_String("EllipticalArc_endAngle","")),ue.setKeyWords("[(I)]"),ue.setUserDraw((function(t,p){var h=Math.atan2(t.y-x.y,t.x-x.x);(V=(h-fe+2*Math.PI)%(2*Math.PI))<N&&(V+=2*Math.PI),pe(t,p)})),ie.next=70,ue.go();case 70:if(me=ie.sent,!ue.isKeyWordPicked("I")){ie.next=83;break}return ue.setMessage("\n"),ue.setKeyWords(""),ue.setUserDraw((function(t,p){V=angleTo(x.x,x.y,t.x,t.y)-Math.PI,pe(t,p)})),ie.next=77,ue.go();case 77:if(ge=ie.sent){ie.next=80;break}return ie.abrupt("return",{v:void 0});case 80:return ue.getDetailedResult()===p.DetailedResult.kCoordIn&&(V=ge),ve=ee(),ie.abrupt("return",{v:t.MxCpp.getCurrentMxCAD().drawEntity(ve)});case 83:if(me){ie.next=85;break}return ie.abrupt("return",{v:void 0});case 85:ue.getDetailedResult()===p.DetailedResult.kCoordIn&&(V=me);case 86:return ye=ee(),ie.abrupt("return",{v:t.MxCpp.getCurrentMxCAD().drawEntity(ye)});case 88:case"end":return ie.stop()}}),_loop2)}));case 8:return ne.delegateYield(te(),"t0",10);case 10:if(!(re=ne.t0)){ne.next=13;break}return ne.abrupt("return",re.v);case 13:ne.next=8;break;case 15:case"end":return ne.stop()}}),_callee2)})))).apply(this,arguments)}function Mx_Erase(){return _Mx_Erase.apply(this,arguments)}function _Mx_Erase(){return(_Mx_Erase=_asyncToGenerator(ie.mark((function _callee2(){var t,p;return ie.wrap((function _callee2$(h){for(;;)switch(h.prev=h.next){case 0:if(!((t=Mt.getCurrentSelect()).length>0)){h.next=4;break}return t.forEach((function(t){t.erase()})),h.abrupt("return");case 4:return p=new wt,h.next=7,p.userSelect("\n");case 7:if(h.sent){h.next=9;break}return h.abrupt("return");case 9:p.forEach((function(t){t.erase()}));case 10:case"end":return h.stop()}}),_callee2)})))).apply(this,arguments)}function MxGetMcDbEntityBoundingBox(t){var p=void 0,h=void 0;return t.forEach((function(t){var x=t.getMcDbEntity();if(null!=x){var M=x.getBoundingBox();M.ret&&(p&&h?(p.x>M.minPt.x&&(p.x=M.minPt.x),p.y>M.minPt.y&&(p.y=M.minPt.y),h.x<M.maxPt.x&&(h.x=M.maxPt.x),h.y<M.maxPt.y&&(h.y=M.maxPt.y)):(p=new THREE.Vector3(M.minPt.x,M.minPt.y,0),h=new THREE.Vector3(M.maxPt.x,M.maxPt.y,0)))}})),p&&h?{minPt:p,maxPt:h}:void 0}function Mx_Copy(){return _Mx_Copy.apply(this,arguments)}function _Mx_Copy(){return _Mx_Copy=_asyncToGenerator(ie.mark((function _callee3(){var p,h,x,M,k,I,N,V,ee,te,re;return ie.wrap((function _callee3$(ne){for(;;)switch(ne.prev=ne.next){case 0:if(!((p=Mt.getCurrentSelect()).length>0)){ne.next=4;break}return ne.abrupt("break",15);case 4:return h=new wt,ne.next=7,h.userSelect("\n");case 7:if(ne.sent){ne.next=9;break}return ne.abrupt("return");case 9:if(0!=(p=h.getIds()).length){ne.next=12;break}return ne.abrupt("return");case 12:return ne.abrupt("break",15);case 15:return p.length>=10&&(k=MxGetMcDbEntityBoundingBox(p))&&(x=k.minPt,M=k.maxPt),(I=new Tt).setMessage("\n"),ne.next=20,I.go();case 20:if(N=ne.sent){ne.next=23;break}return ne.abrupt("return");case 23:I.setMessage(""),I.setBasePt(N),I.setUseBasePt(!0),I.setUserDraw((function(h,k){if(x&&M){var I=h.x-N.x,V=h.y-N.y,ee=new THREE.Vector3(x.x+I,M.y+V,0),te=new THREE.Vector3(M.x+I,x.y+V,0),re=new THREE.Vector3(ee.x,te.y,0),ne=new THREE.Vector3(te.x,ee.y,0);ee=t.MxCoordConvert.cad2doc2(ee.x,ee.y,ee.z),te=t.MxCoordConvert.cad2doc2(te.x,te.y,te.z),re=t.MxCoordConvert.cad2doc2(re.x,re.y,re.z),ne=t.MxCoordConvert.cad2doc2(ne.x,ne.y,ne.z),k.drawLine(ne,ee),k.drawLine(ee,re),k.drawLine(re,te),k.drawLine(te,ne)}for(var ie=0;ie<p.length&&ie<10;ie++){var ae=p[ie].clone();ae&&(ae.move(N,h),k.drawMcDbEntity(ae))}}));case 27:return ne.next=30,I.go();case 30:if(V=ne.sent){ne.next=33;break}return ne.abrupt("return");case 33:ee=0;case 34:if(!(ee<p.length)){ne.next=43;break}if(te=p[ee].clone()){ne.next=38;break}return ne.abrupt("continue",40);case 38:(re=t.MxCpp.getCurrentMxCAD().drawEntity(te).getMcDbEntity())&&(re instanceof zt?re.needToUpdateDimBlock(!1):re instanceof jt&&p[ee].getMcDbEntity().copyAttribute(re),re.move(N,V));case 40:ee++,ne.next=34;break;case 43:ne.next=27;break;case 45:case"end":return ne.stop()}}),_callee3)}))),_Mx_Copy.apply(this,arguments)}function Mx_Move(){return _Mx_Move.apply(this,arguments)}function _Mx_Move(){return _Mx_Move=_asyncToGenerator(ie.mark((function _callee4(){var p,h,x,M,k,I,N,V,ee,te,re;return ie.wrap((function _callee4$(ne){for(;;)switch(ne.prev=ne.next){case 0:if(!((p=Mt.getCurrentSelect()).length>0)){ne.next=4;break}return ne.abrupt("break",15);case 4:return h=new wt,ne.next=7,h.userSelect("\n");case 7:if(ne.sent){ne.next=9;break}return ne.abrupt("return");case 9:if(0!=(p=h.getIds()).length){ne.next=12;break}return ne.abrupt("return");case 12:return ne.abrupt("break",15);case 15:return p.length>=10&&(k=MxGetMcDbEntityBoundingBox(p))&&(x=k.minPt,M=k.maxPt),(I=new Tt).setMessage(""),I.clearLastInputPoint(),ne.next=21,I.go();case 21:if(N=ne.sent){ne.next=24;break}return ne.abrupt("return");case 24:return I.setMessage(""),I.setBasePt(N),I.setUseBasePt(!0),V=function highlight(t){for(var h=0;h<p.length;h++){var x=p[h].getMcDbEntity();x&&x.highlight(t)}},V(!0),I.setUserDraw((function(h,k){if(x&&M){var I=h.x-N.x,V=h.y-N.y,ee=new THREE.Vector3(x.x+I,M.y+V,0),te=new THREE.Vector3(M.x+I,x.y+V,0),re=new THREE.Vector3(ee.x,te.y,0),ne=new THREE.Vector3(te.x,ee.y,0);ee=t.MxCoordConvert.cad2doc2(ee.x,ee.y,ee.z),te=t.MxCoordConvert.cad2doc2(te.x,te.y,te.z),re=t.MxCoordConvert.cad2doc2(re.x,re.y,re.z),ne=t.MxCoordConvert.cad2doc2(ne.x,ne.y,ne.z),k.drawLine(ne,ee),k.drawLine(ee,re),k.drawLine(re,te),k.drawLine(te,ne)}for(var ie=0;ie<p.length&&ie<10;ie++){var ae=p[ie].clone();ae&&(N&&ae.move(N,h),k.drawMcDbEntity(ae))}})),ne.next=32,I.go();case 32:if(ee=ne.sent){ne.next=35;break}return ne.abrupt("return",V(!1));case 35:V(!1),te=0;case 37:if(!(te<p.length)){ne.next=46;break}if(re=p[te].getMcDbObject()){ne.next=41;break}return ne.abrupt("continue",43);case 41:re.move(N,ee),re instanceof zt&&re.needToUpdateDimBlock(!1);case 43:te++,ne.next=37;break;case 46:case"end":return ne.stop()}}),_callee4)}))),_Mx_Move.apply(this,arguments)}function Mx_Rotate(){return _Mx_Rotate.apply(this,arguments)}function _Mx_Rotate(){return _Mx_Rotate=_asyncToGenerator(ie.mark((function _callee5(){var h,x,M,k,I,N,V,ee,te,re,ne,ae,oe;return ie.wrap((function _callee5$(se){for(;;)switch(se.prev=se.next){case 0:if(!((h=Mt.getCurrentSelect()).length>0)){se.next=4;break}return se.abrupt("break",15);case 4:return x=new wt,se.next=7,x.userSelect("\n");case 7:if(se.sent){se.next=9;break}return se.abrupt("return");case 9:if(0!=(h=x.getIds()).length){se.next=12;break}return se.abrupt("return");case 12:return se.abrupt("break",15);case 15:return(I=MxGetMcDbEntityBoundingBox(h))&&(M=I.minPt,k=I.maxPt),(N=new Tt).setMessage(""),se.next=21,N.go();case 21:if(null!=(V=se.sent)){se.next=24;break}return se.abrupt("return");case 24:ee=!1,te=0,(re=new kt).setMessage(_ML_String("Entity_Rotate_Angle","")),re.setKeyWords("[(C)/(R)]"),re.setBasePt(V),re.setUseBasePt(!0),ne=function highlight(t){for(var p=0;p<h.length;p++){var x=h[p].getMcDbEntity();x&&x.highlight(t)}},ne(!0),se.prev=33,ae=ie.mark((function _loop(){var x,I,N,ae,oe,se,ce,ue,le,pe,he,fe;return ie.wrap((function _loop$(ie){for(;;)switch(ie.prev=ie.next){case 0:return re.setUserDraw((function(p,x){var I=V,N=p.sub(I).angleTo2(sn.kXAxis,sn.kNegateZAxis)-te,ee=new cn;if(ee.setToRotation(N,sn.kZAxis,I),M&&k){var re=new nn(M.x,k.y,0),ne=new nn(k.x,M.y,0),ie=new nn(re.x,ne.y,0),ae=new nn(ne.x,re.y,0);re.transformBy(ee),ne.transformBy(ee),ie.transformBy(ee),ae.transformBy(ee),re=t.MxCoordConvert.cad2doc(re),ne=t.MxCoordConvert.cad2doc(ne),ie=t.MxCoordConvert.cad2doc(ie),ae=t.MxCoordConvert.cad2doc(ae),x.drawLine(ae.toVector3(),re.toVector3()),x.drawLine(re.toVector3(),ie.toVector3()),x.drawLine(ie.toVector3(),ne.toVector3()),x.drawLine(ne.toVector3(),ae.toVector3())}ee.setToRotation(N,sn.kZAxis,I);for(var oe=0;oe<h.length&&oe<10;oe++){var se=h[oe].clone();se&&(se.transformBy(ee),x.drawMcDbEntity(se))}})),ie.next=3,re.go();case 3:if(x=ie.sent,!re.isKeyWordPicked("C")){ie.next=8;break}return ee=!0,ne(!1),ie.abrupt("return",0);case 8:if(!re.isKeyWordPicked("R")){ie.next=22;break}return(I=new At).setMessage(_ML_String("Entity_Rotate_Ref_Angle",":<"+(te/(Math.PI/180)).toFixed(3)+">")),I.setKeyWords(""),I.setUseBasePt(!1),N=0,I.setUserDraw((function(t){if(V){var p=t.sub(V);N=p.angleTo2(sn.kXAxis,sn.kNegateZAxis)}})),ie.next=17,I.go();case 17:if("number"==typeof(ae=ie.sent)){ie.next=20;break}return ie.abrupt("return",{v:ne(!1)});case 20:return I.getDetailedResult()===p.DetailedResult.kCoordIn?te=THREE.MathUtils.degToRad(ae):0!==N&&(te=N),ie.abrupt("return",0);case 22:if("number"==typeof x){ie.next=24;break}return ie.abrupt("return",{v:ne(!1)});case 24:if(oe=V,(se=new cn).setToRotation(x-te,sn.kZAxis,oe),ce=function isMcDbEntity(t){return t instanceof Lt},!ee){ie.next=42;break}ue=[],le=0;case 31:if(!(le<h.length)){ie.next=39;break}if(pe=h[le].clone()){ie.next=35;break}return ie.abrupt("continue",36);case 35:ce(pe)&&(pe.transformBy(se),ue.push(t.MxCpp.getCurrentMxCAD().drawEntity(pe)));case 36:le++,ie.next=31;break;case 39:return ie.abrupt("return",{v:ue});case 42:ne(!1),he=0;case 44:if(!(he<h.length)){ie.next=52;break}if(fe=h[he].getMcDbObject()){ie.next=48;break}return ie.abrupt("continue",49);case 48:fe.transformBy(se);case 49:he++,ie.next=44;break;case 52:return ie.abrupt("return",{v:h});case 53:case"end":return ie.stop()}}),_loop)}));case 35:return se.delegateYield(ae(),"t0",37);case 37:if(0!==(oe=se.t0)){se.next=40;break}return se.abrupt("continue",35);case 40:if(!oe){se.next=42;break}return se.abrupt("return",oe.v);case 42:se.next=35;break;case 44:se.next=50;break;case 46:se.prev=46,se.t1=se.catch(33),ne(!1);case 50:case"end":return se.stop()}}),_callee5,null,[[33,46]])}))),_Mx_Rotate.apply(this,arguments)}function Mx_Scale(){return _Mx_Scale.apply(this,arguments)}function _Mx_Scale(){return _Mx_Scale=_asyncToGenerator(ie.mark((function _callee6(){var h,x,M,k,I,N,V,ee,te,re,ne,ae,oe,se,ce,ue,le,pe,he,fe,de,me,ge,ve,ye,xe,be;return ie.wrap((function _callee6$(ie){for(;;)switch(ie.prev=ie.next){case 0:if(!((h=Mt.getCurrentSelect()).length>0)){ie.next=4;break}return ie.abrupt("break",15);case 4:return x=new wt,ie.next=7,x.userSelect("\n");case 7:if(ie.sent){ie.next=9;break}return ie.abrupt("return");case 9:if(0!=(h=x.getIds()).length){ie.next=12;break}return ie.abrupt("return");case 12:return ie.abrupt("break",15);case 15:if(I=MxGetMcDbEntityBoundingBox(h)){ie.next=18;break}return ie.abrupt("return");case 18:return M=I.minPt,k=I.maxPt,N=k.x-M.x,V=k.y-M.y,(ee=(N+V)/3)<1e-5&&(ee=1),(te=new Tt).setMessage(""),ie.next=28,te.go();case 28:if(re=ie.sent){ie.next=31;break}return ie.abrupt("return");case 31:ne=0,ae=!1,oe=function draw(p,x){if(re){var I=new nn(p),N=new nn(re),V=I.distanceTo(N);if(!(V<1e-5)){(ne=V/ee)>1e5&&(ne=1e5);var te=new cn;if(te.setToScaling(ne,N),M&&k){var ie=new nn(M.x,k.y,0),ae=new nn(k.x,M.y,0),oe=new nn(ie.x,ae.y,0),se=new nn(ae.x,ie.y,0);ie.transformBy(te),ae.transformBy(te),oe.transformBy(te),se.transformBy(te),ie=t.MxCoordConvert.cad2doc(ie),ae=t.MxCoordConvert.cad2doc(ae),oe=t.MxCoordConvert.cad2doc(oe),se=t.MxCoordConvert.cad2doc(se),x.drawLine(se.toVector3(),ie.toVector3()),x.drawLine(ie.toVector3(),oe.toVector3()),x.drawLine(oe.toVector3(),ae.toVector3()),x.drawLine(ae.toVector3(),se.toVector3())}te.setToScaling(ne,N);for(var ce=0;ce<h.length&&ce<10;ce++){var ue=h[ce].clone();ue&&(ue.transformBy(te),x.drawMcDbEntity(ue))}}}},se=function highlight(t){for(var p=0;p<h.length;p++){var x=h[p].getMcDbEntity();x&&x.highlight(t)}},se(!0),ie.prev=36;case 37:return(ce=new At).setMessage(""),ce.setKeyWords("[(C)/(R)]"),ce.setBasePt(re),ce.setUseBasePt(!0),ce.setUserDraw(oe),ie.next=46,ce.go();case 46:if(ue=ie.sent,!ce.isKeyWordPicked("C")){ie.next=51;break}return ae=!0,se(!1),ie.abrupt("continue",37);case 51:if(!ce.isKeyWordPicked("R")){ie.next=77;break}return(le=new At).setMessage(""),le.setBasePt(re),ie.next=57,le.go();case 57:if(pe=ie.sent){ie.next=60;break}return ie.abrupt("return",se(!1));case 60:return ee=pe,le.setMessage(""),le.setKeyWords("[(P)]"),le.setBasePt(re),le.setUserDraw(oe),ie.next=67,le.go();case 67:if(he=ie.sent,!le.isKeyWordPicked("P")){ie.next=74;break}return(fe=new At).setMessage(""),ie.next=73,fe.go();case 73:he=ie.sent;case 74:if(he){ie.next=76;break}return ie.abrupt("return",se(!1));case 76:ue=he/pe;case 77:if(ue){ie.next=79;break}return ie.abrupt("return",se(!1));case 79:if(ce.getDetailedResult()===p.DetailedResult.kCoordIn&&(ne=ue),ne>1e5&&(ne=1e5),(de=new cn).setToScaling(ne,re),!ae){ie.next=98;break}me=[],ge=function isMcDbEntity(t){return t instanceof Lt},ve=0;case 87:if(!(ve<h.length)){ie.next=95;break}if(ye=h[ve].clone()){ie.next=91;break}return ie.abrupt("continue",92);case 91:ge(ye)&&(ye.transformBy(de),me.push(t.MxCpp.getCurrentMxCAD().drawEntity(ye)));case 92:ve++,ie.next=87;break;case 95:return ie.abrupt("return",me);case 98:se(!1),xe=0;case 100:if(!(xe<h.length)){ie.next=108;break}if(be=h[xe].getMcDbObject()){ie.next=104;break}return ie.abrupt("continue",105);case 104:be.transformBy(de);case 105:xe++,ie.next=100;break;case 108:return ie.abrupt("return",h);case 109:ie.next=37;break;case 111:ie.next=117;break;case 113:ie.prev=113,ie.t0=ie.catch(36),se(!1);case 117:case"end":return ie.stop()}}),_callee6,null,[[36,113]])}))),_Mx_Scale.apply(this,arguments)}function Mx_WindowZoom(){return _Mx_WindowZoom.apply(this,arguments)}function _Mx_WindowZoom(){return _Mx_WindowZoom=_asyncToGenerator(ie.mark((function _callee7(){var h,x,M,k;return ie.wrap((function _callee7$(I){for(;;)switch(I.prev=I.next){case 0:return(h=new Tt).disableAllTrace(),h.setMessage("\n"),h.setDynamicInputType(p.DynamicInputType.kDynTip),I.next=6,h.go();case 6:if(null!=(x=I.sent)){I.next=9;break}return I.abrupt("return");case 9:return M=t.MxCpp.getCurrentMxCAD(),h.setUserDraw((function(p,h){h.drawRect(t.MxCoordConvert.cad2doc1(x),t.MxCoordConvert.cad2doc1(p))})),I.next=13,h.go();case 13:if(null!=(k=I.sent)){I.next=16;break}return I.abrupt("return");case 16:M.zoomW(x,k);case 17:case"end":return I.stop()}}),_callee7)}))),_Mx_WindowZoom.apply(this,arguments)}function Mx_ZoomE(){return _Mx_ZoomE.apply(this,arguments)}function _Mx_ZoomE(){return(_Mx_ZoomE=_asyncToGenerator(ie.mark((function _callee8(){return ie.wrap((function _callee8$(p){for(;;)switch(p.prev=p.next){case 0:t.MxCpp.getCurrentMxCAD().zoomAll(!0);case 1:case"end":return p.stop()}}),_callee8)})))).apply(this,arguments)}function Mx_Plan90CW(){return _Mx_Plan90CW.apply(this,arguments)}function _Mx_Plan90CW(){return(_Mx_Plan90CW=_asyncToGenerator(ie.mark((function _callee9(){var h;return ie.wrap((function _callee9$(x){for(;;)switch(x.prev=x.next){case 0:h=p.MxFun.getCurrentDraw().getViewAngle(),h+=.5*Math.PI,t.MxCpp.getCurrentMxCAD().zoomAngle(h);case 4:case"end":return x.stop()}}),_callee9)})))).apply(this,arguments)}p.MxFun.on("init",(function(){p.MxFun.addCommand("Mx_Circle",drawCircle)})),p.MxFun.on("init",(function(){p.MxFun.addCommand("Mx_Line",drawLine),p.MxFun.addCommand("Mx_Point",Mx_Point),p.MxFun.addCommand("Mx_About",Mx_About),p.MxFun.addCommand("Mx_Spline",MxDb_Spline)})),p.MxFun.on("init",(function(){p.MxFun.addCommand("Mx_Pline",drawPolyLine)})),p.MxFun.addCommand("Mx_Polygon",drawPolygon),p.MxFun.on("init",(function(){p.MxFun.addCommand("Mx_Arc",drawArc)})),p.MxFun.on("init",(function(){p.MxFun.addCommand("Mx_EllipseArc",drawEllipticalArc),p.MxFun.addCommand("Mx_Ellipse",drawMxDbEllipse)}));var Ei=!1,Ri=!0;function Mx_Offset(){return _Mx_Offset.apply(this,arguments)}function _Mx_Offset(){return _Mx_Offset=_asyncToGenerator(ie.mark((function _callee11(){var h,x,M,k,I,N,V,ee,te,re;return ie.wrap((function _callee11$(ne){for(;;)switch(ne.prev=ne.next){case 0:(h=new bt).AddMcDbEntityTypes("LINE,CIRCLE,LWPOLYLINE,ARC"),x=new Tt,M=!1,k=function(){var k=_asyncToGenerator(ie.mark((function _callee10(){var k,I,N,V=arguments;return ie.wrap((function _callee10$(ee){for(;;)switch(ee.prev=ee.next){case 0:k=V.length>0&&void 0!==V[0]&&V[0],I=ie.mark((function _loop2(){var I,N,V,ee,te,re;return ie.wrap((function _loop2$(ne){for(;;)switch(ne.prev=ne.next){case 0:if(!((ee=Mt.getCurrentSelect()).length>0&&k)){ne.next=5;break}V=ee,ne.next=8;break;case 5:return ne.next=7,Mt.selectEnt("\n",h,!1,(function(t){t.setKeyWords("[(E)/(U)]"),I=t}),(function(t){N=t}));case 7:V=ne.sent;case 8:if(!I){ne.next=15;break}if(!I.isKeyWordPicked("E")){ne.next=11;break}return ne.abrupt("return",{v:void 0});case 11:if(!I.isKeyWordPicked("U")){ne.next=13;break}return ne.abrupt("return",0);case 13:if(I.getStatus()!==p.MrxDbgUiPrBaseReturn.kCancel){ne.next=15;break}return ne.abrupt("return",{v:void 0});case 15:if(0!=V.length){ne.next=17;break}return ne.abrupt("return",0);case 17:te=ie.mark((function _loop3(){var h,I,ee,te;return ie.wrap((function _loop3$(re){for(;;)switch(re.prev=re.next){case 0:return x.setDynamicInputType(p.DynamicInputType.kXYCoordInput),k?x.setMessage("\n"+(M?" <>":"")):x.setMessage("\n"),x.setKeyWords(M?"[(E)/(U)]":"[(E)/(M)/(U)]"),x.disableAllTrace(),x.setUserDraw((function(t,p){var h=V.map((function(t){return t.clone()}))[0];if(h){var x=Ii;if(k){var M=h.getClosestPointTo(t,!0);if(!M.ret)return;N=M.val,x=t.distanceTo(N)}if(x){var I=h.offsetCurves(x,t);I.empty()||I.forEach((function(t){t instanceof Lt&&p.drawMcDbEntity(t)}))}}})),re.next=7,x.go();case 7:if(h=re.sent,!x.isKeyWordPicked("E")){re.next=10;break}return re.abrupt("return",{v:{v:void 0}});case 10:if(!x.isKeyWordPicked("M")){re.next=13;break}return M=!0,re.abrupt("return",0);case 13:if(!x.isKeyWordPicked("U")){re.next=15;break}return re.abrupt("return",{v:1});case 15:if(h){re.next=17;break}return re.abrupt("return",{v:{v:void 0}});case 17:if(I=V[0].getMcDbCurve()){re.next=20;break}return re.abrupt("return",{v:{v:void 0}});case 20:if(!k){re.next=25;break}if((ee=I.getClosestPointTo(h,!0)).ret){re.next=24;break}return re.abrupt("return",{v:{v:void 0}});case 24:Ii=h.distanceTo(ee.val);case 25:if(Ii){re.next=27;break}return re.abrupt("return",{v:{v:void 0}});case 27:if(!(te=I.offsetCurves(Ii,h)).empty()){re.next=30;break}return re.abrupt("return",{v:{v:void 0}});case 30:if(te.forEach((function(p){p instanceof Lt&&(Ri&&null!=I&&I.layer&&(p.layer=I.layer),Ri||(p.layer=t.MxCpp.getCurrentMxCAD().getDatabase().getCurrentlyLayerName()),t.MxCpp.getCurrentMxCAD().drawEntity(p))})),M){re.next=34;break}return Ei&&V[0].erase(!0),re.abrupt("return",1);case 34:case"end":return re.stop()}}),_loop3)}));case 19:return ne.delegateYield(te(),"t0",21);case 21:if(0!==(re=ne.t0)){ne.next=24;break}return ne.abrupt("continue",19);case 24:if(1!==re){ne.next=26;break}return ne.abrupt("break",30);case 26:if(!re){ne.next=28;break}return ne.abrupt("return",re.v);case 28:ne.next=19;break;case 30:case"end":return ne.stop()}}),_loop2)}));case 2:return ee.delegateYield(I(),"t0",4);case 4:if(0!==(N=ee.t0)){ee.next=7;break}return ee.abrupt("continue",2);case 7:if(1!==N){ee.next=9;break}return ee.abrupt("continue",2);case 9:if(!N){ee.next=11;break}return ee.abrupt("return",N.v);case 11:ee.next=2;break;case 13:case"end":return ee.stop()}}),_callee10)})));return function callOffsetObj(){return k.apply(this,arguments)}}();case 5:return(I=new At).setMessage("\n<".concat((Ii||0).toFixed(3),">")),I.setKeyWords("[(T)/(E)/(L))]"),ne.next=11,I.go();case 11:if(N=ne.sent,!I.isKeyWordPicked("T")&&I.getStatus()!==p.MrxDbgUiPrBaseReturn.kNone){ne.next=16;break}return ne.next=15,k(!0);case 15:return ne.abrupt("return");case 16:if(!I.isKeyWordPicked("E")){ne.next=33;break}return(V=new Pt).setMessage("?<".concat(Ei?"":"",">")),V.setKeyWords("[(Y)/(N)]"),ne.next=22,V.go();case 22:if(ee=ne.sent,V.getStatus()!==p.MrxDbgUiPrBaseReturn.kCancel){ne.next=25;break}return ne.abrupt("return");case 25:if(V.getStatus()!==p.MrxDbgUiPrBaseReturn.kNone){ne.next=27;break}return ne.abrupt("continue",5);case 27:if("y"!==(null==ee?void 0:ee.toLocaleLowerCase())){ne.next=30;break}return Ei=!0,ne.abrupt("continue",5);case 30:if("n"!==(null==ee?void 0:ee.toLocaleLowerCase())){ne.next=33;break}return Ei=!1,ne.abrupt("continue",5);case 33:if(!I.isKeyWordPicked("L")){ne.next=51;break}return(te=new Pt).setMessage("<".concat(Ri?"":"",">")),te.setKeyWords("[(C)/(S)]"),ne.next=39,te.go();case 39:if(re=ne.sent,te.getStatus()!==p.MrxDbgUiPrBaseReturn.kCancel){ne.next=42;break}return ne.abrupt("return");case 42:if(te.getStatus()!==p.MrxDbgUiPrBaseReturn.kNone){ne.next=45;break}return Ri=!0,ne.abrupt("continue",5);case 45:if("c"!==(null==re?void 0:re.toLocaleLowerCase())){ne.next=48;break}return Ri=!1,ne.abrupt("continue",5);case 48:if("s"!==(null==re?void 0:re.toLocaleUpperCase())){ne.next=51;break}return Ri=!0,ne.abrupt("continue",5);case 51:if(N&&(Ii=N),Ii){ne.next=54;break}return ne.abrupt("return");case 54:return ne.next=56,k();case 56:return ne.abrupt("break",59);case 59:case"end":return ne.stop()}}),_callee11)}))),_Mx_Offset.apply(this,arguments)}function Mx_Regen(){t.MxCpp.getCurrentMxCAD().regen()}function Mx_Mirror(){return _Mx_Mirror.apply(this,arguments)}function _Mx_Mirror(){return _Mx_Mirror=_asyncToGenerator(ie.mark((function _callee12(){var h,x,M,k,I,N,V,ee,te,re,ne,ae;return ie.wrap((function _callee12$(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.next=2,Mt.userSelect("");case 2:if(0!=(h=ie.sent).length){ie.next=6;break}return p.MxFun.acutPrintf("\n "),ie.abrupt("return");case 6:return(k=MxGetMcDbEntityBoundingBox(h))&&(x=k.minPt,M=k.maxPt),(I=new Tt).setMessage(""),ie.next=12,I.go();case 12:if(null!=(N=ie.sent)){ie.next=15;break}return ie.abrupt("return");case 15:return I.setMessage(""),I.setBasePt(N),I.setUseBasePt(!0),I.setUserDraw((function(p,k){if(x&&M){var I=new cn;I.setMirror(N,p);var V=new nn(x.x,M.y,0),ee=new nn(M.x,x.y,0),te=new nn(V.x,ee.y,0),re=new nn(ee.x,V.y,0);V.transformBy(I),ee.transformBy(I),te.transformBy(I),re.transformBy(I),V=t.MxCoordConvert.cad2doc(V),ee=t.MxCoordConvert.cad2doc(ee),te=t.MxCoordConvert.cad2doc(te),re=t.MxCoordConvert.cad2doc(re),k.drawLine(re.toVector3(),V.toVector3()),k.drawLine(V.toVector3(),te.toVector3()),k.drawLine(te.toVector3(),ee.toVector3()),k.drawLine(ee.toVector3(),re.toVector3())}for(var ne=0;ne<h.length&&ne<10;ne++){var ie=h[ne].clone();ie&&(ie.mirror(N,p),k.drawMcDbEntity(ie))}})),I.setDynamicInputType(p.DynamicInputType.kXYCoordInput),ie.next=22,I.go();case 22:if(V=ie.sent){ie.next=25;break}return ie.abrupt("return");case 25:return(ee=new Pt).clearLastInputPoint(),ee.setMessage("<N>"),ee.setKeyWords("[(Y)/(N)]"),ie.next=31,ee.go();case 31:if(te=ie.sent,ee.getStatus()!==p.MrxDbgUiPrBaseReturn.kCancel){ie.next=34;break}return ie.abrupt("return");case 34:re=0;case 35:if(!(re<h.length)){ie.next=44;break}if(ne=h[re].clone()){ie.next=39;break}return ie.abrupt("continue",41);case 39:ne.mirror(N,V),t.MxCpp.getCurrentMxCAD().drawEntity(ne);case 41:re++,ie.next=35;break;case 44:if("y"===(null==te?void 0:te.toLocaleLowerCase()))for(ae=0;ae<h.length;ae++)h[ae].erase();case 45:case"end":return ie.stop()}}),_callee12)}))),_Mx_Mirror.apply(this,arguments)}var Bi=function copyAttribute(t,p){t.layer=p.layer,t.trueColor=p.trueColor,t.colorIndex=p.colorIndex,t.linetype=p.linetype,t.visible=p.visible,t.textStyle=p.textStyle,t.lineweight=p.lineweight,t.drawOrder=p.drawOrder,t.linetypeScale=p.linetypeScale},Ni=!1;function Mx_Chamfer(){return _Mx_Chamfer.apply(this,arguments)}function _Mx_Chamfer(){return _Mx_Chamfer=_asyncToGenerator(ie.mark((function _callee15(){var h,x,M,k,I,N,V,ee,te,re,ne,ae;return ie.wrap((function _callee15$(oe){for(;;)switch(oe.prev=oe.next){case 0:h=Number(localStorage.getItem("mx_chamfer_dist")),x=Number(localStorage.getItem("mx_chamfer_dist1")),"number"!=typeof h&&(h=0),"number"!=typeof x&&(x=0),M=0,k=0,I=!1,N=!0,V=!1,p.MxFun.acutPrintf("\n(".concat(N?"":"",") ").concat(I?" = "+h.toFixed(4)+",  = "+Math.trunc(k/(Math.PI/180)):"1 = "+h.toFixed(4)+", 2 = "+x.toFixed(4),"\n")),ee=function(){var t=_asyncToGenerator(ie.mark((function _callee13(){var t,M,k;return ie.wrap((function _callee13$(N){for(;;)switch(N.prev=N.next){case 0:return(t=new At).setDynamicInputType(p.DynamicInputType.kXYCoordInput),t.setMessage("<".concat(h.toFixed(4),">")),t.setKeyWords(""),N.next=6,t.go();case 6:if("number"==typeof(M=N.sent)){N.next=9;break}return N.abrupt("return");case 9:return h=M,t.setMessage("<".concat(x.toFixed(4),">")),t.setKeyWords(""),N.next=14,t.go();case 14:if("number"==typeof(k=N.sent)){N.next=17;break}return N.abrupt("return");case 17:return x=k,localStorage.setItem("mx_chamfer_dist",h.toString()),localStorage.setItem("mx_chamfer_dist1",x.toString()),I=!1,N.abrupt("return",[h,x]);case 22:case"end":return N.stop()}}),_callee13)})));return function getChamferDists(){return t.apply(this,arguments)}}(),te=function(){var t=_asyncToGenerator(ie.mark((function _callee14(){var t,h,x,N;return ie.wrap((function _callee14$(V){for(;;)switch(V.prev=V.next){case 0:return(t=new At).setMessage("<".concat(M.toFixed(4),">")),t.setKeyWords(""),t.clearLastInputPoint(),V.next=6,t.go();case 6:if("number"==typeof(h=V.sent)){V.next=9;break}return V.abrupt("return");case 9:return M=h,(x=new kt).setMessage("<".concat(Math.trunc(k/(Math.PI/180)),">")),x.setKeyWords(""),t.clearLastInputPoint(),V.next=16,x.go();case 16:if("number"==typeof(N=V.sent)){V.next=19;break}return V.abrupt("return");case 19:return k=x.getDetailedResult()===p.DetailedResult.kCoordIn?N*(Math.PI/180):N,I=!0,V.abrupt("return",[M,k]);case 22:case"end":return V.stop()}}),_callee14)})));return function getChamferAngle(){return t.apply(this,arguments)}}(),re=function calculateChamferDist2(p,h,x,M){var k=p.startPoint.clone(),I=h.startPoint.clone(),N=h.endPoint.clone(),V=I.clone().addvec(I.sub(k).normalize().mult(-x)),ee=V.sub(I).rotateBy(-M).mult(-x),te=V.clone().addvec(ee),re=new Rt(V,te),ne=new Rt(I,N.clone().addvec(I.sub(N).normalize().mult(-x))),ie=re.IntersectWith(ne,t.McDb.Intersect.kExtendBoth);if(!ie.isEmpty())return ie.at(0).distanceTo(I)},ne=ie.mark((function _loop4(){var ne,ae,oe,se,ce,ue,le,pe,he,fe,de,me,ge,ve,ye,xe,be,_e,Me,Ce,we,Se,Te,Ae,ke,De,Oe,Ie,Le,Ee,Re,Be,Ne,Ge,Fe,Ve,Ue,je,We,ze,He,$e,Ye;return ie.wrap((function _loop4$(ie){for(;;)switch(ie.prev=ie.next){case 0:return(ne=new It).setDynamicInputType(p.DynamicInputType.kNoInput),(ae=new bt).AddMcDbEntityTypes("LINE,LWPOLYLINE"),ne.setFilter(ae),ne.setMessage(""),ne.setKeyWords("[(U)/(P)/(D)/(A)/(T)/(E)/(M)]"),ie.next=9,ne.go();case 9:if(oe=ie.sent,!ne.isKeyWordPicked("U")){ie.next=12;break}return ie.abrupt("return",0);case 12:if(!ne.isKeyWordPicked("P")){ie.next=77;break}case 13:return(se=new It).setDynamicInputType(p.DynamicInputType.kNoInput),(new bt).AddMcDbEntityTypes("LWPOLYLINE"),se.setMessage(""),se.setKeyWords("[(D)/(A)/(M)]"),ce=function createNewEnts(t){var V=t.getMcDbEntity();if(V instanceof Ut){var ee=V.numVerts();if(ee<3)return p.MxFun.acutPrintf("\n");var te=h,ne=x;if(I){var ie=V.getPointAt(0).val,ae=V.getPointAt(1).val,oe=V.getPointAt(2).val;te=M;var se=re(new Rt(ie,ae),new Rt(ae,oe),M,k);if("number"!=typeof se)return p.MxFun.acutPrintf("\n");ne=se}var ce=new Ut;ce.isClosed=V.isClosed;for(var ue=[],le=function addChamferLine(t,p){var h=function getChamferPoints(t,p){var h=arguments.length>2&&void 0!==arguments[2]&&arguments[2],x=t.sub(p).normalize().mult(h?-ne:-te),M=t.clone().addvec(x),k=p.sub(t).normalize().mult(h?-te:-ne);return[M,p.clone().addvec(k)]}(t,p,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),x=_slicedToArray$1(h,2),M=x[0],k=x[1];N?(ce.addVertexAt(M),ce.addVertexAt(k)):ue.push(M,k)},pe=0;pe<ee;pe++){var he=V.getPointAt(pe).val,fe=V.getPointAt(pe+1).val;if(V.isClosed)pe!==ee-1&&le(he,fe);else if(0===pe){ce.addVertexAt(he);var de=fe.sub(he).normalize().mult(-te),me=fe.clone().addvec(de);ce.addVertexAt(fe.clone().addvec(de)),ue.unshift(me)}else if(pe===ee-2){var ge=he.sub(fe).normalize().mult(-ne),ve=he.clone().addvec(ge);ce.addVertexAt(ve),ce.addVertexAt(fe),ue.push(ve)}else pe!==ee-1&&le(he,fe,!0)}if(V.isClosed&&le(V.getPointAt(ee-1).val,V.getPointAt(0).val),N)return Bi(ce,V),ce;var ye=[],xe=[];return V.isClosed&&ue.unshift(ue[ue.length-1]),ue.forEach((function(t){if(ye.push(t),2===ye.length){var p=new Rt(ye[0],ye[1]);Bi(p,V),xe.push(p),ye=[]}})),xe}},ie.next=23,se.go();case 23:if(ue=ie.sent,!se.isKeyWordPicked("D")){ie.next=30;break}return ie.next=27,ee();case 27:if(ie.sent){ie.next=29;break}return ie.abrupt("return",{v:void 0});case 29:return ie.abrupt("continue",13);case 30:if(!se.isKeyWordPicked("A")){ie.next=36;break}return ie.next=33,te();case 33:if(ie.sent){ie.next=35;break}return ie.abrupt("return",{v:void 0});case 35:return ie.abrupt("continue",13);case 36:if(!se.isKeyWordPicked("M")){ie.next=39;break}return V=!0,ie.abrupt("continue",13);case 39:if(se.getStatus()!==p.MrxDbgUiPrBaseReturn.kCancel){ie.next=41;break}return ie.abrupt("return",{v:void 0});case 41:if(ue){ie.next=43;break}return ie.abrupt("continue",13);case 43:if(ue.isValid()){ie.next=45;break}return ie.abrupt("continue",13);case 45:if(le=ce(ue)){ie.next=52;break}if(!V){ie.next=51;break}return ie.abrupt("continue",13);case 51:return ie.abrupt("return",{v:void 0});case 52:if(pe=ue.getMcDbEntity()){ie.next=59;break}if(!V){ie.next=58;break}return ie.abrupt("continue",13);case 58:return ie.abrupt("return",{v:void 0});case 59:if(!(le instanceof Ut)){ie.next=68;break}if(pe instanceof Ut){ie.next=62;break}return ie.abrupt("return",{v:void 0});case 62:for(he=pe.numVerts(),fe=0;fe<he;fe++)pe.removeVertexAt(0);for(de=le.numVerts(),me=0;me<de;me++)ge=le.getWidthsAt(me),ve=ge.val1,ye=ge.val2,pe.addVertexAt(le.getPointAt(me).val,le.getBulgeAt(me),ve,ye);ie.next=70;break;case 68:le.forEach((function(p){t.MxCpp.getCurrentMxCAD().drawEntity(p)})),pe.visible=!0;case 70:if(!V){ie.next=74;break}return ie.abrupt("continue",13);case 74:return ie.abrupt("return",{v:void 0});case 75:ie.next=13;break;case 77:if(!ne.isKeyWordPicked("D")){ie.next=83;break}return ie.next=80,ee();case 80:if(ie.sent){ie.next=82;break}return ie.abrupt("return",{v:void 0});case 82:return ie.abrupt("return",0);case 83:if(!ne.isKeyWordPicked("A")){ie.next=89;break}return ie.next=86,te();case 86:if(ie.sent){ie.next=88;break}return ie.abrupt("return",{v:void 0});case 88:return ie.abrupt("return",0);case 89:if(!ne.isKeyWordPicked("T")){ie.next=108;break}return(xe=new Pt).setMessage("<".concat(N?"":"",">")),xe.setKeyWords("[(T)/(N)]"),ie.next=95,xe.go();case 95:if(be=ie.sent,xe.getStatus()!==p.MrxDbgUiPrBaseReturn.kCancel){ie.next=98;break}return ie.abrupt("return",{v:void 0});case 98:if(xe.getStatus()!==p.MrxDbgUiPrBaseReturn.kNone){ie.next=100;break}return ie.abrupt("return",0);case 100:if(be){ie.next=102;break}return ie.abrupt("return",{v:void 0});case 102:if("t"!==be.toLocaleLowerCase()){ie.next=105;break}return N=!0,ie.abrupt("return",0);case 105:if("n"!==be.toLocaleLowerCase()){ie.next=108;break}return N=!1,ie.abrupt("return",0);case 108:if(!ne.isKeyWordPicked("E")){ie.next=127;break}return(_e=new Pt).setMessage("<".concat(I?"":"",">")),_e.setKeyWords("[(D)/(A)]"),ie.next=114,_e.go();case 114:if(Me=ie.sent,_e.getStatus()!==p.MrxDbgUiPrBaseReturn.kCancel){ie.next=117;break}return ie.abrupt("return",{v:void 0});case 117:if(_e.getStatus()!==p.MrxDbgUiPrBaseReturn.kNone){ie.next=119;break}return ie.abrupt("return",0);case 119:if("string"==typeof Me){ie.next=121;break}return ie.abrupt("return",{v:void 0});case 121:if("d"!==Me.toLocaleLowerCase()){ie.next=124;break}return I=!1,ie.abrupt("return",0);case 124:if("a"!==Me.toLocaleLowerCase()){ie.next=127;break}return I=!0,ie.abrupt("return",0);case 127:if(!ne.isKeyWordPicked("M")){ie.next=130;break}return V=!0,ie.abrupt("return",0);case 130:if(ne.getStatus()!==p.MrxDbgUiPrBaseReturn.kCancel){ie.next=132;break}return ie.abrupt("return",{v:void 0});case 132:if(oe){ie.next=134;break}return ie.abrupt("return",0);case 134:if(oe.isValid()){ie.next=136;break}return ie.abrupt("return",0);case 136:if(Ce=ne.pickPoint(),we=oe.getMcDbEntity()){ie.next=140;break}return ie.abrupt("return",0);case 140:if((Se=new bt).AddMcDbEntityTypes("LINE,LWPOLYLINE"),we instanceof Rt&&we.highlight(!0),!(we instanceof Ut)){ie.next=147;break}if(Te=selectLineSegmentFromPolylineByPoint(we,Ce,p.MxFun.viewCoordLong2Cad(2))){ie.next=147;break}return ie.abrupt("return",0);case 147:Ae=!1,ke=function showWarning(t){Ae&&(p.MxFun.acutPrintf(t),Ae=!1)},De=function exit(){Ae=!0,we.highlight(!1)},Oe=function calculateAndApplyChamferBetweenTwoLines(p,h,x,M,k){var I,V,ee=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(p){t.MxCpp.getCurrentMxCAD().drawEntity(p)},te=p,re=h;if(p instanceof Ut&&Te){var ne=Te,ie=ne.start,ae=ne.end;p=new Rt(ie,ae)}if(h instanceof Ut){if(!(V=selectLineSegmentFromPolylineByPoint(h,x,1)))return De();var oe=V,se=oe.start,ce=oe.end;h=new Rt(se,ce)}if(h=h.clone(),p=p.clone(),!h||!p)return De();if(h instanceof Rt&&p instanceof Rt){if(h.startPoint.isEqualTo(p.startPoint)&&h.endPoint.isEqualTo(p.endPoint))return void ke("\n");var ue=h.IntersectWith(p,t.McDb.Intersect.kOnBothOperands),le=ue.isEmpty();if(!le){var pe=ue.at(0);if((p.startPoint.isEqualTo(pe)||p.endPoint.isEqualTo(pe)||h.startPoint.isEqualTo(pe)||h.endPoint.isEqualTo(pe))&&0===M&&0===k)return{apply:function apply(){}}}var he=p.IntersectWith(h,t.McDb.Intersect.kExtendBoth);if(he.isEmpty())return void ke("\n");var fe=he.at(0),de=function isChamferTooLarge(t,p,h,x,I,N){var V=!1;return(V=le?Math.max(h.distanceTo(fe),x.distanceTo(fe))<M&&M>0||Math.max(I.distanceTo(fe),N.distanceTo(fe))<k&&k>0:(t?h.distanceTo(fe):x.distanceTo(fe))<M&&M>0||(p?I.distanceTo(fe):N.distanceTo(fe))<k&&k>0)&&ke("\n"),V};return I=function apply(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:re,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.getHandle()===p.getHandle();if(t instanceof Rt&&p instanceof Rt){var I=isSegmentStartCloserToPoint(t.startPoint,t.endPoint,fe,Ce),ne=isSegmentStartCloserToPoint(p.startPoint,p.endPoint,fe,x);if(de(I,ne,t.startPoint,t.endPoint,p.startPoint,p.endPoint))return;var ie=createChamferedLinesFromSegments(t,p,fe,I,ne,M,k,N);return ie&&ee(ie),!0}var ae=function processPolylineChamferClosure(t,p,x,I,V,te){var re=t.numVerts();if(h||(t.isClosed=!1),V){var ne=V.start,ie=V.end,ae=V.endIndex,oe=V.startIndex,se=V.isClosed,ce=[],ue=function getPointInfo(t,p){var h=t.getBulgeAt(p),x=t.getPointAt(p).val,M=t.getWidthsAt(p);return{point:x,bulge:h,startWidth:M.val1,endWidth:M.val2}},le=isSegmentStartCloserToPoint(ne.clone(),ie.clone(),fe,x);if(p instanceof Rt){if(h)return void ke("\n ");var pe=isSegmentStartCloserToPoint(p.startPoint.clone(),p.endPoint.clone(),fe,I);if(de(le,pe,ne,ie,p.startPoint,p.endPoint))return;var he=p.clone(),me=createChamferedLinesFromSegments(new Rt(ne.clone(),ie.clone()),he,fe,le,pe,M,k,N);if(le){for(var ge=se?t.numVerts():ae,ve=0;ve<ge;ve++)ce.push(ue(t,ve));me?N?(ce.push({point:me.startPoint}),ce.push({point:me.endPoint})):ee(me):ce.push({point:fe}),pe?ce.push({point:he.startPoint.clone()}):ce.push({point:he.endPoint.clone()})}else{var ye=t.numVerts();if(se)ce.push(ue(t,0));else for(var xe=ae;xe<ye;xe++)ce.push(ue(t,xe));me?N?(ce.unshift({point:me.startPoint}),ce.unshift({point:me.endPoint})):ee(me):ce.unshift({point:fe}),pe?ce.unshift({point:p.startPoint.clone()}):ce.unshift({point:p.endPoint.clone()})}}else{if(!(p instanceof Ut&&te))return!1;var be=te.start,_e=te.end,Me=te.startIndex,Ce=te.endIndex,we=te.isClosed,Se=isSegmentStartCloserToPoint(be,_e,fe,I);if(de(le,Se,ne,ie,be,_e))return;var Te=createChamferedLinesFromSegments(new Rt(ne,ie),new Rt(be,_e),fe,le,Se,M,k,N);if(h){var Ae=t.numVerts(),De=p.numVerts(),Oe=Me-oe;if((0===oe||oe===Ae-(se?1:2))&&(0===Me||Me===De-(we?1:2))&&Ae>(se||we?2:4))return Te?N?0===oe||0===Me?(0===oe?(t.setPointAt(0,Te.startPoint),se||we?t.addVertexAt(Te.endPoint):t.setPointAt(Ae-1,Te.endPoint)):(t.setPointAt(0,Te.endPoint),se||we?t.addVertexAt(Te.startPoint):t.setPointAt(Ae-1,Te.startPoint)),t.isClosed=!0):N&&(t.setPointAt(Ae-1,se?Te.endPoint:Te.startPoint),t.addVertexAt(se?Te.startPoint:Te.endPoint)):ee(Te):N&&(t.setPointAt(0,fe),t.removeVertexAt(Ae-1),t.isClosed=!0),!0;if(Math.abs(Oe)>2)return void ke("\n ");p=p.clone()}if(!(p instanceof Ut))return;if(le){for(var Ie=0;Ie<=oe;Ie++)ce.push(ue(t,Ie));if(Te?N?(ce.push({point:Te.startPoint}),ce.push({point:Te.endPoint})):ee(Te):ce.push({point:fe}),Se)for(var Le=Me;Le>=0;Le--)ce.push(ue(p,Le));else if(we)ce.push(ue(p,0));else for(var Ee=p.numVerts(),Re=Ce;Re<Ee;Re++)ce.push(ue(p,Re))}else{var Be=t.numVerts();if(se)ce.push(ue(t,0));else for(var Ne=ae;Ne<Be;Ne++)ce.push(ue(t,Ne));if(Te?N?(ce.unshift({point:Te.startPoint}),ce.unshift({point:Te.endPoint})):ee(Te):ce.unshift({point:fe}),Se)for(var Ge=Me;Ge>=0;Ge--)ce.unshift(ue(p,Ge));else if(we)ce.unshift(ue(p,0));else for(var Fe=p.numVerts(),Ve=Ce;Ve<Fe;Ve++)ce.unshift(ue(p,Ve))}}if(N){for(var Ue=0;Ue<re;Ue++)t.removeVertexAt(0);ce.forEach((function(p){var h=p.point,x=p.bulge,M=p.startWidth,k=p.endWidth;t.addVertexAt(h,x,M,k)})),p.erase()}return!0}};return t instanceof Ut&&Te?ae(t,p,Ce,x,Te,V):!!(p instanceof Ut&&V)&&ae(p,t,x,Ce,V,Te)},{apply:I,line1:p,line2:h}}},ne.setUserDraw((function(t,p){var M=we.clone(),k=Mt.findEntAtPoint(t.x,t.y,t.z,-1,Se);if(!k)return De();if(!k.isValid())return De();var I=k.getMcDbEntity();if(!I)return De();var V=null==I?void 0:I.clone();if(!V)return De();var ee=Oe(M,V,t,Ni?0:h,Ni?0:x,(function(t){p.drawMcDbEntity(t)}))||{},te=ee.line1,re=ee.line2,ne=ee.apply,ie=ne&&ne(M,V,we.getHandle()===I.getHandle());if(te&&re&&ie){M.drawOrder=we.drawOrder+I.drawOrder+102,te.drawOrder=we.drawOrder+I.drawOrder+101,re.drawOrder=we.drawOrder+I.drawOrder+101;var ae=new THREE.Color(Number(we.trueColor.getColorValue(we.layerId))),oe=ae.clone();N&&(darkenColor(oe,.5),p.setColor(oe)),p.drawMcDbEntity(te),p.drawMcDbEntity(re),p.setColor(ae),p.drawMcDbEntity(M)}}));case 152:return ne.setMessage("shift"),ne.setKeyWords("[(D)/(A)/(M)]"),ie.next=157,ne.go();case 157:if(Ie=ie.sent,!ne.isKeyWordPicked("D")){ie.next=164;break}return ie.next=161,ee();case 161:if(ie.sent){ie.next=163;break}return ie.abrupt("return",{v:void 0});case 163:return ie.abrupt("continue",152);case 164:if(!ne.isKeyWordPicked("A")){ie.next=170;break}return ie.next=167,te();case 167:if(ie.sent){ie.next=169;break}return ie.abrupt("return",{v:void 0});case 169:return ie.abrupt("continue",152);case 170:if(!ne.isKeyWordPicked("M")){ie.next=173;break}return V=!0,ie.abrupt("continue",152);case 173:if(ne.getStatus()!==p.MrxDbgUiPrBaseReturn.kCancel){ie.next=175;break}return ie.abrupt("return",{v:void 0});case 175:if(Ie){ie.next=177;break}return ie.abrupt("return",{v:De()});case 177:if(Ie.isValid()){ie.next=179;break}return ie.abrupt("return",{v:De()});case 179:if(Le=Ie.getMcDbEntity()){ie.next=182;break}return ie.abrupt("return",{v:De()});case 182:if(Ee=we,Re=ne.pickPoint(),Be=Ee.clone()){ie.next=191;break}if(!V){ie.next=190;break}return ie.abrupt("continue",152);case 190:return ie.abrupt("return",{v:De()});case 191:if(Ne=Ee.clone()){ie.next=198;break}if(!V){ie.next=197;break}return ie.abrupt("continue",152);case 197:return ie.abrupt("return",{v:De()});case 198:if(!(Ge=Be.IntersectWith(Ne,t.McDb.Intersect.kOnBothOperands)).isEmpty()){ie.next=205;break}if(!V){ie.next=204;break}return ie.abrupt("continue",152);case 204:return ie.abrupt("return",{v:De()});case 205:if(Fe=h,Ve=x,!I){ie.next=219;break}if(Ue=Ge.at(0),"number"==typeof(je=re(new Rt(Ce,Ue),new Rt(Ue,Re),M,k))){ie.next=217;break}if(p.MxFun.acutPrintf("\n"),!V){ie.next=216;break}return ie.abrupt("continue",152);case 216:return ie.abrupt("return",{v:De()});case 217:Fe=M,Ve=je;case 219:if(We=Oe(Ee,Le,Re,Ni?0:Fe,Ni?0:Ve)||{},ze=We.line1,He=We.line2,$e=We.apply,!(ze&&He&&areLinesCollinear(ze,He))){ie.next=223;break}return p.MxFun.acutPrintf(" "),ie.abrupt("return",{v:De()});case 223:if(!$e){ie.next=232;break}if(Ye=$e(),!V||void 0!==Ye){ie.next=229;break}return ie.abrupt("continue",152);case 229:return ie.abrupt("break",240);case 230:ie.next=238;break;case 232:if(t.MxCpp.App.MxCADAssist.MxChamfer(oe.id,Ie.id,Ce.x,Ce.y,Re.x,Re.y,Fe,Ve,N),!V){ie.next=237;break}return ie.abrupt("continue",152);case 237:return ie.abrupt("break",240);case 238:ie.next=152;break;case 240:if(we instanceof Rt&&we.highlight(!1),!V){ie.next=245;break}return ie.abrupt("return",0);case 245:return De(),ie.abrupt("return",1);case 247:case"end":return ie.stop()}}),_loop4)}));case 14:return oe.delegateYield(ne(),"t0",16);case 16:if(0!==(ae=oe.t0)){oe.next=19;break}return oe.abrupt("continue",14);case 19:if(1!==ae){oe.next=21;break}return oe.abrupt("break",25);case 21:if(!ae){oe.next=23;break}return oe.abrupt("return",ae.v);case 23:oe.next=14;break;case 25:case"end":return oe.stop()}}),_callee15)}))),_Mx_Chamfer.apply(this,arguments)}function Mx_Fillet(){return _Mx_Fillet.apply(this,arguments)}function _Mx_Fillet(){return _Mx_Fillet=_asyncToGenerator(ie.mark((function _callee17(){var h,x,M,k,I,N,V,ee;return ie.wrap((function _callee17$(te){for(;;)switch(te.prev=te.next){case 0:h=Number(localStorage.getItem("Mx_Fillet_radius"))||0,x="false"!==localStorage.getItem("Mx_Fillet_isPruning"),M=!1,p.MxFun.acutPrintf("\n:  = ".concat(x?"":"",",  = ").concat(h.toFixed(4))),k=function(){var t=_asyncToGenerator(ie.mark((function _callee16(){var t,x;return ie.wrap((function _callee16$(M){for(;;)switch(M.prev=M.next){case 0:return(t=new At).setDynamicInputType(p.DynamicInputType.kDistanceInput),t.setKeyWords("<".concat(h.toFixed(4),">")),M.next=5,t.go();case 5:if(x=M.sent,t.getStatus()!==p.MrxDbgUiPrBaseReturn.kCancel){M.next=8;break}return M.abrupt("return");case 8:if(t.getStatus()!==p.MrxDbgUiPrBaseReturn.kNone){M.next=10;break}return M.abrupt("return",h);case 10:if("number"==typeof x){M.next=12;break}return M.abrupt("return");case 12:return h=x,localStorage.setItem("Mx_Fillet_radius",h.toString()),M.abrupt("return",h);case 15:case"end":return M.stop()}}),_callee16)})));return function getRadius(){return t.apply(this,arguments)}}(),I=new It,(N=new bt).AddMcDbEntityTypes("LINE,LWPOLYLINE"),V=ie.mark((function _loop5(){var V,ee,te,re,ne,ae,oe,se,ce,ue,le,pe,he,fe,de,me,ge,ve,ye,xe,be,_e,Me;return ie.wrap((function _loop5$(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return I.setDynamicInputType(p.DynamicInputType.kNoInput),I.setFilter(N),I.setMessage(""),I.setKeyWords("[(U)/(P)/(R)/(T)/(M)]"),Ce.next=6,I.go();case 6:if(V=Ce.sent,I.getStatus()!==p.MrxDbgUiPrBaseReturn.kCancel){Ce.next=9;break}return Ce.abrupt("return",{v:void 0});case 9:if(!I.isKeyWordPicked("U")){Ce.next=11;break}return Ce.abrupt("return",0);case 11:if(!I.isKeyWordPicked("P")){Ce.next=24;break}ee=ie.mark((function _loop6(){var N,V,ee,te,re,ne,ae,oe,se,ce,ue,le,pe,he,fe,de,me,ge,ve,ye,xe,be,_e,Me,Ce,we,Se;return ie.wrap((function _loop6$(ie){for(;;)switch(ie.prev=ie.next){case 0:return I.setMessage(""),I.setKeyWords("[(R)]"),(N=new bt).AddMcDbEntityTypes("LWPOLYLINE"),I.setFilter(N),ie.next=7,I.go();case 7:if(V=ie.sent,I.getStatus()!==p.MrxDbgUiPrBaseReturn.kCancel){ie.next=10;break}return ie.abrupt("return",{v:{v:void 0}});case 10:if(!I.isKeyWordPicked("R")){ie.next=17;break}return ie.next=13,k();case 13:if(ie.t0=_typeof$2(ie.sent),"number"===ie.t0){ie.next=16;break}return ie.abrupt("return",{v:{v:void 0}});case 16:return ie.abrupt("return",0);case 17:if(V){ie.next=19;break}return ie.abrupt("return",{v:{v:void 0}});case 19:if(V.isValid()){ie.next=21;break}return ie.abrupt("return",{v:{v:void 0}});case 21:if((ee=V.getMcDbEntity())instanceof Ut){ie.next=24;break}return ie.abrupt("return",{v:{v:void 0}});case 24:te=ee.numVerts(),re=0,ne=0,ae=[],ee.isClosed||te--;case 29:if(!(re<te)){ie.next=82;break}if(re++,ne>te-1&&(ne=0),oe=ee.getPointAt(ne),se=oe.val){ie.next=39;break}if(!M){ie.next=38;break}return ie.abrupt("return",1);case 38:return ie.abrupt("return",{v:{v:void 0}});case 39:if(++ne>te-1&&(ne=0),ce=ee.getPointAt(ne),ue=ce.val){ie.next=48;break}if(!M){ie.next=47;break}return ie.abrupt("return",1);case 47:return ie.abrupt("return",{v:{v:void 0}});case 48:if(++ne>te-1&&(ne=0),le=ee.getPointAt(ne),pe=le.val){ie.next=57;break}if(!M){ie.next=56;break}return ie.abrupt("return",1);case 56:return ie.abrupt("return",{v:{v:void 0}});case 57:if(ne=re,he=createLineSegmentRoundJoin(h,new Rt(se,ue),new Rt(ue,pe),ue,!0,!1,x)){ie.next=61;break}return ie.abrupt("return",{v:{v:void 0}});case 61:if(fe=he.arc,de=he.segmentLine,me=he.bulge,de){ie.next=64;break}return ie.abrupt("return",{v:{v:void 0}});case 64:if(!x){ie.next=78;break}if(ge=ee.getWidthsAt(re),ve=ge.ret,ye=ge.val1,xe=ge.val2,ve){ie.next=74;break}if(!ee.isClosed){ie.next=73;break}if(be=ee.getWidthsAt(0),_e=be.ret,Me=be.val1,Ce=be.val2,_e){ie.next=71;break}return ie.abrupt("continue",29);case 71:ae.push({width:Me,width1:Ce,bulge:me,point:de.startPoint}),ae.unshift({width:Me,width1:Ce,bulge:ee.getBulgeAt(0),point:de.endPoint});case 73:return ie.abrupt("continue",29);case 74:ae.push({width:ye,width1:xe,bulge:me,point:de.startPoint}),ae.push({width:ye,width1:xe,bulge:ee.getBulgeAt(re),point:de.endPoint}),ie.next=80;break;case 78:Bi(fe,ee),t.MxCpp.getCurrentMxCAD().drawEntity(fe);case 80:ie.next=29;break;case 82:if(x){for(we=ee.numVerts(),Se=0;Se<we;Se++)ee.removeVertexAt(0);ae.forEach((function(t){var p=t.point,h=t.bulge,x=t.width,M=t.width1;ee.addVertexAt(p,h,x,M)}))}if(!M){ie.next=87;break}return ie.abrupt("return",0);case 87:return ie.abrupt("return",{v:{v:void 0}});case 88:case"end":return ie.stop()}}),_loop6)}));case 13:return Ce.delegateYield(ee(),"t0",15);case 15:if(0!==(te=Ce.t0)){Ce.next=18;break}return Ce.abrupt("continue",13);case 18:if(1!==te){Ce.next=20;break}return Ce.abrupt("continue",13);case 20:if(!te){Ce.next=22;break}return Ce.abrupt("return",te.v);case 22:Ce.next=13;break;case 24:if(!I.isKeyWordPicked("R")){Ce.next=31;break}return Ce.next=27,k();case 27:if(Ce.t1=_typeof$2(Ce.sent),"number"===Ce.t1){Ce.next=30;break}return Ce.abrupt("return",{v:void 0});case 30:return Ce.abrupt("return",0);case 31:if(!I.isKeyWordPicked("T")){Ce.next=53;break}return(re=new Pt).setDynamicInputType(p.DynamicInputType.kNoInput),re.setMessage("<".concat(x?"":"",">")),re.setKeyWords("[(T)/(N)]"),Ce.next=38,re.go();case 38:if(ne=Ce.sent,re.getStatus()!==p.MrxDbgUiPrBaseReturn.kCancel){Ce.next=41;break}return Ce.abrupt("return",{v:void 0});case 41:if(re.getStatus()!==p.MrxDbgUiPrBaseReturn.kNone){Ce.next=43;break}return Ce.abrupt("return",0);case 43:if("string"==typeof ne){Ce.next=45;break}return Ce.abrupt("return",{v:void 0});case 45:if("t"!==ne.toLocaleLowerCase()){Ce.next=49;break}return x=!0,localStorage.setItem("Mx_Fillet_isPruning","true"),Ce.abrupt("return",0);case 49:if("n"!==ne.toLocaleLowerCase()){Ce.next=53;break}return x=!1,localStorage.setItem("Mx_Fillet_isPruning","false"),Ce.abrupt("return",0);case 53:if(!I.isKeyWordPicked("M")){Ce.next=56;break}return M=!0,Ce.abrupt("return",0);case 56:if(V){Ce.next=58;break}return Ce.abrupt("return",0);case 58:if(V.isValid()){Ce.next=60;break}return Ce.abrupt("return",0);case 60:if(ae=I.pickPoint(),(oe=new bt).AddMcDbEntityTypes("LINE,LWPOLYLINE"),(new It).setFilter(oe),se=V.getMcDbEntity()){Ce.next=68;break}return Ce.abrupt("return",0);case 68:if(se instanceof Rt&&se.highlight(!0),!(se instanceof Ut)){Ce.next=73;break}if(ce=selectLineSegmentFromPolylineByPoint(se,ae,p.MxFun.viewCoordLong2Cad(2))){Ce.next=73;break}return Ce.abrupt("return",0);case 73:(ue=new It).setFilter(oe),le=!1,pe=function showWarning(t){le&&(p.MxFun.acutPrintf(t),le=!1)},he=function exit(){le=!0,se.highlight(!1)},fe=function calculateAndApplyFilletBetweenTwoLines(p,M,k){var I,N,V=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(p){t.MxCpp.getCurrentMxCAD().drawEntity(p)},ee=p,te=M;if(p instanceof Ut&&ce){var re=ce,ne=re.start,ie=re.end;p=new Rt(ne,ie)}if(M instanceof Ut){if(!(N=selectLineSegmentFromPolylineByPoint(M,k,1)))return he();var oe=N,se=oe.start,ue=oe.end;M=new Rt(se,ue)}if(M=M.clone(),p=p.clone(),!M||!p)return he();if(M instanceof Rt&&p instanceof Rt){if(M.startPoint.isEqualTo(p.startPoint)&&M.endPoint.isEqualTo(p.endPoint))return void pe("\n");var le=M.IntersectWith(p,t.McDb.Intersect.kOnBothOperands),fe=le.isEmpty();if(!fe){var de=le.at(0);if((p.startPoint.isEqualTo(de)||p.endPoint.isEqualTo(de)||M.startPoint.isEqualTo(de)||M.endPoint.isEqualTo(de))&&0===h)return{apply:function apply(){}}}var me=p.IntersectWith(M,t.McDb.Intersect.kExtendBoth);if(me.isEmpty())return void pe("\n");var ge=me.at(0),ve=function isChamferTooLarge(t,p,h,x,M,k,I){var N=!1;return(N=fe?Math.max(h.distanceTo(ge),x.distanceTo(ge))<I&&I>0||Math.max(M.distanceTo(ge),k.distanceTo(ge))<I&&I>0:(t?h.distanceTo(ge):x.distanceTo(ge))<I&&I>0||(p?M.distanceTo(ge):k.distanceTo(ge))<I&&I>0)&&pe("\n"),N};return I=function apply(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te,M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.getHandle()===p.getHandle();if(t instanceof Rt&&p instanceof Rt){var I=isSegmentStartCloserToPoint(t.startPoint,t.endPoint,ge,ae),re=isSegmentStartCloserToPoint(p.startPoint,p.endPoint,ge,k),ne=createLineSegmentRoundJoin(h,t,p,ge,I,re,x,Ni);if(!ne)return void pe("\n");var ie=ne.arc,oe=ne.chamferDist;if(ve(I,re,t.startPoint,t.endPoint,p.startPoint,p.endPoint,oe))return;return ie&&V(ie),!0}var se=function processPolylineChamferClosure(t,p,k,I,N,ee){var te=t.numVerts();if(M||(t.isClosed=!1),N){var re=N.start,ne=N.end,ie=N.endIndex,ae=N.startIndex,oe=N.isClosed,se=[],ce=function getPointInfo(t,p){var h=t.getBulgeAt(p),x=t.getPointAt(p).val,M=t.getWidthsAt(p);return{point:x,bulge:h,startWidth:M.val1,endWidth:M.val2}},ue=isSegmentStartCloserToPoint(re.clone(),ne.clone(),ge,k);if(p instanceof Rt){if(M)return void pe("\n ");var le=isSegmentStartCloserToPoint(p.startPoint.clone(),p.endPoint.clone(),ge,I),he=p.clone(),fe=createLineSegmentRoundJoin(h,new Rt(re.clone(),ne.clone()),he,ge,ue,le,x,Ni);if(!fe)return void pe("\n");var de=fe.chamferDist,me=fe.bulge,ye=fe.segmentLine,xe=fe.arc;if(ve(ue,le,re,ne,p.startPoint,p.endPoint,de))return;if(ue){for(var be=oe?t.numVerts():ie,_e=0;_e<be;_e++)se.push(ce(t,_e));ye?x?(se.push({point:ye.startPoint,bulge:me}),se.push({point:ye.endPoint})):V(xe):se.push({point:ge}),le?se.push({point:he.startPoint.clone()}):se.push({point:he.endPoint.clone()})}else{var Me=t.numVerts();if(oe)se.push(ce(t,0));else for(var Ce=ie;Ce<Me;Ce++)se.push(ce(t,Ce));ye?x?(se.unshift({point:ye.startPoint}),se.unshift({point:ye.endPoint,bulge:-me})):V(ye):se.unshift({point:ge}),le?se.unshift({point:p.startPoint.clone()}):se.unshift({point:p.endPoint.clone()})}}else{if(!(p instanceof Ut&&ee))return!1;var we=ee.start,Se=ee.end,Te=ee.startIndex,Ae=ee.endIndex,ke=ee.isClosed,De=isSegmentStartCloserToPoint(we,Se,ge,I),Oe=createLineSegmentRoundJoin(h,new Rt(re,ne),new Rt(we,Se),ge,ue,De,x,Ni);if(!Oe)return void pe("\n");var Ie=Oe.arc,Le=Oe.segmentLine,Ee=Oe.bulge,Re=Oe.chamferDist;if(ve(ue,De,re,ne,we,Se,Re))return;if(M){var Be=t.numVerts(),Ne=p.numVerts(),Ge=Te-ae;if((0===ae||ae===Be-(oe?1:2))&&(0===Te||Te===Ne-(ke?1:2))&&Be>(oe||ke?2:4))return Le?x?0===ae||0===Te?(0===ae?(t.setPointAt(0,Le.startPoint),oe||ke?t.addVertexAt(Le.endPoint,-Ee):(t.setPointAt(Be-1,Le.endPoint),t.setBulgeAt(Be-1,Ee))):(t.setPointAt(0,Le.endPoint),oe||ke?t.addVertexAt(Le.startPoint,Ee):(t.setPointAt(Be-1,Le.startPoint),t.setBulgeAt(Be-1,Ee))),t.isClosed=!0):x&&(t.setPointAt(Be-1,oe?Le.endPoint:Le.startPoint),t.setBulgeAt(Be-1,oe?-Ee:Ee),t.addVertexAt(oe?Le.startPoint:Le.endPoint)):V(Ie):x&&(t.setPointAt(0,ge),t.removeVertexAt(Be-1),t.isClosed=!0),!0;if(Math.abs(Ge)>2)return void pe("\n ");p=p.clone()}if(!(p instanceof Ut))return;if(ue){for(var Fe=0;Fe<=ae;Fe++)se.push(ce(t,Fe));if(Le?x?(se.push({point:Le.startPoint,bulge:Ee}),se.push({point:Le.endPoint})):V(Ie):se.push({point:ge}),De)for(var Ve=Te;Ve>=0;Ve--)se.push(ce(p,Ve));else if(ke)se.push(ce(p,0));else for(var Ue=p.numVerts(),je=Ae;je<Ue;je++)se.push(ce(p,je))}else{var We=t.numVerts();if(oe)se.push(ce(t,0));else for(var ze=ie;ze<We;ze++)se.push(ce(t,ze));if(Le?x?(se.unshift({point:Le.startPoint}),se.unshift({point:Le.endPoint,bulge:-Ee})):V(Ie):se.unshift({point:ge}),De)for(var He=Te;He>=0;He--)se.unshift(ce(p,He));else if(ke)se.unshift(ce(p,0));else for(var $e=p.numVerts(),Ye=Ae;Ye<$e;Ye++)se.unshift(ce(p,Ye))}}if(x){for(var Ke=0;Ke<te;Ke++)t.removeVertexAt(0);se.forEach((function(p){var h=p.point,x=p.bulge,M=p.startWidth,k=p.endWidth;t.addVertexAt(h,x,M,k)})),p.erase()}return!0}};return t instanceof Ut&&ce?se(t,p,ae,k,ce,N):!!(p instanceof Ut&&N)&&se(p,t,k,ae,N,ce)},{apply:I,line1:p,line2:M}}},ue.setUserDraw((function(t,p){var h=se.clone(),M=Mt.findEntAtPoint(t.x,t.y,t.z,-1,oe);if(!M)return he();if(!M.isValid())return he();var k=M.getMcDbEntity();if(!k)return he();var I=null==k?void 0:k.clone();if(!I)return he();var N=fe(h,I,t,(function(t){p.drawMcDbEntity(t)}))||{},V=N.line1,ee=N.line2,te=N.apply,re=te&&te(h,I,se.getHandle()===k.getHandle());if(V&&ee&&re){h.drawOrder=se.drawOrder+k.drawOrder+102,V.drawOrder=se.drawOrder+k.drawOrder+101,ee.drawOrder=se.drawOrder+k.drawOrder+101;var ne=new THREE.Color(Number(se.trueColor.getColorValue(se.layerId))),ie=ne.clone();x&&(darkenColor(ie,.5),p.setColor(ie)),p.drawMcDbEntity(V),p.drawMcDbEntity(ee),p.setColor(ne),p.drawMcDbEntity(h)}}));case 80:return ue.setMessage(""),ue.setKeyWords("[(R)]"),Ce.next=85,ue.go();case 85:if(de=Ce.sent,!ue.isKeyWordPicked("R")){Ce.next=93;break}return Ce.next=89,k();case 89:if(Ce.t2=_typeof$2(Ce.sent),"number"===Ce.t2){Ce.next=92;break}return Ce.abrupt("return",{v:void 0});case 92:return Ce.abrupt("continue",80);case 93:if(de){Ce.next=95;break}return Ce.abrupt("return",{v:he()});case 95:if(de.isValid()){Ce.next=97;break}return Ce.abrupt("return",{v:he()});case 97:if(me=de.getMcDbEntity()){Ce.next=100;break}return Ce.abrupt("return",{v:he()});case 100:if(ge=se,ve=ue.pickPoint(),ye=fe(ge,me,ve)||{},xe=ye.line1,be=ye.line2,_e=ye.apply,!(xe&&be&&areLinesCollinear(xe,be))){Ce.next=106;break}return p.MxFun.acutPrintf(" "),Ce.abrupt("return",{v:he()});case 106:if(!_e){Ce.next=115;break}if(Me=_e(),!M||void 0!==Me){Ce.next=112;break}return Ce.abrupt("continue",80);case 112:return Ce.abrupt("break",123);case 113:Ce.next=121;break;case 115:if(t.MxCpp.App.MxCADAssist.MxFillet(V.id,de.id,ae.x,ae.y,ve.x,ve.y,h,x),!M){Ce.next=120;break}return Ce.abrupt("continue",80);case 120:return Ce.abrupt("break",123);case 121:Ce.next=80;break;case 123:if(he(),!M){Ce.next=128;break}return Ce.abrupt("return",0);case 128:return Ce.abrupt("return",1);case 129:case"end":return Ce.stop()}}),_loop5)}));case 9:return te.delegateYield(V(),"t0",11);case 11:if(0!==(ee=te.t0)){te.next=14;break}return te.abrupt("continue",9);case 14:if(1!==ee){te.next=16;break}return te.abrupt("break",20);case 16:if(!ee){te.next=18;break}return te.abrupt("return",ee.v);case 18:te.next=9;break;case 20:case"end":return te.stop()}}),_callee17)}))),_Mx_Fillet.apply(this,arguments)}window.addEventListener("keydown",(function onKeydown(t){Ni=t.shiftKey})),window.addEventListener("keyup",(function onKeyup(t){Ni=t.shiftKey}));var Gi=function(){var t=_asyncToGenerator(ie.mark((function _callee(){var t,h,x,M;return ie.wrap((function _callee$(k){for(;;)switch(k.prev=k.next){case 0:t=[];case 1:return(h=new Tt).setMessage(0===t.length?"":""),h.setKeyWords(0===t.length?"":"[(U)]"),h.setUserDraw((function(p,h){var x=new Ut;t.forEach((function(t){x.addVertexAt(t)})),x.addVertexAt(p),h.drawMcDbEntity(x)})),k.next=8,h.go();case 8:if(x=k.sent,!h.isKeyWordPicked("U")){k.next=13;break}return(M=t.pop())&&h.setLastInputPoint(M),k.abrupt("continue",1);case 13:if(h.getStatus()!==p.MrxDbgUiPrBaseReturn.kCancel){k.next=15;break}return k.abrupt("return",!1);case 15:if(h.getStatus()!==p.MrxDbgUiPrBaseReturn.kNone){k.next=17;break}return k.abrupt("break",22);case 17:if(x){k.next=19;break}return k.abrupt("return",t);case 19:t.push(x),k.next=1;break;case 22:return k.abrupt("return",t);case 23:case"end":return k.stop()}}),_callee)})));return function getHurdleSelectionPoints(){return t.apply(this,arguments)}}();function Mx_Trim(){return _Mx_Trim.apply(this,arguments)}function _Mx_Trim(){return _Mx_Trim=_asyncToGenerator(ie.mark((function _callee18(){var h,x,M,k,I,N,V,ee,te,re,ne,ae,oe,se,ce;return ie.wrap((function _callee18$(ue){for(;;)switch(ue.prev=ue.next){case 0:if(h=!1,x=!1,M=[],(k=new bt).AddMcDbEntityTypes("LINE,LWPOLYLINE,ELLIPSE,ARC,CIRCLE,SPLINE,XLINE"),0!==(V=Mt.getCurrentSelect(k)).length){ue.next=16;break}return ue.next=10,Mt.userSelect("<>",k,(function(t,p){I=p,N=t}));case 10:if(V=ue.sent,I.getStatus()!==p.MrxDbgUiPrBaseReturn.kCancel){ue.next=13;break}return ue.abrupt("return");case 13:if(I.getStatus()===p.MrxDbgUiPrBaseReturn.kNone&&0===V.length&&(N.allSelect(k),N.forEach((function(t){V.push(t)}))),0!==V.length){ue.next=16;break}return ue.abrupt("return");case 16:if((ee=new un).copyFormAryId(V),(te=new t.MxCpp.mxcadassemblyimp.MxDrawTrimAssist).Init(ee.imp)){ue.next=21;break}return ue.abrupt("return");case 21:if((re=new t.MxCpp.mxcadassemblyimp.MxDrawExtendAssist).Init(ee.imp)){ue.next=24;break}return ue.abrupt("return");case 24:ne=!1,ae=function onKeydown2(t){ne="Shift"===t.key},window.addEventListener("keydown",ae),oe=function onkeyup(){return ne=!1},window.addEventListener("keyup",oe),se=ie.mark((function _loop7(){var I,N,ae,oe,se,ce,ue,le,pe,he,fe,de,me,ge,ve,ye,xe;return ie.wrap((function _loop7$(ie){for(;;)switch(ie.prev=ie.next){case 0:return(I=new wt).isWhileSelect=!1,I.isSelectHighlight=!1,ie.next=5,I.userSelect(" Shift ",k,(function(t){(N=t).setKeyWords("[(F)/(C)/(E)/(R)".concat(M.length>0?"/(U)":"","]"))}));case 5:if(ie.sent){ie.next=7;break}return ie.abrupt("return",0);case 7:if(!N.isKeyWordPicked("F")){ie.next=18;break}return ie.next=10,Gi();case 10:if(ae=ie.sent){ie.next=13;break}return ie.abrupt("return",0);case 13:return oe=new Ut,ae.forEach((function(t){oe.addVertexAt(t)})),M.push([V,V.map((function(t){return t.clone()}))]),V.forEach((function(p){var h=p.getMcDbEntity();if(h instanceof Et){var x=h.IntersectWith(oe,t.McDb.Intersect.kOnBothOperands);x.isEmpty()||x.forEach((function(t){ee.copyFormAryId([p]),ne?re.DoExtend(ee.imp,t.x,t.y,t.x,t.y):te.DoTrim(ee.imp,t.x,t.y,t.x,t.y)}))}})),ie.abrupt("return",1);case 18:if(!N.isKeyWordPicked("C")){ie.next=21;break}return h=!0,ie.abrupt("return",1);case 21:if(!N.isKeyWordPicked("E")){ie.next=39;break}return(se=new Pt).setMessage("<".concat(x?"":"",">")),se.setKeyWords("[(E)/(N)]"),ie.next=27,se.go();case 27:if(ce=se.keyWordPicked(),se.getStatus()!==p.MrxDbgUiPrBaseReturn.kCancel){ie.next=30;break}return ie.abrupt("return",{v:void 0});case 30:if(se.getStatus()!==p.MrxDbgUiPrBaseReturn.kNone){ie.next=32;break}return ie.abrupt("return",1);case 32:if(se.getStatus()!==p.MrxDbgUiPrBaseReturn.kKeyWord){ie.next=39;break}if("E"!==ce){ie.next=36;break}return x=!0,ie.abrupt("return",1);case 36:if("N"!==ce){ie.next=39;break}return x=!1,ie.abrupt("return",1);case 39:if(!N.isKeyWordPicked("R")){ie.next=46;break}return ie.next=42,Mt.userSelect("",k);case 42:return ue=ie.sent,M.push([ue,ue.map((function(t){return t.clone()}))]),ue.forEach((function(t){t.erase()})),ie.abrupt("return",1);case 46:if(!N.isKeyWordPicked("U")){ie.next=52;break}return le=M.pop()||[],pe=_slicedToArray$1(le,2),he=pe[0],fe=pe[1],null==he||he.forEach((function(t){t.erase()})),de=t.MxCpp.getCurrentMxCAD(),null==fe||fe.forEach((function(t){t instanceof Lt&&de.drawEntity(t)})),ie.abrupt("return",1);case 52:if(0!=(me=I.getIds()).length){ie.next=55;break}return ie.abrupt("return",1);case 55:if(ge=I.getSelectPoint(),!h){ie.next=67;break}return ve=ge.pt1,ye=ge.pt2,(xe=new Ut).addVertexAt(ve),xe.addVertexAt(new nn(ve.x,ye.y)),xe.addVertexAt(ye),xe.addVertexAt(new nn(ye.x,ve.y)),xe.isClosed=!0,M.push([V,V.map((function(t){return t.clone()}))]),V.forEach((function(p){var h=p.getMcDbEntity();if(h instanceof Et){var x=h.IntersectWith(xe,t.McDb.Intersect.kOnBothOperands);x.isEmpty()||x.forEach((function(t){ee.copyFormAryId([p]),ne?re.DoExtend(ee.imp,t.x,t.y,t.x,t.y):te.DoTrim(ee.imp,t.x,t.y,t.x,t.y)}))}})),ie.abrupt("return",1);case 67:M.push([me,V.map((function(t){return t.clone()}))]),ee.copyFormAryId(me),ne?re.DoExtend(ee.imp,ge.pt1.x,ge.pt1.y,ge.pt2.x,ge.pt2.y):te.DoTrim(ee.imp,ge.pt1.x,ge.pt1.y,ge.pt2.x,ge.pt2.y);case 70:case"end":return ie.stop()}}),_loop7)}));case 30:return ue.delegateYield(se(),"t0",32);case 32:if(0!==(ce=ue.t0)){ue.next=35;break}return ue.abrupt("break",41);case 35:if(1!==ce){ue.next=37;break}return ue.abrupt("continue",30);case 37:if(!ce){ue.next=39;break}return ue.abrupt("return",ce.v);case 39:ue.next=30;break;case 41:window.removeEventListener("keydown",ae),window.removeEventListener("keyup",oe),te.UnInit(),re.UnInit();case 45:case"end":return ue.stop()}}),_callee18)}))),_Mx_Trim.apply(this,arguments)}function Mx_Extend(){return _Mx_Extend.apply(this,arguments)}function _Mx_Extend(){return _Mx_Extend=_asyncToGenerator(ie.mark((function _callee19(){var h,x,M,k,I,N,V,ee,te,re,ne,ae,oe,se,ce;return ie.wrap((function _callee19$(ue){for(;;)switch(ue.prev=ue.next){case 0:if(h=new bt,x=!1,I=!1,h.AddMcDbEntityTypes("LINE,LWPOLYLINE,ARC"),0!==(N=Mt.getCurrentSelect(h)).length){ue.next=15;break}return ue.next=9,Mt.userSelect("<>",h,(function(t,p){M=p,k=t}));case 9:if(N=ue.sent,M.getStatus()!==p.MrxDbgUiPrBaseReturn.kCancel){ue.next=12;break}return ue.abrupt("return");case 12:if(M.getStatus()===p.MrxDbgUiPrBaseReturn.kNone&&0===N.length&&(k.allSelect(h),k.forEach((function(t){N.push(t)}))),0!==N.length){ue.next=15;break}return ue.abrupt("return");case 15:if((V=new un).copyFormAryId(N),(ee=new t.MxCpp.mxcadassemblyimp.MxDrawExtendAssist).Init(V.imp)){ue.next=20;break}return ue.abrupt("return");case 20:if((te=new t.MxCpp.mxcadassemblyimp.MxDrawTrimAssist).Init(V.imp)){ue.next=23;break}return ue.abrupt("return");case 23:re=[],ne=!1,ae=function onKeydown2(t){ne="Shift"===t.key},window.addEventListener("keydown",ae),oe=function onkeyup(){return ne=!1},window.addEventListener("keyup",oe),se=ie.mark((function _loop8(){var M,k,ae,oe,se,ce,ue,le,pe,he,fe,de,me,ge,ve,ye;return ie.wrap((function _loop8$(ie){for(;;)switch(ie.prev=ie.next){case 0:return(M=new wt).isWhileSelect=!1,M.isSelectHighlight=!1,ie.next=5,M.userSelect(" Shift ",h,(function(t){(k=t).setKeyWords("[(F)/(C)/(E)".concat(re.length>0?"/(U)":"","]"))}));case 5:if(ie.sent){ie.next=7;break}return ie.abrupt("return",0);case 7:if(!k.isKeyWordPicked("F")){ie.next=18;break}return ie.next=10,Gi();case 10:if(ae=ie.sent){ie.next=13;break}return ie.abrupt("return",0);case 13:return oe=new Ut,ae.forEach((function(t){oe.addVertexAt(t)})),re.push([N,N.map((function(t){return t.clone()}))]),N.forEach((function(p){var h=p.getMcDbEntity();if(h instanceof Et){var x=h.IntersectWith(oe,t.McDb.Intersect.kOnBothOperands);x.isEmpty()||x.forEach((function(t){V.copyFormAryId([p]),ne?te.DoTrim(V.imp,t.x,t.y,t.x,t.y):ee.DoExtend(V.imp,t.x,t.y,t.x,t.y)}))}})),ie.abrupt("return",1);case 18:if(!k.isKeyWordPicked("C")){ie.next=21;break}return x=!0,ie.abrupt("return",1);case 21:if(!k.isKeyWordPicked("E")){ie.next=39;break}return(se=new Pt).setMessage("<".concat(I?"":"",">")),se.setKeyWords("[(E)/(N)]"),ie.next=27,se.go();case 27:if(ce=se.keyWordPicked(),se.getStatus()!==p.MrxDbgUiPrBaseReturn.kCancel){ie.next=30;break}return ie.abrupt("return",{v:void 0});case 30:if(se.getStatus()!==p.MrxDbgUiPrBaseReturn.kNone){ie.next=32;break}return ie.abrupt("return",1);case 32:if(se.getStatus()!==p.MrxDbgUiPrBaseReturn.kKeyWord){ie.next=39;break}if("E"!==ce){ie.next=36;break}return I=!0,ie.abrupt("return",1);case 36:if("N"!==ce){ie.next=39;break}return I=!1,ie.abrupt("return",1);case 39:if(!k.isKeyWordPicked("U")){ie.next=46;break}return ue=re.pop()||[],le=_slicedToArray$1(ue,2),pe=le[0],he=le[1],null==pe||pe.forEach((function(t){t.erase()})),fe=t.MxCpp.getCurrentMxCAD(),null==he||he.forEach((function(t){t instanceof Lt&&fe.drawEntity(t)})),ie.abrupt("return",1);case 46:if(0!=(de=M.getIds()).length){ie.next=49;break}return ie.abrupt("return",1);case 49:if(me=M.getSelectPoint(),!x){ie.next=61;break}return ge=me.pt1,ve=me.pt2,(ye=new Ut).addVertexAt(ge),ye.addVertexAt(new nn(ge.x,ve.y)),ye.addVertexAt(ve),ye.addVertexAt(new nn(ve.x,ge.y)),ye.isClosed=!0,re.push([N,N.map((function(t){return t.clone()}))]),N.forEach((function(p){var h=p.getMcDbEntity();if(h instanceof Et){var x=h.IntersectWith(ye,t.McDb.Intersect.kOnBothOperands);x.isEmpty()||x.forEach((function(t){V.copyFormAryId([p]),ne?te.DoTrim(V.imp,t.x,t.y,t.x,t.y):ee.DoExtend(V.imp,t.x,t.y,t.x,t.y)}))}})),ie.abrupt("return",1);case 61:re.push([de,N.map((function(t){return t.clone()}))]),V.copyFormAryId(de),ne?te.DoTrim(V.imp,me.pt1.x,me.pt1.y,me.pt2.x,me.pt2.y):ee.DoExtend(V.imp,me.pt1.x,me.pt1.y,me.pt2.x,me.pt2.y);case 64:case"end":return ie.stop()}}),_loop8)}));case 30:return ue.delegateYield(se(),"t0",32);case 32:if(0!==(ce=ue.t0)){ue.next=35;break}return ue.abrupt("break",41);case 35:if(1!==ce){ue.next=37;break}return ue.abrupt("continue",30);case 37:if(!ce){ue.next=39;break}return ue.abrupt("return",ce.v);case 39:ue.next=30;break;case 41:window.removeEventListener("keydown",ae),window.removeEventListener("keyup",oe),te.UnInit(),ee.UnInit();case 45:case"end":return ue.stop()}}),_callee19)}))),_Mx_Extend.apply(this,arguments)}function Mx_Explode(){return _Mx_Explode.apply(this,arguments)}function _Mx_Explode(){return(_Mx_Explode=_asyncToGenerator(ie.mark((function _callee20(){var p,h,x;return ie.wrap((function _callee20$(M){for(;;)switch(M.prev=M.next){case 0:return(p=new bt).AddMcDbEntityTypes("INSERT,MTEXT,ROTATEDDIMENSION,ALIGNEDDIMENSION,DIMENSION,LWPOLYLINE,CUSTOMENTITY"),M.next=4,Mt.userSelect("",p);case 4:if(0!=(h=M.sent).length){M.next=7;break}return M.abrupt("return");case 7:(x=new un).copyFormAryId(h),t.MxCpp.App.MxCADAssist.MxExplode(x.imp);case 10:case"end":return M.stop()}}),_callee20)})))).apply(this,arguments)}function Mx_Join(){return _Mx_Join.apply(this,arguments)}function _Mx_Join(){return(_Mx_Join=_asyncToGenerator(ie.mark((function _callee21(){var p,h,x;return ie.wrap((function _callee21$(M){for(;;)switch(M.prev=M.next){case 0:return(p=new bt).AddMcDbEntityTypes("LWPOLYLINE,ARC,LINE"),M.next=4,Mt.userSelect("",p);case 4:if(0!=(h=M.sent).length){M.next=7;break}return M.abrupt("return");case 7:(x=new un).copyFormAryId(h),t.MxCpp.App.MxCADAssist.MxJoin(x.imp);case 10:case"end":return M.stop()}}),_callee21)})))).apply(this,arguments)}function Mx_Break(){return _Mx_Break.apply(this,arguments)}function _Mx_Break(){return(_Mx_Break=_asyncToGenerator(ie.mark((function _callee22(){var h,x,M,k,I,N,V;return ie.wrap((function _callee22$(ee){for(;;)switch(ee.prev=ee.next){case 0:return(h=new bt).AddMcDbEntityTypes("LWPOLYLINE,ARC,LINE,CIRCLE"),(x=new It).setFilter(h),x.setMessage(""),ee.next=7,x.go();case 7:if((M=ee.sent).isValid()){ee.next=10;break}return ee.abrupt("return");case 10:if(k=M.getMcDbCurve()){ee.next=13;break}return ee.abrupt("return");case 13:I=x.pickPoint(),k.highlight(!0),N=ie.mark((function _loop9(){var h,x,M,N,V,ee,te,re,ne,ae,oe,se,ce,ue,le,pe;return ie.wrap((function _loop9$(ie){for(;;)switch(ie.prev=ie.next){case 0:return(h=new Tt).setMessage("\n"),h.setKeyWords("[(F)/(D)/(M)/(I)]"),h.setUserDraw((function(t,p){var h=null==k?void 0:k.clone();if(h&&h instanceof Et){var x=[];x.push(I),x.push(t);var M=h.splitCurves(x);M.empty()||M.forEach((function(t,h){h%2==0&&p.drawMcDbEntity(t)}))}})),ie.next=6,h.go();case 6:if(x=ie.sent,!h.isKeyWordPicked("F")){ie.next=17;break}return h.setMessage(""),h.setKeyWords(""),ie.next=12,h.go();case 12:if(M=ie.sent){ie.next=15;break}return ie.abrupt("return",{v:void 0});case 15:return I=M,ie.abrupt("return",0);case 17:if(N=!1,!h.isKeyWordPicked("D")){ie.next=33;break}return(V=new At).setMessage(""),V.setKeyWords(""),ie.next=24,V.go();case 24:if("number"==typeof(ee=ie.sent)){ie.next=27;break}return ie.abrupt("return",{v:void 0});case 27:if(I=k.getStartPoint().val,te=k.getPointAtDist(ee),re=te.val,te.ret){ie.next=31;break}return ie.abrupt("return",{v:p.MxFun.acutPrintf("\n")});case 31:x=re,N=!0;case 33:if(!h.isKeyWordPicked("M")){ie.next=40;break}if(I=k.getStartPoint().val,ne=k.getPointAtDist(k.getLength().val/2),ae=ne.val,ne.ret){ie.next=38;break}return ie.abrupt("return",{v:void 0});case 38:x=ae,N=!0;case 40:if(!h.isKeyWordPicked("I")){ie.next=56;break}return ie.next=43,Mt.userSelect("");case 43:if(oe=ie.sent,se=k.clone(),ce=[],oe.forEach((function(p){if(se instanceof Et){var h=p.clone();if(h instanceof Et){var x=se.IntersectWith(h,t.McDb.Intersect.kOnBothOperands);x.isEmpty()||x.forEach((function(t){return ce.push(t)}))}}})),0!==ce.length){ie.next=49;break}return ie.abrupt("return",{v:p.MxFun.acutPrintf("\n")});case 49:if(!(ue=k.splitCurves(ce)).empty()){ie.next=53;break}return k.highlight(!1),ie.abrupt("return",{v:void 0});case 53:return ue.forEach((function(p){p instanceof Lt&&(k&&Bi(p,k),t.MxCpp.getCurrentMxCAD().drawEntity(p))})),k.erase(),ie.abrupt("return",1);case 56:if(x){ie.next=59;break}return k.highlight(!1),ie.abrupt("return",{v:void 0});case 59:if((le=[]).push(I),le.push(x),!(pe=k.splitCurves(le)).empty()){ie.next=66;break}return k.highlight(!1),ie.abrupt("return",{v:void 0});case 66:return pe.forEach((function(p,h){p instanceof Lt&&(k&&Bi(p,k),(h%2==0||N)&&t.MxCpp.getCurrentMxCAD().drawEntity(p))})),k.erase(),ie.abrupt("return",1);case 69:case"end":return ie.stop()}}),_loop9)}));case 16:return ee.delegateYield(N(),"t0",18);case 18:if(0!==(V=ee.t0)){ee.next=21;break}return ee.abrupt("continue",16);case 21:if(1!==V){ee.next=23;break}return ee.abrupt("break",27);case 23:if(!V){ee.next=25;break}return ee.abrupt("return",V.v);case 25:ee.next=16;break;case 27:case"end":return ee.stop()}}),_callee22)})))).apply(this,arguments)}function Mx_DrawOrderTopmost(){return _Mx_DrawOrderTopmost.apply(this,arguments)}function _Mx_DrawOrderTopmost(){return(_Mx_DrawOrderTopmost=_asyncToGenerator(ie.mark((function _callee23(){var p,h,x;return ie.wrap((function _callee23$(M){for(;;)switch(M.prev=M.next){case 0:return p=new wt,M.next=3,p.userSelect("\n");case 3:if(M.sent){M.next=5;break}return M.abrupt("return");case 5:h=t.MxCpp.getCurrentDatabase().currentSpace.getMinMaxDrawOrder(),x=h.maxDrawOrder+1,p.forEach((function(t){var p=t.getMcDbEntity();p&&(p.drawOrder=x)}));case 8:case"end":return M.stop()}}),_callee23)})))).apply(this,arguments)}function Mx_DrawOrderButtomost(){return _Mx_DrawOrderButtomost.apply(this,arguments)}function _Mx_DrawOrderButtomost(){return(_Mx_DrawOrderButtomost=_asyncToGenerator(ie.mark((function _callee24(){var p,h,x;return ie.wrap((function _callee24$(M){for(;;)switch(M.prev=M.next){case 0:return p=new wt,M.next=3,p.userSelect("\n");case 3:if(M.sent){M.next=5;break}return M.abrupt("return");case 5:h=t.MxCpp.getCurrentDatabase().currentSpace.getMinMaxDrawOrder(),x=h.minDrawOrder-1,p.forEach((function(t){var p=t.getMcDbEntity();p&&(p.drawOrder=x)}));case 8:case"end":return M.stop()}}),_callee24)})))).apply(this,arguments)}function Mx_DrawOrderTop(){return _Mx_DrawOrderTop.apply(this,arguments)}function _Mx_DrawOrderTop(){return(_Mx_DrawOrderTop=_asyncToGenerator(ie.mark((function _callee25(){var t,p,h,x,M;return ie.wrap((function _callee25$(k){for(;;)switch(k.prev=k.next){case 0:return t=new wt,k.next=3,t.userSelect("\n");case 3:if(k.sent){k.next=5;break}return k.abrupt("return");case 5:if(!t.isNull()){k.next=7;break}return k.abrupt("return");case 7:return(p=new It).setMessage(""),k.next=11,p.go();case 11:if(!(h=k.sent).isNull()){k.next=14;break}return k.abrupt("return");case 14:if(x=h.getMcDbEntity()){k.next=17;break}return k.abrupt("return");case 17:M=x.drawOrder+1,t.forEach((function(t){var p=t.getMcDbEntity();p&&(p.drawOrder=M)}));case 19:case"end":return k.stop()}}),_callee25)})))).apply(this,arguments)}function Mx_DrawOrderButtom(){return _Mx_DrawOrderButtom.apply(this,arguments)}function _Mx_DrawOrderButtom(){return(_Mx_DrawOrderButtom=_asyncToGenerator(ie.mark((function _callee26(){var t,p,h,x,M;return ie.wrap((function _callee26$(k){for(;;)switch(k.prev=k.next){case 0:return t=new wt,k.next=3,t.userSelect("\n");case 3:if(k.sent){k.next=5;break}return k.abrupt("return");case 5:if(!t.isNull()){k.next=7;break}return k.abrupt("return");case 7:return(p=new It).setMessage(""),k.next=11,p.go();case 11:if(!(h=k.sent).isNull()){k.next=14;break}return k.abrupt("return");case 14:if(x=h.getMcDbEntity()){k.next=17;break}return k.abrupt("return");case 17:M=x.drawOrder-1,t.forEach((function(t){var p=t.getMcDbEntity();p&&(p.drawOrder=M)}));case 19:case"end":return k.stop()}}),_callee26)})))).apply(this,arguments)}var Fi="mx_clip_file_data",Vi=1;function openClipboardDatabase(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vi;return new Promise((function(p,h){var x=indexedDB.open("mx_clipboard",t);x.onerror=function(t){h(new Error("Error opening database: "+t))},x.onupgradeneeded=function(t){var p=t.target.result;p.objectStoreNames.contains(Fi)||p.createObjectStore(Fi)},x.onsuccess=function(t){var h=t.target.result;p(h)}}))}var Ui="_mxcad_clipboard_file.mxweb";function Mx_CopyClipboardImp(t){return _Mx_CopyClipboardImp.apply(this,arguments)}function _Mx_CopyClipboardImp(){return(_Mx_CopyClipboardImp=_asyncToGenerator(ie.mark((function _callee27(h){var x,M,k,I,N,V,ee,te,re;return ie.wrap((function _callee27$(ne){for(;;)switch(ne.prev=ne.next){case 0:if(0!=(x=Mt.getCurrentSelect(null,!0,!1)).length){ne.next=4;break}return p.MxFun.acutPrintf("\n "),ne.abrupt("return");case 4:if(M=t.MxCpp.getCurrentDatabase(),k=new Er,M.wblock(k,x)){ne.next=9;break}return p.MxFun.acutPrintf("\n "),ne.abrupt("return");case 9:if(k.saveAs(Ui)){ne.next=12;break}return p.MxFun.acutPrintf("\n "),ne.abrupt("return");case 12:return h&&x.forEach((function(t){t.erase()})),I=window.MX_WASM_FS,N=I.readFile(Ui),I.unlink(Ui),ne.next=18,openClipboardDatabase();case 18:V=ne.sent,ee=V.transaction(Fi,"readwrite"),te=ee.objectStore(Fi),(re=te.put(N,"data")).onsuccess=function(t){},re.onerror=function(t){};case 24:case"end":return ne.stop()}}),_callee27)})))).apply(this,arguments)}function Mx_CopyClipboard(){Mx_CopyClipboardImp(!1)}function Mx_CutClipboard(){Mx_CopyClipboardImp(!0)}function Mx_PasteClipboard(){return _Mx_PasteClipboard.apply(this,arguments)}function _Mx_PasteClipboard(){return _Mx_PasteClipboard=_asyncToGenerator(ie.mark((function _callee29(){var h,x,M,k,I,N,V,ee,te,re;return ie.wrap((function _callee29$(ne){for(;;)switch(ne.prev=ne.next){case 0:return x=function _getClipboardDataToFi(t,p){return new Promise(function(){var h=_asyncToGenerator(ie.mark((function _callee28(h){var x,M,k,I;return ie.wrap((function _callee28$(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,openClipboardDatabase();case 2:x=N.sent,M=x.transaction(t,"readonly"),k=M.objectStore(t),(I=k.get("data")).onerror=function(){h(void 0)},I.onsuccess=function(){var t=I.result;window.MX_WASM_FS.writeFile(p,t),h(!0)};case 8:case"end":return N.stop()}}),_callee28)})));return function(t){return h.apply(this,arguments)}}())},h=t.MxCpp.getCurrentMxCAD(),ne.next=4,x(Fi,Ui);case 4:if(ne.sent){ne.next=7;break}return p.MxFun.acutPrintf("\n "),ne.abrupt("return");case 7:if((M=new Er).readFile(Ui)){ne.next=11;break}return p.MxFun.acutPrintf("\n "),ne.abrupt("return");case 11:if(window.MX_WASM_FS.unlink(Ui),k=t.MxCpp.getCurrentDatabase(),!(I=k.insert(M,"")).isNull()){ne.next=17;break}return ne.abrupt("return");case 17:return(N=I.getMcDbBlockTableRecord())&&(V=N.getBoundingBox()).ret&&(N.origin=V.minPt.addvec(V.maxPt.sub(V.minPt).mult(.5))),(ee=new jt).blockTableRecordId=I,(te=new Tt).setMessage(""),te.setUserDraw((function(t,p){ee.position=t,p.drawMcDbEntity(ee)})),ne.next=26,te.go();case 26:if(re=ne.sent){ne.next=29;break}return ne.abrupt("return");case 29:if(ee.position=re,h.drawEntity(ee).isValid){ne.next=34;break}return ne.abrupt("return");case 34:case"end":return ne.stop()}}),_callee29)}))),_Mx_PasteClipboard.apply(this,arguments)}p.MxFun.on("init",(function(){p.MxFun.addCommand("Mx_Erase",Mx_Erase),p.MxFun.addCommand("Mx_Copy",Mx_Copy),p.MxFun.addCommand("Mx_Move",Mx_Move),p.MxFun.addCommand("Mx_Rotate",Mx_Rotate),p.MxFun.addCommand("Mx_Scale",Mx_Scale),p.MxFun.addCommand("Mx_WindowZoom",Mx_WindowZoom),p.MxFun.addCommand("Mx_ZoomE",Mx_ZoomE),p.MxFun.addCommand("Mx_Plan90CW",Mx_Plan90CW),p.MxFun.addCommand("Mx_Offset",Mx_Offset),p.MxFun.addCommand("Mx_Regen",Mx_Regen),p.MxFun.addCommand("Mx_Mirror",Mx_Mirror),p.MxFun.addCommand("Mx_Chamfer",Mx_Chamfer),p.MxFun.addCommand("Mx_Fillet",Mx_Fillet),p.MxFun.addCommand("Mx_Trim",Mx_Trim),p.MxFun.addCommand("Mx_Extend",Mx_Extend),p.MxFun.addCommand("Mx_Explode",Mx_Explode),p.MxFun.addCommand("Mx_Join",Mx_Join),p.MxFun.addCommand("Mx_Break",Mx_Break),p.MxFun.addCommand("Mx_DrawOrderTopmost",Mx_DrawOrderTopmost),p.MxFun.addCommand("Mx_DrawOrderButtomost",Mx_DrawOrderButtomost),p.MxFun.addCommand("Mx_DrawOrderTop",Mx_DrawOrderTop),p.MxFun.addCommand("Mx_DrawOrderButtom",Mx_DrawOrderButtom),p.MxFun.addCommand("Mx_CopyClipboard",Mx_CopyClipboard),p.MxFun.addCommand("Mx_PasteClipboard",Mx_PasteClipboard),p.MxFun.addCommand("Mx_CutClipboard",Mx_CutClipboard)}));var ji=function getQuadrant(t,p){return[p.x>=t.x&&p.y>=t.y,p.x<t.x&&p.y>=t.y,p.x<t.x&&p.y<t.y,p.x>=t.x&&p.y<t.y]};function calculateRoundedRectangleVertices(t,p,h){if(0===p&&0===h)return t;var x=_slicedToArray$1(t,4),M=x[0],k=x[1],I=x[2],N=x[3],V=M.distanceTo(N),ee=M.distanceTo(k),te=_slicedToArray$1(ji(M,I),4);te[0];var re=te[1],ne=te[2],ie=te[3],ae=re||ne?-p:p,oe=ne||ie?-h:h;return V-2*Math.abs(ae)<=0||ee-2*Math.abs(oe)<=0?t:[new nn(M.x+ae,M.y,M.z),new nn(M.x,M.y+oe,M.z),new nn(k.x,k.y-oe,k.z),new nn(k.x+ae,k.y,k.z),new nn(I.x-ae,I.y,I.z),new nn(I.x,k.y-oe,I.z),new nn(N.x,N.y+oe,N.z),new nn(N.x-ae,N.y,N.z)]}var Wi,zi,Hi,$i,Yi,Ki,Xi,qi,Zi,Ji,Qi,ea,ta,ra,na,ia,oa,sa,ca,ua,la,pa,ha,fa,da,ma,ga,va,ya,xa,ba,_a,Ma,Ca,wa,Sa,Ta,Aa,ka,Da=function rotatePoint(t,p,h){var x=Math.cos(h),M=Math.sin(h),k=p.x-t.x,I=p.y-t.y,N=k*x-I*M+t.x,V=k*M+I*x+t.y,ee=p.z;return new nn(N,V,ee)},Pa=function getRectPoints(t,p){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,x=new nn((t.x+p.x)/2,(t.y+p.y)/2,(t.z+p.z)/2),M=new nn(t.x,p.y,t.z),k=new nn(p.x,t.y,p.z);return[t,Da(x,M,h),p,Da(x,k,h)]},Oa=function(){var p=_asyncToGenerator(ie.mark((function _callee3(){var p,h,x,M,k,I,N,V,ee,te,re,ne,ae,oe;return ie.wrap((function _callee3$(se){for(;;)switch(se.prev=se.next){case 0:p=new Tt,h=0,x=0,M=0,k=0,I=0,N=0,V=200,ee=0,te=0,re=0,ne="default",ae=ie.mark((function _loop(){var ae,oe,se,ce,ue,le,pe;return ie.wrap((function _loop$(he){for(;;)switch(he.prev=he.next){case 0:return ae=function(){var t=_asyncToGenerator(ie.mark((function _callee(t,p){var h;return ie.wrap((function _callee$(x){for(;;)switch(x.prev=x.next){case 0:return(h=new At).setMessage(_ML_String(t,p)),x.next=4,h.go();case 4:if(x.sent){x.next=7;break}throw"error getLength";case 7:return x.abrupt("return",h.value());case 8:case"end":return x.stop()}}),_callee)})));return function getLength(p,h){return t.apply(this,arguments)}}(),p.setUserDraw((function(){})),p.clearLastInputPoint(),p.setMessage("\n"),p.setKeyWords("[(C)/(E)/(F)/(T)/(W)]"),he.next=7,p.go();case 7:if(oe=he.sent,ce=new Ut,he.prev=9,!p.isKeyWordPicked("C")){he.next=19;break}return he.next=13,ae("ID_ARX_RECTANG_CHAMFEr1LENGTH","\n:");case 13:return h=he.sent,he.next=16,ae("ID_ARX_RECTANG_CHAMFEr2LENGTH","\n");case 16:return x=he.sent,ne="chamfer",he.abrupt("return",0);case 19:if(!p.isKeyWordPicked("E")){he.next=24;break}return he.next=22,ae("ID_ARX_RECTANG_ELEVATION","\n");case 22:return M=he.sent,he.abrupt("return",0);case 24:if(!p.isKeyWordPicked("F")){he.next=30;break}return he.next=27,ae("ID_ARX_RECTANG_RADIUS","\n");case 27:return k=he.sent,ne="angleRounded",he.abrupt("return",0);case 30:if(!p.isKeyWordPicked("T")){he.next=35;break}return he.next=33,ae("ID_ARX_RECTANG_THICKNESS","\n");case 33:return I=he.sent,he.abrupt("return",0);case 35:if(!p.isKeyWordPicked("W")){he.next=40;break}return he.next=38,ae("ID_ARX_RECTANG_WIDTH","\n");case 38:return N=he.sent,he.abrupt("return",0);case 40:he.next=45;break;case 42:return he.prev=42,he.t0=he.catch(9),he.abrupt("return",1);case 45:if(oe){he.next=47;break}return he.abrupt("return",{v:void 0});case 47:return ue=function getRect(t,p){var M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;ce=new Ut,t.z=p.z=I;var V=Pa(t,p,M),ee=new nn((t.x+p.x)/2,(t.y+p.y)/2,(t.z+p.z)/2),te=V;if("chamfer"===ne&&(te=calculateRoundedRectangleVertices(Pa(t,p),h,x)),"angleRounded"===ne&&0!==k){te=calculateRoundedRectangleVertices(Pa(t,p),k,k);var re=_slicedToArray$1(ji(t,p),4);re[0];var ie=re[1],ae=re[2],oe=re[3];if(8===te.length){var ue=function addArc(t,p,h){var x=CMxDrawPolylineDragArcDraw_CalcArcBulge(t,p,new sn(h));ce.addVertexAt(t,x),ce.addVertexAt(p,0)},le=new sn(-1,0),pe=new sn(0,1),he=new sn(1,0),fe=new sn(0,-1);oe&&(pe.y=-1,he.x=1,fe.y=1),ie&&(le.x=1,pe.y=1,he.x=-1,fe.y=-1),ae&&(le.x=1,pe.y=-1,he.x=-1,fe.y=1),ue(te[0],te[1],le),ue(te[2],te[3],pe),ue(te[4],te[5],he),ue(te[6],te[7],fe)}else te.forEach((function(t){ce.addVertexAt(t,0)}))}else te.forEach((function(t){ce.addVertexAt(t,0,N,N)}));return"chamfer"!==ne&&"angleRounded"!==ne||ce.rotate(ee,M),ce.isClosed=!0,ce.constantWidth=N,se=p,ce},le=function userDrawPoint1Rect(t,p){oe&&(ce=ue(oe,t,re),p.drawMcDbEntity(ce))},p.setUserDraw(le),pe=function(){var h=_asyncToGenerator(ie.mark((function _callee2(){var h,x,k,N,ne,he,fe,de,me;return ie.wrap((function _callee2$(ie){for(;;)switch(ie.prev=ie.next){case 0:return p.setMessage("\n"),p.setKeyWords("[(A)/(D)/(R)]"),ie.next=4,p.go();case 4:if(h=ie.sent,x=function userDrawPoint2Rect(t,p){var x=_slicedToArray$1(ji(oe,t),4),M=x[0],k=x[1],N=x[2],V=x[3];M&&(h=new nn(oe.x+ee,oe.y+te,I)),k&&(h=new nn(oe.x-ee,oe.y+te,I)),N&&(h=new nn(oe.x-ee,oe.y-te,I)),V&&(h=new nn(oe.x+ee,oe.y-te,I)),h&&(ce=ue(oe,h,re),p.drawMcDbEntity(ce))},!p.isKeyWordPicked("A")){ie.next=40;break}return p.setUserDraw((function(){})),(k=new Dt).setMessage("<"+V+">"),ie.next=12,k.go();case 12:if(N=ie.sent){ie.next=15;break}return ie.abrupt("return");case 15:return V=N,(ne=new Pt).setMessage(""),ne.setKeyWords("[(L)/(W)]"),ie.next=21,ne.go();case 21:if(null!==(he=ie.sent)){ie.next=24;break}return ie.abrupt("return");case 24:if("w"!==he){ie.next=31;break}return ie.next=27,ae("ID_ARX_RECTANG_AREA_WIDTH","");case 27:ee=ie.sent,te=V/ee,ie.next=35;break;case 31:return ie.next=33,ae("ID_ARX_RECTANG_AREA_LENGTH","");case 33:te=ie.sent,ee=V/te;case 35:h=new nn(oe.x+ee,oe.y+te,I),ce=ue(oe,h,re),t.MxCpp.getCurrentMxCAD().drawEntity(ce,!0),ie.next=98;break;case 40:if(!p.isKeyWordPicked("D")){ie.next=62;break}return ie.prev=41,ie.next=44,ae("ID_ARX_RECTANG_AREA_WIDTH","");case 44:return ee=ie.sent,ie.next=47,ae("ID_ARX_RECTANG_AREA_LENGTH","");case 47:te=ie.sent,ie.next=53;break;case 50:return ie.prev=50,ie.t0=ie.catch(41),ie.abrupt("return");case 53:return p.clearLastInputPoint(),p.setUserDraw(x),ie.next=57,pe();case 57:if(void 0!==ie.sent){ie.next=60;break}return ie.abrupt("return");case 60:ie.next=98;break;case 62:if(!p.isKeyWordPicked("R")){ie.next=97;break}return p.setMessage("\n"),p.setKeyWords("[(P)]"),p.setUserDraw((function(t,p){re=angleTo(t.x,t.y,oe.x,oe.y),(ce=ue(oe,se)).rotate(oe,re),p.drawMcDbEntity(ce)})),ie.next=68,p.go();case 68:if(fe=ie.sent,!p.isKeyWordPicked("P")){ie.next=87;break}return p.clearLastInputPoint(),p.setUserDraw((function(){})),p.setMessage("\n"),ie.next=75,p.go();case 75:if(de=ie.sent){ie.next=78;break}return ie.abrupt("return");case 78:return p.setUserDraw((function(t,p){p.drawLine(t.toVector3(),de.toVector3())})),ie.next=81,p.go();case 81:if(me=ie.sent){ie.next=84;break}return ie.abrupt("return");case 84:re=angleTo(de.x,de.y,me.x,me.y),ie.next=89;break;case 87:if(fe){ie.next=89;break}return ie.abrupt("return");case 89:return p.setUserDraw(le),ie.next=92,pe();case 92:if(void 0!==ie.sent){ie.next=95;break}return ie.abrupt("return");case 95:ie.next=98;break;case 97:h&&t.MxCpp.getCurrentMxCAD().drawEntity(ce,!0);case 98:ce.setxDataDouble("BG",M);case 99:case"end":return ie.stop()}}),_callee2,null,[[41,50]])})));return function run(){return h.apply(this,arguments)}}(),he.next=53,pe();case 53:if(void 0!==he.sent){he.next=56;break}return he.abrupt("return",1);case 56:case"end":return he.stop()}}),_loop,null,[[9,42]])}));case 13:return se.delegateYield(ae(),"t0",15);case 15:if(0!==(oe=se.t0)){se.next=18;break}return se.abrupt("continue",13);case 18:if(1!==oe){se.next=20;break}return se.abrupt("break",24);case 20:if(!oe){se.next=22;break}return se.abrupt("return",oe.v);case 22:se.next=13;break;case 24:case"end":return se.stop()}}),_callee3)})));return function drawRectang(){return p.apply(this,arguments)}}();p.MxFun.on("init",(function(){p.MxFun.addCommand("Mx_Rectang",Oa)})),t.MdGe=void 0,Wi=t.MdGe||(t.MdGe={}),(zi=Wi.MxShapeEnum||(Wi.MxShapeEnum={}))[zi.Enum_COMPOUND=0]="Enum_COMPOUND",zi[zi.Enum_COMPSOLID=1]="Enum_COMPSOLID",zi[zi.Enum_SOLID=2]="Enum_SOLID",zi[zi.Enum_SHELL=3]="Enum_SHELL",zi[zi.Enum_FACE=4]="Enum_FACE",zi[zi.Enum_WIRE=5]="Enum_WIRE",zi[zi.Enum_EDGE=6]="Enum_EDGE",zi[zi.Enum_VERTEX=7]="Enum_VERTEX",zi[zi.Enum_SHAPE=8]="Enum_SHAPE",(Hi=Wi.MxHorizontalTextAlignment||(Wi.MxHorizontalTextAlignment={}))[Hi.HTA_LEFT=0]="HTA_LEFT",Hi[Hi.HTA_CENTER=1]="HTA_CENTER",Hi[Hi.HTA_RIGHT=2]="HTA_RIGHT",($i=Wi.MxVerticalTextAlignment||(Wi.MxVerticalTextAlignment={}))[$i.CVTA_BOTTOM=0]="CVTA_BOTTOM",$i[$i.CVTA_CENTER=1]="CVTA_CENTER",$i[$i.CVTA_TOP=2]="CVTA_TOP",$i[$i.CVTA_TOPFIRSTLINE=3]="CVTA_TOPFIRSTLINE",(Yi=Wi.MxFontAspect||(Wi.MxFontAspect={}))[Yi.FA_UNDEFINED=-1]="FA_UNDEFINED",Yi[Yi.FA_Regular=0]="FA_Regular",Yi[Yi.FA_Bold=1]="FA_Bold",Yi[Yi.FA_Italic=2]="FA_Italic",Yi[Yi.FA_BoldItalic=3]="FA_BoldItalic",(Ki=Wi.MxTypeOfDisplayText||(Wi.MxTypeOfDisplayText={}))[Ki.TODT_NORMAL=0]="TODT_NORMAL",Ki[Ki.TODT_SUBTITLE=1]="TODT_SUBTITLE",Ki[Ki.TODT_DEKALE=2]="TODT_DEKALE",Ki[Ki.TODT_BLEND=3]="TODT_BLEND",Ki[Ki.TODT_DIMENSION=4]="TODT_DIMENSION",Ki[Ki.TODT_SHADOW=5]="TODT_SHADOW",(Xi=Wi.MxCF3dFilletShapeEnum||(Wi.MxCF3dFilletShapeEnum={}))[Xi.Enum_Rational=0]="Enum_Rational",Xi[Xi.Enum_QuasiAngular=1]="Enum_QuasiAngular",Xi[Xi.Enum_Polynomial=2]="Enum_Polynomial",(qi=Wi.MxCFDSChamfMode||(Wi.MxCFDSChamfMode={}))[qi.Enum_ClassicChamfer=0]="Enum_ClassicChamfer",qi[qi.Enum_ConstThroatChamfer=1]="Enum_ConstThroatChamfer",qi[qi.Enum_ConstThroatWithPenetrationChamfer=2]="Enum_ConstThroatWithPenetrationChamfer",(Zi=Wi.MxGFTrihedron||(Wi.MxGFTrihedron={}))[Zi.GF_IsCorrectedFrenet=0]="GF_IsCorrectedFrenet",Zi[Zi.GF_IsFixed=1]="GF_IsFixed",Zi[Zi.GF_IsFrenet=2]="GF_IsFrenet",Zi[Zi.GF_IsConstantNormal=3]="GF_IsConstantNormal",Zi[Zi.GF_IsDarboux=4]="GF_IsDarboux",Zi[Zi.GF_IsGuideAC=5]="GF_IsGuideAC",Zi[Zi.GF_IsGuidePlan=6]="GF_IsGuidePlan",Zi[Zi.GF_IsGuideACWithContact=7]="GF_IsGuideACWithContact",Zi[Zi.GF_IsGuidePlanWithContact=8]="GF_IsGuidePlanWithContact",Zi[Zi.GF_IsDiscreteTrihedron=9]="GF_IsDiscreteTrihedron",(Ji=Wi.MxGAShapeEnum||(Wi.MxGAShapeEnum={}))[Ji.GA_C0=0]="GA_C0",Ji[Ji.GA_G1=1]="GA_G1",Ji[Ji.GA_C1=2]="GA_C1",Ji[Ji.GA_G2=3]="GA_G2",Ji[Ji.GA_C2=4]="GA_C2",Ji[Ji.GA_C3=5]="GA_C3",Ji[Ji.GA_CN=6]="GA_CN",(Qi=Wi.MxOffsetModeEnum||(Wi.MxOffsetModeEnum={}))[Qi.Offset_Skin=0]="Offset_Skin",Qi[Qi.Offset_Pipe=1]="Offset_Pipe",Qi[Qi.Offset_RectoVerso=2]="Offset_RectoVerso",(ea=Wi.MxGAJoinTypeEnum||(Wi.MxGAJoinTypeEnum={}))[ea.GA_Arc=0]="GA_Arc",ea[ea.GA_Tangent=1]="GA_Tangent",ea[ea.GA_Intersection=2]="GA_Intersection",(ta=Wi.MxNameOfMaterial||(Wi.MxNameOfMaterial={}))[ta.Material_NOM_Brass=0]="Material_NOM_Brass",ta[ta.Material_NOM_Bronze=1]="Material_NOM_Bronze",ta[ta.Material_NOM_Copper=2]="Material_NOM_Copper",ta[ta.Material_NOM_Gold=3]="Material_NOM_Gold",ta[ta.Material_NOM_Pewter=4]="Material_NOM_Pewter",ta[ta.Material_NOM_Plastered=5]="Material_NOM_Plastered",ta[ta.Material_NOM_Plastified=6]="Material_NOM_Plastified",ta[ta.Material_NOM_Silver=7]="Material_NOM_Silver",ta[ta.Material_NOM_Steel=8]="Material_NOM_Steel",ta[ta.Material_NOM_Stone=9]="Material_NOM_Stone",ta[ta.Material_NOM_ShinyPlastified=10]="Material_NOM_ShinyPlastified",ta[ta.Material_NOM_Satin=11]="Material_NOM_Satin",ta[ta.Material_NOM_Metalized=12]="Material_NOM_Metalized",ta[ta.Material_NOM_Ionized=13]="Material_NOM_Ionized",ta[ta.Material_NOM_Chrome=14]="Material_NOM_Chrome",ta[ta.Material_NOM_Aluminum=15]="Material_NOM_Aluminum",ta[ta.Material_NOM_Obsidian=16]="Material_NOM_Obsidian",ta[ta.Material_NOM_Neon=17]="Material_NOM_Neon",ta[ta.Material_NOM_Jade=18]="Material_NOM_Jade",ta[ta.Material_NOM_Charcoal=19]="Material_NOM_Charcoal",ta[ta.Material_NOM_Water=20]="Material_NOM_Water",ta[ta.Material_NOM_Glass=21]="Material_NOM_Glass",ta[ta.Material_NOM_Diamond=22]="Material_NOM_Diamond",ta[ta.Material_NOM_Transparent=23]="Material_NOM_Transparent",ta[ta.Material_NOM_DEFAULT=24]="Material_NOM_DEFAULT",ta[ta.Material_NOM_UserDefined=25]="Material_NOM_UserDefined",(ra=Wi.MxTypeOfMaterial||(Wi.MxTypeOfMaterial={}))[ra.Material_TOM_ASPECT=0]="Material_TOM_ASPECT",ra[ra.Material_TOM_PHYSIC=1]="Material_TOM_PHYSIC",(na=Wi.MxTypeOfReflection||(Wi.MxTypeOfReflection={}))[na.Reflection_TOR_AMBIENT=0]="Reflection_TOR_AMBIENT",na[na.Reflection_TOR_DIFFUSE=1]="Reflection_TOR_DIFFUSE",na[na.Reflection_TOR_SPECULAR=2]="Reflection_TOR_SPECULAR",na[na.Reflection_TOR_EMISSION=3]="Reflection_TOR_EMISSION",(ia=Wi.MxNameOfColor||(Wi.MxNameOfColor={}))[ia.Color_NOC_BLACK=0]="Color_NOC_BLACK",ia[ia.Color_NOC_MATRABLUE=1]="Color_NOC_MATRABLUE",ia[ia.Color_NOC_MATRAGRAY=2]="Color_NOC_MATRAGRAY",ia[ia.Color_NOC_ALICEBLUE=3]="Color_NOC_ALICEBLUE",ia[ia.Color_NOC_ANTIQUEWHITE=4]="Color_NOC_ANTIQUEWHITE",ia[ia.Color_NOC_ANTIQUEWHITE1=5]="Color_NOC_ANTIQUEWHITE1",ia[ia.Color_NOC_ANTIQUEWHITE2=6]="Color_NOC_ANTIQUEWHITE2",ia[ia.Color_NOC_ANTIQUEWHITE3=7]="Color_NOC_ANTIQUEWHITE3",ia[ia.Color_NOC_ANTIQUEWHITE4=8]="Color_NOC_ANTIQUEWHITE4",ia[ia.Color_NOC_AQUAMARINE1=9]="Color_NOC_AQUAMARINE1",ia[ia.Color_NOC_AQUAMARINE2=10]="Color_NOC_AQUAMARINE2",ia[ia.Color_NOC_AQUAMARINE4=11]="Color_NOC_AQUAMARINE4",ia[ia.Color_NOC_AZURE=12]="Color_NOC_AZURE",ia[ia.Color_NOC_AZURE2=13]="Color_NOC_AZURE2",ia[ia.Color_NOC_AZURE3=14]="Color_NOC_AZURE3",ia[ia.Color_NOC_AZURE4=15]="Color_NOC_AZURE4",ia[ia.Color_NOC_BEIGE=16]="Color_NOC_BEIGE",ia[ia.Color_NOC_BISQUE=17]="Color_NOC_BISQUE",ia[ia.Color_NOC_BISQUE2=18]="Color_NOC_BISQUE2",ia[ia.Color_NOC_BISQUE3=19]="Color_NOC_BISQUE3",ia[ia.Color_NOC_BISQUE4=20]="Color_NOC_BISQUE4",ia[ia.Color_NOC_BLANCHEDALMOND=21]="Color_NOC_BLANCHEDALMOND",ia[ia.Color_NOC_BLUE=22]="Color_NOC_BLUE",ia[ia.Color_NOC_BLUE1=22]="Color_NOC_BLUE1",ia[ia.Color_NOC_BLUE2=23]="Color_NOC_BLUE2",ia[ia.Color_NOC_BLUE3=24]="Color_NOC_BLUE3",ia[ia.Color_NOC_BLUE4=25]="Color_NOC_BLUE4",ia[ia.Color_NOC_BLUEVIOLET=26]="Color_NOC_BLUEVIOLET",ia[ia.Color_NOC_BROWN=27]="Color_NOC_BROWN",ia[ia.Color_NOC_BROWN1=28]="Color_NOC_BROWN1",ia[ia.Color_NOC_BROWN2=29]="Color_NOC_BROWN2",ia[ia.Color_NOC_BROWN3=30]="Color_NOC_BROWN3",ia[ia.Color_NOC_BROWN4=31]="Color_NOC_BROWN4",ia[ia.Color_NOC_BURLYWOOD=32]="Color_NOC_BURLYWOOD",ia[ia.Color_NOC_BURLYWOOD1=33]="Color_NOC_BURLYWOOD1",ia[ia.Color_NOC_BURLYWOOD2=34]="Color_NOC_BURLYWOOD2",ia[ia.Color_NOC_BURLYWOOD3=35]="Color_NOC_BURLYWOOD3",ia[ia.Color_NOC_BURLYWOOD4=36]="Color_NOC_BURLYWOOD4",ia[ia.Color_NOC_CADETBLUE=37]="Color_NOC_CADETBLUE",ia[ia.Color_NOC_CADETBLUE1=38]="Color_NOC_CADETBLUE1",ia[ia.Color_NOC_CADETBLUE2=39]="Color_NOC_CADETBLUE2",ia[ia.Color_NOC_CADETBLUE3=40]="Color_NOC_CADETBLUE3",ia[ia.Color_NOC_CADETBLUE4=41]="Color_NOC_CADETBLUE4",ia[ia.Color_NOC_CHARTREUSE=42]="Color_NOC_CHARTREUSE",ia[ia.Color_NOC_CHARTREUSE1=42]="Color_NOC_CHARTREUSE1",ia[ia.Color_NOC_CHARTREUSE2=43]="Color_NOC_CHARTREUSE2",ia[ia.Color_NOC_CHARTREUSE3=44]="Color_NOC_CHARTREUSE3",ia[ia.Color_NOC_CHARTREUSE4=45]="Color_NOC_CHARTREUSE4",ia[ia.Color_NOC_CHOCOLATE=46]="Color_NOC_CHOCOLATE",ia[ia.Color_NOC_CHOCOLATE1=47]="Color_NOC_CHOCOLATE1",ia[ia.Color_NOC_CHOCOLATE2=48]="Color_NOC_CHOCOLATE2",ia[ia.Color_NOC_CHOCOLATE3=49]="Color_NOC_CHOCOLATE3",ia[ia.Color_NOC_CHOCOLATE4=50]="Color_NOC_CHOCOLATE4",ia[ia.Color_NOC_CORAL=51]="Color_NOC_CORAL",ia[ia.Color_NOC_CORAL1=52]="Color_NOC_CORAL1",ia[ia.Color_NOC_CORAL2=53]="Color_NOC_CORAL2",ia[ia.Color_NOC_CORAL3=54]="Color_NOC_CORAL3",ia[ia.Color_NOC_CORAL4=55]="Color_NOC_CORAL4",ia[ia.Color_NOC_CORNFLOWERBLUE=56]="Color_NOC_CORNFLOWERBLUE",ia[ia.Color_NOC_CORNSILK1=57]="Color_NOC_CORNSILK1",ia[ia.Color_NOC_CORNSILK2=58]="Color_NOC_CORNSILK2",ia[ia.Color_NOC_CORNSILK3=59]="Color_NOC_CORNSILK3",ia[ia.Color_NOC_CORNSILK4=60]="Color_NOC_CORNSILK4",ia[ia.Color_NOC_CYAN=61]="Color_NOC_CYAN",ia[ia.Color_NOC_CYAN1=61]="Color_NOC_CYAN1",ia[ia.Color_NOC_CYAN2=62]="Color_NOC_CYAN2",ia[ia.Color_NOC_CYAN3=63]="Color_NOC_CYAN3",ia[ia.Color_NOC_CYAN4=64]="Color_NOC_CYAN4",ia[ia.Color_NOC_DARKGOLDENROD=65]="Color_NOC_DARKGOLDENROD",ia[ia.Color_NOC_DARKGOLDENROD1=66]="Color_NOC_DARKGOLDENROD1",ia[ia.Color_NOC_DARKGOLDENROD2=67]="Color_NOC_DARKGOLDENROD2",ia[ia.Color_NOC_DARKGOLDENROD3=68]="Color_NOC_DARKGOLDENROD3",ia[ia.Color_NOC_DARKGOLDENROD4=69]="Color_NOC_DARKGOLDENROD4",ia[ia.Color_NOC_DARKGREEN=70]="Color_NOC_DARKGREEN",ia[ia.Color_NOC_DARKKHAKI=71]="Color_NOC_DARKKHAKI",ia[ia.Color_NOC_DARKOLIVEGREEN=72]="Color_NOC_DARKOLIVEGREEN",ia[ia.Color_NOC_DARKOLIVEGREEN1=73]="Color_NOC_DARKOLIVEGREEN1",ia[ia.Color_NOC_DARKOLIVEGREEN2=74]="Color_NOC_DARKOLIVEGREEN2",ia[ia.Color_NOC_DARKOLIVEGREEN3=75]="Color_NOC_DARKOLIVEGREEN3",ia[ia.Color_NOC_DARKOLIVEGREEN4=76]="Color_NOC_DARKOLIVEGREEN4",ia[ia.Color_NOC_DARKORANGE=77]="Color_NOC_DARKORANGE",ia[ia.Color_NOC_DARKORANGE1=78]="Color_NOC_DARKORANGE1",ia[ia.Color_NOC_DARKORANGE2=79]="Color_NOC_DARKORANGE2",ia[ia.Color_NOC_DARKORANGE3=80]="Color_NOC_DARKORANGE3",ia[ia.Color_NOC_DARKORANGE4=81]="Color_NOC_DARKORANGE4",ia[ia.Color_NOC_DARKORCHID=82]="Color_NOC_DARKORCHID",ia[ia.Color_NOC_DARKORCHID1=83]="Color_NOC_DARKORCHID1",ia[ia.Color_NOC_DARKORCHID2=84]="Color_NOC_DARKORCHID2",ia[ia.Color_NOC_DARKORCHID3=85]="Color_NOC_DARKORCHID3",ia[ia.Color_NOC_DARKORCHID4=86]="Color_NOC_DARKORCHID4",ia[ia.Color_NOC_DARKSALMON=87]="Color_NOC_DARKSALMON",ia[ia.Color_NOC_DARKSEAGREEN=88]="Color_NOC_DARKSEAGREEN",ia[ia.Color_NOC_DARKSEAGREEN1=89]="Color_NOC_DARKSEAGREEN1",ia[ia.Color_NOC_DARKSEAGREEN2=90]="Color_NOC_DARKSEAGREEN2",ia[ia.Color_NOC_DARKSEAGREEN3=91]="Color_NOC_DARKSEAGREEN3",ia[ia.Color_NOC_DARKSEAGREEN4=92]="Color_NOC_DARKSEAGREEN4",ia[ia.Color_NOC_DARKSLATEBLUE=93]="Color_NOC_DARKSLATEBLUE",ia[ia.Color_NOC_DARKSLATEGRAY1=94]="Color_NOC_DARKSLATEGRAY1",ia[ia.Color_NOC_DARKSLATEGRAY2=95]="Color_NOC_DARKSLATEGRAY2",ia[ia.Color_NOC_DARKSLATEGRAY3=96]="Color_NOC_DARKSLATEGRAY3",ia[ia.Color_NOC_DARKSLATEGRAY4=97]="Color_NOC_DARKSLATEGRAY4",ia[ia.Color_NOC_DARKSLATEGRAY=98]="Color_NOC_DARKSLATEGRAY",ia[ia.Color_NOC_DARKTURQUOISE=99]="Color_NOC_DARKTURQUOISE",ia[ia.Color_NOC_DARKVIOLET=100]="Color_NOC_DARKVIOLET",ia[ia.Color_NOC_DEEPPINK=101]="Color_NOC_DEEPPINK",ia[ia.Color_NOC_DEEPPINK2=102]="Color_NOC_DEEPPINK2",ia[ia.Color_NOC_DEEPPINK3=103]="Color_NOC_DEEPPINK3",ia[ia.Color_NOC_DEEPPINK4=104]="Color_NOC_DEEPPINK4",ia[ia.Color_NOC_DEEPSKYBLUE1=105]="Color_NOC_DEEPSKYBLUE1",ia[ia.Color_NOC_DEEPSKYBLUE2=106]="Color_NOC_DEEPSKYBLUE2",ia[ia.Color_NOC_DEEPSKYBLUE3=107]="Color_NOC_DEEPSKYBLUE3",ia[ia.Color_NOC_DEEPSKYBLUE4=108]="Color_NOC_DEEPSKYBLUE4",ia[ia.Color_NOC_DODGERBLUE1=109]="Color_NOC_DODGERBLUE1",ia[ia.Color_NOC_DODGERBLUE2=110]="Color_NOC_DODGERBLUE2",ia[ia.Color_NOC_DODGERBLUE3=111]="Color_NOC_DODGERBLUE3",ia[ia.Color_NOC_DODGERBLUE4=112]="Color_NOC_DODGERBLUE4",ia[ia.Color_NOC_FIREBRICK=113]="Color_NOC_FIREBRICK",ia[ia.Color_NOC_FIREBRICK1=114]="Color_NOC_FIREBRICK1",ia[ia.Color_NOC_FIREBRICK2=115]="Color_NOC_FIREBRICK2",ia[ia.Color_NOC_FIREBRICK3=116]="Color_NOC_FIREBRICK3",ia[ia.Color_NOC_FIREBRICK4=117]="Color_NOC_FIREBRICK4",ia[ia.Color_NOC_FLORALWHITE=118]="Color_NOC_FLORALWHITE",ia[ia.Color_NOC_FORESTGREEN=119]="Color_NOC_FORESTGREEN",ia[ia.Color_NOC_GAINSBORO=120]="Color_NOC_GAINSBORO",ia[ia.Color_NOC_GHOSTWHITE=121]="Color_NOC_GHOSTWHITE",ia[ia.Color_NOC_GOLD=122]="Color_NOC_GOLD",ia[ia.Color_NOC_GOLD1=122]="Color_NOC_GOLD1",ia[ia.Color_NOC_GOLD2=123]="Color_NOC_GOLD2",ia[ia.Color_NOC_GOLD3=124]="Color_NOC_GOLD3",ia[ia.Color_NOC_GOLD4=125]="Color_NOC_GOLD4",ia[ia.Color_NOC_GOLDENROD=126]="Color_NOC_GOLDENROD",ia[ia.Color_NOC_GOLDENROD1=127]="Color_NOC_GOLDENROD1",ia[ia.Color_NOC_GOLDENROD2=128]="Color_NOC_GOLDENROD2",ia[ia.Color_NOC_GOLDENROD3=129]="Color_NOC_GOLDENROD3",ia[ia.Color_NOC_GOLDENROD4=130]="Color_NOC_GOLDENROD4",ia[ia.Color_NOC_GRAY=131]="Color_NOC_GRAY",ia[ia.Color_NOC_GRAY0=132]="Color_NOC_GRAY0",ia[ia.Color_NOC_GRAY1=133]="Color_NOC_GRAY1",ia[ia.Color_NOC_GRAY2=134]="Color_NOC_GRAY2",ia[ia.Color_NOC_GRAY3=135]="Color_NOC_GRAY3",ia[ia.Color_NOC_GRAY4=136]="Color_NOC_GRAY4",ia[ia.Color_NOC_GRAY5=137]="Color_NOC_GRAY5",ia[ia.Color_NOC_GRAY6=138]="Color_NOC_GRAY6",ia[ia.Color_NOC_GRAY7=139]="Color_NOC_GRAY7",ia[ia.Color_NOC_GRAY8=140]="Color_NOC_GRAY8",ia[ia.Color_NOC_GRAY9=141]="Color_NOC_GRAY9",ia[ia.Color_NOC_GRAY10=142]="Color_NOC_GRAY10",ia[ia.Color_NOC_GRAY11=143]="Color_NOC_GRAY11",ia[ia.Color_NOC_GRAY12=144]="Color_NOC_GRAY12",ia[ia.Color_NOC_GRAY13=145]="Color_NOC_GRAY13",ia[ia.Color_NOC_GRAY14=146]="Color_NOC_GRAY14",ia[ia.Color_NOC_GRAY15=147]="Color_NOC_GRAY15",ia[ia.Color_NOC_GRAY16=148]="Color_NOC_GRAY16",ia[ia.Color_NOC_GRAY17=149]="Color_NOC_GRAY17",ia[ia.Color_NOC_GRAY18=150]="Color_NOC_GRAY18",ia[ia.Color_NOC_GRAY19=151]="Color_NOC_GRAY19",ia[ia.Color_NOC_GRAY20=152]="Color_NOC_GRAY20",ia[ia.Color_NOC_GRAY21=153]="Color_NOC_GRAY21",ia[ia.Color_NOC_GRAY22=154]="Color_NOC_GRAY22",ia[ia.Color_NOC_GRAY23=155]="Color_NOC_GRAY23",ia[ia.Color_NOC_GRAY24=156]="Color_NOC_GRAY24",ia[ia.Color_NOC_GRAY25=157]="Color_NOC_GRAY25",ia[ia.Color_NOC_GRAY26=158]="Color_NOC_GRAY26",ia[ia.Color_NOC_GRAY27=159]="Color_NOC_GRAY27",ia[ia.Color_NOC_GRAY28=160]="Color_NOC_GRAY28",ia[ia.Color_NOC_GRAY29=161]="Color_NOC_GRAY29",ia[ia.Color_NOC_GRAY30=162]="Color_NOC_GRAY30",ia[ia.Color_NOC_GRAY31=163]="Color_NOC_GRAY31",ia[ia.Color_NOC_GRAY32=164]="Color_NOC_GRAY32",ia[ia.Color_NOC_GRAY33=165]="Color_NOC_GRAY33",ia[ia.Color_NOC_GRAY34=166]="Color_NOC_GRAY34",ia[ia.Color_NOC_GRAY35=167]="Color_NOC_GRAY35",ia[ia.Color_NOC_GRAY36=168]="Color_NOC_GRAY36",ia[ia.Color_NOC_GRAY37=169]="Color_NOC_GRAY37",ia[ia.Color_NOC_GRAY38=170]="Color_NOC_GRAY38",ia[ia.Color_NOC_GRAY39=171]="Color_NOC_GRAY39",ia[ia.Color_NOC_GRAY40=172]="Color_NOC_GRAY40",ia[ia.Color_NOC_GRAY41=173]="Color_NOC_GRAY41",ia[ia.Color_NOC_GRAY42=174]="Color_NOC_GRAY42",ia[ia.Color_NOC_GRAY43=175]="Color_NOC_GRAY43",ia[ia.Color_NOC_GRAY44=176]="Color_NOC_GRAY44",ia[ia.Color_NOC_GRAY45=177]="Color_NOC_GRAY45",ia[ia.Color_NOC_GRAY46=178]="Color_NOC_GRAY46",ia[ia.Color_NOC_GRAY47=179]="Color_NOC_GRAY47",ia[ia.Color_NOC_GRAY48=180]="Color_NOC_GRAY48",ia[ia.Color_NOC_GRAY49=181]="Color_NOC_GRAY49",ia[ia.Color_NOC_GRAY50=182]="Color_NOC_GRAY50",ia[ia.Color_NOC_GRAY51=183]="Color_NOC_GRAY51",ia[ia.Color_NOC_GRAY52=184]="Color_NOC_GRAY52",ia[ia.Color_NOC_GRAY53=185]="Color_NOC_GRAY53",ia[ia.Color_NOC_GRAY54=186]="Color_NOC_GRAY54",ia[ia.Color_NOC_GRAY55=187]="Color_NOC_GRAY55",ia[ia.Color_NOC_GRAY56=188]="Color_NOC_GRAY56",ia[ia.Color_NOC_GRAY57=189]="Color_NOC_GRAY57",ia[ia.Color_NOC_GRAY58=190]="Color_NOC_GRAY58",ia[ia.Color_NOC_GRAY59=191]="Color_NOC_GRAY59",ia[ia.Color_NOC_GRAY60=192]="Color_NOC_GRAY60",ia[ia.Color_NOC_GRAY61=193]="Color_NOC_GRAY61",ia[ia.Color_NOC_GRAY62=194]="Color_NOC_GRAY62",ia[ia.Color_NOC_GRAY63=195]="Color_NOC_GRAY63",ia[ia.Color_NOC_GRAY64=196]="Color_NOC_GRAY64",ia[ia.Color_NOC_GRAY65=197]="Color_NOC_GRAY65",ia[ia.Color_NOC_GRAY66=198]="Color_NOC_GRAY66",ia[ia.Color_NOC_GRAY67=199]="Color_NOC_GRAY67",ia[ia.Color_NOC_GRAY68=200]="Color_NOC_GRAY68",ia[ia.Color_NOC_GRAY69=201]="Color_NOC_GRAY69",ia[ia.Color_NOC_GRAY70=202]="Color_NOC_GRAY70",ia[ia.Color_NOC_GRAY71=203]="Color_NOC_GRAY71",ia[ia.Color_NOC_GRAY72=204]="Color_NOC_GRAY72",ia[ia.Color_NOC_GRAY73=205]="Color_NOC_GRAY73",ia[ia.Color_NOC_GRAY74=206]="Color_NOC_GRAY74",ia[ia.Color_NOC_GRAY75=207]="Color_NOC_GRAY75",ia[ia.Color_NOC_GRAY76=208]="Color_NOC_GRAY76",ia[ia.Color_NOC_GRAY77=209]="Color_NOC_GRAY77",ia[ia.Color_NOC_GRAY78=210]="Color_NOC_GRAY78",ia[ia.Color_NOC_GRAY79=211]="Color_NOC_GRAY79",ia[ia.Color_NOC_GRAY80=212]="Color_NOC_GRAY80",ia[ia.Color_NOC_GRAY81=213]="Color_NOC_GRAY81",ia[ia.Color_NOC_GRAY82=214]="Color_NOC_GRAY82",ia[ia.Color_NOC_GRAY83=215]="Color_NOC_GRAY83",ia[ia.Color_NOC_GRAY85=216]="Color_NOC_GRAY85",ia[ia.Color_NOC_GRAY86=217]="Color_NOC_GRAY86",ia[ia.Color_NOC_GRAY87=218]="Color_NOC_GRAY87",ia[ia.Color_NOC_GRAY88=219]="Color_NOC_GRAY88",ia[ia.Color_NOC_GRAY89=220]="Color_NOC_GRAY89",ia[ia.Color_NOC_GRAY90=221]="Color_NOC_GRAY90",ia[ia.Color_NOC_GRAY91=222]="Color_NOC_GRAY91",ia[ia.Color_NOC_GRAY92=223]="Color_NOC_GRAY92",ia[ia.Color_NOC_GRAY93=224]="Color_NOC_GRAY93",ia[ia.Color_NOC_GRAY94=225]="Color_NOC_GRAY94",ia[ia.Color_NOC_GRAY95=226]="Color_NOC_GRAY95",ia[ia.Color_NOC_GRAY97=227]="Color_NOC_GRAY97",ia[ia.Color_NOC_GRAY98=228]="Color_NOC_GRAY98",ia[ia.Color_NOC_GRAY99=229]="Color_NOC_GRAY99",ia[ia.Color_NOC_GREEN=230]="Color_NOC_GREEN",ia[ia.Color_NOC_GREEN1=230]="Color_NOC_GREEN1",ia[ia.Color_NOC_GREEN2=231]="Color_NOC_GREEN2",ia[ia.Color_NOC_GREEN3=232]="Color_NOC_GREEN3",ia[ia.Color_NOC_GREEN4=233]="Color_NOC_GREEN4",ia[ia.Color_NOC_GREENYELLOW=234]="Color_NOC_GREENYELLOW",ia[ia.Color_NOC_HONEYDEW=235]="Color_NOC_HONEYDEW",ia[ia.Color_NOC_HONEYDEW2=236]="Color_NOC_HONEYDEW2",ia[ia.Color_NOC_HONEYDEW3=237]="Color_NOC_HONEYDEW3",ia[ia.Color_NOC_HONEYDEW4=238]="Color_NOC_HONEYDEW4",ia[ia.Color_NOC_HOTPINK=239]="Color_NOC_HOTPINK",ia[ia.Color_NOC_HOTPINK1=240]="Color_NOC_HOTPINK1",ia[ia.Color_NOC_HOTPINK2=241]="Color_NOC_HOTPINK2",ia[ia.Color_NOC_HOTPINK3=242]="Color_NOC_HOTPINK3",ia[ia.Color_NOC_HOTPINK4=243]="Color_NOC_HOTPINK4",ia[ia.Color_NOC_INDIANRED=244]="Color_NOC_INDIANRED",ia[ia.Color_NOC_INDIANRED1=245]="Color_NOC_INDIANRED1",ia[ia.Color_NOC_INDIANRED2=246]="Color_NOC_INDIANRED2",ia[ia.Color_NOC_INDIANRED3=247]="Color_NOC_INDIANRED3",ia[ia.Color_NOC_INDIANRED4=248]="Color_NOC_INDIANRED4",ia[ia.Color_NOC_IVORY=249]="Color_NOC_IVORY",ia[ia.Color_NOC_IVORY2=250]="Color_NOC_IVORY2",ia[ia.Color_NOC_IVORY3=251]="Color_NOC_IVORY3",ia[ia.Color_NOC_IVORY4=252]="Color_NOC_IVORY4",ia[ia.Color_NOC_KHAKI=253]="Color_NOC_KHAKI",ia[ia.Color_NOC_KHAKI1=254]="Color_NOC_KHAKI1",ia[ia.Color_NOC_KHAKI2=255]="Color_NOC_KHAKI2",ia[ia.Color_NOC_KHAKI3=256]="Color_NOC_KHAKI3",ia[ia.Color_NOC_KHAKI4=257]="Color_NOC_KHAKI4",ia[ia.Color_NOC_LAVENDER=258]="Color_NOC_LAVENDER",ia[ia.Color_NOC_LAVENDERBLUSH1=259]="Color_NOC_LAVENDERBLUSH1",ia[ia.Color_NOC_LAVENDERBLUSH2=260]="Color_NOC_LAVENDERBLUSH2",ia[ia.Color_NOC_LAVENDERBLUSH3=261]="Color_NOC_LAVENDERBLUSH3",ia[ia.Color_NOC_LAVENDERBLUSH4=262]="Color_NOC_LAVENDERBLUSH4",ia[ia.Color_NOC_LAWNGREEN=263]="Color_NOC_LAWNGREEN",ia[ia.Color_NOC_LEMONCHIFFON1=264]="Color_NOC_LEMONCHIFFON1",ia[ia.Color_NOC_LEMONCHIFFON2=265]="Color_NOC_LEMONCHIFFON2",ia[ia.Color_NOC_LEMONCHIFFON3=266]="Color_NOC_LEMONCHIFFON3",ia[ia.Color_NOC_LEMONCHIFFON4=267]="Color_NOC_LEMONCHIFFON4",ia[ia.Color_NOC_LIGHTBLUE=268]="Color_NOC_LIGHTBLUE",ia[ia.Color_NOC_LIGHTBLUE1=269]="Color_NOC_LIGHTBLUE1",ia[ia.Color_NOC_LIGHTBLUE2=270]="Color_NOC_LIGHTBLUE2",ia[ia.Color_NOC_LIGHTBLUE3=271]="Color_NOC_LIGHTBLUE3",ia[ia.Color_NOC_LIGHTBLUE4=272]="Color_NOC_LIGHTBLUE4",ia[ia.Color_NOC_LIGHTCORAL=273]="Color_NOC_LIGHTCORAL",ia[ia.Color_NOC_LIGHTCYAN=274]="Color_NOC_LIGHTCYAN",ia[ia.Color_NOC_LIGHTCYAN1=274]="Color_NOC_LIGHTCYAN1",ia[ia.Color_NOC_LIGHTCYAN2=275]="Color_NOC_LIGHTCYAN2",ia[ia.Color_NOC_LIGHTCYAN3=276]="Color_NOC_LIGHTCYAN3",ia[ia.Color_NOC_LIGHTCYAN4=277]="Color_NOC_LIGHTCYAN4",ia[ia.Color_NOC_LIGHTGOLDENROD=278]="Color_NOC_LIGHTGOLDENROD",ia[ia.Color_NOC_LIGHTGOLDENROD1=279]="Color_NOC_LIGHTGOLDENROD1",ia[ia.Color_NOC_LIGHTGOLDENROD2=280]="Color_NOC_LIGHTGOLDENROD2",ia[ia.Color_NOC_LIGHTGOLDENROD3=281]="Color_NOC_LIGHTGOLDENROD3",ia[ia.Color_NOC_LIGHTGOLDENROD4=282]="Color_NOC_LIGHTGOLDENROD4",ia[ia.Color_NOC_LIGHTGOLDENRODYELLOW=283]="Color_NOC_LIGHTGOLDENRODYELLOW",ia[ia.Color_NOC_LIGHTGRAY=284]="Color_NOC_LIGHTGRAY",ia[ia.Color_NOC_LIGHTPINK=285]="Color_NOC_LIGHTPINK",ia[ia.Color_NOC_LIGHTPINK1=286]="Color_NOC_LIGHTPINK1",ia[ia.Color_NOC_LIGHTPINK2=287]="Color_NOC_LIGHTPINK2",ia[ia.Color_NOC_LIGHTPINK3=288]="Color_NOC_LIGHTPINK3",ia[ia.Color_NOC_LIGHTPINK4=289]="Color_NOC_LIGHTPINK4",ia[ia.Color_NOC_LIGHTSALMON1=290]="Color_NOC_LIGHTSALMON1",ia[ia.Color_NOC_LIGHTSALMON2=291]="Color_NOC_LIGHTSALMON2",ia[ia.Color_NOC_LIGHTSALMON3=292]="Color_NOC_LIGHTSALMON3",ia[ia.Color_NOC_LIGHTSALMON4=293]="Color_NOC_LIGHTSALMON4",ia[ia.Color_NOC_LIGHTSEAGREEN=294]="Color_NOC_LIGHTSEAGREEN",ia[ia.Color_NOC_LIGHTSKYBLUE=295]="Color_NOC_LIGHTSKYBLUE",ia[ia.Color_NOC_LIGHTSKYBLUE1=296]="Color_NOC_LIGHTSKYBLUE1",ia[ia.Color_NOC_LIGHTSKYBLUE2=297]="Color_NOC_LIGHTSKYBLUE2",ia[ia.Color_NOC_LIGHTSKYBLUE3=298]="Color_NOC_LIGHTSKYBLUE3",ia[ia.Color_NOC_LIGHTSKYBLUE4=299]="Color_NOC_LIGHTSKYBLUE4",ia[ia.Color_NOC_LIGHTSLATEBLUE=300]="Color_NOC_LIGHTSLATEBLUE",ia[ia.Color_NOC_LIGHTSLATEGRAY=301]="Color_NOC_LIGHTSLATEGRAY",ia[ia.Color_NOC_LIGHTSTEELBLUE=302]="Color_NOC_LIGHTSTEELBLUE",ia[ia.Color_NOC_LIGHTSTEELBLUE1=303]="Color_NOC_LIGHTSTEELBLUE1",ia[ia.Color_NOC_LIGHTSTEELBLUE2=304]="Color_NOC_LIGHTSTEELBLUE2",ia[ia.Color_NOC_LIGHTSTEELBLUE3=305]="Color_NOC_LIGHTSTEELBLUE3",ia[ia.Color_NOC_LIGHTSTEELBLUE4=306]="Color_NOC_LIGHTSTEELBLUE4",ia[ia.Color_NOC_LIGHTYELLOW=307]="Color_NOC_LIGHTYELLOW",ia[ia.Color_NOC_LIGHTYELLOW2=308]="Color_NOC_LIGHTYELLOW2",ia[ia.Color_NOC_LIGHTYELLOW3=309]="Color_NOC_LIGHTYELLOW3",ia[ia.Color_NOC_LIGHTYELLOW4=310]="Color_NOC_LIGHTYELLOW4",ia[ia.Color_NOC_LIMEGREEN=311]="Color_NOC_LIMEGREEN",ia[ia.Color_NOC_LINEN=312]="Color_NOC_LINEN",ia[ia.Color_NOC_MAGENTA=313]="Color_NOC_MAGENTA",ia[ia.Color_NOC_MAGENTA1=313]="Color_NOC_MAGENTA1",ia[ia.Color_NOC_MAGENTA2=314]="Color_NOC_MAGENTA2",ia[ia.Color_NOC_MAGENTA3=315]="Color_NOC_MAGENTA3",ia[ia.Color_NOC_MAGENTA4=316]="Color_NOC_MAGENTA4",ia[ia.Color_NOC_MAROON=317]="Color_NOC_MAROON",ia[ia.Color_NOC_MAROON1=318]="Color_NOC_MAROON1",ia[ia.Color_NOC_MAROON2=319]="Color_NOC_MAROON2",ia[ia.Color_NOC_MAROON3=320]="Color_NOC_MAROON3",ia[ia.Color_NOC_MAROON4=321]="Color_NOC_MAROON4",ia[ia.Color_NOC_MEDIUMAQUAMARINE=322]="Color_NOC_MEDIUMAQUAMARINE",ia[ia.Color_NOC_MEDIUMORCHID=323]="Color_NOC_MEDIUMORCHID",ia[ia.Color_NOC_MEDIUMORCHID1=324]="Color_NOC_MEDIUMORCHID1",ia[ia.Color_NOC_MEDIUMORCHID2=325]="Color_NOC_MEDIUMORCHID2",ia[ia.Color_NOC_MEDIUMORCHID3=326]="Color_NOC_MEDIUMORCHID3",ia[ia.Color_NOC_MEDIUMORCHID4=327]="Color_NOC_MEDIUMORCHID4",ia[ia.Color_NOC_MEDIUMPURPLE=328]="Color_NOC_MEDIUMPURPLE",ia[ia.Color_NOC_MEDIUMPURPLE1=329]="Color_NOC_MEDIUMPURPLE1",ia[ia.Color_NOC_MEDIUMPURPLE2=330]="Color_NOC_MEDIUMPURPLE2",ia[ia.Color_NOC_MEDIUMPURPLE3=331]="Color_NOC_MEDIUMPURPLE3",ia[ia.Color_NOC_MEDIUMPURPLE4=332]="Color_NOC_MEDIUMPURPLE4",ia[ia.Color_NOC_MEDIUMSEAGREEN=333]="Color_NOC_MEDIUMSEAGREEN",ia[ia.Color_NOC_MEDIUMSLATEBLUE=334]="Color_NOC_MEDIUMSLATEBLUE",ia[ia.Color_NOC_MEDIUMSPRINGGREEN=335]="Color_NOC_MEDIUMSPRINGGREEN",ia[ia.Color_NOC_MEDIUMTURQUOISE=336]="Color_NOC_MEDIUMTURQUOISE",ia[ia.Color_NOC_MEDIUMVIOLETRED=337]="Color_NOC_MEDIUMVIOLETRED",ia[ia.Color_NOC_MIDNIGHTBLUE=338]="Color_NOC_MIDNIGHTBLUE",ia[ia.Color_NOC_MINTCREAM=339]="Color_NOC_MINTCREAM",ia[ia.Color_NOC_MISTYROSE=340]="Color_NOC_MISTYROSE",ia[ia.Color_NOC_MISTYROSE2=341]="Color_NOC_MISTYROSE2",ia[ia.Color_NOC_MISTYROSE3=342]="Color_NOC_MISTYROSE3",ia[ia.Color_NOC_MISTYROSE4=343]="Color_NOC_MISTYROSE4",ia[ia.Color_NOC_MOCCASIN=344]="Color_NOC_MOCCASIN",ia[ia.Color_NOC_NAVAJOWHITE1=345]="Color_NOC_NAVAJOWHITE1",ia[ia.Color_NOC_NAVAJOWHITE2=346]="Color_NOC_NAVAJOWHITE2",ia[ia.Color_NOC_NAVAJOWHITE3=347]="Color_NOC_NAVAJOWHITE3",ia[ia.Color_NOC_NAVAJOWHITE4=348]="Color_NOC_NAVAJOWHITE4",ia[ia.Color_NOC_NAVYBLUE=349]="Color_NOC_NAVYBLUE",ia[ia.Color_NOC_OLDLACE=350]="Color_NOC_OLDLACE",ia[ia.Color_NOC_OLIVEDRAB=351]="Color_NOC_OLIVEDRAB",ia[ia.Color_NOC_OLIVEDRAB1=352]="Color_NOC_OLIVEDRAB1",ia[ia.Color_NOC_OLIVEDRAB2=353]="Color_NOC_OLIVEDRAB2",ia[ia.Color_NOC_OLIVEDRAB3=354]="Color_NOC_OLIVEDRAB3",ia[ia.Color_NOC_OLIVEDRAB4=355]="Color_NOC_OLIVEDRAB4",ia[ia.Color_NOC_ORANGE=356]="Color_NOC_ORANGE",ia[ia.Color_NOC_ORANGE1=356]="Color_NOC_ORANGE1",ia[ia.Color_NOC_ORANGE2=357]="Color_NOC_ORANGE2",ia[ia.Color_NOC_ORANGE3=358]="Color_NOC_ORANGE3",ia[ia.Color_NOC_ORANGE4=359]="Color_NOC_ORANGE4",ia[ia.Color_NOC_ORANGERED=360]="Color_NOC_ORANGERED",ia[ia.Color_NOC_ORANGERED1=360]="Color_NOC_ORANGERED1",ia[ia.Color_NOC_ORANGERED2=361]="Color_NOC_ORANGERED2",ia[ia.Color_NOC_ORANGERED3=362]="Color_NOC_ORANGERED3",ia[ia.Color_NOC_ORANGERED4=363]="Color_NOC_ORANGERED4",ia[ia.Color_NOC_ORCHID=364]="Color_NOC_ORCHID",ia[ia.Color_NOC_ORCHID1=365]="Color_NOC_ORCHID1",ia[ia.Color_NOC_ORCHID2=366]="Color_NOC_ORCHID2",ia[ia.Color_NOC_ORCHID3=367]="Color_NOC_ORCHID3",ia[ia.Color_NOC_ORCHID4=368]="Color_NOC_ORCHID4",ia[ia.Color_NOC_PALEGOLDENROD=369]="Color_NOC_PALEGOLDENROD",ia[ia.Color_NOC_PALEGREEN=370]="Color_NOC_PALEGREEN",ia[ia.Color_NOC_PALEGREEN1=371]="Color_NOC_PALEGREEN1",ia[ia.Color_NOC_PALEGREEN2=372]="Color_NOC_PALEGREEN2",ia[ia.Color_NOC_PALEGREEN3=373]="Color_NOC_PALEGREEN3",ia[ia.Color_NOC_PALEGREEN4=374]="Color_NOC_PALEGREEN4",ia[ia.Color_NOC_PALETURQUOISE=375]="Color_NOC_PALETURQUOISE",ia[ia.Color_NOC_PALETURQUOISE1=376]="Color_NOC_PALETURQUOISE1",ia[ia.Color_NOC_PALETURQUOISE2=377]="Color_NOC_PALETURQUOISE2",ia[ia.Color_NOC_PALETURQUOISE3=378]="Color_NOC_PALETURQUOISE3",ia[ia.Color_NOC_PALETURQUOISE4=379]="Color_NOC_PALETURQUOISE4",ia[ia.Color_NOC_PALEVIOLETRED=380]="Color_NOC_PALEVIOLETRED",ia[ia.Color_NOC_PALEVIOLETRED1=381]="Color_NOC_PALEVIOLETRED1",ia[ia.Color_NOC_PALEVIOLETRED2=382]="Color_NOC_PALEVIOLETRED2",ia[ia.Color_NOC_PALEVIOLETRED3=383]="Color_NOC_PALEVIOLETRED3",ia[ia.Color_NOC_PALEVIOLETRED4=384]="Color_NOC_PALEVIOLETRED4",ia[ia.Color_NOC_PAPAYAWHIP=385]="Color_NOC_PAPAYAWHIP",ia[ia.Color_NOC_PEACHPUFF=386]="Color_NOC_PEACHPUFF",ia[ia.Color_NOC_PEACHPUFF2=387]="Color_NOC_PEACHPUFF2",ia[ia.Color_NOC_PEACHPUFF3=388]="Color_NOC_PEACHPUFF3",ia[ia.Color_NOC_PEACHPUFF4=389]="Color_NOC_PEACHPUFF4",ia[ia.Color_NOC_PERU=390]="Color_NOC_PERU",ia[ia.Color_NOC_PINK=391]="Color_NOC_PINK",ia[ia.Color_NOC_PINK1=392]="Color_NOC_PINK1",ia[ia.Color_NOC_PINK2=393]="Color_NOC_PINK2",ia[ia.Color_NOC_PINK3=394]="Color_NOC_PINK3",ia[ia.Color_NOC_PINK4=395]="Color_NOC_PINK4",ia[ia.Color_NOC_PLUM=396]="Color_NOC_PLUM",ia[ia.Color_NOC_PLUM1=397]="Color_NOC_PLUM1",ia[ia.Color_NOC_PLUM2=398]="Color_NOC_PLUM2",ia[ia.Color_NOC_PLUM3=399]="Color_NOC_PLUM3",ia[ia.Color_NOC_PLUM4=400]="Color_NOC_PLUM4",ia[ia.Color_NOC_POWDERBLUE=401]="Color_NOC_POWDERBLUE",ia[ia.Color_NOC_PURPLE=402]="Color_NOC_PURPLE",ia[ia.Color_NOC_PURPLE1=403]="Color_NOC_PURPLE1",ia[ia.Color_NOC_PURPLE2=404]="Color_NOC_PURPLE2",ia[ia.Color_NOC_PURPLE3=405]="Color_NOC_PURPLE3",ia[ia.Color_NOC_PURPLE4=406]="Color_NOC_PURPLE4",ia[ia.Color_NOC_RED=407]="Color_NOC_RED",ia[ia.Color_NOC_RED1=407]="Color_NOC_RED1",ia[ia.Color_NOC_RED2=408]="Color_NOC_RED2",ia[ia.Color_NOC_RED3=409]="Color_NOC_RED3",ia[ia.Color_NOC_RED4=410]="Color_NOC_RED4",ia[ia.Color_NOC_ROSYBROWN=411]="Color_NOC_ROSYBROWN",ia[ia.Color_NOC_ROSYBROWN1=412]="Color_NOC_ROSYBROWN1",ia[ia.Color_NOC_ROSYBROWN2=413]="Color_NOC_ROSYBROWN2",ia[ia.Color_NOC_ROSYBROWN3=414]="Color_NOC_ROSYBROWN3",ia[ia.Color_NOC_ROSYBROWN4=415]="Color_NOC_ROSYBROWN4",ia[ia.Color_NOC_ROYALBLUE=416]="Color_NOC_ROYALBLUE",ia[ia.Color_NOC_ROYALBLUE1=417]="Color_NOC_ROYALBLUE1",ia[ia.Color_NOC_ROYALBLUE2=418]="Color_NOC_ROYALBLUE2",ia[ia.Color_NOC_ROYALBLUE3=419]="Color_NOC_ROYALBLUE3",ia[ia.Color_NOC_ROYALBLUE4=420]="Color_NOC_ROYALBLUE4",ia[ia.Color_NOC_SADDLEBROWN=421]="Color_NOC_SADDLEBROWN",ia[ia.Color_NOC_SALMON=422]="Color_NOC_SALMON",ia[ia.Color_NOC_SALMON1=423]="Color_NOC_SALMON1",ia[ia.Color_NOC_SALMON2=424]="Color_NOC_SALMON2",ia[ia.Color_NOC_SALMON3=425]="Color_NOC_SALMON3",ia[ia.Color_NOC_SALMON4=426]="Color_NOC_SALMON4",ia[ia.Color_NOC_SANDYBROWN=427]="Color_NOC_SANDYBROWN",ia[ia.Color_NOC_SEAGREEN=428]="Color_NOC_SEAGREEN",ia[ia.Color_NOC_SEAGREEN1=429]="Color_NOC_SEAGREEN1",ia[ia.Color_NOC_SEAGREEN2=430]="Color_NOC_SEAGREEN2",ia[ia.Color_NOC_SEAGREEN3=431]="Color_NOC_SEAGREEN3",ia[ia.Color_NOC_SEAGREEN4=432]="Color_NOC_SEAGREEN4",ia[ia.Color_NOC_SEASHELL=433]="Color_NOC_SEASHELL",ia[ia.Color_NOC_SEASHELL2=434]="Color_NOC_SEASHELL2",ia[ia.Color_NOC_SEASHELL3=435]="Color_NOC_SEASHELL3",ia[ia.Color_NOC_SEASHELL4=436]="Color_NOC_SEASHELL4",ia[ia.Color_NOC_BEET=437]="Color_NOC_BEET",ia[ia.Color_NOC_TEAL=438]="Color_NOC_TEAL",ia[ia.Color_NOC_SIENNA=439]="Color_NOC_SIENNA",ia[ia.Color_NOC_SIENNA1=440]="Color_NOC_SIENNA1",ia[ia.Color_NOC_SIENNA2=441]="Color_NOC_SIENNA2",ia[ia.Color_NOC_SIENNA3=442]="Color_NOC_SIENNA3",ia[ia.Color_NOC_SIENNA4=443]="Color_NOC_SIENNA4",ia[ia.Color_NOC_SKYBLUE=444]="Color_NOC_SKYBLUE",ia[ia.Color_NOC_SKYBLUE1=445]="Color_NOC_SKYBLUE1",ia[ia.Color_NOC_SKYBLUE2=446]="Color_NOC_SKYBLUE2",ia[ia.Color_NOC_SKYBLUE3=447]="Color_NOC_SKYBLUE3",ia[ia.Color_NOC_SKYBLUE4=448]="Color_NOC_SKYBLUE4",ia[ia.Color_NOC_SLATEBLUE=449]="Color_NOC_SLATEBLUE",ia[ia.Color_NOC_SLATEBLUE1=450]="Color_NOC_SLATEBLUE1",ia[ia.Color_NOC_SLATEBLUE2=451]="Color_NOC_SLATEBLUE2",ia[ia.Color_NOC_SLATEBLUE3=452]="Color_NOC_SLATEBLUE3",ia[ia.Color_NOC_SLATEBLUE4=453]="Color_NOC_SLATEBLUE4",ia[ia.Color_NOC_SLATEGRAY1=454]="Color_NOC_SLATEGRAY1",ia[ia.Color_NOC_SLATEGRAY2=455]="Color_NOC_SLATEGRAY2",ia[ia.Color_NOC_SLATEGRAY3=456]="Color_NOC_SLATEGRAY3",ia[ia.Color_NOC_SLATEGRAY4=457]="Color_NOC_SLATEGRAY4",ia[ia.Color_NOC_SLATEGRAY=458]="Color_NOC_SLATEGRAY",ia[ia.Color_NOC_SNOW=459]="Color_NOC_SNOW",ia[ia.Color_NOC_SNOW2=460]="Color_NOC_SNOW2",ia[ia.Color_NOC_SNOW3=461]="Color_NOC_SNOW3",ia[ia.Color_NOC_SNOW4=462]="Color_NOC_SNOW4",ia[ia.Color_NOC_SPRINGGREEN=463]="Color_NOC_SPRINGGREEN",ia[ia.Color_NOC_SPRINGGREEN2=464]="Color_NOC_SPRINGGREEN2",ia[ia.Color_NOC_SPRINGGREEN3=465]="Color_NOC_SPRINGGREEN3",ia[ia.Color_NOC_SPRINGGREEN4=466]="Color_NOC_SPRINGGREEN4",ia[ia.Color_NOC_STEELBLUE=467]="Color_NOC_STEELBLUE",ia[ia.Color_NOC_STEELBLUE1=468]="Color_NOC_STEELBLUE1",ia[ia.Color_NOC_STEELBLUE2=469]="Color_NOC_STEELBLUE2",ia[ia.Color_NOC_STEELBLUE3=470]="Color_NOC_STEELBLUE3",ia[ia.Color_NOC_STEELBLUE4=471]="Color_NOC_STEELBLUE4",ia[ia.Color_NOC_TAN=472]="Color_NOC_TAN",ia[ia.Color_NOC_TAN1=473]="Color_NOC_TAN1",ia[ia.Color_NOC_TAN2=474]="Color_NOC_TAN2",ia[ia.Color_NOC_TAN3=475]="Color_NOC_TAN3",ia[ia.Color_NOC_TAN4=476]="Color_NOC_TAN4",ia[ia.Color_NOC_THISTLE=477]="Color_NOC_THISTLE",ia[ia.Color_NOC_THISTLE1=478]="Color_NOC_THISTLE1",ia[ia.Color_NOC_THISTLE2=479]="Color_NOC_THISTLE2",ia[ia.Color_NOC_THISTLE3=480]="Color_NOC_THISTLE3",ia[ia.Color_NOC_THISTLE4=481]="Color_NOC_THISTLE4",ia[ia.Color_NOC_TOMATO=482]="Color_NOC_TOMATO",ia[ia.Color_NOC_TOMATO1=482]="Color_NOC_TOMATO1",ia[ia.Color_NOC_TOMATO2=483]="Color_NOC_TOMATO2",ia[ia.Color_NOC_TOMATO3=484]="Color_NOC_TOMATO3",ia[ia.Color_NOC_TOMATO4=485]="Color_NOC_TOMATO4",ia[ia.Color_NOC_TURQUOISE=486]="Color_NOC_TURQUOISE",ia[ia.Color_NOC_TURQUOISE1=487]="Color_NOC_TURQUOISE1",ia[ia.Color_NOC_TURQUOISE2=488]="Color_NOC_TURQUOISE2",ia[ia.Color_NOC_TURQUOISE3=489]="Color_NOC_TURQUOISE3",ia[ia.Color_NOC_TURQUOISE4=490]="Color_NOC_TURQUOISE4",ia[ia.Color_NOC_VIOLET=491]="Color_NOC_VIOLET",ia[ia.Color_NOC_VIOLETRED=492]="Color_NOC_VIOLETRED",ia[ia.Color_NOC_VIOLETRED1=493]="Color_NOC_VIOLETRED1",ia[ia.Color_NOC_VIOLETRED2=494]="Color_NOC_VIOLETRED2",ia[ia.Color_NOC_VIOLETRED3=495]="Color_NOC_VIOLETRED3",ia[ia.Color_NOC_VIOLETRED4=496]="Color_NOC_VIOLETRED4",ia[ia.Color_NOC_WHEAT=497]="Color_NOC_WHEAT",ia[ia.Color_NOC_WHEAT1=498]="Color_NOC_WHEAT1",ia[ia.Color_NOC_WHEAT2=499]="Color_NOC_WHEAT2",ia[ia.Color_NOC_WHEAT3=500]="Color_NOC_WHEAT3",ia[ia.Color_NOC_WHEAT4=501]="Color_NOC_WHEAT4",ia[ia.Color_NOC_WHITESMOKE=502]="Color_NOC_WHITESMOKE",ia[ia.Color_NOC_YELLOW=503]="Color_NOC_YELLOW",ia[ia.Color_NOC_YELLOW1=503]="Color_NOC_YELLOW1",ia[ia.Color_NOC_YELLOW2=504]="Color_NOC_YELLOW2",ia[ia.Color_NOC_YELLOW3=505]="Color_NOC_YELLOW3",ia[ia.Color_NOC_YELLOW4=506]="Color_NOC_YELLOW4",ia[ia.Color_NOC_YELLOWGREEN=507]="Color_NOC_YELLOWGREEN",ia[ia.Color_NOC_WHITE=508]="Color_NOC_WHITE",(oa=Wi.MxTypeOfColor||(Wi.MxTypeOfColor={}))[oa.Color_TOC_RGB=0]="Color_TOC_RGB",oa[oa.Color_TOC_sRGB=1]="Color_TOC_sRGB",oa[oa.Color_TOC_HLS=2]="Color_TOC_HLS",oa[oa.Color_TOC_CIELab=3]="Color_TOC_CIELab",oa[oa.Color_TOC_CIELch=4]="Color_TOC_CIELch",(sa=Wi.MxDisplayMode||(Wi.MxDisplayMode={}))[sa.DM_WireFrame=0]="DM_WireFrame",sa[sa.DM_Shaded=1]="DM_Shaded",(ca=Wi.MxTypeOfLightSource||(Wi.MxTypeOfLightSource={}))[ca.LightSource_TOLS_AMBIENT=0]="LightSource_TOLS_AMBIENT",ca[ca.LightSource_TOLS_DIRECTIONAL=1]="LightSource_TOLS_DIRECTIONAL",ca[ca.LightSource_TOLS_POSITIONAL=2]="LightSource_TOLS_POSITIONAL",ca[ca.LightSource_TOLS_SPOT=3]="LightSource_TOLS_SPOT",(ua=Wi.MxCameraProjection||(Wi.MxCameraProjection={}))[ua.CProjection_Orthographic=0]="CProjection_Orthographic",ua[ua.CProjection_Perspective=1]="CProjection_Perspective",ua[ua.CProjection_Stereo=2]="CProjection_Stereo",ua[ua.CProjection_MonoLeftEye=3]="CProjection_MonoLeftEye",ua[ua.CProjection_MonoRightEye=4]="CProjection_MonoRightEye",(la=Wi.MxV3dTypeOfOrientation||(Wi.MxV3dTypeOfOrientation={}))[la.Orientation_Xpos=0]="Orientation_Xpos",la[la.Orientation_Ypos=1]="Orientation_Ypos",la[la.Orientation_Zpos=2]="Orientation_Zpos",la[la.Orientation_Xneg=3]="Orientation_Xneg",la[la.Orientation_Yneg=4]="Orientation_Yneg",la[la.Orientation_Zneg=5]="Orientation_Zneg",la[la.Orientation_XposYpos=6]="Orientation_XposYpos",la[la.Orientation_XposZpos=7]="Orientation_XposZpos",la[la.Orientation_YposZpos=8]="Orientation_YposZpos",la[la.Orientation_XnegYneg=9]="Orientation_XnegYneg",la[la.Orientation_XnegYpos=10]="Orientation_XnegYpos",la[la.Orientation_XnegZneg=11]="Orientation_XnegZneg",la[la.Orientation_XnegZpos=12]="Orientation_XnegZpos",la[la.Orientation_YnegZneg=13]="Orientation_YnegZneg",la[la.Orientation_YnegZpos=14]="Orientation_YnegZpos",la[la.Orientation_XposYneg=15]="Orientation_XposYneg",la[la.Orientation_XposZneg=16]="Orientation_XposZneg",la[la.Orientation_YposZneg=17]="Orientation_YposZneg",la[la.Orientation_XposYposZpos=18]="Orientation_XposYposZpos",la[la.Orientation_XposYnegZpos=19]="Orientation_XposYnegZpos",la[la.Orientation_XposYposZneg=20]="Orientation_XposYposZneg",la[la.Orientation_XnegYposZpos=21]="Orientation_XnegYposZpos",la[la.Orientation_XposYnegZneg=22]="Orientation_XposYnegZneg",la[la.Orientation_XnegYposZneg=23]="Orientation_XnegYposZneg",la[la.Orientation_XnegYnegZpos=24]="Orientation_XnegYnegZpos",la[la.Orientation_XnegYnegZneg=25]="Orientation_XnegYnegZneg",la[la.Orientation_TypeOfOrientation_Zup_AxoLeft=24]="Orientation_TypeOfOrientation_Zup_AxoLeft",la[la.Orientation_TypeOfOrientation_Zup_AxoRight=19]="Orientation_TypeOfOrientation_Zup_AxoRight",la[la.Orientation_TypeOfOrientation_Zup_Front=4]="Orientation_TypeOfOrientation_Zup_Front",la[la.Orientation_TypeOfOrientation_Zup_Back=1]="Orientation_TypeOfOrientation_Zup_Back",la[la.Orientation_TypeOfOrientation_Zup_Top=2]="Orientation_TypeOfOrientation_Zup_Top",la[la.Orientation_TypeOfOrientation_Zup_Bottom=5]="Orientation_TypeOfOrientation_Zup_Bottom",la[la.Orientation_TypeOfOrientation_Zup_Left=3]="Orientation_TypeOfOrientation_Zup_Left",la[la.Orientation_TypeOfOrientation_Zup_Right=0]="Orientation_TypeOfOrientation_Zup_Right",la[la.Orientation_TypeOfOrientation_Yup_AxoLeft=21]="Orientation_TypeOfOrientation_Yup_AxoLeft",la[la.Orientation_TypeOfOrientation_Yup_AxoRight=18]="Orientation_TypeOfOrientation_Yup_AxoRight",la[la.Orientation_TypeOfOrientation_Yup_Front=2]="Orientation_TypeOfOrientation_Yup_Front",la[la.Orientation_TypeOfOrientation_Yup_Back=5]="Orientation_TypeOfOrientation_Yup_Back",la[la.Orientation_TypeOfOrientation_Yup_Top=1]="Orientation_TypeOfOrientation_Yup_Top",la[la.Orientation_TypeOfOrientation_Yup_Bottom=4]="Orientation_TypeOfOrientation_Yup_Bottom",la[la.Orientation_TypeOfOrientation_Yup_Left=0]="Orientation_TypeOfOrientation_Yup_Left",la[la.Orientation_TypeOfOrientation_Yup_Right=3]="Orientation_TypeOfOrientation_Yup_Right",(pa=Wi.MxTypeOfAngle||(Wi.MxTypeOfAngle={}))[pa.Angle_TypeOfAngle_Interior=0]="Angle_TypeOfAngle_Interior",pa[pa.Angle_TypeOfAngle_Exterior=1]="Angle_TypeOfAngle_Exterior",(ha=Wi.MxTypeOfAngleArrowVisibility||(Wi.MxTypeOfAngleArrowVisibility={}))[ha.Visibility_TOAAV_Both=0]="Visibility_TOAAV_Both",ha[ha.Visibility_TOAAV_First=1]="Visibility_TOAAV_First",ha[ha.Visibility_TOAAV_Second=2]="Visibility_TOAAV_Second",ha[ha.Visibility_TOAAV_None=3]="Visibility_TOAAV_None",(fa=Wi.MxTypeOfLine||(Wi.MxTypeOfLine={}))[fa.Line_TOL_EMPTY=-1]="Line_TOL_EMPTY",fa[fa.Line_TOL_SOLID=0]="Line_TOL_SOLID",fa[fa.Line_TOL_DASH=1]="Line_TOL_DASH",fa[fa.Line_TOL_DOT=2]="Line_TOL_DOT",fa[fa.Line_TOL_DOTDASH=3]="Line_TOL_DOTDASH",fa[fa.Line_TOL_USERDEFINED=4]="Line_TOL_USERDEFINED",(da=Wi.MxTextPath||(Wi.MxTextPath={}))[da.TextPath_TP_UP=0]="TextPath_TP_UP",da[da.TextPath_TP_DOWN=1]="TextPath_TP_DOWN",da[da.TextPath_TP_LEFT=2]="TextPath_TP_LEFT",da[da.TextPath_TP_RIGHT=3]="TextPath_TP_RIGHT",(ma=Wi.MxDimensionArrowOrientation||(Wi.MxDimensionArrowOrientation={}))[ma.DimensionArrowOrientation_DAO_Internal=0]="DimensionArrowOrientation_DAO_Internal",ma[ma.DimensionArrowOrientation_DAO_External=1]="DimensionArrowOrientation_DAO_External",ma[ma.DimensionArrowOrientation_DAO_Fit=2]="DimensionArrowOrientation_DAO_Fit",(ga=Wi.MxDimensionTextVerticalPosition||(Wi.MxDimensionTextVerticalPosition={}))[ga.DimensionTextVerticalPosition_DTVP_Above=0]="DimensionTextVerticalPosition_DTVP_Above",ga[ga.DimensionTextVerticalPosition_DTVP_Below=1]="DimensionTextVerticalPosition_DTVP_Below",ga[ga.DimensionTextVerticalPosition_DTVP_Center=2]="DimensionTextVerticalPosition_DTVP_Center",(va=Wi.MxDimensionTextHorizontalPosition||(Wi.MxDimensionTextHorizontalPosition={}))[va.DimensionTextHorizontalPosition_DTHP_Left=0]="DimensionTextHorizontalPosition_DTHP_Left",va[va.DimensionTextHorizontalPosition_DTHP_Right=1]="DimensionTextHorizontalPosition_DTHP_Right",va[va.DimensionTextHorizontalPosition_DTHP_Center=2]="DimensionTextHorizontalPosition_DTHP_Center",va[va.DimensionTextHorizontalPosition_DTHP_Fit=3]="DimensionTextHorizontalPosition_DTHP_Fit",(ya=Wi.MxKindOfDimension||(Wi.MxKindOfDimension={}))[ya.KindOfDimension_KOD_NONE=0]="KindOfDimension_KOD_NONE",ya[ya.KindOfDimension_KOD_LENGTH=1]="KindOfDimension_KOD_LENGTH",ya[ya.KindOfDimension_KOD_PLANEANGLE=2]="KindOfDimension_KOD_PLANEANGLE",ya[ya.KindOfDimension_KOD_SOLIDANGLE=3]="KindOfDimension_KOD_SOLIDANGLE",ya[ya.KindOfDimension_KOD_AREA=4]="KindOfDimension_KOD_AREA",ya[ya.KindOfDimension_KOD_VOLUME=5]="KindOfDimension_KOD_VOLUME",ya[ya.KindOfDimension_KOD_MASS=6]="KindOfDimension_KOD_MASS",ya[ya.KindOfDimension_KOD_TIME=7]="KindOfDimension_KOD_TIME",ya[ya.KindOfDimension_KOD_RADIUS=8]="KindOfDimension_KOD_RADIUS",ya[ya.KindOfDimension_KOD_DIAMETER=9]="KindOfDimension_KOD_DIAMETER",ya[ya.KindOfDimension_KOD_CHAMF2D=10]="KindOfDimension_KOD_CHAMF2D",ya[ya.KindOfDimension_KOD_CHAMF3D=11]="KindOfDimension_KOD_CHAMF3D",ya[ya.KindOfDimension_KOD_OFFSET=12]="KindOfDimension_KOD_OFFSET",ya[ya.KindOfDimension_KOD_ELLIPSERADIUS=13]="KindOfDimension_KOD_ELLIPSERADIUS",(xa=Wi.MxDocColorType||(Wi.MxDocColorType={}))[xa.DocColor_ColorGen=0]="DocColor_ColorGen",xa[xa.DocColor_ColorSurf=1]="DocColor_ColorSurf",xa[xa.DocColor_ColorCurv=2]="DocColor_ColorCurv",(ba=Wi.MxKindOfInteractive||(Wi.MxKindOfInteractive={}))[ba.KindOfInteractive_None=0]="KindOfInteractive_None",ba[ba.KindOfInteractive_Datum=1]="KindOfInteractive_Datum",ba[ba.KindOfInteractive_Shape=2]="KindOfInteractive_Shape",ba[ba.KindOfInteractive_Object=3]="KindOfInteractive_Object",ba[ba.KindOfInteractive_Relation=4]="KindOfInteractive_Relation",ba[ba.KindOfInteractive_Dimension=5]="KindOfInteractive_Dimension",ba[ba.KindOfInteractive_LightSource=6]="KindOfInteractive_LightSource",ba[ba.KOI_None=0]="KOI_None",ba[ba.KOI_Datum=1]="KOI_Datum",ba[ba.KOI_Shape=2]="KOI_Shape",ba[ba.KOI_Object=3]="KOI_Object",ba[ba.KOI_Relation=4]="KOI_Relation",ba[ba.KOI_Dimension=5]="KOI_Dimension",(_a=Wi.MxPrs3dTypeOfHLR||(Wi.MxPrs3dTypeOfHLR={}))[_a.TOH_NotSet=0]="TOH_NotSet",_a[_a.TOH_PolyAlgo=1]="TOH_PolyAlgo",_a[_a.TOH_Algo=2]="TOH_Algo",(Ma=Wi.MxDisplayStatus||(Wi.MxDisplayStatus={}))[Ma.DisplayStatus_Displayed=0]="DisplayStatus_Displayed",Ma[Ma.DisplayStatus_Erased=1]="DisplayStatus_Erased",Ma[Ma.DisplayStatus_None=2]="DisplayStatus_None",Ma[Ma.DS_Displayed=0]="DS_Displayed",Ma[Ma.DS_Erased=1]="DS_Erased",Ma[Ma.DS_None=2]="DS_None",(Ca=Wi.MxGlobalDisplayMode||(Wi.MxGlobalDisplayMode={}))[Ca.DisplayMode_Wireframe=0]="DisplayMode_Wireframe",Ca[Ca.DisplayMode_HiddenLineRemoval=1]="DisplayMode_HiddenLineRemoval",Ca[Ca.DisplayMode_Shaded=2]="DisplayMode_Shaded",Ca[Ca.DisplayMode_ShadedWithFaceBoundary=3]="DisplayMode_ShadedWithFaceBoundary",Ca[Ca.DisplayMode_Transparency=4]="DisplayMode_Transparency",(wa=Wi.MxGradientFillMethod||(Wi.MxGradientFillMethod={}))[wa.GradientFillMethod_None=0]="GradientFillMethod_None",wa[wa.GradientFillMethod_Horizontal=1]="GradientFillMethod_Horizontal",wa[wa.GradientFillMethod_Vertical=2]="GradientFillMethod_Vertical",wa[wa.GradientFillMethod_Diagonal1=3]="GradientFillMethod_Diagonal1",wa[wa.GradientFillMethod_Diagonal2=4]="GradientFillMethod_Diagonal2",wa[wa.GradientFillMethod_Corner1=5]="GradientFillMethod_Corner1",wa[wa.GradientFillMethod_Corner2=6]="GradientFillMethod_Corner2",wa[wa.GradientFillMethod_Corner3=7]="GradientFillMethod_Corner3",wa[wa.GradientFillMethod_Corner4=8]="GradientFillMethod_Corner4",wa[wa.GradientFillMethod_Elliptical=9]="GradientFillMethod_Elliptical",wa[wa.GFM_NONE=0]="GFM_NONE",wa[wa.GFM_HOR=1]="GFM_HOR",wa[wa.GFM_VER=2]="GFM_VER",wa[wa.GFM_DIAG1=3]="GFM_DIAG1",wa[wa.GFM_DIAG2=4]="GFM_DIAG2",wa[wa.GFM_CORNER1=5]="GFM_CORNER1",wa[wa.GFM_CORNER2=6]="GFM_CORNER2",wa[wa.GFM_CORNER3=7]="GFM_CORNER3",wa[wa.GFM_CORNER4=8]="GFM_CORNER4",(Sa=Wi.MxFormat||(Wi.MxFormat={}))[Sa.Format_Unknown=0]="Format_Unknown",Sa[Sa.Format_Image=1]="Format_Image",Sa[Sa.Format_3DS=2]="Format_3DS",Sa[Sa.Format_3MF=3]="Format_3MF",Sa[Sa.Format_AMF=4]="Format_AMF",Sa[Sa.Format_COLLADA=5]="Format_COLLADA",Sa[Sa.Format_DXF=6]="Format_DXF",Sa[Sa.Format_FBX=7]="Format_FBX",Sa[Sa.Format_GLTF=8]="Format_GLTF",Sa[Sa.Format_IGES=9]="Format_IGES",Sa[Sa.Format_OBJ=10]="Format_OBJ",Sa[Sa.Format_OCCBREP=11]="Format_OCCBREP",Sa[Sa.Format_OFF=12]="Format_OFF",Sa[Sa.Format_PLY=13]="Format_PLY",Sa[Sa.Format_STEP=14]="Format_STEP",Sa[Sa.Format_STL=15]="Format_STL",Sa[Sa.Format_VRML=16]="Format_VRML",Sa[Sa.Format_X3D=17]="Format_X3D",Sa[Sa.Format_Blender=18]="Format_Blender",(Ta=Wi.MxQuantAspect||(Wi.MxQuantAspect={}))[Ta.Quant_Length=0]="Quant_Length",Ta[Ta.Quant_Area=1]="Quant_Area",Ta[Ta.Quant_Volume=2]="Quant_Volume",(Aa=Wi.MxOrientation||(Wi.MxOrientation={}))[Aa.Orientation_FORWARD=0]="Orientation_FORWARD",Aa[Aa.Orientation_REVERSED=1]="Orientation_REVERSED",Aa[Aa.Orientation_INTERNAL=2]="Orientation_INTERNAL",Aa[Aa.Orientation_EXTERNAL=3]="Orientation_EXTERNAL",(ka=Wi.MxTransitionMode||(Wi.MxTransitionMode={}))[ka.Mx_Transformed=0]="Mx_Transformed",ka[ka.Mx_RightCorner=1]="Mx_RightCorner",ka[ka.Mx_RoundCorner=2]="Mx_RoundCorner";var Ia=function(){var t=_asyncToGenerator(ie.mark((function _callee(t,p,h){var x,M;return ie.wrap((function _callee$(k){for(;;)switch(k.prev=k.next){case 0:return x=h.locateFile,M=x(t+".js"),k.next=4,lt(M);case 4:return k.next=6,globalThis[p](h);case 6:return k.abrupt("return",k.sent);case 7:case"end":return k.stop()}}),_callee)})));return function loadWams(p,h,x){return t.apply(this,arguments)}}();function addResizeListener(t,p){var h=function call(){return requestAnimationFrame(p)},x=function createResizeObserver(t){return"function"==typeof ResizeObserver?new ResizeObserver(t):null}(h);x?x.observe(t):MutationObserver&&new MutationObserver(h).observe(t,{attributes:!0})}function _createSuper$2(t){var p=function _isNativeReflectConstruct$2(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(bm){return!1}}();return function _createSuperInternal(){var h,x=_getPrototypeOf$1(t);if(p){var M=_getPrototypeOf$1(this).constructor;h=Reflect.construct(x,arguments,M)}else h=x.apply(this,arguments);return _possibleConstructorReturn$1(this,h)}}var La=function(t){_inherits$1(MxApp3DType,t);var p=_createSuper$2(MxApp3DType);function MxApp3DType(){var t;_classCallCheck$1(this,MxApp3DType);for(var h=arguments.length,x=new Array(h),M=0;M<h;M++)x[M]=arguments[M];return _defineProperty(_assertThisInitialized$1(t=p.call.apply(p,[this].concat(x))),"imp",void 0),_defineProperty(_assertThisInitialized$1(t),"cpp_app",void 0),_defineProperty(_assertThisInitialized$1(t),"tool",void 0),_defineProperty(_assertThisInitialized$1(t),"globalMethods",void 0),t}return _createClass$1(MxApp3DType,[{key:"init",value:function init(t){this.imp=t,this.cpp_app=new t.Mx3dApplication,this.tool=new t.MdGeTopo,this.globalMethods=new t.Mx3dClassMethods}},{key:"createView",value:function createView(t){return new xo(this.cpp_app.createView(t))}},{key:"getCurrentActiveView",value:function getCurrentActiveView(){return new xo(this.cpp_app.getCurrentActiveView())}}]),MxApp3DType}(Vn),Ea=new La,Ra=function(){function MxCAD3DObject(){_classCallCheck$1(this,MxCAD3DObject),_defineProperty(this,"event",{}),_defineProperty(this,"imp",void 0),_defineProperty(this,"canvas",null),_defineProperty(this,"ctx",null),_defineProperty(this,"updateCanvasSizeFun",null),this.updateCanvasSizeFun=null}return _createClass$1(MxCAD3DObject,[{key:"getDocument",value:function getDocument(){return new So(this.imp.getDoc(),"from view")}},{key:"removeAll",value:function removeAll(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.imp.removeAll(t)}},{key:"removeSelected",value:function removeSelected(){this.imp.removeSelected()}},{key:"update",value:function update(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.imp.update(t,p)}},{key:"setProjectionType",value:function setProjectionType(t){this.imp.setProjectionType(t)}},{key:"showCenterTrihedron",value:function showCenterTrihedron(t){this.imp.showCenterTrihedron(t)}},{key:"fitAllObjects",value:function fitAllObjects(t){this.imp.fitAllObjects(t)}},{key:"enableXClipPlane",value:function enableXClipPlane(t){this.imp.enableXClipPlane(t)}},{key:"setXClipPlaneXPosition",value:function setXClipPlaneXPosition(t){this.imp.setXClipPlaneXPosition(t)}},{key:"setXClipPlaneReverse",value:function setXClipPlaneReverse(){this.imp.setXClipPlaneReverse()}},{key:"enableYClipPlane",value:function enableYClipPlane(t){this.imp.enableYClipPlane(t)}},{key:"setYClipPlaneYPosition",value:function setYClipPlaneYPosition(t){this.imp.setYClipPlaneYPosition(t)}},{key:"setYClipPlaneReverse",value:function setYClipPlaneReverse(){this.imp.setYClipPlaneReverse()}},{key:"enableZClipPlane",value:function enableZClipPlane(t){this.imp.enableZClipPlane(t)}},{key:"setZClipPlaneZPosition",value:function setZClipPlaneZPosition(t){this.imp.setZClipPlaneZPosition(t)}},{key:"setZClipPlaneReverse",value:function setZClipPlaneReverse(){this.imp.setZClipPlaneReverse()}},{key:"enableCustomClipPlane",value:function enableCustomClipPlane(t){this.imp.enableCustomClipPlane(t)}},{key:"setCustomClipPlanePosition",value:function setCustomClipPlanePosition(t){this.imp.setCustomClipPlanePosition(t)}},{key:"setCustomClipPlaneReverse",value:function setCustomClipPlaneReverse(){this.imp.setCustomClipPlaneReverse()}},{key:"setCustomClipPlaneDirection",value:function setCustomClipPlaneDirection(t,p,h){this.imp.setCustomClipPlaneDirection(t,p,h)}},{key:"displaySymbolText",value:function displaySymbolText(t){this.imp.displaySymbolText(t.getImp())}},{key:"displayDimension",value:function displayDimension(t){this.imp.displayDimension(t.getImp())}},{key:"addModelTexture",value:function addModelTexture(t){this.imp.addModelTexture(t)}},{key:"removeModelTexture",value:function removeModelTexture(){this.imp.removeModelTexture()}},{key:"setGradientBgColor",value:function setGradientBgColor(t,p,h){this.imp.setGradientBgColor(t.getImp(),p.getImp(),h)}},{key:"setProj",value:function setProj(t,p){this.imp.setProj(t,p)}},{key:"setSelectedColor",value:function setSelectedColor(t){this.imp.setSelectedColor(t.getImp())}},{key:"setSelectedMaterial",value:function setSelectedMaterial(t){this.imp.setSelectedMaterial(t.getImp())}},{key:"setDisplayMode",value:function setDisplayMode(t){this.imp.setDisplayMode(t)}},{key:"enableDirLightSrc",value:function enableDirLightSrc(t){this.imp.enableDirLightSrc(t)}},{key:"setCubemapBackground",value:function setCubemapBackground(t,p,h,x,M,k){this.imp.setCubemapBackground(t,p,h,x,M,k)}},{key:"setManipulatorEnabled",value:function setManipulatorEnabled(t){this.imp.setManipulatorEnabled(t)}},{key:"getImp",value:function getImp(){return this.imp}},{key:"getCtx",value:function getCtx(){return this.ctx}},{key:"updateCanvasSize",value:function updateCanvasSize(){this.updateCanvasSizeFun&&this.updateCanvasSizeFun()}},{key:"init",value:function init(t){this.imp=t}},{key:"on",value:function on(t,p){if(this.event[t])if(this.event[t]instanceof Array)this.event[t].includes(p)||this.event[t].push(p);else{var h=this.event[t];if(h==p)return;this.event[t]=[],this.event[t].push(h),this.event[t].push(p)}else this.event[t]=p}},{key:"off",value:function off(t,p){if(this.event[t])if(p)if(this.event[t]instanceof Array){var h=this.event[t].indexOf(p);if(h<0)return;this.event[t].splice(h,1)}else this.event[t]===p&&(this.event[t]=[]);else this.event[t]=[]}},{key:"callEvent",value:function callEvent(t,p){try{var h=this.event[t];if(!h)return!1;if(h instanceof Array){var x=!1;return h.forEach((function(t){x=t(p)})),x}return h(p)}catch(M){throw M}}},{key:"create",value:function create(t){var p=this,h=function resize(){if(p.canvas){var t=p.canvas.parentElement?p.canvas.parentElement.clientWidth:window.innerWidth,h=p.canvas.parentElement?p.canvas.parentElement.clientHeight:window.innerHeight,x=Math.min(t,window.screen.availWidth),M=Math.min(h,window.screen.availHeight);x=Math.max(I,x),M=Math.max(V,M),p.canvas.style.width=x+1+"px",p.canvas.style.height=M+"px";var k=window.devicePixelRatio||1;p.canvas.width=x*k,p.canvas.height=M*k,window.dispatchEvent(new Event("resize"))}},x=function throttle(t,p){var h=null;return function(){for(var x=this,M=arguments.length,k=new Array(M),I=0;I<M;I++)k[I]=arguments[I];h||(h=setTimeout((function(){t.apply(x,k),h=null}),p))}}(h,50),M=t.canvas,k=t.minWidth,I=void 0===k?300:k,N=t.minHeight,V=void 0===N?300:N,ee=t.updateCanvasSize,te=void 0===ee?x:ee,re=!1,ne=function init(){if(!re){re=!0;var x="string"==typeof M,k=x?document.querySelectorAll(M)[0]:M;if(!k){k=document.createElement("canvas"),x&&(M.startsWith(".")&&k.classList.add((M+"").replace(".","")),M.startsWith("#")&&(k.id=(M+"").replace("#","")));var I=document.createElement("div");I.style.width="100%",I.style.height="".concat(Math.max(document.body.clientHeight,V),"px"),I.appendChild(k),document.body.appendChild(I)}var N=k.getContext("webgl2",{alpha:!1,depth:!0,antialias:!1,preserveDrawingBuffer:!0});if(null==N&&(N=k.getContext("webgl",{alpha:!1,depth:!0,antialias:!1,preserveDrawingBuffer:!0})),p.canvas=k,p.ctx=N,p.canvas instanceof HTMLCanvasElement)addResizeListener(p.canvas.parentElement||document.body,te);h();t.locateFile||(t.locateFile=ut),t.canvas=k,t.on=Ea.on.bind(Ea),t.emit=Ea.emit.bind(Ea),t.off=Ea.off.bind(Ea),Ia("mxdraw3d_min","mxdraw3d",Object.assign({},t)).then((function(t){Ea.init(t),function on_init(){p.updateCanvasSizeFun=te,p.init(Ea.cpp_app.createView(M)),p.callEvent("init")}()}))}};window.onload=function(){ne()},"complete"===document.readyState?ne():document.addEventListener("DOMContentLoaded",ne)}}]),MxCAD3DObject}(),Ba=new FinalizationRegistry((function(t){Ea.tool.DestroyObject(t)})),Na={};function isUniPoint(t){return t instanceof Ya||t instanceof Array&&"number"==typeof t[0]}function isUniDir(t){return t instanceof Za||t instanceof Array&&"number"==typeof t[0]}function isUniVec(t){return t instanceof eo||t instanceof Array&&"number"==typeof t[0]}function uniToPoint(t){return t instanceof Ya?t:new Ya(t[0],t[1],t[2])}function uniToDir(t){return t instanceof Za?t:new Za(t[0],t[1],t[2])}function uniToVec(t){return t instanceof eo?t:new eo(t[0],t[1],t[2])}var Ga=function(){function Mx3dApplication(){_classCallCheck$1(this,Mx3dApplication),_defineProperty(this,"imp",void 0),this.imp=Ea.cpp_app}return _createClass$1(Mx3dApplication,[{key:"createView",value:function createView(t){return new xo(this.imp.createView(t))}},{key:"getCurrentActiveView",value:function getCurrentActiveView(){return new xo(this.imp.getCurrentActiveView())}}]),Mx3dApplication}(),Fa=function(){function Mx3dBaseObject(t){_classCallCheck$1(this,Mx3dBaseObject),_defineProperty(this,"imp",0),this.imp=t,this.imp&&Ba.register(this,t,Na)}return _createClass$1(Mx3dBaseObject,[{key:"getImp",value:function getImp(){return this.imp}},{key:"initTempObject",value:function initTempObject(t){this.imp=t}}]),Mx3dBaseObject}(),Va=function(t){_inherits$1(Mx3dDimObject,t);var p=_createSuper$2(Mx3dDimObject);function Mx3dDimObject(t){return _classCallCheck$1(this,Mx3dDimObject),p.call(this,t)}return _createClass$1(Mx3dDimObject)}(Fa),Ua=function(t){_inherits$1(Mx3dSymbolObject,t);var p=_createSuper$2(Mx3dSymbolObject);function Mx3dSymbolObject(t){return _classCallCheck$1(this,Mx3dSymbolObject),p.call(this,t)}return _createClass$1(Mx3dSymbolObject)}(Fa),ja=function(t){_inherits$1(Mx3dAlgoObject,t);var p=_createSuper$2(Mx3dAlgoObject);function Mx3dAlgoObject(t){return _classCallCheck$1(this,Mx3dAlgoObject),p.call(this,t)}return _createClass$1(Mx3dAlgoObject)}(Fa),Wa=function(t){_inherits$1(Mx3dAspectObject,t);var p=_createSuper$2(Mx3dAspectObject);function Mx3dAspectObject(t){return _classCallCheck$1(this,Mx3dAspectObject),p.call(this,t)}return _createClass$1(Mx3dAspectObject)}(Fa),za=function(t){_inherits$1(Mx3dGeObject,t);var p=_createSuper$2(Mx3dGeObject);function Mx3dGeObject(t){return _classCallCheck$1(this,Mx3dGeObject),p.call(this,t)}return _createClass$1(Mx3dGeObject)}(Fa),Ha=function(t){_inherits$1(Mx3dGeCurve,t);var p=_createSuper$2(Mx3dGeCurve);function Mx3dGeCurve(t){return _classCallCheck$1(this,Mx3dGeCurve),p.call(this,t)}return _createClass$1(Mx3dGeCurve)}(za),$a=function(t){_inherits$1(Mx3dGeConic,t);var p=_createSuper$2(Mx3dGeConic);function Mx3dGeConic(t){return _classCallCheck$1(this,Mx3dGeConic),p.call(this,t)}return _createClass$1(Mx3dGeConic)}(Ha),Ya=function(t){_inherits$1(Mx3dGePoint,t);var p=_createSuper$2(Mx3dGePoint);function Mx3dGePoint(t,h,x){var M;return _classCallCheck$1(this,Mx3dGePoint),0===arguments.length?(M=p.call(this)).initTempObject(new Ea.imp.Mx3dGePoint):t instanceof Array&&"number"==typeof t[0]?(M=p.call(this)).initTempObject(new Ea.imp.Mx3dGePoint(t[0],t[1],t[2])):"number"==typeof t&&"number"==typeof h&&"number"==typeof x?(M=p.call(this)).initTempObject(new Ea.imp.Mx3dGePoint(t,h,x)):t instanceof Object&&1===arguments.length&&(M=p.call(this,t)),_possibleConstructorReturn$1(M)}return _createClass$1(Mx3dGePoint,[{key:"X",value:function X(){return this.imp.X()}},{key:"Y",value:function Y(){return this.imp.Y()}},{key:"Z",value:function Z(){return this.imp.Z()}},{key:"setX",value:function setX(t){this.imp.setX(t)}},{key:"setY",value:function setY(t){this.imp.setY(t)}},{key:"setZ",value:function setZ(t){this.imp.setZ(t)}},{key:"setXYZ",value:function setXYZ(t,p,h){this.imp.setX(t),this.imp.setY(p),this.imp.setZ(h)}},{key:"Vertex",value:function Vertex(){return new ao(this.imp.Vertex())}}]),Mx3dGePoint}(za),Ka=function(t){_inherits$1(Mx3dGeTrsf,t);var p=_createSuper$2(Mx3dGeTrsf);function Mx3dGeTrsf(t){var h;return _classCallCheck$1(this,Mx3dGeTrsf),t?h=p.call(this,t):(h=p.call(this)).initTempObject(new Ea.imp.Mx3dGeTrsf),_possibleConstructorReturn$1(h)}return _createClass$1(Mx3dGeTrsf,[{key:"SetMirrorByPoint",value:function SetMirrorByPoint(t){t=uniToPoint(t),this.imp.SetMirrorByPoint(t.getImp())}},{key:"SetMirrorByAxis",value:function SetMirrorByAxis(t){this.imp.SetMirrorByAxis(t.getImp())}},{key:"SetMirrorByCSYSR",value:function SetMirrorByCSYSR(t){this.imp.SetMirrorByCSYSR(t.getImp())}},{key:"SetRotation",value:function SetRotation(t,p){this.imp.SetRotation(t.getImp(),p)}},{key:"SetScale",value:function SetScale(t,p){t=uniToPoint(t),this.imp.SetScale(t.getImp(),p)}},{key:"SetTranslationByVec",value:function SetTranslationByVec(t){t=uniToVec(t),this.imp.SetTranslationByVec(t.getImp())}},{key:"SetTranslationBy2Points",value:function SetTranslationBy2Points(t,p){t=uniToPoint(t),p=uniToPoint(p),this.imp.SetTranslationBy2Points(t.getImp(),p.getImp())}},{key:"SetTranslationPart",value:function SetTranslationPart(t){this.imp.SetTranslationPart(t.getImp())}},{key:"SetScaleFactor",value:function SetScaleFactor(t){this.imp.SetScaleFactor(t)}},{key:"SetValues",value:function SetValues(t,p,h,x,M,k,I,N,V,ee,te,re){this.imp.SetValues(t,p,h,x,M,k,I,N,V,ee,te,re)}},{key:"IsNegative",value:function IsNegative(){return this.imp.IsNegative()}},{key:"ScaleFactor",value:function ScaleFactor(){return this.imp.ScaleFactor()}},{key:"Value",value:function Value(t,p){return this.imp.Value(t,p)}},{key:"Invert",value:function Invert(){this.imp.Invert()}},{key:"Inverted",value:function Inverted(){return new Mx3dGeTrsf(this.imp.Inverted())}},{key:"Multiplied",value:function Multiplied(t){return new Mx3dGeTrsf(this.imp.Multiplied(t.getImp()))}},{key:"Multiply",value:function Multiply(t){this.imp.Multiply(t.getImp())}},{key:"PreMultiply",value:function PreMultiply(t){this.imp.PreMultiply(t.getImp())}},{key:"Power",value:function Power(t){this.imp.Power(t)}},{key:"Powered",value:function Powered(t){return new Mx3dGeTrsf(this.imp.Powered(t))}},{key:"Transforms",value:function Transforms(t,p,h){this.imp.Transforms(t,p,h)}}]),Mx3dGeTrsf}(za),qa=function(t){_inherits$1(Mx3dGeAxis,t);var p=_createSuper$2(Mx3dGeAxis);function Mx3dGeAxis(t,h){var x;return _classCallCheck$1(this,Mx3dGeAxis),0===arguments.length?(x=p.call(this)).initTempObject(new Ea.imp.Mx3dGeAxis):isUniPoint(t)&&isUniDir(h)?(x=p.call(this),t=uniToPoint(t),h=uniToDir(h),x.initTempObject(new Ea.imp.Mx3dGeAxis(t.getImp(),h.getImp()))):t instanceof Object&&1===arguments.length&&(x=p.call(this,t)),_possibleConstructorReturn$1(x)}return _createClass$1(Mx3dGeAxis,[{key:"Direction",value:function Direction(){return new Za(this.imp.Direction())}},{key:"Location",value:function Location(){return new Ya(this.imp.Location())}},{key:"SetDirection",value:function SetDirection(t){this.imp.SetDirection(t.getImp())}},{key:"SetLocation",value:function SetLocation(t){t=uniToPoint(t),this.imp.SetLocation(t.getImp())}}]),Mx3dGeAxis}(za),Za=function(t){_inherits$1(Mx3dGeDir,t);var p=_createSuper$2(Mx3dGeDir);function Mx3dGeDir(t,h,x){var M;return _classCallCheck$1(this,Mx3dGeDir),0===arguments.length?(M=p.call(this)).initTempObject(new Ea.imp.Mx3dGeDir):"number"==typeof t&&"number"==typeof h&&"number"==typeof x?(M=p.call(this)).initTempObject(new Ea.imp.Mx3dGeDir(t,h,x)):t instanceof Object&&1===arguments.length&&(M=p.call(this,t)),_possibleConstructorReturn$1(M)}return _createClass$1(Mx3dGeDir,[{key:"X",value:function X(){return this.imp.X()}},{key:"Y",value:function Y(){return this.imp.Y()}},{key:"Z",value:function Z(){return this.imp.Z()}},{key:"SetX",value:function SetX(t){this.imp.SetX(t)}},{key:"SetY",value:function SetY(t){this.imp.SetY(t)}},{key:"SetZ",value:function SetZ(t){this.imp.SetZ(t)}},{key:"SetXYZ",value:function SetXYZ(t,p,h){this.imp.SetXYZ(t,p,h)}},{key:"IsEqual",value:function IsEqual(t,p){return this.imp.IsEqual(t.getImp(),p)}},{key:"IsNormal",value:function IsNormal(t,p){return this.imp.IsNormal(t.getImp(),p)}},{key:"IsOpposite",value:function IsOpposite(t,p){return this.imp.IsOpposite(t.getImp(),p)}},{key:"IsParallel",value:function IsParallel(t,p){return this.imp.IsParallel(t.getImp(),p)}},{key:"Angle",value:function Angle(t){return this.imp.Angle(t.getImp())}},{key:"AngleWithRef",value:function AngleWithRef(t,p){return this.imp.AngleWithRef(t.getImp(),p.getImp())}},{key:"Cross",value:function Cross(t){this.imp.Cross(t.getImp())}},{key:"Crossed",value:function Crossed(t){return new Mx3dGeDir(this.imp.Crossed(t.getImp()))}},{key:"CrossCross",value:function CrossCross(t,p){this.imp.CrossCross(t.getImp(),p.getImp())}},{key:"CrossCrossed",value:function CrossCrossed(t,p){return new Mx3dGeDir(this.imp.CrossCrossed(t.getImp(),p.getImp()))}},{key:"Dot",value:function Dot(t){return this.imp.Dot(t.getImp())}},{key:"DotCross",value:function DotCross(t,p){return this.imp.DotCross(t.getImp(),p.getImp())}},{key:"Reverse",value:function Reverse(){this.imp.Reverse()}},{key:"Reversed",value:function Reversed(){return new Mx3dGeDir(this.imp.Reversed())}},{key:"MirrorByVec",value:function MirrorByVec(t){this.imp.MirrorByVec(t.getImp())}},{key:"MirroredByVec",value:function MirroredByVec(t){return new Mx3dGeDir(this.imp.MirroredByVec(t.getImp()))}},{key:"MirrorByAxis",value:function MirrorByAxis(t){this.imp.MirrorByAxis(t.getImp())}},{key:"MirroredByAxis",value:function MirroredByAxis(t){return new Mx3dGeDir(this.imp.MirroredByAxis(t.getImp()))}},{key:"MirrorByCSYSR",value:function MirrorByCSYSR(t){this.imp.MirrorByCSYSR(t.getImp())}},{key:"MirroredByCSYSR",value:function MirroredByCSYSR(t){return new Mx3dGeDir(this.imp.MirroredByCSYSR(t.getImp()))}},{key:"Rotate",value:function Rotate(t,p){this.imp.Rotate(t.getImp(),p)}},{key:"Rotated",value:function Rotated(t,p){return new Mx3dGeDir(this.imp.Rotated(t.getImp(),p))}},{key:"Transform",value:function Transform(t){this.imp.Transform(t.getImp())}},{key:"Transformed",value:function Transformed(t){return new Mx3dGeDir(this.imp.Transformed(t.getImp()))}}]),Mx3dGeDir}(za),Ja=function(t){_inherits$1(Mx3dGeEllipse,t);var p=_createSuper$2(Mx3dGeEllipse);function Mx3dGeEllipse(t,h,x){var M;return _classCallCheck$1(this,Mx3dGeEllipse),t||h||x?t instanceof Mo&&"number"==typeof h&&"number"==typeof x?(M=p.call(this)).initTempObject(new Ea.imp.Mx3dGeEllipse(t.getImp(),h,x)):t instanceof Object&&(M=p.call(this,t)):(M=p.call(this)).initTempObject(new Ea.imp.Mx3dGeEllipse),_possibleConstructorReturn$1(M)}return _createClass$1(Mx3dGeEllipse,[{key:"SetAxis",value:function SetAxis(t){this.imp.SetAxis(t.getImp())}},{key:"SetLocation",value:function SetLocation(t){this.imp.SetLocation(t.getImp())}},{key:"SetMajorRadius",value:function SetMajorRadius(t){this.imp.SetMajorRadius(t)}},{key:"SetMinorRadius",value:function SetMinorRadius(t){this.imp.SetMinorRadius(t)}},{key:"SetPosition",value:function SetPosition(t){this.imp.SetPosition(t.getImp())}},{key:"Area",value:function Area(){return this.imp.Area()}},{key:"Axis",value:function Axis(){return new qa(this.imp.Axis())}},{key:"Directrix1",value:function Directrix1(){return new qa(this.imp.Directrix1())}},{key:"Directrix2",value:function Directrix2(){return new qa(this.imp.Directrix2())}},{key:"Eccentricity",value:function Eccentricity(){return this.imp.Eccentricity()}},{key:"Focal",value:function Focal(){return this.imp.Focal()}},{key:"Focus1",value:function Focus1(){return new Ya(this.imp.Focus1())}},{key:"Focus2",value:function Focus2(){return new Ya(this.imp.Focus2())}},{key:"Location",value:function Location(){return new Ya(this.imp.Location())}},{key:"MajorRadius",value:function MajorRadius(){return this.imp.MajorRadius()}},{key:"MinorRadius",value:function MinorRadius(){return this.imp.MinorRadius()}},{key:"Parameter",value:function Parameter(){return this.imp.Parameter()}},{key:"Position",value:function Position(){return new Mo(this.imp.Position())}},{key:"XAxis",value:function XAxis(){return new qa(this.imp.XAxis())}},{key:"YAxis",value:function YAxis(){return new qa(this.imp.YAxis())}},{key:"MirrorByPoint",value:function MirrorByPoint(t){this.imp.MirrorByPoint(t.getImp())}},{key:"MirroredByPoint",value:function MirroredByPoint(t){return new Mx3dGeEllipse(this.imp.MirroredByPoint(t.getImp()))}},{key:"MirrorByAxis",value:function MirrorByAxis(t){this.imp.MirrorByAxis(t.getImp())}},{key:"MirroredByAxis",value:function MirroredByAxis(t){return new Mx3dGeEllipse(this.imp.MirroredByAxis(t.getImp()))}},{key:"MirrorByCSYSR",value:function MirrorByCSYSR(t){this.imp.MirrorByCSYSR(t.getImp())}},{key:"MirroredByCSYSR",value:function MirroredByCSYSR(t){return new Mx3dGeEllipse(this.imp.MirroredByCSYSR(t.getImp()))}},{key:"Rotate",value:function Rotate(t,p){this.imp.Rotate(t.getImp(),p)}},{key:"Rotated",value:function Rotated(t,p){return new Mx3dGeEllipse(this.imp.Rotated(t.getImp(),p))}},{key:"Scale",value:function Scale(t,p){this.imp.Scale(t.getImp(),p)}},{key:"Scaled",value:function Scaled(t,p){return new Mx3dGeEllipse(this.imp.Scaled(t.getImp(),p))}},{key:"Transform",value:function Transform(t){this.imp.Transform(t.getImp())}},{key:"Transformed",value:function Transformed(t){return new Mx3dGeEllipse(this.imp.Transformed(t.getImp()))}},{key:"TranslateByVec",value:function TranslateByVec(t){this.imp.TranslateByVec(t.getImp())}},{key:"TranslatedByVec",value:function TranslatedByVec(t){return new Mx3dGeEllipse(this.imp.TranslatedByVec(t.getImp()))}},{key:"TranslateBy2Points",value:function TranslateBy2Points(t,p){this.imp.TranslateBy2Points(t.getImp(),p.getImp())}},{key:"TranslatedBy2Points",value:function TranslatedBy2Points(t,p){return new Mx3dGeEllipse(this.imp.TranslatedBy2Points(t.getImp(),p.getImp()))}}]),Mx3dGeEllipse}(za),Qa=function(t){_inherits$1(Mx3dGeHyperbola,t);var p=_createSuper$2(Mx3dGeHyperbola);function Mx3dGeHyperbola(t,h,x){var M;return _classCallCheck$1(this,Mx3dGeHyperbola),t||h||x?t instanceof Mo&&"number"==typeof h&&"number"==typeof x?(M=p.call(this)).initTempObject(new Ea.imp.Mx3dGeHyperbola(t.getImp(),h,x)):t instanceof Object&&(M=p.call(this,t)):(M=p.call(this)).initTempObject(new Ea.imp.Mx3dGeHyperbola),_possibleConstructorReturn$1(M)}return _createClass$1(Mx3dGeHyperbola,[{key:"SetAxis",value:function SetAxis(t){this.imp.SetAxis(t.getImp())}},{key:"SetLocation",value:function SetLocation(t){this.imp.SetLocation(t.getImp())}},{key:"SetMajorRadius",value:function SetMajorRadius(t){this.imp.SetMajorRadius(t)}},{key:"SetMinorRadius",value:function SetMinorRadius(t){this.imp.SetMinorRadius(t)}},{key:"SetPosition",value:function SetPosition(t){this.imp.SetPosition(t.getImp())}},{key:"Asymptote1",value:function Asymptote1(){return new qa(this.imp.Asymptote1())}},{key:"Asymptote2",value:function Asymptote2(){return new qa(this.imp.Asymptote2())}},{key:"Axis",value:function Axis(){return new qa(this.imp.Axis())}},{key:"ConjugateBranch1",value:function ConjugateBranch1(){return new Mx3dGeHyperbola(this.imp.ConjugateBranch1())}},{key:"ConjugateBranch2",value:function ConjugateBranch2(){return new Mx3dGeHyperbola(this.imp.ConjugateBranch2())}},{key:"Directrix1",value:function Directrix1(){return new qa(this.imp.Directrix1())}},{key:"Directrix2",value:function Directrix2(){return new qa(this.imp.Directrix2())}},{key:"Eccentricity",value:function Eccentricity(){return this.imp.Eccentricity()}},{key:"Focal",value:function Focal(){return this.imp.Focal()}},{key:"Focus1",value:function Focus1(){return new Ya(this.imp.Focus1())}},{key:"Focus2",value:function Focus2(){return new Ya(this.imp.Focus2())}},{key:"Location",value:function Location(){return new Ya(this.imp.Location())}},{key:"MajorRadius",value:function MajorRadius(){return this.imp.MajorRadius()}},{key:"MinorRadius",value:function MinorRadius(){return this.imp.MinorRadius()}},{key:"OtherBranch",value:function OtherBranch(){return new Mx3dGeHyperbola(this.imp.OtherBranch())}},{key:"Parameter",value:function Parameter(){return this.imp.Parameter()}},{key:"Position",value:function Position(){return new Mo(this.imp.Position())}},{key:"XAxis",value:function XAxis(){return new qa(this.imp.XAxis())}},{key:"YAxis",value:function YAxis(){return new qa(this.imp.YAxis())}},{key:"MirrorByPoint",value:function MirrorByPoint(t){this.imp.MirrorByPoint(t.getImp())}},{key:"MirroredByPoint",value:function MirroredByPoint(t){return new Mx3dGeHyperbola(this.imp.MirroredByPoint(t.getImp()))}},{key:"MirrorByAxis",value:function MirrorByAxis(t){this.imp.MirrorByAxis(t.getImp())}},{key:"MirroredByAxis",value:function MirroredByAxis(t){return new Mx3dGeHyperbola(this.imp.MirroredByAxis(t.getImp()))}},{key:"MirrorByCSYSR",value:function MirrorByCSYSR(t){this.imp.MirrorByCSYSR(t.getImp())}},{key:"MirroredByCSYSR",value:function MirroredByCSYSR(t){return new Mx3dGeHyperbola(this.imp.MirroredByCSYSR(t.getImp()))}},{key:"Rotate",value:function Rotate(t,p){this.imp.Rotate(t.getImp(),p)}},{key:"Rotated",value:function Rotated(t,p){return new Mx3dGeHyperbola(this.imp.Rotated(t.getImp(),p))}},{key:"Scale",value:function Scale(t,p){this.imp.Scale(t.getImp(),p)}},{key:"Scaled",value:function Scaled(t,p){return new Mx3dGeHyperbola(this.imp.Scaled(t.getImp(),p))}},{key:"Transform",value:function Transform(t){this.imp.Transform(t.getImp())}},{key:"Transformed",value:function Transformed(t){return new Mx3dGeHyperbola(this.imp.Transformed(t.getImp()))}},{key:"TranslateByVec",value:function TranslateByVec(t){this.imp.TranslateByVec(t.getImp())}},{key:"TranslatedByVec",value:function TranslatedByVec(t){return new Mx3dGeHyperbola(this.imp.TranslatedByVec(t.getImp()))}},{key:"TranslateBy2Points",value:function TranslateBy2Points(t,p){this.imp.TranslateBy2Points(t.getImp(),p.getImp())}},{key:"TranslatedBy2Points",value:function TranslatedBy2Points(t,p){return new Mx3dGeHyperbola(this.imp.TranslatedBy2Points(t.getImp(),p.getImp()))}}]),Mx3dGeHyperbola}(za),eo=function(t){_inherits$1(Mx3dGeVec,t);var p=_createSuper$2(Mx3dGeVec);function Mx3dGeVec(t,h,x){var M;return _classCallCheck$1(this,Mx3dGeVec),0==arguments.length?(M=p.call(this)).initTempObject(new Ea.imp.Mx3dGeVec):t instanceof Ya&&h instanceof Ya&&2==arguments.length?(M=p.call(this)).initTempObject(new Ea.imp.Mx3dGeVec(t.getImp(),h.getImp())):"number"==typeof t&&"number"==typeof h&&3==arguments.length?(M=p.call(this)).initTempObject(new Ea.imp.Mx3dGeVec(t,h,x)):t instanceof Object&&1==arguments.length&&(M=p.call(this,t)),_possibleConstructorReturn$1(M)}return _createClass$1(Mx3dGeVec,[{key:"X",value:function X(){return this.imp.X()}},{key:"Y",value:function Y(){return this.imp.Y()}},{key:"Z",value:function Z(){return this.imp.Z()}},{key:"SetX",value:function SetX(t){this.imp.SetX(t)}},{key:"SetY",value:function SetY(t){this.imp.SetY(t)}},{key:"SetZ",value:function SetZ(t){this.imp.SetZ(t)}},{key:"SetXYZ",value:function SetXYZ(t,p,h){this.imp.SetXYZ(t,p,h)}},{key:"IsEqual",value:function IsEqual(t,p,h){return this.imp.IsEqual(t.getImp(),p,h)}},{key:"IsNormal",value:function IsNormal(t,p){return this.imp.IsNormal(t.getImp(),p)}},{key:"IsOpposite",value:function IsOpposite(t,p){return this.imp.IsOpposite(t.getImp(),p)}},{key:"IsParallel",value:function IsParallel(t,p){return this.imp.IsParallel(t.getImp(),p)}},{key:"Angle",value:function Angle(t){return this.imp.Angle(t.getImp())}},{key:"AngleWithRef",value:function AngleWithRef(t,p){return this.imp.AngleWithRef(t.getImp(),p.getImp())}},{key:"Magnitude",value:function Magnitude(){return this.imp.Magnitude()}},{key:"SquareMagnitude",value:function SquareMagnitude(){return this.imp.SquareMagnitude()}},{key:"Add",value:function Add(t){this.imp.Add(t.getImp())}},{key:"Added",value:function Added(t){return new Mx3dGeVec(this.imp.Added(t.getImp()))}},{key:"Subtract",value:function Subtract(t){this.imp.Subtract(t.getImp())}},{key:"Subtracted",value:function Subtracted(t){return new Mx3dGeVec(this.imp.Subtracted(t.getImp()))}},{key:"Multiply",value:function Multiply(t){this.imp.Multiply(t)}},{key:"Multiplied",value:function Multiplied(t){return new Mx3dGeVec(this.imp.Multiplied(t))}},{key:"Divide",value:function Divide(t){this.imp.Divide(t)}},{key:"Divided",value:function Divided(t){return new Mx3dGeVec(this.imp.Divided(t))}},{key:"Cross",value:function Cross(t){this.imp.Cross(t.getImp())}},{key:"Crossed",value:function Crossed(t){return new Mx3dGeVec(this.getImp().Crossed(t.getImp()))}},{key:"CrossMagnitude",value:function CrossMagnitude(t){return this.imp.CrossMagnitude(t.getImp())}},{key:"CrossSquareMagnitude",value:function CrossSquareMagnitude(t){return this.imp.CrossSquareMagnitude(t.getImp())}},{key:"CrossCross",value:function CrossCross(t,p){this.imp.CrossCross(t.getImp(),p.getImp())}},{key:"CrossCrossed",value:function CrossCrossed(t,p){return new Mx3dGeVec(this.imp.CrossCrossed(t.getImp(),p.getImp()))}},{key:"Dot",value:function Dot(t){return this.imp.Dot(t.getImp())}},{key:"DotCross",value:function DotCross(t,p){return this.imp.DotCross(t.getImp(),p.getImp())}},{key:"Normalize",value:function Normalize(){this.imp.Normalize()}},{key:"Normalized",value:function Normalized(){return new Mx3dGeVec(this.imp.Normalized())}},{key:"Reverse",value:function Reverse(){this.imp.Reverse()}},{key:"Reversed",value:function Reversed(){return new Mx3dGeVec(this.imp.Reversed())}},{key:"SetLinearForm",value:function SetLinearForm(t,p,h,x,M,k,I){isUniVec(t)&&isUniVec(p)&&2==arguments.length?(t=uniToVec(t),p=uniToVec(p),this.imp.SetLinearForm(t.getImp(),p.getImp())):"number"==typeof t&&isUniVec(p)&&isUniVec(h)&&3==arguments.length?(p=uniToVec(p),h=uniToVec(h),this.imp.SetLinearForm(t,p.getImp(),h.getImp())):"number"==typeof t&&isUniVec(p)&&"number"==typeof h&&isUniVec(x)&&4==arguments.length?(p=uniToVec(p),x=uniToVec(x),this.imp.SetLinearForm(t,p.getImp(),h,x.getImp())):"number"==typeof t&&isUniVec(p)&&"number"==typeof h&&isUniVec(x)&&isUniVec(M)&&5==arguments.length?(p=uniToVec(p),x=uniToVec(x),M=uniToVec(M),this.imp.SetLinearForm(t,p.getImp(),h,x.getImp(),M.getImp())):"number"==typeof t&&isUniVec(p)&&"number"==typeof h&&isUniVec(x)&&"number"==typeof M&&isUniVec(k)&&6==arguments.length?(p=uniToVec(p),x=uniToVec(x),k=uniToVec(k),this.imp.SetLinearForm(t,p.getImp(),h,x.getImp(),M,k.getImp())):"number"==typeof t&&isUniVec(p)&&"number"==typeof h&&isUniVec(x)&&"number"==typeof M&&isUniVec(k)&&isUniVec(I)&&(p=uniToVec(p),x=uniToVec(x),k=uniToVec(k),I=uniToVec(I),this.imp.SetLinearForm(t,p.getImp(),h,x.getImp(),M,k.getImp(),I.getImp()))}},{key:"MirrorByVec",value:function MirrorByVec(t){this.imp.MirrorByVec(t.getImp())}},{key:"MirroredByVec",value:function MirroredByVec(t){return new Mx3dGeVec(this.imp.MirroredByVec(t.getImp()))}},{key:"MirrorByAxis",value:function MirrorByAxis(t){this.imp.MirrorByAxis(t.getImp())}},{key:"MirroredByAxis",value:function MirroredByAxis(t){return new Mx3dGeVec(this.imp.MirroredByAxis(t.getImp()))}},{key:"MirrorByCSYSR",value:function MirrorByCSYSR(t){this.imp.MirrorByCSYSR(t.getImp())}},{key:"MirroredByCSYSR",value:function MirroredByCSYSR(t){return new Mx3dGeVec(this.imp.MirroredByCSYSR(t.getImp()))}},{key:"Rotate",value:function Rotate(t,p){this.imp.Rotate(t.getImp(),p)}},{key:"Rotated",value:function Rotated(t,p){return new Mx3dGeVec(this.imp.Rotated(t.getImp(),p))}},{key:"Scale",value:function Scale(t){this.imp.Scale(t)}},{key:"Scaled",value:function Scaled(t){return new Mx3dGeVec(this.imp.Scaled(t))}},{key:"Transform",value:function Transform(t){this.imp.Transform(t.getImp())}},{key:"Transformed",value:function Transformed(t){return new Mx3dGeVec(this.imp.Transformed(t.getImp()))}}]),Mx3dGeVec}(za),to=function(t){_inherits$1(Mx3dGeBndBox,t);var p=_createSuper$2(Mx3dGeBndBox);function Mx3dGeBndBox(t,h){var x;return _classCallCheck$1(this,Mx3dGeBndBox),t?t instanceof Ya&&h instanceof Ya?(x=p.call(this)).initTempObject(new Ea.imp.Mx3dGeBndBox(t.getImp(),h.getImp())):t instanceof Object&&1===arguments.length&&(x=p.call(this,t)):(x=p.call(this)).initTempObject(new Ea.imp.Mx3dGeBndBox),_possibleConstructorReturn$1(x)}return _createClass$1(Mx3dGeBndBox,[{key:"SetWhole",value:function SetWhole(){this.imp.SetWhole()}},{key:"SetVoid",value:function SetVoid(){this.imp.SetVoid()}},{key:"Set",value:function Set(t,p){this.imp.Set(t.getImp(),p.getImp())}},{key:"Update",value:function Update(t,p,h,x,M,k){this.imp.Update(t,p,h,x,M,k)}},{key:"GetGap",value:function GetGap(){return this.imp.GetGap()}},{key:"SetGap",value:function SetGap(t){this.imp.SetGap(t)}},{key:"Enlarge",value:function Enlarge(t){this.imp.Enlarge(t)}},{key:"CornerMin",value:function CornerMin(){return new Ya(this.imp.CornerMin())}},{key:"CornerMax",value:function CornerMax(){return new Ya(this.imp.CornerMax())}},{key:"OpenXmin",value:function OpenXmin(){this.imp.OpenXmin()}},{key:"OpenXmax",value:function OpenXmax(){this.imp.OpenXmax()}},{key:"OpenYmin",value:function OpenYmin(){this.imp.OpenYmin()}},{key:"OpenYmax",value:function OpenYmax(){this.imp.OpenYmax()}},{key:"OpenZmin",value:function OpenZmin(){this.imp.OpenZmin()}},{key:"OpenZmax",value:function OpenZmax(){this.imp.OpenZmax()}},{key:"IsOpen",value:function IsOpen(){return this.imp.IsOpen()}},{key:"IsOpenXmin",value:function IsOpenXmin(){return this.imp.IsOpenXmin()}},{key:"IsOpenXmax",value:function IsOpenXmax(){return this.imp.IsOpenXmax()}},{key:"IsOpenYmin",value:function IsOpenYmin(){return this.imp.IsOpenYmin()}},{key:"IsOpenYmax",value:function IsOpenYmax(){return this.imp.IsOpenYmax()}},{key:"IsOpenZmin",value:function IsOpenZmin(){return this.imp.IsOpenZmin()}},{key:"IsOpenZmax",value:function IsOpenZmax(){return this.imp.IsOpenZmax()}},{key:"IsWhole",value:function IsWhole(){return this.imp.IsWhole()}},{key:"IsVoid",value:function IsVoid(){return this.imp.IsVoid()}},{key:"IsXThin",value:function IsXThin(t){return this.imp.IsXThin(t)}},{key:"IsYThin",value:function IsYThin(t){return this.imp.IsYThin(t)}},{key:"IsZThin",value:function IsZThin(t){return this.imp.IsZThin(t)}},{key:"IsThin",value:function IsThin(t){return this.imp.IsThin(t)}},{key:"Transformed",value:function Transformed(t){return new Mx3dGeBndBox(this.imp.Transformed(t.getImp()))}},{key:"AddBndBox",value:function AddBndBox(t){this.imp.AddBndBox(t.getImp())}},{key:"AddPoint",value:function AddPoint(t){this.imp.AddPoint(t.getImp())}},{key:"AddPointDir",value:function AddPointDir(t,p){this.imp.AddPointDir(t.getImp(),p.getImp())}},{key:"AddDir",value:function AddDir(t){this.imp.AddDir(t.getImp())}},{key:"IsOutPoint",value:function IsOutPoint(t){return this.imp.IsOutPoint(t.getImp())}},{key:"IsOutBndBox",value:function IsOutBndBox(t,p){return p?this.imp.IsOutBndBox(t.getImp(),p.getImp()):this.imp.IsOutBndBox(t.getImp())}},{key:"IsOutTBT",value:function IsOutTBT(t,p,h){return this.imp.IsOutTBT(t.getImp(),p.getImp(),h.getImp())}},{key:"IsOutPPD",value:function IsOutPPD(t,p,h){return this.imp.IsOutPPD(t.getImp(),p.getImp(),h.getImp())}},{key:"Distance",value:function Distance(t){return this.imp.Distance(t.getImp())}},{key:"SquareExtent",value:function SquareExtent(){return this.imp.SquareExtent()}},{key:"FinitePart",value:function FinitePart(){return new Mx3dGeBndBox(this.imp.FinitePart())}},{key:"HasFinitePart",value:function HasFinitePart(){return this.imp.HasFinitePart()}}]),Mx3dGeBndBox}(za),ro=function(t){_inherits$1(Mx3dGeCircle,t);var p=_createSuper$2(Mx3dGeCircle);function Mx3dGeCircle(t,h){var x;return _classCallCheck$1(this,Mx3dGeCircle),t||h?t instanceof Mo&&"number"==typeof h?(x=p.call(this)).initTempObject(new Ea.imp.Mx3dGeCircle(t.getImp(),h)):t instanceof Object&&(x=p.call(this,t)):(x=p.call(this)).initTempObject(new Ea.imp.Mx3dGeCircle),_possibleConstructorReturn$1(x)}return _createClass$1(Mx3dGeCircle,[{key:"SetAxis",value:function SetAxis(t){this.imp.SetAxis(t.getImp())}},{key:"SetLocation",value:function SetLocation(t){this.imp.SetLocation(t.getImp())}},{key:"SetPosition",value:function SetPosition(t){this.imp.SetPosition(t.getImp())}},{key:"SetRadius",value:function SetRadius(t){this.imp.SetRadius(t)}},{key:"Area",value:function Area(){return this.imp.Area()}},{key:"Axis",value:function Axis(){return new qa(this.imp.Axis())}},{key:"Length",value:function Length(){return this.imp.Length()}},{key:"Location",value:function Location(){return new Ya(this.imp.Location())}},{key:"Position",value:function Position(){return new Mo(this.imp.Position())}},{key:"Radius",value:function Radius(){return this.imp.Radius()}},{key:"XAxis",value:function XAxis(){return new qa(this.imp.XAxis())}},{key:"YAxis",value:function YAxis(){return new qa(this.imp.YAxis())}},{key:"Distance",value:function Distance(t){return this.imp.Distance(t.getImp())}},{key:"SquareDistance",value:function SquareDistance(t){return this.imp.SquareDistance(t.getImp())}},{key:"Contains",value:function Contains(t,p){return this.imp.Contains(t.getImp(),p)}},{key:"MirrorByPoint",value:function MirrorByPoint(t){this.imp.MirrorByPoint(t.getImp())}},{key:"MirroredByPoint",value:function MirroredByPoint(t){return new Mx3dGeCircle(this.imp.MirroredByPoint(t.getImp()))}},{key:"MirrorByAxis",value:function MirrorByAxis(t){this.imp.MirrorByAxis(t.getImp())}},{key:"MirroredByAxis",value:function MirroredByAxis(t){return new Mx3dGeCircle(this.imp.MirroredByAxis(t.getImp()))}},{key:"MirrorByCSYSR",value:function MirrorByCSYSR(t){this.imp.MirrorByCSYSR(t.getImp())}},{key:"MirroredByCSYSR",value:function MirroredByCSYSR(t){return new Mx3dGeCircle(this.imp.MirroredByCSYSR(t.getImp()))}},{key:"Rotate",value:function Rotate(t,p){this.imp.Rotate(t.getImp(),p)}},{key:"Rotated",value:function Rotated(t,p){return new Mx3dGeCircle(this.imp.Rotated(t.getImp(),p))}},{key:"Scale",value:function Scale(t,p){this.imp.Scale(t.getImp(),p)}},{key:"Scaled",value:function Scaled(t,p){return new Mx3dGeCircle(this.imp.Scaled(t.getImp(),p))}},{key:"Transform",value:function Transform(t){this.imp.Transform(t.getImp())}},{key:"Transformed",value:function Transformed(t){return new Mx3dGeCircle(this.imp.Transformed(t.getImp()))}},{key:"TranslateByVec",value:function TranslateByVec(t){this.imp.TranslateByVec(t.getImp())}},{key:"TranslatedByVec",value:function TranslatedByVec(t){return new Mx3dGeCircle(this.imp.TranslatedByVec(t.getImp()))}},{key:"TranslateBy2Points",value:function TranslateBy2Points(t,p){this.imp.TranslateBy2Points(t.getImp(),p.getImp())}},{key:"TranslatedBy2Points",value:function TranslatedBy2Points(t,p){return new Mx3dGeCircle(this.imp.TranslatedBy2Points(t.getImp(),p.getImp()))}}]),Mx3dGeCircle}(za),no=function(t){_inherits$1(Mx3dShapeObject,t);var p=_createSuper$2(Mx3dShapeObject);function Mx3dShapeObject(t){return _classCallCheck$1(this,Mx3dShapeObject),_possibleConstructorReturn$1(t?p.call(this,t):p.call(this))}return _createClass$1(Mx3dShapeObject,[{key:"getBndBox",value:function getBndBox(){return new to(this.imp.getBndBox())}},{key:"reverse",value:function reverse(){this.imp.reverse()}},{key:"reversed",value:function reversed(){return new Mx3dShapeObject(this.imp.reversed())}},{key:"Orientation",value:function Orientation(){return this.imp.Orientation()}},{key:"move",value:function move(t){this.imp.move(t.getImp())}},{key:"moved",value:function moved(t){return new Mx3dShapeObject(this.imp.moved(t.getImp()))}},{key:"clone",value:function clone(){return new Mx3dShapeObject(this.imp.clone())}},{key:"fuse",value:function fuse(t){return new Mx3dShapeObject(this.imp.fuse(t.getImp()))}},{key:"cut",value:function cut(t){return new Mx3dShapeObject(this.imp.cut(t.getImp()))}},{key:"common",value:function common(t){return new Mx3dShapeObject(this.imp.common(t.getImp()))}},{key:"section",value:function section(t){return new Mx3dShapeObject(this.imp.section(t.getImp()))}},{key:"spliter",value:function spliter(t){var p=new vo;t.forEach((function(t){return p.Append(t)}));for(var h=new vo(this.imp.spliter(p.getImp())),x=new Array,M=1;M<=h.Length();M++){var k=h.Value(M);x.push(k)}return x}},{key:"MirrorByPoint",value:function MirrorByPoint(t){this.imp.MirrorByPoint(t.getImp())}},{key:"MirroredByPoint",value:function MirroredByPoint(t){return new Mx3dShapeObject(this.imp.MirroredByPoint(t.getImp()))}},{key:"MirrorByAxis",value:function MirrorByAxis(t){this.imp.MirrorByAxis(t.getImp())}},{key:"MirroredByAxis",value:function MirroredByAxis(t){return new Mx3dShapeObject(this.imp.MirroredByAxis(t.getImp()))}},{key:"MirrorByCSYSR",value:function MirrorByCSYSR(t){this.imp.MirrorByCSYSR(t.getImp())}},{key:"MirroredByCSYSR",value:function MirroredByCSYSR(t){return new Mx3dShapeObject(this.imp.MirroredByCSYSR(t.getImp()))}},{key:"Rotate",value:function Rotate(t,p){this.imp.Rotate(t.getImp(),p)}},{key:"Rotated",value:function Rotated(t,p){return new Mx3dShapeObject(this.imp.Rotated(t.getImp(),p))}},{key:"Scale",value:function Scale(t,p){this.imp.Scale(t.getImp(),p)}},{key:"Scaled",value:function Scaled(t,p){return new Mx3dShapeObject(this.imp.Scaled(t.getImp(),p))}},{key:"Transform",value:function Transform(t){this.imp.Transform(t.getImp())}},{key:"Transformed",value:function Transformed(t){return new Mx3dShapeObject(this.imp.Transformed(t.getImp()))}},{key:"TranslateByVec",value:function TranslateByVec(t,p,h){t instanceof eo?this.imp.TranslateByVec(t.getImp()):this.imp.TranslateByVec(t,p,h)}},{key:"TranslatedByVec",value:function TranslatedByVec(t,p,h){return new Mx3dShapeObject(t instanceof eo?this.imp.TranslatedByVec(t.getImp()):this.imp.TranslatedByVec(t,p,h))}},{key:"TranslateBy2Points",value:function TranslateBy2Points(t,p){this.imp.TranslateBy2Points(t.getImp(),p.getImp())}},{key:"TranslatedBy2Points",value:function TranslatedBy2Points(t,p){return new Mx3dShapeObject(this.imp.TranslatedBy2Points(t.getImp(),p.getImp()))}},{key:"Explore",value:function Explore(t){for(var p=new vo(this.imp.Explore(t)),h=new Array,x=1;x<=p.Length();x++){var M=p.Value(x);h.push(M)}return h}},{key:"ShapeType",value:function ShapeType(){return this.imp.ShapeType()}},{key:"Quantities",value:function Quantities(t){return this.imp.Quantities(t)}},{key:"Centroid",value:function Centroid(t){return new Ya(this.imp.Centroid(t))}}]),Mx3dShapeObject}(Fa),io=function(t){_inherits$1(Mx3dShapeFace,t);var p=_createSuper$2(Mx3dShapeFace);function Mx3dShapeFace(t){var h;return _classCallCheck$1(this,Mx3dShapeFace),t?h=p.call(this,t):(h=p.call(this)).initTempObject(new Ea.imp.Mx3dShapeFace),_possibleConstructorReturn$1(h)}return _createClass$1(Mx3dShapeFace)}(no),ao=function(t){_inherits$1(Mx3dShapeVertex,t);var p=_createSuper$2(Mx3dShapeVertex);function Mx3dShapeVertex(t){var h;return _classCallCheck$1(this,Mx3dShapeVertex),t?h=p.call(this,t):(h=p.call(this)).initTempObject(new Ea.imp.Mx3dShapeVertex),_possibleConstructorReturn$1(h)}return _createClass$1(Mx3dShapeVertex)}(no),oo=function(t){_inherits$1(Mx3dShapeEdge,t);var p=_createSuper$2(Mx3dShapeEdge);function Mx3dShapeEdge(t,h){var x;return _classCallCheck$1(this,Mx3dShapeEdge),t?t instanceof Ya&&h instanceof Ya?(x=p.call(this)).initTempObject(new Ea.imp.Mx3dShapeEdge(t.getImp(),h.getImp())):x=p.call(this,t):(x=p.call(this)).initTempObject(new Ea.imp.Mx3dShapeEdge),_possibleConstructorReturn$1(x)}return _createClass$1(Mx3dShapeEdge)}(no),so=function(t){_inherits$1(Mx3dShapeWire,t);var p=_createSuper$2(Mx3dShapeWire);function Mx3dShapeWire(t){var h;return _classCallCheck$1(this,Mx3dShapeWire),t?h=p.call(this,t):(h=p.call(this)).initTempObject(new Ea.imp.Mx3dShapeWire),_possibleConstructorReturn$1(h)}return _createClass$1(Mx3dShapeWire)}(no),co=function(t){_inherits$1(Mx3dShapeShell,t);var p=_createSuper$2(Mx3dShapeShell);function Mx3dShapeShell(t){var h;return _classCallCheck$1(this,Mx3dShapeShell),t?h=p.call(this,t):(h=p.call(this)).initTempObject(new Ea.imp.Mx3dShapeShell),_possibleConstructorReturn$1(h)}return _createClass$1(Mx3dShapeShell)}(no),uo=function(t){_inherits$1(Mx3dShapeSolid,t);var p=_createSuper$2(Mx3dShapeSolid);function Mx3dShapeSolid(t){var h;return _classCallCheck$1(this,Mx3dShapeSolid),t?h=p.call(this,t):(h=p.call(this)).initTempObject(new Ea.imp.Mx3dShapeSolid),_possibleConstructorReturn$1(h)}return _createClass$1(Mx3dShapeSolid)}(no),lo=function(t){_inherits$1(Mx3dShapeCompSolid,t);var p=_createSuper$2(Mx3dShapeCompSolid);function Mx3dShapeCompSolid(t){var h;return _classCallCheck$1(this,Mx3dShapeCompSolid),t?h=p.call(this,t):(h=p.call(this)).initTempObject(new Ea.imp.Mx3dShapeCompSolid),_possibleConstructorReturn$1(h)}return _createClass$1(Mx3dShapeCompSolid)}(no),po=function(t){_inherits$1(Mx3dShapeCompound,t);var p=_createSuper$2(Mx3dShapeCompound);function Mx3dShapeCompound(t){var h;return _classCallCheck$1(this,Mx3dShapeCompound),t?h=p.call(this,t):(h=p.call(this)).initTempObject(new Ea.imp.Mx3dShapeCompound),_possibleConstructorReturn$1(h)}return _createClass$1(Mx3dShapeCompound)}(no),ho=function(t){_inherits$1(Mx3dAlgoFillet,t);var p=_createSuper$2(Mx3dAlgoFillet);function Mx3dAlgoFillet(t,h){var x;return _classCallCheck$1(this,Mx3dAlgoFillet),t instanceof no&&"number"==typeof h?(x=p.call(this)).initTempObject(new Ea.imp.Mx3dAlgoFillet(t.getImp(),h)):x=p.call(this,t),_possibleConstructorReturn$1(x)}return _createClass$1(Mx3dAlgoFillet,[{key:"Add",value:function Add(t,p){this.imp.Add(t,p.getImp())}},{key:"Shape",value:function Shape(){return new no(this.imp.Shape())}}]),Mx3dAlgoFillet}(ja),fo=function(t){_inherits$1(Mx3dAlgoChamfer,t);var p=_createSuper$2(Mx3dAlgoChamfer);function Mx3dAlgoChamfer(t){var h;return _classCallCheck$1(this,Mx3dAlgoChamfer),t instanceof no?(h=p.call(this)).initTempObject(new Ea.imp.Mx3dAlgoChamfer(t.getImp())):t instanceof Object&&(h=p.call(this,t)),_possibleConstructorReturn$1(h)}return _createClass$1(Mx3dAlgoChamfer,[{key:"Add",value:function Add(t,p){this.imp.Add(t,p.getImp())}},{key:"Shape",value:function Shape(){return new no(this.imp.Shape())}}]),Mx3dAlgoChamfer}(ja),mo=function(t){_inherits$1(Mx3dAlgoFillet2d,t);var p=_createSuper$2(Mx3dAlgoFillet2d);function Mx3dAlgoFillet2d(t,h,x){var M;return _classCallCheck$1(this,Mx3dAlgoFillet2d),t?t instanceof so&&h instanceof Po?(M=p.call(this)).initTempObject(new Ea.imp.Mx3dAlgoFillet2d(t.getImp(),h.getImp())):t instanceof oo&&h instanceof oo&&x instanceof Po?(M=p.call(this)).initTempObject(new Ea.imp.Mx3dAlgoFillet2d(t.getImp(),h.getImp(),x.getImp())):M=p.call(this,t):(M=p.call(this)).initTempObject(new Ea.imp.Mx3dAlgoFillet2d),_possibleConstructorReturn$1(M)}return _createClass$1(Mx3dAlgoFillet2d,[{key:"Init",value:function Init(t,p,h){t instanceof so&&p instanceof Po?this.imp.Init(t.getImp(),p.getImp()):this.imp.Init(t.getImp(),p.getImp(),null==h?void 0:h.getImp())}},{key:"Perform",value:function Perform(t){return this.imp.Perform(t)}},{key:"NbResults",value:function NbResults(t){return this.imp.NbResults(t.getImp())}},{key:"Result",value:function Result(t,p,h){var x=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;return new oo(this.imp.Result(t.getImp(),p.getImp(),h.getImp(),x))}}]),Mx3dAlgoFillet2d}(ja),vo=function(t){_inherits$1(Mx3dShapeObjectSequence,t);var p=_createSuper$2(Mx3dShapeObjectSequence);function Mx3dShapeObjectSequence(t){var h;return _classCallCheck$1(this,Mx3dShapeObjectSequence),t?h=p.call(this,t):(h=p.call(this)).initTempObject(new Ea.imp.Mx3dShapeObjectSequence),_possibleConstructorReturn$1(h)}return _createClass$1(Mx3dShapeObjectSequence,[{key:"Length",value:function Length(){return this.imp.Length()}},{key:"Value",value:function Value(t){return new no(this.imp.Value(t))}},{key:"Remove",value:function Remove(t,p){p?this.imp.Remove(t,p):this.imp.Remove(t)}},{key:"Append",value:function Append(t){this.imp.Append(t.getImp())}},{key:"Prepend",value:function Prepend(t){this.imp.Prepend(t.getImp())}}]),Mx3dShapeObjectSequence}(Fa),yo=function(t){_inherits$1(Mx3dDbObject,t);var p=_createSuper$2(Mx3dDbObject);function Mx3dDbObject(t){return _classCallCheck$1(this,Mx3dDbObject),p.call(this,t)}return _createClass$1(Mx3dDbObject)}(Fa),xo=function(t){_inherits$1(Mx3dView,t);var p=_createSuper$2(Mx3dView);function Mx3dView(t){var h;return _classCallCheck$1(this,Mx3dView),(h=p.call(this)).initTempObject(t),h}return _createClass$1(Mx3dView,[{key:"getDocument",value:function getDocument(){return new So(this.imp.getDoc(),"from view")}},{key:"removeAll",value:function removeAll(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.imp.removeAll(t)}},{key:"removeSelected",value:function removeSelected(){this.imp.removeSelected()}},{key:"update",value:function update(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.imp.update(t,p)}},{key:"setProjectionType",value:function setProjectionType(t){this.imp.setProjectionType(t)}},{key:"showCenterTrihedron",value:function showCenterTrihedron(t){this.imp.showCenterTrihedron(t)}},{key:"fitAllObjects",value:function fitAllObjects(t){this.imp.fitAllObjects(t)}},{key:"enableXClipPlane",value:function enableXClipPlane(t){this.imp.enableXClipPlane(t)}},{key:"setXClipPlaneXPosition",value:function setXClipPlaneXPosition(t){this.imp.setXClipPlaneXPosition(t)}},{key:"setXClipPlaneReverse",value:function setXClipPlaneReverse(){this.imp.setXClipPlaneReverse()}},{key:"enableYClipPlane",value:function enableYClipPlane(t){this.imp.enableYClipPlane(t)}},{key:"setYClipPlaneYPosition",value:function setYClipPlaneYPosition(t){this.imp.setYClipPlaneYPosition(t)}},{key:"setYClipPlaneReverse",value:function setYClipPlaneReverse(){this.imp.setYClipPlaneReverse()}},{key:"enableZClipPlane",value:function enableZClipPlane(t){this.imp.enableZClipPlane(t)}},{key:"setZClipPlaneZPosition",value:function setZClipPlaneZPosition(t){this.imp.setZClipPlaneZPosition(t)}},{key:"setZClipPlaneReverse",value:function setZClipPlaneReverse(){this.imp.setZClipPlaneReverse()}},{key:"enableCustomClipPlane",value:function enableCustomClipPlane(t){this.imp.enableCustomClipPlane(t)}},{key:"setCustomClipPlanePosition",value:function setCustomClipPlanePosition(t){this.imp.setCustomClipPlanePosition(t)}},{key:"setCustomClipPlaneReverse",value:function setCustomClipPlaneReverse(){this.imp.setCustomClipPlaneReverse()}},{key:"setCustomClipPlaneDirection",value:function setCustomClipPlaneDirection(t,p,h){this.imp.setCustomClipPlaneDirection(t,p,h)}},{key:"displaySymbolText",value:function displaySymbolText(t){this.imp.displaySymbolText(t.getImp())}},{key:"displayDimension",value:function displayDimension(t){this.imp.displayDimension(t.getImp())}},{key:"addModelTexture",value:function addModelTexture(t){this.imp.addModelTexture(t)}},{key:"removeModelTexture",value:function removeModelTexture(){this.imp.removeModelTexture()}},{key:"setGradientBgColor",value:function setGradientBgColor(t,p,h){this.imp.setGradientBgColor(t.getImp(),p.getImp(),h)}},{key:"setProj",value:function setProj(t,p){this.imp.setProj(t,p)}},{key:"setSelectedColor",value:function setSelectedColor(t){this.imp.setSelectedColor(t.getImp())}},{key:"setSelectedMaterial",value:function setSelectedMaterial(t){this.imp.setSelectedMaterial(t.getImp())}},{key:"setDisplayMode",value:function setDisplayMode(t){this.imp.setDisplayMode(t)}},{key:"enableDirLightSrc",value:function enableDirLightSrc(t){this.imp.enableDirLightSrc(t)}},{key:"setCubemapBackground",value:function setCubemapBackground(t,p,h,x,M,k){this.imp.setCubemapBackground(t,p,h,x,M,k)}},{key:"setManipulatorEnabled",value:function setManipulatorEnabled(t){this.imp.setManipulatorEnabled(t)}}]),Mx3dView}(Fa),bo=function(t){_inherits$1(Mx3dGeColor,t);var p=_createSuper$2(Mx3dGeColor);function Mx3dGeColor(t,h,x,M){var k;return _classCallCheck$1(this,Mx3dGeColor),0===arguments.length?(k=p.call(this)).initTempObject(new Ea.imp.Mx3dGeColor):"number"==typeof t&&1===arguments.length?(k=p.call(this)).initTempObject(new Ea.imp.Mx3dGeColor(t)):t instanceof Object&&1===arguments.length?k=p.call(this,t):"number"==typeof t&&"number"==typeof h&&"number"==typeof x&&"number"==typeof M&&(k=p.call(this)).initTempObject(new Ea.imp.Mx3dGeColor(t,h,x,M)),_possibleConstructorReturn$1(k)}return _createClass$1(Mx3dGeColor,[{key:"Name",value:function Name(){return this.imp.Name()}},{key:"SetValues",value:function SetValues(t,p,h,x){1===arguments.length?this.imp.SetValues(t):4===arguments.length&&this.imp.SetValues(t,p,h,x)}},{key:"Red",value:function Red(){return this.imp.Red()}},{key:"Green",value:function Green(){return this.imp.Green()}},{key:"Blue",value:function Blue(){return this.imp.Blue()}},{key:"Hue",value:function Hue(){return this.imp.Hue()}},{key:"Light",value:function Light(){return this.imp.Light()}},{key:"ChangeIntensity",value:function ChangeIntensity(t){this.imp.ChangeIntensity(t)}},{key:"Saturation",value:function Saturation(){return this.imp.Saturation()}},{key:"ChangeContrast",value:function ChangeContrast(t){this.imp.ChangeContrast(t)}},{key:"IsDifferent",value:function IsDifferent(t){return this.imp.IsDifferent(t.getImp())}},{key:"IsEqual",value:function IsEqual(t){return this.imp.IsEqual(t.getImp())}},{key:"Distance",value:function Distance(t){return this.imp.Distance(t.getImp())}},{key:"SquareDistance",value:function SquareDistance(t){return this.imp.SquareDistance(t.getImp())}},{key:"DeltaE2000",value:function DeltaE2000(t){return this.imp.DeltaE2000(t.getImp())}}]),Mx3dGeColor}(Fa),_o=function(t){_inherits$1(Mx3dGeCSYS,t);var p=_createSuper$2(Mx3dGeCSYS);function Mx3dGeCSYS(t,h,x){var M;return _classCallCheck$1(this,Mx3dGeCSYS),t?t instanceof Mo&&1===arguments.length?(M=p.call(this)).initTempObject(new Ea.imp.Mx3dGeCSYS(t.getImp())):t instanceof Ya&&h instanceof Za&&2===arguments.length?(M=p.call(this)).initTempObject(new Ea.imp.Mx3dGeCSYS(t.getImp(),h.getImp())):t instanceof Ya&&h instanceof Za&&x instanceof Za?(M=p.call(this)).initTempObject(new Ea.imp.Mx3dGeCSYS(t.getImp(),h.getImp(),x.getImp())):t instanceof Object&&(M=p.call(this,t)):(M=p.call(this)).initTempObject(new Ea.imp.Mx3dGeCSYS),_possibleConstructorReturn$1(M)}return _createClass$1(Mx3dGeCSYS,[{key:"XReverse",value:function XReverse(){this.imp.XReverse()}},{key:"YReverse",value:function YReverse(){this.imp.YReverse()}},{key:"ZReverse",value:function ZReverse(){this.imp.ZReverse()}},{key:"SetAxis",value:function SetAxis(t){this.imp.SetAxis(t.getImp())}},{key:"SetDirection",value:function SetDirection(t){this.imp.SetDirection(t.getImp())}},{key:"SetLocation",value:function SetLocation(t,p,h){t instanceof Ya?this.imp.SetLocation(t.getImp()):this.imp.SetLocation(t,p,h)}},{key:"SetXDirection",value:function SetXDirection(t){this.imp.SetXDirection(t.getImp())}},{key:"SetYDirection",value:function SetYDirection(t){this.imp.SetYDirection(t.getImp())}},{key:"Angle",value:function Angle(t){return this.imp.Angle(t.getImp())}},{key:"Axis",value:function Axis(){return new qa(this.imp.Axis())}},{key:"CSYSR",value:function CSYSR(){return new Mo(this.imp.CSYSR())}},{key:"Direction",value:function Direction(){return new Za(this.imp.Direction())}},{key:"Location",value:function Location(){return new Ya(this.imp.Location())}},{key:"XDirection",value:function XDirection(){return new Za(this.imp.XDirection())}},{key:"YDirection",value:function YDirection(){return new Za(this.imp.YDirection())}},{key:"Direct",value:function Direct(){return this.imp.Direct()}},{key:"IsCoplanarWithCSYS",value:function IsCoplanarWithCSYS(t,p,h){return this.imp.IsCoplanarWithCSYS(t.getImp(),p,h)}},{key:"IsCoplanarWithAxis",value:function IsCoplanarWithAxis(t,p,h){return this.imp.IsCoplanarWithAxis(t.getImp(),p,h)}},{key:"MirrorByPoint",value:function MirrorByPoint(t){this.imp.MirrorByPoint(t.getImp())}},{key:"MirroredByPoint",value:function MirroredByPoint(t){return new Mx3dGeCSYS(this.imp.MirroredByPoint(t.getImp()))}},{key:"MirrorByAxis",value:function MirrorByAxis(t){this.imp.MirrorByAxis(t.getImp())}},{key:"MirroredByAxis",value:function MirroredByAxis(t){return new Mx3dGeCSYS(this.imp.MirroredByAxis(t.getImp()))}},{key:"MirrorByCSYSR",value:function MirrorByCSYSR(t){this.imp.MirrorByCSYSR(t.getImp())}},{key:"MirroredByCSYSR",value:function MirroredByCSYSR(t){return new Mx3dGeCSYS(this.imp.MirroredByCSYSR(t.getImp()))}},{key:"Rotate",value:function Rotate(t,p){this.imp.Rotate(t.getImp(),p)}},{key:"Rotated",value:function Rotated(t,p){return new Mx3dGeCSYS(this.imp.Rotated(t.getImp(),p))}},{key:"Scale",value:function Scale(t,p){this.imp.Scale(t.getImp(),p)}},{key:"Scaled",value:function Scaled(t,p){return new Mx3dGeCSYS(this.imp.Scaled(t.getImp(),p))}},{key:"Transform",value:function Transform(t){this.imp.Transform(t.getImp())}},{key:"Transformed",value:function Transformed(t){return new Mx3dGeCSYS(this.imp.Transformed(t.getImp()))}},{key:"TranslateByVec",value:function TranslateByVec(t){this.imp.TranslateByVec(t.getImp())}},{key:"TranslatedByVec",value:function TranslatedByVec(t){return new Mx3dGeCSYS(this.imp.TranslatedByVec(t.getImp()))}},{key:"TranslateBy2Points",value:function TranslateBy2Points(t,p){this.imp.TranslateBy2Points(t.getImp(),p.getImp())}},{key:"TranslatedBy2Points",value:function TranslatedBy2Points(t,p){return new Mx3dGeCSYS(this.imp.TranslatedBy2Points(t.getImp(),p.getImp()))}}]),Mx3dGeCSYS}(za),Mo=function(t){_inherits$1(Mx3dGeCSYSR,t);var p=_createSuper$2(Mx3dGeCSYSR);function Mx3dGeCSYSR(t,h,x){var M;return _classCallCheck$1(this,Mx3dGeCSYSR),t?t instanceof Ya&&h instanceof Za&&!x?(M=p.call(this)).initTempObject(new Ea.imp.Mx3dGeCSYSR(t.getImp(),h.getImp())):t instanceof Ya&&h instanceof Za&&x instanceof Za?(M=p.call(this)).initTempObject(new Ea.imp.Mx3dGeCSYSR(t.getImp(),h.getImp(),x.getImp())):t instanceof Object&&1===arguments.length&&(M=p.call(this,t)):(M=p.call(this)).initTempObject(new Ea.imp.Mx3dGeCSYSR),_possibleConstructorReturn$1(M)}return _createClass$1(Mx3dGeCSYSR,[{key:"Location",value:function Location(){return new Ya(this.imp.Location())}},{key:"XDirection",value:function XDirection(){return new Za(this.imp.XDirection())}},{key:"YDirection",value:function YDirection(){return new Za(this.imp.YDirection())}},{key:"Direction",value:function Direction(){return new Za(this.imp.Direction())}},{key:"SetLocation",value:function SetLocation(t,p,h){t instanceof Ya?this.imp.SetLocation(t.getImp()):this.imp.SetLocation(t,p,h)}},{key:"SetXDirection",value:function SetXDirection(t){this.imp.SetXDirection(t.getImp())}},{key:"SetYDirection",value:function SetYDirection(t){this.imp.SetYDirection(t.getImp())}},{key:"SetDirection",value:function SetDirection(t){this.imp.SetDirection(t.getImp())}},{key:"Angle",value:function Angle(t){return this.imp.Angle(t.getImp())}},{key:"Axis",value:function Axis(){return new qa(this.imp.Axis())}},{key:"IsCoplanarWithCSYSR",value:function IsCoplanarWithCSYSR(t,p,h){return this.imp.IsCoplanarWithCSYSR(t.getImp(),p,h)}},{key:"IsCoplanarWithAxis",value:function IsCoplanarWithAxis(t,p,h){return this.imp.IsCoplanarWithAxis(t.getImp(),p,h)}},{key:"MirrorByPoint",value:function MirrorByPoint(t){this.imp.MirrorByPoint(t.getImp())}},{key:"MirroredByPoint",value:function MirroredByPoint(t){return new Mx3dGeCSYSR(this.imp.MirroredByPoint(t.getImp()))}},{key:"MirrorByAxis",value:function MirrorByAxis(t){this.imp.MirroredByAxis(t.getImp())}},{key:"MirroredByAxis",value:function MirroredByAxis(t){return new Mx3dGeCSYSR(this.imp.MirroredByAxis(t.getImp()))}},{key:"MirrorByCSYSR",value:function MirrorByCSYSR(t){this.imp.MirrorByCSYSR(t.getImp())}},{key:"MirroredByCSYSR",value:function MirroredByCSYSR(t){return new Mx3dGeCSYSR(this.imp.MirroredByCSYSR(t.getImp()))}},{key:"Rotate",value:function Rotate(t,p){this.imp.Rotate(t.getImp(),p)}},{key:"Rotated",value:function Rotated(t,p){return new Mx3dGeCSYSR(this.imp.Rotated(t.getImp(),p))}},{key:"Scale",value:function Scale(t,p){this.imp.Scale(t.getImp(),p)}},{key:"Scaled",value:function Scaled(t,p){return new Mx3dGeCSYSR(this.imp.Scaled(t.getImp(),p))}},{key:"Transform",value:function Transform(t){this.imp.Transform(t.getImp())}},{key:"Transformed",value:function Transformed(t){return new Mx3dGeCSYSR(this.imp.Transformed(t.getImp()))}},{key:"TranslateByVec",value:function TranslateByVec(t){this.imp.TranslateByVec(t.getImp())}},{key:"TranslatedByVec",value:function TranslatedByVec(t){return new Mx3dGeCSYSR(this.imp.TranslatedByVec(t.getImp()))}},{key:"TranslateBy2Points",value:function TranslateBy2Points(t,p){this.imp.TranslateBy2Points(t.getImp(),p.getImp())}},{key:"TranslatedBy2Points",value:function TranslatedBy2Points(t,p){return new Mx3dGeCSYSR(this.imp.TranslatedBy2Points(t.getImp(),p.getImp()))}}]),Mx3dGeCSYSR}(za),Co=function(t){_inherits$1(Mx3dGeCylinder,t);var p=_createSuper$2(Mx3dGeCylinder);function Mx3dGeCylinder(t,h){var x;return _classCallCheck$1(this,Mx3dGeCylinder),t?t instanceof _o&&"number"==typeof h?(x=p.call(this)).initTempObject(new Ea.imp.Mx3dGeCylinder(t.getImp(),h)):x=p.call(this,t):(x=p.call(this)).initTempObject(new Ea.imp.Mx3dGeCylinder),_possibleConstructorReturn$1(x)}return _createClass$1(Mx3dGeCylinder,[{key:"SetAxis",value:function SetAxis(t){this.imp.SetAxis(t.getImp())}},{key:"SetLocation",value:function SetLocation(t){this.imp.SetLocation(t.getImp())}},{key:"SetPosition",value:function SetPosition(t){this.imp.SetPosition(t.getImp())}},{key:"SetRadius",value:function SetRadius(t){this.imp.SetRadius(t)}},{key:"UReverse",value:function UReverse(){this.imp.UReverse()}},{key:"VReverse",value:function VReverse(){this.imp.VReverse()}},{key:"Direct",value:function Direct(){return this.imp.Direct()}},{key:"Axis",value:function Axis(){return new qa(this.imp.Axis())}},{key:"Location",value:function Location(){return new Ya(this.imp.Location())}},{key:"Position",value:function Position(){return new _o(this.imp.Position())}},{key:"Radius",value:function Radius(){return this.imp.Radius()}},{key:"XAxis",value:function XAxis(){return new qa(this.imp.XAxis())}},{key:"YAxis",value:function YAxis(){return new qa(this.imp.YAxis())}},{key:"MirrorByPoint",value:function MirrorByPoint(t){this.imp.MirrorByPoint(t.getImp())}},{key:"MirroredByPoint",value:function MirroredByPoint(t){return new Mx3dGeCylinder(this.imp.MirroredByPoint(t.getImp()))}},{key:"MirrorByAxis",value:function MirrorByAxis(t){this.imp.MirrorByAxis(t.getImp())}},{key:"MirroredByAxis",value:function MirroredByAxis(t){return new Mx3dGeCylinder(this.imp.MirroredByAxis(t.getImp()))}},{key:"MirrorByCSYSR",value:function MirrorByCSYSR(t){this.imp.MirrorByCSYSR(t.getImp())}},{key:"MirroredByCSYSR",value:function MirroredByCSYSR(t){return new Mx3dGeCylinder(this.imp.MirroredByCSYSR(t.getImp()))}},{key:"Rotate",value:function Rotate(t,p){this.imp.Rotate(t.getImp(),p)}},{key:"Rotated",value:function Rotated(t,p){return new Mx3dGeCylinder(this.imp.Rotated(t.getImp(),p))}},{key:"Scale",value:function Scale(t,p){this.imp.Scale(t.getImp(),p)}},{key:"Scaled",value:function Scaled(t,p){return new Mx3dGeCylinder(this.imp.Scaled(t.getImp(),p))}},{key:"Transform",value:function Transform(t){this.imp.Transform(t.getImp())}},{key:"Transformed",value:function Transformed(t){return new Mx3dGeCylinder(this.imp.Transformed(t.getImp()))}},{key:"TranslateByVec",value:function TranslateByVec(t){this.imp.TranslatedByVec(t.getImp())}},{key:"TranslatedByVec",value:function TranslatedByVec(t){return new Mx3dGeCylinder(this.imp.TranslatedByVec(t.getImp()))}},{key:"TranslateBy2Points",value:function TranslateBy2Points(t,p){this.imp.TranslateBy2Points(t.getImp(),p.getImp())}},{key:"TranslatedBy2Points",value:function TranslatedBy2Points(t,p){return new Mx3dGeCylinder(this.imp.TranslatedBy2Points(t.getImp(),p.getImp()))}},{key:"Shape",value:function Shape(t,p){return new no(p?this.imp.Shape(t,p):this.imp.Shape(t))}}]),Mx3dGeCylinder}(za),wo=function(t){_inherits$1(MxNewMdGeArray1OfInteger,t);var p=_createSuper$2(MxNewMdGeArray1OfInteger);function MxNewMdGeArray1OfInteger(t,h){var x;return _classCallCheck$1(this,MxNewMdGeArray1OfInteger),0==arguments.length?(x=p.call(this)).initTempObject(new Ea.imp.MdGeArray1OfInteger):"number"==typeof t&&2==arguments.length?(x=p.call(this)).initTempObject(new Ea.imp.MdGeArray1OfInteger(t,h)):t instanceof Object&&1==arguments.length&&(x=p.call(this,t)),_possibleConstructorReturn$1(x)}return _createClass$1(MxNewMdGeArray1OfInteger,[{key:"Init",value:function Init(t){this.imp.Init(t)}},{key:"Size",value:function Size(){return this.imp.Size()}},{key:"Length",value:function Length(){return this.imp.Length()}},{key:"IsEmpty",value:function IsEmpty(){return this.imp.IsEmpty()}},{key:"Lower",value:function Lower(){return this.imp.Lower()}},{key:"Upper",value:function Upper(){return this.imp.Upper()}},{key:"IsDeletable",value:function IsDeletable(){return this.imp.IsDeletable()}},{key:"IsAllocated",value:function IsAllocated(){return this.imp.IsAllocated()}},{key:"First",value:function First(){return this.imp.First()}},{key:"Last",value:function Last(){return this.imp.Last()}},{key:"Value",value:function Value(t){return this.imp.Value(t)}},{key:"SetValue",value:function SetValue(t,p){this.imp.SetValue(t,p)}},{key:"Resize",value:function Resize(t,p,h){this.imp.Resize(t,p,h)}}]),MxNewMdGeArray1OfInteger}(Fa),So=function(t){_inherits$1(Mx3dDbDocument,t);var p=_createSuper$2(Mx3dDbDocument);function Mx3dDbDocument(t,h){var x;return _classCallCheck$1(this,Mx3dDbDocument),t?t instanceof Object&&"from view"===h?(x=p.call(this)).initTempObject(t):x=p.call(this,t):(x=p.call(this)).initTempObject(new Ea.imp.Mx3dDbDocument),_possibleConstructorReturn$1(x)}return _createClass$1(Mx3dDbDocument,[{key:"read",value:function read(t,p){var h=this,x=t.name,M=new FileReader;return new Promise((function(k,I){M.onload=function(){var t=new Uint8Array(M.result),I=t.length,N=Ea.imp._malloc(I);new Uint8Array(Ea.imp.HEAPU8.buffer,N,I).set(t);var V=Ea.imp.addFunction((function funRes(t){getStrFromMemory(t)}),"vp"),ee=Ea.imp.addFunction((function funRej(t){getStrFromMemory(t)}),"vp");Ea.imp.loadFileFromMemory("/"+x,N,I,!0,V,ee),Ea.imp._free(N),k(h.imp.read(x,p))},M.onerror=function(t){I(t)},M.readAsArrayBuffer(t)}))}},{key:"readFile",value:function readFile(t,p){return this.imp.read(t,p)}},{key:"getAccessLabel",value:function getAccessLabel(){return new To(this.imp.getAccessLabel())}},{key:"getShapesLabel",value:function getShapesLabel(){return new To(this.imp.getShapesLabel())}},{key:"getColorsLabel",value:function getColorsLabel(){return new To(this.imp.getColorsLabel())}},{key:"getLayersLabel",value:function getLayersLabel(){return new To(this.imp.getLayersLabel())}},{key:"addShapeLabel",value:function addShapeLabel(){return new To(this.imp.addShapeLabel())}},{key:"removeShapeLabel",value:function removeShapeLabel(t){return this.imp.removeShapeLabel(t.getImp())}},{key:"removeComponent",value:function removeComponent(t){this.imp.removeComponent(t.getImp())}},{key:"getTopFreeLabels",value:function getTopFreeLabels(){for(var t=new Ao(this.imp.getTopFreeLabels()),p=new Array,h=1;h<=t.Length();h++){var x=t.Value(h);p.push(x)}return p}},{key:"getDocName",value:function getDocName(){for(var t=new wo(this.imp.getDocName()),p=[],h=1;h<=t.Length();h++)p.push(t.Value(h));return p.map((function(t){return String.fromCharCode(t)})).join("")}},{key:"getView",value:function getView(){return new xo(this.imp.getView())}},{key:"addColorLabel",value:function addColorLabel(t){return new To(this.imp.addColorLabel(t.getImp()))}},{key:"write",value:function write(t,p){var h=this.imp.write(t,p);if(!h)return h;var x=Ea.imp.getFileSize(t);if(-1==x)return!1;var M=Ea.imp.getFileArryBufferPointer(t);if(0==M)return!1;var k=new Uint8Array(Ea.imp.HEAPU8.buffer,M,x),I=new Blob([k],{type:"application/octet-stream"});return se.saveAsFileDialog({blob:I,filename:t,types:[]}),Ea.imp._free(M),!0}},{key:"newCommand",value:function newCommand(){this.imp.newCommand()}},{key:"abortCommand",value:function abortCommand(){this.imp.abortCommand()}},{key:"commitCommand",value:function commitCommand(){return this.imp.commitCommand()}},{key:"undo",value:function undo(){return this.imp.undo()}},{key:"redo",value:function redo(){return this.imp.redo()}}]),Mx3dDbDocument}(yo),To=function(t){_inherits$1(Mx3dDbLabel,t);var p=_createSuper$2(Mx3dDbLabel);function Mx3dDbLabel(t){var h;return _classCallCheck$1(this,Mx3dDbLabel),t?h=p.call(this,t):(h=p.call(this)).initTempObject(new Ea.imp.Mx3dDbLabel),_possibleConstructorReturn$1(h)}return _createClass$1(Mx3dDbLabel,[{key:"setShape",value:function setShape(t){this.imp.setShape(t.getImp())}},{key:"getShape",value:function getShape(){return new no(this.imp.getShape())}},{key:"hasChildLabel",value:function hasChildLabel(){return this.imp.hasChildLabel()}},{key:"getChildLabels",value:function getChildLabels(){for(var t=new Ao(this.imp.getChildLabels()),p=new Array,h=1;h<=t.Length();h++){var x=t.Value(h);p.push(x)}return p}},{key:"hasParentLabel",value:function hasParentLabel(){return this.imp.hasParentLabel()}},{key:"getParentLabel",value:function getParentLabel(){return new Mx3dDbLabel(this.imp.getParentLabel())}},{key:"addChildLabel",value:function addChildLabel(){return new Mx3dDbLabel(this.imp.addChildLabel())}},{key:"addSubShape",value:function addSubShape(t){return new Mx3dDbLabel(this.imp.addChildShape(t.getImp()))}},{key:"isReference",value:function isReference(){return this.imp.isReference()}},{key:"isAssembly",value:function isAssembly(){return this.imp.isAssembly()}},{key:"isSimpleShape",value:function isSimpleShape(){return this.imp.isSimpleShape()}},{key:"isTopLevel",value:function isTopLevel(){return this.imp.isTopLevel()}},{key:"isFree",value:function isFree(){return this.imp.isFree()}},{key:"isShape",value:function isShape(){return this.imp.isShape()}},{key:"isComponent",value:function isComponent(){return this.imp.isComponent()}},{key:"isCompound",value:function isCompound(){return this.imp.isCompound()}},{key:"isSubShape",value:function isSubShape(){return this.imp.isSubShape()}},{key:"getReferredLabel",value:function getReferredLabel(){return new Mx3dDbLabel(this.imp.getReferredLabel())}},{key:"getLocation",value:function getLocation(){return new ko(this.imp.getLocation())}},{key:"addComponent",value:function addComponent(t,p){return new Mx3dDbLabel(this.imp.addComponent(t.getImp(),p.getImp()))}},{key:"setName",value:function setName(t){this.imp.setName(t)}},{key:"hasShape",value:function hasShape(){return this.imp.hasShape()}},{key:"isSetColor",value:function isSetColor(){return this.imp.isSetColor()}},{key:"setColor",value:function setColor(t){this.imp.setColor(t.getImp())}},{key:"getColor",value:function getColor(){return new bo(this.imp.getColor())}},{key:"getName",value:function getName(){for(var t=new wo(this.imp.getName()),p=[],h=1;h<=t.Length();h++)p.push(t.Value(h));return p.map((function(t){return String.fromCharCode(t)})).join("")}},{key:"getEntry",value:function getEntry(){return this.imp.getEntry()}},{key:"getAttributeStr",value:function getAttributeStr(){return this.imp.getAttributeStr()}},{key:"setTexture",value:function setTexture(t){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,x=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,M=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,k=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,I=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;this.imp.setTexture(t,p,h,x,M,k,I)}},{key:"setMaterial",value:function setMaterial(t){this.imp.setMaterial(t.getImp())}}]),Mx3dDbLabel}(yo),Ao=function(t){_inherits$1(Mx3dLabelSequence,t);var p=_createSuper$2(Mx3dLabelSequence);function Mx3dLabelSequence(t){var h;return _classCallCheck$1(this,Mx3dLabelSequence),t?h=p.call(this,t):(h=p.call(this)).initTempObject(new Ea.imp.Mx3dLabelSequence),_possibleConstructorReturn$1(h)}return _createClass$1(Mx3dLabelSequence,[{key:"Length",value:function Length(){return this.imp.Length()}},{key:"Value",value:function Value(t){return new To(this.imp.Value(t))}}]),Mx3dLabelSequence}(Fa),ko=function(t){_inherits$1(Mx3dGeLocation,t);var p=_createSuper$2(Mx3dGeLocation);function Mx3dGeLocation(t){var h;return _classCallCheck$1(this,Mx3dGeLocation),t?t instanceof Ka?(h=p.call(this)).initTempObject(new Ea.imp.Mx3dGeLocation(t.getImp())):h=p.call(this,t):(h=p.call(this)).initTempObject(new Ea.imp.Mx3dGeLocation),_possibleConstructorReturn$1(h)}return _createClass$1(Mx3dGeLocation,[{key:"IsIdentity",value:function IsIdentity(){return this.imp.IsIdentity()}},{key:"Identity",value:function Identity(){this.imp.Identity()}},{key:"FirstPower",value:function FirstPower(){return this.imp.FirstPower()}},{key:"NextLocation",value:function NextLocation(){return new Mx3dGeLocation(this.imp.NextLocation())}},{key:"Inverted",value:function Inverted(){return new Mx3dGeLocation(this.imp.Inverted())}},{key:"Multiplied",value:function Multiplied(t){return new Mx3dGeLocation(this.imp.Multiplied(t.getImp()))}},{key:"Divided",value:function Divided(t){return new Mx3dGeLocation(this.imp.Divided(t.getImp()))}},{key:"Predivided",value:function Predivided(t){return new Mx3dGeLocation(this.imp.Predivided(t.getImp()))}},{key:"Powered",value:function Powered(t){return new Mx3dGeLocation(this.imp.Powered(t))}},{key:"IsEqual",value:function IsEqual(t){return this.imp.IsEqual(t.getImp())}},{key:"IsDifferent",value:function IsDifferent(t){return this.imp.IsDifferent(t.getImp())}},{key:"Clear",value:function Clear(){this.imp.Clear()}},{key:"ScalePrec",value:function ScalePrec(){return this.imp.ScalePrec()}}]),Mx3dGeLocation}(za),Po=function(t){_inherits$1(Mx3dGePlane,t);var p=_createSuper$2(Mx3dGePlane);function Mx3dGePlane(t,h,x,M){var k;return _classCallCheck$1(this,Mx3dGePlane),t?t instanceof _o?(k=p.call(this)).initTempObject(new Ea.imp.Mx3dGePlane(t.getImp())):t instanceof Ya&&h instanceof Za?(k=p.call(this)).initTempObject(new Ea.imp.Mx3dGePlane(t.getImp(),h.getImp())):"number"==typeof t&&"number"==typeof h&&"number"==typeof x&&"number"==typeof M?(k=p.call(this)).initTempObject(new Ea.imp.Mx3dGePlane(t,h,x,M)):t instanceof Object&&(k=p.call(this,t)):(k=p.call(this)).initTempObject(new Ea.imp.Mx3dGePlane),_possibleConstructorReturn$1(k)}return _createClass$1(Mx3dGePlane,[{key:"SetAxis",value:function SetAxis(t){this.imp.SetAxis(t.getImp())}},{key:"SetLocation",value:function SetLocation(t){this.imp.SetLocation(t.getImp())}},{key:"SetPosition",value:function SetPosition(t){this.imp.SetPosition(t.getImp())}},{key:"UReverse",value:function UReverse(){this.imp.UReverse()}},{key:"VReverse",value:function VReverse(){this.imp.VReverse()}},{key:"Direct",value:function Direct(){return this.imp.Direct()}},{key:"Axis",value:function Axis(){return new qa(this.imp.Axis())}},{key:"Location",value:function Location(){return new Ya(this.imp.Location())}},{key:"Position",value:function Position(){return new _o(this.imp.Position())}},{key:"DistanceToPoint",value:function DistanceToPoint(t){return this.imp.DistanceToPoint(t.getImp())}},{key:"DistanceToPlane",value:function DistanceToPlane(t){return this.imp.DistanceToPlane(t.getImp())}},{key:"SquareDistanceToPoint",value:function SquareDistanceToPoint(t){return this.imp.SquareDistanceToPoint(t.getImp())}},{key:"SquareDistanceToPlane",value:function SquareDistanceToPlane(t){return this.imp.SquareDistanceToPlane(t.getImp())}},{key:"XAxis",value:function XAxis(){return new qa(this.imp.XAxis())}},{key:"YAxis",value:function YAxis(){return new qa(this.imp.YAxis())}},{key:"Contains",value:function Contains(t,p){return this.imp.Contains(t.getImp(),p)}},{key:"MirrorByPoint",value:function MirrorByPoint(t){this.imp.MirrorByPoint(t.getImp())}},{key:"MirroredByPoint",value:function MirroredByPoint(t){return new Mx3dGePlane(this.imp.MirroredByPoint(t.getImp()))}},{key:"MirrorByAxis",value:function MirrorByAxis(t){this.imp.MirrorByAxis(t.getImp())}},{key:"MirroredByAxis",value:function MirroredByAxis(t){return new Mx3dGePlane(this.imp.MirroredByAxis(t.getImp()))}},{key:"MirrorByCSYSR",value:function MirrorByCSYSR(t){this.imp.MirrorByCSYSR(t.getImp())}},{key:"MirroredByCSYSR",value:function MirroredByCSYSR(t){return new Mx3dGePlane(this.imp.MirroredByCSYSR(t.getImp()))}},{key:"Rotate",value:function Rotate(t,p){this.imp.Rotate(t.getImp(),p)}},{key:"Rotated",value:function Rotated(t,p){return new Mx3dGePlane(this.imp.Rotated(t.getImp(),p))}},{key:"Scale",value:function Scale(t,p){this.imp.Scale(t.getImp(),p)}},{key:"Scaled",value:function Scaled(t,p){return new Mx3dGePlane(this.imp.Scaled(t.getImp(),p))}},{key:"Transform",value:function Transform(t){this.imp.Transform(t.getImp())}},{key:"Transformed",value:function Transformed(t){return new Mx3dGePlane(this.imp.Transformed(t.getImp()))}},{key:"TranslateByVec",value:function TranslateByVec(t){this.imp.TranslateByVec(t.getImp())}},{key:"TranslatedByVec",value:function TranslatedByVec(t){return new Mx3dGePlane(this.imp.TranslatedByVec(t.getImp()))}},{key:"TranslateBy2Points",value:function TranslateBy2Points(t,p){this.imp.TranslateBy2Points(t.getImp(),p.getImp())}},{key:"TranslatedBy2Points",value:function TranslatedBy2Points(t,p){return new Mx3dGePlane(this.imp.TranslatedBy2Points(t.getImp(),p.getImp()))}},{key:"Shape",value:function Shape(t,p,h,x){return new no(t?this.imp.Shape(t,p,h,x):this.imp.Shape())}}]),Mx3dGePlane}(za),Oo=function(t){_inherits$1(Mx3dSymbolText,t);var p=_createSuper$2(Mx3dSymbolText);function Mx3dSymbolText(t,h,x){var M;return _classCallCheck$1(this,Mx3dSymbolText),t?"string"==typeof t&&"number"==typeof h&&x instanceof Ya?(M=p.call(this)).initTempObject(new Ea.imp.Mx3dSymbolText(t,h,x.getImp())):t instanceof Object&&(M=p.call(this,t)):(M=p.call(this)).initTempObject(new Ea.imp.Mx3dSymbolText),_possibleConstructorReturn$1(M)}return _createClass$1(Mx3dSymbolText,[{key:"SetColor",value:function SetColor(t,p,h){t instanceof bo?this.imp.SetColor(t.getImp()):this.imp.SetColor(t,p,h)}},{key:"SetText",value:function SetText(t){this.imp.SetText(t)}},{key:"SetPositon",value:function SetPositon(t){this.imp.SetPositon(t.getImp())}},{key:"SetHJustification",value:function SetHJustification(t){this.imp.SetHJustification(t)}},{key:"SetVJustification",value:function SetVJustification(t){this.imp.SetVJustification(t)}},{key:"SetAngle",value:function SetAngle(t){this.imp.SetAngle(t)}},{key:"SetZoomable",value:function SetZoomable(t){this.imp.SetZoomable(t)}},{key:"SetHeight",value:function SetHeight(t){this.imp.SetHeight(t)}},{key:"SetFontAspect",value:function SetFontAspect(t){this.imp.SetFontAspect(t)}},{key:"SetFont",value:function SetFont(t){this.imp.SetFont(t)}},{key:"SetOrientation3D",value:function SetOrientation3D(t){this.imp.SetOrientation3D(t.getImp())}},{key:"UnsetOrientation3D",value:function UnsetOrientation3D(){this.imp.UnsetOrientation3D()}},{key:"Position",value:function Position(){return new Ya(this.imp.Position())}},{key:"FontAspect",value:function FontAspect(){return this.imp.FontAspect()}},{key:"Orientation3D",value:function Orientation3D(){return new Mo(this.imp.Orientation3D())}},{key:"HasOrientation3D",value:function HasOrientation3D(){return this.imp.HasOrientation3D()}},{key:"SetFlipping",value:function SetFlipping(t){this.imp.SetFlipping(t)}},{key:"HasFlipping",value:function HasFlipping(){return this.imp.HasFlipping()}},{key:"HasOwnAnchorPoint",value:function HasOwnAnchorPoint(){return this.imp.HasOwnAnchorPoint()}},{key:"SetOwnAnchorPoint",value:function SetOwnAnchorPoint(t){this.imp.SetOwnAnchorPoint(t)}},{key:"SetDisplayType",value:function SetDisplayType(t){this.imp.SetDisplayType(t)}},{key:"SetColorSubTitle",value:function SetColorSubTitle(t,p,h){this.imp.SetColorSubTitle(t,p,h)}}]),Mx3dSymbolText}(Ua),Io=function(){function Mx3dShapeDownCast(){_classCallCheck$1(this,Mx3dShapeDownCast)}return _createClass$1(Mx3dShapeDownCast,null,[{key:"Vertex",value:function Vertex(t){return new ao(Ea.globalMethods.Vertex(t.getImp()))}},{key:"Edge",value:function Edge(t){return new oo(Ea.globalMethods.Edge(t.getImp()))}},{key:"Wire",value:function Wire(t){return new so(Ea.globalMethods.Wire(t.getImp()))}},{key:"Face",value:function Face(t){return new io(Ea.globalMethods.Face(t.getImp()))}},{key:"Shell",value:function Shell(t){return new co(Ea.globalMethods.Shell(t.getImp()))}},{key:"Solid",value:function Solid(t){return new uo(Ea.globalMethods.Solid(t.getImp()))}},{key:"CompSolid",value:function CompSolid(t){return new lo(Ea.globalMethods.CompSolid(t.getImp()))}},{key:"Compound",value:function Compound(t){return new po(Ea.globalMethods.Compound(t.getImp()))}}]),Mx3dShapeDownCast}(),Lo=function(){function Mx3dBrepCastGeom(){_classCallCheck$1(this,Mx3dBrepCastGeom)}return _createClass$1(Mx3dBrepCastGeom,null,[{key:"Surface",value:function Surface(t){return new ms(Ea.globalMethods.Surface(t.getImp()))}},{key:"Curve",value:function Curve(t,p){var h=new Ea.imp.MdGeArray1OfReal(1,2),x=Ea.globalMethods.Curve(t.getImp(),h);return p[0]=h.Value(1),p[1]=h.Value(2),new No(x)}}]),Mx3dBrepCastGeom}();function getStrFromMemory(t){for(var p=Ea.globalMethods.getStrFromMemory(t),h=[],x=1;x<=p.Length();x++)h.push(p.Value(x));return h.map((function(t){return String.fromCharCode(t)})).join("")}var Eo=function(){function Mx3dUtils(){_classCallCheck$1(this,Mx3dUtils)}return _createClass$1(Mx3dUtils,null,[{key:"LoadFileFromUrl",value:function LoadFileFromUrl(t,p){return new Promise((function(h,x){var M=Ea.imp.addFunction((function funRes(t){var p=getStrFromMemory(t);h(p)}),"vp"),k=Ea.imp.addFunction((function funRej(t){var p=getStrFromMemory(t);x("failed load file: "+p)}),"vp");Ea.globalMethods.LoadFileFromUrl(t,p,M,k)}))}},{key:"LoadShapeFromFile",value:function LoadShapeFromFile(t,p){for(var h=[],x=Ea.globalMethods.LoadShapeFromFile(t,p),M=1;M<=x.Length();M++)h.push(new no(x.Value(M)));return h}},{key:"LoadLocalFile",value:function LoadLocalFile(t,p){var h=new FileReader;return new Promise((function(x,M){h.onload=function(){var t=new Uint8Array(h.result),k=t.length,I=Ea.imp._malloc(k);new Uint8Array(Ea.imp.HEAPU8.buffer,I,k).set(t);var N=Ea.imp.addFunction((function funRes(t){var p=getStrFromMemory(t);x(p)}),"vp"),V=Ea.imp.addFunction((function funRej(t){var p=getStrFromMemory(t);M("failed load file: "+p)}),"vp");Ea.imp.loadFileFromMemory(p,I,k,!0,N,V),Ea.imp._free(I)},h.onerror=function(t){M(t)},h.readAsArrayBuffer(t)}))}}]),Mx3dUtils}(),Ro=function(t){_inherits$1(Mx3dGeLine,t);var p=_createSuper$2(Mx3dGeLine);function Mx3dGeLine(t,h){var x;return _classCallCheck$1(this,Mx3dGeLine),t instanceof qa?(x=p.call(this)).initTempObject(new Ea.imp.Mx3dGeLine(t.getImp())):t instanceof Ya&&h instanceof Za?(x=p.call(this)).initTempObject(new Ea.imp.Mx3dGeLine(t.getImp(),h.getImp())):x=p.call(this,t),_possibleConstructorReturn$1(x)}return _createClass$1(Mx3dGeLine,[{key:"SetDirection",value:function SetDirection(t){this.imp.SetDirection(t.getImp())}},{key:"SetLocation",value:function SetLocation(t){this.imp.SetLocation(t.getImp())}},{key:"SetPosition",value:function SetPosition(t){this.imp.SetPosition(t.getImp())}},{key:"Position",value:function Position(){return new qa(this.imp.Position())}},{key:"Reverse",value:function Reverse(){this.imp.Reverse()}},{key:"Reversed",value:function Reversed(){return new Mx3dGeLine(this.imp.Reversed())}},{key:"ReversedParameter",value:function ReversedParameter(t){return this.imp.ReversedParameter(t)}},{key:"FirstParameter",value:function FirstParameter(){return this.imp.FirstParameter()}},{key:"LastParameter",value:function LastParameter(){return this.imp.LastParameter()}},{key:"IsClosed",value:function IsClosed(){return this.imp.IsClosed()}},{key:"IsPeriodic",value:function IsPeriodic(){return this.imp.IsPeriodic()}},{key:"Continuity",value:function Continuity(){return this.imp.Continuity()}},{key:"IsCN",value:function IsCN(t){return this.imp.IsCN(t)}},{key:"D0",value:function D0(t,p){this.imp.D0(t,p.getImp())}},{key:"D1",value:function D1(t,p,h){this.imp.D1(t,p.getImp(),h.getImp())}},{key:"D2",value:function D2(t,p,h,x){this.imp.D2(t,p.getImp(),h.getImp(),x.getImp())}},{key:"D3",value:function D3(t,p,h,x,M){this.imp.D3(t,p.getImp(),h.getImp(),x.getImp(),M.getImp())}},{key:"DN",value:function DN(t,p){return new eo(this.imp.DN(t,p))}},{key:"Transform",value:function Transform(t){this.imp.Transform(t.getImp())}},{key:"TransformedParameter",value:function TransformedParameter(t,p){return this.imp.TransformedParameter(t,p.getImp())}},{key:"ParametricTransformation",value:function ParametricTransformation(t){return this.imp.ParametricTransformation(t.getImp())}},{key:"Period",value:function Period(){return this.imp.Period()}},{key:"Value",value:function Value(t){return new Ya(this.imp.Value(t))}},{key:"Edge",value:function Edge(t,p){return new oo(this.imp.Edge(t,p))}}]),Mx3dGeLine}(Ha),Bo=function(t){_inherits$1(Mx3dGeomObject,t);var p=_createSuper$2(Mx3dGeomObject);function Mx3dGeomObject(t){return _classCallCheck$1(this,Mx3dGeomObject),p.call(this,t)}return _createClass$1(Mx3dGeomObject,[{key:"MirrorByPoint",value:function MirrorByPoint(t){this.imp.MirrorByPoint(t.getImp())}},{key:"MirrorByAxis",value:function MirrorByAxis(t){this.imp.MirrorByAxis(t.getImp())}},{key:"MirrorByCSYSR",value:function MirrorByCSYSR(t){this.imp.MirrorByCSYSR(t.getImp())}},{key:"Rotate",value:function Rotate(t,p){this.imp.Rotate(t.getImp(),p)}},{key:"Scale",value:function Scale(t,p){this.imp.Scale(t.getImp(),p)}},{key:"TranslateByVec",value:function TranslateByVec(t){this.imp.TranslateByVec(t.getImp())}},{key:"TranslateBy2Points",value:function TranslateBy2Points(t,p){this.imp.TranslateBy2Points(t.getImp(),p.getImp())}},{key:"MirroredByPoint",value:function MirroredByPoint(t){return this.DynCast(new Mx3dGeomObject(this.imp.MirroredByPoint(t.getImp())))}},{key:"MirroredByAxis",value:function MirroredByAxis(t){return this.DynCast(new Mx3dGeomObject(this.imp.MirroredByAxis(t.getImp())))}},{key:"MirroredByCSYSR",value:function MirroredByCSYSR(t){return this.DynCast(new Mx3dGeomObject(this.imp.MirroredByCSYSR(t.getImp())))}},{key:"Rotated",value:function Rotated(t,p){return this.DynCast(new Mx3dGeomObject(this.imp.Rotated(t.getImp(),p)))}},{key:"Scaled",value:function Scaled(t,p){return this.DynCast(new Mx3dGeomObject(this.imp.Scaled(t.getImp(),p)))}},{key:"Transformed",value:function Transformed(t){return this.DynCast(new Mx3dGeomObject(this.imp.Transformed(t.getImp())))}},{key:"TranslatedByVec",value:function TranslatedByVec(t){return this.DynCast(new Mx3dGeomObject(this.imp.TranslatedByVec(t.getImp())))}},{key:"TranslatedBy2Points",value:function TranslatedBy2Points(t,p){return this.DynCast(new Mx3dGeomObject(this.imp.TranslatedBy2Points(t.getImp(),p.getImp())))}}]),Mx3dGeomObject}(Fa),No=function(t){_inherits$1(Mx3dGeomCurve,t);var p=_createSuper$2(Mx3dGeomCurve);function Mx3dGeomCurve(t){return _classCallCheck$1(this,Mx3dGeomCurve),p.call(this,t)}return _createClass$1(Mx3dGeomCurve,[{key:"Reversed",value:function Reversed(){return this.DynCast(new Mx3dGeomCurve(this.imp.Reversed()))}},{key:"Period",value:function Period(){return this.imp.Period()}},{key:"Value",value:function Value(t){return new Ya(t)}},{key:"DynamicType",value:function DynamicType(){return this.imp.DynamicType()}}]),Mx3dGeomCurve}(Bo),Go=function(t){_inherits$1(Mx3dGeomConic,t);var p=_createSuper$2(Mx3dGeomConic);function Mx3dGeomConic(t){return _classCallCheck$1(this,Mx3dGeomConic),p.call(this,t)}return _createClass$1(Mx3dGeomConic,[{key:"SetAxis",value:function SetAxis(t){this.imp.SetAxis(t.getImp())}},{key:"SetLocation",value:function SetLocation(t){this.imp.SetLocation(t.getImp())}},{key:"SetPosition",value:function SetPosition(t){this.imp.SetPosition(t.getImp())}},{key:"Axis",value:function Axis(){return new qa(this.imp.Axis())}},{key:"Location",value:function Location(){return new Ya(this.imp.Location())}},{key:"Position",value:function Position(){return new Mo(this.imp.Position())}},{key:"XAxis",value:function XAxis(){return new qa(this.imp.XAxis())}},{key:"YAxis",value:function YAxis(){return new qa(this.imp.YAxis())}},{key:"Reverse",value:function Reverse(){this.imp.Reverse()}},{key:"Continuity",value:function Continuity(){return this.imp.Continuity()}},{key:"IsCN",value:function IsCN(t){return this.imp.IsCN(t)}},{key:"DynamicType",value:function DynamicType(){return this.imp.DynamicType()}}]),Mx3dGeomConic}(No),Fo=function(t){_inherits$1(Mx3dGeomCircle,t);var p=_createSuper$2(Mx3dGeomCircle);function Mx3dGeomCircle(t,h){var x;return _classCallCheck$1(this,Mx3dGeomCircle),t instanceof Mo&&"number"==typeof h?(x=p.call(this)).initTempObject(new Ea.imp.Mx3dGeomCircle(t.getImp(),h)):x=p.call(this,t),_possibleConstructorReturn$1(x)}return _createClass$1(Mx3dGeomCircle,[{key:"SetRadius",value:function SetRadius(t){this.imp.SetRadius(t)}},{key:"Radius",value:function Radius(){return this.imp.Radius()}},{key:"ReversedParameter",value:function ReversedParameter(t){return this.imp.ReversedParameter(t)}},{key:"Eccentricity",value:function Eccentricity(){return this.imp.Eccentricity()}},{key:"FirstParameter",value:function FirstParameter(){return this.imp.FirstParameter()}},{key:"LastParameter",value:function LastParameter(){return this.imp.LastParameter()}},{key:"IsClosed",value:function IsClosed(){return this.imp.IsClosed()}},{key:"IsPeriodic",value:function IsPeriodic(){return this.imp.IsPeriodic()}},{key:"D0",value:function D0(t,p){this.imp.D0(t,p.getImp())}},{key:"D1",value:function D1(t,p,h){this.imp.D1(t,p.getImp(),h.getImp())}},{key:"D2",value:function D2(t,p,h,x){this.imp.D2(t,p.getImp(),h.getImp(),x.getImp())}},{key:"D3",value:function D3(t,p,h,x,M){this.imp.D3(t,p.getImp(),h.getImp(),x.getImp(),M.getImp())}},{key:"DN",value:function DN(t,p){return new eo(this.imp.DN(t,p))}},{key:"Transform",value:function Transform(t){this.imp.Transform(t.getImp())}},{key:"Copy",value:function Copy(){return new Bo(this.imp.Copy())}},{key:"Edge",value:function Edge(t,p){return new oo(this.imp.Edge(t,p))}},{key:"Wire",value:function Wire(){return new so(this.imp.Wire())}},{key:"OffsetCurve",value:function OffsetCurve(t,p,h){return new oo(this.imp.OffsetCurve(t,p.getImp(),h))}},{key:"DynCast",value:function DynCast(t){return new Mx3dGeomCircle(Ea.globalMethods.DynCastToCircle(t.getImp()))}},{key:"DynamicType",value:function DynamicType(){return this.imp.DynamicType()}}],[{key:"MakeArcOfCircle",value:function MakeArcOfCircle(t,p,h){return t=uniToPoint(t),p=uniToPoint(p),h=uniToPoint(h),new oo(Ea.globalMethods.MakeArcOfCircle(t.getImp(),p.getImp(),h.getImp()))}},{key:"DownCast",value:function DownCast(t){return new Mx3dGeomCircle(Ea.globalMethods.DynCastToCircle(t.getImp()))}}]),Mx3dGeomCircle}(Go),Uo=function(t){_inherits$1(Mx3dGeomLine,t);var p=_createSuper$2(Mx3dGeomLine);function Mx3dGeomLine(t,h){var x;return _classCallCheck$1(this,Mx3dGeomLine),t instanceof qa?(x=p.call(this)).initTempObject(new Ea.imp.Mx3dGeomLine(t.getImp())):t instanceof Ya&&h instanceof Za?(x=p.call(this)).initTempObject(new Ea.imp.Mx3dGeomLine(t.getImp(),h.getImp())):x=p.call(this,t),_possibleConstructorReturn$1(x)}return _createClass$1(Mx3dGeomLine,[{key:"SetDirection",value:function SetDirection(t){this.imp.SetDirection(t.getImp())}},{key:"SetLocation",value:function SetLocation(t){this.imp.SetLocation(t.getImp())}},{key:"SetPosition",value:function SetPosition(t){this.imp.SetPosition(t.getImp())}},{key:"Position",value:function Position(){return new qa(this.imp.Position())}},{key:"Reverse",value:function Reverse(){this.imp.Reverse()}},{key:"ReversedParameter",value:function ReversedParameter(t){return this.imp.ReversedParameter(t)}},{key:"FirstParameter",value:function FirstParameter(){return this.imp.FirstParameter()}},{key:"LastParameter",value:function LastParameter(){return this.imp.LastParameter()}},{key:"IsClosed",value:function IsClosed(){return this.imp.IsClosed()}},{key:"IsPeriodic",value:function IsPeriodic(){return this.imp.IsPeriodic()}},{key:"Continuity",value:function Continuity(){return this.imp.Continuity()}},{key:"IsCN",value:function IsCN(t){return this.imp.IsCN(t)}},{key:"D0",value:function D0(t,p){this.imp.D0(t,p.getImp())}},{key:"D1",value:function D1(t,p,h){this.imp.D1(t,p.getImp(),h.getImp())}},{key:"D2",value:function D2(t,p,h,x){this.imp.D2(t,p.getImp(),h.getImp(),x.getImp())}},{key:"D3",value:function D3(t,p,h,x,M){this.imp.D3(t,p.getImp(),h.getImp(),x.getImp(),M.getImp())}},{key:"DN",value:function DN(t,p){return new eo(this.imp.DN(t,p))}},{key:"Transform",value:function Transform(t){this.imp.Transform(t.getImp())}},{key:"TransformedParameter",value:function TransformedParameter(t,p){return this.imp.TransformedParameter(t,p.getImp())}},{key:"ParametricTransformation",value:function ParametricTransformation(t){return this.imp.ParametricTransformation(t.getImp())}},{key:"Copy",value:function Copy(){return new Bo(this.imp.Copy())}},{key:"Edge",value:function Edge(t,p){return new oo(this.imp.Edge(t,p))}},{key:"OffsetCurve",value:function OffsetCurve(t,p,h){return new oo(this.imp.OffsetCurve(t,p.getImp(),h))}},{key:"DynCast",value:function DynCast(t){return new Mx3dGeomLine(Ea.globalMethods.DynCastToLine(t.getImp()))}},{key:"DynamicType",value:function DynamicType(){return this.imp.DynamicType()}}],[{key:"DownCast",value:function DownCast(t){return new Mx3dGeomLine(Ea.globalMethods.DynCastToLine(t.getImp()))}}]),Mx3dGeomLine}(No),jo=function(t){_inherits$1(Mx3dGeomEllipse,t);var p=_createSuper$2(Mx3dGeomEllipse);function Mx3dGeomEllipse(t,h,x){var M;return _classCallCheck$1(this,Mx3dGeomEllipse),t instanceof Mo&&"number"==typeof h&&"number"==typeof x?(M=p.call(this)).initTempObject(new Ea.imp.Mx3dGeomEllipse(t.getImp(),h,x)):M=p.call(this,t),_possibleConstructorReturn$1(M)}return _createClass$1(Mx3dGeomEllipse,[{key:"SetMajorRadius",value:function SetMajorRadius(t){this.imp.SetMajorRadius(t)}},{key:"SetMinorRadius",value:function SetMinorRadius(t){this.imp.SetMinorRadius(t)}},{key:"ReversedParameter",value:function ReversedParameter(t){return this.imp.ReversedParameter(t)}},{key:"Directrix1",value:function Directrix1(){return new qa(this.imp.Directrix1())}},{key:"Directrix2",value:function Directrix2(){return new qa(this.imp.Directrix2())}},{key:"Eccentricity",value:function Eccentricity(){return this.imp.Eccentricity()}},{key:"Focal",value:function Focal(){return this.imp.Focal()}},{key:"Focus1",value:function Focus1(){return new Ya(this.imp.Focus1())}},{key:"Focus2",value:function Focus2(){return new Ya(this.imp.Focus2())}},{key:"MajorRadius",value:function MajorRadius(){return this.imp.MajorRadius()}},{key:"MinorRadius",value:function MinorRadius(){return this.imp.MinorRadius()}},{key:"Parameter",value:function Parameter(){return this.imp.Parameter()}},{key:"FirstParameter",value:function FirstParameter(){return this.imp.FirstParameter()}},{key:"LastParameter",value:function LastParameter(){return this.imp.LastParameter()}},{key:"IsClosed",value:function IsClosed(){return this.imp.IsClosed()}},{key:"IsPeriodic",value:function IsPeriodic(){return this.imp.IsPeriodic()}},{key:"D0",value:function D0(t,p){this.imp.D0(t,p.getImp())}},{key:"D1",value:function D1(t,p,h){this.imp.D1(t,p.getImp(),h.getImp())}},{key:"D2",value:function D2(t,p,h,x){this.imp.D2(t,p.getImp(),h.getImp(),x.getImp())}},{key:"D3",value:function D3(t,p,h,x,M){this.imp.D3(t,p.getImp(),h.getImp(),x.getImp(),M.getImp())}},{key:"DN",value:function DN(t,p){return new eo(this.imp.DN(t,p))}},{key:"Transform",value:function Transform(t){this.imp.Transform(t.getImp())}},{key:"Copy",value:function Copy(){return new Bo(this.imp.Copy())}},{key:"Edge",value:function Edge(t,p){return new oo(this.imp.Edge(t,p))}},{key:"Wire",value:function Wire(){return new so(this.imp.Wire())}},{key:"OffsetCurve",value:function OffsetCurve(t,p,h){return new oo(this.imp.OffsetCurve(t,p.getImp(),h))}},{key:"DynCast",value:function DynCast(t){return new Mx3dGeomEllipse(Ea.globalMethods.DynCastToEllipse(t.getImp()))}},{key:"DynamicType",value:function DynamicType(){return this.imp.DynamicType()}}],[{key:"DownCast",value:function DownCast(t){return new Mx3dGeomEllipse(Ea.globalMethods.DynCastToEllipse(t.getImp()))}}]),Mx3dGeomEllipse}(Go),Wo=function(t){_inherits$1(Mx3dGeomHyperbola,t);var p=_createSuper$2(Mx3dGeomHyperbola);function Mx3dGeomHyperbola(t,h,x){var M;return _classCallCheck$1(this,Mx3dGeomHyperbola),t instanceof Mo&&"number"==typeof h&&"number"==typeof x?(M=p.call(this)).initTempObject(new Ea.imp.Mx3dGeomHyperbola(t.getImp(),h,x)):M=p.call(this,t),_possibleConstructorReturn$1(M)}return _createClass$1(Mx3dGeomHyperbola,[{key:"SetMajorRadius",value:function SetMajorRadius(t){this.imp.SetMajorRadius(t)}},{key:"SetMinorRadius",value:function SetMinorRadius(t){this.imp.SetMinorRadius(t)}},{key:"ReversedParameter",value:function ReversedParameter(t){return this.imp.ReversedParameter(t)}},{key:"FirstParameter",value:function FirstParameter(){return this.imp.FirstParameter()}},{key:"LastParameter",value:function LastParameter(){return this.imp.LastParameter()}},{key:"IsClosed",value:function IsClosed(){return this.imp.IsClosed()}},{key:"IsPeriodic",value:function IsPeriodic(){return this.imp.IsPeriodic()}},{key:"Asymptote1",value:function Asymptote1(){return new qa(this.imp.Asymptote1())}},{key:"Asymptote2",value:function Asymptote2(){return new qa(this.imp.Asymptote2())}},{key:"ConjugateBranch1",value:function ConjugateBranch1(){return new Mx3dGeomHyperbola(this.imp.ConjugateBranch1())}},{key:"ConjugateBranch2",value:function ConjugateBranch2(){return new Mx3dGeomHyperbola(this.imp.ConjugateBranch2())}},{key:"Directrix1",value:function Directrix1(){return new qa(this.imp.Directrix1())}},{key:"Directrix2",value:function Directrix2(){return new qa(this.imp.Directrix2())}},{key:"Eccentricity",value:function Eccentricity(){return this.imp.Eccentricity()}},{key:"Focal",value:function Focal(){return this.imp.Focal()}},{key:"Focus1",value:function Focus1(){return new Ya(this.imp.Focus1())}},{key:"Focus2",value:function Focus2(){return new Ya(this.imp.Focus2())}},{key:"MajorRadius",value:function MajorRadius(){return this.imp.MajorRadius()}},{key:"MinorRadius",value:function MinorRadius(){return this.imp.MinorRadius()}},{key:"OtherBranch",value:function OtherBranch(){return new Mx3dGeomHyperbola(this.imp.OtherBranch())}},{key:"Parameter",value:function Parameter(){return this.imp.Parameter()}},{key:"D0",value:function D0(t,p){this.imp.D0(t,p.getImp())}},{key:"D1",value:function D1(t,p,h){this.imp.D1(t,p.getImp(),h.getImp())}},{key:"D2",value:function D2(t,p,h,x){this.imp.D2(t,p.getImp(),h.getImp(),x.getImp())}},{key:"D3",value:function D3(t,p,h,x,M){this.imp.D3(t,p.getImp(),h.getImp(),x.getImp(),M.getImp())}},{key:"DN",value:function DN(t,p){return new eo(this.imp.DN(t,p))}},{key:"Transform",value:function Transform(t){this.imp.Transform(t.getImp())}},{key:"Copy",value:function Copy(){return new Bo(this.imp.Copy())}},{key:"Edge",value:function Edge(t,p){return new oo(this.imp.Edge(t,p))}},{key:"OffsetCurve",value:function OffsetCurve(t,p,h){return new oo(this.imp.OffsetCurve(t,p.getImp(),h))}},{key:"DynCast",value:function DynCast(t){return new Mx3dGeomHyperbola(Ea.globalMethods.DynCastToHyperbola(t.getImp()))}},{key:"DynamicType",value:function DynamicType(){return this.imp.DynamicType()}}],[{key:"DownCast",value:function DownCast(t){return new Mx3dGeomHyperbola(Ea.globalMethods.DynCastToHyperbola(t.getImp()))}}]),Mx3dGeomHyperbola}(Go),zo=function(t){_inherits$1(Mx3dGeomParabola,t);var p=_createSuper$2(Mx3dGeomParabola);function Mx3dGeomParabola(t,h){var x;return _classCallCheck$1(this,Mx3dGeomParabola),t instanceof Mo&&"number"==typeof h?(x=p.call(this)).initTempObject(new Ea.imp.Mx3dGeomParabola(t.getImp(),h)):x=p.call(this,t),_possibleConstructorReturn$1(x)}return _createClass$1(Mx3dGeomParabola,[{key:"SetFocal",value:function SetFocal(t){this.imp.SetFocal(t)}},{key:"ReversedParameter",value:function ReversedParameter(t){return this.imp.ReversedParameter(t)}},{key:"FirstParameter",value:function FirstParameter(){return this.imp.FirstParameter()}},{key:"LastParameter",value:function LastParameter(){return this.imp.LastParameter()}},{key:"IsClosed",value:function IsClosed(){return this.imp.IsClosed()}},{key:"IsPeriodic",value:function IsPeriodic(){return this.imp.IsPeriodic()}},{key:"Directrix",value:function Directrix(){return new qa(this.imp.Directrix())}},{key:"Eccentricity",value:function Eccentricity(){return this.imp.Eccentricity()}},{key:"Focus",value:function Focus(){return new Ya(this.imp.Focus())}},{key:"Focal",value:function Focal(){return this.imp.Focal()}},{key:"Parameter",value:function Parameter(){return this.imp.Parameter()}},{key:"D0",value:function D0(t,p){this.imp.D0(t,p.getImp())}},{key:"D1",value:function D1(t,p,h){this.imp.D1(t,p.getImp(),h.getImp())}},{key:"D2",value:function D2(t,p,h,x){this.imp.D2(t,p.getImp(),h.getImp(),x.getImp())}},{key:"D3",value:function D3(t,p,h,x,M){this.imp.D3(t,p.getImp(),h.getImp(),x.getImp(),M.getImp())}},{key:"DN",value:function DN(t,p){return new eo(this.imp.DN(t,p))}},{key:"Transform",value:function Transform(t){this.imp.Transform(t.getImp())}},{key:"TransformedParameter",value:function TransformedParameter(t,p){return this.imp.TransformedParameter(t,p.getImp())}},{key:"ParametricTransformation",value:function ParametricTransformation(t){return this.imp.ParametricTransformation(t.getImp())}},{key:"Copy",value:function Copy(){return new Bo(this.imp.Copy())}},{key:"Edge",value:function Edge(t,p){return new oo(this.imp.Edge(t,p))}},{key:"OffsetCurve",value:function OffsetCurve(t,p,h){return new oo(this.imp.OffsetCurve(t,p.getImp(),h))}},{key:"DynCast",value:function DynCast(t){return new Mx3dGeomParabola(Ea.globalMethods.DynCastToParabola(t.getImp()))}},{key:"DynamicType",value:function DynamicType(){return this.imp.DynamicType()}}],[{key:"DownCast",value:function DownCast(t){return new Mx3dGeomParabola(Ea.globalMethods.DynCastToParabola(t.getImp()))}}]),Mx3dGeomParabola}(Go),Ho=function(t){_inherits$1(Mx3dMkObject,t);var p=_createSuper$2(Mx3dMkObject);function Mx3dMkObject(t){return _classCallCheck$1(this,Mx3dMkObject),p.call(this,t)}return _createClass$1(Mx3dMkObject)}(Fa),$o=function(t){_inherits$1(Mx3dMkBox,t);var p=_createSuper$2(Mx3dMkBox);function Mx3dMkBox(t,h,x,M){var k;if(_classCallCheck$1(this,Mx3dMkBox),isUniPoint(t)&&isUniPoint(h)){k=p.call(this);var I=uniToPoint(t),N=uniToPoint(h);k.initTempObject(new Ea.imp.Mx3dMkBox(I.getImp(),N.getImp()))}else"number"==typeof t&&"number"==typeof h&&"number"==typeof x?(k=p.call(this)).initTempObject(new Ea.imp.Mx3dMkBox(t,h,x)):t instanceof Mo&&"number"==typeof h&&"number"==typeof x&&"number"==typeof M?(k=p.call(this)).initTempObject(new Ea.imp.Mx3dMkBox(t.getImp(),h,x,M)):t instanceof Object&&(k=p.call(this,t));return _possibleConstructorReturn$1(k)}return _createClass$1(Mx3dMkBox,[{key:"Build",value:function Build(){this.imp.Build()}},{key:"Shape",value:function Shape(){return new no(this.imp.Shape())}},{key:"Shell",value:function Shell(){return new co(this.imp.Shell())}},{key:"Solid",value:function Solid(){return new uo(this.imp.Solid())}},{key:"BottomFace",value:function BottomFace(){return new io(this.imp.BottomFace())}},{key:"BackFace",value:function BackFace(){return new io(this.imp.BackFace())}},{key:"FrontFace",value:function FrontFace(){return new io(this.imp.FrontFace())}},{key:"LeftFace",value:function LeftFace(){return new io(this.imp.LeftFace())}},{key:"RightFace",value:function RightFace(){return new io(this.imp.RightFace())}},{key:"TopFace",value:function TopFace(){return new io(this.imp.TopFace())}},{key:"IsDone",value:function IsDone(){return this.imp.IsDone()}}]),Mx3dMkBox}(Ho),Yo=function(t){_inherits$1(Mx3dMkCone,t);var p=_createSuper$2(Mx3dMkCone);function Mx3dMkCone(t,h,x,M,k){var I;return _classCallCheck$1(this,Mx3dMkCone),t instanceof Mo&&!k?(I=p.call(this)).initTempObject(new Ea.imp.Mx3dMkCone(t.getImp(),h,x,M)):t instanceof Mo&&k?(I=p.call(this)).initTempObject(new Ea.imp.Mx3dMkCone(t.getImp(),h,x,M,k)):t instanceof Object&&(I=p.call(this,t)),_possibleConstructorReturn$1(I)}return _createClass$1(Mx3dMkCone,[{key:"Build",value:function Build(){this.imp.Build()}},{key:"Shape",value:function Shape(){return new no(this.imp.Shape())}},{key:"Face",value:function Face(){return new io(this.imp.Face())}},{key:"Shell",value:function Shell(){return new co(this.imp.Shell())}},{key:"Solid",value:function Solid(){return new uo(this.imp.Solid())}},{key:"IsDone",value:function IsDone(){return this.imp.IsDone()}}]),Mx3dMkCone}(Ho),Ko=function(t){_inherits$1(Mx3dMkCylinder,t);var p=_createSuper$2(Mx3dMkCylinder);function Mx3dMkCylinder(t,h,x,M){var k;return _classCallCheck$1(this,Mx3dMkCylinder),t instanceof Mo&&!M?(k=p.call(this)).initTempObject(new Ea.imp.Mx3dMkCylinder(t.getImp(),h,x)):t instanceof Mo&&M?(k=p.call(this)).initTempObject(new Ea.imp.Mx3dMkCylinder(t.getImp(),h,x,M)):t instanceof Object&&(k=p.call(this,t)),_possibleConstructorReturn$1(k)}return _createClass$1(Mx3dMkCylinder,[{key:"Build",value:function Build(){this.imp.Build()}},{key:"Shape",value:function Shape(){return new no(this.imp.Shape())}},{key:"Face",value:function Face(){return new io(this.imp.Face())}},{key:"Shell",value:function Shell(){return new co(this.imp.Shell())}},{key:"Solid",value:function Solid(){return new uo(this.imp.Solid())}},{key:"IsDone",value:function IsDone(){return this.imp.IsDone()}}]),Mx3dMkCylinder}(Ho),Xo=function(t){_inherits$1(Mx3dMkRevol,t);var p=_createSuper$2(Mx3dMkRevol);function Mx3dMkRevol(t,h,x){var M;return _classCallCheck$1(this,Mx3dMkRevol),t instanceof no&&!x?(M=p.call(this)).initTempObject(new Ea.imp.Mx3dMkRevol(t.getImp(),h.getImp())):t instanceof no&&x?(M=p.call(this)).initTempObject(new Ea.imp.Mx3dMkRevol(t.getImp(),h.getImp(),x)):t instanceof Object&&(M=p.call(this,t)),_possibleConstructorReturn$1(M)}return _createClass$1(Mx3dMkRevol,[{key:"Build",value:function Build(){this.imp.Build()}},{key:"Shape",value:function Shape(){return new no(this.imp.Shape())}},{key:"IsDone",value:function IsDone(){return this.imp.IsDone()}}]),Mx3dMkRevol}(Ho),qo=function(t){_inherits$1(Mx3dMkSphere,t);var p=_createSuper$2(Mx3dMkSphere);function Mx3dMkSphere(t,h,x,M,k){var I;return _classCallCheck$1(this,Mx3dMkSphere),t instanceof Mo&&2===arguments.length?(I=p.call(this)).initTempObject(new Ea.imp.Mx3dMkSphere(t.getImp(),h)):t instanceof Mo&&3===arguments.length?(I=p.call(this)).initTempObject(new Ea.imp.Mx3dMkSphere(t.getImp(),h,x)):t instanceof Mo&&4===arguments.length?(I=p.call(this)).initTempObject(new Ea.imp.Mx3dMkSphere(t.getImp(),h,x,M)):t instanceof Mo&&5===arguments.length?(I=p.call(this)).initTempObject(new Ea.imp.Mx3dMkSphere(t.getImp(),h,x,M,k)):t instanceof Object&&(I=p.call(this,t)),_possibleConstructorReturn$1(I)}return _createClass$1(Mx3dMkSphere,[{key:"Build",value:function Build(){this.imp.Build()}},{key:"Shape",value:function Shape(){return new no(this.imp.Shape())}},{key:"Face",value:function Face(){return new io(this.imp.Face())}},{key:"Shell",value:function Shell(){return new co(this.imp.Shell())}},{key:"Solid",value:function Solid(){return new uo(this.imp.Solid())}},{key:"IsDone",value:function IsDone(){return this.imp.IsDone()}}]),Mx3dMkSphere}(Ho),Zo=function(t){_inherits$1(Mx3dMkTorus,t);var p=_createSuper$2(Mx3dMkTorus);function Mx3dMkTorus(t,h,x,M,k,I){var N;return _classCallCheck$1(this,Mx3dMkTorus),t instanceof Mo&&3===arguments.length?(N=p.call(this)).initTempObject(new Ea.imp.Mx3dMkTorus(t.getImp(),h,x)):t instanceof Mo&&4===arguments.length?(N=p.call(this)).initTempObject(new Ea.imp.Mx3dMkTorus(t.getImp(),h,x,M)):t instanceof Mo&&5===arguments.length?(N=p.call(this)).initTempObject(new Ea.imp.Mx3dMkTorus(t.getImp(),h,x,M,k)):t instanceof Mo&&6===arguments.length?(N=p.call(this)).initTempObject(new Ea.imp.Mx3dMkTorus(t.getImp(),h,x,M,k,I)):t instanceof Object&&(N=p.call(this,t)),_possibleConstructorReturn$1(N)}return _createClass$1(Mx3dMkTorus,[{key:"Build",value:function Build(){this.imp.Build()}},{key:"Shape",value:function Shape(){return new no(this.imp.Shape())}},{key:"Face",value:function Face(){return new io(this.imp.Face())}},{key:"Shell",value:function Shell(){return new co(this.imp.Shell())}},{key:"Solid",value:function Solid(){return new uo(this.imp.Solid())}},{key:"IsDone",value:function IsDone(){return this.imp.IsDone()}}]),Mx3dMkTorus}(Ho),Jo=function(t){_inherits$1(Mx3dMkPipe,t);var p=_createSuper$2(Mx3dMkPipe);function Mx3dMkPipe(t,h,x,M){var k;return _classCallCheck$1(this,Mx3dMkPipe),t instanceof so&&h instanceof no&&"number"==typeof x&&"boolean"==typeof M?(k=p.call(this)).initTempObject(new Ea.imp.Mx3dMkPipe(t.getImp(),h.getImp(),x,M)):t instanceof so&&h instanceof no?(k=p.call(this)).initTempObject(new Ea.imp.Mx3dMkPipe(t.getImp(),h.getImp())):t instanceof Object&&(k=p.call(this,t)),_possibleConstructorReturn$1(k)}return _createClass$1(Mx3dMkPipe,[{key:"Build",value:function Build(){this.imp.Build()}},{key:"Shape",value:function Shape(){return new no(this.imp.Shape())}},{key:"IsDone",value:function IsDone(){return this.imp.IsDone()}}]),Mx3dMkPipe}(Ho),Qo=function(t){_inherits$1(Mx3dMkPipeShell,t);var p=_createSuper$2(Mx3dMkPipeShell);function Mx3dMkPipeShell(t){var h;return _classCallCheck$1(this,Mx3dMkPipeShell),(h=p.call(this)).initTempObject(new Ea.imp.Mx3dMkPipeShell(t.getImp())),h}return _createClass$1(Mx3dMkPipeShell,[{key:"SetTransitionMode",value:function SetTransitionMode(t){this.imp.SetTransitionMode(t)}},{key:"Add",value:function Add(t){this.imp.Add(t.getImp())}},{key:"Build",value:function Build(){this.imp.Build()}},{key:"MakeSolid",value:function MakeSolid(){return this.imp.MakeSolid()}},{key:"Shape",value:function Shape(){return new no(this.imp.Shape())}},{key:"IsDone",value:function IsDone(){return this.imp.IsDone()}}]),Mx3dMkPipeShell}(Ho),es=function(t){_inherits$1(Mx3dMkPrism,t);var p=_createSuper$2(Mx3dMkPrism);function Mx3dMkPrism(t,h){var x;return _classCallCheck$1(this,Mx3dMkPrism),t instanceof no&&h instanceof eo?(x=p.call(this)).initTempObject(new Ea.imp.Mx3dMkPrism(t.getImp(),h.getImp(),!1,!0)):t instanceof no&&h instanceof Za?(x=p.call(this)).initTempObject(new Ea.imp.Mx3dMkPrism(t.getImp(),h.getImp(),!0,!1,!0)):t instanceof Object&&(x=p.call(this,t)),_possibleConstructorReturn$1(x)}return _createClass$1(Mx3dMkPrism,[{key:"Build",value:function Build(){this.imp.Build()}},{key:"Shape",value:function Shape(){return new no(this.imp.Shape())}},{key:"IsDone",value:function IsDone(){return this.imp.IsDone()}}]),Mx3dMkPrism}(Ho),ts=function(t){_inherits$1(Mx3dMkWedge,t);var p=_createSuper$2(Mx3dMkWedge);function Mx3dMkWedge(t,h,x,M,k,I,N,V){var ee;return _classCallCheck$1(this,Mx3dMkWedge),"number"==typeof t&&4===arguments.length?(ee=p.call(this)).initTempObject(new Ea.imp.Mx3dMkWedge(t,h,x,M)):t instanceof Mo&&5===arguments.length?(ee=p.call(this)).initTempObject(new Ea.imp.Mx3dMkWedge(t.getImp(),h,x,M,k)):"number"==typeof t&&7===arguments.length?(ee=p.call(this)).initTempObject(new Ea.imp.Mx3dMkWedge(t,h,x,M,k,I,N)):t instanceof Mo&&8===arguments.length?(ee=p.call(this)).initTempObject(new Ea.imp.Mx3dMkWedge(t.getImp(),h,x,M,k,I,N,V)):t instanceof Object&&(ee=p.call(this,t)),_possibleConstructorReturn$1(ee)}return _createClass$1(Mx3dMkWedge,[{key:"Build",value:function Build(){this.imp.Build()}},{key:"Shape",value:function Shape(){return new no(this.imp.Shape())}},{key:"Shell",value:function Shell(){return new co(this.imp.Shell())}},{key:"Solid",value:function Solid(){return new uo(this.imp.Solid())}},{key:"IsDone",value:function IsDone(){return this.imp.IsDone()}}]),Mx3dMkWedge}(Ho),rs=function(t){_inherits$1(Mx3dMkLoft,t);var p=_createSuper$2(Mx3dMkLoft);function Mx3dMkLoft(t,h,x){var M;return _classCallCheck$1(this,Mx3dMkLoft),0===arguments.length?(M=p.call(this)).initTempObject(new Ea.imp.Mx3dMkLoft):"boolean"==typeof t&&1===arguments.length?(M=p.call(this)).initTempObject(new Ea.imp.Mx3dMkLoft(t)):"boolean"==typeof t&&"boolean"==typeof h&&2===arguments.length?(M=p.call(this)).initTempObject(new Ea.imp.Mx3dMkLoft(t,h)):"boolean"==typeof t&&"boolean"==typeof h&&"number"==typeof x?(M=p.call(this)).initTempObject(new Ea.imp.Mx3dMkLoft(t,h,x)):t instanceof Object&&(M=p.call(this,t)),_possibleConstructorReturn$1(M)}return _createClass$1(Mx3dMkLoft,[{key:"AddWire",value:function AddWire(t){this.imp.AddWire(t.getImp())}},{key:"AddVertex",value:function AddVertex(t){this.imp.AddVertex(t.getImp())}},{key:"SetSmoothing",value:function SetSmoothing(t){this.imp.SetSmoothing(t)}},{key:"SetContinuity",value:function SetContinuity(t){this.imp.SetContinuity(t)}},{key:"Continuity",value:function Continuity(){return this.imp.Continuity()}},{key:"UseSmoothing",value:function UseSmoothing(){return this.imp.UseSmoothing()}},{key:"Build",value:function Build(){return this.imp.Build()}},{key:"Shape",value:function Shape(){return new no(this.imp.Shape())}},{key:"IsDone",value:function IsDone(){return this.imp.IsDone()}}]),Mx3dMkLoft}(Ho),ns=function(t){_inherits$1(Mx3dMkPolygon,t);var p=_createSuper$2(Mx3dMkPolygon);function Mx3dMkPolygon(t){var h;return _classCallCheck$1(this,Mx3dMkPolygon),t?h=p.call(this,t):(h=p.call(this)).initTempObject(new Ea.imp.Mx3dMkPolygon),_possibleConstructorReturn$1(h)}return _createClass$1(Mx3dMkPolygon,[{key:"Add",value:function Add(t){this.imp.Add(t.getImp())}},{key:"Added",value:function Added(){return this.imp.Added()}},{key:"Close",value:function Close(){this.imp.Close()}},{key:"FirstVertex",value:function FirstVertex(){return new ao(this.imp.FirstVertex())}},{key:"LastVertex",value:function LastVertex(){return new ao(this.imp.LastVertex())}},{key:"Build",value:function Build(){this.imp.Build()}},{key:"Shape",value:function Shape(){return new no(this.imp.Shape())}},{key:"IsDone",value:function IsDone(){return this.imp.IsDone()}},{key:"Edge",value:function Edge(){return new oo(this.imp.Edge())}},{key:"Wire",value:function Wire(){return new so(this.imp.Wire())}}]),Mx3dMkPolygon}(Ho),is=function(t){_inherits$1(Mx3dMkFace,t);var p=_createSuper$2(Mx3dMkFace);function Mx3dMkFace(t){var h,x=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return _classCallCheck$1(this,Mx3dMkFace),t instanceof so?(h=p.call(this)).initTempObject(new Ea.imp.Mx3dMkFace(t.getImp(),x)):(h=p.call(this)).initTempObject(new Ea.imp.Mx3dMkFace(t.getImp())),_possibleConstructorReturn$1(h)}return _createClass$1(Mx3dMkFace,[{key:"Build",value:function Build(){this.imp.Build()}},{key:"Shape",value:function Shape(){return new no(this.imp.Shape())}},{key:"Face",value:function Face(){return new io(this.imp.Face())}},{key:"IsDone",value:function IsDone(){return this.imp.IsDone()}},{key:"Add",value:function Add(t){this.imp.Add(t.getImp())}}]),Mx3dMkFace}(Ho),os=function(p){_inherits$1(Mx3dMkThickSolid,p);var h=_createSuper$2(Mx3dMkThickSolid);function Mx3dMkThickSolid(){var t;return _classCallCheck$1(this,Mx3dMkThickSolid),(t=h.call(this)).initTempObject(new Ea.imp.Mx3dMkThickSolid),t}return _createClass$1(Mx3dMkThickSolid,[{key:"MakeThickSolidBySimple",value:function MakeThickSolidBySimple(t,p){this.imp.MakeThickSolidBySimple(t.getImp(),p)}},{key:"MakeThickSolidByJoin",value:function MakeThickSolidByJoin(p,h,x,M){var k=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t.MdGe.MxOffsetModeEnum.Offset_Skin,I=arguments.length>5&&void 0!==arguments[5]&&arguments[5],N=arguments.length>6&&void 0!==arguments[6]&&arguments[6],V=arguments.length>7&&void 0!==arguments[7]?arguments[7]:t.MdGe.MxGAJoinTypeEnum.GA_Arc,ee=arguments.length>8&&void 0!==arguments[8]&&arguments[8],te=function arrShapeToShapeSequence(t){var p=new vo;return t.forEach((function(t){return p.Append(t)})),p}(h);this.imp.MakeThickSolidByJoin(p.getImp(),te.getImp(),x,M,k,I,N,V,ee)}},{key:"Build",value:function Build(){this.imp.Build()}},{key:"Shape",value:function Shape(){return new no(this.imp.Shape())}},{key:"IsDone",value:function IsDone(){return this.imp.IsDone()}}]),Mx3dMkThickSolid}(Ho),ss=function(){function Mx3dWireTool(){_classCallCheck$1(this,Mx3dWireTool)}return _createClass$1(Mx3dWireTool,null,[{key:"ConnectEdgesToWires",value:function ConnectEdgesToWires(t){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-6,h=arguments.length>2&&void 0!==arguments[2]&&arguments[2],x=new vo;t.forEach((function(t){return x.Append(t)}));for(var M=new vo(Ea.globalMethods.ConnectEdgesToWires(x.getImp(),p,h)),k=new Array,I=1;I<=M.Length();I++)k.push(M.Value(I));return k}},{key:"ConnectWiresToWires",value:function ConnectWiresToWires(t){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-6,h=arguments.length>2&&void 0!==arguments[2]&&arguments[2],x=new vo;t.forEach((function(t){return x.Append(t)}));for(var M=new vo(Ea.globalMethods.ConnectWiresToWires(x.getImp(),p,h)),k=new Array,I=1;I<=M.Length();I++)k.push(M.Value(I));return k}},{key:"EdgeToWire",value:function EdgeToWire(t){return new so(Ea.globalMethods.EdgeToWire(t.getImp()))}}]),Mx3dWireTool}(),cs=function(t){_inherits$1(MxNewMdGeArray1OfReal,t);var p=_createSuper$2(MxNewMdGeArray1OfReal);function MxNewMdGeArray1OfReal(t,h){var x;return _classCallCheck$1(this,MxNewMdGeArray1OfReal),0==arguments.length?(x=p.call(this)).initTempObject(new Ea.imp.MdGeArray1OfReal):"number"==typeof t&&2==arguments.length?(x=p.call(this)).initTempObject(new Ea.imp.MdGeArray1OfReal(t,h)):t instanceof Object&&1==arguments.length&&(x=p.call(this,t)),_possibleConstructorReturn$1(x)}return _createClass$1(MxNewMdGeArray1OfReal,[{key:"Init",value:function Init(t){this.imp.Init(t)}},{key:"Size",value:function Size(){return this.imp.Size()}},{key:"Length",value:function Length(){return this.imp.Length()}},{key:"IsEmpty",value:function IsEmpty(){return this.imp.IsEmpty()}},{key:"Lower",value:function Lower(){return this.imp.Lower()}},{key:"Upper",value:function Upper(){return this.imp.Upper()}},{key:"IsDeletable",value:function IsDeletable(){return this.imp.IsDeletable()}},{key:"IsAllocated",value:function IsAllocated(){return this.imp.IsAllocated()}},{key:"First",value:function First(){return this.imp.First()}},{key:"Last",value:function Last(){return this.imp.Last()}},{key:"Value",value:function Value(t){return this.imp.Value(t)}},{key:"SetValue",value:function SetValue(t,p){this.imp.SetValue(t,p)}},{key:"Resize",value:function Resize(t,p,h){this.imp.Resize(t,p,h)}}]),MxNewMdGeArray1OfReal}(Fa),us=function(t){_inherits$1(MxNewMdGeArray1OfPnt,t);var p=_createSuper$2(MxNewMdGeArray1OfPnt);function MxNewMdGeArray1OfPnt(t,h){var x;return _classCallCheck$1(this,MxNewMdGeArray1OfPnt),0==arguments.length?(x=p.call(this)).initTempObject(new Ea.imp.MdGeArray1OfPnt):"number"==typeof t&&2==arguments.length?(x=p.call(this)).initTempObject(new Ea.imp.MdGeArray1OfPnt(t,h)):t instanceof Object&&1==arguments.length&&(x=p.call(this,t)),_possibleConstructorReturn$1(x)}return _createClass$1(MxNewMdGeArray1OfPnt,[{key:"Init",value:function Init(t){this.imp.Init(t.getImp())}},{key:"Size",value:function Size(){return this.imp.Size()}},{key:"Length",value:function Length(){return this.imp.Length()}},{key:"IsEmpty",value:function IsEmpty(){return this.imp.IsEmpty()}},{key:"Lower",value:function Lower(){return this.imp.Lower()}},{key:"Upper",value:function Upper(){return this.imp.Upper()}},{key:"IsDeletable",value:function IsDeletable(){return this.imp.IsDeletable()}},{key:"IsAllocated",value:function IsAllocated(){return this.imp.IsAllocated()}},{key:"First",value:function First(){return new Ya(this.imp.First())}},{key:"Last",value:function Last(){return new Ya(this.imp.Last())}},{key:"Value",value:function Value(t){return new Ya(this.imp.Value(t))}},{key:"SetValue",value:function SetValue(t,p){this.imp.SetValue(t,p.getImp())}},{key:"Resize",value:function Resize(t,p,h){this.imp.Resize(t,p,h)}}]),MxNewMdGeArray1OfPnt}(Fa),ls=function(t){_inherits$1(MxNewMdGeArray2OfPnt,t);var p=_createSuper$2(MxNewMdGeArray2OfPnt);function MxNewMdGeArray2OfPnt(t,h,x,M,k){var I;return _classCallCheck$1(this,MxNewMdGeArray2OfPnt),0==arguments.length?(I=p.call(this)).initTempObject(new Ea.imp.MdGeArray2OfPnt):"number"==typeof t&&4==arguments.length?(I=p.call(this)).initTempObject(new Ea.imp.MdGeArray2OfPnt(t,h,x,M)):t instanceof Ya&&5==arguments.length?(I=p.call(this)).initTempObject(new Ea.imp.MdGeArray2OfPnt(t.getImp(),h,x,M,k)):t instanceof Object&&1==arguments.length&&(I=p.call(this,t)),_possibleConstructorReturn$1(I)}return _createClass$1(MxNewMdGeArray2OfPnt,[{key:"Init",value:function Init(t){this.imp.Init(t.getImp())}},{key:"Size",value:function Size(){return this.imp.Size()}},{key:"Length",value:function Length(){return this.imp.Length()}},{key:"NbRows",value:function NbRows(){return this.imp.NbRows()}},{key:"NbColumns",value:function NbColumns(){return this.imp.NbColumns()}},{key:"RowLength",value:function RowLength(){return this.imp.RowLength()}},{key:"ColLength",value:function ColLength(){return this.imp.ColLength()}},{key:"LowerRow",value:function LowerRow(){return this.imp.LowerRow()}},{key:"UpperRow",value:function UpperRow(){return this.imp.UpperRow()}},{key:"LowerCol",value:function LowerCol(){return this.imp.LowerCol()}},{key:"UpperCol",value:function UpperCol(){return this.imp.UpperCol()}},{key:"IsDeletable",value:function IsDeletable(){return this.imp.IsDeletable()}},{key:"Value",value:function Value(t,p){return new Ya(this.imp.Value(t,p))}},{key:"SetValue",value:function SetValue(t,p,h){this.imp.SetValue(t,p,h.getImp())}},{key:"Resize",value:function Resize(t,p,h,x,M){this.imp.Resize(t,p,h,x,M)}}]),MxNewMdGeArray2OfPnt}(Fa),ps=function(t){_inherits$1(MxNewMdGeArray2OfReal,t);var p=_createSuper$2(MxNewMdGeArray2OfReal);function MxNewMdGeArray2OfReal(t,h,x,M,k){var I;return _classCallCheck$1(this,MxNewMdGeArray2OfReal),0==arguments.length?(I=p.call(this)).initTempObject(new Ea.imp.MdGeArray2OfReal):"number"==typeof t&&4==arguments.length?(I=p.call(this)).initTempObject(new Ea.imp.MdGeArray2OfReal(t,h,x,M)):"number"==typeof t&&5==arguments.length?(I=p.call(this)).initTempObject(new Ea.imp.MdGeArray2OfReal(t,h,x,M,k)):t instanceof Object&&1==arguments.length&&(I=p.call(this,t)),_possibleConstructorReturn$1(I)}return _createClass$1(MxNewMdGeArray2OfReal,[{key:"Init",value:function Init(t){this.imp.Init(t)}},{key:"Size",value:function Size(){return this.imp.Size()}},{key:"Length",value:function Length(){return this.imp.Length()}},{key:"NbRows",value:function NbRows(){return this.imp.NbRows()}},{key:"NbColumns",value:function NbColumns(){return this.imp.NbColumns()}},{key:"RowLength",value:function RowLength(){return this.imp.RowLength()}},{key:"ColLength",value:function ColLength(){return this.imp.ColLength()}},{key:"LowerRow",value:function LowerRow(){return this.imp.LowerRow()}},{key:"UpperRow",value:function UpperRow(){return this.imp.UpperRow()}},{key:"LowerCol",value:function LowerCol(){return this.imp.LowerCol()}},{key:"UpperCol",value:function UpperCol(){return this.imp.UpperCol()}},{key:"IsDeletable",value:function IsDeletable(){return this.imp.IsDeletable()}},{key:"Value",value:function Value(t,p){return this.imp.Value(t,p)}},{key:"SetValue",value:function SetValue(t,p,h){this.imp.SetValue(t,p,h)}},{key:"Resize",value:function Resize(t,p,h,x,M){this.imp.Resize(t,p,h,x,M)}}]),MxNewMdGeArray2OfReal}(Fa),hs=function(t){_inherits$1(Mx3dGeomBoundedCurve,t);var p=_createSuper$2(Mx3dGeomBoundedCurve);function Mx3dGeomBoundedCurve(t){return _classCallCheck$1(this,Mx3dGeomBoundedCurve),p.call(this,t)}return _createClass$1(Mx3dGeomBoundedCurve,[{key:"DynamicType",value:function DynamicType(){return this.imp.DynamicType()}}]),Mx3dGeomBoundedCurve}(No),fs=function(t){_inherits$1(Mx3dGeomBSplineCurve,t);var p=_createSuper$2(Mx3dGeomBSplineCurve);function Mx3dGeomBSplineCurve(t,h,x,M,k){var I;if(_classCallCheck$1(this,Mx3dGeomBSplineCurve),t[0]instanceof Ya&&"number"==typeof h[0]&&"number"==typeof x[0]&&"number"==typeof M){I=p.call(this);for(var N=new us(0,t.length-1),V=0;V<t.length;V++)N.SetValue(V,t[V]);for(var ee=new cs(0,h.length-1),te=0;te<h.length;te++)ee.SetValue(te,h[te]);for(var re=new wo(0,x.length-1),ne=0;ne<x.length;ne++)re.SetValue(ne,x[ne]);I.initTempObject(new Ea.imp.Mx3dGeomBSplineCurve(N.getImp(),ee.getImp(),re.getImp(),M))}else if(t[0]instanceof Ya&&"number"==typeof h[0]&&"number"==typeof x[0]&&M instanceof Array&&"number"==typeof M[0]&&"number"==typeof k){I=p.call(this);for(var ie=new us(0,t.length-1),ae=0;ae<t.length;ae++)ie.SetValue(ae,t[ae]);for(var oe=new cs(0,h.length-1),se=0;se<h.length;se++)oe.SetValue(se,h[se]);for(var ce=new cs(0,x.length-1),ue=0;ue<x.length;ue++)ce.SetValue(ue,x[ue]);for(var le=new wo(0,M.length-1),pe=0;pe<M.length;pe++)le.SetValue(pe,M[pe]);I.initTempObject(new Ea.imp.Mx3dGeomBSplineCurve(ie.getImp(),oe.getImp(),ce.getImp(),le.getImp(),k))}else t instanceof Object&&(I=p.call(this,t));return _possibleConstructorReturn$1(I)}return _createClass$1(Mx3dGeomBSplineCurve,[{key:"IncreaseDegree",value:function IncreaseDegree(t){this.imp.IncreaseDegree(t)}},{key:"IncreaseMultiplicity",value:function IncreaseMultiplicity(t,p,h){h?this.imp.IncreaseMultiplicity(t,p,h):this.imp.IncreaseMultiplicity(t,p)}},{key:"IncrementMultiplicity",value:function IncrementMultiplicity(t,p,h){this.imp.IncrementMultiplicity(t,p,h)}},{key:"InsertKnot",value:function InsertKnot(t,p,h,x){p||h||x?!p||h||x?p&&h&&!x?this.imp.InsertKnot(t,p,h):p&&h&&x&&this.imp.InsertKnot(t,p,h,x):this.imp.InsertKnot(t,p):this.imp.InsertKnot(t)}},{key:"InsertKnots",value:function InsertKnots(t,p,h,x){for(var M=new cs(0,t.length-1),k=0;k<t.length;k++)M.SetValue(k,t[k]);for(var I=new wo(0,p.length-1),N=0;N<p.length;N++)I.SetValue(N,p[N]);h||x?h&&!x?this.imp.InsertKnots(M.getImp(),I.getImp(),h):h&&x&&this.imp.InsertKnots(M.getImp(),I.getImp(),h,x):this.imp.InsertKnots(M.getImp(),I.getImp())}},{key:"RemoveKnot",value:function RemoveKnot(t,p,h){return this.imp.RemoveKnot(t,p,h)}},{key:"Reverse",value:function Reverse(){this.imp.Reverse()}},{key:"ReversedParameter",value:function ReversedParameter(t){return this.imp.ReversedParameter(t)}},{key:"Segment",value:function Segment(t,p){this.imp.Segment(t,p)}},{key:"SetKnot",value:function SetKnot(t,p,h){h?this.imp.SetKnot(t,p,h):this.imp.SetKnot(t,p)}},{key:"SetKnots",value:function SetKnots(t){for(var p=new cs(0,t.length),h=0;h<t.length;h++)p.SetValue(h,t[h]);this.imp.SetKnots(p.getImp())}},{key:"SetPeriodic",value:function SetPeriodic(){this.imp.SetPeriodic()}},{key:"SetOrigin",value:function SetOrigin(t,p){p?this.imp.SetOrigin(t,p):this.imp.SetOrigin(t)}},{key:"SetNotPeriodic",value:function SetNotPeriodic(){this.imp.SetNotPeriodic()}},{key:"SetPole",value:function SetPole(t,p,h){p=uniToPoint(p),h?this.imp.SetPole(t,p.getImp(),h):this.imp.SetPole(t,p.getImp())}},{key:"SetWeight",value:function SetWeight(t,p){this.imp.SetWeight(t,p)}},{key:"IsCN",value:function IsCN(t){return this.imp.IsCN(t)}},{key:"IsG1",value:function IsG1(t,p,h){return this.imp.IsG1(t,p,h)}},{key:"IsClosed",value:function IsClosed(){return this.imp.IsClosed()}},{key:"IsPeriodic",value:function IsPeriodic(){return this.imp.IsPeriodic()}},{key:"IsRational",value:function IsRational(){return this.imp.IsRational()}},{key:"Continuity",value:function Continuity(){return this.imp.Continuity()}},{key:"Degree",value:function Degree(){return this.imp.Degree()}},{key:"D0",value:function D0(t,p){this.imp.D0(t,p.getImp())}},{key:"D1",value:function D1(t,p,h){this.imp.D1(t,p.getImp(),h.getImp())}},{key:"D2",value:function D2(t,p,h,x){this.imp.D2(t,p.getImp(),h.getImp(),x.getImp())}},{key:"D3",value:function D3(t,p,h,x,M){this.imp.D3(t,p.getImp(),h.getImp(),x.getImp(),M.getImp())}},{key:"DN",value:function DN(t,p){return new eo(this.imp.DN(t,p))}},{key:"LocalValue",value:function LocalValue(t,p,h){return new Ya(this.imp.LocalValue(t,p,h))}},{key:"LocalD0",value:function LocalD0(t,p,h,x){this.imp.LocalD0(t,p,h,x.getImp())}},{key:"LocalD1",value:function LocalD1(t,p,h,x,M){this.imp.LocalD1(t,p,h,x.getImp(),M.getImp())}},{key:"LocalD2",value:function LocalD2(t,p,h,x,M,k){this.imp.LocalD2(t,p,h,x.getImp(),M.getImp(),k.getImp())}},{key:"LocalD3",value:function LocalD3(t,p,h,x,M,k,I){this.imp.LocalD3(t,p,h,x.getImp(),M.getImp(),k.getImp(),I.getImp())}},{key:"LocalDN",value:function LocalDN(t,p,h,x){return new eo(this.imp.LocalDN(t,p,h,x))}},{key:"EndPoint",value:function EndPoint(){return new Ya(this.imp.EndPoint())}},{key:"FirstUKnotIndex",value:function FirstUKnotIndex(){return this.imp.FirstUKnotIndex()}},{key:"FirstParameter",value:function FirstParameter(){return this.imp.FirstParameter()}},{key:"Knot",value:function Knot(t){return this.imp.Knot(t)}},{key:"Knots",value:function Knots(){for(var t=this.imp.Knots(),p=new Array,h=1;h<=t.Length();h++)p.push(t.Value(h));return p}},{key:"LastUKnotIndex",value:function LastUKnotIndex(){return this.imp.LastUKnotIndex()}},{key:"LastParameter",value:function LastParameter(){return this.imp.LastParameter()}},{key:"Multiplicity",value:function Multiplicity(t){return this.imp.Multiplicity(t)}},{key:"Multiplicities",value:function Multiplicities(){for(var t=this.imp.Multiplicities(),p=new Array,h=1;h<=t.Length();h++)p.push(t.Value(h));return p}},{key:"NbKnots",value:function NbKnots(){return this.imp.NbKnots()}},{key:"NbPoles",value:function NbPoles(){return this.imp.NbPoles()}},{key:"Pole",value:function Pole(t){return new Ya(this.imp.Pole(t))}},{key:"Poles",value:function Poles(){for(var t=this.imp.Poles(),p=new Array,h=1;h<=t.Length();h++)p.push(new Ya(t.Value(h)));return p}},{key:"StartPoint",value:function StartPoint(){return new Ya(this.imp.StartPoint())}},{key:"Weight",value:function Weight(t){return this.imp.Weight(t)}},{key:"Weights",value:function Weights(){for(var t=this.imp.Weights(),p=new Array,h=1;h<=t.Length();h++)p.push(t.Value(h));return p}},{key:"Transform",value:function Transform(t){this.imp.Transform(t.getImp())}},{key:"Copy",value:function Copy(){return new Bo(this.imp.Copy())}},{key:"Edge",value:function Edge(t,p){return new oo(this.imp.Edge(t,p))}},{key:"Wire",value:function Wire(){return new so(this.imp.Wire())}},{key:"OffsetCurve",value:function OffsetCurve(t,p,h){return p=uniToDir(p),new oo(this.imp.OffsetCurve(t,p.getImp(),h))}},{key:"IsEqual",value:function IsEqual(t,p){return this.imp.IsEqual(t.getImp(),p)}},{key:"DynCast",value:function DynCast(t){return new Mx3dGeomBSplineCurve(Ea.globalMethods.DynCastToBSplineCurve(t.getImp()))}},{key:"DynamicType",value:function DynamicType(){return this.imp.DynamicType()}}],[{key:"DownCast",value:function DownCast(t){return new Mx3dGeomBSplineCurve(Ea.globalMethods.DynCastToBSplineCurve(t.getImp()))}}]),Mx3dGeomBSplineCurve}(hs);function getPointArrObject(t){for(var p=new us(0,t.length-1),h=0;h<t.length;h++)p.SetValue(h,t[h]);return p}var ds=function(t){_inherits$1(Mx3dGeomBezierCurve,t);var p=_createSuper$2(Mx3dGeomBezierCurve);function Mx3dGeomBezierCurve(t,h){var x;if(_classCallCheck$1(this,Mx3dGeomBezierCurve),t[0]instanceof Ya&&!h){x=p.call(this);var M=getPointArrObject(t);x.initTempObject(new Ea.imp.Mx3dGeomBezierCurve(M.getImp()))}else if(t[0]instanceof Ya&&h instanceof Array&&"number"==typeof h[0]){x=p.call(this);var k=getPointArrObject(t),I=function getRealArrObject(t){for(var p=new cs(0,t.length-1),h=0;h<t.length;h++)p.SetValue(h,t[h]);return p}(h);x.initTempObject(new Ea.imp.Mx3dGeomBezierCurve(k.getImp(),I.getImp()))}else t instanceof Object&&(x=p.call(this,t));return _possibleConstructorReturn$1(x)}return _createClass$1(Mx3dGeomBezierCurve,[{key:"Increase",value:function Increase(t){this.imp.Increase(t)}},{key:"InsertPoleAfter",value:function InsertPoleAfter(t,p,h){h?this.imp.InsertPoleAfter(t,p.getImp(),h):this.imp.InsertPoleAfter(t,p.getImp())}},{key:"InsertPoleBefore",value:function InsertPoleBefore(t,p,h){h?this.imp.InsertPoleBefore(t,p.getImp(),h):this.imp.InsertPoleBefore(t,p.getImp())}},{key:"RemovePole",value:function RemovePole(t){this.imp.RemovePole(t)}},{key:"Reverse",value:function Reverse(){this.imp.Reverse()}},{key:"ReversedParameter",value:function ReversedParameter(t){return this.imp.ReversedParameter(t)}},{key:"Segment",value:function Segment(t,p){this.imp.Segment(t,p)}},{key:"SetPole",value:function SetPole(t,p,h){h?this.imp.SetPole(t,p.getImp(),h):this.imp.SetPole(t,p.getImp())}},{key:"SetWeight",value:function SetWeight(t,p){this.imp.SetWeight(t,p)}},{key:"IsClosed",value:function IsClosed(){return this.imp.IsClosed()}},{key:"IsCN",value:function IsCN(t){return this.imp.IsCN(t)}},{key:"IsPeriodic",value:function IsPeriodic(){return this.imp.IsPeriodic()}},{key:"IsRational",value:function IsRational(){return this.imp.IsRational()}},{key:"Continuity",value:function Continuity(){return this.imp.Continuity()}},{key:"Degree",value:function Degree(){return this.imp.Degree()}},{key:"D0",value:function D0(t,p){this.imp.D0(t,p.getImp())}},{key:"D1",value:function D1(t,p,h){this.imp.D1(t,p.getImp(),h.getImp())}},{key:"D2",value:function D2(t,p,h,x){this.imp.D2(t,p.getImp(),h.getImp(),x.getImp())}},{key:"D3",value:function D3(t,p,h,x,M){this.imp.D3(t,p.getImp(),h.getImp(),x.getImp(),M.getImp())}},{key:"DN",value:function DN(t,p){return new eo(this.imp.DN(t,p))}},{key:"StartPoint",value:function StartPoint(){return new Ya(this.imp.StartPoint())}},{key:"EndPoint",value:function EndPoint(){return new Ya(this.imp.EndPoint())}},{key:"FirstParameter",value:function FirstParameter(){return this.imp.FirstParameter()}},{key:"LastParameter",value:function LastParameter(){return this.imp.LastParameter()}},{key:"NbPoles",value:function NbPoles(){return this.imp.NbPoles()}},{key:"Pole",value:function Pole(t){return new Ya(this.imp.Pole(t))}},{key:"Poles",value:function Poles(){for(var t=this.imp.Poles(),p=new Array,h=1;h<=t.Length();h++)p.push(t.Value(h));return p}},{key:"Weight",value:function Weight(t){return this.imp.Weight(t)}},{key:"Weights",value:function Weights(){for(var t=this.imp.Weights(),p=new Array,h=0;h<=t.Length();h++)p.push(t.Value(h));return p}},{key:"Transform",value:function Transform(t){this.imp.Transform(t.getImp())}},{key:"Copy",value:function Copy(){return new Bo(this.imp.Copy())}},{key:"Edge",value:function Edge(t,p){return new oo(this.imp.Edge(t,p))}},{key:"Wire",value:function Wire(){return new so(this.imp.Wire())}},{key:"OffsetCurve",value:function OffsetCurve(t,p,h){return p=uniToDir(p),new oo(this.imp.OffsetCurve(t,p.getImp(),h))}},{key:"DynCast",value:function DynCast(t){return new Mx3dGeomBezierCurve(Ea.globalMethods.DynCastToBezierCurve(t.getImp()))}},{key:"DynamicType",value:function DynamicType(){return this.imp.DynamicType()}}],[{key:"DownCast",value:function DownCast(t){return new Mx3dGeomBezierCurve(Ea.globalMethods.DynCastToBezierCurve(t.getImp()))}}]),Mx3dGeomBezierCurve}(hs),ms=function(t){_inherits$1(Mx3dGeomSurface,t);var p=_createSuper$2(Mx3dGeomSurface);function Mx3dGeomSurface(t){return _classCallCheck$1(this,Mx3dGeomSurface),p.call(this,t)}return _createClass$1(Mx3dGeomSurface,[{key:"UReversed",value:function UReversed(){return this.DynCast(new Mx3dGeomSurface(this.imp.UReversed()))}},{key:"VReversed",value:function VReversed(){return this.DynCast(new Mx3dGeomSurface(this.imp.VReversed()))}},{key:"TransformParameters",value:function TransformParameters(t,p){var h=new Ea.imp.MdGeArray1OfReal(1,2);this.imp.TransformParameters(h,p.getImp()),t[0]=h.Value(1),t[1]=h.Value(2)}},{key:"UPeriod",value:function UPeriod(){return this.imp.UPeriod()}},{key:"VPeriod",value:function VPeriod(){return this.imp.VPeriod()}},{key:"Value",value:function Value(t,p){return new Ya(this.imp.Value(t,p))}},{key:"DynamicType",value:function DynamicType(){return this.imp.DynamicType()}}]),Mx3dGeomSurface}(Bo),gs=function(t){_inherits$1(Mx3dGeomElementarySurface,t);var p=_createSuper$2(Mx3dGeomElementarySurface);function Mx3dGeomElementarySurface(t){return _classCallCheck$1(this,Mx3dGeomElementarySurface),p.call(this,t)}return _createClass$1(Mx3dGeomElementarySurface,[{key:"SetAxis",value:function SetAxis(t){this.imp.SetAxis(t.getImp())}},{key:"SetLocation",value:function SetLocation(t){this.imp.SetLocation(t.getImp())}},{key:"SetPosition",value:function SetPosition(t){this.imp.SetPosition(t.getImp())}},{key:"Axis",value:function Axis(){return new qa(this.imp.Axis())}},{key:"Location",value:function Location(){return new Ya(this.imp.Location())}},{key:"Position",value:function Position(){return new Mo(this.imp.Position())}},{key:"UReverse",value:function UReverse(){this.imp.UReverse()}},{key:"VReverse",value:function VReverse(){this.imp.VReverse()}},{key:"Continuity",value:function Continuity(){return this.imp.Continuity()}},{key:"IsCNu",value:function IsCNu(t){return this.imp.IsCNu(t)}},{key:"IsCNv",value:function IsCNv(t){return this.imp.IsCNv(t)}},{key:"DynamicType",value:function DynamicType(){return this.imp.DynamicType()}}]),Mx3dGeomElementarySurface}(ms),vs=function(t){_inherits$1(Mx3dGeomPlane,t);var p=_createSuper$2(Mx3dGeomPlane);function Mx3dGeomPlane(t,h,x,M){var k;return _classCallCheck$1(this,Mx3dGeomPlane),t instanceof Mo?(k=p.call(this)).initTempObject(new Ea.imp.Mx3dGeomPlane(t.getImp())):isUniPoint(t)&&isUniDir(h)?(k=p.call(this),t=uniToPoint(t),h=uniToDir(h),k.initTempObject(new Ea.imp.Mx3dGeomPlane(t.getImp(),h.getImp()))):"number"==typeof t&&"number"==typeof h&&"number"==typeof x&&"number"==typeof M?(k=p.call(this)).initTempObject(new Ea.imp.Mx3dGeomPlane(t,h,x,M)):t instanceof Object&&(k=p.call(this,t)),_possibleConstructorReturn$1(k)}return _createClass$1(Mx3dGeomPlane,[{key:"UReverse",value:function UReverse(){this.imp.UReverse()}},{key:"UReversedParameter",value:function UReversedParameter(t){return this.imp.UReversedParameter(t)}},{key:"VReverse",value:function VReverse(){this.imp.VReverse()}},{key:"VReversedParameter",value:function VReversedParameter(t){return this.imp.VReversedParameter(t)}},{key:"TransformParameters",value:function TransformParameters(t,p){var h=new Ea.imp.MdGeArray1OfReal(1,2);this.imp.TransformParameters(h,p.getImp()),t[0]=h.Value(1),t[1]=h.Value(2)}},{key:"Bounds",value:function Bounds(t){var p=new Ea.imp.MdGeArray1OfReal(1,4);this.imp.Bounds(p),t[0]=p.Value(1),t[1]=p.Value(2),t[2]=p.Value(3),t[3]=p.Value(4)}},{key:"Coefficients",value:function Coefficients(t){var p=new Ea.imp.MdGeArray1OfReal(1,4);this.imp.Coefficients(p),t[0]=p.Value(1),t[1]=p.Value(2),t[2]=p.Value(3),t[3]=p.Value(4)}},{key:"IsUClosed",value:function IsUClosed(){return this.imp.IsUClosed()}},{key:"IsVClosed",value:function IsVClosed(){return this.imp.IsVClosed()}},{key:"IsUPeriodic",value:function IsUPeriodic(){return this.imp.IsUPeriodic()}},{key:"IsVPeriodic",value:function IsVPeriodic(){return this.imp.IsVPeriodic()}},{key:"D0",value:function D0(t,p,h){this.imp.D0(t,p,h.getImp())}},{key:"D1",value:function D1(t,p,h,x,M){this.imp.D1(t,p,h.getImp(),x.getImp(),M.getImp())}},{key:"D2",value:function D2(t,p,h,x,M,k,I,N){this.imp.D2(t,p,h.getImp(),x.getImp(),M.getImp(),k.getImp(),I.getImp(),N.getImp())}},{key:"D3",value:function D3(t,p,h,x,M,k,I,N,V,ee,te,re){this.imp.D3(t,p,h.getImp(),x.getImp(),M.getImp(),k.getImp(),I.getImp(),N.getImp(),V.getImp(),ee.getImp(),te.getImp(),re.getImp())}},{key:"DN",value:function DN(t,p,h,x){return new eo(this.imp.DN(t,p,h,x))}},{key:"Transform",value:function Transform(t){this.imp.Transform(t.getImp())}},{key:"Copy",value:function Copy(){return new Bo(this.imp.Copy())}},{key:"DynamicType",value:function DynamicType(){return this.imp.DynamicType()}},{key:"DynCast",value:function DynCast(t){return new Mx3dGeomPlane(Ea.globalMethods.DynCastToPlane(t.getImp()))}},{key:"Face",value:function Face(t,p,h,x,M){return"number"==typeof t&&1===arguments.length?new io(this.imp.Face(t)):t instanceof so&&"boolean"==typeof p?new io(this.imp.Face(t.getImp(),p)):"number"==typeof t&&"number"==typeof p&&"number"==typeof h&&"number"==typeof x&&"number"==typeof M?new io(this.imp.Face(t,p,h,x,M)):new io}}],[{key:"DownCast",value:function DownCast(t){return new Mx3dGeomPlane(Ea.globalMethods.DynCastToPlane(t.getImp()))}}]),Mx3dGeomPlane}(gs),ys=function(t){_inherits$1(Mx3dGeomConicalSurface,t);var p=_createSuper$2(Mx3dGeomConicalSurface);function Mx3dGeomConicalSurface(t,h,x){var M;return _classCallCheck$1(this,Mx3dGeomConicalSurface),t instanceof Mo&&"number"==typeof h&&"number"==typeof x?(M=p.call(this)).initTempObject(new Ea.imp.Mx3dGeomConicalSurface(t.getImp(),h,x)):t instanceof Object&&(M=p.call(this,t)),_possibleConstructorReturn$1(M)}return _createClass$1(Mx3dGeomConicalSurface,[{key:"SetRadius",value:function SetRadius(t){this.imp.SetRadius(t)}},{key:"SetSemiAngle",value:function SetSemiAngle(t){this.imp.SetSemiAngle(t)}},{key:"UReversedParameter",value:function UReversedParameter(t){return this.imp.rameter(t)}},{key:"VReversedParameter",value:function VReversedParameter(t){return this.imp.rameter(t)}},{key:"VReverse",value:function VReverse(){this.imp.VReverse()}},{key:"TransformParameters",value:function TransformParameters(t,p){var h=new Ea.imp.MdGeArray1OfReal(1,2);this.imp.TransformParameters(h,p.getImp()),t[0]=h.Value(1),t[1]=h.Value(2)}},{key:"Apex",value:function Apex(){return new Ya(this.imp.Apex())}},{key:"Bounds",value:function Bounds(t){var p=new Ea.imp.MdGeArray1OfReal(1,4);this.imp.Bounds(p),t[0]=p.Value(1),t[1]=p.Value(2),t[2]=p.Value(3),t[3]=p.Value(4)}},{key:"Coefficients",value:function Coefficients(t){var p=new Ea.imp.MdGeArray1OfReal(1,10);this.imp.Coefficients(p),t[0]=p.Value(1),t[1]=p.Value(2),t[2]=p.Value(3),t[3]=p.Value(4),t[4]=p.Value(5),t[5]=p.Value(6),t[6]=p.Value(7),t[7]=p.Value(8),t[8]=p.Value(9),t[9]=p.Value(10)}},{key:"RefRadius",value:function RefRadius(){return this.imp.RefRadius()}},{key:"SemiAngle",value:function SemiAngle(){return this.imp.SemiAngle()}},{key:"IsUClosed",value:function IsUClosed(){return this.imp.IsUClosed()}},{key:"IsVClosed",value:function IsVClosed(){return this.imp.IsVClosed()}},{key:"IsUPeriodic",value:function IsUPeriodic(){return this.imp.IsUPeriodic()}},{key:"IsVPeriodic",value:function IsVPeriodic(){return this.imp.IsVPeriodic()}},{key:"D0",value:function D0(t,p,h){this.imp.D0(t,p,h.getImp())}},{key:"D1",value:function D1(t,p,h,x,M){this.imp.D1(t,p,h.getImp(),x.getImp(),M.getImp())}},{key:"D2",value:function D2(t,p,h,x,M,k,I,N){this.imp.D2(t,p,h.getImp(),x.getImp(),M.getImp(),k.getImp(),I.getImp(),N.getImp())}},{key:"D3",value:function D3(t,p,h,x,M,k,I,N,V,ee,te,re){this.imp.D3(t,p,h.getImp(),x.getImp(),M.getImp(),k.getImp(),I.getImp(),N.getImp(),V.getImp(),ee.getImp(),te.getImp(),re.getImp())}},{key:"DN",value:function DN(t,p,h,x){return new eo(this.imp.DN(t,p,h,x))}},{key:"Transform",value:function Transform(t){this.imp.Transform(t.getImp())}},{key:"Copy",value:function Copy(){return new Bo(this.imp.Copy())}},{key:"DynamicType",value:function DynamicType(){return this.imp.DynamicType()}},{key:"DynCast",value:function DynCast(t){return new Mx3dGeomConicalSurface(Ea.globalMethods.DynCastToConicalSurface(t.getImp()))}},{key:"Face",value:function Face(t,p,h,x,M){return"number"==typeof t&&1===arguments.length?new io(this.imp.Face(t)):t instanceof so&&"boolean"==typeof p?new io(this.imp.Face(t.getImp(),p)):"number"==typeof t&&"number"==typeof p&&"number"==typeof h&&"number"==typeof x&&"number"==typeof M?new io(this.imp.Face(t,p,h,x,M)):new io}}],[{key:"DownCast",value:function DownCast(t){return new Mx3dGeomConicalSurface(Ea.globalMethods.DynCastToConicalSurface(t.getImp()))}}]),Mx3dGeomConicalSurface}(gs),xs=function(t){_inherits$1(Mx3dGeomCylindricalSurface,t);var p=_createSuper$2(Mx3dGeomCylindricalSurface);function Mx3dGeomCylindricalSurface(t,h){var x;return _classCallCheck$1(this,Mx3dGeomCylindricalSurface),t instanceof Mo&&"number"==typeof h?(x=p.call(this)).initTempObject(new Ea.imp.Mx3dGeomCylindricalSurface(t.getImp(),h)):t instanceof Object&&(x=p.call(this,t)),_possibleConstructorReturn$1(x)}return _createClass$1(Mx3dGeomCylindricalSurface,[{key:"SetRadius",value:function SetRadius(t){this.imp.SetRadius(t)}},{key:"UReversedParameter",value:function UReversedParameter(t){return this.imp.rameter(t)}},{key:"VReversedParameter",value:function VReversedParameter(t){return this.imp.rameter(t)}},{key:"TransformParameters",value:function TransformParameters(t,p){var h=new Ea.imp.MdGeArray1OfReal(1,2);this.imp.TransformParameters(h,p.getImp()),t[0]=h.Value(1),t[1]=h.Value(2)}},{key:"Bounds",value:function Bounds(t){var p=new Ea.imp.MdGeArray1OfReal(1,4);this.imp.Bounds(p),t[0]=p.Value(1),t[1]=p.Value(2),t[2]=p.Value(3),t[3]=p.Value(4)}},{key:"Coefficients",value:function Coefficients(t){var p=new Ea.imp.MdGeArray1OfReal(1,10);this.imp.Coefficients(p),t[0]=p.Value(1),t[1]=p.Value(2),t[2]=p.Value(3),t[3]=p.Value(4),t[4]=p.Value(5),t[5]=p.Value(6),t[6]=p.Value(7),t[7]=p.Value(8),t[8]=p.Value(9),t[9]=p.Value(10)}},{key:"Radius",value:function Radius(){return this.imp.Radius()}},{key:"IsUClosed",value:function IsUClosed(){return this.imp.IsUClosed()}},{key:"IsVClosed",value:function IsVClosed(){return this.imp.IsVClosed()}},{key:"IsUPeriodic",value:function IsUPeriodic(){return this.imp.IsUPeriodic()}},{key:"IsVPeriodic",value:function IsVPeriodic(){return this.imp.IsVPeriodic()}},{key:"D0",value:function D0(t,p,h){this.imp.D0(t,p,h.getImp())}},{key:"D1",value:function D1(t,p,h,x,M){this.imp.D1(t,p,h.getImp(),x.getImp(),M.getImp())}},{key:"D2",value:function D2(t,p,h,x,M,k,I,N){this.imp.D2(t,p,h.getImp(),x.getImp(),M.getImp(),k.getImp(),I.getImp(),N.getImp())}},{key:"D3",value:function D3(t,p,h,x,M,k,I,N,V,ee,te,re){this.imp.D3(t,p,h.getImp(),x.getImp(),M.getImp(),k.getImp(),I.getImp(),N.getImp(),V.getImp(),ee.getImp(),te.getImp(),re.getImp())}},{key:"DN",value:function DN(t,p,h,x){return new eo(this.imp.DN(t,p,h,x))}},{key:"Transform",value:function Transform(t){this.imp.Transform(t.getImp())}},{key:"Copy",value:function Copy(){return new Bo(this.imp.Copy())}},{key:"DynamicType",value:function DynamicType(){return this.imp.DynamicType()}},{key:"DynCast",value:function DynCast(t){return new Mx3dGeomCylindricalSurface(Ea.globalMethods.DynCastToCylindricalSurface(t.getImp()))}},{key:"Face",value:function Face(t,p,h,x,M){return"number"==typeof t&&1===arguments.length?new io(this.imp.Face(t)):t instanceof so&&"boolean"==typeof p?new io(this.imp.Face(t.getImp(),p)):"number"==typeof t&&"number"==typeof p&&"number"==typeof h&&"number"==typeof x&&"number"==typeof M?new io(this.imp.Face(t,p,h,x,M)):new io}}],[{key:"DownCast",value:function DownCast(t){return new Mx3dGeomCylindricalSurface(Ea.globalMethods.DynCastToCylindricalSurface(t.getImp()))}}]),Mx3dGeomCylindricalSurface}(gs),bs=function(t){_inherits$1(Mx3dGeomSphericalSurface,t);var p=_createSuper$2(Mx3dGeomSphericalSurface);function Mx3dGeomSphericalSurface(t,h){var x;return _classCallCheck$1(this,Mx3dGeomSphericalSurface),t instanceof Mo&&"number"==typeof h?(x=p.call(this)).initTempObject(new Ea.imp.Mx3dGeomSphericalSurface(t.getImp(),h)):t instanceof Object&&(x=p.call(this,t)),_possibleConstructorReturn$1(x)}return _createClass$1(Mx3dGeomSphericalSurface,[{key:"SetRadius",value:function SetRadius(t){this.imp.SetRadius(t)}},{key:"UReversedParameter",value:function UReversedParameter(t){return this.imp.rameter(t)}},{key:"VReversedParameter",value:function VReversedParameter(t){return this.imp.rameter(t)}},{key:"Area",value:function Area(){return this.imp.Area()}},{key:"Bounds",value:function Bounds(t){var p=new Ea.imp.MdGeArray1OfReal(1,4);this.imp.Bounds(p),t[0]=p.Value(1),t[1]=p.Value(2),t[2]=p.Value(3),t[3]=p.Value(4)}},{key:"Coefficients",value:function Coefficients(t){var p=new Ea.imp.MdGeArray1OfReal(1,10);this.imp.Coefficients(p),t[0]=p.Value(1),t[1]=p.Value(2),t[2]=p.Value(3),t[3]=p.Value(4),t[4]=p.Value(5),t[5]=p.Value(6),t[6]=p.Value(7),t[7]=p.Value(8),t[8]=p.Value(9),t[9]=p.Value(10)}},{key:"Radius",value:function Radius(){return this.imp.Radius()}},{key:"Volume",value:function Volume(){return this.imp.Volume()}},{key:"IsUClosed",value:function IsUClosed(){return this.imp.IsUClosed()}},{key:"IsVClosed",value:function IsVClosed(){return this.imp.IsVClosed()}},{key:"IsUPeriodic",value:function IsUPeriodic(){return this.imp.IsUPeriodic()}},{key:"IsVPeriodic",value:function IsVPeriodic(){return this.imp.IsVPeriodic()}},{key:"D0",value:function D0(t,p,h){this.imp.D0(t,p,h.getImp())}},{key:"D1",value:function D1(t,p,h,x,M){this.imp.D1(t,p,h.getImp(),x.getImp(),M.getImp())}},{key:"D2",value:function D2(t,p,h,x,M,k,I,N){this.imp.D2(t,p,h.getImp(),x.getImp(),M.getImp(),k.getImp(),I.getImp(),N.getImp())}},{key:"D3",value:function D3(t,p,h,x,M,k,I,N,V,ee,te,re){this.imp.D3(t,p,h.getImp(),x.getImp(),M.getImp(),k.getImp(),I.getImp(),N.getImp(),V.getImp(),ee.getImp(),te.getImp(),re.getImp())}},{key:"DN",value:function DN(t,p,h,x){return new eo(this.imp.DN(t,p,h,x))}},{key:"Transform",value:function Transform(t){this.imp.Transform(t.getImp())}},{key:"Copy",value:function Copy(){return new Bo(this.imp.Copy())}},{key:"DynamicType",value:function DynamicType(){return this.imp.DynamicType()}},{key:"DynCast",value:function DynCast(t){return new Mx3dGeomSphericalSurface(Ea.globalMethods.DynCastToSphericalSurface(t.getImp()))}},{key:"Face",value:function Face(t,p,h,x,M){return"number"==typeof t&&1===arguments.length?new io(this.imp.Face(t)):t instanceof so&&"boolean"==typeof p?new io(this.imp.Face(t.getImp(),p)):"number"==typeof t&&"number"==typeof p&&"number"==typeof h&&"number"==typeof x&&"number"==typeof M?new io(this.imp.Face(t,p,h,x,M)):new io}}],[{key:"DownCast",value:function DownCast(t){return new Mx3dGeomSphericalSurface(Ea.globalMethods.DynCastToSphericalSurface(t.getImp()))}}]),Mx3dGeomSphericalSurface}(gs),_s=function(t){_inherits$1(Mx3dGeomToroidalSurface,t);var p=_createSuper$2(Mx3dGeomToroidalSurface);function Mx3dGeomToroidalSurface(t,h,x){var M;return _classCallCheck$1(this,Mx3dGeomToroidalSurface),t instanceof Mo&&"number"==typeof h&&"number"==typeof x?(M=p.call(this)).initTempObject(new Ea.imp.Mx3dGeomToroidalSurface(t.getImp(),h,x)):t instanceof Object&&(M=p.call(this,t)),_possibleConstructorReturn$1(M)}return _createClass$1(Mx3dGeomToroidalSurface,[{key:"SetMajorRadius",value:function SetMajorRadius(t){this.imp.ajorRadius(t)}},{key:"SetMinorRadius",value:function SetMinorRadius(t){this.imp.inorRadius(t)}},{key:"UReversedParameter",value:function UReversedParameter(t){return this.imp.rameter(t)}},{key:"VReversedParameter",value:function VReversedParameter(t){return this.imp.rameter(t)}},{key:"Area",value:function Area(){return this.imp.Area()}},{key:"Bounds",value:function Bounds(t){var p=new Ea.imp.MdGeArray1OfReal(1,4);this.imp.Bounds(p),t[0]=p.Value(1),t[1]=p.Value(2),t[2]=p.Value(3),t[3]=p.Value(4)}},{key:"Coefficients",value:function Coefficients(t){var p=new Ea.imp.MdGeArray1OfReal(1,31);this.imp.Coefficients(p);for(var h=1;h<=p.Length();h++)t.push(p.Value(h))}},{key:"MajorRadius",value:function MajorRadius(){return this.imp.MajorRadius()}},{key:"MinorRadius",value:function MinorRadius(){return this.imp.MinorRadius()}},{key:"Volume",value:function Volume(){return this.imp.Volume()}},{key:"IsUClosed",value:function IsUClosed(){return this.imp.IsUClosed()}},{key:"IsVClosed",value:function IsVClosed(){return this.imp.IsVClosed()}},{key:"IsUPeriodic",value:function IsUPeriodic(){return this.imp.IsUPeriodic()}},{key:"IsVPeriodic",value:function IsVPeriodic(){return this.imp.IsVPeriodic()}},{key:"D0",value:function D0(t,p,h){this.imp.D0(t,p,h.getImp())}},{key:"D1",value:function D1(t,p,h,x,M){this.imp.D1(t,p,h.getImp(),x.getImp(),M.getImp())}},{key:"D2",value:function D2(t,p,h,x,M,k,I,N){this.imp.D2(t,p,h.getImp(),x.getImp(),M.getImp(),k.getImp(),I.getImp(),N.getImp())}},{key:"D3",value:function D3(t,p,h,x,M,k,I,N,V,ee,te,re){this.imp.D3(t,p,h.getImp(),x.getImp(),M.getImp(),k.getImp(),I.getImp(),N.getImp(),V.getImp(),ee.getImp(),te.getImp(),re.getImp())}},{key:"DN",value:function DN(t,p,h,x){return new eo(this.imp.DN(t,p,h,x))}},{key:"Transform",value:function Transform(t){this.imp.Transform(t.getImp())}},{key:"Copy",value:function Copy(){return new Bo(this.imp.Copy())}},{key:"DynamicType",value:function DynamicType(){return this.imp.DynamicType()}},{key:"DynCast",value:function DynCast(t){return new Mx3dGeomToroidalSurface(Ea.globalMethods.DynCastToToroidalSurface(t.getImp()))}},{key:"Face",value:function Face(t,p,h,x,M){return"number"==typeof t&&1===arguments.length?new io(this.imp.Face(t)):t instanceof so&&"boolean"==typeof p?new io(this.imp.Face(t.getImp(),p)):"number"==typeof t&&"number"==typeof p&&"number"==typeof h&&"number"==typeof x&&"number"==typeof M?new io(this.imp.Face(t,p,h,x,M)):new io}}],[{key:"DownCast",value:function DownCast(t){return new Mx3dGeomToroidalSurface(Ea.globalMethods.DynCastToToroidalSurface(t.getImp()))}}]),Mx3dGeomToroidalSurface}(gs),Ms=function(t){_inherits$1(Mx3dGeomBoundedSurface,t);var p=_createSuper$2(Mx3dGeomBoundedSurface);function Mx3dGeomBoundedSurface(t){return _classCallCheck$1(this,Mx3dGeomBoundedSurface),p.call(this,t)}return _createClass$1(Mx3dGeomBoundedSurface,[{key:"DynamicType",value:function DynamicType(){return this.imp.DynamicType()}}]),Mx3dGeomBoundedSurface}(ms);function arrayToArray1OfReal(t){for(var p=new cs(1,t.length),h=0;h<t.length;h++)p.SetValue(h+1,t[h]);return p}function arrayToArray1OfInteger(t){for(var p=new wo(1,t.length),h=0;h<t.length;h++)p.SetValue(h+1,t[h]);return p}function arrayToArray1OfPnt(t){for(var p=new us(1,t.length),h=0;h<t.length;h++)p.SetValue(h+1,t[h]);return p}function arrayToArray2OfPnt(t){for(var p=t.length,h=t[0].length,x=new ls(1,p,1,h),M=0;M<p;M++)for(var k=0;k<h;k++)x.SetValue(M+1,k+1,t[M][k]);return x}function arrayToArray2OfReal(t){for(var p=t.length,h=t[0].length,x=new ps(1,p,1,h),M=0;M<p;M++)for(var k=0;k<h;k++)x.SetValue(M+1,k+1,t[M][k]);return x}function array2OfPntToArray(t){for(var p=new Array,h=1;h<=t.UpperRow();h++){for(var x=new Array,M=1;M<=t.UpperCol();M++)x.push(t.Value(h,M));p.push(x)}return p}function array2OfRealToArray(t){for(var p=new Array,h=1;h<=t.UpperRow();h++){for(var x=new Array,M=1;M<=t.UpperCol();M++)x.push(t.Value(h,M));p.push(x)}return p}function array1OfRealToArray(t){for(var p=new Array,h=1;h<=t.Length();h++)p.push(t.Value(h));return p}function array1OfIntegerToArray(t){for(var p=new Array,h=1;h<=t.Length();h++)p.push(t.Value(h));return p}var Cs=function(t){_inherits$1(Mx3dGeomBSplineSurface,t);var p=_createSuper$2(Mx3dGeomBSplineSurface);function Mx3dGeomBSplineSurface(t,h,x,M,k,I,N,V,ee,te){var re;if(_classCallCheck$1(this,Mx3dGeomBSplineSurface),t instanceof Array&&h instanceof Array&&"number"==typeof h[0]){re=p.call(this);var ne=arrayToArray2OfPnt(t),ie=arrayToArray1OfReal(h),ae=arrayToArray1OfReal(x),oe=arrayToArray1OfInteger(M),se=arrayToArray1OfInteger(k);re.initTempObject(new Ea.imp.Mx3dGeomBSplineSurface(ne.getImp(),ie.getImp(),ae.getImp(),oe.getImp(),se.getImp(),I,N,V,ee))}else if(h instanceof Array&&h[0]instanceof Array){re=p.call(this);var ce=arrayToArray2OfPnt(t),ue=arrayToArray2OfReal(h),le=arrayToArray1OfReal(x),pe=arrayToArray1OfReal(M),he=arrayToArray1OfInteger(k),fe=arrayToArray1OfInteger(I);re.initTempObject(new Ea.imp.Mx3dGeomBSplineSurface(ce.getImp(),ue.getImp(),le.getImp(),pe.getImp(),he.getImp(),fe.getImp(),N,V,ee,te))}else t instanceof Object&&(re=p.call(this,t));return _possibleConstructorReturn$1(re)}return _createClass$1(Mx3dGeomBSplineSurface,[{key:"ExchangeUV",value:function ExchangeUV(){this.imp.ExchangeUV()}},{key:"SetUPeriodic",value:function SetUPeriodic(){this.imp.SetUPeriodic()}},{key:"SetVPeriodic",value:function SetVPeriodic(){this.imp.SetVPeriodic()}},{key:"PeriodicNormalization",value:function PeriodicNormalization(t){var p=arrayToArray1OfReal(t);this.imp.PeriodicNormalization(p.getImp())}},{key:"SetUOrigin",value:function SetUOrigin(t){this.imp.SetUOrigin(t)}},{key:"SetVOrigin",value:function SetVOrigin(t){this.imp.SetVOrigin(t)}},{key:"SetUNotPeriodic",value:function SetUNotPeriodic(){this.imp.SetUNotPeriodic()}},{key:"SetVNotPeriodic",value:function SetVNotPeriodic(){this.imp.SetVNotPeriodic()}},{key:"UReverse",value:function UReverse(){this.imp.UReverse()}},{key:"VReverse",value:function VReverse(){this.imp.VReverse()}},{key:"UReversedParameter",value:function UReversedParameter(t){return this.imp.UReversedParameter(t)}},{key:"VReversedParameter",value:function VReversedParameter(t){return this.imp.VReversedParameter(t)}},{key:"IncreaseDegree",value:function IncreaseDegree(t,p){this.imp.IncreaseDegree(t,p)}},{key:"InsertUKnots",value:function InsertUKnots(t,p,h,x){var M=arrayToArray1OfReal(t),k=arrayToArray1OfInteger(p);this.imp.InsertUKnots(M.getImp(),k.getImp(),h,x)}},{key:"InsertVKnots",value:function InsertVKnots(t,p,h,x){var M=arrayToArray1OfReal(t),k=arrayToArray1OfInteger(p);this.imp.InsertVKnots(M.getImp(),k.getImp(),h,x)}},{key:"RemoveUKnot",value:function RemoveUKnot(t,p,h){return this.imp.RemoveUKnot(t,p,h)}},{key:"RemoveVKnot",value:function RemoveVKnot(t,p,h){return this.imp.RemoveVKnot(t,p,h)}},{key:"IncreaseUMultiplicity",value:function IncreaseUMultiplicity(t,p,h){h?this.imp.IncreaseUMultiplicity(t,p,h):this.imp.IncreaseUMultiplicity(t,p)}},{key:"IncrementUMultiplicity",value:function IncrementUMultiplicity(t,p,h){this.imp.IncrementUMultiplicity(t,p,h)}},{key:"IncreaseVMultiplicity",value:function IncreaseVMultiplicity(t,p,h){h?this.imp.IncreaseVMultiplicity(t,p,h):this.imp.IncreaseVMultiplicity(t,p)}},{key:"IncrementVMultiplicity",value:function IncrementVMultiplicity(t,p,h){this.imp.IncrementVMultiplicity(t,p,h)}},{key:"InsertUKnot",value:function InsertUKnot(t,p,h,x){this.imp.InsertUKnot(t,p,h,x)}},{key:"InsertVKnot",value:function InsertVKnot(t,p,h,x){this.imp.InsertVKnot(t,p,h,x)}},{key:"Segment",value:function Segment(t,p,h,x){this.imp.Segment(t,p,h,x)}},{key:"CheckAndSegment",value:function CheckAndSegment(t,p,h,x){this.imp.CheckAndSegment(t,p,h,x)}},{key:"SetUKnot",value:function SetUKnot(t,p,h){h?this.imp.SetUKnot(t,p,h):this.imp.SetUKnot(t,p)}},{key:"SetVKnot",value:function SetVKnot(t,p,h){h?this.imp.SetVKnot(t,p,h):this.imp.SetVKnot(t,p)}},{key:"SetUKnots",value:function SetUKnots(t){var p=arrayToArray1OfReal(t);this.imp.SetUKnots(p.getImp())}},{key:"SetVKnots",value:function SetVKnots(t){var p=arrayToArray1OfReal(t);this.imp.SetVKnots(p.getImp())}},{key:"LocateU",value:function LocateU(t,p,h,x){var M=arrayToArray1OfInteger(h);this.imp.LocateU(t,p,M.getImp(),x)}},{key:"LocateV",value:function LocateV(t,p,h,x){var M=arrayToArray1OfInteger(h);this.imp.LocateV(t,p,M.getImp(),x)}},{key:"SetPole",value:function SetPole(t,p,h,x){x?this.imp.SetPole(t,p,h.getImp(),x):this.imp.SetPole(t,p,h.getImp())}},{key:"SetPoleCol",value:function SetPoleCol(t,p,h){var x=arrayToArray1OfPnt(p);if(h){var M=arrayToArray1OfReal(h);this.imp.SetPoleCol(t,x.getImp(),M.getImp())}else this.imp.SetPoleCol(t,x.getImp())}},{key:"SetPoleRow",value:function SetPoleRow(t,p,h){var x=arrayToArray1OfPnt(p);if(h){var M=arrayToArray1OfReal(h);this.imp.SetPoleRow(t,x.getImp(),M.getImp())}else this.imp.SetPoleRow(t,x.getImp())}},{key:"SetWeight",value:function SetWeight(t,p,h){this.imp.SetWeight(t,p,h)}},{key:"SetWeightCol",value:function SetWeightCol(t,p){var h=arrayToArray1OfReal(p);this.imp.SetWeightCol(t,h.getImp())}},{key:"SetWeightRow",value:function SetWeightRow(t,p){var h=arrayToArray1OfReal(p);this.imp.SetWeightRow(t,h.getImp())}},{key:"MovePoint",value:function MovePoint(t,p,h,x,M,k,I,N){var V=arrayToArray1OfInteger(N);this.imp.MovePoint(t,p,h.getImp(),x,M,k,I,V.getImp())}},{key:"IsUClosed",value:function IsUClosed(){return this.imp.IsUClosed()}},{key:"IsVClosed",value:function IsVClosed(){return this.imp.IsVClosed()}},{key:"IsCNu",value:function IsCNu(t){return this.imp.IsCNu(t)}},{key:"IsCNv",value:function IsCNv(t){return this.imp.IsCNv(t)}},{key:"IsUPeriodic",value:function IsUPeriodic(){return this.imp.IsUPeriodic()}},{key:"IsURational",value:function IsURational(){return this.imp.IsURational()}},{key:"IsVPeriodic",value:function IsVPeriodic(){return this.imp.IsVPeriodic()}},{key:"IsVRational",value:function IsVRational(){return this.imp.IsVRational()}},{key:"Bounds",value:function Bounds(t){var p=new Ea.imp.MdGeArray1OfReal(1,4);this.imp.Bounds(p),t[0]=p.Value(1),t[1]=p.Value(2),t[2]=p.Value(3),t[3]=p.Value(4)}},{key:"Continuity",value:function Continuity(){return this.imp.Continuity()}},{key:"FirstUKnotIndex",value:function FirstUKnotIndex(){return this.imp.FirstUKnotIndex()}},{key:"FirstVKnotIndex",value:function FirstVKnotIndex(){return this.imp.FirstVKnotIndex()}},{key:"LastUKnotIndex",value:function LastUKnotIndex(){return this.imp.LastUKnotIndex()}},{key:"LastVKnotIndex",value:function LastVKnotIndex(){return this.imp.LastVKnotIndex()}},{key:"NbUKnots",value:function NbUKnots(){return this.imp.NbUKnots()}},{key:"NbUPoles",value:function NbUPoles(){return this.imp.NbUPoles()}},{key:"NbVKnots",value:function NbVKnots(){return this.imp.NbVKnots()}},{key:"NbVPoles",value:function NbVPoles(){return this.imp.NbVPoles()}},{key:"Pole",value:function Pole(t,p){return new Ya(this.imp.Pole(t,p))}},{key:"Poles",value:function Poles(){return array2OfPntToArray(new ls(this.imp.Poles()))}},{key:"UDegree",value:function UDegree(){return this.imp.UDegree()}},{key:"UKnot",value:function UKnot(t){return this.imp.UKnot(t)}},{key:"UKnots",value:function UKnots(){return array1OfRealToArray(new cs(this.imp.UKnots()))}},{key:"UKnotSequence",value:function UKnotSequence(){return array1OfRealToArray(new cs(this.imp.UKnotSequence()))}},{key:"UMultiplicity",value:function UMultiplicity(t){return this.imp.UMultiplicity(t)}},{key:"UMultiplicities",value:function UMultiplicities(){return array1OfIntegerToArray(new wo(this.imp.UMultiplicities()))}},{key:"VDegree",value:function VDegree(){return this.imp.VDegree()}},{key:"VKnot",value:function VKnot(t){return this.imp.VKnot(t)}},{key:"VKnots",value:function VKnots(){return array1OfRealToArray(new cs(this.imp.VKnots()))}},{key:"VKnotSequence",value:function VKnotSequence(){return array1OfRealToArray(new cs(this.imp.VKnotSequence()))}},{key:"VMultiplicity",value:function VMultiplicity(t){return this.imp.VMultiplicity(t)}},{key:"VMultiplicities",value:function VMultiplicities(){return array1OfIntegerToArray(new wo(this.imp.VMultiplicities()))}},{key:"Weight",value:function Weight(t,p){return this.imp.Weight(t,p)}},{key:"Weights",value:function Weights(){return array2OfRealToArray(new ps(this.imp.Weights()))}},{key:"D0",value:function D0(t,p,h){this.imp.D0(t,p,h.getImp())}},{key:"D1",value:function D1(t,p,h,x,M){this.imp.D1(t,p,h.getImp(),x.getImp(),M.getImp())}},{key:"D2",value:function D2(t,p,h,x,M,k,I,N){this.imp.D2(t,p,h.getImp(),x.getImp(),M.getImp(),k.getImp(),I.getImp(),N.getImp())}},{key:"D3",value:function D3(t,p,h,x,M,k,I,N,V,ee,te,re){this.imp.D3(t,p,h.getImp(),x.getImp(),M.getImp(),k.getImp(),I.getImp(),N.getImp(),V.getImp(),ee.getImp(),te.getImp(),re.getImp())}},{key:"DN",value:function DN(t,p,h,x){return new eo(this.imp.DN(t,p,h,x))}},{key:"LocalD0",value:function LocalD0(t,p,h,x,M,k,I){this.imp.LocalD0(t,p,h,x,M,k,I.getImp())}},{key:"LocalD1",value:function LocalD1(t,p,h,x,M,k,I,N,V){this.imp.LocalD1(t,p,h,x,M,k,I.getImp(),N.getImp(),V.getImp())}},{key:"LocalD2",value:function LocalD2(t,p,h,x,M,k,I,N,V,ee,te,re){this.imp.LocalD2(t,p,h,x,M,k,I.getImp(),N.getImp(),V.getImp(),ee.getImp(),te.getImp(),re.getImp())}},{key:"LocalD3",value:function LocalD3(t,p,h,x,M,k,I,N,V,ee,te,re,ne,ie,ae,oe){this.imp.LocalD3(t,p,h,x,M,k,I.getImp(),N.getImp(),V.getImp(),ee.getImp(),te.getImp(),re.getImp(),ne.getImp(),ie.getImp(),ae.getImp(),oe.getImp())}},{key:"LocalDN",value:function LocalDN(t,p,h,x,M,k,I,N){return new eo(this.imp.LocalDN(t,p,h,x,M,k,I,N))}},{key:"LocalValue",value:function LocalValue(t,p,h,x,M,k){return new Ya(this.imp.LocalValue(t,p,h,x,M,k))}},{key:"Transform",value:function Transform(t){this.imp.Transform(t.getImp())}},{key:"Copy",value:function Copy(){return new Bo(this.imp.Copy())}},{key:"DynamicType",value:function DynamicType(){return this.imp.DynamicType()}},{key:"DynCast",value:function DynCast(t){return new Mx3dGeomBSplineSurface(Ea.globalMethods.DynCastToBSplineSurface(t.getImp()))}},{key:"Face",value:function Face(t,p,h,x,M){return"number"==typeof t&&1===arguments.length?new io(this.imp.Face(t)):t instanceof so&&"boolean"==typeof p?new io(this.imp.Face(t.getImp(),p)):"number"==typeof t&&"number"==typeof p&&"number"==typeof h&&"number"==typeof x&&"number"==typeof M?new io(this.imp.Face(t,p,h,x,M)):new io}}],[{key:"DownCast",value:function DownCast(t){return new Mx3dGeomBSplineSurface(Ea.globalMethods.DynCastToBSplineSurface(t.getImp()))}}]),Mx3dGeomBSplineSurface}(Ms),ws=function(t){_inherits$1(Mx3dGeomBezierSurface,t);var p=_createSuper$2(Mx3dGeomBezierSurface);function Mx3dGeomBezierSurface(t,h){var x;_classCallCheck$1(this,Mx3dGeomBezierSurface);var M=arrayToArray2OfPnt(t);if(t instanceof Array&&t[0]instanceof Array&&t[0][0]instanceof Ya&&1===arguments.length)(x=p.call(this)).initTempObject(new Ea.imp.Mx3dGeomBezierSurface(M.getImp()));else if(t instanceof Array&&t[0]instanceof Array&&t[0][0]instanceof Ya&&h instanceof Array&&h[0]instanceof Array&&"number"==typeof h[0][0]){x=p.call(this);var k=arrayToArray2OfReal(h);x.initTempObject(new Ea.imp.Mx3dGeomBezierSurface(M.getImp(),k.getImp()))}else t instanceof Object&&(x=p.call(this,t));return _possibleConstructorReturn$1(x)}return _createClass$1(Mx3dGeomBezierSurface,[{key:"ExchangeUV",value:function ExchangeUV(){this.imp.ExchangeUV()}},{key:"Increase",value:function Increase(t,p){this.imp.Increase(t,p)}},{key:"InsertPoleColAfter",value:function InsertPoleColAfter(t,p,h){var x=arrayToArray1OfPnt(p);if(h){var M=arrayToArray1OfReal(h);this.imp.InsertPoleColAfter(t,x.getImp(),M.getImp())}else this.imp.InsertPoleColAfter(t,x.getImp())}},{key:"InsertPoleColBefore",value:function InsertPoleColBefore(t,p,h){var x=arrayToArray1OfPnt(p);if(h){var M=arrayToArray1OfReal(h);this.imp.InsertPoleColBefore(t,x.getImp(),M.getImp())}else this.imp.InsertPoleColBefore(t,x.getImp())}},{key:"InsertPoleRowAfter",value:function InsertPoleRowAfter(t,p,h){var x=arrayToArray1OfPnt(p);if(h){var M=arrayToArray1OfReal(h);this.imp.InsertPoleRowAfter(t,x.getImp(),M.getImp())}else this.imp.InsertPoleRowAfter(t,x.getImp())}},{key:"InsertPoleRowBefore",value:function InsertPoleRowBefore(t,p,h){var x=arrayToArray1OfPnt(p);if(h){var M=arrayToArray1OfReal(h);this.imp.InsertPoleRowBefore(t,x.getImp(),M.getImp())}else this.imp.InsertPoleRowBefore(t,x.getImp())}},{key:"RemovePoleCol",value:function RemovePoleCol(t){this.imp.RemovePoleCol(t)}},{key:"RemovePoleRow",value:function RemovePoleRow(t){this.imp.RemovePoleRow(t)}},{key:"Segment",value:function Segment(t,p,h,x){this.imp.Segment(t,p,h,x)}},{key:"SetPole",value:function SetPole(t,p,h,x){x?this.imp.SetPole(t,p,h.getImp(),x):this.imp.SetPole(t,p,h.getImp())}},{key:"SetPoleCol",value:function SetPoleCol(t,p,h){var x=arrayToArray1OfPnt(p);if(h){var M=arrayToArray1OfReal(h);this.imp.SetPoleCol(t,x.getImp(),M.getImp())}else this.imp.SetPoleCol(t,x.getImp())}},{key:"SetPoleRow",value:function SetPoleRow(t,p,h){var x=arrayToArray1OfPnt(p);if(h){var M=arrayToArray1OfReal(h);this.imp.SetPoleRow(t,x.getImp(),M.getImp())}else this.imp.SetPoleRow(t,x.getImp())}},{key:"SetWeight",value:function SetWeight(t,p,h){this.imp.SetWeight(t,p,h)}},{key:"SetWeightCol",value:function SetWeightCol(t,p){var h=arrayToArray1OfReal(p);this.imp.SetWeightCol(t,h.getImp())}},{key:"SetWeightRow",value:function SetWeightRow(t,p){var h=arrayToArray1OfReal(p);this.imp.SetWeightRow(t,h.getImp())}},{key:"UReverse",value:function UReverse(){this.imp.UReverse()}},{key:"UReversedParameter",value:function UReversedParameter(t){return this.imp.UReversedParameter(t)}},{key:"VReverse",value:function VReverse(){this.imp.VReverse()}},{key:"VReversedParameter",value:function VReversedParameter(t){return this.imp.VReversedParameter(t)}},{key:"Bounds",value:function Bounds(t){var p=new Ea.imp.MdGeArray1OfReal(1,4);this.imp.Bounds(p),t[0]=p.Value(1),t[1]=p.Value(2),t[2]=p.Value(3),t[3]=p.Value(4)}},{key:"Continuity",value:function Continuity(){return this.imp.Continuity()}},{key:"D0",value:function D0(t,p,h){this.imp.D0(t,p,h.getImp())}},{key:"D1",value:function D1(t,p,h,x,M){this.imp.D1(t,p,h.getImp(),x.getImp(),M.getImp())}},{key:"D2",value:function D2(t,p,h,x,M,k,I,N){this.imp.D2(t,p,h.getImp(),x.getImp(),M.getImp(),k.getImp(),I.getImp(),N.getImp())}},{key:"D3",value:function D3(t,p,h,x,M,k,I,N,V,ee,te,re){this.imp.D3(t,p,h.getImp(),x.getImp(),M.getImp(),k.getImp(),I.getImp(),N.getImp(),V.getImp(),ee.getImp(),te.getImp(),re.getImp())}},{key:"DN",value:function DN(t,p,h,x){return new eo(this.imp.DN(t,p,h,x))}},{key:"NbUPoles",value:function NbUPoles(){return this.imp.NbUPoles()}},{key:"NbVPoles",value:function NbVPoles(){return this.imp.NbVPoles()}},{key:"Pole",value:function Pole(t,p){return new Ya(this.imp.Pole(t,p))}},{key:"Poles",value:function Poles(){return array2OfPntToArray(new ls(this.imp.Poles()))}},{key:"UDegree",value:function UDegree(){return this.imp.UDegree()}},{key:"Weight",value:function Weight(t,p){return this.imp.Weight(t,p)}},{key:"Weights",value:function Weights(){return array2OfRealToArray(new ps(this.imp.Weights()))}},{key:"IsUClosed",value:function IsUClosed(){return this.imp.IsUClosed()}},{key:"IsVClosed",value:function IsVClosed(){return this.imp.IsVClosed()}},{key:"IsCNu",value:function IsCNu(t){return this.imp.IsCNu(t)}},{key:"IsCNv",value:function IsCNv(t){return this.imp.IsCNv(t)}},{key:"IsUPeriodic",value:function IsUPeriodic(){return this.imp.IsUPeriodic()}},{key:"IsVPeriodic",value:function IsVPeriodic(){return this.imp.IsVPeriodic()}},{key:"IsURational",value:function IsURational(){return this.imp.IsURational()}},{key:"IsVRational",value:function IsVRational(){return this.imp.IsVRational()}},{key:"Transform",value:function Transform(t){this.imp.Transform(t.getImp())}},{key:"Copy",value:function Copy(){return new Bo(this.imp.Copy())}},{key:"DynCast",value:function DynCast(t){return new Mx3dGeomBezierSurface(Ea.globalMethods.DynCastToBezierSurface(t.getImp()))}},{key:"Face",value:function Face(t,p,h,x,M){return"number"==typeof t&&1===arguments.length?new io(this.imp.Face(t)):t instanceof so&&"boolean"==typeof p?new io(this.imp.Face(t.getImp(),p)):"number"==typeof t&&"number"==typeof p&&"number"==typeof h&&"number"==typeof x&&"number"==typeof M?new io(this.imp.Face(t,p,h,x,M)):new io}}],[{key:"DownCast",value:function DownCast(t){return new Mx3dGeomBezierSurface(Ea.globalMethods.DynCastToBezierSurface(t.getImp()))}}]),Mx3dGeomBezierSurface}(Ms),Ss=function(t){_inherits$1(Mx3dGeMaterial,t);var p=_createSuper$2(Mx3dGeMaterial);function Mx3dGeMaterial(t){var h;return _classCallCheck$1(this,Mx3dGeMaterial),t?"number"==typeof t?(h=p.call(this)).initTempObject(new Ea.imp.Mx3dGeMaterial(t)):t instanceof Object&&(h=p.call(this,t)):(h=p.call(this)).initTempObject(new Ea.imp.Mx3dGeMaterial),_possibleConstructorReturn$1(h)}return _createClass$1(Mx3dGeMaterial,[{key:"Name",value:function Name(){return this.imp.Name()}},{key:"RequestedName",value:function RequestedName(){return this.imp.RequestedName()}},{key:"StringName",value:function StringName(){return this.imp.StringName()}},{key:"MaterialName",value:function MaterialName(){return this.imp.MaterialName()}},{key:"SetMaterialName",value:function SetMaterialName(t){this.imp.SetMaterialName(t)}},{key:"Reset",value:function Reset(){this.imp.Reset()}},{key:"Color",value:function Color(){return new bo(this.imp.Color())}},{key:"SetColor",value:function SetColor(t){this.imp.SetColor(t.getImp())}},{key:"Transparency",value:function Transparency(){return this.imp.Transparency()}},{key:"Alpha",value:function Alpha(){return this.imp.Alpha()}},{key:"SetTransparency",value:function SetTransparency(t){this.imp.SetTransparency(t)}},{key:"SetAlpha",value:function SetAlpha(t){this.imp.SetAlpha(t)}},{key:"AmbientColor",value:function AmbientColor(){return new bo(this.imp.AmbientColor())}},{key:"SetAmbientColor",value:function SetAmbientColor(t){this.imp.SetAmbientColor(t.getImp())}},{key:"DiffuseColor",value:function DiffuseColor(){return new bo(this.imp.DiffuseColor())}},{key:"SetDiffuseColor",value:function SetDiffuseColor(t){this.imp.SetDiffuseColor(t.getImp())}},{key:"SpecularColor",value:function SpecularColor(){return new bo(this.imp.SpecularColor())}},{key:"SetSpecularColor",value:function SetSpecularColor(t){this.imp.SetSpecularColor(t.getImp())}},{key:"EmissiveColor",value:function EmissiveColor(){return new bo(this.imp.EmissiveColor())}},{key:"SetEmissiveColor",value:function SetEmissiveColor(t){this.imp.SetEmissiveColor(t.getImp())}},{key:"Shininess",value:function Shininess(){return this.imp.Shininess()}},{key:"SetShininess",value:function SetShininess(t){this.imp.SetShininess(t)}},{key:"IncreaseShine",value:function IncreaseShine(t){this.imp.IncreaseShine(t)}},{key:"RefractionIndex",value:function RefractionIndex(){return this.imp.RefractionIndex()}},{key:"SetRefractionIndex",value:function SetRefractionIndex(t){this.imp.SetRefractionIndex(t)}},{key:"ReflectionMode",value:function ReflectionMode(t){return this.imp.ReflectionMode(t)}},{key:"MaterialType",value:function MaterialType(){return this.imp.MaterialType()}},{key:"SetMaterialType",value:function SetMaterialType(t){this.imp.SetMaterialType(t)}},{key:"IsDifferent",value:function IsDifferent(t){return this.imp.IsDifferent(t.getImp())}},{key:"IsEqual",value:function IsEqual(t){return this.imp.IsEqual(t.getImp())}}]),Mx3dGeMaterial}(Fa),Ts=function(t){_inherits$1(Mx3dAspectLine,t);var p=_createSuper$2(Mx3dAspectLine);function Mx3dAspectLine(t,h,x){var M;return _classCallCheck$1(this,Mx3dAspectLine),t instanceof bo&&"number"==typeof h&&"number"==typeof x?(M=p.call(this)).initTempObject(new Ea.imp.Mx3dAspectLine(t.getImp(),h,x)):t instanceof Object&&(M=p.call(this,t)),_possibleConstructorReturn$1(M)}return _createClass$1(Mx3dAspectLine,[{key:"SetColor",value:function SetColor(t){this.imp.SetColor(t.getImp())}},{key:"SetTypeOfLine",value:function SetTypeOfLine(t){this.imp.SetTypeOfLine(t)}},{key:"SetWidth",value:function SetWidth(t){this.imp.SetWidth(t)}}]),Mx3dAspectLine}(Wa),As=function(t){_inherits$1(Mx3dAspectText,t);var p=_createSuper$2(Mx3dAspectText);function Mx3dAspectText(t){var h;return _classCallCheck$1(this,Mx3dAspectText),t?h=p.call(this,t):(h=p.call(this)).initTempObject(new Ea.imp.Mx3dAspectText),_possibleConstructorReturn$1(h)}return _createClass$1(Mx3dAspectText,[{key:"SetColor",value:function SetColor(t){this.imp.SetColor(t.getImp())}},{key:"SetFont",value:function SetFont(t){this.imp.SetFont(t)}},{key:"SetHeight",value:function SetHeight(t){this.imp.SetHeight(t)}},{key:"SetAngle",value:function SetAngle(t){this.imp.SetAngle(t)}},{key:"Height",value:function Height(){return this.imp.Height()}},{key:"Angle",value:function Angle(){return this.imp.Angle()}},{key:"SetHorizontalJustification",value:function SetHorizontalJustification(t){this.imp.SetHorizontalJustification(t)}},{key:"SetVerticalJustification",value:function SetVerticalJustification(t){this.imp.SetVerticalJustification(t)}},{key:"SetOrientation",value:function SetOrientation(t){this.imp.SetOrientation(t)}},{key:"HorizontalJustification",value:function HorizontalJustification(){return this.imp.HorizontalJustification()}},{key:"VerticalJustification",value:function VerticalJustification(){return this.imp.VerticalJustification()}},{key:"Orientation",value:function Orientation(){return this.imp.Orientation()}}]),Mx3dAspectText}(Wa),ks=function(t){_inherits$1(Mx3dAspectArrow,t);var p=_createSuper$2(Mx3dAspectArrow);function Mx3dAspectArrow(t,h){var x;return _classCallCheck$1(this,Mx3dAspectArrow),t||h?"number"==typeof t&&"number"==typeof h?(x=p.call(this)).initTempObject(new Ea.imp.Mx3dAspectArrow(t,h)):t instanceof Object&&(x=p.call(this,t)):(x=p.call(this)).initTempObject(new Ea.imp.Mx3dAspectArrow),_possibleConstructorReturn$1(x)}return _createClass$1(Mx3dAspectArrow,[{key:"SetAngle",value:function SetAngle(t){this.imp.SetAngle(t)}},{key:"Angle",value:function Angle(){return this.imp.Angle()}},{key:"SetLength",value:function SetLength(t){this.imp.SetLength(t)}},{key:"Length",value:function Length(){return this.imp.Length()}},{key:"SetZoomable",value:function SetZoomable(t){this.imp.SetZoomable(t)}},{key:"IsZoomable",value:function IsZoomable(){return this.imp.IsZoomable()}},{key:"SetColor",value:function SetColor(t){this.imp.SetColor(t.getImp())}}]),Mx3dAspectArrow}(Wa),Ds=function(t){_inherits$1(Mx3dAspectDim,t);var p=_createSuper$2(Mx3dAspectDim);function Mx3dAspectDim(t){var h;return _classCallCheck$1(this,Mx3dAspectDim),t?h=p.call(this,t):(h=p.call(this)).initTempObject(new Ea.imp.Mx3dAspectDim),_possibleConstructorReturn$1(h)}return _createClass$1(Mx3dAspectDim,[{key:"SetLineAspect",value:function SetLineAspect(t){this.imp.SetLineAspect(t.getImp())}},{key:"SetTextAspect",value:function SetTextAspect(t){this.imp.SetTextAspect(t.getImp())}},{key:"IsText3d",value:function IsText3d(){return this.imp.IsText3d()}},{key:"MakeText3d",value:function MakeText3d(t){this.imp.MakeText3d(t)}},{key:"IsTextShaded",value:function IsTextShaded(){return this.imp.IsTextShaded()}},{key:"MakeTextShaded",value:function MakeTextShaded(t){this.imp.MakeTextShaded(t)}},{key:"IsArrows3d",value:function IsArrows3d(){return this.imp.IsArrows3d()}},{key:"MakeArrows3d",value:function MakeArrows3d(t){this.imp.MakeArrows3d(t)}},{key:"IsUnitsDisplayed",value:function IsUnitsDisplayed(){return this.imp.IsUnitsDisplayed()}},{key:"MakeUnitsDisplayed",value:function MakeUnitsDisplayed(t){this.imp.MakeUnitsDisplayed(t)}},{key:"SetArrowOrientation",value:function SetArrowOrientation(t){this.imp.SetArrowOrientation(t)}},{key:"ArrowOrientation",value:function ArrowOrientation(){return this.imp.ArrowOrientation()}},{key:"SetTextVerticalPosition",value:function SetTextVerticalPosition(t){this.imp.SetTextVerticalPosition(t)}},{key:"TextVerticalPosition",value:function TextVerticalPosition(){return this.imp.TextVerticalPosition()}},{key:"SetTextHorizontalPosition",value:function SetTextHorizontalPosition(t){this.imp.SetTextHorizontalPosition(t)}},{key:"TextHorizontalPosition",value:function TextHorizontalPosition(){return this.imp.TextHorizontalPosition()}},{key:"SetArrowAspect",value:function SetArrowAspect(t){this.imp.SetArrowAspect(t.getImp())}},{key:"SetCommonColor",value:function SetCommonColor(t){this.imp.SetCommonColor(t.getImp())}},{key:"SetExtensionSize",value:function SetExtensionSize(t){this.imp.SetExtensionSize(t)}},{key:"ExtensionSize",value:function ExtensionSize(){return this.imp.ExtensionSize()}},{key:"SetArrowTailSize",value:function SetArrowTailSize(t){this.imp.SetArrowTailSize(t)}},{key:"ArrowTailSize",value:function ArrowTailSize(){return this.imp.ArrowTailSize()}},{key:"SetValueStringFormat",value:function SetValueStringFormat(t){this.imp.SetValueStringFormat(t)}},{key:"ValueStringFormat",value:function ValueStringFormat(){return this.imp.ValueStringFormat()}}]),Mx3dAspectDim}(Wa),Ps=function(t){_inherits$1(Mx3dDimDiameter,t);var p=_createSuper$2(Mx3dDimDiameter);function Mx3dDimDiameter(t,h){var x;return _classCallCheck$1(this,Mx3dDimDiameter),t instanceof ro&&!h?(x=p.call(this)).initTempObject(new Ea.imp.Mx3dDimDiameter(t.getImp())):t instanceof ro&&h instanceof Po?(x=p.call(this)).initTempObject(new Ea.imp.Mx3dDimDiameter(t.getImp(),h.getImp())):t instanceof Object&&(x=p.call(this,t)),_possibleConstructorReturn$1(x)}return _createClass$1(Mx3dDimDiameter,[{key:"Circle",value:function Circle(){return new ro(this.imp.Circle())}},{key:"AnchorPoint",value:function AnchorPoint(){return new Ya(this.imp.AnchorPoint())}},{key:"Shape",value:function Shape(){return new no(this.imp.Shape())}},{key:"SetMeasuredGeometry",value:function SetMeasuredGeometry(t){this.imp.SetMeasuredGeometry(t.getImp())}},{key:"SetTextPosition",value:function SetTextPosition(t){this.imp.SetTextPosition(t.getImp())}},{key:"GetTextPosition",value:function GetTextPosition(){return new Ya(this.imp.GetTextPosition())}},{key:"SetDisplayUnits",value:function SetDisplayUnits(t){this.imp.SetDisplayUnits(t)}},{key:"SetModelUnits",value:function SetModelUnits(t){this.imp.SetModelUnits(t)}},{key:"GetValue",value:function GetValue(){return this.imp.GetValue()}},{key:"SetComputedValue",value:function SetComputedValue(){this.imp.SetComputedValue()}},{key:"SetCustomValue",value:function SetCustomValue(t){this.imp.SetCustomValue(t)}},{key:"GetPlane",value:function GetPlane(){return new Po(this.imp.GetPlane())}},{key:"GetGeometryType",value:function GetGeometryType(){return this.imp.GetGeometryType()}},{key:"SetCustomPlane",value:function SetCustomPlane(t){this.imp.SetCustomPlane(t.getImp())}},{key:"UnsetCustomPlane",value:function UnsetCustomPlane(){this.imp.UnsetCustomPlane()}},{key:"IsTextPositionCustom",value:function IsTextPositionCustom(){return this.imp.IsTextPositionCustom()}},{key:"SetDimensionAspect",value:function SetDimensionAspect(t){this.imp.SetDimensionAspect(t.getImp())}},{key:"KindOfDimension",value:function KindOfDimension(){return this.imp.KindOfDimension()}},{key:"UnsetFixedTextPosition",value:function UnsetFixedTextPosition(){this.imp.UnsetFixedTextPosition()}},{key:"SelToleranceForText2d",value:function SelToleranceForText2d(){return this.imp.SelToleranceForText2d()}},{key:"SetSelToleranceForText2d",value:function SetSelToleranceForText2d(t){this.imp.SetSelToleranceForText2d(t)}},{key:"GetFlyout",value:function GetFlyout(){return this.imp.GetFlyout()}},{key:"SetFlyout",value:function SetFlyout(t){this.imp.SetFlyout(t)}},{key:"IsValid",value:function IsValid(){return this.imp.IsValid()}}]),Mx3dDimDiameter}(Va),Os=function(t){_inherits$1(Mx3dDimRadius,t);var p=_createSuper$2(Mx3dDimRadius);function Mx3dDimRadius(t,h){var x;return _classCallCheck$1(this,Mx3dDimRadius),t instanceof ro&&!h?(x=p.call(this)).initTempObject(new Ea.imp.Mx3dDimRadius(t.getImp())):t instanceof ro&&h instanceof Ya?(x=p.call(this)).initTempObject(new Ea.imp.Mx3dDimRadius(t.getImp(),h.getImp())):t instanceof Object&&(x=p.call(this,t)),_possibleConstructorReturn$1(x)}return _createClass$1(Mx3dDimRadius,[{key:"Circle",value:function Circle(){return new ro(this.imp.Circle())}},{key:"AnchorPoint",value:function AnchorPoint(){return new Ya(this.imp.AnchorPoint())}},{key:"Shape",value:function Shape(){return new no(this.imp.Shape())}},{key:"SetMeasuredGeometry",value:function SetMeasuredGeometry(t,p,h){t instanceof ro&&!p&&!h?this.imp.SetMeasuredGeometry(t.getImp()):t instanceof ro&&p instanceof Ya&&"boolean"==typeof h&&this.imp.SetMeasuredGeometry(t.getImp(),p.getImp(),h)}},{key:"SetTextPosition",value:function SetTextPosition(t){this.imp.SetTextPosition(t.getImp())}},{key:"GetTextPosition",value:function GetTextPosition(){return new Ya(this.imp.GetTextPosition())}},{key:"GetValue",value:function GetValue(){return this.imp.GetValue()}},{key:"SetComputedValue",value:function SetComputedValue(){this.imp.SetComputedValue()}},{key:"SetCustomValue",value:function SetCustomValue(t){this.imp.SetCustomValue(t)}},{key:"GetPlane",value:function GetPlane(){return new Po(this.imp.GetPlane())}},{key:"GetGeometryType",value:function GetGeometryType(){return this.imp.GetGeometryType()}},{key:"SetCustomPlane",value:function SetCustomPlane(t){this.imp.SetCustomPlane(t.getImp())}},{key:"UnsetCustomPlane",value:function UnsetCustomPlane(){this.imp.UnsetCustomPlane()}},{key:"IsTextPositionCustom",value:function IsTextPositionCustom(){return this.imp.IsTextPositionCustom()}},{key:"SetDimensionAspect",value:function SetDimensionAspect(t){this.imp.SetDimensionAspect(t.getImp())}},{key:"KindOfDimension",value:function KindOfDimension(){return this.imp.KindOfDimension()}},{key:"UnsetFixedTextPosition",value:function UnsetFixedTextPosition(){this.imp.UnsetFixedTextPosition()}},{key:"SelToleranceForText2d",value:function SelToleranceForText2d(){return this.imp.SelToleranceForText2d()}},{key:"SetSelToleranceForText2d",value:function SetSelToleranceForText2d(t){this.imp.SetSelToleranceForText2d(t)}},{key:"GetFlyout",value:function GetFlyout(){return this.imp.GetFlyout()}},{key:"SetFlyout",value:function SetFlyout(t){this.imp.SetFlyout(t)}},{key:"IsValid",value:function IsValid(){return this.imp.IsValid()}}]),Mx3dDimRadius}(Va),Is=function(t){_inherits$1(Mx3dDimAngle,t);var p=_createSuper$2(Mx3dDimAngle);function Mx3dDimAngle(t,h,x){var M;return _classCallCheck$1(this,Mx3dDimAngle),t instanceof oo&&h instanceof oo?(M=p.call(this)).initTempObject(new Ea.imp.Mx3dDimAngle(t.getImp(),h.getImp())):t instanceof Ya&&h instanceof Ya&&x instanceof Ya?(M=p.call(this)).initTempObject(new Ea.imp.Mx3dDimAngle(t.getImp(),h.getImp(),x.getImp())):t instanceof Object&&(M=p.call(this,t)),_possibleConstructorReturn$1(M)}return _createClass$1(Mx3dDimAngle,[{key:"FirstPoint",value:function FirstPoint(){return new Ya(this.imp.FirstPoint())}},{key:"SecondPoint",value:function SecondPoint(){return new Ya(this.imp.SecondPoint())}},{key:"CenterPoint",value:function CenterPoint(){return new Ya(this.imp.CenterPoint())}},{key:"FirstShape",value:function FirstShape(){return new no(this.imp.FirstShape())}},{key:"SecondShape",value:function SecondShape(){return new no(this.imp.SecondShape())}},{key:"ThirdShape",value:function ThirdShape(){return new no(this.imp.ThirdShape())}},{key:"SetMeasuredGeometry",value:function SetMeasuredGeometry(t,p,h){t instanceof io?this.imp.SetMeasuredGeometry(t.getImp()):t instanceof oo&&p instanceof oo?this.imp.SetMeasuredGeometry(t.getImp(),p.getImp()):t instanceof Ya&&p instanceof Ya&&h instanceof Ya&&this.imp.SetMeasuredGeometry(t.getImp(),p.getImp(),h.getImp())}},{key:"SetTextPosition",value:function SetTextPosition(t){this.imp.SetTextPosition(t.getImp())}},{key:"GetTextPosition",value:function GetTextPosition(){return new Ya(this.imp.GetTextPosition())}},{key:"GetDisplayUnits",value:function GetDisplayUnits(){return this.imp.GetDisplayUnits()}},{key:"GetModelUnits",value:function GetModelUnits(){return this.imp.GetModelUnits()}},{key:"SetDisplayUnits",value:function SetDisplayUnits(t){this.imp.SetDisplayUnits(t)}},{key:"SetModelUnits",value:function SetModelUnits(t){this.imp.SetModelUnits(t)}},{key:"SetType",value:function SetType(t){this.imp.SetType(t)}},{key:"GetType",value:function GetType(){return this.imp.GetType()}},{key:"SetArrowsVisibility",value:function SetArrowsVisibility(t){this.imp.SetArrowsVisibility(t)}},{key:"GetArrowsVisibility",value:function GetArrowsVisibility(){return this.imp.GetArrowsVisibility()}},{key:"GetValue",value:function GetValue(){return this.imp.GetValue()}},{key:"SetComputedValue",value:function SetComputedValue(){this.imp.SetComputedValue()}},{key:"SetCustomValue",value:function SetCustomValue(t){this.imp.SetCustomValue(t)}},{key:"GetPlane",value:function GetPlane(){return new Po(this.imp.GetPlane())}},{key:"GetGeometryType",value:function GetGeometryType(){return this.imp.GetGeometryType()}},{key:"SetCustomPlane",value:function SetCustomPlane(t){this.imp.SetCustomPlane(t.getImp())}},{key:"UnsetCustomPlane",value:function UnsetCustomPlane(){this.imp.UnsetCustomPlane()}},{key:"IsTextPositionCustom",value:function IsTextPositionCustom(){return this.imp.IsTextPositionCustom()}},{key:"SetDimensionAspect",value:function SetDimensionAspect(t){this.imp.SetDimensionAspect(t.getImp())}},{key:"KindOfDimension",value:function KindOfDimension(){return this.imp.KindOfDimension()}},{key:"UnsetFixedTextPosition",value:function UnsetFixedTextPosition(){this.imp.UnsetFixedTextPosition()}},{key:"SelToleranceForText2d",value:function SelToleranceForText2d(){return this.imp.SelToleranceForText2d()}},{key:"SetSelToleranceForText2d",value:function SetSelToleranceForText2d(t){this.imp.SetSelToleranceForText2d(t)}},{key:"GetFlyout",value:function GetFlyout(){return this.imp.GetFlyout()}},{key:"SetFlyout",value:function SetFlyout(t){this.imp.SetFlyout(t)}},{key:"IsValid",value:function IsValid(){return this.imp.IsValid()}}]),Mx3dDimAngle}(Va),Ls=function(t){_inherits$1(Mx3dDimLength,t);var p=_createSuper$2(Mx3dDimLength);function Mx3dDimLength(t,h,x){var M;return _classCallCheck$1(this,Mx3dDimLength),t?t instanceof oo&&h instanceof Po?(M=p.call(this)).initTempObject(new Ea.imp.Mx3dDimLength(t.getImp(),h.getImp())):t instanceof Ya&&h instanceof Ya&&x instanceof Po?(M=p.call(this)).initTempObject(new Ea.imp.Mx3dDimLength(t.getImp(),h.getImp(),x.getImp())):t instanceof Object&&(M=p.call(this,t)):(M=p.call(this)).initTempObject(new Ea.imp.Mx3dDimLength),_possibleConstructorReturn$1(M)}return _createClass$1(Mx3dDimLength,[{key:"FirstPoint",value:function FirstPoint(){return new Ya(this.imp.FirstPoint())}},{key:"SecondPoint",value:function SecondPoint(){return new Ya(this.imp.SecondPoint())}},{key:"FirstShape",value:function FirstShape(){return new no(this.imp.FirstShape())}},{key:"SecondShape",value:function SecondShape(){return new no(this.imp.SecondShape())}},{key:"SetMeasuredGeometry",value:function SetMeasuredGeometry(t,p,h){this.imp.SetMeasuredGeometry(t.getImp(),p.getImp(),h.getImp())}},{key:"SetMeasuredShapes",value:function SetMeasuredShapes(t,p){this.imp.SetMeasuredShapes(t.getImp(),p.getImp())}},{key:"SetTextPosition",value:function SetTextPosition(t){this.imp.SetTextPosition(t.getImp())}},{key:"GetTextPosition",value:function GetTextPosition(){return new Ya(this.imp.GetTextPosition())}},{key:"SetDirection",value:function SetDirection(t,p){this.imp.SetDirection(t.getImp(),p)}},{key:"GetValue",value:function GetValue(){return this.imp.GetValue()}},{key:"SetComputedValue",value:function SetComputedValue(){this.imp.SetComputedValue()}},{key:"SetCustomValue",value:function SetCustomValue(t){this.imp.SetCustomValue(t)}},{key:"GetPlane",value:function GetPlane(){return new Po(this.imp.GetPlane())}},{key:"GetGeometryType",value:function GetGeometryType(){return this.imp.GetGeometryType()}},{key:"SetCustomPlane",value:function SetCustomPlane(t){this.imp.SetCustomPlane(t.getImp())}},{key:"UnsetCustomPlane",value:function UnsetCustomPlane(){this.imp.UnsetCustomPlane()}},{key:"IsTextPositionCustom",value:function IsTextPositionCustom(){return this.imp.IsTextPositionCustom()}},{key:"SetDimensionAspect",value:function SetDimensionAspect(t){this.imp.SetDimensionAspect(t.getImp())}},{key:"KindOfDimension",value:function KindOfDimension(){return this.imp.KindOfDimension()}},{key:"UnsetFixedTextPosition",value:function UnsetFixedTextPosition(){this.imp.UnsetFixedTextPosition()}},{key:"SelToleranceForText2d",value:function SelToleranceForText2d(){return this.imp.SelToleranceForText2d()}},{key:"SetSelToleranceForText2d",value:function SetSelToleranceForText2d(t){this.imp.SetSelToleranceForText2d(t)}},{key:"GetFlyout",value:function GetFlyout(){return this.imp.GetFlyout()}},{key:"SetFlyout",value:function SetFlyout(t){this.imp.SetFlyout(t)}},{key:"IsValid",value:function IsValid(){return this.imp.IsValid()}}]),Mx3dDimLength}(Va),Es=function(t){_inherits$1(Mx3dInterpolateBSplineCurve,t);var p=_createSuper$2(Mx3dInterpolateBSplineCurve);function Mx3dInterpolateBSplineCurve(t,h,x,M){var k;if(_classCallCheck$1(this,Mx3dInterpolateBSplineCurve),"boolean"==typeof h&&"number"==typeof x){if(0===t.length)throw new Error("Points.length === 0");var I=arrayToArray1OfPnt(t);(k=p.call(this)).initTempObject(new Ea.imp.Mx3dInterpolateBSplineCurve(I.getImp(),h,x))}else if(h instanceof Array){if(0===h.length)throw new Error("Parameters.length === 0");if("number"!=typeof h[0])throw new Error("Member of Array is not number");if("boolean"==typeof x&&"number"==typeof M){var N=arrayToArray1OfPnt(t),V=arrayToArray1OfReal(h);(k=p.call(this)).initTempObject(new Ea.imp.Mx3dInterpolateBSplineCurve(N.getImp(),V,x,M))}}return _possibleConstructorReturn$1(k)}return _createClass$1(Mx3dInterpolateBSplineCurve,[{key:"LoadEnds",value:function LoadEnds(t,p){var h=uniToVec(t),x=uniToVec(p);this.imp.LoadEnds(h.getImp(),x.getImp())}},{key:"Load",value:function Load(t,p){for(var h=t.length,x=p.length,M=new us(1,h),k=new wo(1,x),I=1;I<=h;I++)M.SetValue(I,new Ya(t[I-1].X(),t[I-1].Y(),t[I-1].Z()));for(var N=1;N<=x;N++)k.SetValue(N,p[N-1]?1:0);this.imp.Load(M.getImp(),k.getImp())}},{key:"Perform",value:function Perform(){this.imp.Perform()}},{key:"Curve",value:function Curve(){return new fs(this.imp.Curve())}},{key:"IsDone",value:function IsDone(){return this.imp.IsDone()}}]),Mx3dInterpolateBSplineCurve}(Fa);function _objectDestructuringEmpty(t){if(null==t)throw new TypeError("Cannot destructure "+t)}var Rs=function(){function MxMap(){_classCallCheck$1(this,MxMap),_defineProperty(this,"imp",{}),_defineProperty(this,"map",void 0),_defineProperty(this,"originLngLatLike",[0,0]),_defineProperty(this,"originCAD",[0,0]),_defineProperty(this,"meterInCADUnits",1),_defineProperty(this,"modelAltitude",0),_defineProperty(this,"loadOldEditionMethod",!1),_defineProperty(this,"mxcad",new Hr)}var t;return _createClass$1(MxMap,[{key:"setLoadOldEditionMethod",value:function setLoadOldEditionMethod(){this.loadOldEditionMethod=!0}},{key:"getMxDrawObject",value:function getMxDrawObject(){return this.mxcad.getMxDrawObject()}},{key:"initMapbox",value:function initMapbox(t){this.map=t}},{key:"getMapbox",value:function getMapbox(){return this.map}},{key:"mercatorCoord2CAD",value:function mercatorCoord2CAD(t,p){var h=new THREE.Vector3(t,p,0);return h.applyMatrix4(this.imp.matMapToCad),h}},{key:"mercatorCoordToCAD",value:function mercatorCoordToCAD(t,p){var h=new THREE.Vector3(t,p,0);return h.applyMatrix4(this.imp.matMapToCad),h}},{key:"cadToMercatorCoord",value:function cadToMercatorCoord(t){return t.applyMatrix4(this.imp.matCadToMap),t}},{key:"lnglatToCAD",value:function lnglatToCAD(t,p){var h=this.lnglat_to_mercator(t,p);return this.mercatorCoord2CAD(h.x,h.y)}},{key:"cadTolnglat",value:function cadTolnglat(t){var p=this.cadToMercatorCoord(t);return this.mercator_to_lnglat(p.x,p.y,0)}},{key:"map_meters_to_lnglat",value:function map_meters_to_lnglat(t,p){return p=p/20037508.3427892*180,[t=t/20037508.3427892*180,p=180/Math.PI*(2*Math.atan(Math.exp(p*Math.PI/180))-Math.PI/2)]}},{key:"map_lnglat_to_meters",value:function map_lnglat_to_meters(t,p){var h=20037508.3427892*t/180,x=Math.log(Math.tan((90+p)*Math.PI/360))/(Math.PI/180);return[h,x=20037508.3427892*x/180]}},{key:"lnglat_to_mercator",value:function lnglat_to_mercator(t,p){var h=this.map.lnglat_to_mercator(t,p);return new THREE.Vector3(h.x,h.y,0)}},{key:"mercator_to_lnglat",value:function mercator_to_lnglat(t,p,h){var x=this.map.mercator_to_lnglat(t,p,h);return[x.lng,x.lat]}},{key:"outOfChina",value:function outOfChina(t,p){return!(t>73.66&&t<135.05&&p>3.86&&p<53.55)}},{key:"cadLongToMercatorCoord",value:function cadLongToMercatorCoord(t){var p=new THREE.Vector3(0,0,0),h=new THREE.Vector3(t,0,0);return p.applyMatrix4(this.imp.matCadToMap),h.applyMatrix4(this.imp.matCadToMap),p.distanceTo(h)}},{key:"setCoordinatePointAlignment",value:function setCoordinatePointAlignment(t,p,h){this.originCAD=p,this.originLngLatLike=t,this.meterInCADUnits=h}},{key:"create",value:(t=_asyncToGenerator(ie.mark((function _callee2(t,h){var x,M,k,I,N;return ie.wrap((function _callee2$(V){for(;;)switch(V.prev=V.next){case 0:this.map=t,void 0!==h.middlePan&&this.map.dragPan.useMouseMiddle(h.middlePan),void 0===h.viewBackgroundColor&&(h.viewBackgroundColor={red:255,green:255,blue:255}),x=this,M=t.mercatorCoordinate_from_LngLat(x.originLngLatLike,x.modelAltitude),k=M.meterInMercatorCoordinateUnits(),(I=x.imp).map=t,I.elevation=this.modelAltitude,I.mapOrigin=new THREE.Vector3(M.x,M.y,M.z),I.cadOrigin=new THREE.Vector3(this.originCAD[0],this.originCAD[1],0),I.mapLenInCADUnits=x.meterInCADUnits*k,N={id:"3d-model",type:"custom",renderingMode:"3d",onAdd:function onAdd(t,M){return _asyncToGenerator(ie.mark((function _callee(){var k,N;return ie.wrap((function _callee$(V){for(;;)switch(V.prev=V.next){case 0:try{I.canvas=t.getCanvas(),I.gl=M,I.canvasContainer=t.getCanvasContainer(),x.loadOldEditionMethod?((N=h).mapBox=I,N.isAutoResize=!0,N.callback=function(t,p){_objectDestructuringEmpty(p),t.addEvent("loadComplete",(function(){x.map.triggerRepaint()}))},p.MxFun.createMxObject(N)):(h.map=I,k=h.onOpenFileComplete,h.onOpenFileComplete=function(t){k&&k(t),x.map.triggerRepaint()},h.onInit=function(){p.MxFun.setIniset({MapBox:!0})},Ti(h,x.mxcad))}catch(bm){}case 1:case"end":return V.stop()}}),_callee)})))()},render:function render(t,p){I.map.repaint=!1,I.render&&I.render(t,p)}},t.addLayer(N),t.on("resize",(function(){I.onResize&&I.onResize()}));case 15:case"end":return V.stop()}}),_callee2,this)}))),function create(p,h){return t.apply(this,arguments)})}]),MxMap}();function _createForOfIteratorHelper(t,p){var h="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!h){if(Array.isArray(t)||(h=function _unsupportedIterableToArray2(t,p){if(!t)return;if("string"==typeof t)return _arrayLikeToArray2(t,p);var h=Object.prototype.toString.call(t).slice(8,-1);"Object"===h&&t.constructor&&(h=t.constructor.name);if("Map"===h||"Set"===h)return Array.from(t);if("Arguments"===h||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return _arrayLikeToArray2(t,p)}(t))||p&&t&&"number"==typeof t.length){h&&(t=h);var x=0,M=function F(){};return{s:M,n:function n(){return x>=t.length?{done:!0}:{done:!1,value:t[x++]}},e:function e(t){throw t},f:M}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var k,I=!0,N=!1;return{s:function s(){h=h.call(t)},n:function n(){var t=h.next();return I=t.done,t},e:function e(t){N=!0,k=t},f:function f(){try{I||null==h.return||h.return()}finally{if(N)throw k}}}}function _arrayLikeToArray2(t,p){(null==p||p>t.length)&&(p=t.length);for(var h=0,x=new Array(p);h<p;h++)x[h]=t[h];return x}Object.freeze=function(t){return t};var Bs=Object.create||function(){function F(){}return function(t){return F.prototype=t,new F}}();var Ns=/\{ *([\w_-]+) *\}/g;var Gs=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},Fs=3.141592653589793,Vs=6378245,Us=.006693421622965943,js=3e3*Fs/180;function lonLatToTileNumbers(t,p,h){var x=Fs/180*p,M=Math.pow(2,h);return[parseInt((t+180)/360*M),parseInt((1-Math.asinh(Math.tan(x))/Fs)/2*M)]}function bd09_To_gps84(t,p){if(Gs(t)){var h=t[0];p=t[1],t=h}if(t instanceof Object){h=t.lng;p=t.lat,t=h}var x=function bd09_To_gcj02(t,p){var h=t-.0065,x=p-.006,M=Math.sqrt(h*h+x*x)-2e-5*Math.sin(x*js),k=Math.atan2(x,h)-3e-6*Math.cos(h*js),I=M*Math.cos(k),N=M*Math.sin(k);return{lng:I,lat:N}}(t,p);return gcj02_To_gps84(x.lng,x.lat)}function gps84_To_bd09(t,p){if(Gs(t)){var h=t[0];p=t[1],t=h}if(t instanceof Object){h=t.lng;p=t.lat,t=h}var x=gps84_To_gcj02(t,p);return function gcj02_To_bd09(t,p){var h=Math.sqrt(t*t+p*p)+2e-5*Math.sin(p*js),x=Math.atan2(p,t)+3e-6*Math.cos(t*js),M=h*Math.cos(x)+.0065,k=h*Math.sin(x)+.006;return{lng:M,lat:k}}(x.lng,x.lat)}function gps84_To_gcj02(t,p){if(Gs(t)){var h=t[0];p=t[1],t=h}if(t instanceof Object){h=t.lng;p=t.lat,t=h}var x=transformLat$1(t-105,p-35),M=transformLng$1(t-105,p-35),k=p/180*Fs,I=Math.sin(k);I=1-Us*I*I;var N=Math.sqrt(I);return x=180*x/(Vs*(1-Us)/(I*N)*Fs),{lng:t+(M=180*M/(Vs/N*Math.cos(k)*Fs)),lat:p+x}}function gcj02_To_gps84(t,p){if(Gs(t)){var h=t[0];p=t[1],t=h}if(t instanceof Object){h=t.lng;p=t.lat,t=h}var x=function transform$1(t,p){var h=transformLat$1(t-105,p-35),x=transformLng$1(t-105,p-35),M=p/180*Fs,k=Math.sin(M);k=1-Us*k*k;var I=Math.sqrt(k);h=180*h/(Vs*(1-Us)/(k*I)*Fs),x=180*x/(Vs/I*Math.cos(M)*Fs);var N=p+h,V=t+x,ee={lng:V,lat:N};return ee}(t,p);return{lng:2*t-x.lng,lat:2*p-x.lat}}function transformLat$1(t,p){var h=2*t-100+3*p+.2*p*p+.1*t*p+.2*Math.sqrt(Math.abs(t));return h+=2*(20*Math.sin(6*t*Fs)+20*Math.sin(2*t*Fs))/3,h+=2*(20*Math.sin(p*Fs)+40*Math.sin(p/3*Fs))/3,h+=2*(160*Math.sin(p/12*Fs)+320*Math.sin(p*Fs/30))/3}function transformLng$1(t,p){var h=300+t+2*p+.1*t*t+.1*t*p+.1*Math.sqrt(Math.abs(t));return h+=2*(20*Math.sin(6*t*Fs)+20*Math.sin(2*t*Fs))/3,h+=2*(20*Math.sin(t*Fs)+40*Math.sin(t/3*Fs))/3,h+=2*(150*Math.sin(t/12*Fs)+300*Math.sin(t/30*Fs))/3}function Extend(t,p){for(var h in p)p.hasOwnProperty(h)&&(t[h]=p[h]);return t}function Xa(t){return"string"==typeof t}var Ws=void 0,zs=null;function H(t,p){isNaN(t)&&(t=Ib(t),t=isNaN(t)?0:t),Xa(t)&&(t=parseFloat(t)),isNaN(p)&&(p=Ib(p),p=isNaN(p)?0:p),Xa(p)&&(p=parseFloat(p)),this.lng=t,this.lat=p}function Q(t,p){this.x=t||0,this.y=p||0,this.x=this.x,this.y=this.y}function fc(){}function R(){}H.TL=function(t){return t&&180>=t.lng&&-180<=t.lng&&74>=t.lat&&-74<=t.lat},H.prototype.lb=function(t){return t&&this.lat==t.lat&&this.lng==t.lng},Q.prototype.lb=function(t){return t&&t.x==this.x&&t.y==this.y},fc.prototype.nh=function(){aa("lngLatToPoint")},fc.prototype.wi=function(){aa("pointToLngLat")},R.prototype=new fc,Extend(R,{$O:6370996.81,lG:[12890594.86,8362377.87,5591021,3481989.83,1678043.12,0],Au:[75,60,45,30,15,0],fP:[[1.410526172116255e-8,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,17337981.2],[-7.435856389565537e-9,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,10260144.86],[-3.030883460898826e-8,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,6856817.37],[-1.981981304930552e-8,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,4482777.06],[3.09191371068437e-9,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,2555164.4],[2.890871144776878e-9,8983055095805407e-21,-3.068298e-8,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],iG:[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,647795574.6671607,-4082003173.641316,10774905663.51142,-15171875531.51559,12053065338.62167,-5124939663.577472,913311935.9512032,67.5],[.00337398766765,111320.7020202162,4481351.045890365,-23393751.19931662,79682215.47186455,-115964993.2797253,97236711.15602145,-43661946.33752821,8477230.501135234,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837.749470245,992013.7397791013,-1221952.21711287,1340652.697009075,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758.690035394,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]],Z1:function Z1(t,p){return t&&p&&(t=this.Fb(t))?(h=this.Tk(t.lng),x=this.Tk(t.lat),(p=this.Fb(p))?this.Pe(h,this.Tk(p.lng),x,this.Tk(p.lat)):0):0;var h,x},Vo:function Vo(t,p){return t&&p?(t.lng=this.JD(t.lng,-180,180),t.lat=this.ND(t.lat,-74,74),p.lng=this.JD(p.lng,-180,180),p.lat=this.ND(p.lat,-74,74),this.Pe(this.Tk(t.lng),this.Tk(p.lng),this.Tk(t.lat),this.Tk(p.lat))):0},Fb:function Fb(t){if(t===zs||t===Ws)return new H(0,0);var p,h;p=new H(Math.abs(t.lng),Math.abs(t.lat));for(var x=0;x<this.lG.length;x++)if(p.lat>=this.lG[x]){h=this.fP[x];break}return new H((t=this.gK(t,h)).lng.toFixed(6),t.lat.toFixed(6))},Eb:function Eb(t){if(t===zs||t===Ws||180<t.lng||-180>t.lng||90<t.lat||-90>t.lat)return new H(0,0);var p,h;t.lng=this.JD(t.lng,-180,180),t.lat=this.ND(t.lat,-74,74),p=new H(t.lng,t.lat);for(var x=0;x<this.Au.length;x++)if(p.lat>=this.Au[x]){h=this.iG[x];break}if(!h)for(x=0;x<this.Au.length;x++)if(p.lat<=-this.Au[x]){h=this.iG[x];break}return new H((t=this.gK(t,h)).lng.toFixed(2),t.lat.toFixed(2))},gK:function gK(t,p){if(t&&p){var h=p[0]+p[1]*Math.abs(t.lng),x=Math.abs(t.lat)/p[9];x=p[2]+p[3]*x+p[4]*x*x+p[5]*x*x*x+p[6]*x*x*x*x+p[7]*x*x*x*x*x+p[8]*x*x*x*x*x*x;return new H(h=h*(0>t.lng?-1:1),x=x*(0>t.lat?-1:1))}},Pe:function Pe(t,p,h,x){return this.$O*Math.acos(Math.sin(h)*Math.sin(x)+Math.cos(h)*Math.cos(x)*Math.cos(p-t))},Tk:function Tk(t){return Math.PI*t/180},Z3:function Z3(t){return 180*t/Math.PI},ND:function ND(t,p,h){return p!=zs&&(t=Math.max(t,p)),h!=zs&&(t=Math.min(t,h)),t},JD:function JD(t,p,h){for(;t>h;)t-=h-p;for(;t<p;)t+=h-p;return t}}),Extend(R.prototype,{Jm:function Jm(t){return R.Eb(t)},nh:function nh(t){return new Q((t=R.Eb(t)).lng,t.lat)},qh:function qh(t){return R.Fb(t)},wi:function wi(t){return t=new H(t.x,t.y),R.Fb(t)},fc:function fc(t,p,h,x,M){if(t)return t=this.Jm(t,M),p=this.Lc(p),new Q(Math.round((t.lng-h.lng)/p+x.width/2),Math.round((h.lat-t.lat)/p+x.height/2))},zb:function zb(t,p,h,x,M){if(t)return p=this.Lc(p),this.qh(new H(h.lng+p*(t.x-x.width/2),h.lat-p*(t.y-x.height/2)),M)},Lc:function Lc(t){return Math.pow(2,18-t)}});var Hs=R.prototype;!function S(t,p){for(var h in p)t[h]=p[h]}(Hs,{lngLatToPoint:Hs.nh,pointToLngLat:Hs.wi});var $s={Point:H,Pixel:Q,MercatorProjection:R},Ys=function(){function TransformClassBaidu(t,p){_classCallCheck$1(this,TransformClassBaidu),this.levelMax=t,this.levelMin=p,this.projection=new $s.MercatorProjection}return _createClass$1(TransformClassBaidu,[{key:"_getRetain",value:function _getRetain(t){return Math.pow(2,t-18)}},{key:"getResolution",value:function getResolution(t,p){return Math.pow(2,18-p)*Math.cos(t)}},{key:"lnglatToPoint",value:function lnglatToPoint(t,p){var h=new $s.Point(t,p),x=this.projection.lngLatToPoint(h);return{pointX:x.x,pointY:x.y}}},{key:"pointToLnglat",value:function pointToLnglat(t,p){var h=new $s.Pixel(t,p),x=this.projection.pointToLngLat(h);return{lng:x.lng,lat:x.lat}}},{key:"_lngToTileX",value:function _lngToTileX(t,p){var h=this.lnglatToPoint(t,0);return Math.floor(h.pointX*this._getRetain(p)/256)}},{key:"_latToTileY",value:function _latToTileY(t,p){var h=this.lnglatToPoint(0,t);return Math.floor(h.pointY*this._getRetain(p)/256)}},{key:"lnglatToTile",value:function lnglatToTile(t,p,h){return[this._lngToTileX(t,h),this._latToTileY(p,h)]}},{key:"_lngToPixelX",value:function _lngToPixelX(t,p){var h=this._lngToTileX(t,p),x=this.lnglatToPoint(t,0);return Math.floor(x.pointX*this._getRetain(p)-256*h)}},{key:"_latToPixelY",value:function _latToPixelY(t,p){var h=this._latToTileY(t,p),x=this.lnglatToPoint(0,t);return Math.floor(x.pointY*this._getRetain(p)-256*h)}},{key:"lnglatToPixel",value:function lnglatToPixel(t,p,h){return{pixelX:this._lngToPixelX(t,h),pixelY:this._latToPixelY(p,h)}}},{key:"_pixelXToLng",value:function _pixelXToLng(t,p,h){var x=(256*p+t)/this._getRetain(h);return this.pointToLnglat(x,0).lng}},{key:"_pixelYToLat",value:function _pixelYToLat(t,p,h){var x=(256*p+t)/this._getRetain(h);return this.pointToLnglat(0,x).lat}},{key:"pixelToLnglat",value:function pixelToLnglat(t,p,h,x,M){var k=(256*h+t)/this._getRetain(M),I=(256*x+p)/this._getRetain(M),N=this.pointToLnglat(k,I);return[N.lng,N.lat]}}]),TransformClassBaidu}();function _classCallCheck(t,p){if(!(t instanceof p))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,p){for(var h=0;h<p.length;h++){var x=p[h];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(t,x.key,x)}}function _createClass(t,p,h){return p&&_defineProperties(t.prototype,p),h&&_defineProperties(t,h),Object.defineProperty(t,"prototype",{writable:!1}),t}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function _setPrototypeOf(t,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,p){return t.__proto__=p,t},_setPrototypeOf(t,p)}function _arrayLikeToArray(t,p){(null==p||p>t.length)&&(p=t.length);for(var h=0,x=new Array(p);h<p;h++)x[h]=t[h];return x}function _slicedToArray(t,p){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,p){var h=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=h){var x,M,k=[],I=!0,N=!1;try{for(h=h.call(t);!(I=(x=h.next()).done)&&(k.push(x.value),!p||k.length!==p);I=!0);}catch(V){N=!0,M=V}finally{try{I||null==h.return||h.return()}finally{if(N)throw M}}return k}}(t,p)||function _unsupportedIterableToArray(t,p){if(t){if("string"==typeof t)return _arrayLikeToArray(t,p);var h=Object.prototype.toString.call(t).slice(8,-1);return"Object"===h&&t.constructor&&(h=t.constructor.name),"Map"===h||"Set"===h?Array.from(t):"Arguments"===h||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h)?_arrayLikeToArray(t,p):void 0}}(t,p)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ks=1e-6,Xs="undefined"!=typeof Float32Array?Float32Array:Array;function transformMat4(t,p,h){var x=p[0],M=p[1],k=p[2],I=p[3];return t[0]=h[0]*x+h[4]*M+h[8]*k+h[12]*I,t[1]=h[1]*x+h[5]*M+h[9]*k+h[13]*I,t[2]=h[2]*x+h[6]*M+h[10]*k+h[14]*I,t[3]=h[3]*x+h[7]*M+h[11]*k+h[15]*I,t}function transformVector(t,p){var h=transformMat4([],p,t);return function scale$1(t,p,h){return t[0]=p[0]*h,t[1]=p[1]*h,t[2]=p[2]*h,t[3]=p[3]*h,t}(h,h,1/h[3]),h}function multiply(t,p,h){var x=p[0],M=p[1],k=p[2],I=p[3],N=p[4],V=p[5],ee=p[6],te=p[7],re=p[8],ne=p[9],ie=p[10],ae=p[11],oe=p[12],se=p[13],ce=p[14],ue=p[15],le=h[0],pe=h[1],he=h[2],fe=h[3];return t[0]=le*x+pe*N+he*re+fe*oe,t[1]=le*M+pe*V+he*ne+fe*se,t[2]=le*k+pe*ee+he*ie+fe*ce,t[3]=le*I+pe*te+he*ae+fe*ue,le=h[4],pe=h[5],he=h[6],fe=h[7],t[4]=le*x+pe*N+he*re+fe*oe,t[5]=le*M+pe*V+he*ne+fe*se,t[6]=le*k+pe*ee+he*ie+fe*ce,t[7]=le*I+pe*te+he*ae+fe*ue,le=h[8],pe=h[9],he=h[10],fe=h[11],t[8]=le*x+pe*N+he*re+fe*oe,t[9]=le*M+pe*V+he*ne+fe*se,t[10]=le*k+pe*ee+he*ie+fe*ce,t[11]=le*I+pe*te+he*ae+fe*ue,le=h[12],pe=h[13],he=h[14],fe=h[15],t[12]=le*x+pe*N+he*re+fe*oe,t[13]=le*M+pe*V+he*ne+fe*se,t[14]=le*k+pe*ee+he*ie+fe*ce,t[15]=le*I+pe*te+he*ae+fe*ue,t}function translate(t,p,h){var x,M,k,I,N,V,ee,te,re,ne,ie,ae,oe=h[0],se=h[1],ce=h[2];return p===t?(t[12]=p[0]*oe+p[4]*se+p[8]*ce+p[12],t[13]=p[1]*oe+p[5]*se+p[9]*ce+p[13],t[14]=p[2]*oe+p[6]*se+p[10]*ce+p[14],t[15]=p[3]*oe+p[7]*se+p[11]*ce+p[15]):(x=p[0],M=p[1],k=p[2],I=p[3],N=p[4],V=p[5],ee=p[6],te=p[7],re=p[8],ne=p[9],ie=p[10],ae=p[11],t[0]=x,t[1]=M,t[2]=k,t[3]=I,t[4]=N,t[5]=V,t[6]=ee,t[7]=te,t[8]=re,t[9]=ne,t[10]=ie,t[11]=ae,t[12]=x*oe+N*se+re*ce+p[12],t[13]=M*oe+V*se+ne*ce+p[13],t[14]=k*oe+ee*se+ie*ce+p[14],t[15]=I*oe+te*se+ae*ce+p[15]),t}function scale(t,p,h){var x=h[0],M=h[1],k=h[2];return t[0]=p[0]*x,t[1]=p[1]*x,t[2]=p[2]*x,t[3]=p[3]*x,t[4]=p[4]*M,t[5]=p[5]*M,t[6]=p[6]*M,t[7]=p[7]*M,t[8]=p[8]*k,t[9]=p[9]*k,t[10]=p[10]*k,t[11]=p[11]*k,t[12]=p[12],t[13]=p[13],t[14]=p[14],t[15]=p[15],t}Math.hypot||(Math.hypot=function(){for(var t=0,p=arguments.length;p--;)t+=arguments[p]*arguments[p];return Math.sqrt(t)}),function create$2(){var t=new Xs(4);return Xs!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}();var qs=function perspectiveNO(t,p,h,x,M){var k,I=1/Math.tan(p/2);return t[0]=I/h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=I,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=M&&M!==1/0?(k=1/(x-M),t[10]=(M+x)*k,t[14]=2*M*x*k):(t[10]=-1,t[14]=-2*x),t};function equals$1(t,p){var h=t[0],x=t[1],M=t[2],k=t[3],I=t[4],N=t[5],V=t[6],ee=t[7],te=t[8],re=t[9],ne=t[10],ie=t[11],ae=t[12],oe=t[13],se=t[14],ce=t[15],ue=p[0],le=p[1],pe=p[2],he=p[3],fe=p[4],de=p[5],me=p[6],ge=p[7],ve=p[8],ye=p[9],xe=p[10],be=p[11],_e=p[12],Me=p[13],Ce=p[14],we=p[15];return Math.abs(h-ue)<=Ks*Math.max(1,Math.abs(h),Math.abs(ue))&&Math.abs(x-le)<=Ks*Math.max(1,Math.abs(x),Math.abs(le))&&Math.abs(M-pe)<=Ks*Math.max(1,Math.abs(M),Math.abs(pe))&&Math.abs(k-he)<=Ks*Math.max(1,Math.abs(k),Math.abs(he))&&Math.abs(I-fe)<=Ks*Math.max(1,Math.abs(I),Math.abs(fe))&&Math.abs(N-de)<=Ks*Math.max(1,Math.abs(N),Math.abs(de))&&Math.abs(V-me)<=Ks*Math.max(1,Math.abs(V),Math.abs(me))&&Math.abs(ee-ge)<=Ks*Math.max(1,Math.abs(ee),Math.abs(ge))&&Math.abs(te-ve)<=Ks*Math.max(1,Math.abs(te),Math.abs(ve))&&Math.abs(re-ye)<=Ks*Math.max(1,Math.abs(re),Math.abs(ye))&&Math.abs(ne-xe)<=Ks*Math.max(1,Math.abs(ne),Math.abs(xe))&&Math.abs(ie-be)<=Ks*Math.max(1,Math.abs(ie),Math.abs(be))&&Math.abs(ae-_e)<=Ks*Math.max(1,Math.abs(ae),Math.abs(_e))&&Math.abs(oe-Me)<=Ks*Math.max(1,Math.abs(oe),Math.abs(Me))&&Math.abs(se-Ce)<=Ks*Math.max(1,Math.abs(se),Math.abs(Ce))&&Math.abs(ce-we)<=Ks*Math.max(1,Math.abs(ce),Math.abs(we))}function add(t,p,h){return t[0]=p[0]+h[0],t[1]=p[1]+h[1],t}function assert(t,p){if(!t)throw new Error(p||"viewport-mercator-project: assertion failed.")}!function(){var t=function create$1(){var t=new Xs(2);return Xs!=Float32Array&&(t[0]=0,t[1]=0),t}()}(),function(){var t=function create(){var t=new Xs(3);return Xs!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}()}();var Zs=Math.PI,Js=Zs/4,Qs=Zs/180,ec=180/Zs,tc=4003e4,rc=1.5;function zoomToScale$1(t){return Math.pow(2,t)}function lngLatToWorld(t,p){var h=_slicedToArray(t,2),x=h[0],M=h[1];assert(Number.isFinite(x)&&Number.isFinite(p)),assert(Number.isFinite(M)&&M>=-90&&M<=90,"invalid latitude");var k=M*Qs;return[(p*=512)*(x*Qs+Zs)/(2*Zs),p*(Zs-Math.log(Math.tan(Js+.5*k)))/(2*Zs)]}function worldToLngLat(t,p){var h=_slicedToArray(t,2),x=h[0],M=h[1],k=x/(p*=512)*(2*Zs)-Zs,I=2*(Math.atan(Math.exp(Zs-M/p*(2*Zs)))-Js);return[k*ec,I*ec]}function getViewMatrix(t){var p=t.height,h=t.pitch,x=t.bearing,M=t.altitude,k=t.center,I=void 0===k?null:k,N=t.flipY,V=void 0!==N&&N,ee=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return translate(ee,ee,[0,0,-M]),scale(ee,ee,[1,1,1/p]),function rotateX(t,p,h){var x=Math.sin(h),M=Math.cos(h),k=p[4],I=p[5],N=p[6],V=p[7],ee=p[8],te=p[9],re=p[10],ne=p[11];return p!==t&&(t[0]=p[0],t[1]=p[1],t[2]=p[2],t[3]=p[3],t[12]=p[12],t[13]=p[13],t[14]=p[14],t[15]=p[15]),t[4]=k*M+ee*x,t[5]=I*M+te*x,t[6]=N*M+re*x,t[7]=V*M+ne*x,t[8]=ee*M-k*x,t[9]=te*M-I*x,t[10]=re*M-N*x,t[11]=ne*M-V*x,t}(ee,ee,-h*Qs),function rotateZ(t,p,h){var x=Math.sin(h),M=Math.cos(h),k=p[0],I=p[1],N=p[2],V=p[3],ee=p[4],te=p[5],re=p[6],ne=p[7];return p!==t&&(t[8]=p[8],t[9]=p[9],t[10]=p[10],t[11]=p[11],t[12]=p[12],t[13]=p[13],t[14]=p[14],t[15]=p[15]),t[0]=k*M+ee*x,t[1]=I*M+te*x,t[2]=N*M+re*x,t[3]=V*M+ne*x,t[4]=ee*M-k*x,t[5]=te*M-I*x,t[6]=re*M-N*x,t[7]=ne*M-V*x,t}(ee,ee,x*Qs),V&&scale(ee,ee,[1,-1,1]),I&&translate(ee,ee,function negate(t,p){return t[0]=-p[0],t[1]=-p[1],t[2]=-p[2],t}([],I)),ee}function getProjectionMatrix(t){var p=t.width,h=t.height,x=t.pitch,M=function getProjectionParameters(t){var p=t.width,h=t.height,x=t.altitude,M=void 0===x?rc:x,k=t.pitch,I=void 0===k?0:k,N=t.nearZMultiplier,V=void 0===N?1:N,ee=t.farZMultiplier,te=void 0===ee?1:ee,re=I*Qs,ne=Math.atan(.5/M),ie=Math.sin(ne)*M/Math.sin(Math.PI/2-re-ne),ae=Math.cos(Math.PI/2-re)*ie+M;return{fov:2*Math.atan(h/2/M),aspect:p/h,focalDistance:M,near:V,far:ae*te}}({width:p,height:h,altitude:t.altitude,pitch:x,nearZMultiplier:t.nearZMultiplier,farZMultiplier:t.farZMultiplier}),k=M.fov,I=M.aspect,N=M.near,V=M.far;return qs([],k,I,N,V)}function pixelsToWorld(t,p){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,x=_slicedToArray(t,3),M=x[0],k=x[1],I=x[2];if(assert(Number.isFinite(M)&&Number.isFinite(k),"invalid pixel coordinate"),Number.isFinite(I))return transformVector(p,[M,k,I,1]);var N=transformVector(p,[M,k,0,1]),V=transformVector(p,[M,k,1,1]),ee=N[2],te=V[2];return function lerp(t,p,h,x){var M=p[0],k=p[1];return t[0]=M+x*(h[0]-M),t[1]=k+x*(h[1]-k),t}([],N,V,ee===te?0:((h||0)-ee)/(te-ee))}var nc=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ic=function(){function Viewport(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},p=t.width,h=t.height,x=t.viewMatrix,M=void 0===x?nc:x,k=t.projectionMatrix,I=void 0===k?nc:k;_classCallCheck(this,Viewport),this.width=p||1,this.height=h||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=M,this.projectionMatrix=I;var N=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];multiply(N,N,this.projectionMatrix),multiply(N,N,this.viewMatrix),this.viewProjectionMatrix=N;var V=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];scale(V,V,[this.width/2,-this.height/2,1]),translate(V,V,[1,-1,0]),multiply(V,V,this.viewProjectionMatrix);var ee=function invert(t,p){var h=p[0],x=p[1],M=p[2],k=p[3],I=p[4],N=p[5],V=p[6],ee=p[7],te=p[8],re=p[9],ne=p[10],ie=p[11],ae=p[12],oe=p[13],se=p[14],ce=p[15],ue=h*N-x*I,le=h*V-M*I,pe=h*ee-k*I,he=x*V-M*N,fe=x*ee-k*N,de=M*ee-k*V,me=te*oe-re*ae,ge=te*se-ne*ae,ve=te*ce-ie*ae,ye=re*se-ne*oe,xe=re*ce-ie*oe,be=ne*ce-ie*se,_e=ue*be-le*xe+pe*ye+he*ve-fe*ge+de*me;return _e?(_e=1/_e,t[0]=(N*be-V*xe+ee*ye)*_e,t[1]=(M*xe-x*be-k*ye)*_e,t[2]=(oe*de-se*fe+ce*he)*_e,t[3]=(ne*fe-re*de-ie*he)*_e,t[4]=(V*ve-I*be-ee*ge)*_e,t[5]=(h*be-M*ve+k*ge)*_e,t[6]=(se*pe-ae*de-ce*le)*_e,t[7]=(te*de-ne*pe+ie*le)*_e,t[8]=(I*xe-N*ve+ee*me)*_e,t[9]=(x*ve-h*xe-k*me)*_e,t[10]=(ae*fe-oe*pe+ce*ue)*_e,t[11]=(re*pe-te*fe-ie*ue)*_e,t[12]=(N*ge-I*ye-V*me)*_e,t[13]=(h*ye-x*ge+M*me)*_e,t[14]=(oe*le-ae*he-se*ue)*_e,t[15]=(te*he-re*le+ne*ue)*_e,t):null}([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],V);if(!ee)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=V,this.pixelUnprojectionMatrix=ee,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return _createClass(Viewport,[{key:"equals",value:function equals$1$1(t){return t instanceof Viewport&&(t.width===this.width&&t.height===this.height&&equals$1(t.projectionMatrix,this.projectionMatrix)&&equals$1(t.viewMatrix,this.viewMatrix))}},{key:"project",value:function project(t){var p=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,h=void 0===p||p,x=function worldToPixels(t,p){var h=_slicedToArray(t,3),x=h[0],M=h[1],k=h[2],I=void 0===k?0:k;return assert(Number.isFinite(x)&&Number.isFinite(M)&&Number.isFinite(I)),transformVector(p,[x,M,I,1])}(this.projectPosition(t),this.pixelProjectionMatrix),M=_slicedToArray(x,2),k=M[0],I=M[1],N=h?I:this.height-I;return 2===t.length?[k,N]:[k,N,x[2]]}},{key:"unproject",value:function unproject(t){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=p.topLeft,x=void 0===h||h,M=p.targetZ,k=_slicedToArray(t,3),I=k[0],N=k[1],V=k[2],ee=x?N:this.height-N,te=M&&M*this.pixelsPerMeter,re=pixelsToWorld([I,ee,V],this.pixelUnprojectionMatrix,te),ne=_slicedToArray(this.unprojectPosition(re),3),ie=ne[0],ae=ne[1],oe=ne[2];return Number.isFinite(V)?[ie,ae,oe]:Number.isFinite(M)?[ie,ae,M]:[ie,ae]}},{key:"projectPosition",value:function projectPosition(t){var p=_slicedToArray(this.projectFlat(t),2);return[p[0],p[1],(t[2]||0)*this.pixelsPerMeter]}},{key:"unprojectPosition",value:function unprojectPosition(t){var p=_slicedToArray(this.unprojectFlat(t),2);return[p[0],p[1],(t[2]||0)/this.pixelsPerMeter]}},{key:"projectFlat",value:function projectFlat(t){return arguments.length>1&&void 0!==arguments[1]||this.scale,t}},{key:"unprojectFlat",value:function unprojectFlat(t){return arguments.length>1&&void 0!==arguments[1]||this.scale,t}}]),Viewport}();function fitBounds(t){var p=t.width,h=t.height,x=t.bounds,M=t.minExtent,k=void 0===M?0:M,I=t.maxZoom,N=void 0===I?24:I,V=t.padding,ee=void 0===V?0:V,te=t.offset,re=void 0===te?[0,0]:te,ne=_slicedToArray(x,2),ie=_slicedToArray(ne[0],2),ae=ie[0],oe=ie[1],se=_slicedToArray(ne[1],2),ce=se[0],ue=se[1];if(Number.isFinite(ee)){ee={top:ee,bottom:ee,left:ee,right:ee}}else assert(Number.isFinite(ee.top)&&Number.isFinite(ee.bottom)&&Number.isFinite(ee.left)&&Number.isFinite(ee.right));var le=new ac({width:p,height:h,longitude:0,latitude:0,zoom:0}),pe=le.project([ae,ue]),he=le.project([ce,oe]),fe=[Math.max(Math.abs(he[0]-pe[0]),k),Math.max(Math.abs(he[1]-pe[1]),k)],de=[p-ee.left-ee.right-2*Math.abs(re[0]),h-ee.top-ee.bottom-2*Math.abs(re[1])];assert(de[0]>0&&de[1]>0);var me=de[0]/fe[0],ge=de[1]/fe[1],ve=(ee.right-ee.left)/2/me,ye=(ee.bottom-ee.top)/2/ge,xe=[(he[0]+pe[0])/2+ve,(he[1]+pe[1])/2+ye],be=le.unproject(xe),_e=le.zoom+Math.log2(Math.abs(Math.min(me,ge)));return{longitude:be[0],latitude:be[1],zoom:Math.min(_e,N)}}var ac=function(t){function WebMercatorViewport(){var t,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},h=p.width,x=p.height,M=p.latitude,k=void 0===M?0:M,I=p.longitude,N=void 0===I?0:I,V=p.zoom,ee=void 0===V?0:V,te=p.pitch,re=void 0===te?0:te,ne=p.bearing,ie=void 0===ne?0:ne,ae=p.altitude,oe=void 0===ae?1.5:ae,se=p.nearZMultiplier,ce=p.farZMultiplier;_classCallCheck(this,WebMercatorViewport),h=h||1,x=x||1;var ue=zoomToScale$1(ee);oe=Math.max(.75,oe);var le=lngLatToWorld([N,k],ue);le[2]=0;var pe=getProjectionMatrix({width:h,height:x,pitch:re,bearing:ie,altitude:oe,nearZMultiplier:se||1/x,farZMultiplier:ce||1.01}),he=getViewMatrix({height:x,center:le,pitch:re,bearing:ie,altitude:oe,flipY:!0});return(t=function _possibleConstructorReturn(t,p){if(p&&("object"===_typeof(p)||"function"==typeof p))return p;if(void 0!==p)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}(this,_getPrototypeOf(WebMercatorViewport).call(this,{width:h,height:x,viewMatrix:he,projectionMatrix:pe}))).latitude=k,t.longitude=N,t.zoom=ee,t.pitch=re,t.bearing=ie,t.altitude=oe,t.scale=ue,t.center=le,t.pixelsPerMeter=function getDistanceScales$1(t){var p=t.latitude,h=t.longitude,x=t.zoom,M=t.scale,k=t.highPrecision,I=void 0!==k&&k;M=void 0!==M?M:zoomToScale$1(x),assert(Number.isFinite(p)&&Number.isFinite(h)&&Number.isFinite(M));var N={},V=512*M,ee=Math.cos(p*Qs),te=V/360,re=te/ee,ne=V/tc/ee;if(N.pixelsPerMeter=[ne,-ne,ne],N.metersPerPixel=[1/ne,-1/ne,1/ne],N.pixelsPerDegree=[te,-re,ne],N.degreesPerPixel=[1/te,-1/re,1/ne],I){var ie=Qs*Math.tan(p*Qs)/ee,ae=te*ie/2,oe=V/tc*ie,se=oe/re*ne;N.pixelsPerDegree2=[0,-ae,oe],N.pixelsPerMeter2=[se,0,se]}return N}(_assertThisInitialized(_assertThisInitialized(t))).pixelsPerMeter[2],Object.freeze(_assertThisInitialized(_assertThisInitialized(t))),t}return function _inherits(t,p){if("function"!=typeof p&&null!==p)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(p&&p.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),p&&_setPrototypeOf(t,p)}(WebMercatorViewport,t),_createClass(WebMercatorViewport,[{key:"projectFlat",value:function projectFlat(t){return lngLatToWorld(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale)}},{key:"unprojectFlat",value:function unprojectFlat(t){return worldToLngLat(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale)}},{key:"getMapCenterByLngLatPosition",value:function getMapCenterByLngLatPosition(t){var p=t.lngLat,h=pixelsToWorld(t.pos,this.pixelUnprojectionMatrix),x=add([],lngLatToWorld(p,this.scale),function negate$1(t,p){return t[0]=-p[0],t[1]=-p[1],t}([],h));return worldToLngLat(add([],this.center,x),this.scale)}},{key:"getLocationAtPoint",value:function getLocationAtPoint(t){var p=t.lngLat,h=t.pos;return this.getMapCenterByLngLatPosition({lngLat:p,pos:h})}},{key:"fitBounds",value:function fitBounds$1(t){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=this.width,x=this.height,M=fitBounds(Object.assign({width:h,height:x,bounds:t},p));return new WebMercatorViewport({width:h,height:x,longitude:M.longitude,latitude:M.latitude,zoom:M.zoom})}}]),WebMercatorViewport}(ic),oc=Math.PI/180,sc=4003e4;function zoomToScale(t){return Math.pow(2,t)}var cc=function(){function customTileLayer(t,p,h){_classCallCheck$1(this,customTileLayer),this.id=t,this.type="custom",this.renderingMode="2d",this.url=p,this.options={subdomains:null,minZoom:0,maxZoom:24,tileType:"xyz"},function setOptions(t,p){for(var h in t.hasOwnProperty("options")||(t.options=t.options?Bs(t.options):{}),p)t.options[h]=p[h]||t.options[h];return t.options}(this,h),this.program,this.showTiles=[],this.tileCache={},this.gridCache={},this.matrix,this.map,this.isLayerShow,this.transformBaidu=new Ys}return _createClass$1(customTileLayer,[{key:"onAdd",value:function onAdd(t,p){var h=this;this.map=t;var x=p.createShader(p.VERTEX_SHADER);p.shaderSource(x,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_TextCoord;varying vec2 v_TextCoord;const float TILE_SIZE = 512.0;const float PI = 3.1415926536;const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);uniform float u_project_scale;uniform bool u_is_offset;uniform vec3 u_pixels_per_degree;uniform vec3 u_pixels_per_degree2;uniform vec3 u_pixels_per_meter;uniform vec2 u_viewport_center;uniform vec4 u_viewport_center_projection;uniform vec2 u_viewport_size;float project_scale(float meters) {    return meters * u_pixels_per_meter.z;}vec3 project_scale(vec3 position) {    return position * u_pixels_per_meter;}vec2 project_mercator(vec2 lnglat) {    float x = lnglat.x;    return vec2(    radians(x) + PI, PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5))    );}vec4 project_offset(vec4 offset) {    float dy = offset.y;    dy = clamp(dy, -1., 1.);    vec3 pixels_per_unit = u_pixels_per_degree + u_pixels_per_degree2 * dy;    return vec4(offset.xyz * pixels_per_unit, offset.w);}vec4 project_position(vec4 position) {    if (u_is_offset) {        float X = position.x - u_viewport_center.x;        float Y = position.y - u_viewport_center.y;        return project_offset(vec4(X, Y, position.z, position.w));    }    else {        return vec4(        project_mercator(position.xy) * WORLD_SCALE * u_project_scale, project_scale(position.z), position.w        );    }}vec4 project_to_clipping_space(vec3 position) {    vec4 project_pos = project_position(vec4(position, 1.0));    return u_matrix * project_pos + u_viewport_center_projection;}void main() {   vec4 project_pos = project_position(vec4(a_pos, 0.0, 1.0));   gl_Position = u_matrix * project_pos + u_viewport_center_projection;   v_TextCoord = a_TextCoord;}"),p.compileShader(x);var M=p.createShader(p.FRAGMENT_SHADER);p.shaderSource(M,"precision mediump float;uniform sampler2D u_Sampler; varying vec2 v_TextCoord; void main() {   gl_FragColor = texture2D(u_Sampler, v_TextCoord);}"),p.compileShader(M),this.program=p.createProgram(),p.attachShader(this.program,x),p.attachShader(this.program,M),p.linkProgram(this.program),this.a_Pos=p.getAttribLocation(this.program,"a_pos"),this.a_TextCoord=p.getAttribLocation(this.program,"a_TextCoord"),this.isLayerShow=!0,t.on("move",(function(){h.isLayerShow&&h.update(p,t)})),this.update(p,t)}},{key:"update",value:function update(t,p){var h,x,M,k=this,I=p.getCenter(),N=p.getBounds();if("xyz"===this.options.tileType){h=parseInt(p.getZoom()+1.4);var V=gps84_To_gcj02(N.getNorthWest()),ee=gps84_To_gcj02(N.getSouthEast());x=lonLatToTileNumbers(V.lng,V.lat,h),M=lonLatToTileNumbers(ee.lng,ee.lat,h)}else if("bd09"===this.options.tileType){h=parseInt(p.getZoom()+1.8);var te=gps84_To_bd09(N.getSouthWest()),re=gps84_To_bd09(N.getNorthEast());x=this.transformBaidu.lnglatToTile(te.lng,te.lat,h),M=this.transformBaidu.lnglatToTile(re.lng,re.lat,h)}for(var ne=[],ie=x[0];ie<=M[0];ie++)for(var ae=x[1];ae<=M[1];ae++){var oe={x:ie,y:ae,z:h};ne.push(oe),this.addGridCache(oe,0,0),ie===M[0]&&this.addGridCache(oe,1,0),ae===M[1]&&this.addGridCache(oe,0,1),ie===M[0]&&ae===M[1]&&this.addGridCache(oe,1,1)}if("xyz"===this.options.tileType)var se=lonLatToTileNumbers(I.lng,I.lat,h);else"bd09"===this.options.tileType&&(se=this.transformBaidu.lnglatToTile(I.lng,I.lat,h));ne.sort((function(t,p){return k.tileDistance(t,se)-k.tileDistance(p,se)})),this.showTiles=[];for(var ce=0,ue=ne;ce<ue.length;ce++){oe=ue[ce];if(this.tileCache[this.createTileKey(oe)])this.showTiles.push(this.tileCache[this.createTileKey(oe)]);else{var le=this.createTile(t,oe);this.showTiles.push(le),this.tileCache[this.createTileKey(oe)]=le}}}},{key:"addGridCache",value:function addGridCache(t,p,h){var x=this.createTileKey(t.x+p,t.y+h,t.z);this.gridCache[x]||("xyz"===this.options.tileType?this.gridCache[x]=gcj02_To_gps84(function tileNumbersToLonLat(t,p,h){var x=Math.pow(2,h);return[t/x*360-180,180*Math.atan(Math.sinh(Fs*(1-2*p/x)))/Fs]}(t.x+p,t.y+h,t.z)):"bd09"===this.options.tileType&&(this.gridCache[x]=bd09_To_gps84(this.transformBaidu.pixelToLnglat(0,0,t.x+p,t.y+h,t.z))))}},{key:"tileDistance",value:function tileDistance(t,p){return Math.sqrt(Math.pow(t.x-p[0],2)+Math.pow(t.y-p[1],2))}},{key:"createTileKey",value:function createTileKey(t,p,h){return t instanceof Object?t.z+"/"+t.x+"/"+t.y:h+"/"+t+"/"+p}},{key:"createTile",value:function createTile(t,p){var h,x,M,k,I=this,N=function template(t,p){return t.replace(Ns,(function(t,h){var x=p[h];if(void 0===x)throw new Error("No value provided for variable "+t);return"function"==typeof x&&(x=x(p)),x}))}(this.url,{s:this.options.subdomains[Math.abs(p.x+p.y)%this.options.subdomains.length],x:p.x,y:p.y,z:p.z}),V={xyz:p};"xyz"===this.options.tileType?(h=this.gridCache[this.createTileKey(p)],x=this.gridCache[this.createTileKey(p.x+1,p.y,p.z)],M=this.gridCache[this.createTileKey(p.x,p.y+1,p.z)],k=this.gridCache[this.createTileKey(p.x+1,p.y+1,p.z)]):"bd09"===this.options.tileType&&(h=this.gridCache[this.createTileKey(p.x,p.y+1,p.z)],x=this.gridCache[this.createTileKey(p.x+1,p.y+1,p.z)],M=this.gridCache[this.createTileKey(p)],k=this.gridCache[this.createTileKey(p.x+1,p.y,p.z)]);var ee=new Float32Array([h.lng,h.lat,0,1,M.lng,M.lat,0,0,x.lng,x.lat,1,1,k.lng,k.lat,1,0]),te=ee.BYTES_PER_ELEMENT,re=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,re),t.bufferData(t.ARRAY_BUFFER,ee,t.STATIC_DRAW),V.buffer=re,V.PosParam={size:2,stride:4*te,offset:0},V.TextCoordParam={size:2,stride:4*te,offset:2*te};var ne=new Image;return ne.onload=function(){V.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,V.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,ne),V.isLoad=!0,I.map.triggerRepaint()},ne.crossOrigin=!0,ne.src=N,V}},{key:"render",value:function render(t,p){if(!(this.map.getZoom()<this.options.minZoom||this.map.getZoom()>this.options.maxZoom)){this.matrix=p,t.useProgram(this.program);var h,x=_createForOfIteratorHelper(this.showTiles);try{for(x.s();!(h=x.n()).done;){var M=h.value;if(M.isLoad){t.bindTexture(t.TEXTURE_2D,M.texture),t.activeTexture(t.TEXTURE0),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.MIRRORED_REPEAT);var k=t.getUniformLocation(this.program,"u_Sampler");t.uniform1i(k,0),t.bindBuffer(t.ARRAY_BUFFER,M.buffer),t.vertexAttribPointer(this.a_Pos,M.PosParam.size,t.FLOAT,!1,M.PosParam.stride,M.PosParam.offset),t.vertexAttribPointer(this.a_TextCoord,M.TextCoordParam.size,t.FLOAT,!1,M.TextCoordParam.stride,M.TextCoordParam.offset),t.enableVertexAttribArray(this.a_Pos),t.enableVertexAttribArray(this.a_TextCoord),this.setVertex(t),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.drawArrays(t.TRIANGLE_STRIP,0,4)}}}catch(I){x.e(I)}finally{x.f()}}}},{key:"setVertex",value:function setVertex(t){var p=this.map.getZoom(),h=this.map.getBearing(),x=this.map.getPitch(),M=this.map.getCenter(),k=new ac({width:t.drawingBufferWidth,height:t.drawingBufferHeight,longitude:M.lng,latitude:M.lat,zoom:p,pitch:x,bearing:h}),I=k.viewProjectionMatrix,N=k.projectionMatrix,V=k.viewMatrix,ee=k.viewMatrixUncentered,te={u_matrix:I,u_point_size:this.pointSize,u_is_offset:!1,u_pixels_per_degree:[0,0,0],u_pixels_per_degree2:[0,0,0],u_viewport_center:[0,0],u_pixels_per_meter:[0,0,0],u_project_scale:zoomToScale(p),u_viewport_center_projection:[0,0,0,0]};if(p>0){var re=function getDistanceScales(t){var p=t.latitude,h=void 0===p?0:p,x=t.zoom,M=void 0===x?1:x,k=t.scale,I=t.highPrecision,N=void 0!==I&&I,V={},ee=512*(k=void 0!==k?k:zoomToScale(M))*window.devicePixelRatio,te=Math.cos(h*oc),re=ee/360,ne=re/te,ie=ee/sc/te;if(V.pixelsPerMeter=[ie,-ie,ie],V.metersPerPixel=[1/ie,-1/ie,1/ie],V.pixelsPerDegree=[re,-ne,ie],V.degreesPerPixel=[1/re,-1/ne,1/ie],N){var ae=oc*Math.tan(h*oc)/te,oe=re*ae/2,se=ee/sc*ae,ce=se/ne*ie;V.pixelsPerDegree2=[0,-oe,se],V.pixelsPerMeter2=[ce,0,ce]}return V}({longitude:M.lng,latitude:M.lat,zoom:p,highPrecision:!0}),ne=re.pixelsPerDegree,ie=re.pixelsPerDegree2,ae=k.projectFlat([Math.fround(M.lng),Math.fround(M.lat)],Math.pow(2,p)),oe=transformMat4([],[ae[0],ae[1],0,1],I),se=multiply([],N,ee||V);se=multiply([],se,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0]),te.u_matrix=se,te.u_is_offset=!0,te.u_viewport_center=[Math.fround(M.lng),Math.fround(M.lat)],te.u_viewport_center_projection=oe,te.u_pixels_per_degree=ne&&ne.map((function(t){return Math.fround(t)})),te.u_pixels_per_degree2=ie&&ie.map((function(t){return Math.fround(t)}))}t.uniformMatrix4fv(t.getUniformLocation(this.program,"u_matrix"),!1,te.u_matrix),t.uniform1f(t.getUniformLocation(this.program,"u_project_scale"),te.u_project_scale),t.uniform1i(t.getUniformLocation(this.program,"u_is_offset"),te.u_is_offset?1:0),t.uniform3fv(t.getUniformLocation(this.program,"u_pixels_per_degree"),te.u_pixels_per_degree),t.uniform3fv(t.getUniformLocation(this.program,"u_pixels_per_degree2"),te.u_pixels_per_degree2),t.uniform3fv(t.getUniformLocation(this.program,"u_pixels_per_meter"),te.u_pixels_per_meter),t.uniform2fv(t.getUniformLocation(this.program,"u_viewport_center"),te.u_viewport_center),t.uniform4fv(t.getUniformLocation(this.program,"u_viewport_center_projection"),te.u_viewport_center_projection)}},{key:"onRemove",value:function onRemove(t,p){this.isLayerShow=!1}}]),customTileLayer}();var uc=[];function MxMapAddRasterTileLayer(t,p,h,x){uc.forEach((function(p){t.getLayer(p)&&t.removeLayer(p),t.getSource(p)&&t.removeSource(p)})),uc=[],p.forEach((function(p){uc.push(p[0]);var M=h?{key:h}:null,k=function RasterTileLayer(t,p,h,x){var M=h||{};x||(x={TianDiTu:{Normal:{Map:"http://t{s}.tianditu.com/DataServer?T=vec_w&X={x}&Y={y}&L={z}&tk={key}",Annotion:"http://t{s}.tianditu.com/DataServer?T=cva_w&X={x}&Y={y}&L={z}&tk={key}",minzoom:0,maxzoom:18},Satellite:{Map:"http://t{s}.tianditu.com/DataServer?T=img_w&X={x}&Y={y}&L={z}&tk={key}",Annotion:"http://t{s}.tianditu.com/DataServer?T=cia_w&X={x}&Y={y}&L={z}&tk={key}",minzoom:0,maxzoom:18},Terrain:{Map:"http://t{s}.tianditu.com/DataServer?T=ter_w&X={x}&Y={y}&L={z}&tk={key}",Annotion:"http://t{s}.tianditu.com/DataServer?T=cta_w&X={x}&Y={y}&L={z}&tk={key}",minzoom:0,maxzoom:14},Subdomains:["0","1","2","3","4","5","6","7"],key:""},GaoDe:{Normal:{Map:"http://webrd0{s}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}",minzoom:0,maxzoom:18},Normal_NoTag:{Map:"https://wprd0{s}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&style=7&scl=1&ltype=11&x={x}&y={y}&z={z}",minzoom:3,maxzoom:18},Satellite:{Map:"http://webst0{s}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}",Annotion:"http://webst0{s}.is.autonavi.com/appmaptile?style=8&x={x}&y={y}&z={z}",minzoom:3,maxzoom:18},Subdomains:["1","2","3","4"]},Baidu:{Normal:{Map:"http://online{s}.map.bdimg.com/onlinelabel/?qt=tile&x={x}&y={y}&z={z}&styles=pl&scaler=1&p=1"},Satellite:{Map:"http://shangetu{s}.map.bdimg.com/it/u=x={x};y={y};z={z};v=009;type=sate&fm=46",Annotion:"http://online{s}.map.bdimg.com/tile/?qt=tile&x={x}&y={y}&z={z}&styles=sl&v=020"},Subdomains:"0123456789",tileType:"bd09"},Geoq:{Normal:{Map:"http://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineCommunity/MapServer/tile/{z}/{y}/{x}",PurplishBlue:"http://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetPurplishBlue/MapServer/tile/{z}/{y}/{x}",Gray:"http://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetGray/MapServer/tile/{z}/{y}/{x}",Warm:"http://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetWarm/MapServer/tile/{z}/{y}/{x}",minzoom:3,maxzoom:16},Subdomains:[]},OSM:{Normal:{Map:"http://{s}.tile.osm.org/{z}/{x}/{y}.png",minzoom:0,maxzoom:18},Subdomains:["a","b","c"]}});var k,I=p.split("."),N=I[0],V=I[1],ee=I[2],te=x[N][V][ee],re=x[N].Subdomains,ne=x[N][V].minzoom,ie=x[N][V].maxzoom,ae=x[N].tileType;if("TianDiTu"===N||"OSM"===N){var oe,se=M.key||x[N].key,ce=[],ue=_createForOfIteratorHelper(re);try{for(ue.s();!(oe=ue.n()).done;){var le=oe.value;ce.push(te.replace("{s}",le).replace("{key}",se))}}catch(pe){ue.e(pe)}finally{ue.f()}k={id:t,type:"raster",source:{type:"raster",tiles:ce,tileSize:256,minzoom:ne,maxzoom:ie}}}else k=new cc(t,te,{subdomains:re,minZoom:ne,maxZoom:ie,tileType:ae});return k}(p[0],p[1],M,x);t.addLayer(k,"mx.layer.fill")}))}function MxMapAddGoogleCnLayer(t,p,h){p.forEach((function(p,x){if("Image"==p){var M="https://gac-geo.googlecnapps.cn/maps/vt?lyrs=s&x={x}&y={y}&z={z}";h&&x<h.length&&(M=h[x]),t.addLayer({id:"GoogleImageLayer",type:"raster",source:{type:"raster",tiles:[M],tileSize:256}})}else if("Lable"==p){var k="https://gac-geo.googlecnapps.cn/maps/vt?lyrs=s,m&gl=CN&x={x}&y={y}&z={z}";h&&x<h.length&&(k=h[x]),t.addLayer({id:"GoogleImageLableLayer",type:"raster",source:{type:"raster",tiles:[k],tileSize:256}})}}))}var lc=3.141592653589793,pc=6378245,hc=.006693421622965943;function transformLat(t,p){var h=2*t-100+3*p+.2*p*p+.1*t*p+.2*Math.sqrt(Math.abs(t));return h+=2*(20*Math.sin(6*t*lc)+20*Math.sin(2*t*lc))/3,h+=2*(20*Math.sin(p*lc)+40*Math.sin(p/3*lc))/3,h+=2*(160*Math.sin(p/12*lc)+320*Math.sin(p*lc/30))/3}function transformLng(t,p){var h=300+t+2*p+.1*t*t+.1*t*p+.1*Math.sqrt(Math.abs(t));return h+=2*(20*Math.sin(6*t*lc)+20*Math.sin(2*t*lc))/3,h+=2*(20*Math.sin(t*lc)+40*Math.sin(t/3*lc))/3,h+=2*(150*Math.sin(t/12*lc)+300*Math.sin(t/30*lc))/3}function mx_gps84_To_gcj02(t,p){if(t instanceof Object){var h=t.lng;p=t.lat,t=h}var x=transformLat(t-105,p-35),M=transformLng(t-105,p-35),k=p/180*lc,I=Math.sin(k);I=1-hc*I*I;var N=Math.sqrt(I);return x=180*x/(pc*(1-hc)/(I*N)*lc),{lng:t+(M=180*M/(pc/N*Math.cos(k)*lc)),lat:p+x}}function mx_gcj02_To_gps84(t,p){if(t instanceof Object){var h=t.lng;p=t.lat,t=h}var x=function transform(t,p){var h=transformLat(t-105,p-35),x=transformLng(t-105,p-35),M=p/180*lc,k=Math.sin(M);k=1-hc*k*k;var I=Math.sqrt(k);return h=180*h/(pc*(1-hc)/(k*I)*lc),{lng:t+(x=180*x/(pc/I*Math.cos(M)*lc)),lat:p+h}}(t,p);return{lng:2*t-x.lng,lat:2*p-x.lat}}function _createSuper$1(t){var p=function _isNativeReflectConstruct$1(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(bm){return!1}}();return function _createSuperInternal(){var h,x=_getPrototypeOf$1(t);if(p){var M=_getPrototypeOf$1(this).constructor;h=Reflect.construct(x,arguments,M)}else h=x.apply(this,arguments);return _possibleConstructorReturn$1(this,h)}}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function get(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var p=Object(t),h=1;h<arguments.length;h++){var x=arguments[h];if(null!=x)for(var M in x)Object.prototype.hasOwnProperty.call(x,M)&&(p[M]=x[M])}return p});var dc=0,mc=1,gc=2,vc=1,yc=2,xc=3,bc=0,_c=1,Mc=2,Cc=0,wc=0,Sc=1,Tc=2,Ac=3,kc=4,Dc=5,Pc=100,Oc=101,Ic=102,Ec=103,Rc=104,Bc=200,Nc=201,Gc=202,Fc=203,Vc=204,Uc=205,jc=206,Wc=207,zc=208,Hc=209,$c=210,Yc=0,Kc=1,Xc=2,qc=3,Zc=4,Jc=5,Qc=6,eu=7,tu=0,ru=1,nu=2,iu=0,au=1,ou=2,su=3,cu=4,uu=5,lu=301,pu=302,hu=303,fu=304,du=305,mu=306,gu=307,vu=1e3,yu=1001,xu=1002,bu=1003,_u=1004,Mu=1005,Cu=1006,wu=1007,Su=1008,Tu=1009,Au=1010,ku=1011,Du=1012,Pu=1013,Ou=1014,Iu=1015,Lu=1016,Eu=1017,Ru=1018,Bu=1019,Nu=1020,Gu=1021,Fu=1022,Vu=1023,Uu=1024,ju=1025,Wu=Vu,zu=1026,Hu=1027,$u=1028,Yu=1029,Ku=1030,Xu=1031,qu=1032,Zu=1033,Ju=33776,Qu=33777,el=33778,tl=33779,rl=35840,nl=35841,il=35842,ol=35843,sl=36196,cl=37808,ul=37809,ll=37810,pl=37811,hl=37812,fl=37813,dl=37814,ml=37815,gl=37816,vl=37817,yl=37818,xl=37819,bl=37820,_l=37821,Ml=2300,Cl=2301,wl=2302,Sl=2400,Tl=2401,Al=2402,kl=3e3,Dl=3001,Pl=3007,Ol=3002,Il=3003,Ll=3004,El=3005,Rl=3006,Bl=3200,Nl=3201,Gl=0,Fl=1,Vl=7680,Ul=519,jl=35044,Wl=35048;function EventDispatcher(){}Object.assign(EventDispatcher.prototype,{addEventListener:function addEventListener(t,p){void 0===this._listeners&&(this._listeners={});var h=this._listeners;void 0===h[t]&&(h[t]=[]),-1===h[t].indexOf(p)&&h[t].push(p)},hasEventListener:function hasEventListener(t,p){if(void 0===this._listeners)return!1;var h=this._listeners;return void 0!==h[t]&&-1!==h[t].indexOf(p)},removeEventListener:function removeEventListener(t,p){if(void 0!==this._listeners){var h=this._listeners[t];if(void 0!==h){var x=h.indexOf(p);-1!==x&&h.splice(x,1)}}},dispatchEvent:function dispatchEvent(t){if(void 0!==this._listeners){var p=this._listeners[t.type];if(void 0!==p){t.target=this;for(var h=p.slice(0),x=0,M=h.length;x<M;x++)h[x].call(this,t)}}}});for(var zl=[],Hl=0;Hl<256;Hl++)zl[Hl]=(Hl<16?"0":"")+Hl.toString(16);var $l,Yl={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function generateUUID(){var t=4294967295*Math.random()|0,p=4294967295*Math.random()|0,h=4294967295*Math.random()|0,x=4294967295*Math.random()|0;return(zl[255&t]+zl[t>>8&255]+zl[t>>16&255]+zl[t>>24&255]+"-"+zl[255&p]+zl[p>>8&255]+"-"+zl[p>>16&15|64]+zl[p>>24&255]+"-"+zl[63&h|128]+zl[h>>8&255]+"-"+zl[h>>16&255]+zl[h>>24&255]+zl[255&x]+zl[x>>8&255]+zl[x>>16&255]+zl[x>>24&255]).toUpperCase()},clamp:function clamp(t,p,h){return Math.max(p,Math.min(h,t))},euclideanModulo:function euclideanModulo(t,p){return(t%p+p)%p},mapLinear:function mapLinear(t,p,h,x,M){return x+(t-p)*(M-x)/(h-p)},lerp:function lerp(t,p,h){return(1-h)*t+h*p},smoothstep:function smoothstep(t,p,h){return t<=p?0:t>=h?1:(t=(t-p)/(h-p))*t*(3-2*t)},smootherstep:function smootherstep(t,p,h){return t<=p?0:t>=h?1:(t=(t-p)/(h-p))*t*t*(t*(6*t-15)+10)},randInt:function randInt(t,p){return t+Math.floor(Math.random()*(p-t+1))},randFloat:function randFloat(t,p){return t+Math.random()*(p-t)},randFloatSpread:function randFloatSpread(t){return t*(.5-Math.random())},degToRad:function degToRad(t){return t*Yl.DEG2RAD},radToDeg:function radToDeg(t){return t*Yl.RAD2DEG},isPowerOfTwo:function isPowerOfTwo(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function ceilPowerOfTwo(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function floorPowerOfTwo(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function setQuaternionFromProperEuler(t,p,h,x,M){var k=Math.cos,I=Math.sin,N=k(h/2),V=I(h/2),ee=k((p+x)/2),te=I((p+x)/2),re=k((p-x)/2),ne=I((p-x)/2),ie=k((x-p)/2),ae=I((x-p)/2);"XYX"===M?t.set(N*te,V*re,V*ne,N*ee):"YZY"===M?t.set(V*ne,N*te,V*re,N*ee):"ZXZ"===M?t.set(V*re,V*ne,N*te,N*ee):"XZX"===M?t.set(N*te,V*ae,V*ie,N*ee):"YXY"===M?t.set(V*ie,N*te,V*ae,N*ee):"ZYZ"===M&&t.set(V*ae,V*ie,N*te,N*ee)}};function Vector2(t,p){this.x=t||0,this.y=p||0}function Matrix3(){this.elements=[1,0,0,0,1,0,0,0,1]}Object.defineProperties(Vector2.prototype,{width:{get:function get(){return this.x},set:function set(t){this.x=t}},height:{get:function get(){return this.y},set:function set(t){this.y=t}}}),Object.assign(Vector2.prototype,{isVector2:!0,set:function set(t,p){return this.x=t,this.y=p,this},setScalar:function setScalar(t){return this.x=t,this.y=t,this},setX:function setX(t){return this.x=t,this},setY:function setY(t){return this.y=t,this},setComponent:function setComponent(t,p){switch(t){case 0:this.x=p;break;case 1:this.y=p;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function clone(){return new this.constructor(this.x,this.y)},copy:function copy(t){return this.x=t.x,this.y=t.y,this},add:function add(t,p){return void 0!==p?this.addVectors(t,p):(this.x+=t.x,this.y+=t.y,this)},addScalar:function addScalar(t){return this.x+=t,this.y+=t,this},addVectors:function addVectors(t,p){return this.x=t.x+p.x,this.y=t.y+p.y,this},addScaledVector:function addScaledVector(t,p){return this.x+=t.x*p,this.y+=t.y*p,this},sub:function sub(t,p){return void 0!==p?this.subVectors(t,p):(this.x-=t.x,this.y-=t.y,this)},subScalar:function subScalar(t){return this.x-=t,this.y-=t,this},subVectors:function subVectors(t,p){return this.x=t.x-p.x,this.y=t.y-p.y,this},multiply:function multiply(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function multiplyScalar(t){return this.x*=t,this.y*=t,this},divide:function divide(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function divideScalar(t){return this.multiplyScalar(1/t)},applyMatrix3:function applyMatrix3(t){var p=this.x,h=this.y,x=t.elements;return this.x=x[0]*p+x[3]*h+x[6],this.y=x[1]*p+x[4]*h+x[7],this},min:function min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function clamp(t,p){return this.x=Math.max(t.x,Math.min(p.x,this.x)),this.y=Math.max(t.y,Math.min(p.y,this.y)),this},clampScalar:function clampScalar(t,p){return this.x=Math.max(t,Math.min(p,this.x)),this.y=Math.max(t,Math.min(p,this.y)),this},clampLength:function clampLength(t,p){var h=this.length();return this.divideScalar(h||1).multiplyScalar(Math.max(t,Math.min(p,h)))},floor:function floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function negate(){return this.x=-this.x,this.y=-this.y,this},dot:function dot(t){return this.x*t.x+this.y*t.y},cross:function cross(t){return this.x*t.y-this.y*t.x},lengthSq:function lengthSq(){return this.x*this.x+this.y*this.y},length:function length(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function normalize(){return this.divideScalar(this.length()||1)},angle:function angle(){var angle=Math.atan2(this.y,this.x);return angle<0&&(angle+=2*Math.PI),angle},distanceTo:function distanceTo(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function distanceToSquared(t){var p=this.x-t.x,h=this.y-t.y;return p*p+h*h},manhattanDistanceTo:function manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function setLength(t){return this.normalize().multiplyScalar(t)},lerp:function lerp(t,p){return this.x+=(t.x-this.x)*p,this.y+=(t.y-this.y)*p,this},lerpVectors:function lerpVectors(t,p,h){return this.subVectors(p,t).multiplyScalar(h).add(t)},equals:function equals(t){return t.x===this.x&&t.y===this.y},fromArray:function fromArray(t,p){return void 0===p&&(p=0),this.x=t[p],this.y=t[p+1],this},toArray:function toArray(t,p){return void 0===t&&(t=[]),void 0===p&&(p=0),t[p]=this.x,t[p+1]=this.y,t},fromBufferAttribute:function fromBufferAttribute(t,p,h){return this.x=t.getX(p),this.y=t.getY(p),this},rotateAround:function rotateAround(t,p){var h=Math.cos(p),x=Math.sin(p),M=this.x-t.x,k=this.y-t.y;return this.x=M*h-k*x+t.x,this.y=M*x+k*h+t.y,this}}),Object.assign(Matrix3.prototype,{isMatrix3:!0,set:function set(t,p,h,x,M,k,I,N,V){var ee=this.elements;return ee[0]=t,ee[1]=x,ee[2]=I,ee[3]=p,ee[4]=M,ee[5]=N,ee[6]=h,ee[7]=k,ee[8]=V,this},identity:function identity(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function clone(){return(new this.constructor).fromArray(this.elements)},copy:function copy(t){var p=this.elements,h=t.elements;return p[0]=h[0],p[1]=h[1],p[2]=h[2],p[3]=h[3],p[4]=h[4],p[5]=h[5],p[6]=h[6],p[7]=h[7],p[8]=h[8],this},setFromMatrix4:function setFromMatrix4(t){var p=t.elements;return this.set(p[0],p[4],p[8],p[1],p[5],p[9],p[2],p[6],p[10]),this},multiply:function multiply(t){return this.multiplyMatrices(this,t)},premultiply:function premultiply(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function multiplyMatrices(t,p){var h=t.elements,x=p.elements,M=this.elements,k=h[0],I=h[3],N=h[6],V=h[1],ee=h[4],te=h[7],re=h[2],ne=h[5],ie=h[8],ae=x[0],oe=x[3],se=x[6],ce=x[1],ue=x[4],le=x[7],pe=x[2],he=x[5],fe=x[8];return M[0]=k*ae+I*ce+N*pe,M[3]=k*oe+I*ue+N*he,M[6]=k*se+I*le+N*fe,M[1]=V*ae+ee*ce+te*pe,M[4]=V*oe+ee*ue+te*he,M[7]=V*se+ee*le+te*fe,M[2]=re*ae+ne*ce+ie*pe,M[5]=re*oe+ne*ue+ie*he,M[8]=re*se+ne*le+ie*fe,this},multiplyScalar:function multiplyScalar(t){var p=this.elements;return p[0]*=t,p[3]*=t,p[6]*=t,p[1]*=t,p[4]*=t,p[7]*=t,p[2]*=t,p[5]*=t,p[8]*=t,this},determinant:function determinant(){var t=this.elements,p=t[0],h=t[1],x=t[2],M=t[3],k=t[4],I=t[5],N=t[6],V=t[7],ee=t[8];return p*k*ee-p*I*V-h*M*ee+h*I*N+x*M*V-x*k*N},getInverse:function getInverse(t,p){t&&t.isMatrix4;var h=t.elements,x=this.elements,M=h[0],k=h[1],I=h[2],N=h[3],V=h[4],ee=h[5],te=h[6],re=h[7],ne=h[8],ie=ne*V-ee*re,ae=ee*te-ne*N,oe=re*N-V*te,se=M*ie+k*ae+I*oe;if(0===se){if(!0===p)throw new Error("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0");return this.identity()}var ce=1/se;return x[0]=ie*ce,x[1]=(I*re-ne*k)*ce,x[2]=(ee*k-I*V)*ce,x[3]=ae*ce,x[4]=(ne*M-I*te)*ce,x[5]=(I*N-ee*M)*ce,x[6]=oe*ce,x[7]=(k*te-re*M)*ce,x[8]=(V*M-k*N)*ce,this},transpose:function transpose(){var t,p=this.elements;return t=p[1],p[1]=p[3],p[3]=t,t=p[2],p[2]=p[6],p[6]=t,t=p[5],p[5]=p[7],p[7]=t,this},getNormalMatrix:function getNormalMatrix(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function transposeIntoArray(t){var p=this.elements;return t[0]=p[0],t[1]=p[3],t[2]=p[6],t[3]=p[1],t[4]=p[4],t[5]=p[7],t[6]=p[2],t[7]=p[5],t[8]=p[8],this},setUvTransform:function setUvTransform(t,p,h,x,M,k,I){var N=Math.cos(M),V=Math.sin(M);this.set(h*N,h*V,-h*(N*k+V*I)+k+t,-x*V,x*N,-x*(-V*k+N*I)+I+p,0,0,1)},scale:function scale(t,p){var h=this.elements;return h[0]*=t,h[3]*=t,h[6]*=t,h[1]*=p,h[4]*=p,h[7]*=p,this},rotate:function rotate(t){var p=Math.cos(t),h=Math.sin(t),x=this.elements,M=x[0],k=x[3],I=x[6],N=x[1],V=x[4],ee=x[7];return x[0]=p*M+h*N,x[3]=p*k+h*V,x[6]=p*I+h*ee,x[1]=-h*M+p*N,x[4]=-h*k+p*V,x[7]=-h*I+p*ee,this},translate:function translate(t,p){var h=this.elements;return h[0]+=t*h[2],h[3]+=t*h[5],h[6]+=t*h[8],h[1]+=p*h[2],h[4]+=p*h[5],h[7]+=p*h[8],this},equals:function equals(t){for(var p=this.elements,h=t.elements,x=0;x<9;x++)if(p[x]!==h[x])return!1;return!0},fromArray:function fromArray(t,p){void 0===p&&(p=0);for(var h=0;h<9;h++)this.elements[h]=t[h+p];return this},toArray:function toArray(t,p){void 0===t&&(t=[]),void 0===p&&(p=0);var h=this.elements;return t[p]=h[0],t[p+1]=h[1],t[p+2]=h[2],t[p+3]=h[3],t[p+4]=h[4],t[p+5]=h[5],t[p+6]=h[6],t[p+7]=h[7],t[p+8]=h[8],t}});var Kl={getDataURL:function getDataURL(t){var p;if("undefined"==typeof HTMLCanvasElement)return t.src;if(t instanceof HTMLCanvasElement)p=t;else{void 0===$l&&($l=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),$l.width=t.width,$l.height=t.height;var h=$l.getContext("2d");t instanceof ImageData?h.putImageData(t,0,0):h.drawImage(t,0,0,t.width,t.height),p=$l}return p.width>2048||p.height>2048?p.toDataURL("image/jpeg",.6):p.toDataURL("image/png")}},Xl=0;function Texture(t,p,h,x,M,k,I,N,V,ee){Object.defineProperty(this,"id",{value:Xl++}),this.uuid=Yl.generateUUID(),this.name="",this.image=void 0!==t?t:Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==p?p:Texture.DEFAULT_MAPPING,this.wrapS=void 0!==h?h:yu,this.wrapT=void 0!==x?x:yu,this.magFilter=void 0!==M?M:Cu,this.minFilter=void 0!==k?k:Su,this.anisotropy=void 0!==V?V:1,this.format=void 0!==I?I:Vu,this.internalFormat=null,this.type=void 0!==N?N:Tu,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==ee?ee:kl,this.version=0,this.onUpdate=null}function Vector4(t,p,h,x){this.x=t||0,this.y=p||0,this.z=h||0,this.w=void 0!==x?x:1}function WebGLRenderTarget(t,p,h){this.width=t,this.height=p,this.scissor=new Vector4(0,0,t,p),this.scissorTest=!1,this.viewport=new Vector4(0,0,t,p),h=h||{},this.texture=new Texture(void 0,h.mapping,h.wrapS,h.wrapT,h.magFilter,h.minFilter,h.format,h.type,h.anisotropy,h.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=p,this.texture.generateMipmaps=void 0!==h.generateMipmaps&&h.generateMipmaps,this.texture.minFilter=void 0!==h.minFilter?h.minFilter:Cu,this.depthBuffer=void 0===h.depthBuffer||h.depthBuffer,this.stencilBuffer=void 0===h.stencilBuffer||h.stencilBuffer,this.depthTexture=void 0!==h.depthTexture?h.depthTexture:null}function WebGLMultisampleRenderTarget(t,p,h){WebGLRenderTarget.call(this,t,p,h),this.samples=4}function Quaternion(t,p,h,x){this._x=t||0,this._y=p||0,this._z=h||0,this._w=void 0!==x?x:1}Texture.DEFAULT_IMAGE=void 0,Texture.DEFAULT_MAPPING=300,Texture.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Texture,isTexture:!0,updateMatrix:function updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function clone(){return(new this.constructor).copy(this)},copy:function copy(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function toJSON(t){var p=void 0===t||"string"==typeof t;if(!p&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var h={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var x=this.image;if(void 0===x.uuid&&(x.uuid=Yl.generateUUID()),!p&&void 0===t.images[x.uuid]){var M;if(Array.isArray(x)){M=[];for(var k=0,I=x.length;k<I;k++)M.push(Kl.getDataURL(x[k]))}else M=Kl.getDataURL(x);t.images[x.uuid]={uuid:x.uuid,url:M}}h.image=x.uuid}return p||(t.textures[this.uuid]=h),h},dispose:function dispose(){this.dispatchEvent({type:"dispose"})},transformUv:function transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case vu:t.x=t.x-Math.floor(t.x);break;case yu:t.x=t.x<0?0:1;break;case xu:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case vu:t.y=t.y-Math.floor(t.y);break;case yu:t.y=t.y<0?0:1;break;case xu:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(Texture.prototype,"needsUpdate",{set:function set(t){!0===t&&this.version++}}),Object.defineProperties(Vector4.prototype,{width:{get:function get(){return this.z},set:function set(t){this.z=t}},height:{get:function get(){return this.w},set:function set(t){this.w=t}}}),Object.assign(Vector4.prototype,{isVector4:!0,set:function set(t,p,h,x){return this.x=t,this.y=p,this.z=h,this.w=x,this},setScalar:function setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function setX(t){return this.x=t,this},setY:function setY(t){return this.y=t,this},setZ:function setZ(t){return this.z=t,this},setW:function setW(t){return this.w=t,this},setComponent:function setComponent(t,p){switch(t){case 0:this.x=p;break;case 1:this.y=p;break;case 2:this.z=p;break;case 3:this.w=p;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function clone(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function add(t,p){return void 0!==p?this.addVectors(t,p):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function addVectors(t,p){return this.x=t.x+p.x,this.y=t.y+p.y,this.z=t.z+p.z,this.w=t.w+p.w,this},addScaledVector:function addScaledVector(t,p){return this.x+=t.x*p,this.y+=t.y*p,this.z+=t.z*p,this.w+=t.w*p,this},sub:function sub(t,p){return void 0!==p?this.subVectors(t,p):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function subVectors(t,p){return this.x=t.x-p.x,this.y=t.y-p.y,this.z=t.z-p.z,this.w=t.w-p.w,this},multiplyScalar:function multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function applyMatrix4(t){var p=this.x,h=this.y,x=this.z,M=this.w,k=t.elements;return this.x=k[0]*p+k[4]*h+k[8]*x+k[12]*M,this.y=k[1]*p+k[5]*h+k[9]*x+k[13]*M,this.z=k[2]*p+k[6]*h+k[10]*x+k[14]*M,this.w=k[3]*p+k[7]*h+k[11]*x+k[15]*M,this},divideScalar:function divideScalar(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);var p=Math.sqrt(1-t.w*t.w);return p<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/p,this.y=t.y/p,this.z=t.z/p),this},setAxisAngleFromRotationMatrix:function setAxisAngleFromRotationMatrix(t){var p,h,x,M,k=.01,I=.1,N=t.elements,V=N[0],ee=N[4],te=N[8],re=N[1],ne=N[5],ie=N[9],ae=N[2],oe=N[6],se=N[10];if(Math.abs(ee-re)<k&&Math.abs(te-ae)<k&&Math.abs(ie-oe)<k){if(Math.abs(ee+re)<I&&Math.abs(te+ae)<I&&Math.abs(ie+oe)<I&&Math.abs(V+ne+se-3)<I)return this.set(1,0,0,0),this;p=Math.PI;var ce=(V+1)/2,ue=(ne+1)/2,le=(se+1)/2,pe=(ee+re)/4,he=(te+ae)/4,fe=(ie+oe)/4;return ce>ue&&ce>le?ce<k?(h=0,x=.707106781,M=.707106781):(x=pe/(h=Math.sqrt(ce)),M=he/h):ue>le?ue<k?(h=.707106781,x=0,M=.707106781):(h=pe/(x=Math.sqrt(ue)),M=fe/x):le<k?(h=.707106781,x=.707106781,M=0):(h=he/(M=Math.sqrt(le)),x=fe/M),this.set(h,x,M,p),this}var de=Math.sqrt((oe-ie)*(oe-ie)+(te-ae)*(te-ae)+(re-ee)*(re-ee));return Math.abs(de)<.001&&(de=1),this.x=(oe-ie)/de,this.y=(te-ae)/de,this.z=(re-ee)/de,this.w=Math.acos((V+ne+se-1)/2),this},min:function min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function clamp(t,p){return this.x=Math.max(t.x,Math.min(p.x,this.x)),this.y=Math.max(t.y,Math.min(p.y,this.y)),this.z=Math.max(t.z,Math.min(p.z,this.z)),this.w=Math.max(t.w,Math.min(p.w,this.w)),this},clampScalar:function clampScalar(t,p){return this.x=Math.max(t,Math.min(p,this.x)),this.y=Math.max(t,Math.min(p,this.y)),this.z=Math.max(t,Math.min(p,this.z)),this.w=Math.max(t,Math.min(p,this.w)),this},clampLength:function clampLength(t,p){var h=this.length();return this.divideScalar(h||1).multiplyScalar(Math.max(t,Math.min(p,h)))},floor:function floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function normalize(){return this.divideScalar(this.length()||1)},setLength:function setLength(t){return this.normalize().multiplyScalar(t)},lerp:function lerp(t,p){return this.x+=(t.x-this.x)*p,this.y+=(t.y-this.y)*p,this.z+=(t.z-this.z)*p,this.w+=(t.w-this.w)*p,this},lerpVectors:function lerpVectors(t,p,h){return this.subVectors(p,t).multiplyScalar(h).add(t)},equals:function equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function fromArray(t,p){return void 0===p&&(p=0),this.x=t[p],this.y=t[p+1],this.z=t[p+2],this.w=t[p+3],this},toArray:function toArray(t,p){return void 0===t&&(t=[]),void 0===p&&(p=0),t[p]=this.x,t[p+1]=this.y,t[p+2]=this.z,t[p+3]=this.w,t},fromBufferAttribute:function fromBufferAttribute(t,p,h){return this.x=t.getX(p),this.y=t.getY(p),this.z=t.getZ(p),this.w=t.getW(p),this}}),WebGLRenderTarget.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:WebGLRenderTarget,isWebGLRenderTarget:!0,setSize:function setSize(t,p){this.width===t&&this.height===p||(this.width=t,this.height=p,this.texture.image.width=t,this.texture.image.height=p,this.dispose()),this.viewport.set(0,0,t,p),this.scissor.set(0,0,t,p)},clone:function clone(){return(new this.constructor).copy(this)},copy:function copy(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function dispose(){this.dispatchEvent({type:"dispose"})}}),WebGLMultisampleRenderTarget.prototype=Object.assign(Object.create(WebGLRenderTarget.prototype),{constructor:WebGLMultisampleRenderTarget,isWebGLMultisampleRenderTarget:!0,copy:function copy(t){return WebGLRenderTarget.prototype.copy.call(this,t),this.samples=t.samples,this}}),Object.assign(Quaternion,{slerp:function slerp(t,p,h,x){return h.copy(t).slerp(p,x)},slerpFlat:function slerpFlat(t,p,h,x,M,k,I){var N=h[x+0],V=h[x+1],ee=h[x+2],te=h[x+3],re=M[k+0],ne=M[k+1],ie=M[k+2],ae=M[k+3];if(te!==ae||N!==re||V!==ne||ee!==ie){var oe=1-I,se=N*re+V*ne+ee*ie+te*ae,ce=se>=0?1:-1,ue=1-se*se;if(ue>Number.EPSILON){var le=Math.sqrt(ue),pe=Math.atan2(le,se*ce);oe=Math.sin(oe*pe)/le,I=Math.sin(I*pe)/le}var he=I*ce;if(N=N*oe+re*he,V=V*oe+ne*he,ee=ee*oe+ie*he,te=te*oe+ae*he,oe===1-I){var fe=1/Math.sqrt(N*N+V*V+ee*ee+te*te);N*=fe,V*=fe,ee*=fe,te*=fe}}t[p]=N,t[p+1]=V,t[p+2]=ee,t[p+3]=te}}),Object.defineProperties(Quaternion.prototype,{x:{get:function get(){return this._x},set:function set(t){this._x=t,this._onChangeCallback()}},y:{get:function get(){return this._y},set:function set(t){this._y=t,this._onChangeCallback()}},z:{get:function get(){return this._z},set:function set(t){this._z=t,this._onChangeCallback()}},w:{get:function get(){return this._w},set:function set(t){this._w=t,this._onChangeCallback()}}}),Object.assign(Quaternion.prototype,{isQuaternion:!0,set:function set(t,p,h,x){return this._x=t,this._y=p,this._z=h,this._w=x,this._onChangeCallback(),this},clone:function clone(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function setFromEuler(t,p){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var h=t._x,x=t._y,M=t._z,k=t.order,I=Math.cos,N=Math.sin,V=I(h/2),ee=I(x/2),te=I(M/2),re=N(h/2),ne=N(x/2),ie=N(M/2);return"XYZ"===k?(this._x=re*ee*te+V*ne*ie,this._y=V*ne*te-re*ee*ie,this._z=V*ee*ie+re*ne*te,this._w=V*ee*te-re*ne*ie):"YXZ"===k?(this._x=re*ee*te+V*ne*ie,this._y=V*ne*te-re*ee*ie,this._z=V*ee*ie-re*ne*te,this._w=V*ee*te+re*ne*ie):"ZXY"===k?(this._x=re*ee*te-V*ne*ie,this._y=V*ne*te+re*ee*ie,this._z=V*ee*ie+re*ne*te,this._w=V*ee*te-re*ne*ie):"ZYX"===k?(this._x=re*ee*te-V*ne*ie,this._y=V*ne*te+re*ee*ie,this._z=V*ee*ie-re*ne*te,this._w=V*ee*te+re*ne*ie):"YZX"===k?(this._x=re*ee*te+V*ne*ie,this._y=V*ne*te+re*ee*ie,this._z=V*ee*ie-re*ne*te,this._w=V*ee*te-re*ne*ie):"XZY"===k&&(this._x=re*ee*te-V*ne*ie,this._y=V*ne*te-re*ee*ie,this._z=V*ee*ie+re*ne*te,this._w=V*ee*te+re*ne*ie),!1!==p&&this._onChangeCallback(),this},setFromAxisAngle:function setFromAxisAngle(t,p){var h=p/2,x=Math.sin(h);return this._x=t.x*x,this._y=t.y*x,this._z=t.z*x,this._w=Math.cos(h),this._onChangeCallback(),this},setFromRotationMatrix:function setFromRotationMatrix(t){var p,h=t.elements,x=h[0],M=h[4],k=h[8],I=h[1],N=h[5],V=h[9],ee=h[2],te=h[6],re=h[10],ne=x+N+re;return ne>0?(p=.5/Math.sqrt(ne+1),this._w=.25/p,this._x=(te-V)*p,this._y=(k-ee)*p,this._z=(I-M)*p):x>N&&x>re?(p=2*Math.sqrt(1+x-N-re),this._w=(te-V)/p,this._x=.25*p,this._y=(M+I)/p,this._z=(k+ee)/p):N>re?(p=2*Math.sqrt(1+N-x-re),this._w=(k-ee)/p,this._x=(M+I)/p,this._y=.25*p,this._z=(V+te)/p):(p=2*Math.sqrt(1+re-x-N),this._w=(I-M)/p,this._x=(k+ee)/p,this._y=(V+te)/p,this._z=.25*p),this._onChangeCallback(),this},setFromUnitVectors:function setFromUnitVectors(t,p){var h=t.dot(p)+1;return h<1e-6?(h=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=h):(this._x=0,this._y=-t.z,this._z=t.y,this._w=h)):(this._x=t.y*p.z-t.z*p.y,this._y=t.z*p.x-t.x*p.z,this._z=t.x*p.y-t.y*p.x,this._w=h),this.normalize()},angleTo:function angleTo(t){return 2*Math.acos(Math.abs(Yl.clamp(this.dot(t),-1,1)))},rotateTowards:function rotateTowards(t,p){var h=this.angleTo(t);if(0===h)return this;var x=Math.min(1,p/h);return this.slerp(t,x),this},inverse:function inverse(){return this.conjugate()},conjugate:function conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function normalize(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function multiply(t,p){return void 0!==p?this.multiplyQuaternions(t,p):this.multiplyQuaternions(this,t)},premultiply:function premultiply(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function multiplyQuaternions(t,p){var h=t._x,x=t._y,M=t._z,k=t._w,I=p._x,N=p._y,V=p._z,ee=p._w;return this._x=h*ee+k*I+x*V-M*N,this._y=x*ee+k*N+M*I-h*V,this._z=M*ee+k*V+h*N-x*I,this._w=k*ee-h*I-x*N-M*V,this._onChangeCallback(),this},slerp:function slerp(t,p){if(0===p)return this;if(1===p)return this.copy(t);var h=this._x,x=this._y,M=this._z,k=this._w,I=k*t._w+h*t._x+x*t._y+M*t._z;if(I<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,I=-I):this.copy(t),I>=1)return this._w=k,this._x=h,this._y=x,this._z=M,this;var N=1-I*I;if(N<=Number.EPSILON){var V=1-p;return this._w=V*k+p*this._w,this._x=V*h+p*this._x,this._y=V*x+p*this._y,this._z=V*M+p*this._z,this.normalize(),this._onChangeCallback(),this}var ee=Math.sqrt(N),te=Math.atan2(ee,I),re=Math.sin((1-p)*te)/ee,ne=Math.sin(p*te)/ee;return this._w=k*re+this._w*ne,this._x=h*re+this._x*ne,this._y=x*re+this._y*ne,this._z=M*re+this._z*ne,this._onChangeCallback(),this},equals:function equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function fromArray(t,p){return void 0===p&&(p=0),this._x=t[p],this._y=t[p+1],this._z=t[p+2],this._w=t[p+3],this._onChangeCallback(),this},toArray:function toArray(t,p){return void 0===t&&(t=[]),void 0===p&&(p=0),t[p]=this._x,t[p+1]=this._y,t[p+2]=this._z,t[p+3]=this._w,t},_onChange:function _onChange(t){return this._onChangeCallback=t,this},_onChangeCallback:function _onChangeCallback(){}});var ql=new Vector3,Zl=new Quaternion;function Vector3(t,p,h){this.x=t||0,this.y=p||0,this.z=h||0}Object.assign(Vector3.prototype,{isVector3:!0,set:function set(t,p,h){return this.x=t,this.y=p,this.z=h,this},setScalar:function setScalar(t){return this.x=t,this.y=t,this.z=t,this},setX:function setX(t){return this.x=t,this},setY:function setY(t){return this.y=t,this},setZ:function setZ(t){return this.z=t,this},setComponent:function setComponent(t,p){switch(t){case 0:this.x=p;break;case 1:this.y=p;break;case 2:this.z=p;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function clone(){return new this.constructor(this.x,this.y,this.z)},copy:function copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function add(t,p){return void 0!==p?this.addVectors(t,p):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function addVectors(t,p){return this.x=t.x+p.x,this.y=t.y+p.y,this.z=t.z+p.z,this},addScaledVector:function addScaledVector(t,p){return this.x+=t.x*p,this.y+=t.y*p,this.z+=t.z*p,this},sub:function sub(t,p){return void 0!==p?this.subVectors(t,p):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function subVectors(t,p){return this.x=t.x-p.x,this.y=t.y-p.y,this.z=t.z-p.z,this},multiply:function multiply(t,p){return void 0!==p?this.multiplyVectors(t,p):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function multiplyVectors(t,p){return this.x=t.x*p.x,this.y=t.y*p.y,this.z=t.z*p.z,this},applyEuler:function applyEuler(t){return!t||t.isEuler,this.applyQuaternion(Zl.setFromEuler(t))},applyAxisAngle:function applyAxisAngle(t,p){return this.applyQuaternion(Zl.setFromAxisAngle(t,p))},applyMatrix3:function applyMatrix3(t){var p=this.x,h=this.y,x=this.z,M=t.elements;return this.x=M[0]*p+M[3]*h+M[6]*x,this.y=M[1]*p+M[4]*h+M[7]*x,this.z=M[2]*p+M[5]*h+M[8]*x,this},applyNormalMatrix:function applyNormalMatrix(t){return this.applyMatrix3(t).normalize()},applyMatrix4:function applyMatrix4(t){var p=this.x,h=this.y,x=this.z,M=t.elements,k=1/(M[3]*p+M[7]*h+M[11]*x+M[15]);return this.x=(M[0]*p+M[4]*h+M[8]*x+M[12])*k,this.y=(M[1]*p+M[5]*h+M[9]*x+M[13])*k,this.z=(M[2]*p+M[6]*h+M[10]*x+M[14])*k,this},applyQuaternion:function applyQuaternion(t){var p=this.x,h=this.y,x=this.z,M=t.x,k=t.y,I=t.z,N=t.w,V=N*p+k*x-I*h,ee=N*h+I*p-M*x,te=N*x+M*h-k*p,re=-M*p-k*h-I*x;return this.x=V*N+re*-M+ee*-I-te*-k,this.y=ee*N+re*-k+te*-M-V*-I,this.z=te*N+re*-I+V*-k-ee*-M,this},project:function project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function transformDirection(t){var p=this.x,h=this.y,x=this.z,M=t.elements;return this.x=M[0]*p+M[4]*h+M[8]*x,this.y=M[1]*p+M[5]*h+M[9]*x,this.z=M[2]*p+M[6]*h+M[10]*x,this.normalize()},divide:function divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function divideScalar(t){return this.multiplyScalar(1/t)},min:function min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function clamp(t,p){return this.x=Math.max(t.x,Math.min(p.x,this.x)),this.y=Math.max(t.y,Math.min(p.y,this.y)),this.z=Math.max(t.z,Math.min(p.z,this.z)),this},clampScalar:function clampScalar(t,p){return this.x=Math.max(t,Math.min(p,this.x)),this.y=Math.max(t,Math.min(p,this.y)),this.z=Math.max(t,Math.min(p,this.z)),this},clampLength:function clampLength(t,p){var h=this.length();return this.divideScalar(h||1).multiplyScalar(Math.max(t,Math.min(p,h)))},floor:function floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function dot(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function normalize(){return this.divideScalar(this.length()||1)},setLength:function setLength(t){return this.normalize().multiplyScalar(t)},lerp:function lerp(t,p){return this.x+=(t.x-this.x)*p,this.y+=(t.y-this.y)*p,this.z+=(t.z-this.z)*p,this},lerpVectors:function lerpVectors(t,p,h){return this.subVectors(p,t).multiplyScalar(h).add(t)},cross:function cross(t,p){return void 0!==p?this.crossVectors(t,p):this.crossVectors(this,t)},crossVectors:function crossVectors(t,p){var h=t.x,x=t.y,M=t.z,k=p.x,I=p.y,N=p.z;return this.x=x*N-M*I,this.y=M*k-h*N,this.z=h*I-x*k,this},projectOnVector:function projectOnVector(t){var p=t.lengthSq();if(0===p)return this.set(0,0,0);var h=t.dot(this)/p;return this.copy(t).multiplyScalar(h)},projectOnPlane:function projectOnPlane(t){return ql.copy(this).projectOnVector(t),this.sub(ql)},reflect:function reflect(t){return this.sub(ql.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function angleTo(t){var p=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===p)return Math.PI/2;var h=this.dot(t)/p;return Math.acos(Yl.clamp(h,-1,1))},distanceTo:function distanceTo(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function distanceToSquared(t){var p=this.x-t.x,h=this.y-t.y,x=this.z-t.z;return p*p+h*h+x*x},manhattanDistanceTo:function manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function setFromSphericalCoords(t,p,h){var x=Math.sin(p)*t;return this.x=x*Math.sin(h),this.y=Math.cos(p)*t,this.z=x*Math.cos(h),this},setFromCylindrical:function setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function setFromCylindricalCoords(t,p,h){return this.x=t*Math.sin(p),this.y=h,this.z=t*Math.cos(p),this},setFromMatrixPosition:function setFromMatrixPosition(t){var p=t.elements;return this.x=p[12],this.y=p[13],this.z=p[14],this},setFromMatrixScale:function setFromMatrixScale(t){var p=this.setFromMatrixColumn(t,0).length(),h=this.setFromMatrixColumn(t,1).length(),x=this.setFromMatrixColumn(t,2).length();return this.x=p,this.y=h,this.z=x,this},setFromMatrixColumn:function setFromMatrixColumn(t,p){return this.fromArray(t.elements,4*p)},setFromMatrix3Column:function setFromMatrix3Column(t,p){return this.fromArray(t.elements,3*p)},equals:function equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function fromArray(t,p){return void 0===p&&(p=0),this.x=t[p],this.y=t[p+1],this.z=t[p+2],this},toArray:function toArray(t,p){return void 0===t&&(t=[]),void 0===p&&(p=0),t[p]=this.x,t[p+1]=this.y,t[p+2]=this.z,t},fromBufferAttribute:function fromBufferAttribute(t,p,h){return this.x=t.getX(p),this.y=t.getY(p),this.z=t.getZ(p),this}});var Jl=new Vector3,Ql=new Matrix4,ep=new Vector3(0,0,0),tp=new Vector3(1,1,1),rp=new Vector3,np=new Vector3,ip=new Vector3;function Matrix4(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}Object.assign(Matrix4.prototype,{isMatrix4:!0,set:function set(t,p,h,x,M,k,I,N,V,ee,te,re,ne,ie,ae,oe){var se=this.elements;return se[0]=t,se[4]=p,se[8]=h,se[12]=x,se[1]=M,se[5]=k,se[9]=I,se[13]=N,se[2]=V,se[6]=ee,se[10]=te,se[14]=re,se[3]=ne,se[7]=ie,se[11]=ae,se[15]=oe,this},identity:function identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function clone(){return(new Matrix4).fromArray(this.elements)},copy:function copy(t){var p=this.elements,h=t.elements;return p[0]=h[0],p[1]=h[1],p[2]=h[2],p[3]=h[3],p[4]=h[4],p[5]=h[5],p[6]=h[6],p[7]=h[7],p[8]=h[8],p[9]=h[9],p[10]=h[10],p[11]=h[11],p[12]=h[12],p[13]=h[13],p[14]=h[14],p[15]=h[15],this},copyPosition:function copyPosition(t){var p=this.elements,h=t.elements;return p[12]=h[12],p[13]=h[13],p[14]=h[14],this},extractBasis:function extractBasis(t,p,h){return t.setFromMatrixColumn(this,0),p.setFromMatrixColumn(this,1),h.setFromMatrixColumn(this,2),this},makeBasis:function makeBasis(t,p,h){return this.set(t.x,p.x,h.x,0,t.y,p.y,h.y,0,t.z,p.z,h.z,0,0,0,0,1),this},extractRotation:function extractRotation(t){var p=this.elements,h=t.elements,x=1/Jl.setFromMatrixColumn(t,0).length(),M=1/Jl.setFromMatrixColumn(t,1).length(),k=1/Jl.setFromMatrixColumn(t,2).length();return p[0]=h[0]*x,p[1]=h[1]*x,p[2]=h[2]*x,p[3]=0,p[4]=h[4]*M,p[5]=h[5]*M,p[6]=h[6]*M,p[7]=0,p[8]=h[8]*k,p[9]=h[9]*k,p[10]=h[10]*k,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,this},makeRotationFromEuler:function makeRotationFromEuler(t){!t||t.isEuler;var p=this.elements,h=t.x,x=t.y,M=t.z,k=Math.cos(h),I=Math.sin(h),N=Math.cos(x),V=Math.sin(x),ee=Math.cos(M),te=Math.sin(M);if("XYZ"===t.order){var re=k*ee,ne=k*te,ie=I*ee,ae=I*te;p[0]=N*ee,p[4]=-N*te,p[8]=V,p[1]=ne+ie*V,p[5]=re-ae*V,p[9]=-I*N,p[2]=ae-re*V,p[6]=ie+ne*V,p[10]=k*N}else if("YXZ"===t.order){var oe=N*ee,se=N*te,ce=V*ee,ue=V*te;p[0]=oe+ue*I,p[4]=ce*I-se,p[8]=k*V,p[1]=k*te,p[5]=k*ee,p[9]=-I,p[2]=se*I-ce,p[6]=ue+oe*I,p[10]=k*N}else if("ZXY"===t.order){oe=N*ee,se=N*te,ce=V*ee,ue=V*te;p[0]=oe-ue*I,p[4]=-k*te,p[8]=ce+se*I,p[1]=se+ce*I,p[5]=k*ee,p[9]=ue-oe*I,p[2]=-k*V,p[6]=I,p[10]=k*N}else if("ZYX"===t.order){re=k*ee,ne=k*te,ie=I*ee,ae=I*te;p[0]=N*ee,p[4]=ie*V-ne,p[8]=re*V+ae,p[1]=N*te,p[5]=ae*V+re,p[9]=ne*V-ie,p[2]=-V,p[6]=I*N,p[10]=k*N}else if("YZX"===t.order){var le=k*N,pe=k*V,he=I*N,fe=I*V;p[0]=N*ee,p[4]=fe-le*te,p[8]=he*te+pe,p[1]=te,p[5]=k*ee,p[9]=-I*ee,p[2]=-V*ee,p[6]=pe*te+he,p[10]=le-fe*te}else if("XZY"===t.order){le=k*N,pe=k*V,he=I*N,fe=I*V;p[0]=N*ee,p[4]=-te,p[8]=V*ee,p[1]=le*te+fe,p[5]=k*ee,p[9]=pe*te-he,p[2]=he*te-pe,p[6]=I*ee,p[10]=fe*te+le}return p[3]=0,p[7]=0,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,this},makeRotationFromQuaternion:function makeRotationFromQuaternion(t){return this.compose(ep,t,tp)},lookAt:function lookAt(t,p,h){var x=this.elements;return ip.subVectors(t,p),0===ip.lengthSq()&&(ip.z=1),ip.normalize(),rp.crossVectors(h,ip),0===rp.lengthSq()&&(1===Math.abs(h.z)?ip.x+=1e-4:ip.z+=1e-4,ip.normalize(),rp.crossVectors(h,ip)),rp.normalize(),np.crossVectors(ip,rp),x[0]=rp.x,x[4]=np.x,x[8]=ip.x,x[1]=rp.y,x[5]=np.y,x[9]=ip.y,x[2]=rp.z,x[6]=np.z,x[10]=ip.z,this},multiply:function multiply(t,p){return void 0!==p?this.multiplyMatrices(t,p):this.multiplyMatrices(this,t)},premultiply:function premultiply(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function multiplyMatrices(t,p){var h=t.elements,x=p.elements,M=this.elements,k=h[0],I=h[4],N=h[8],V=h[12],ee=h[1],te=h[5],re=h[9],ne=h[13],ie=h[2],ae=h[6],oe=h[10],se=h[14],ce=h[3],ue=h[7],le=h[11],pe=h[15],he=x[0],fe=x[4],de=x[8],me=x[12],ge=x[1],ve=x[5],ye=x[9],xe=x[13],be=x[2],_e=x[6],Me=x[10],Ce=x[14],we=x[3],Se=x[7],Te=x[11],Ae=x[15];return M[0]=k*he+I*ge+N*be+V*we,M[4]=k*fe+I*ve+N*_e+V*Se,M[8]=k*de+I*ye+N*Me+V*Te,M[12]=k*me+I*xe+N*Ce+V*Ae,M[1]=ee*he+te*ge+re*be+ne*we,M[5]=ee*fe+te*ve+re*_e+ne*Se,M[9]=ee*de+te*ye+re*Me+ne*Te,M[13]=ee*me+te*xe+re*Ce+ne*Ae,M[2]=ie*he+ae*ge+oe*be+se*we,M[6]=ie*fe+ae*ve+oe*_e+se*Se,M[10]=ie*de+ae*ye+oe*Me+se*Te,M[14]=ie*me+ae*xe+oe*Ce+se*Ae,M[3]=ce*he+ue*ge+le*be+pe*we,M[7]=ce*fe+ue*ve+le*_e+pe*Se,M[11]=ce*de+ue*ye+le*Me+pe*Te,M[15]=ce*me+ue*xe+le*Ce+pe*Ae,this},multiplyScalar:function multiplyScalar(t){var p=this.elements;return p[0]*=t,p[4]*=t,p[8]*=t,p[12]*=t,p[1]*=t,p[5]*=t,p[9]*=t,p[13]*=t,p[2]*=t,p[6]*=t,p[10]*=t,p[14]*=t,p[3]*=t,p[7]*=t,p[11]*=t,p[15]*=t,this},determinant:function determinant(){var t=this.elements,p=t[0],h=t[4],x=t[8],M=t[12],k=t[1],I=t[5],N=t[9],V=t[13],ee=t[2],te=t[6],re=t[10],ne=t[14];return t[3]*(+M*N*te-x*V*te-M*I*re+h*V*re+x*I*ne-h*N*ne)+t[7]*(+p*N*ne-p*V*re+M*k*re-x*k*ne+x*V*ee-M*N*ee)+t[11]*(+p*V*te-p*I*ne-M*k*te+h*k*ne+M*I*ee-h*V*ee)+t[15]*(-x*I*ee-p*N*te+p*I*re+x*k*te-h*k*re+h*N*ee)},transpose:function transpose(){var t,p=this.elements;return t=p[1],p[1]=p[4],p[4]=t,t=p[2],p[2]=p[8],p[8]=t,t=p[6],p[6]=p[9],p[9]=t,t=p[3],p[3]=p[12],p[12]=t,t=p[7],p[7]=p[13],p[13]=t,t=p[11],p[11]=p[14],p[14]=t,this},setPosition:function setPosition(t,p,h){var x=this.elements;return t.isVector3?(x[12]=t.x,x[13]=t.y,x[14]=t.z):(x[12]=t,x[13]=p,x[14]=h),this},getInverse:function getInverse(t,p){var h=this.elements,x=t.elements,M=x[0],k=x[1],I=x[2],N=x[3],V=x[4],ee=x[5],te=x[6],re=x[7],ne=x[8],ie=x[9],ae=x[10],oe=x[11],se=x[12],ce=x[13],ue=x[14],le=x[15],pe=ie*ue*re-ce*ae*re+ce*te*oe-ee*ue*oe-ie*te*le+ee*ae*le,he=se*ae*re-ne*ue*re-se*te*oe+V*ue*oe+ne*te*le-V*ae*le,fe=ne*ce*re-se*ie*re+se*ee*oe-V*ce*oe-ne*ee*le+V*ie*le,de=se*ie*te-ne*ce*te-se*ee*ae+V*ce*ae+ne*ee*ue-V*ie*ue,me=M*pe+k*he+I*fe+N*de;if(0===me){if(!0===p)throw new Error("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0");return this.identity()}var ge=1/me;return h[0]=pe*ge,h[1]=(ce*ae*N-ie*ue*N-ce*I*oe+k*ue*oe+ie*I*le-k*ae*le)*ge,h[2]=(ee*ue*N-ce*te*N+ce*I*re-k*ue*re-ee*I*le+k*te*le)*ge,h[3]=(ie*te*N-ee*ae*N-ie*I*re+k*ae*re+ee*I*oe-k*te*oe)*ge,h[4]=he*ge,h[5]=(ne*ue*N-se*ae*N+se*I*oe-M*ue*oe-ne*I*le+M*ae*le)*ge,h[6]=(se*te*N-V*ue*N-se*I*re+M*ue*re+V*I*le-M*te*le)*ge,h[7]=(V*ae*N-ne*te*N+ne*I*re-M*ae*re-V*I*oe+M*te*oe)*ge,h[8]=fe*ge,h[9]=(se*ie*N-ne*ce*N-se*k*oe+M*ce*oe+ne*k*le-M*ie*le)*ge,h[10]=(V*ce*N-se*ee*N+se*k*re-M*ce*re-V*k*le+M*ee*le)*ge,h[11]=(ne*ee*N-V*ie*N-ne*k*re+M*ie*re+V*k*oe-M*ee*oe)*ge,h[12]=de*ge,h[13]=(ne*ce*I-se*ie*I+se*k*ae-M*ce*ae-ne*k*ue+M*ie*ue)*ge,h[14]=(se*ee*I-V*ce*I-se*k*te+M*ce*te+V*k*ue-M*ee*ue)*ge,h[15]=(V*ie*I-ne*ee*I+ne*k*te-M*ie*te-V*k*ae+M*ee*ae)*ge,this},scale:function scale(t){var p=this.elements,h=t.x,x=t.y,M=t.z;return p[0]*=h,p[4]*=x,p[8]*=M,p[1]*=h,p[5]*=x,p[9]*=M,p[2]*=h,p[6]*=x,p[10]*=M,p[3]*=h,p[7]*=x,p[11]*=M,this},getMaxScaleOnAxis:function getMaxScaleOnAxis(){var t=this.elements,p=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],h=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],x=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(p,h,x))},makeTranslation:function makeTranslation(t,p,h){return this.set(1,0,0,t,0,1,0,p,0,0,1,h,0,0,0,1),this},makeRotationX:function makeRotationX(t){var p=Math.cos(t),h=Math.sin(t);return this.set(1,0,0,0,0,p,-h,0,0,h,p,0,0,0,0,1),this},makeRotationY:function makeRotationY(t){var p=Math.cos(t),h=Math.sin(t);return this.set(p,0,h,0,0,1,0,0,-h,0,p,0,0,0,0,1),this},makeRotationZ:function makeRotationZ(t){var p=Math.cos(t),h=Math.sin(t);return this.set(p,-h,0,0,h,p,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function makeRotationAxis(t,p){var h=Math.cos(p),x=Math.sin(p),M=1-h,k=t.x,I=t.y,N=t.z,V=M*k,ee=M*I;return this.set(V*k+h,V*I-x*N,V*N+x*I,0,V*I+x*N,ee*I+h,ee*N-x*k,0,V*N-x*I,ee*N+x*k,M*N*N+h,0,0,0,0,1),this},makeScale:function makeScale(t,p,h){return this.set(t,0,0,0,0,p,0,0,0,0,h,0,0,0,0,1),this},makeShear:function makeShear(t,p,h){return this.set(1,p,h,0,t,1,h,0,t,p,1,0,0,0,0,1),this},compose:function compose(t,p,h){var x=this.elements,M=p._x,k=p._y,I=p._z,N=p._w,V=M+M,ee=k+k,te=I+I,re=M*V,ne=M*ee,ie=M*te,ae=k*ee,oe=k*te,se=I*te,ce=N*V,ue=N*ee,le=N*te,pe=h.x,he=h.y,fe=h.z;return x[0]=(1-(ae+se))*pe,x[1]=(ne+le)*pe,x[2]=(ie-ue)*pe,x[3]=0,x[4]=(ne-le)*he,x[5]=(1-(re+se))*he,x[6]=(oe+ce)*he,x[7]=0,x[8]=(ie+ue)*fe,x[9]=(oe-ce)*fe,x[10]=(1-(re+ae))*fe,x[11]=0,x[12]=t.x,x[13]=t.y,x[14]=t.z,x[15]=1,this},decompose:function decompose(t,p,h){var x=this.elements,M=Jl.set(x[0],x[1],x[2]).length(),k=Jl.set(x[4],x[5],x[6]).length(),I=Jl.set(x[8],x[9],x[10]).length();this.determinant()<0&&(M=-M),t.x=x[12],t.y=x[13],t.z=x[14],Ql.copy(this);var N=1/M,V=1/k,ee=1/I;return Ql.elements[0]*=N,Ql.elements[1]*=N,Ql.elements[2]*=N,Ql.elements[4]*=V,Ql.elements[5]*=V,Ql.elements[6]*=V,Ql.elements[8]*=ee,Ql.elements[9]*=ee,Ql.elements[10]*=ee,p.setFromRotationMatrix(Ql),h.x=M,h.y=k,h.z=I,this},makePerspective:function makePerspective(t,p,h,x,M,k){var I=this.elements,N=2*M/(p-t),V=2*M/(h-x),ee=(p+t)/(p-t),te=(h+x)/(h-x),re=-(k+M)/(k-M),ne=-2*k*M/(k-M);return I[0]=N,I[4]=0,I[8]=ee,I[12]=0,I[1]=0,I[5]=V,I[9]=te,I[13]=0,I[2]=0,I[6]=0,I[10]=re,I[14]=ne,I[3]=0,I[7]=0,I[11]=-1,I[15]=0,this},makeOrthographic:function makeOrthographic(t,p,h,x,M,k){var I=this.elements,N=1/(p-t),V=1/(h-x),ee=1/(k-M),te=(p+t)*N,re=(h+x)*V,ne=(k+M)*ee;return I[0]=2*N,I[4]=0,I[8]=0,I[12]=-te,I[1]=0,I[5]=2*V,I[9]=0,I[13]=-re,I[2]=0,I[6]=0,I[10]=-2*ee,I[14]=-ne,I[3]=0,I[7]=0,I[11]=0,I[15]=1,this},equals:function equals(t){for(var p=this.elements,h=t.elements,x=0;x<16;x++)if(p[x]!==h[x])return!1;return!0},fromArray:function fromArray(t,p){void 0===p&&(p=0);for(var h=0;h<16;h++)this.elements[h]=t[h+p];return this},toArray:function toArray(t,p){void 0===t&&(t=[]),void 0===p&&(p=0);var h=this.elements;return t[p]=h[0],t[p+1]=h[1],t[p+2]=h[2],t[p+3]=h[3],t[p+4]=h[4],t[p+5]=h[5],t[p+6]=h[6],t[p+7]=h[7],t[p+8]=h[8],t[p+9]=h[9],t[p+10]=h[10],t[p+11]=h[11],t[p+12]=h[12],t[p+13]=h[13],t[p+14]=h[14],t[p+15]=h[15],t}});var ap=new Matrix4,op=new Quaternion;function Euler(t,p,h,x){this._x=t||0,this._y=p||0,this._z=h||0,this._order=x||Euler.DefaultOrder}function Layers(){this.mask=1}Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Euler.DefaultOrder="XYZ",Object.defineProperties(Euler.prototype,{x:{get:function get(){return this._x},set:function set(t){this._x=t,this._onChangeCallback()}},y:{get:function get(){return this._y},set:function set(t){this._y=t,this._onChangeCallback()}},z:{get:function get(){return this._z},set:function set(t){this._z=t,this._onChangeCallback()}},order:{get:function get(){return this._order},set:function set(t){this._order=t,this._onChangeCallback()}}}),Object.assign(Euler.prototype,{isEuler:!0,set:function set(t,p,h,x){return this._x=t,this._y=p,this._z=h,this._order=x||this._order,this._onChangeCallback(),this},clone:function clone(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function setFromRotationMatrix(t,p,h){var x=Yl.clamp,M=t.elements,k=M[0],I=M[4],N=M[8],V=M[1],ee=M[5],te=M[9],re=M[2],ne=M[6],ie=M[10];return"XYZ"===(p=p||this._order)?(this._y=Math.asin(x(N,-1,1)),Math.abs(N)<.9999999?(this._x=Math.atan2(-te,ie),this._z=Math.atan2(-I,k)):(this._x=Math.atan2(ne,ee),this._z=0)):"YXZ"===p?(this._x=Math.asin(-x(te,-1,1)),Math.abs(te)<.9999999?(this._y=Math.atan2(N,ie),this._z=Math.atan2(V,ee)):(this._y=Math.atan2(-re,k),this._z=0)):"ZXY"===p?(this._x=Math.asin(x(ne,-1,1)),Math.abs(ne)<.9999999?(this._y=Math.atan2(-re,ie),this._z=Math.atan2(-I,ee)):(this._y=0,this._z=Math.atan2(V,k))):"ZYX"===p?(this._y=Math.asin(-x(re,-1,1)),Math.abs(re)<.9999999?(this._x=Math.atan2(ne,ie),this._z=Math.atan2(V,k)):(this._x=0,this._z=Math.atan2(-I,ee))):"YZX"===p?(this._z=Math.asin(x(V,-1,1)),Math.abs(V)<.9999999?(this._x=Math.atan2(-te,ee),this._y=Math.atan2(-re,k)):(this._x=0,this._y=Math.atan2(N,ie))):"XZY"===p&&(this._z=Math.asin(-x(I,-1,1)),Math.abs(I)<.9999999?(this._x=Math.atan2(ne,ee),this._y=Math.atan2(N,k)):(this._x=Math.atan2(-te,ie),this._y=0)),this._order=p,!1!==h&&this._onChangeCallback(),this},setFromQuaternion:function setFromQuaternion(t,p,h){return ap.makeRotationFromQuaternion(t),this.setFromRotationMatrix(ap,p,h)},setFromVector3:function setFromVector3(t,p){return this.set(t.x,t.y,t.z,p||this._order)},reorder:function reorder(t){return op.setFromEuler(this),this.setFromQuaternion(op,t)},equals:function equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function toArray(t,p){return void 0===t&&(t=[]),void 0===p&&(p=0),t[p]=this._x,t[p+1]=this._y,t[p+2]=this._z,t[p+3]=this._order,t},toVector3:function toVector3(t){return t?t.set(this._x,this._y,this._z):new Vector3(this._x,this._y,this._z)},_onChange:function _onChange(t){return this._onChangeCallback=t,this},_onChangeCallback:function _onChangeCallback(){}}),Object.assign(Layers.prototype,{set:function set(t){this.mask=1<<t|0},enable:function enable(t){this.mask|=1<<t|0},enableAll:function enableAll(){this.mask=-1},toggle:function toggle(t){this.mask^=1<<t|0},disable:function disable(t){this.mask&=~(1<<t|0)},disableAll:function disableAll(){this.mask=0},test:function test(t){return 0!=(this.mask&t.mask)}});var sp=0,cp=new Vector3,up=new Quaternion,lp=new Matrix4,pp=new Vector3,hp=new Vector3,fp=new Vector3,dp=new Quaternion,mp=new Vector3(1,0,0),gp=new Vector3(0,1,0),vp=new Vector3(0,0,1),yp={type:"added"},xp={type:"removed"};function Object3D(){Object.defineProperty(this,"id",{value:sp++}),this.uuid=Yl.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DefaultUp.clone();var t=new Vector3,p=new Euler,h=new Quaternion,x=new Vector3(1,1,1);p._onChange((function onRotationChange(){h.setFromEuler(p,!1)})),h._onChange((function onQuaternionChange(){p.setFromQuaternion(h,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:p},quaternion:{configurable:!0,enumerable:!0,value:h},scale:{configurable:!0,enumerable:!0,value:x},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function Scene(){Object3D.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Object3D.DefaultUp=new Vector3(0,1,0),Object3D.DefaultMatrixAutoUpdate=!0,Object3D.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Object3D,isObject3D:!0,onBeforeRender:function onBeforeRender(){},onAfterRender:function onAfterRender(){},applyMatrix4:function applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function applyQuaternion(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function setRotationFromAxisAngle(t,p){this.quaternion.setFromAxisAngle(t,p)},setRotationFromEuler:function setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function setRotationFromQuaternion(t){this.quaternion.copy(t)},rotateOnAxis:function rotateOnAxis(t,p){return up.setFromAxisAngle(t,p),this.quaternion.multiply(up),this},rotateOnWorldAxis:function rotateOnWorldAxis(t,p){return up.setFromAxisAngle(t,p),this.quaternion.premultiply(up),this},rotateX:function rotateX(t){return this.rotateOnAxis(mp,t)},rotateY:function rotateY(t){return this.rotateOnAxis(gp,t)},rotateZ:function rotateZ(t){return this.rotateOnAxis(vp,t)},translateOnAxis:function translateOnAxis(t,p){return cp.copy(t).applyQuaternion(this.quaternion),this.position.add(cp.multiplyScalar(p)),this},translateX:function translateX(t){return this.translateOnAxis(mp,t)},translateY:function translateY(t){return this.translateOnAxis(gp,t)},translateZ:function translateZ(t){return this.translateOnAxis(vp,t)},localToWorld:function localToWorld(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function worldToLocal(t){return t.applyMatrix4(lp.getInverse(this.matrixWorld))},lookAt:function lookAt(t,p,h){t.isVector3?pp.copy(t):pp.set(t,p,h);var x=this.parent;this.updateWorldMatrix(!0,!1),hp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?lp.lookAt(hp,pp,this.up):lp.lookAt(pp,hp,this.up),this.quaternion.setFromRotationMatrix(lp),x&&(lp.extractRotation(x.matrixWorld),up.setFromRotationMatrix(lp),this.quaternion.premultiply(up.inverse()))},add:function add(t){if(arguments.length>1){for(var p=0;p<arguments.length;p++)this.add(arguments[p]);return this}return t===this||t&&t.isObject3D&&(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(yp)),this},remove:function remove(t){if(arguments.length>1){for(var p=0;p<arguments.length;p++)this.remove(arguments[p]);return this}var h=this.children.indexOf(t);return-1!==h&&(t.parent=null,this.children.splice(h,1),t.dispatchEvent(xp)),this},attach:function attach(t){return this.updateWorldMatrix(!0,!1),lp.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),lp.multiply(t.parent.matrixWorld)),t.applyMatrix4(lp),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function getObjectById(t){return this.getObjectByProperty("id",t)},getObjectByName:function getObjectByName(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function getObjectByProperty(t,p){if(this[t]===p)return this;for(var h=0,x=this.children.length;h<x;h++){var M=this.children[h].getObjectByProperty(t,p);if(void 0!==M)return M}},getWorldPosition:function getWorldPosition(t){return void 0===t&&(t=new Vector3),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function getWorldQuaternion(t){return void 0===t&&(t=new Quaternion),this.updateMatrixWorld(!0),this.matrixWorld.decompose(hp,t,fp),t},getWorldScale:function getWorldScale(t){return void 0===t&&(t=new Vector3),this.updateMatrixWorld(!0),this.matrixWorld.decompose(hp,dp,t),t},getWorldDirection:function getWorldDirection(t){void 0===t&&(t=new Vector3),this.updateMatrixWorld(!0);var p=this.matrixWorld.elements;return t.set(p[8],p[9],p[10]).normalize()},raycast:function raycast(){},traverse:function traverse(t){t(this);for(var p=this.children,h=0,x=p.length;h<x;h++)p[h].traverse(t)},traverseVisible:function traverseVisible(t){if(!1!==this.visible){t(this);for(var p=this.children,h=0,x=p.length;h<x;h++)p[h].traverseVisible(t)}},traverseAncestors:function traverseAncestors(t){var p=this.parent;null!==p&&(t(p),p.traverseAncestors(t))},updateMatrix:function updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var p=this.children,h=0,x=p.length;h<x;h++)p[h].updateMatrixWorld(t)},updateWorldMatrix:function updateWorldMatrix(t,p){var h=this.parent;if(!0===t&&null!==h&&h.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===p)for(var x=this.children,M=0,k=x.length;M<k;M++)x[M].updateWorldMatrix(!1,!0)},toJSON:function toJSON(t){var p=void 0===t||"string"==typeof t,h={};p&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},h.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var x={};function serialize(p,h){return void 0===p[h.uuid]&&(p[h.uuid]=h.toJSON(t)),h.uuid}if(x.uuid=this.uuid,x.type=this.type,""!==this.name&&(x.name=this.name),!0===this.castShadow&&(x.castShadow=!0),!0===this.receiveShadow&&(x.receiveShadow=!0),!1===this.visible&&(x.visible=!1),!1===this.frustumCulled&&(x.frustumCulled=!1),0!==this.renderOrder&&(x.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(x.userData=this.userData),x.layers=this.layers.mask,x.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(x.matrixAutoUpdate=!1),this.isInstancedMesh&&(x.type="InstancedMesh",x.count=this.count,x.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){x.geometry=serialize(t.geometries,this.geometry);var M=this.geometry.parameters;if(void 0!==M&&void 0!==M.shapes){var k=M.shapes;if(Array.isArray(k))for(var I=0,N=k.length;I<N;I++){var V=k[I];serialize(t.shapes,V)}else serialize(t.shapes,k)}}if(void 0!==this.material)if(Array.isArray(this.material)){var ee=[];for(I=0,N=this.material.length;I<N;I++)ee.push(serialize(t.materials,this.material[I]));x.material=ee}else x.material=serialize(t.materials,this.material);if(this.children.length>0){x.children=[];for(I=0;I<this.children.length;I++)x.children.push(this.children[I].toJSON(t).object)}if(p){var te=extractFromCache(t.geometries),re=extractFromCache(t.materials),ne=extractFromCache(t.textures),ie=extractFromCache(t.images);k=extractFromCache(t.shapes);te.length>0&&(h.geometries=te),re.length>0&&(h.materials=re),ne.length>0&&(h.textures=ne),ie.length>0&&(h.images=ie),k.length>0&&(h.shapes=k)}return h.object=x,h;function extractFromCache(t){var p=[];for(var h in t){var x=t[h];delete x.metadata,p.push(x)}return p}},clone:function clone(t){return(new this.constructor).copy(this,t)},copy:function copy(t,p){if(void 0===p&&(p=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===p)for(var h=0;h<t.children.length;h++){var x=t.children[h];this.add(x.clone())}return this}}),Scene.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Scene,isScene:!0,copy:function copy(t,p){return Object3D.prototype.copy.call(this,t,p),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function toJSON(t){var p=Object3D.prototype.toJSON.call(this,t);return null!==this.background&&(p.object.background=this.background.toJSON(t)),null!==this.environment&&(p.object.environment=this.environment.toJSON(t)),null!==this.fog&&(p.object.fog=this.fog.toJSON()),p},dispose:function dispose(){this.dispatchEvent({type:"dispose"})}});var bp=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_p=new Vector3,Mp=new Box3,Cp=new Vector3,wp=new Vector3,Sp=new Vector3,Tp=new Vector3,Ap=new Vector3,kp=new Vector3,Dp=new Vector3,Pp=new Vector3,Op=new Vector3,Ip=new Vector3;function Box3(t,p){this.min=void 0!==t?t:new Vector3(1/0,1/0,1/0),this.max=void 0!==p?p:new Vector3(-1/0,-1/0,-1/0)}function satForAxes(t,p,h,x,M){var k,I;for(k=0,I=t.length-3;k<=I;k+=3){Ip.fromArray(t,k);var N=M.x*Math.abs(Ip.x)+M.y*Math.abs(Ip.y)+M.z*Math.abs(Ip.z),V=p.dot(Ip),ee=h.dot(Ip),te=x.dot(Ip);if(Math.max(-Math.max(V,ee,te),Math.min(V,ee,te))>N)return!1}return!0}Object.assign(Box3.prototype,{isBox3:!0,set:function set(t,p){return this.min.copy(t),this.max.copy(p),this},setFromArray:function setFromArray(t){for(var p=1/0,h=1/0,x=1/0,M=-1/0,k=-1/0,I=-1/0,N=0,V=t.length;N<V;N+=3){var ee=t[N],te=t[N+1],re=t[N+2];ee<p&&(p=ee),te<h&&(h=te),re<x&&(x=re),ee>M&&(M=ee),te>k&&(k=te),re>I&&(I=re)}return this.min.set(p,h,x),this.max.set(M,k,I),this},setFromBufferAttribute:function setFromBufferAttribute(t){for(var p=1/0,h=1/0,x=1/0,M=-1/0,k=-1/0,I=-1/0,N=0,V=t.count;N<V;N++){var ee=t.getX(N),te=t.getY(N),re=t.getZ(N);ee<p&&(p=ee),te<h&&(h=te),re<x&&(x=re),ee>M&&(M=ee),te>k&&(k=te),re>I&&(I=re)}return this.min.set(p,h,x),this.max.set(M,k,I),this},setFromPoints:function setFromPoints(t){this.makeEmpty();for(var p=0,h=t.length;p<h;p++)this.expandByPoint(t[p]);return this},setFromCenterAndSize:function setFromCenterAndSize(t,p){var h=_p.copy(p).multiplyScalar(.5);return this.min.copy(t).sub(h),this.max.copy(t).add(h),this},setFromObject:function setFromObject(t){return this.makeEmpty(),this.expandByObject(t)},clone:function clone(){return(new this.constructor).copy(this)},copy:function copy(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function getCenter(t){return void 0===t&&(t=new Vector3),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function getSize(t){return void 0===t&&(t=new Vector3),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function expandByPoint(t){return this.min.min(t),this.max.max(t),this},expandByVector:function expandByVector(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function expandByObject(t){t.updateWorldMatrix(!1,!1);var p=t.geometry;void 0!==p&&(null===p.boundingBox&&p.computeBoundingBox(),Mp.copy(p.boundingBox),Mp.applyMatrix4(t.matrixWorld),this.expandByPoint(Mp.min),this.expandByPoint(Mp.max));for(var h=t.children,x=0,M=h.length;x<M;x++)this.expandByObject(h[x]);return this},containsPoint:function containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function getParameter(t,p){return void 0===p&&(p=new Vector3),p.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function intersectsSphere(t){return this.clampPoint(t.center,_p),_p.distanceToSquared(t.center)<=t.radius*t.radius},intersectsPlane:function intersectsPlane(t){var p,h;return t.normal.x>0?(p=t.normal.x*this.min.x,h=t.normal.x*this.max.x):(p=t.normal.x*this.max.x,h=t.normal.x*this.min.x),t.normal.y>0?(p+=t.normal.y*this.min.y,h+=t.normal.y*this.max.y):(p+=t.normal.y*this.max.y,h+=t.normal.y*this.min.y),t.normal.z>0?(p+=t.normal.z*this.min.z,h+=t.normal.z*this.max.z):(p+=t.normal.z*this.max.z,h+=t.normal.z*this.min.z),p<=-t.constant&&h>=-t.constant},intersectsTriangle:function intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Dp),Pp.subVectors(this.max,Dp),Cp.subVectors(t.a,Dp),wp.subVectors(t.b,Dp),Sp.subVectors(t.c,Dp),Tp.subVectors(wp,Cp),Ap.subVectors(Sp,wp),kp.subVectors(Cp,Sp);var p=[0,-Tp.z,Tp.y,0,-Ap.z,Ap.y,0,-kp.z,kp.y,Tp.z,0,-Tp.x,Ap.z,0,-Ap.x,kp.z,0,-kp.x,-Tp.y,Tp.x,0,-Ap.y,Ap.x,0,-kp.y,kp.x,0];return!!satForAxes(p,Cp,wp,Sp,Pp)&&(!!satForAxes(p=[1,0,0,0,1,0,0,0,1],Cp,wp,Sp,Pp)&&(Op.crossVectors(Tp,Ap),satForAxes(p=[Op.x,Op.y,Op.z],Cp,wp,Sp,Pp)))},clampPoint:function clampPoint(t,p){return void 0===p&&(p=new Vector3),p.copy(t).clamp(this.min,this.max)},distanceToPoint:function distanceToPoint(t){return _p.copy(t).clamp(this.min,this.max).sub(t).length()},getBoundingSphere:function getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(_p).length(),t},intersect:function intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function union(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function applyMatrix4(t){return this.isEmpty()||(bp[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),bp[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),bp[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),bp[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),bp[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),bp[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),bp[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),bp[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(bp)),this},translate:function translate(t){return this.min.add(t),this.max.add(t),this},equals:function equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var Lp=new Box3;function Sphere(t,p){this.center=void 0!==t?t:new Vector3,this.radius=void 0!==p?p:0}Object.assign(Sphere.prototype,{set:function set(t,p){return this.center.copy(t),this.radius=p,this},setFromPoints:function setFromPoints(t,p){var h=this.center;void 0!==p?h.copy(p):Lp.setFromPoints(t).getCenter(h);for(var x=0,M=0,k=t.length;M<k;M++)x=Math.max(x,h.distanceToSquared(t[M]));return this.radius=Math.sqrt(x),this},clone:function clone(){return(new this.constructor).copy(this)},copy:function copy(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function empty(){return this.radius<=0},containsPoint:function containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function distanceToPoint(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function intersectsSphere(t){var p=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=p*p},intersectsBox:function intersectsBox(t){return t.intersectsSphere(this)},intersectsPlane:function intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function clampPoint(t,p){var h=this.center.distanceToSquared(t);return void 0===p&&(p=new Vector3),p.copy(t),h>this.radius*this.radius&&(p.sub(this.center).normalize(),p.multiplyScalar(this.radius).add(this.center)),p},getBoundingBox:function getBoundingBox(t){return void 0===t&&(t=new Box3),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function translate(t){return this.center.add(t),this},equals:function equals(t){return t.center.equals(this.center)&&t.radius===this.radius}});var Ep=new Vector3,Rp=new Vector3,Bp=new Vector3,Np=new Vector3,Gp=new Vector3,Fp=new Vector3,Vp=new Vector3;function Ray(t,p){this.origin=void 0!==t?t:new Vector3,this.direction=void 0!==p?p:new Vector3(0,0,-1)}Object.assign(Ray.prototype,{set:function set(t,p){return this.origin.copy(t),this.direction.copy(p),this},clone:function clone(){return(new this.constructor).copy(this)},copy:function copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function at(t,p){return void 0===p&&(p=new Vector3),p.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function recast(t){return this.origin.copy(this.at(t,Ep)),this},closestPointToPoint:function closestPointToPoint(t,p){void 0===p&&(p=new Vector3),p.subVectors(t,this.origin);var h=p.dot(this.direction);return h<0?p.copy(this.origin):p.copy(this.direction).multiplyScalar(h).add(this.origin)},distanceToPoint:function distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function distanceSqToPoint(t){var p=Ep.subVectors(t,this.origin).dot(this.direction);return p<0?this.origin.distanceToSquared(t):(Ep.copy(this.direction).multiplyScalar(p).add(this.origin),Ep.distanceToSquared(t))},distanceSqToSegment:function distanceSqToSegment(t,p,h,x){Rp.copy(t).add(p).multiplyScalar(.5),Bp.copy(p).sub(t).normalize(),Np.copy(this.origin).sub(Rp);var M,k,I,N,V=.5*t.distanceTo(p),ee=-this.direction.dot(Bp),te=Np.dot(this.direction),re=-Np.dot(Bp),ne=Np.lengthSq(),ie=Math.abs(1-ee*ee);if(ie>0)if(k=ee*te-re,N=V*ie,(M=ee*re-te)>=0)if(k>=-N)if(k<=N){var ae=1/ie;I=(M*=ae)*(M+ee*(k*=ae)+2*te)+k*(ee*M+k+2*re)+ne}else k=V,I=-(M=Math.max(0,-(ee*k+te)))*M+k*(k+2*re)+ne;else k=-V,I=-(M=Math.max(0,-(ee*k+te)))*M+k*(k+2*re)+ne;else k<=-N?I=-(M=Math.max(0,-(-ee*V+te)))*M+(k=M>0?-V:Math.min(Math.max(-V,-re),V))*(k+2*re)+ne:k<=N?(M=0,I=(k=Math.min(Math.max(-V,-re),V))*(k+2*re)+ne):I=-(M=Math.max(0,-(ee*V+te)))*M+(k=M>0?V:Math.min(Math.max(-V,-re),V))*(k+2*re)+ne;else k=ee>0?-V:V,I=-(M=Math.max(0,-(ee*k+te)))*M+k*(k+2*re)+ne;return h&&h.copy(this.direction).multiplyScalar(M).add(this.origin),x&&x.copy(Bp).multiplyScalar(k).add(Rp),I},intersectSphere:function intersectSphere(t,p){Ep.subVectors(t.center,this.origin);var h=Ep.dot(this.direction),x=Ep.dot(Ep)-h*h,M=t.radius*t.radius;if(x>M)return null;var k=Math.sqrt(M-x),I=h-k,N=h+k;return I<0&&N<0?null:I<0?this.at(N,p):this.at(I,p)},intersectsSphere:function intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function distanceToPlane(t){var p=t.normal.dot(this.direction);if(0===p)return 0===t.distanceToPoint(this.origin)?0:null;var h=-(this.origin.dot(t.normal)+t.constant)/p;return h>=0?h:null},intersectPlane:function intersectPlane(t,p){var h=this.distanceToPlane(t);return null===h?null:this.at(h,p)},intersectsPlane:function intersectsPlane(t){var p=t.distanceToPoint(this.origin);return 0===p||t.normal.dot(this.direction)*p<0},intersectBox:function intersectBox(t,p){var h,x,M,k,I,N,V=1/this.direction.x,ee=1/this.direction.y,te=1/this.direction.z,re=this.origin;return V>=0?(h=(t.min.x-re.x)*V,x=(t.max.x-re.x)*V):(h=(t.max.x-re.x)*V,x=(t.min.x-re.x)*V),ee>=0?(M=(t.min.y-re.y)*ee,k=(t.max.y-re.y)*ee):(M=(t.max.y-re.y)*ee,k=(t.min.y-re.y)*ee),h>k||M>x?null:((M>h||h!=h)&&(h=M),(k<x||x!=x)&&(x=k),te>=0?(I=(t.min.z-re.z)*te,N=(t.max.z-re.z)*te):(I=(t.max.z-re.z)*te,N=(t.min.z-re.z)*te),h>N||I>x?null:((I>h||h!=h)&&(h=I),(N<x||x!=x)&&(x=N),x<0?null:this.at(h>=0?h:x,p)))},intersectsBox:function intersectsBox(t){return null!==this.intersectBox(t,Ep)},intersectTriangle:function intersectTriangle(t,p,h,x,M){Gp.subVectors(p,t),Fp.subVectors(h,t),Vp.crossVectors(Gp,Fp);var k,I=this.direction.dot(Vp);if(I>0){if(x)return null;k=1}else{if(!(I<0))return null;k=-1,I=-I}Np.subVectors(this.origin,t);var N=k*this.direction.dot(Fp.crossVectors(Np,Fp));if(N<0)return null;var V=k*this.direction.dot(Gp.cross(Np));if(V<0)return null;if(N+V>I)return null;var ee=-k*Np.dot(Vp);return ee<0?null:this.at(ee/I,M)},applyMatrix4:function applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}});var Up=new Vector3,jp=new Vector3,Wp=new Matrix3;function Plane(t,p){this.normal=void 0!==t?t:new Vector3(1,0,0),this.constant=void 0!==p?p:0}Object.assign(Plane.prototype,{isPlane:!0,set:function set(t,p){return this.normal.copy(t),this.constant=p,this},setComponents:function setComponents(t,p,h,x){return this.normal.set(t,p,h),this.constant=x,this},setFromNormalAndCoplanarPoint:function setFromNormalAndCoplanarPoint(t,p){return this.normal.copy(t),this.constant=-p.dot(this.normal),this},setFromCoplanarPoints:function setFromCoplanarPoints(t,p,h){var x=Up.subVectors(h,p).cross(jp.subVectors(t,p)).normalize();return this.setFromNormalAndCoplanarPoint(x,t),this},clone:function clone(){return(new this.constructor).copy(this)},copy:function copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function normalize(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function negate(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function distanceToPoint(t){return this.normal.dot(t)+this.constant},distanceToSphere:function distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function projectPoint(t,p){return void 0===p&&(p=new Vector3),p.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function intersectLine(t,p){void 0===p&&(p=new Vector3);var h=t.delta(Up),x=this.normal.dot(h);if(0===x)return 0===this.distanceToPoint(t.start)?p.copy(t.start):void 0;var M=-(t.start.dot(this.normal)+this.constant)/x;return M<0||M>1?void 0:p.copy(h).multiplyScalar(M).add(t.start)},intersectsLine:function intersectsLine(t){var p=this.distanceToPoint(t.start),h=this.distanceToPoint(t.end);return p<0&&h>0||h<0&&p>0},intersectsBox:function intersectsBox(t){return t.intersectsPlane(this)},intersectsSphere:function intersectsSphere(t){return t.intersectsPlane(this)},coplanarPoint:function coplanarPoint(t){return void 0===t&&(t=new Vector3),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function applyMatrix4(t,p){var h=p||Wp.getNormalMatrix(t),x=this.coplanarPoint(Up).applyMatrix4(t),M=this.normal.applyMatrix3(h).normalize();return this.constant=-x.dot(M),this},translate:function translate(t){return this.constant-=t.dot(this.normal),this},equals:function equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}});var zp=new Vector3,Hp=new Vector3,$p=new Vector3,Yp=new Vector3,Kp=new Vector3,Xp=new Vector3,qp=new Vector3,Zp=new Vector3,Jp=new Vector3,Qp=new Vector3;function Triangle(t,p,h){this.a=void 0!==t?t:new Vector3,this.b=void 0!==p?p:new Vector3,this.c=void 0!==h?h:new Vector3}Object.assign(Triangle,{getNormal:function getNormal(t,p,h,x){void 0===x&&(x=new Vector3),x.subVectors(h,p),zp.subVectors(t,p),x.cross(zp);var M=x.lengthSq();return M>0?x.multiplyScalar(1/Math.sqrt(M)):x.set(0,0,0)},getBarycoord:function getBarycoord(t,p,h,x,M){zp.subVectors(x,p),Hp.subVectors(h,p),$p.subVectors(t,p);var k=zp.dot(zp),I=zp.dot(Hp),N=zp.dot($p),V=Hp.dot(Hp),ee=Hp.dot($p),te=k*V-I*I;if(void 0===M&&(M=new Vector3),0===te)return M.set(-2,-1,-1);var re=1/te,ne=(V*N-I*ee)*re,ie=(k*ee-I*N)*re;return M.set(1-ne-ie,ie,ne)},containsPoint:function containsPoint(t,p,h,x){return Triangle.getBarycoord(t,p,h,x,Yp),Yp.x>=0&&Yp.y>=0&&Yp.x+Yp.y<=1},getUV:function getUV(t,p,h,x,M,k,I,N){return this.getBarycoord(t,p,h,x,Yp),N.set(0,0),N.addScaledVector(M,Yp.x),N.addScaledVector(k,Yp.y),N.addScaledVector(I,Yp.z),N},isFrontFacing:function isFrontFacing(t,p,h,x){return zp.subVectors(h,p),Hp.subVectors(t,p),zp.cross(Hp).dot(x)<0}}),Object.assign(Triangle.prototype,{set:function set(t,p,h){return this.a.copy(t),this.b.copy(p),this.c.copy(h),this},setFromPointsAndIndices:function setFromPointsAndIndices(t,p,h,x){return this.a.copy(t[p]),this.b.copy(t[h]),this.c.copy(t[x]),this},clone:function clone(){return(new this.constructor).copy(this)},copy:function copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function getArea(){return zp.subVectors(this.c,this.b),Hp.subVectors(this.a,this.b),.5*zp.cross(Hp).length()},getMidpoint:function getMidpoint(t){return void 0===t&&(t=new Vector3),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function getNormal(t){return Triangle.getNormal(this.a,this.b,this.c,t)},getPlane:function getPlane(t){return void 0===t&&(t=new Plane),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function getBarycoord(t,p){return Triangle.getBarycoord(t,this.a,this.b,this.c,p)},getUV:function getUV(t,p,h,x,M){return Triangle.getUV(t,this.a,this.b,this.c,p,h,x,M)},containsPoint:function containsPoint(t){return Triangle.containsPoint(t,this.a,this.b,this.c)},isFrontFacing:function isFrontFacing(t){return Triangle.isFrontFacing(this.a,this.b,this.c,t)},intersectsBox:function intersectsBox(t){return t.intersectsTriangle(this)},closestPointToPoint:function closestPointToPoint(t,p){void 0===p&&(p=new Vector3);var h,x,M=this.a,k=this.b,I=this.c;Kp.subVectors(k,M),Xp.subVectors(I,M),Zp.subVectors(t,M);var N=Kp.dot(Zp),V=Xp.dot(Zp);if(N<=0&&V<=0)return p.copy(M);Jp.subVectors(t,k);var ee=Kp.dot(Jp),te=Xp.dot(Jp);if(ee>=0&&te<=ee)return p.copy(k);var re=N*te-ee*V;if(re<=0&&N>=0&&ee<=0)return h=N/(N-ee),p.copy(M).addScaledVector(Kp,h);Qp.subVectors(t,I);var ne=Kp.dot(Qp),ie=Xp.dot(Qp);if(ie>=0&&ne<=ie)return p.copy(I);var ae=ne*V-N*ie;if(ae<=0&&V>=0&&ie<=0)return x=V/(V-ie),p.copy(M).addScaledVector(Xp,x);var oe=ee*ie-ne*te;if(oe<=0&&te-ee>=0&&ne-ie>=0)return qp.subVectors(I,k),x=(te-ee)/(te-ee+(ne-ie)),p.copy(k).addScaledVector(qp,x);var se=1/(oe+ae+re);return h=ae*se,x=re*se,p.copy(M).addScaledVector(Kp,h).addScaledVector(Xp,x)},equals:function equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}});var eh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},th={h:0,s:0,l:0},rh={h:0,s:0,l:0};function Color(t,p,h){return void 0===p&&void 0===h?this.set(t):this.setRGB(t,p,h)}function hue2rgb(t,p,h){return h<0&&(h+=1),h>1&&(h-=1),h<1/6?t+6*(p-t)*h:h<.5?p:h<2/3?t+6*(p-t)*(2/3-h):t}function SRGBToLinear(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function LinearToSRGB(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}function Face3(t,p,h,x,M,k){this.a=t,this.b=p,this.c=h,this.normal=x&&x.isVector3?x:new Vector3,this.vertexNormals=Array.isArray(x)?x:[],this.color=M&&M.isColor?M:new Color,this.vertexColors=Array.isArray(M)?M:[],this.materialIndex=void 0!==k?k:0}Object.assign(Color.prototype,{isColor:!0,r:1,g:1,b:1,set:function set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function setScalar(t){return this.r=t,this.g=t,this.b=t,this},setHex:function setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function setRGB(t,p,h){return this.r=t,this.g=p,this.b=h,this},setHSL:function setHSL(t,p,h){if(t=Yl.euclideanModulo(t,1),p=Yl.clamp(p,0,1),h=Yl.clamp(h,0,1),0===p)this.r=this.g=this.b=h;else{var x=h<=.5?h*(1+p):h+p-h*p,M=2*h-x;this.r=hue2rgb(M,x,t+1/3),this.g=hue2rgb(M,x,t),this.b=hue2rgb(M,x,t-1/3)}return this},setStyle:function setStyle(t){function handleAlpha(t){void 0!==t&&parseFloat(t)}var p;if(p=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var h,x=p[1],M=p[2];switch(x){case"rgb":case"rgba":if(h=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(M))return this.r=Math.min(255,parseInt(h[1],10))/255,this.g=Math.min(255,parseInt(h[2],10))/255,this.b=Math.min(255,parseInt(h[3],10))/255,handleAlpha(h[5]),this;if(h=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(M))return this.r=Math.min(100,parseInt(h[1],10))/100,this.g=Math.min(100,parseInt(h[2],10))/100,this.b=Math.min(100,parseInt(h[3],10))/100,handleAlpha(h[5]),this;break;case"hsl":case"hsla":if(h=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(M)){var k=parseFloat(h[1])/360,I=parseInt(h[2],10)/100,N=parseInt(h[3],10)/100;return handleAlpha(h[5]),this.setHSL(k,I,N)}}}else if(p=/^\#([A-Fa-f0-9]+)$/.exec(t)){var V=p[1],ee=V.length;if(3===ee)return this.r=parseInt(V.charAt(0)+V.charAt(0),16)/255,this.g=parseInt(V.charAt(1)+V.charAt(1),16)/255,this.b=parseInt(V.charAt(2)+V.charAt(2),16)/255,this;if(6===ee)return this.r=parseInt(V.charAt(0)+V.charAt(1),16)/255,this.g=parseInt(V.charAt(2)+V.charAt(3),16)/255,this.b=parseInt(V.charAt(4)+V.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this},setColorName:function setColorName(t){var p=eh[t];return void 0!==p&&this.setHex(p),this},clone:function clone(){return new this.constructor(this.r,this.g,this.b)},copy:function copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function copyGammaToLinear(t,p){return void 0===p&&(p=2),this.r=Math.pow(t.r,p),this.g=Math.pow(t.g,p),this.b=Math.pow(t.b,p),this},copyLinearToGamma:function copyLinearToGamma(t,p){void 0===p&&(p=2);var h=p>0?1/p:1;return this.r=Math.pow(t.r,h),this.g=Math.pow(t.g,h),this.b=Math.pow(t.b,h),this},convertGammaToLinear:function convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function copySRGBToLinear(t){return this.r=SRGBToLinear(t.r),this.g=SRGBToLinear(t.g),this.b=SRGBToLinear(t.b),this},copyLinearToSRGB:function copyLinearToSRGB(t){return this.r=LinearToSRGB(t.r),this.g=LinearToSRGB(t.g),this.b=LinearToSRGB(t.b),this},convertSRGBToLinear:function convertSRGBToLinear(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function convertLinearToSRGB(){return this.copyLinearToSRGB(this),this},getHex:function getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function getHSL(t){void 0===t&&(t={h:0,s:0,l:0});var p,h,x=this.r,M=this.g,k=this.b,I=Math.max(x,M,k),N=Math.min(x,M,k),V=(N+I)/2;if(N===I)p=0,h=0;else{var ee=I-N;switch(h=V<=.5?ee/(I+N):ee/(2-I-N),I){case x:p=(M-k)/ee+(M<k?6:0);break;case M:p=(k-x)/ee+2;break;case k:p=(x-M)/ee+4}p/=6}return t.h=p,t.s=h,t.l=V,t},getStyle:function getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function offsetHSL(t,p,h){return this.getHSL(th),th.h+=t,th.s+=p,th.l+=h,this.setHSL(th.h,th.s,th.l),this},add:function add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function addColors(t,p){return this.r=t.r+p.r,this.g=t.g+p.g,this.b=t.b+p.b,this},addScalar:function addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function lerp(t,p){return this.r+=(t.r-this.r)*p,this.g+=(t.g-this.g)*p,this.b+=(t.b-this.b)*p,this},lerpHSL:function lerpHSL(t,p){this.getHSL(th),t.getHSL(rh);var h=Yl.lerp(th.h,rh.h,p),x=Yl.lerp(th.s,rh.s,p),M=Yl.lerp(th.l,rh.l,p);return this.setHSL(h,x,M),this},equals:function equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function fromArray(t,p){return void 0===p&&(p=0),this.r=t[p],this.g=t[p+1],this.b=t[p+2],this},toArray:function toArray(t,p){return void 0===t&&(t=[]),void 0===p&&(p=0),t[p]=this.r,t[p+1]=this.g,t[p+2]=this.b,t},toJSON:function toJSON(){return this.getHex()}}),Color.NAMES=eh,Object.assign(Face3.prototype,{clone:function clone(){return(new this.constructor).copy(this)},copy:function copy(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var p=0,h=t.vertexNormals.length;p<h;p++)this.vertexNormals[p]=t.vertexNormals[p].clone();for(p=0,h=t.vertexColors.length;p<h;p++)this.vertexColors[p]=t.vertexColors[p].clone();return this}});var ih=0;function Material(){Object.defineProperty(this,"id",{value:ih++}),this.uuid=Yl.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=Sc,this.side=bc,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=Cc,this.opacity=1,this.transparent=!1,this.blendSrc=Vc,this.blendDst=Uc,this.blendEquation=Pc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=qc,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Ul,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Vl,this.stencilZFail=Vl,this.stencilZPass=Vl,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function MeshBasicMaterial(t){Material.call(this),this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=tu,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(t)}Material.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Material,isMaterial:!0,onBeforeCompile:function onBeforeCompile(){},setValues:function setValues(t){if(void 0!==t)for(var p in t){var h=t[p];if(void 0!==h)if("shading"!==p){var x=this[p];void 0!==x&&(x&&x.isColor?x.set(h):x&&x.isVector3&&h&&h.isVector3?x.copy(h):this[p]=h)}else this.flatShading=1===h}},toJSON:function toJSON(t){var p=void 0===t||"string"==typeof t;p&&(t={textures:{},images:{}});var h={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function extractFromCache(t){var p=[];for(var h in t){var x=t[h];delete x.metadata,p.push(x)}return p}if(h.uuid=this.uuid,h.type=this.type,""!==this.name&&(h.name=this.name),this.color&&this.color.isColor&&(h.color=this.color.getHex()),void 0!==this.roughness&&(h.roughness=this.roughness),void 0!==this.metalness&&(h.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(h.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(h.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(h.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(h.specular=this.specular.getHex()),void 0!==this.shininess&&(h.shininess=this.shininess),void 0!==this.clearcoat&&(h.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(h.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(h.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,h.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(h.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(h.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(h.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(h.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(h.aoMap=this.aoMap.toJSON(t).uuid,h.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(h.bumpMap=this.bumpMap.toJSON(t).uuid,h.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(h.normalMap=this.normalMap.toJSON(t).uuid,h.normalMapType=this.normalMapType,h.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(h.displacementMap=this.displacementMap.toJSON(t).uuid,h.displacementScale=this.displacementScale,h.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(h.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(h.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(h.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(h.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(h.envMap=this.envMap.toJSON(t).uuid,h.reflectivity=this.reflectivity,h.refractionRatio=this.refractionRatio,void 0!==this.combine&&(h.combine=this.combine),void 0!==this.envMapIntensity&&(h.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(h.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(h.size=this.size),void 0!==this.sizeAttenuation&&(h.sizeAttenuation=this.sizeAttenuation),this.blending!==Sc&&(h.blending=this.blending),!0===this.flatShading&&(h.flatShading=this.flatShading),this.side!==bc&&(h.side=this.side),this.vertexColors!==Cc&&(h.vertexColors=this.vertexColors),this.opacity<1&&(h.opacity=this.opacity),!0===this.transparent&&(h.transparent=this.transparent),h.depthFunc=this.depthFunc,h.depthTest=this.depthTest,h.depthWrite=this.depthWrite,h.stencilWrite=this.stencilWrite,h.stencilWriteMask=this.stencilWriteMask,h.stencilFunc=this.stencilFunc,h.stencilRef=this.stencilRef,h.stencilFuncMask=this.stencilFuncMask,h.stencilFail=this.stencilFail,h.stencilZFail=this.stencilZFail,h.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(h.rotation=this.rotation),!0===this.polygonOffset&&(h.polygonOffset=!0),0!==this.polygonOffsetFactor&&(h.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(h.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(h.linewidth=this.linewidth),void 0!==this.dashSize&&(h.dashSize=this.dashSize),void 0!==this.gapSize&&(h.gapSize=this.gapSize),void 0!==this.scale&&(h.scale=this.scale),!0===this.dithering&&(h.dithering=!0),this.alphaTest>0&&(h.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(h.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(h.wireframe=this.wireframe),this.wireframeLinewidth>1&&(h.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(h.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(h.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(h.morphTargets=!0),!0===this.morphNormals&&(h.morphNormals=!0),!0===this.skinning&&(h.skinning=!0),!1===this.visible&&(h.visible=!1),!1===this.toneMapped&&(h.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(h.userData=this.userData),p){var x=extractFromCache(t.textures),M=extractFromCache(t.images);x.length>0&&(h.textures=x),M.length>0&&(h.images=M)}return h},clone:function clone(){return(new this.constructor).copy(this)},copy:function copy(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexTangents=t.vertexTangents,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;var p=t.clippingPlanes,h=null;if(null!==p){var x=p.length;h=new Array(x);for(var M=0;M!==x;++M)h[M]=p[M].clone()}return this.clippingPlanes=h,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function dispose(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Material.prototype,"needsUpdate",{set:function set(t){!0===t&&this.version++}}),MeshBasicMaterial.prototype=Object.create(Material.prototype),MeshBasicMaterial.prototype.constructor=MeshBasicMaterial,MeshBasicMaterial.prototype.isMeshBasicMaterial=!0,MeshBasicMaterial.prototype.copy=function(t){return Material.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this};var ah=new Vector3;function BufferAttribute(t,p,h){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=p,this.count=void 0!==t?t.length/p:0,this.normalized=!0===h,this.usage=jl,this.updateRange={offset:0,count:-1},this.version=0}function Int8BufferAttribute(t,p,h){BufferAttribute.call(this,new Int8Array(t),p,h)}function Uint8BufferAttribute(t,p,h){BufferAttribute.call(this,new Uint8Array(t),p,h)}function Uint8ClampedBufferAttribute(t,p,h){BufferAttribute.call(this,new Uint8ClampedArray(t),p,h)}function Int16BufferAttribute(t,p,h){BufferAttribute.call(this,new Int16Array(t),p,h)}function Uint16BufferAttribute(t,p,h){BufferAttribute.call(this,new Uint16Array(t),p,h)}function Int32BufferAttribute(t,p,h){BufferAttribute.call(this,new Int32Array(t),p,h)}function Uint32BufferAttribute(t,p,h){BufferAttribute.call(this,new Uint32Array(t),p,h)}function Float32BufferAttribute(t,p,h){BufferAttribute.call(this,new Float32Array(t),p,h)}function Float64BufferAttribute(t,p,h){BufferAttribute.call(this,new Float64Array(t),p,h)}function DirectGeometry(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function arrayMax(t){if(0===t.length)return-1/0;for(var p=t[0],h=1,x=t.length;h<x;++h)t[h]>p&&(p=t[h]);return p}Object.defineProperty(BufferAttribute.prototype,"needsUpdate",{set:function set(t){!0===t&&this.version++}}),Object.assign(BufferAttribute.prototype,{isBufferAttribute:!0,onUploadCallback:function onUploadCallback(){},setUsage:function setUsage(t){return this.usage=t,this},copy:function copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function copyAt(t,p,h){t*=this.itemSize,h*=p.itemSize;for(var x=0,M=this.itemSize;x<M;x++)this.array[t+x]=p.array[h+x];return this},copyArray:function copyArray(t){return this.array.set(t),this},copyColorsArray:function copyColorsArray(t){for(var p=this.array,h=0,x=0,M=t.length;x<M;x++){var k=t[x];void 0===k&&(k=new Color),p[h++]=k.r,p[h++]=k.g,p[h++]=k.b}return this},copyVector2sArray:function copyVector2sArray(t){for(var p=this.array,h=0,x=0,M=t.length;x<M;x++){var k=t[x];void 0===k&&(k=new Vector2),p[h++]=k.x,p[h++]=k.y}return this},copyVector3sArray:function copyVector3sArray(t){for(var p=this.array,h=0,x=0,M=t.length;x<M;x++){var k=t[x];void 0===k&&(k=new Vector3),p[h++]=k.x,p[h++]=k.y,p[h++]=k.z}return this},copyVector4sArray:function copyVector4sArray(t){for(var p=this.array,h=0,x=0,M=t.length;x<M;x++){var k=t[x];void 0===k&&(k=new Vector4),p[h++]=k.x,p[h++]=k.y,p[h++]=k.z,p[h++]=k.w}return this},applyMatrix3:function applyMatrix3(t){for(var p=0,h=this.count;p<h;p++)ah.x=this.getX(p),ah.y=this.getY(p),ah.z=this.getZ(p),ah.applyMatrix3(t),this.setXYZ(p,ah.x,ah.y,ah.z);return this},applyMatrix4:function applyMatrix4(t){for(var p=0,h=this.count;p<h;p++)ah.x=this.getX(p),ah.y=this.getY(p),ah.z=this.getZ(p),ah.applyMatrix4(t),this.setXYZ(p,ah.x,ah.y,ah.z);return this},applyNormalMatrix:function applyNormalMatrix(t){for(var p=0,h=this.count;p<h;p++)ah.x=this.getX(p),ah.y=this.getY(p),ah.z=this.getZ(p),ah.applyNormalMatrix(t),this.setXYZ(p,ah.x,ah.y,ah.z);return this},transformDirection:function transformDirection(t){for(var p=0,h=this.count;p<h;p++)ah.x=this.getX(p),ah.y=this.getY(p),ah.z=this.getZ(p),ah.transformDirection(t),this.setXYZ(p,ah.x,ah.y,ah.z);return this},set:function set(t,p){return void 0===p&&(p=0),this.array.set(t,p),this},getX:function getX(t){return this.array[t*this.itemSize]},setX:function setX(t,p){return this.array[t*this.itemSize]=p,this},getY:function getY(t){return this.array[t*this.itemSize+1]},setY:function setY(t,p){return this.array[t*this.itemSize+1]=p,this},getZ:function getZ(t){return this.array[t*this.itemSize+2]},setZ:function setZ(t,p){return this.array[t*this.itemSize+2]=p,this},getW:function getW(t){return this.array[t*this.itemSize+3]},setW:function setW(t,p){return this.array[t*this.itemSize+3]=p,this},setXY:function setXY(t,p,h){return t*=this.itemSize,this.array[t+0]=p,this.array[t+1]=h,this},setXYZ:function setXYZ(t,p,h,x){return t*=this.itemSize,this.array[t+0]=p,this.array[t+1]=h,this.array[t+2]=x,this},setXYZW:function setXYZW(t,p,h,x,M){return t*=this.itemSize,this.array[t+0]=p,this.array[t+1]=h,this.array[t+2]=x,this.array[t+3]=M,this},onUpload:function onUpload(t){return this.onUploadCallback=t,this},clone:function clone(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function toJSON(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),Int8BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Int8BufferAttribute.prototype.constructor=Int8BufferAttribute,Uint8BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Uint8BufferAttribute.prototype.constructor=Uint8BufferAttribute,Uint8ClampedBufferAttribute.prototype=Object.create(BufferAttribute.prototype),Uint8ClampedBufferAttribute.prototype.constructor=Uint8ClampedBufferAttribute,Int16BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Int16BufferAttribute.prototype.constructor=Int16BufferAttribute,Uint16BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Uint16BufferAttribute.prototype.constructor=Uint16BufferAttribute,Int32BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Int32BufferAttribute.prototype.constructor=Int32BufferAttribute,Uint32BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Uint32BufferAttribute.prototype.constructor=Uint32BufferAttribute,Float32BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Float32BufferAttribute.prototype.constructor=Float32BufferAttribute,Float64BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Float64BufferAttribute.prototype.constructor=Float64BufferAttribute,Object.assign(DirectGeometry.prototype,{computeGroups:function computeGroups(t){for(var p,h=[],x=void 0,M=t.faces,k=0;k<M.length;k++){var I=M[k];I.materialIndex!==x&&(x=I.materialIndex,void 0!==p&&(p.count=3*k-p.start,h.push(p)),p={start:3*k,materialIndex:x})}void 0!==p&&(p.count=3*k-p.start,h.push(p)),this.groups=h},fromGeometry:function fromGeometry(t){var p,h=t.faces,x=t.vertices,M=t.faceVertexUvs,k=M[0]&&M[0].length>0,I=M[1]&&M[1].length>0,N=t.morphTargets,V=N.length;if(V>0){p=[];for(var ee=0;ee<V;ee++)p[ee]={name:N[ee].name,data:[]};this.morphTargets.position=p}var te,re=t.morphNormals,ne=re.length;if(ne>0){te=[];for(ee=0;ee<ne;ee++)te[ee]={name:re[ee].name,data:[]};this.morphTargets.normal=te}var ie=t.skinIndices,ae=t.skinWeights,oe=ie.length===x.length,se=ae.length===x.length;x.length>0&&h.length;for(ee=0;ee<h.length;ee++){var ce=h[ee];this.vertices.push(x[ce.a],x[ce.b],x[ce.c]);var ue=ce.vertexNormals;if(3===ue.length)this.normals.push(ue[0],ue[1],ue[2]);else{var le=ce.normal;this.normals.push(le,le,le)}var pe,he=ce.vertexColors;if(3===he.length)this.colors.push(he[0],he[1],he[2]);else{var fe=ce.color;this.colors.push(fe,fe,fe)}if(!0===k)void 0!==(pe=M[0][ee])?this.uvs.push(pe[0],pe[1],pe[2]):this.uvs.push(new Vector2,new Vector2,new Vector2);if(!0===I)void 0!==(pe=M[1][ee])?this.uvs2.push(pe[0],pe[1],pe[2]):this.uvs2.push(new Vector2,new Vector2,new Vector2);for(var de=0;de<V;de++){var me=N[de].vertices;p[de].data.push(me[ce.a],me[ce.b],me[ce.c])}for(de=0;de<ne;de++){var ge=re[de].vertexNormals[ee];te[de].data.push(ge.a,ge.b,ge.c)}oe&&this.skinIndices.push(ie[ce.a],ie[ce.b],ie[ce.c]),se&&this.skinWeights.push(ae[ce.a],ae[ce.b],ae[ce.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}});var oh=1,sh=new Matrix4,ch=new Object3D,uh=new Vector3,lh=new Box3,ph=new Box3,hh=new Vector3;function BufferGeometry(){Object.defineProperty(this,"id",{value:oh+=2}),this.uuid=Yl.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}BufferGeometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:BufferGeometry,isBufferGeometry:!0,getIndex:function getIndex(){return this.index},setIndex:function setIndex(t){Array.isArray(t)?this.index=new(arrayMax(t)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(t,1):this.index=t},getAttribute:function getAttribute(t){return this.attributes[t]},setAttribute:function setAttribute(t,p){return this.attributes[t]=p,this},deleteAttribute:function deleteAttribute(t){return delete this.attributes[t],this},addGroup:function addGroup(t,p,h){this.groups.push({start:t,count:p,materialIndex:void 0!==h?h:0})},clearGroups:function clearGroups(){this.groups=[]},setDrawRange:function setDrawRange(t,p){this.drawRange.start=t,this.drawRange.count=p},applyMatrix4:function applyMatrix4(t){var p=this.attributes.position;void 0!==p&&(p.applyMatrix4(t),p.needsUpdate=!0);var h=this.attributes.normal;if(void 0!==h){var x=(new Matrix3).getNormalMatrix(t);h.applyNormalMatrix(x),h.needsUpdate=!0}var M=this.attributes.tangent;return void 0!==M&&(M.transformDirection(t),M.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function rotateX(t){return sh.makeRotationX(t),this.applyMatrix4(sh),this},rotateY:function rotateY(t){return sh.makeRotationY(t),this.applyMatrix4(sh),this},rotateZ:function rotateZ(t){return sh.makeRotationZ(t),this.applyMatrix4(sh),this},translate:function translate(t,p,h){return sh.makeTranslation(t,p,h),this.applyMatrix4(sh),this},scale:function scale(t,p,h){return sh.makeScale(t,p,h),this.applyMatrix4(sh),this},lookAt:function lookAt(t){return ch.lookAt(t),ch.updateMatrix(),this.applyMatrix4(ch.matrix),this},center:function center(){return this.computeBoundingBox(),this.boundingBox.getCenter(uh).negate(),this.translate(uh.x,uh.y,uh.z),this},setFromObject:function setFromObject(t){var p=t.geometry;if(t.isPoints||t.isLine){var h=new Float32BufferAttribute(3*p.vertices.length,3),x=new Float32BufferAttribute(3*p.colors.length,3);if(this.setAttribute("position",h.copyVector3sArray(p.vertices)),this.setAttribute("color",x.copyColorsArray(p.colors)),p.lineDistances&&p.lineDistances.length===p.vertices.length){var M=new Float32BufferAttribute(p.lineDistances.length,1);this.setAttribute("lineDistance",M.copyArray(p.lineDistances))}null!==p.boundingSphere&&(this.boundingSphere=p.boundingSphere.clone()),null!==p.boundingBox&&(this.boundingBox=p.boundingBox.clone())}else t.isMesh&&p&&p.isGeometry&&this.fromGeometry(p);return this},setFromPoints:function setFromPoints(t){for(var p=[],h=0,x=t.length;h<x;h++){var M=t[h];p.push(M.x,M.y,M.z||0)}return this.setAttribute("position",new Float32BufferAttribute(p,3)),this},updateFromObject:function updateFromObject(t){var p,h=t.geometry;if(t.isMesh){var x=h.__directGeometry;if(!0===h.elementsNeedUpdate&&(x=void 0,h.elementsNeedUpdate=!1),void 0===x)return this.fromGeometry(h);x.verticesNeedUpdate=h.verticesNeedUpdate,x.normalsNeedUpdate=h.normalsNeedUpdate,x.colorsNeedUpdate=h.colorsNeedUpdate,x.uvsNeedUpdate=h.uvsNeedUpdate,x.groupsNeedUpdate=h.groupsNeedUpdate,h.verticesNeedUpdate=!1,h.normalsNeedUpdate=!1,h.colorsNeedUpdate=!1,h.uvsNeedUpdate=!1,h.groupsNeedUpdate=!1,h=x}return!0===h.verticesNeedUpdate&&(void 0!==(p=this.attributes.position)&&(p.copyVector3sArray(h.vertices),p.needsUpdate=!0),h.verticesNeedUpdate=!1),!0===h.normalsNeedUpdate&&(void 0!==(p=this.attributes.normal)&&(p.copyVector3sArray(h.normals),p.needsUpdate=!0),h.normalsNeedUpdate=!1),!0===h.colorsNeedUpdate&&(void 0!==(p=this.attributes.color)&&(p.copyColorsArray(h.colors),p.needsUpdate=!0),h.colorsNeedUpdate=!1),h.uvsNeedUpdate&&(void 0!==(p=this.attributes.uv)&&(p.copyVector2sArray(h.uvs),p.needsUpdate=!0),h.uvsNeedUpdate=!1),h.lineDistancesNeedUpdate&&(void 0!==(p=this.attributes.lineDistance)&&(p.copyArray(h.lineDistances),p.needsUpdate=!0),h.lineDistancesNeedUpdate=!1),h.groupsNeedUpdate&&(h.computeGroups(t.geometry),this.groups=h.groups,h.groupsNeedUpdate=!1),this},fromGeometry:function fromGeometry(t){return t.__directGeometry=(new DirectGeometry).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function fromDirectGeometry(t){var p=new Float32Array(3*t.vertices.length);if(this.setAttribute("position",new BufferAttribute(p,3).copyVector3sArray(t.vertices)),t.normals.length>0){var h=new Float32Array(3*t.normals.length);this.setAttribute("normal",new BufferAttribute(h,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var x=new Float32Array(3*t.colors.length);this.setAttribute("color",new BufferAttribute(x,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var M=new Float32Array(2*t.uvs.length);this.setAttribute("uv",new BufferAttribute(M,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var k=new Float32Array(2*t.uvs2.length);this.setAttribute("uv2",new BufferAttribute(k,2).copyVector2sArray(t.uvs2))}for(var I in this.groups=t.groups,t.morphTargets){for(var N=[],V=t.morphTargets[I],ee=0,te=V.length;ee<te;ee++){var re=V[ee],ne=new Float32BufferAttribute(3*re.data.length,3);ne.name=re.name,N.push(ne.copyVector3sArray(re.data))}this.morphAttributes[I]=N}if(t.skinIndices.length>0){var ie=new Float32BufferAttribute(4*t.skinIndices.length,4);this.setAttribute("skinIndex",ie.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var ae=new Float32BufferAttribute(4*t.skinWeights.length,4);this.setAttribute("skinWeight",ae.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Box3);var t=this.attributes.position,p=this.morphAttributes.position;if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),p)for(var h=0,x=p.length;h<x;h++){var M=p[h];lh.setFromBufferAttribute(M),this.morphTargetsRelative?(hh.addVectors(this.boundingBox.min,lh.min),this.boundingBox.expandByPoint(hh),hh.addVectors(this.boundingBox.max,lh.max),this.boundingBox.expandByPoint(hh)):(this.boundingBox.expandByPoint(lh.min),this.boundingBox.expandByPoint(lh.max))}}else this.boundingBox.makeEmpty();isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)},computeBoundingSphere:function computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Sphere);var t=this.attributes.position,p=this.morphAttributes.position;if(t){var h=this.boundingSphere.center;if(lh.setFromBufferAttribute(t),p)for(var x=0,M=p.length;x<M;x++){var k=p[x];ph.setFromBufferAttribute(k),this.morphTargetsRelative?(hh.addVectors(lh.min,ph.min),lh.expandByPoint(hh),hh.addVectors(lh.max,ph.max),lh.expandByPoint(hh)):(lh.expandByPoint(ph.min),lh.expandByPoint(ph.max))}lh.getCenter(h);var I=0;for(x=0,M=t.count;x<M;x++)hh.fromBufferAttribute(t,x),I=Math.max(I,h.distanceToSquared(hh));if(p)for(x=0,M=p.length;x<M;x++){k=p[x];for(var N=this.morphTargetsRelative,V=0,ee=k.count;V<ee;V++)hh.fromBufferAttribute(k,V),N&&(uh.fromBufferAttribute(t,V),hh.add(uh)),I=Math.max(I,h.distanceToSquared(hh))}this.boundingSphere.radius=Math.sqrt(I),isNaN(this.boundingSphere.radius)}},computeFaceNormals:function computeFaceNormals(){},computeVertexNormals:function computeVertexNormals(){var t=this.index,p=this.attributes;if(p.position){var h=p.position.array;if(void 0===p.normal)this.setAttribute("normal",new BufferAttribute(new Float32Array(h.length),3));else for(var x=p.normal.array,M=0,k=x.length;M<k;M++)x[M]=0;var I,N,V,ee=p.normal.array,te=new Vector3,re=new Vector3,ne=new Vector3,ie=new Vector3,ae=new Vector3;if(t){var oe=t.array;for(M=0,k=t.count;M<k;M+=3)I=3*oe[M+0],N=3*oe[M+1],V=3*oe[M+2],te.fromArray(h,I),re.fromArray(h,N),ne.fromArray(h,V),ie.subVectors(ne,re),ae.subVectors(te,re),ie.cross(ae),ee[I]+=ie.x,ee[I+1]+=ie.y,ee[I+2]+=ie.z,ee[N]+=ie.x,ee[N+1]+=ie.y,ee[N+2]+=ie.z,ee[V]+=ie.x,ee[V+1]+=ie.y,ee[V+2]+=ie.z}else for(M=0,k=h.length;M<k;M+=9)te.fromArray(h,M),re.fromArray(h,M+3),ne.fromArray(h,M+6),ie.subVectors(ne,re),ae.subVectors(te,re),ie.cross(ae),ee[M]=ie.x,ee[M+1]=ie.y,ee[M+2]=ie.z,ee[M+3]=ie.x,ee[M+4]=ie.y,ee[M+5]=ie.z,ee[M+6]=ie.x,ee[M+7]=ie.y,ee[M+8]=ie.z;this.normalizeNormals(),p.normal.needsUpdate=!0}},merge:function merge(t,p){if(t&&t.isBufferGeometry){void 0===p&&(p=0);var h=this.attributes;for(var x in h)if(void 0!==t.attributes[x])for(var M=h[x].array,k=t.attributes[x],I=k.array,N=k.itemSize*p,V=Math.min(I.length,M.length-N),ee=0,te=N;ee<V;ee++,te++)M[te]=I[ee];return this}},normalizeNormals:function normalizeNormals(){for(var t=this.attributes.normal,p=0,h=t.count;p<h;p++)hh.x=t.getX(p),hh.y=t.getY(p),hh.z=t.getZ(p),hh.normalize(),t.setXYZ(p,hh.x,hh.y,hh.z)},toNonIndexed:function toNonIndexed(){function convertBufferAttribute(t,p){for(var h=t.array,x=t.itemSize,M=new h.constructor(p.length*x),k=0,I=0,N=0,V=p.length;N<V;N++){k=p[N]*x;for(var ee=0;ee<x;ee++)M[I++]=h[k++]}return new BufferAttribute(M,x)}if(null===this.index)return this;var t=new BufferGeometry,p=this.index.array,h=this.attributes;for(var x in h){var M=convertBufferAttribute(h[x],p);t.setAttribute(x,M)}var k=this.morphAttributes;for(x in k){for(var I=[],N=k[x],V=0,ee=N.length;V<ee;V++){M=convertBufferAttribute(N[V],p);I.push(M)}t.morphAttributes[x]=I}t.morphTargetsRelative=this.morphTargetsRelative;for(var te=this.groups,re=(V=0,te.length);V<re;V++){var ne=te[V];t.addGroup(ne.start,ne.count,ne.materialIndex)}return t},toJSON:function toJSON(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var p=this.parameters;for(var h in p)void 0!==p[h]&&(t[h]=p[h]);return t}t.data={attributes:{}};var x=this.index;null!==x&&(t.data.index={type:x.array.constructor.name,array:Array.prototype.slice.call(x.array)});var M=this.attributes;for(var h in M){var k=(ne=M[h]).toJSON();""!==ne.name&&(k.name=ne.name),t.data.attributes[h]=k}var I={},N=!1;for(var h in this.morphAttributes){for(var V=this.morphAttributes[h],ee=[],te=0,re=V.length;te<re;te++){var ne;k=(ne=V[te]).toJSON();""!==ne.name&&(k.name=ne.name),ee.push(k)}ee.length>0&&(I[h]=ee,N=!0)}N&&(t.data.morphAttributes=I,t.data.morphTargetsRelative=this.morphTargetsRelative);var ie=this.groups;ie.length>0&&(t.data.groups=JSON.parse(JSON.stringify(ie)));var ae=this.boundingSphere;return null!==ae&&(t.data.boundingSphere={center:ae.center.toArray(),radius:ae.radius}),t},clone:function clone(){return(new BufferGeometry).copy(this)},copy:function copy(t){var p,h,x;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var M=t.index;null!==M&&this.setIndex(M.clone());var k=t.attributes;for(p in k){var I=k[p];this.setAttribute(p,I.clone())}var N=t.morphAttributes;for(p in N){var V=[],ee=N[p];for(h=0,x=ee.length;h<x;h++)V.push(ee[h].clone());this.morphAttributes[p]=V}this.morphTargetsRelative=t.morphTargetsRelative;var te=t.groups;for(h=0,x=te.length;h<x;h++){var re=te[h];this.addGroup(re.start,re.count,re.materialIndex)}var ne=t.boundingBox;null!==ne&&(this.boundingBox=ne.clone());var ie=t.boundingSphere;return null!==ie&&(this.boundingSphere=ie.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function dispose(){this.dispatchEvent({type:"dispose"})}});var fh=new Matrix4,dh=new Ray,mh=new Sphere,gh=new Vector3,vh=new Vector3,yh=new Vector3,xh=new Vector3,bh=new Vector3,_h=new Vector3,Mh=new Vector3,Ch=new Vector3,wh=new Vector3,Sh=new Vector2,Th=new Vector2,Ah=new Vector2,kh=new Vector3,Dh=new Vector3;function Mesh(t,p){Object3D.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new BufferGeometry,this.material=void 0!==p?p:new MeshBasicMaterial,this.updateMorphTargets()}function checkIntersection(t,p,h,x,M,k,I,N){if(null===(p.side===_c?x.intersectTriangle(I,k,M,!0,N):x.intersectTriangle(M,k,I,p.side!==Mc,N)))return null;Dh.copy(N),Dh.applyMatrix4(t.matrixWorld);var V=h.ray.origin.distanceTo(Dh);return V<h.near||V>h.far?null:{distance:V,point:Dh.clone(),object:t}}function checkBufferGeometryIntersection(t,p,h,x,M,k,I,N,V,ee,te,re){gh.fromBufferAttribute(M,ee),vh.fromBufferAttribute(M,te),yh.fromBufferAttribute(M,re);var ne=t.morphTargetInfluences;if(p.morphTargets&&k&&ne){Mh.set(0,0,0),Ch.set(0,0,0),wh.set(0,0,0);for(var ie=0,ae=k.length;ie<ae;ie++){var oe=ne[ie],se=k[ie];0!==oe&&(xh.fromBufferAttribute(se,ee),bh.fromBufferAttribute(se,te),_h.fromBufferAttribute(se,re),I?(Mh.addScaledVector(xh,oe),Ch.addScaledVector(bh,oe),wh.addScaledVector(_h,oe)):(Mh.addScaledVector(xh.sub(gh),oe),Ch.addScaledVector(bh.sub(vh),oe),wh.addScaledVector(_h.sub(yh),oe)))}gh.add(Mh),vh.add(Ch),yh.add(wh)}var ce=checkIntersection(t,p,h,x,gh,vh,yh,kh);if(ce){N&&(Sh.fromBufferAttribute(N,ee),Th.fromBufferAttribute(N,te),Ah.fromBufferAttribute(N,re),ce.uv=Triangle.getUV(kh,gh,vh,yh,Sh,Th,Ah,new Vector2)),V&&(Sh.fromBufferAttribute(V,ee),Th.fromBufferAttribute(V,te),Ah.fromBufferAttribute(V,re),ce.uv2=Triangle.getUV(kh,gh,vh,yh,Sh,Th,Ah,new Vector2));var ue=new Face3(ee,te,re);Triangle.getNormal(gh,vh,yh,ue.normal),ce.face=ue}return ce}Mesh.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Mesh,isMesh:!0,copy:function copy(t){return Object3D.prototype.copy.call(this,t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function updateMorphTargets(){var t,p,h,x=this.geometry;if(x.isBufferGeometry){var M=x.morphAttributes,k=Object.keys(M);if(k.length>0){var I=M[k[0]];if(void 0!==I)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,p=I.length;t<p;t++)h=I[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=t}}else{var N=x.morphTargets;void 0!==N&&N.length}},raycast:function raycast(t,p){var h,x=this.geometry,M=this.material,k=this.matrixWorld;if(void 0!==M&&(null===x.boundingSphere&&x.computeBoundingSphere(),mh.copy(x.boundingSphere),mh.applyMatrix4(k),!1!==t.ray.intersectsSphere(mh)&&(fh.getInverse(k),dh.copy(t.ray).applyMatrix4(fh),null===x.boundingBox||!1!==dh.intersectsBox(x.boundingBox))))if(x.isBufferGeometry){var I,N,V,ee,te,re,ne,ie,ae,oe=x.index,se=x.attributes.position,ce=x.morphAttributes.position,ue=x.morphTargetsRelative,le=x.attributes.uv,pe=x.attributes.uv2,he=x.groups,fe=x.drawRange;if(null!==oe)if(Array.isArray(M))for(ee=0,re=he.length;ee<re;ee++)for(ae=M[(ie=he[ee]).materialIndex],te=Math.max(ie.start,fe.start),ne=Math.min(ie.start+ie.count,fe.start+fe.count);te<ne;te+=3)I=oe.getX(te),N=oe.getX(te+1),V=oe.getX(te+2),(h=checkBufferGeometryIntersection(this,ae,t,dh,se,ce,ue,le,pe,I,N,V))&&(h.faceIndex=Math.floor(te/3),h.face.materialIndex=ie.materialIndex,p.push(h));else for(ee=Math.max(0,fe.start),re=Math.min(oe.count,fe.start+fe.count);ee<re;ee+=3)I=oe.getX(ee),N=oe.getX(ee+1),V=oe.getX(ee+2),(h=checkBufferGeometryIntersection(this,M,t,dh,se,ce,ue,le,pe,I,N,V))&&(h.faceIndex=Math.floor(ee/3),p.push(h));else if(void 0!==se)if(Array.isArray(M))for(ee=0,re=he.length;ee<re;ee++)for(ae=M[(ie=he[ee]).materialIndex],te=Math.max(ie.start,fe.start),ne=Math.min(ie.start+ie.count,fe.start+fe.count);te<ne;te+=3)(h=checkBufferGeometryIntersection(this,ae,t,dh,se,ce,ue,le,pe,I=te,N=te+1,V=te+2))&&(h.faceIndex=Math.floor(te/3),h.face.materialIndex=ie.materialIndex,p.push(h));else for(ee=Math.max(0,fe.start),re=Math.min(se.count,fe.start+fe.count);ee<re;ee+=3)(h=checkBufferGeometryIntersection(this,M,t,dh,se,ce,ue,le,pe,I=ee,N=ee+1,V=ee+2))&&(h.faceIndex=Math.floor(ee/3),p.push(h))}else if(x.isGeometry){var de,me,ge,ve,ye=Array.isArray(M),xe=x.vertices,be=x.faces,_e=x.faceVertexUvs[0];_e.length>0&&(ve=_e);for(var Me=0,Ce=be.length;Me<Ce;Me++){var we=be[Me],Se=ye?M[we.materialIndex]:M;if(void 0!==Se&&(de=xe[we.a],me=xe[we.b],ge=xe[we.c],h=checkIntersection(this,Se,t,dh,de,me,ge,kh))){if(ve&&ve[Me]){var Te=ve[Me];Sh.copy(Te[0]),Th.copy(Te[1]),Ah.copy(Te[2]),h.uv=Triangle.getUV(kh,de,me,ge,Sh,Th,Ah,new Vector2)}h.face=we,h.faceIndex=Me,p.push(h)}}}},clone:function clone(){return new this.constructor(this.geometry,this.material).copy(this)}});var Ph=0,Oh=new Matrix4,Ih=new Object3D,Lh=new Vector3;function Geometry(){Object.defineProperty(this,"id",{value:Ph+=2}),this.uuid=Yl.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Geometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Geometry,isGeometry:!0,applyMatrix4:function applyMatrix4(t){for(var p=(new Matrix3).getNormalMatrix(t),h=0,x=this.vertices.length;h<x;h++){this.vertices[h].applyMatrix4(t)}for(h=0,x=this.faces.length;h<x;h++){var M=this.faces[h];M.normal.applyMatrix3(p).normalize();for(var k=0,I=M.vertexNormals.length;k<I;k++)M.vertexNormals[k].applyMatrix3(p).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function rotateX(t){return Oh.makeRotationX(t),this.applyMatrix4(Oh),this},rotateY:function rotateY(t){return Oh.makeRotationY(t),this.applyMatrix4(Oh),this},rotateZ:function rotateZ(t){return Oh.makeRotationZ(t),this.applyMatrix4(Oh),this},translate:function translate(t,p,h){return Oh.makeTranslation(t,p,h),this.applyMatrix4(Oh),this},scale:function scale(t,p,h){return Oh.makeScale(t,p,h),this.applyMatrix4(Oh),this},lookAt:function lookAt(t){return Ih.lookAt(t),Ih.updateMatrix(),this.applyMatrix4(Ih.matrix),this},fromBufferGeometry:function fromBufferGeometry(t){var p=this,h=null!==t.index?t.index.array:void 0,x=t.attributes;if(void 0===x.position)return this;var M=x.position.array,k=void 0!==x.normal?x.normal.array:void 0,I=void 0!==x.color?x.color.array:void 0,N=void 0!==x.uv?x.uv.array:void 0,V=void 0!==x.uv2?x.uv2.array:void 0;void 0!==V&&(this.faceVertexUvs[1]=[]);for(var ee=0;ee<M.length;ee+=3)p.vertices.push((new Vector3).fromArray(M,ee)),void 0!==I&&p.colors.push((new Color).fromArray(I,ee));function addFace(t,h,x,M){var ee=void 0===I?[]:[p.colors[t].clone(),p.colors[h].clone(),p.colors[x].clone()],te=new Face3(t,h,x,void 0===k?[]:[(new Vector3).fromArray(k,3*t),(new Vector3).fromArray(k,3*h),(new Vector3).fromArray(k,3*x)],ee,M);p.faces.push(te),void 0!==N&&p.faceVertexUvs[0].push([(new Vector2).fromArray(N,2*t),(new Vector2).fromArray(N,2*h),(new Vector2).fromArray(N,2*x)]),void 0!==V&&p.faceVertexUvs[1].push([(new Vector2).fromArray(V,2*t),(new Vector2).fromArray(V,2*h),(new Vector2).fromArray(V,2*x)])}var te=t.groups;if(te.length>0)for(ee=0;ee<te.length;ee++)for(var re=te[ee],ne=re.start,ie=ne,ae=ne+re.count;ie<ae;ie+=3)void 0!==h?addFace(h[ie],h[ie+1],h[ie+2],re.materialIndex):addFace(ie,ie+1,ie+2,re.materialIndex);else if(void 0!==h)for(ee=0;ee<h.length;ee+=3)addFace(h[ee],h[ee+1],h[ee+2]);else for(ee=0;ee<M.length/3;ee+=3)addFace(ee,ee+1,ee+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Lh).negate(),this.translate(Lh.x,Lh.y,Lh.z),this},normalize:function normalize(){this.computeBoundingSphere();var t=this.boundingSphere.center,p=this.boundingSphere.radius,h=0===p?1:1/p,x=new Matrix4;return x.set(h,0,0,-h*t.x,0,h,0,-h*t.y,0,0,h,-h*t.z,0,0,0,1),this.applyMatrix4(x),this},computeFaceNormals:function computeFaceNormals(){for(var t=new Vector3,p=new Vector3,h=0,x=this.faces.length;h<x;h++){var M=this.faces[h],k=this.vertices[M.a],I=this.vertices[M.b],N=this.vertices[M.c];t.subVectors(N,I),p.subVectors(k,I),t.cross(p),t.normalize(),M.normal.copy(t)}},computeVertexNormals:function computeVertexNormals(t){var p,h,x,M,k,I;for(void 0===t&&(t=!0),I=new Array(this.vertices.length),p=0,h=this.vertices.length;p<h;p++)I[p]=new Vector3;if(t){var N,V,ee,te=new Vector3,re=new Vector3;for(x=0,M=this.faces.length;x<M;x++)k=this.faces[x],N=this.vertices[k.a],V=this.vertices[k.b],ee=this.vertices[k.c],te.subVectors(ee,V),re.subVectors(N,V),te.cross(re),I[k.a].add(te),I[k.b].add(te),I[k.c].add(te)}else for(this.computeFaceNormals(),x=0,M=this.faces.length;x<M;x++)I[(k=this.faces[x]).a].add(k.normal),I[k.b].add(k.normal),I[k.c].add(k.normal);for(p=0,h=this.vertices.length;p<h;p++)I[p].normalize();for(x=0,M=this.faces.length;x<M;x++){var ne=(k=this.faces[x]).vertexNormals;3===ne.length?(ne[0].copy(I[k.a]),ne[1].copy(I[k.b]),ne[2].copy(I[k.c])):(ne[0]=I[k.a].clone(),ne[1]=I[k.b].clone(),ne[2]=I[k.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function computeFlatVertexNormals(){var t,p,h;for(this.computeFaceNormals(),t=0,p=this.faces.length;t<p;t++){var x=(h=this.faces[t]).vertexNormals;3===x.length?(x[0].copy(h.normal),x[1].copy(h.normal),x[2].copy(h.normal)):(x[0]=h.normal.clone(),x[1]=h.normal.clone(),x[2]=h.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function computeMorphNormals(){var t,p,h,x,M;for(h=0,x=this.faces.length;h<x;h++)for((M=this.faces[h]).__originalFaceNormal?M.__originalFaceNormal.copy(M.normal):M.__originalFaceNormal=M.normal.clone(),M.__originalVertexNormals||(M.__originalVertexNormals=[]),t=0,p=M.vertexNormals.length;t<p;t++)M.__originalVertexNormals[t]?M.__originalVertexNormals[t].copy(M.vertexNormals[t]):M.__originalVertexNormals[t]=M.vertexNormals[t].clone();var k=new Geometry;for(k.faces=this.faces,t=0,p=this.morphTargets.length;t<p;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var I=this.morphNormals[t].faceNormals,N=this.morphNormals[t].vertexNormals;for(h=0,x=this.faces.length;h<x;h++)V=new Vector3,ee={a:new Vector3,b:new Vector3,c:new Vector3},I.push(V),N.push(ee)}var V,ee,te=this.morphNormals[t];for(k.vertices=this.morphTargets[t].vertices,k.computeFaceNormals(),k.computeVertexNormals(),h=0,x=this.faces.length;h<x;h++)M=this.faces[h],V=te.faceNormals[h],ee=te.vertexNormals[h],V.copy(M.normal),ee.a.copy(M.vertexNormals[0]),ee.b.copy(M.vertexNormals[1]),ee.c.copy(M.vertexNormals[2])}for(h=0,x=this.faces.length;h<x;h++)(M=this.faces[h]).normal=M.__originalFaceNormal,M.vertexNormals=M.__originalVertexNormals},computeBoundingBox:function computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function merge(t,p,h){if(t&&t.isGeometry){var x,M=this.vertices.length,k=this.vertices,I=t.vertices,N=this.faces,V=t.faces,ee=this.colors,te=t.colors;void 0===h&&(h=0),void 0!==p&&(x=(new Matrix3).getNormalMatrix(p));for(var re=0,ne=I.length;re<ne;re++){var ie=I[re].clone();void 0!==p&&ie.applyMatrix4(p),k.push(ie)}for(re=0,ne=te.length;re<ne;re++)ee.push(te[re].clone());for(re=0,ne=V.length;re<ne;re++){var ae,oe,se,ce=V[re],ue=ce.vertexNormals,le=ce.vertexColors;(ae=new Face3(ce.a+M,ce.b+M,ce.c+M)).normal.copy(ce.normal),void 0!==x&&ae.normal.applyMatrix3(x).normalize();for(var pe=0,he=ue.length;pe<he;pe++)oe=ue[pe].clone(),void 0!==x&&oe.applyMatrix3(x).normalize(),ae.vertexNormals.push(oe);ae.color.copy(ce.color);for(pe=0,he=le.length;pe<he;pe++)se=le[pe],ae.vertexColors.push(se.clone());ae.materialIndex=ce.materialIndex+h,N.push(ae)}for(re=0,ne=t.faceVertexUvs.length;re<ne;re++){var fe=t.faceVertexUvs[re];void 0===this.faceVertexUvs[re]&&(this.faceVertexUvs[re]=[]);for(pe=0,he=fe.length;pe<he;pe++){for(var de=fe[pe],me=[],ge=0,ve=de.length;ge<ve;ge++)me.push(de[ge].clone());this.faceVertexUvs[re].push(me)}}}},mergeMesh:function mergeMesh(t){t&&t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix))},mergeVertices:function mergeVertices(){var t,p,h,x,M,k,I,N,V={},ee=[],te=[],re=Math.pow(10,4);for(h=0,x=this.vertices.length;h<x;h++)t=this.vertices[h],void 0===V[p=Math.round(t.x*re)+"_"+Math.round(t.y*re)+"_"+Math.round(t.z*re)]?(V[p]=h,ee.push(this.vertices[h]),te[h]=ee.length-1):te[h]=te[V[p]];var ne=[];for(h=0,x=this.faces.length;h<x;h++){(M=this.faces[h]).a=te[M.a],M.b=te[M.b],M.c=te[M.c],k=[M.a,M.b,M.c];for(var ie=0;ie<3;ie++)if(k[ie]===k[(ie+1)%3]){ne.push(h);break}}for(h=ne.length-1;h>=0;h--){var ae=ne[h];for(this.faces.splice(ae,1),I=0,N=this.faceVertexUvs.length;I<N;I++)this.faceVertexUvs[I].splice(ae,1)}var oe=this.vertices.length-ee.length;return this.vertices=ee,oe},setFromPoints:function setFromPoints(t){this.vertices=[];for(var p=0,h=t.length;p<h;p++){var x=t[p];this.vertices.push(new Vector3(x.x,x.y,x.z||0))}return this},sortFacesByMaterialIndex:function sortFacesByMaterialIndex(){for(var t=this.faces,p=t.length,h=0;h<p;h++)t[h]._id=h;t.sort((function materialIndexSort(t,p){return t.materialIndex-p.materialIndex}));var x,M,k=this.faceVertexUvs[0],I=this.faceVertexUvs[1];k&&k.length===p&&(x=[]),I&&I.length===p&&(M=[]);for(h=0;h<p;h++){var N=t[h]._id;x&&x.push(k[N]),M&&M.push(I[N])}x&&(this.faceVertexUvs[0]=x),M&&(this.faceVertexUvs[1]=M)},toJSON:function toJSON(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var p=this.parameters;for(var h in p)void 0!==p[h]&&(t[h]=p[h]);return t}for(var x=[],M=0;M<this.vertices.length;M++){var k=this.vertices[M];x.push(k.x,k.y,k.z)}var I=[],N=[],V={},ee=[],te={},re=[],ne={};for(M=0;M<this.faces.length;M++){var ie=this.faces[M],ae=void 0!==this.faceVertexUvs[0][M],oe=ie.normal.length()>0,se=ie.vertexNormals.length>0,ce=1!==ie.color.r||1!==ie.color.g||1!==ie.color.b,ue=ie.vertexColors.length>0,le=0;if(le=setBit(le,0,0),le=setBit(le,1,!0),le=setBit(le,2,!1),le=setBit(le,3,ae),le=setBit(le,4,oe),le=setBit(le,5,se),le=setBit(le,6,ce),le=setBit(le,7,ue),I.push(le),I.push(ie.a,ie.b,ie.c),I.push(ie.materialIndex),ae){var pe=this.faceVertexUvs[0][M];I.push(getUvIndex(pe[0]),getUvIndex(pe[1]),getUvIndex(pe[2]))}if(oe&&I.push(getNormalIndex(ie.normal)),se){var he=ie.vertexNormals;I.push(getNormalIndex(he[0]),getNormalIndex(he[1]),getNormalIndex(he[2]))}if(ce&&I.push(getColorIndex(ie.color)),ue){var fe=ie.vertexColors;I.push(getColorIndex(fe[0]),getColorIndex(fe[1]),getColorIndex(fe[2]))}}function setBit(t,p,h){return h?t|1<<p:t&~(1<<p)}function getNormalIndex(t){var p=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==V[p]||(V[p]=N.length/3,N.push(t.x,t.y,t.z)),V[p]}function getColorIndex(t){var p=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==te[p]||(te[p]=ee.length,ee.push(t.getHex())),te[p]}function getUvIndex(t){var p=t.x.toString()+t.y.toString();return void 0!==ne[p]||(ne[p]=re.length/2,re.push(t.x,t.y)),ne[p]}return t.data={},t.data.vertices=x,t.data.normals=N,ee.length>0&&(t.data.colors=ee),re.length>0&&(t.data.uvs=[re]),t.data.faces=I,t},clone:function clone(){return(new Geometry).copy(this)},copy:function copy(t){var p,h,x,M,k,I;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var N=t.vertices;for(p=0,h=N.length;p<h;p++)this.vertices.push(N[p].clone());var V=t.colors;for(p=0,h=V.length;p<h;p++)this.colors.push(V[p].clone());var ee=t.faces;for(p=0,h=ee.length;p<h;p++)this.faces.push(ee[p].clone());for(p=0,h=t.faceVertexUvs.length;p<h;p++){var te=t.faceVertexUvs[p];for(void 0===this.faceVertexUvs[p]&&(this.faceVertexUvs[p]=[]),x=0,M=te.length;x<M;x++){var re=te[x],ne=[];for(k=0,I=re.length;k<I;k++){var ie=re[k];ne.push(ie.clone())}this.faceVertexUvs[p].push(ne)}}var ae=t.morphTargets;for(p=0,h=ae.length;p<h;p++){var oe={};if(oe.name=ae[p].name,void 0!==ae[p].vertices)for(oe.vertices=[],x=0,M=ae[p].vertices.length;x<M;x++)oe.vertices.push(ae[p].vertices[x].clone());if(void 0!==ae[p].normals)for(oe.normals=[],x=0,M=ae[p].normals.length;x<M;x++)oe.normals.push(ae[p].normals[x].clone());this.morphTargets.push(oe)}var se=t.morphNormals;for(p=0,h=se.length;p<h;p++){var ce={};if(void 0!==se[p].vertexNormals)for(ce.vertexNormals=[],x=0,M=se[p].vertexNormals.length;x<M;x++){var ue=se[p].vertexNormals[x],le={};le.a=ue.a.clone(),le.b=ue.b.clone(),le.c=ue.c.clone(),ce.vertexNormals.push(le)}if(void 0!==se[p].faceNormals)for(ce.faceNormals=[],x=0,M=se[p].faceNormals.length;x<M;x++)ce.faceNormals.push(se[p].faceNormals[x].clone());this.morphNormals.push(ce)}var pe=t.skinWeights;for(p=0,h=pe.length;p<h;p++)this.skinWeights.push(pe[p].clone());var he=t.skinIndices;for(p=0,h=he.length;p<h;p++)this.skinIndices.push(he[p].clone());var fe=t.lineDistances;for(p=0,h=fe.length;p<h;p++)this.lineDistances.push(fe[p]);var de=t.boundingBox;null!==de&&(this.boundingBox=de.clone());var me=t.boundingSphere;return null!==me&&(this.boundingSphere=me.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function dispose(){this.dispatchEvent({type:"dispose"})}});var Eh=function(t){_inherits$1(BoxGeometry,t);var p=_createSuper$1(BoxGeometry);function BoxGeometry(t,h,x,M,k,I){var N;return _classCallCheck$1(this,BoxGeometry),(N=p.call(this)).type="BoxGeometry",N.parameters={width:t,height:h,depth:x,widthSegments:M,heightSegments:k,depthSegments:I},N.fromBufferGeometry(new Rh(t,h,x,M,k,I)),N.mergeVertices(),N}return _createClass$1(BoxGeometry)}(Geometry),Rh=function(t){_inherits$1(BoxBufferGeometry,t);var p=_createSuper$1(BoxBufferGeometry);function BoxBufferGeometry(t,h,x,M,k,I){var N;_classCallCheck$1(this,BoxBufferGeometry),(N=p.call(this)).type="BoxBufferGeometry",N.parameters={width:t,height:h,depth:x,widthSegments:M,heightSegments:k,depthSegments:I};var V=_assertThisInitialized$1(N);t=t||1,h=h||1,x=x||1,M=Math.floor(M)||1,k=Math.floor(k)||1,I=Math.floor(I)||1;var ee=[],te=[],re=[],ne=[],ie=0,ae=0;function buildPlane(t,p,h,x,M,k,I,N,oe,se,ce){var ue,le,pe=k/oe,he=I/se,fe=k/2,de=I/2,me=N/2,ge=oe+1,ve=se+1,ye=0,xe=0,be=new Vector3;for(le=0;le<ve;le++){var _e=le*he-de;for(ue=0;ue<ge;ue++){var Me=ue*pe-fe;be[t]=Me*x,be[p]=_e*M,be[h]=me,te.push(be.x,be.y,be.z),be[t]=0,be[p]=0,be[h]=N>0?1:-1,re.push(be.x,be.y,be.z),ne.push(ue/oe),ne.push(1-le/se),ye+=1}}for(le=0;le<se;le++)for(ue=0;ue<oe;ue++){var Ce=ie+ue+ge*le,we=ie+ue+ge*(le+1),Se=ie+(ue+1)+ge*(le+1),Te=ie+(ue+1)+ge*le;ee.push(Ce,we,Te),ee.push(we,Se,Te),xe+=6}V.addGroup(ae,xe,ce),ae+=xe,ie+=ye}return buildPlane("z","y","x",-1,-1,x,h,t,I,k,0),buildPlane("z","y","x",1,-1,x,h,-t,I,k,1),buildPlane("x","z","y",1,1,t,x,h,M,I,2),buildPlane("x","z","y",1,-1,t,x,-h,M,I,3),buildPlane("x","y","z",1,-1,t,h,x,M,k,4),buildPlane("x","y","z",-1,-1,t,h,-x,M,k,5),N.setIndex(ee),N.setAttribute("position",new Float32BufferAttribute(te,3)),N.setAttribute("normal",new Float32BufferAttribute(re,3)),N.setAttribute("uv",new Float32BufferAttribute(ne,2)),N}return _createClass$1(BoxBufferGeometry)}(BufferGeometry);function cloneUniforms(t){var p={};for(var h in t)for(var x in p[h]={},t[h]){var M=t[h][x];M&&(M.isColor||M.isMatrix3||M.isMatrix4||M.isVector2||M.isVector3||M.isVector4||M.isTexture)?p[h][x]=M.clone():Array.isArray(M)?p[h][x]=M.slice():p[h][x]=M}return p}function mergeUniforms(t){for(var p={},h=0;h<t.length;h++){var x=cloneUniforms(t[h]);for(var M in x)p[M]=x[M]}return p}var Bh={clone:cloneUniforms,merge:mergeUniforms},Nh="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",Gh="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";function ShaderMaterial(t){Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=Nh,this.fragmentShader=Gh,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(t.attributes,this.setValues(t))}function Camera(){Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4}function PerspectiveCamera(t,p,h,x){Camera.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==h?h:.1,this.far=void 0!==x?x:2e3,this.focus=10,this.aspect=void 0!==p?p:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}ShaderMaterial.prototype=Object.create(Material.prototype),ShaderMaterial.prototype.constructor=ShaderMaterial,ShaderMaterial.prototype.isShaderMaterial=!0,ShaderMaterial.prototype.copy=function(t){return Material.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=cloneUniforms(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},ShaderMaterial.prototype.toJSON=function(t){var p=Material.prototype.toJSON.call(this,t);for(var h in p.uniforms={},this.uniforms){var x=this.uniforms[h].value;x&&x.isTexture?p.uniforms[h]={type:"t",value:x.toJSON(t).uuid}:x&&x.isColor?p.uniforms[h]={type:"c",value:x.getHex()}:x&&x.isVector2?p.uniforms[h]={type:"v2",value:x.toArray()}:x&&x.isVector3?p.uniforms[h]={type:"v3",value:x.toArray()}:x&&x.isVector4?p.uniforms[h]={type:"v4",value:x.toArray()}:x&&x.isMatrix3?p.uniforms[h]={type:"m3",value:x.toArray()}:x&&x.isMatrix4?p.uniforms[h]={type:"m4",value:x.toArray()}:p.uniforms[h]={value:x}}Object.keys(this.defines).length>0&&(p.defines=this.defines),p.vertexShader=this.vertexShader,p.fragmentShader=this.fragmentShader;var M={};for(var k in this.extensions)!0===this.extensions[k]&&(M[k]=!0);return Object.keys(M).length>0&&(p.extensions=M),p},Camera.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Camera,isCamera:!0,copy:function copy(t,p){return Object3D.prototype.copy.call(this,t,p),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function getWorldDirection(t){void 0===t&&(t=new Vector3),this.updateMatrixWorld(!0);var p=this.matrixWorld.elements;return t.set(-p[8],-p[9],-p[10]).normalize()},updateMatrixWorld:function updateMatrixWorld(t){Object3D.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function updateWorldMatrix(t,p){Object3D.prototype.updateWorldMatrix.call(this,t,p),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function clone(){return(new this.constructor).copy(this)}}),PerspectiveCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:PerspectiveCamera,isPerspectiveCamera:!0,copy:function copy(t,p){return Camera.prototype.copy.call(this,t,p),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function setFocalLength(t){var p=.5*this.getFilmHeight()/t;this.fov=2*Yl.RAD2DEG*Math.atan(p),this.updateProjectionMatrix()},getFocalLength:function getFocalLength(){var t=Math.tan(.5*Yl.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function getEffectiveFOV(){return 2*Yl.RAD2DEG*Math.atan(Math.tan(.5*Yl.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function setViewOffset(t,p,h,x,M,k){this.aspect=t/p,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=p,this.view.offsetX=h,this.view.offsetY=x,this.view.width=M,this.view.height=k,this.updateProjectionMatrix()},clearViewOffset:function clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function updateProjectionMatrix(){var t=this.near,p=t*Math.tan(.5*Yl.DEG2RAD*this.fov)/this.zoom,h=2*p,x=this.aspect*h,M=-.5*x,k=this.view;if(null!==this.view&&this.view.enabled){var I=k.fullWidth,N=k.fullHeight;M+=k.offsetX*x/I,p-=k.offsetY*h/N,x*=k.width/I,h*=k.height/N}var V=this.filmOffset;0!==V&&(M+=t*V/this.getFilmWidth()),this.projectionMatrix.makePerspective(M,M+x,p,p-h,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function toJSON(t){var p=Object3D.prototype.toJSON.call(this,t);return p.object.fov=this.fov,p.object.zoom=this.zoom,p.object.near=this.near,p.object.far=this.far,p.object.focus=this.focus,p.object.aspect=this.aspect,null!==this.view&&(p.object.view=Object.assign({},this.view)),p.object.filmGauge=this.filmGauge,p.object.filmOffset=this.filmOffset,p}});var Fh=90;function CubeCamera(t,p,h,x){Object3D.call(this),this.type="CubeCamera";var M=new PerspectiveCamera(Fh,1,t,p);M.up.set(0,-1,0),M.lookAt(new Vector3(1,0,0)),this.add(M);var k=new PerspectiveCamera(Fh,1,t,p);k.up.set(0,-1,0),k.lookAt(new Vector3(-1,0,0)),this.add(k);var I=new PerspectiveCamera(Fh,1,t,p);I.up.set(0,0,1),I.lookAt(new Vector3(0,1,0)),this.add(I);var N=new PerspectiveCamera(Fh,1,t,p);N.up.set(0,0,-1),N.lookAt(new Vector3(0,-1,0)),this.add(N);var V=new PerspectiveCamera(Fh,1,t,p);V.up.set(0,-1,0),V.lookAt(new Vector3(0,0,1)),this.add(V);var ee=new PerspectiveCamera(Fh,1,t,p);ee.up.set(0,-1,0),ee.lookAt(new Vector3(0,0,-1)),this.add(ee),x=x||{format:Fu,magFilter:Cu,minFilter:Cu},this.renderTarget=new WebGLCubeRenderTarget(h,x),this.renderTarget.texture.name="CubeCamera",this.update=function(t,p){null===this.parent&&this.updateMatrixWorld();var h=t.getRenderTarget(),x=this.renderTarget,te=x.texture.generateMipmaps;x.texture.generateMipmaps=!1,t.setRenderTarget(x,0),t.render(p,M),t.setRenderTarget(x,1),t.render(p,k),t.setRenderTarget(x,2),t.render(p,I),t.setRenderTarget(x,3),t.render(p,N),t.setRenderTarget(x,4),t.render(p,V),x.texture.generateMipmaps=te,t.setRenderTarget(x,5),t.render(p,ee),t.setRenderTarget(h)},this.clear=function(t,p,h,x){for(var M=t.getRenderTarget(),k=this.renderTarget,I=0;I<6;I++)t.setRenderTarget(k,I),t.clear(p,h,x);t.setRenderTarget(M)}}function WebGLCubeRenderTarget(t,p,h){Number.isInteger(p)&&(p=h),WebGLRenderTarget.call(this,t,t,p)}function DataTexture(t,p,h,x,M,k,I,N,V,ee,te,re){Texture.call(this,null,k,I,N,V,ee,x,M,te,re),this.image={data:t||null,width:p||1,height:h||1},this.magFilter=void 0!==V?V:bu,this.minFilter=void 0!==ee?ee:bu,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}CubeCamera.prototype=Object.create(Object3D.prototype),CubeCamera.prototype.constructor=CubeCamera,WebGLCubeRenderTarget.prototype=Object.create(WebGLRenderTarget.prototype),WebGLCubeRenderTarget.prototype.constructor=WebGLCubeRenderTarget,WebGLCubeRenderTarget.prototype.isWebGLCubeRenderTarget=!0,WebGLCubeRenderTarget.prototype.fromEquirectangularTexture=function(t,p){this.texture.type=p.type,this.texture.format=p.format,this.texture.encoding=p.encoding;var h=new Scene,x={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","\tvWorldDirection = transformDirection( position, modelMatrix );","\t#include <begin_vertex>","\t#include <project_vertex>","}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#define RECIPROCAL_PI 0.31830988618","#define RECIPROCAL_PI2 0.15915494","void main() {","\tvec3 direction = normalize( vWorldDirection );","\tvec2 sampleUV;","\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;","\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;","\tgl_FragColor = texture2D( tEquirect, sampleUV );","}"].join("\n")},M=new ShaderMaterial({type:"CubemapFromEquirect",uniforms:cloneUniforms(x.uniforms),vertexShader:x.vertexShader,fragmentShader:x.fragmentShader,side:_c,blending:wc});M.uniforms.tEquirect.value=p;var k=new Mesh(new Rh(5,5,5),M);h.add(k);var I=new CubeCamera(1,10,1);return I.renderTarget=this,I.renderTarget.texture.name="CubeCameraTexture",I.update(t,h),k.geometry.dispose(),k.material.dispose(),this},DataTexture.prototype=Object.create(Texture.prototype),DataTexture.prototype.constructor=DataTexture,DataTexture.prototype.isDataTexture=!0;var Vh=new Sphere,Uh=new Vector3;function Frustum(t,p,h,x,M,k){this.planes=[void 0!==t?t:new Plane,void 0!==p?p:new Plane,void 0!==h?h:new Plane,void 0!==x?x:new Plane,void 0!==M?M:new Plane,void 0!==k?k:new Plane]}Object.assign(Frustum.prototype,{set:function set(t,p,h,x,M,k){var I=this.planes;return I[0].copy(t),I[1].copy(p),I[2].copy(h),I[3].copy(x),I[4].copy(M),I[5].copy(k),this},clone:function clone(){return(new this.constructor).copy(this)},copy:function copy(t){for(var p=this.planes,h=0;h<6;h++)p[h].copy(t.planes[h]);return this},setFromProjectionMatrix:function setFromProjectionMatrix(t){var p=this.planes,h=t.elements,x=h[0],M=h[1],k=h[2],I=h[3],N=h[4],V=h[5],ee=h[6],te=h[7],re=h[8],ne=h[9],ie=h[10],ae=h[11],oe=h[12],se=h[13],ce=h[14],ue=h[15];return p[0].setComponents(I-x,te-N,ae-re,ue-oe).normalize(),p[1].setComponents(I+x,te+N,ae+re,ue+oe).normalize(),p[2].setComponents(I+M,te+V,ae+ne,ue+se).normalize(),p[3].setComponents(I-M,te-V,ae-ne,ue-se).normalize(),p[4].setComponents(I-k,te-ee,ae-ie,ue-ce).normalize(),p[5].setComponents(I+k,te+ee,ae+ie,ue+ce).normalize(),this},intersectsObject:function intersectsObject(t){var p=t.geometry;return null===p.boundingSphere&&p.computeBoundingSphere(),Vh.copy(p.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Vh)},intersectsSprite:function intersectsSprite(t){return Vh.center.set(0,0,0),Vh.radius=.7071067811865476,Vh.applyMatrix4(t.matrixWorld),this.intersectsSphere(Vh)},intersectsSphere:function intersectsSphere(t){for(var p=this.planes,h=t.center,x=-t.radius,M=0;M<6;M++){if(p[M].distanceToPoint(h)<x)return!1}return!0},intersectsBox:function intersectsBox(t){for(var p=this.planes,h=0;h<6;h++){var x=p[h];if(Uh.x=x.normal.x>0?t.max.x:t.min.x,Uh.y=x.normal.y>0?t.max.y:t.min.y,Uh.z=x.normal.z>0?t.max.z:t.min.z,x.distanceToPoint(Uh)<0)return!1}return!0},containsPoint:function containsPoint(t){for(var p=this.planes,h=0;h<6;h++)if(p[h].distanceToPoint(t)<0)return!1;return!0}});var jh={common:{diffuse:{value:new Color(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Matrix3},uv2Transform:{value:new Matrix3},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Color(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(15658734)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}}};function WebGLAnimation(){var t=null,p=!1,h=null;function onAnimationFrame(x,M){!1!==p&&(h(x,M),t.requestAnimationFrame(onAnimationFrame))}return{start:function start(){!0!==p&&null!==h&&(t.requestAnimationFrame(onAnimationFrame),p=!0)},stop:function stop(){p=!1},setAnimationLoop:function setAnimationLoop(t){h=t},setContext:function setContext(p){t=p}}}function WebGLAttributes(t,p){var h=p.isWebGL2,x=new WeakMap;return{get:function get(t){return t.isInterleavedBufferAttribute&&(t=t.data),x.get(t)},remove:function remove(p){p.isInterleavedBufferAttribute&&(p=p.data);var h=x.get(p);h&&(t.deleteBuffer(h.buffer),x.delete(p))},update:function update(p,M){p.isInterleavedBufferAttribute&&(p=p.data);var k=x.get(p);void 0===k?x.set(p,function createBuffer(p,h){var x=p.array,M=p.usage,k=t.createBuffer();t.bindBuffer(h,k),t.bufferData(h,x,M),p.onUploadCallback();var I=5126;return x instanceof Float32Array?I=5126:x instanceof Float64Array||(x instanceof Uint16Array?I=5123:x instanceof Int16Array?I=5122:x instanceof Uint32Array?I=5125:x instanceof Int32Array?I=5124:x instanceof Int8Array?I=5120:x instanceof Uint8Array&&(I=5121)),{buffer:k,type:I,bytesPerElement:x.BYTES_PER_ELEMENT,version:p.version}}(p,M)):k.version<p.version&&(!function updateBuffer(p,x,M){var k=x.array,I=x.updateRange;t.bindBuffer(M,p),-1===I.count?t.bufferSubData(M,0,k):(h?t.bufferSubData(M,I.offset*k.BYTES_PER_ELEMENT,k,I.offset,I.count):t.bufferSubData(M,I.offset*k.BYTES_PER_ELEMENT,k.subarray(I.offset,I.offset+I.count)),I.count=-1)}(k.buffer,p,M),k.version=p.version)}}}function PlaneGeometry(t,p,h,x){Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:p,widthSegments:h,heightSegments:x},this.fromBufferGeometry(new PlaneBufferGeometry(t,p,h,x)),this.mergeVertices()}function PlaneBufferGeometry(t,p,h,x){BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:p,widthSegments:h,heightSegments:x};var M,k,I=(t=t||1)/2,N=(p=p||1)/2,V=Math.floor(h)||1,ee=Math.floor(x)||1,te=V+1,re=ee+1,ne=t/V,ie=p/ee,ae=[],oe=[],se=[],ce=[];for(k=0;k<re;k++){var ue=k*ie-N;for(M=0;M<te;M++){var le=M*ne-I;oe.push(le,-ue,0),se.push(0,0,1),ce.push(M/V),ce.push(1-k/ee)}}for(k=0;k<ee;k++)for(M=0;M<V;M++){var pe=M+te*k,he=M+te*(k+1),fe=M+1+te*(k+1),de=M+1+te*k;ae.push(pe,he,de),ae.push(he,fe,de)}this.setIndex(ae),this.setAttribute("position",new Float32BufferAttribute(oe,3)),this.setAttribute("normal",new Float32BufferAttribute(se,3)),this.setAttribute("uv",new Float32BufferAttribute(ce,2))}PlaneGeometry.prototype=Object.create(Geometry.prototype),PlaneGeometry.prototype.constructor=PlaneGeometry,PlaneBufferGeometry.prototype=Object.create(BufferGeometry.prototype),PlaneBufferGeometry.prototype.constructor=PlaneBufferGeometry;var Wh={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n  return m[ 2 ][ 3 ] == - 1.0;\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_maxMipLevel 8.0\n#define cubeUV_minMipLevel 4.0\n#define cubeUV_maxTileSize 256.0\n#define cubeUV_minTileSize 16.0\nfloat getFace(vec3 direction) {\n    vec3 absDirection = abs(direction);\n    float face = -1.0;\n    if (absDirection.x > absDirection.z) {\n      if (absDirection.x > absDirection.y)\n        face = direction.x > 0.0 ? 0.0 : 3.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    } else {\n      if (absDirection.z > absDirection.y)\n        face = direction.z > 0.0 ? 2.0 : 5.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    }\n    return face;\n}\nvec2 getUV(vec3 direction, float face) {\n    vec2 uv;\n    if (face == 0.0) {\n      uv = vec2(-direction.z, direction.y) / abs(direction.x);\n    } else if (face == 1.0) {\n      uv = vec2(direction.x, -direction.z) / abs(direction.y);\n    } else if (face == 2.0) {\n      uv = direction.xy / abs(direction.z);\n    } else if (face == 3.0) {\n      uv = vec2(direction.z, direction.y) / abs(direction.x);\n    } else if (face == 4.0) {\n      uv = direction.xz / abs(direction.y);\n    } else {\n      uv = vec2(-direction.x, direction.y) / abs(direction.z);\n    }\n    return 0.5 * (uv + 1.0);\n}\nvec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n  float face = getFace(direction);\n  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n  mipInt = max(mipInt, cubeUV_minMipLevel);\n  float faceSize = exp2(mipInt);\n  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n  vec2 uv = getUV(direction, face) * (faceSize - 1.0);\n  vec2 f = fract(uv);\n  uv += 0.5 - f;\n  if (face > 2.0) {\n    uv.y += faceSize;\n    face -= 3.0;\n  }\n  uv.x += face * faceSize;\n  if(mipInt < cubeUV_maxMipLevel){\n    uv.y += 2.0 * cubeUV_maxTileSize;\n  }\n  uv.y += filterInt * 2.0 * cubeUV_minTileSize;\n  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n  uv *= texelSize;\n  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x += texelSize;\n  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.y += texelSize;\n  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x -= texelSize;\n  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  vec3 tm = mix(tl, tr, f.x);\n  vec3 bm = mix(bl, br, f.x);\n  return mix(tm, bm, f.y);\n}\n#define r0 1.0\n#define v0 0.339\n#define m0 -2.0\n#define r1 0.8\n#define v1 0.276\n#define m1 -1.0\n#define r4 0.4\n#define v4 0.046\n#define m4 2.0\n#define r5 0.305\n#define v5 0.016\n#define m5 3.0\n#define r6 0.21\n#define v6 0.0038\n#define m6 4.0\nfloat roughnessToMip(float roughness) {\n  float mip = 0.0;\n  if (roughness >= r1) {\n    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n  } else if (roughness >= r4) {\n    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n  } else if (roughness >= r5) {\n    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n  } else if (roughness >= r6) {\n    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n  } else {\n    mip = -2.0 * log2(1.16 * roughness);  }\n  return mip;\n}\nvec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {\n  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);\n  float mipF = fract(mip);\n  float mipInt = floor(mip);\n  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);\n  if (mipF == 0.0) {\n    return vec4(color0, 1.0);\n  } else {\n    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);\n    return vec4(mix(color0, color1, mipF), 1.0);\n  }\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\ttransformedNormal = mat3( instanceMatrix ) * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\t\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t}  else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) { \n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = saturate( clearcoat );\tmaterial.clearcoatRoughness = max( clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( pointLight.shadow, directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( spotLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( directionalLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_normalmap_pars_fragment:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= all( bvec2( directionalLight.shadow, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= all( bvec2( spotLight.shadow, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= all( bvec2( pointLight.shadow, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},zh={basic:{uniforms:mergeUniforms([jh.common,jh.specularmap,jh.envmap,jh.aomap,jh.lightmap,jh.fog]),vertexShader:Wh.meshbasic_vert,fragmentShader:Wh.meshbasic_frag},lambert:{uniforms:mergeUniforms([jh.common,jh.specularmap,jh.envmap,jh.aomap,jh.lightmap,jh.emissivemap,jh.fog,jh.lights,{emissive:{value:new Color(0)}}]),vertexShader:Wh.meshlambert_vert,fragmentShader:Wh.meshlambert_frag},phong:{uniforms:mergeUniforms([jh.common,jh.specularmap,jh.envmap,jh.aomap,jh.lightmap,jh.emissivemap,jh.bumpmap,jh.normalmap,jh.displacementmap,jh.fog,jh.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:Wh.meshphong_vert,fragmentShader:Wh.meshphong_frag},standard:{uniforms:mergeUniforms([jh.common,jh.envmap,jh.aomap,jh.lightmap,jh.emissivemap,jh.bumpmap,jh.normalmap,jh.displacementmap,jh.roughnessmap,jh.metalnessmap,jh.fog,jh.lights,{emissive:{value:new Color(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Wh.meshphysical_vert,fragmentShader:Wh.meshphysical_frag},toon:{uniforms:mergeUniforms([jh.common,jh.specularmap,jh.aomap,jh.lightmap,jh.emissivemap,jh.bumpmap,jh.normalmap,jh.displacementmap,jh.gradientmap,jh.fog,jh.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:Wh.meshtoon_vert,fragmentShader:Wh.meshtoon_frag},matcap:{uniforms:mergeUniforms([jh.common,jh.bumpmap,jh.normalmap,jh.displacementmap,jh.fog,{matcap:{value:null}}]),vertexShader:Wh.meshmatcap_vert,fragmentShader:Wh.meshmatcap_frag},points:{uniforms:mergeUniforms([jh.points,jh.fog]),vertexShader:Wh.points_vert,fragmentShader:Wh.points_frag},dashed:{uniforms:mergeUniforms([jh.common,jh.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Wh.linedashed_vert,fragmentShader:Wh.linedashed_frag},depth:{uniforms:mergeUniforms([jh.common,jh.displacementmap]),vertexShader:Wh.depth_vert,fragmentShader:Wh.depth_frag},normal:{uniforms:mergeUniforms([jh.common,jh.bumpmap,jh.normalmap,jh.displacementmap,{opacity:{value:1}}]),vertexShader:Wh.normal_vert,fragmentShader:Wh.normal_frag},sprite:{uniforms:mergeUniforms([jh.sprite,jh.fog]),vertexShader:Wh.sprite_vert,fragmentShader:Wh.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null}},vertexShader:Wh.background_vert,fragmentShader:Wh.background_frag},cube:{uniforms:mergeUniforms([jh.envmap,{opacity:{value:1}}]),vertexShader:Wh.cube_vert,fragmentShader:Wh.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Wh.equirect_vert,fragmentShader:Wh.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([jh.common,jh.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Wh.distanceRGBA_vert,fragmentShader:Wh.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([jh.lights,jh.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:Wh.shadow_vert,fragmentShader:Wh.shadow_frag}};function WebGLBackground(t,p,h,x){var M,k,I=new Color(0),N=0,V=null,ee=0,te=null;function setClear(t,h){p.buffers.color.setClear(t.r,t.g,t.b,h,x)}return{getClearColor:function getClearColor(){return I},setClearColor:function setClearColor(t,p){I.set(t),setClear(I,N=void 0!==p?p:1)},getClearAlpha:function getClearAlpha(){return N},setClearAlpha:function setClearAlpha(t){setClear(I,N=t)},render:function render(p,x,re,ne){var ie=x.background,ae=t.xr,oe=ae.getSession&&ae.getSession();if(oe&&"additive"===oe.environmentBlendMode&&(ie=null),null===ie?setClear(I,N):ie&&ie.isColor&&(setClear(ie,1),ne=!0),(t.autoClear||ne)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),ie&&(ie.isCubeTexture||ie.isWebGLCubeRenderTarget||ie.mapping===mu)){void 0===k&&((k=new Mesh(new Rh(1,1,1),new ShaderMaterial({type:"BackgroundCubeMaterial",uniforms:cloneUniforms(zh.cube.uniforms),vertexShader:zh.cube.vertexShader,fragmentShader:zh.cube.fragmentShader,side:_c,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),k.geometry.deleteAttribute("uv"),k.onBeforeRender=function(t,p,h){this.matrixWorld.copyPosition(h.matrixWorld)},Object.defineProperty(k.material,"envMap",{get:function get(){return this.uniforms.envMap.value}}),h.update(k));var se=ie.isWebGLCubeRenderTarget?ie.texture:ie;k.material.uniforms.envMap.value=se,k.material.uniforms.flipEnvMap.value=se.isCubeTexture?-1:1,V===ie&&ee===se.version&&te===t.toneMapping||(k.material.needsUpdate=!0,V=ie,ee=se.version,te=t.toneMapping),p.unshift(k,k.geometry,k.material,0,0,null)}else ie&&ie.isTexture&&(void 0===M&&((M=new Mesh(new PlaneBufferGeometry(2,2),new ShaderMaterial({type:"BackgroundMaterial",uniforms:cloneUniforms(zh.background.uniforms),vertexShader:zh.background.vertexShader,fragmentShader:zh.background.fragmentShader,side:bc,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(M.material,"map",{get:function get(){return this.uniforms.t2D.value}}),h.update(M)),M.material.uniforms.t2D.value=ie,!0===ie.matrixAutoUpdate&&ie.updateMatrix(),M.material.uniforms.uvTransform.value.copy(ie.matrix),V===ie&&ee===ie.version&&te===t.toneMapping||(M.material.needsUpdate=!0,V=ie,ee=ie.version,te=t.toneMapping),p.unshift(M,M.geometry,M.material,0,0,null))}}}function WebGLBufferRenderer(t,p,h,x){var M,k=x.isWebGL2;this.setMode=function setMode(t){M=t},this.render=function render(p,x){t.drawArrays(M,p,x),h.update(x,M)},this.renderInstances=function renderInstances(x,I,N,V){if(0!==V){var ee,te;if(k)ee=t,te="drawArraysInstanced";else if(te="drawArraysInstancedANGLE",null===(ee=p.get("ANGLE_instanced_arrays")))return;ee[te](M,I,N,V),h.update(N,M,V)}}}function WebGLCapabilities(t,p,h){var x;function getMaxPrecision(p){if("highp"===p){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";p="mediump"}return"mediump"===p&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var M="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext,k=void 0!==h.precision?h.precision:"highp",I=getMaxPrecision(k);I!==k&&(k=I);var N=!0===h.logarithmicDepthBuffer,V=t.getParameter(34930),ee=t.getParameter(35660),te=t.getParameter(3379),re=t.getParameter(34076),ne=t.getParameter(34921),ie=t.getParameter(36347),ae=t.getParameter(36348),oe=t.getParameter(36349),se=ee>0,ce=M||!!p.get("OES_texture_float");return{isWebGL2:M,getMaxAnisotropy:function getMaxAnisotropy(){if(void 0!==x)return x;var h=p.get("EXT_texture_filter_anisotropic");return x=null!==h?t.getParameter(h.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:getMaxPrecision,precision:k,logarithmicDepthBuffer:N,maxTextures:V,maxVertexTextures:ee,maxTextureSize:te,maxCubemapSize:re,maxAttributes:ne,maxVertexUniforms:ie,maxVaryings:ae,maxFragmentUniforms:oe,vertexTextures:se,floatFragmentTextures:ce,floatVertexTextures:se&&ce,maxSamples:M?t.getParameter(36183):0}}function WebGLClipping(){var t=this,p=null,h=0,x=!1,M=!1,k=new Plane,I=new Matrix3,N={value:null,needsUpdate:!1};function resetGlobalState(){N.value!==p&&(N.value=p,N.needsUpdate=h>0),t.numPlanes=h,t.numIntersection=0}function projectPlanes(p,h,x,M){var V=null!==p?p.length:0,ee=null;if(0!==V){if(ee=N.value,!0!==M||null===ee){var te=x+4*V,re=h.matrixWorldInverse;I.getNormalMatrix(re),(null===ee||ee.length<te)&&(ee=new Float32Array(te));for(var ne=0,ie=x;ne!==V;++ne,ie+=4)k.copy(p[ne]).applyMatrix4(re,I),k.normal.toArray(ee,ie),ee[ie+3]=k.constant}N.value=ee,N.needsUpdate=!0}return t.numPlanes=V,ee}this.uniform=N,this.numPlanes=0,this.numIntersection=0,this.init=function(t,M,k){var I=0!==t.length||M||0!==h||x;return x=M,p=projectPlanes(t,k,0),h=t.length,I},this.beginShadows=function(){M=!0,projectPlanes(null)},this.endShadows=function(){M=!1,resetGlobalState()},this.setState=function(t,k,I,V,ee,te){if(!x||null===t||0===t.length||M&&!I)M?projectPlanes(null):resetGlobalState();else{var re=M?0:h,ne=4*re,ie=ee.clippingState||null;N.value=ie,ie=projectPlanes(t,V,ne,te);for(var ae=0;ae!==ne;++ae)ie[ae]=p[ae];ee.clippingState=ie,this.numIntersection=k?this.numPlanes:0,this.numPlanes+=re}}}function WebGLExtensions(t){var p={};return{get:function get(h){if(void 0!==p[h])return p[h];var x;switch(h){case"WEBGL_depth_texture":x=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":x=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":x=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":x=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:x=t.getExtension(h)}return p[h]=x,x}}}function WebGLGeometries(t,p,h){var x=new WeakMap,M=new WeakMap;function onGeometryDispose(t){var k=t.target,I=x.get(k);for(var N in null!==I.index&&p.remove(I.index),I.attributes)p.remove(I.attributes[N]);k.removeEventListener("dispose",onGeometryDispose),x.delete(k);var V=M.get(I);V&&(p.remove(V),M.delete(I)),h.memory.geometries--}function updateWireframeAttribute(t){var h=[],x=t.index,k=t.attributes.position,I=0;if(null!==x){var N=x.array;I=x.version;for(var V=0,ee=N.length;V<ee;V+=3){var te=N[V+0],re=N[V+1],ne=N[V+2];h.push(te,re,re,ne,ne,te)}}else{N=k.array;I=k.version;for(V=0,ee=N.length/3-1;V<ee;V+=3){te=V+0,re=V+1,ne=V+2;h.push(te,re,re,ne,ne,te)}}var ie=new(arrayMax(h)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(h,1);ie.version=I,p.update(ie,34963);var ae=M.get(t);ae&&p.remove(ae),M.set(t,ie)}return{get:function get(t,p){var M=x.get(p);return M||(p.addEventListener("dispose",onGeometryDispose),p.isBufferGeometry?M=p:p.isGeometry&&(void 0===p._bufferGeometry&&(p._bufferGeometry=(new BufferGeometry).setFromObject(t)),M=p._bufferGeometry),x.set(p,M),h.memory.geometries++,M)},update:function update(t){var h=t.index,x=t.attributes;for(var M in null!==h&&p.update(h,34963),x)p.update(x[M],34962);var k=t.morphAttributes;for(var M in k)for(var I=k[M],N=0,V=I.length;N<V;N++)p.update(I[N],34962)},getWireframeAttribute:function getWireframeAttribute(t){var p=M.get(t);if(p){var h=t.index;null!==h&&p.version<h.version&&updateWireframeAttribute(t)}else updateWireframeAttribute(t);return M.get(t)}}}function WebGLIndexedBufferRenderer(t,p,h,x){var M,k,I,N=x.isWebGL2;this.setMode=function setMode(t){M=t},this.setIndex=function setIndex(t){k=t.type,I=t.bytesPerElement},this.render=function render(p,x){t.drawElements(M,x,k,p*I),h.update(x,M)},this.renderInstances=function renderInstances(x,V,ee,te){if(0!==te){var re,ne;if(N)re=t,ne="drawElementsInstanced";else if(ne="drawElementsInstancedANGLE",null===(re=p.get("ANGLE_instanced_arrays")))return;re[ne](M,ee,k,V*I,te),h.update(ee,M,te)}}}function WebGLInfo(t){var p={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:p,programs:null,autoReset:!0,reset:function reset(){p.frame++,p.calls=0,p.triangles=0,p.points=0,p.lines=0},update:function update(t,h,x){switch(x=x||1,p.calls++,h){case 4:p.triangles+=x*(t/3);break;case 1:p.lines+=x*(t/2);break;case 3:p.lines+=x*(t-1);break;case 2:p.lines+=x*t;break;case 0:p.points+=x*t}}}}function absNumericalSort(t,p){return Math.abs(p[1])-Math.abs(t[1])}function WebGLMorphtargets(t){var p={},h=new Float32Array(8);return{update:function update(x,M,k,I){var N=x.morphTargetInfluences,V=void 0===N?0:N.length,ee=p[M.id];if(void 0===ee){ee=[];for(var te=0;te<V;te++)ee[te]=[te,0];p[M.id]=ee}var re=k.morphTargets&&M.morphAttributes.position,ne=k.morphNormals&&M.morphAttributes.normal;for(te=0;te<V;te++){0!==(ae=ee[te])[1]&&(re&&M.deleteAttribute("morphTarget"+te),ne&&M.deleteAttribute("morphNormal"+te))}for(te=0;te<V;te++){(ae=ee[te])[0]=te,ae[1]=N[te]}ee.sort(absNumericalSort);var ie=0;for(te=0;te<8;te++){var ae;if(ae=ee[te]){var oe=ae[0],se=ae[1];if(se){re&&M.setAttribute("morphTarget"+te,re[oe]),ne&&M.setAttribute("morphNormal"+te,ne[oe]),h[te]=se,ie+=se;continue}}h[te]=0}var ce=M.morphTargetsRelative?1:1-ie;I.getUniforms().setValue(t,"morphTargetBaseInfluence",ce),I.getUniforms().setValue(t,"morphTargetInfluences",h)}}}function WebGLObjects(t,p,h,x){var M={};return{update:function update(t){var k=x.render.frame,I=t.geometry,N=p.get(t,I);return M[N.id]!==k&&(I.isGeometry&&N.updateFromObject(t),p.update(N),M[N.id]=k),t.isInstancedMesh&&h.update(t.instanceMatrix,34962),N},dispose:function dispose(){M={}}}}function CubeTexture(t,p,h,x,M,k,I,N,V,ee){t=void 0!==t?t:[],p=void 0!==p?p:lu,I=void 0!==I?I:Fu,Texture.call(this,t,p,h,x,M,k,I,N,V,ee),this.flipY=!1}function DataTexture2DArray(t,p,h,x){Texture.call(this,null),this.image={data:t||null,width:p||1,height:h||1,depth:x||1},this.magFilter=bu,this.minFilter=bu,this.wrapR=yu,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function DataTexture3D(t,p,h,x){Texture.call(this,null),this.image={data:t||null,width:p||1,height:h||1,depth:x||1},this.magFilter=bu,this.minFilter=bu,this.wrapR=yu,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}zh.physical={uniforms:mergeUniforms([zh.standard.uniforms,{transparency:{value:0},clearcoat:{value:0},clearcoatRoughness:{value:0},sheen:{value:new Color(0)},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatNormalMap:{value:null}}]),vertexShader:Wh.meshphysical_vert,fragmentShader:Wh.meshphysical_frag},CubeTexture.prototype=Object.create(Texture.prototype),CubeTexture.prototype.constructor=CubeTexture,CubeTexture.prototype.isCubeTexture=!0,Object.defineProperty(CubeTexture.prototype,"images",{get:function get(){return this.image},set:function set(t){this.image=t}}),DataTexture2DArray.prototype=Object.create(Texture.prototype),DataTexture2DArray.prototype.constructor=DataTexture2DArray,DataTexture2DArray.prototype.isDataTexture2DArray=!0,DataTexture3D.prototype=Object.create(Texture.prototype),DataTexture3D.prototype.constructor=DataTexture3D,DataTexture3D.prototype.isDataTexture3D=!0;var Hh=new Texture,$h=new DataTexture2DArray,Yh=new DataTexture3D,Kh=new CubeTexture,Xh=[],Zh=[],Jh=new Float32Array(16),Qh=new Float32Array(9),ef=new Float32Array(4);function flatten(t,p,h){var x=t[0];if(x<=0||x>0)return t;var M=p*h,k=Xh[M];if(void 0===k&&(k=new Float32Array(M),Xh[M]=k),0!==p){x.toArray(k,0);for(var I=1,N=0;I!==p;++I)N+=h,t[I].toArray(k,N)}return k}function arraysEqual(t,p){if(t.length!==p.length)return!1;for(var h=0,x=t.length;h<x;h++)if(t[h]!==p[h])return!1;return!0}function copyArray(t,p){for(var h=0,x=p.length;h<x;h++)t[h]=p[h]}function allocTexUnits(t,p){var h=Zh[p];void 0===h&&(h=new Int32Array(p),Zh[p]=h);for(var x=0;x!==p;++x)h[x]=t.allocateTextureUnit();return h}function setValueV1f(t,p){var h=this.cache;h[0]!==p&&(t.uniform1f(this.addr,p),h[0]=p)}function setValueV2f(t,p){var h=this.cache;if(void 0!==p.x)h[0]===p.x&&h[1]===p.y||(t.uniform2f(this.addr,p.x,p.y),h[0]=p.x,h[1]=p.y);else{if(arraysEqual(h,p))return;t.uniform2fv(this.addr,p),copyArray(h,p)}}function setValueV3f(t,p){var h=this.cache;if(void 0!==p.x)h[0]===p.x&&h[1]===p.y&&h[2]===p.z||(t.uniform3f(this.addr,p.x,p.y,p.z),h[0]=p.x,h[1]=p.y,h[2]=p.z);else if(void 0!==p.r)h[0]===p.r&&h[1]===p.g&&h[2]===p.b||(t.uniform3f(this.addr,p.r,p.g,p.b),h[0]=p.r,h[1]=p.g,h[2]=p.b);else{if(arraysEqual(h,p))return;t.uniform3fv(this.addr,p),copyArray(h,p)}}function setValueV4f(t,p){var h=this.cache;if(void 0!==p.x)h[0]===p.x&&h[1]===p.y&&h[2]===p.z&&h[3]===p.w||(t.uniform4f(this.addr,p.x,p.y,p.z,p.w),h[0]=p.x,h[1]=p.y,h[2]=p.z,h[3]=p.w);else{if(arraysEqual(h,p))return;t.uniform4fv(this.addr,p),copyArray(h,p)}}function setValueM2(t,p){var h=this.cache,x=p.elements;if(void 0===x){if(arraysEqual(h,p))return;t.uniformMatrix2fv(this.addr,!1,p),copyArray(h,p)}else{if(arraysEqual(h,x))return;ef.set(x),t.uniformMatrix2fv(this.addr,!1,ef),copyArray(h,x)}}function setValueM3(t,p){var h=this.cache,x=p.elements;if(void 0===x){if(arraysEqual(h,p))return;t.uniformMatrix3fv(this.addr,!1,p),copyArray(h,p)}else{if(arraysEqual(h,x))return;Qh.set(x),t.uniformMatrix3fv(this.addr,!1,Qh),copyArray(h,x)}}function setValueM4(t,p){var h=this.cache,x=p.elements;if(void 0===x){if(arraysEqual(h,p))return;t.uniformMatrix4fv(this.addr,!1,p),copyArray(h,p)}else{if(arraysEqual(h,x))return;Jh.set(x),t.uniformMatrix4fv(this.addr,!1,Jh),copyArray(h,x)}}function setValueT1(t,p,h){var x=this.cache,M=h.allocateTextureUnit();x[0]!==M&&(t.uniform1i(this.addr,M),x[0]=M),h.safeSetTexture2D(p||Hh,M)}function setValueT2DArray1(t,p,h){var x=this.cache,M=h.allocateTextureUnit();x[0]!==M&&(t.uniform1i(this.addr,M),x[0]=M),h.setTexture2DArray(p||$h,M)}function setValueT3D1(t,p,h){var x=this.cache,M=h.allocateTextureUnit();x[0]!==M&&(t.uniform1i(this.addr,M),x[0]=M),h.setTexture3D(p||Yh,M)}function setValueT6(t,p,h){var x=this.cache,M=h.allocateTextureUnit();x[0]!==M&&(t.uniform1i(this.addr,M),x[0]=M),h.safeSetTextureCube(p||Kh,M)}function setValueV1i(t,p){var h=this.cache;h[0]!==p&&(t.uniform1i(this.addr,p),h[0]=p)}function setValueV2i(t,p){var h=this.cache;arraysEqual(h,p)||(t.uniform2iv(this.addr,p),copyArray(h,p))}function setValueV3i(t,p){var h=this.cache;arraysEqual(h,p)||(t.uniform3iv(this.addr,p),copyArray(h,p))}function setValueV4i(t,p){var h=this.cache;arraysEqual(h,p)||(t.uniform4iv(this.addr,p),copyArray(h,p))}function setValueV1ui(t,p){var h=this.cache;h[0]!==p&&(t.uniform1ui(this.addr,p),h[0]=p)}function setValueV1fArray(t,p){t.uniform1fv(this.addr,p)}function setValueV1iArray(t,p){t.uniform1iv(this.addr,p)}function setValueV2iArray(t,p){t.uniform2iv(this.addr,p)}function setValueV3iArray(t,p){t.uniform3iv(this.addr,p)}function setValueV4iArray(t,p){t.uniform4iv(this.addr,p)}function setValueV2fArray(t,p){var h=flatten(p,this.size,2);t.uniform2fv(this.addr,h)}function setValueV3fArray(t,p){var h=flatten(p,this.size,3);t.uniform3fv(this.addr,h)}function setValueV4fArray(t,p){var h=flatten(p,this.size,4);t.uniform4fv(this.addr,h)}function setValueM2Array(t,p){var h=flatten(p,this.size,4);t.uniformMatrix2fv(this.addr,!1,h)}function setValueM3Array(t,p){var h=flatten(p,this.size,9);t.uniformMatrix3fv(this.addr,!1,h)}function setValueM4Array(t,p){var h=flatten(p,this.size,16);t.uniformMatrix4fv(this.addr,!1,h)}function setValueT1Array(t,p,h){var x=p.length,M=allocTexUnits(h,x);t.uniform1iv(this.addr,M);for(var k=0;k!==x;++k)h.safeSetTexture2D(p[k]||Hh,M[k])}function setValueT6Array(t,p,h){var x=p.length,M=allocTexUnits(h,x);t.uniform1iv(this.addr,M);for(var k=0;k!==x;++k)h.safeSetTextureCube(p[k]||Kh,M[k])}function SingleUniform(t,p,h){this.id=t,this.addr=h,this.cache=[],this.setValue=function getSingularSetter(t){switch(t){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}(p.type)}function PureArrayUniform(t,p,h){this.id=t,this.addr=h,this.cache=[],this.size=p.size,this.setValue=function getPureArraySetter(t){switch(t){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35680:case 36300:case 36308:case 36293:return setValueT6Array}}(p.type)}function StructuredUniform(t){this.id=t,this.seq=[],this.map={}}PureArrayUniform.prototype.updateCache=function(t){var p=this.cache;t instanceof Float32Array&&p.length!==t.length&&(this.cache=new Float32Array(t.length)),copyArray(p,t)},StructuredUniform.prototype.setValue=function(t,p,h){for(var x=this.seq,M=0,k=x.length;M!==k;++M){var I=x[M];I.setValue(t,p[I.id],h)}};var tf=/([\w\d_]+)(\])?(\[|\.)?/g;function addUniform(t,p){t.seq.push(p),t.map[p.id]=p}function parseUniform(t,p,h){var x=t.name,M=x.length;for(tf.lastIndex=0;;){var k=tf.exec(x),I=tf.lastIndex,N=k[1],V="]"===k[2],ee=k[3];if(V&&(N|=0),void 0===ee||"["===ee&&I+2===M){addUniform(h,void 0===ee?new SingleUniform(N,t,p):new PureArrayUniform(N,t,p));break}var te=h.map[N];void 0===te&&addUniform(h,te=new StructuredUniform(N)),h=te}}function WebGLUniforms(t,p){this.seq=[],this.map={};for(var h=t.getProgramParameter(p,35718),x=0;x<h;++x){var M=t.getActiveUniform(p,x);parseUniform(M,t.getUniformLocation(p,M.name),this)}}function WebGLShader(t,p,h){var x=t.createShader(p);return t.shaderSource(x,h),t.compileShader(x),x}WebGLUniforms.prototype.setValue=function(t,p,h,x){var M=this.map[p];void 0!==M&&M.setValue(t,h,x)},WebGLUniforms.prototype.setOptional=function(t,p,h){var x=p[h];void 0!==x&&this.setValue(t,h,x)},WebGLUniforms.upload=function(t,p,h,x){for(var M=0,k=p.length;M!==k;++M){var I=p[M],N=h[I.id];!1!==N.needsUpdate&&I.setValue(t,N.value,x)}},WebGLUniforms.seqWithValue=function(t,p){for(var h=[],x=0,M=t.length;x!==M;++x){var k=t[x];k.id in p&&h.push(k)}return h};var rf=0;function getEncodingComponents(t){switch(t){case kl:return["Linear","( value )"];case Dl:return["sRGB","( value )"];case Ol:return["RGBE","( value )"];case Ll:return["RGBM","( value, 7.0 )"];case El:return["RGBM","( value, 16.0 )"];case Rl:return["RGBD","( value, 256.0 )"];case Pl:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case Il:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+t)}}function getShaderErrors(t,p,h){var x=t.getShaderParameter(p,35713),M=t.getShaderInfoLog(p).trim();return x&&""===M?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+h+"\n"+M+function addLineNumbers(t){for(var p=t.split("\n"),h=0;h<p.length;h++)p[h]=h+1+": "+p[h];return p.join("\n")}(t.getShaderSource(p))}function getTexelDecodingFunction(t,p){var h=getEncodingComponents(p);return"vec4 "+t+"( vec4 value ) { return "+h[0]+"ToLinear"+h[1]+"; }"}function getToneMappingFunction(t,p){var h;switch(p){case au:h="Linear";break;case ou:h="Reinhard";break;case su:h="Uncharted2";break;case cu:h="OptimizedCineon";break;case uu:h="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+p)}return"vec3 "+t+"( vec3 color ) { return "+h+"ToneMapping( color ); }"}function filterEmptyLine(t){return""!==t}function replaceLightNums(t,p){return t.replace(/NUM_DIR_LIGHTS/g,p.numDirLights).replace(/NUM_SPOT_LIGHTS/g,p.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,p.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,p.numPointLights).replace(/NUM_HEMI_LIGHTS/g,p.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,p.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,p.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,p.numPointLightShadows)}function replaceClippingPlaneNums(t,p){return t.replace(/NUM_CLIPPING_PLANES/g,p.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,p.numClippingPlanes-p.numClipIntersection)}var nf=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(t){return t.replace(nf,includeReplacer)}function includeReplacer(t,p){var h=Wh[p];if(void 0===h)throw new Error("Can not resolve #include <"+p+">");return resolveIncludes(h)}var af=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;function unrollLoops(t){return t.replace(af,loopReplacer)}function loopReplacer(t,p,h,x){for(var M="",k=parseInt(p);k<parseInt(h);k++)M+=x.replace(/\[ i \]/g,"[ "+k+" ]").replace(/UNROLLED_LOOP_INDEX/g,k);return M}function generatePrecision(t){var p="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?p+="\n#define HIGH_PRECISION":"mediump"===t.precision?p+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(p+="\n#define LOW_PRECISION"),p}function WebGLProgram(t,p,h){var x,M,k,I,N,V=t.getContext(),ee=h.defines,te=h.vertexShader,re=h.fragmentShader,ne=function generateShadowMapTypeDefine(t){var p="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===vc?p="SHADOWMAP_TYPE_PCF":t.shadowMapType===yc?p="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===xc&&(p="SHADOWMAP_TYPE_VSM"),p}(h),ie=function generateEnvMapTypeDefine(t){var p="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case lu:case pu:p="ENVMAP_TYPE_CUBE";break;case mu:case gu:p="ENVMAP_TYPE_CUBE_UV";break;case hu:case fu:p="ENVMAP_TYPE_EQUIREC";break;case du:p="ENVMAP_TYPE_SPHERE"}return p}(h),ae=function generateEnvMapModeDefine(t){var p="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case pu:case fu:p="ENVMAP_MODE_REFRACTION"}return p}(h),oe=function generateEnvMapBlendingDefine(t){var p="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case tu:p="ENVMAP_BLENDING_MULTIPLY";break;case ru:p="ENVMAP_BLENDING_MIX";break;case nu:p="ENVMAP_BLENDING_ADD"}return p}(h),se=t.gammaFactor>0?t.gammaFactor:1,ce=h.isWebGL2?"":function generateExtensions(t){return[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(filterEmptyLine).join("\n")}(h),ue=function generateDefines(t){var p=[];for(var h in t){var x=t[h];!1!==x&&p.push("#define "+h+" "+x)}return p.join("\n")}(ee),le=V.createProgram(),pe=h.numMultiviewViews;if(h.isRawShaderMaterial?((x=[ue].filter(filterEmptyLine).join("\n")).length>0&&(x+="\n"),(M=[ce,ue].filter(filterEmptyLine).join("\n")).length>0&&(M+="\n")):(x=[generatePrecision(h),"#define SHADER_NAME "+h.shaderName,ue,h.instancing?"#define USE_INSTANCING":"",h.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+se,"#define MAX_BONES "+h.maxBones,h.useFog&&h.fog?"#define USE_FOG":"",h.useFog&&h.fogExp2?"#define FOG_EXP2":"",h.map?"#define USE_MAP":"",h.envMap?"#define USE_ENVMAP":"",h.envMap?"#define "+ae:"",h.lightMap?"#define USE_LIGHTMAP":"",h.aoMap?"#define USE_AOMAP":"",h.emissiveMap?"#define USE_EMISSIVEMAP":"",h.bumpMap?"#define USE_BUMPMAP":"",h.normalMap?"#define USE_NORMALMAP":"",h.normalMap&&h.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",h.normalMap&&h.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",h.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",h.displacementMap&&h.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",h.specularMap?"#define USE_SPECULARMAP":"",h.roughnessMap?"#define USE_ROUGHNESSMAP":"",h.metalnessMap?"#define USE_METALNESSMAP":"",h.alphaMap?"#define USE_ALPHAMAP":"",h.vertexTangents?"#define USE_TANGENT":"",h.vertexColors?"#define USE_COLOR":"",h.vertexUvs?"#define USE_UV":"",h.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",h.flatShading?"#define FLAT_SHADED":"",h.skinning?"#define USE_SKINNING":"",h.useVertexTexture?"#define BONE_TEXTURE":"",h.morphTargets?"#define USE_MORPHTARGETS":"",h.morphNormals&&!1===h.flatShading?"#define USE_MORPHNORMALS":"",h.doubleSided?"#define DOUBLE_SIDED":"",h.flipSided?"#define FLIP_SIDED":"",h.shadowMapEnabled?"#define USE_SHADOWMAP":"",h.shadowMapEnabled?"#define "+ne:"",h.sizeAttenuation?"#define USE_SIZEATTENUATION":"",h.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",h.logarithmicDepthBuffer&&h.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(filterEmptyLine).join("\n"),M=[ce,generatePrecision(h),"#define SHADER_NAME "+h.shaderName,ue,h.alphaTest?"#define ALPHATEST "+h.alphaTest+(h.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+se,h.useFog&&h.fog?"#define USE_FOG":"",h.useFog&&h.fogExp2?"#define FOG_EXP2":"",h.map?"#define USE_MAP":"",h.matcap?"#define USE_MATCAP":"",h.envMap?"#define USE_ENVMAP":"",h.envMap?"#define "+ie:"",h.envMap?"#define "+ae:"",h.envMap?"#define "+oe:"",h.lightMap?"#define USE_LIGHTMAP":"",h.aoMap?"#define USE_AOMAP":"",h.emissiveMap?"#define USE_EMISSIVEMAP":"",h.bumpMap?"#define USE_BUMPMAP":"",h.normalMap?"#define USE_NORMALMAP":"",h.normalMap&&h.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",h.normalMap&&h.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",h.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",h.specularMap?"#define USE_SPECULARMAP":"",h.roughnessMap?"#define USE_ROUGHNESSMAP":"",h.metalnessMap?"#define USE_METALNESSMAP":"",h.alphaMap?"#define USE_ALPHAMAP":"",h.sheen?"#define USE_SHEEN":"",h.vertexTangents?"#define USE_TANGENT":"",h.vertexColors?"#define USE_COLOR":"",h.vertexUvs?"#define USE_UV":"",h.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",h.gradientMap?"#define USE_GRADIENTMAP":"",h.flatShading?"#define FLAT_SHADED":"",h.doubleSided?"#define DOUBLE_SIDED":"",h.flipSided?"#define FLIP_SIDED":"",h.shadowMapEnabled?"#define USE_SHADOWMAP":"",h.shadowMapEnabled?"#define "+ne:"",h.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",h.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",h.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",h.logarithmicDepthBuffer&&h.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(h.extensionShaderTextureLOD||h.envMap)&&h.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",h.toneMapping!==iu?"#define TONE_MAPPING":"",h.toneMapping!==iu?Wh.tonemapping_pars_fragment:"",h.toneMapping!==iu?getToneMappingFunction("toneMapping",h.toneMapping):"",h.dithering?"#define DITHERING":"",h.outputEncoding||h.mapEncoding||h.matcapEncoding||h.envMapEncoding||h.emissiveMapEncoding||h.lightMapEncoding?Wh.encodings_pars_fragment:"",h.mapEncoding?getTexelDecodingFunction("mapTexelToLinear",h.mapEncoding):"",h.matcapEncoding?getTexelDecodingFunction("matcapTexelToLinear",h.matcapEncoding):"",h.envMapEncoding?getTexelDecodingFunction("envMapTexelToLinear",h.envMapEncoding):"",h.emissiveMapEncoding?getTexelDecodingFunction("emissiveMapTexelToLinear",h.emissiveMapEncoding):"",h.lightMapEncoding?getTexelDecodingFunction("lightMapTexelToLinear",h.lightMapEncoding):"",h.outputEncoding?(k="linearToOutputTexel",I=h.outputEncoding,N=getEncodingComponents(I),"vec4 "+k+"( vec4 value ) { return LinearTo"+N[0]+N[1]+"; }"):"",h.depthPacking?"#define DEPTH_PACKING "+h.depthPacking:"","\n"].filter(filterEmptyLine).join("\n")),te=replaceClippingPlaneNums(te=replaceLightNums(te=resolveIncludes(te),h),h),re=replaceClippingPlaneNums(re=replaceLightNums(re=resolveIncludes(re),h),h),te=unrollLoops(te),re=unrollLoops(re),h.isWebGL2&&!h.isRawShaderMaterial){var he=!1,fe=/^\s*#version\s+300\s+es\s*\n/;h.isShaderMaterial&&null!==te.match(fe)&&null!==re.match(fe)&&(he=!0,te=te.replace(fe,""),re=re.replace(fe,"")),x=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+x,M=["#version 300 es\n","#define varying in",he?"":"out highp vec4 pc_fragColor;",he?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+M,pe>0&&(x=(x=x.replace("#version 300 es\n",["#version 300 es\n","#extension GL_OVR_multiview2 : require","layout(num_views = "+pe+") in;","#define VIEW_ID gl_ViewID_OVR"].join("\n"))).replace(["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;"].join("\n"),["uniform mat4 modelViewMatrices["+pe+"];","uniform mat4 projectionMatrices["+pe+"];","uniform mat4 viewMatrices["+pe+"];","uniform mat3 normalMatrices["+pe+"];","#define modelViewMatrix modelViewMatrices[VIEW_ID]","#define projectionMatrix projectionMatrices[VIEW_ID]","#define viewMatrix viewMatrices[VIEW_ID]","#define normalMatrix normalMatrices[VIEW_ID]"].join("\n")),M=(M=M.replace("#version 300 es\n",["#version 300 es\n","#extension GL_OVR_multiview2 : require","#define VIEW_ID gl_ViewID_OVR"].join("\n"))).replace("uniform mat4 viewMatrix;",["uniform mat4 viewMatrices["+pe+"];","#define viewMatrix viewMatrices[VIEW_ID]"].join("\n")))}var de,me,ge=M+re,ve=WebGLShader(V,35633,x+te),ye=WebGLShader(V,35632,ge);if(V.attachShader(le,ve),V.attachShader(le,ye),void 0!==h.index0AttributeName?V.bindAttribLocation(le,0,h.index0AttributeName):!0===h.morphTargets&&V.bindAttribLocation(le,0,"position"),V.linkProgram(le),t.debug.checkShaderErrors){var xe=V.getProgramInfoLog(le).trim(),be=V.getShaderInfoLog(ve).trim(),_e=V.getShaderInfoLog(ye).trim(),Me=!0,Ce=!0;if(!1===V.getProgramParameter(le,35714)){Me=!1;getShaderErrors(V,ve,"vertex"),getShaderErrors(V,ye,"fragment")}else""!==xe||""!==be&&""!==_e||(Ce=!1);Ce&&(this.diagnostics={runnable:Me,programLog:xe,vertexShader:{log:be,prefix:x},fragmentShader:{log:_e,prefix:M}})}return V.deleteShader(ve),V.deleteShader(ye),this.getUniforms=function(){return void 0===de&&(de=new WebGLUniforms(V,le)),de},this.getAttributes=function(){return void 0===me&&(me=function fetchAttributeLocations(t,p){for(var h={},x=t.getProgramParameter(p,35721),M=0;M<x;M++){var k=t.getActiveAttrib(p,M).name;h[k]=t.getAttribLocation(p,k)}return h}(V,le)),me},this.destroy=function(){V.deleteProgram(le),this.program=void 0},this.name=h.shaderName,this.id=rf++,this.cacheKey=p,this.usedTimes=1,this.program=le,this.vertexShader=ve,this.fragmentShader=ye,this.numMultiviewViews=pe,this}function WebGLPrograms(t,p,h){var x=[],M=h.isWebGL2,k=h.logarithmicDepthBuffer,I=h.floatVertexTextures,N=h.precision,V=h.maxVertexUniforms,ee=h.vertexTextures,te={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},re=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","numMultiviewViews","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function getTextureEncodingFromMap(t){var p;return t?t.isTexture?p=t.encoding:t.isWebGLRenderTarget&&(p=t.texture.encoding):p=kl,p}this.getParameters=function(x,re,ne,ie,ae,oe,se){var ce=ie.fog,ue=x.isMeshStandardMaterial?ie.environment:null,le=x.envMap||ue,pe=te[x.type],he=se.isSkinnedMesh?function allocateBones(t){var p=t.skeleton.bones;if(I)return 1024;var h=V,x=Math.floor((h-20)/4),M=Math.min(x,p.length);return M<p.length?0:M}(se):0;null!==x.precision&&(N=h.getMaxPrecision(x.precision),x.precision);var fe=function getShaderObject(t,p){var h;if(p){var x=zh[p];h={name:t.type,uniforms:Bh.clone(x.uniforms),vertexShader:x.vertexShader,fragmentShader:x.fragmentShader}}else h={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};return h}(x,pe);x.onBeforeCompile(fe,t);var de=t.getRenderTarget(),me=de&&de.isWebGLMultiviewRenderTarget?de.numViews:0;return{isWebGL2:M,shaderID:pe,shaderName:fe.name,uniforms:fe.uniforms,vertexShader:fe.vertexShader,fragmentShader:fe.fragmentShader,defines:x.defines,isRawShaderMaterial:x.isRawShaderMaterial,isShaderMaterial:x.isShaderMaterial,precision:N,instancing:!0===se.isInstancedMesh,supportsVertexTextures:ee,numMultiviewViews:me,outputEncoding:null!==de?getTextureEncodingFromMap(de.texture):t.outputEncoding,map:!!x.map,mapEncoding:getTextureEncodingFromMap(x.map),matcap:!!x.matcap,matcapEncoding:getTextureEncodingFromMap(x.matcap),envMap:!!le,envMapMode:le&&le.mapping,envMapEncoding:getTextureEncodingFromMap(le),envMapCubeUV:!!le&&(le.mapping===mu||le.mapping===gu),lightMap:!!x.lightMap,lightMapEncoding:getTextureEncodingFromMap(x.lightMap),aoMap:!!x.aoMap,emissiveMap:!!x.emissiveMap,emissiveMapEncoding:getTextureEncodingFromMap(x.emissiveMap),bumpMap:!!x.bumpMap,normalMap:!!x.normalMap,objectSpaceNormalMap:x.normalMapType===Fl,tangentSpaceNormalMap:x.normalMapType===Gl,clearcoatNormalMap:!!x.clearcoatNormalMap,displacementMap:!!x.displacementMap,roughnessMap:!!x.roughnessMap,metalnessMap:!!x.metalnessMap,specularMap:!!x.specularMap,alphaMap:!!x.alphaMap,gradientMap:!!x.gradientMap,sheen:!!x.sheen,combine:x.combine,vertexTangents:x.normalMap&&x.vertexTangents,vertexColors:x.vertexColors,vertexUvs:!!(x.map||x.bumpMap||x.normalMap||x.specularMap||x.alphaMap||x.emissiveMap||x.roughnessMap||x.metalnessMap||x.clearcoatNormalMap||x.displacementMap),uvsVertexOnly:!(x.map||x.bumpMap||x.normalMap||x.specularMap||x.alphaMap||x.emissiveMap||x.roughnessMap||x.metalnessMap||x.clearcoatNormalMap||!x.displacementMap),fog:!!ce,useFog:x.fog,fogExp2:ce&&ce.isFogExp2,flatShading:x.flatShading,sizeAttenuation:x.sizeAttenuation,logarithmicDepthBuffer:k,skinning:x.skinning&&he>0,maxBones:he,useVertexTexture:I,morphTargets:x.morphTargets,morphNormals:x.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:re.directional.length,numPointLights:re.point.length,numSpotLights:re.spot.length,numRectAreaLights:re.rectArea.length,numHemiLights:re.hemi.length,numDirLightShadows:re.directionalShadowMap.length,numPointLightShadows:re.pointShadowMap.length,numSpotLightShadows:re.spotShadowMap.length,numClippingPlanes:ae,numClipIntersection:oe,dithering:x.dithering,shadowMapEnabled:t.shadowMap.enabled&&ne.length>0,shadowMapType:t.shadowMap.type,toneMapping:x.toneMapped?t.toneMapping:iu,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:x.premultipliedAlpha,alphaTest:x.alphaTest,doubleSided:x.side===Mc,flipSided:x.side===_c,depthPacking:void 0!==x.depthPacking&&x.depthPacking,index0AttributeName:x.index0AttributeName,extensionDerivatives:x.extensions&&x.extensions.derivatives,extensionFragDepth:x.extensions&&x.extensions.frawbuffers,extensionDrawbuffers:x.extensions&&x.extensions.drawbuffers,extensionShaderTextureLOD:x.extensions&&x.extensions.shaderTextureLOD,rendererExtensionFragDepth:M||null!==p.get("EXT_frag_depth"),rendererExtensionDrawBuffers:M||null!==p.get("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:M||null!==p.get("EXT_shader_texture_lod"),onBeforeCompile:x.onBeforeCompile}},this.getProgramCacheKey=function(p){var h=[];if(p.shaderID?h.push(p.shaderID):(h.push(p.fragmentShader),h.push(p.vertexShader)),void 0!==p.defines)for(var x in p.defines)h.push(x),h.push(p.defines[x]);if(void 0===p.isRawShaderMaterial){for(var M=0;M<re.length;M++)h.push(p[re[M]]);h.push(t.outputEncoding),h.push(t.gammaFactor)}return h.push(p.onBeforeCompile.toString()),h.join()},this.acquireProgram=function(p,h){for(var M,k=0,I=x.length;k<I;k++){var N=x[k];if(N.cacheKey===h){++(M=N).usedTimes;break}}return void 0===M&&(M=new WebGLProgram(t,h,p),x.push(M)),M},this.releaseProgram=function(t){if(0==--t.usedTimes){var p=x.indexOf(t);x[p]=x[x.length-1],x.pop(),t.destroy()}},this.programs=x}function WebGLProperties(){var t=new WeakMap;return{get:function get(p){var h=t.get(p);return void 0===h&&(h={},t.set(p,h)),h},remove:function remove(p){t.delete(p)},update:function update(p,h,x){t.get(p)[h]=x},dispose:function dispose(){t=new WeakMap}}}function painterSortStable(t,p){return t.groupOrder!==p.groupOrder?t.groupOrder-p.groupOrder:t.renderOrder!==p.renderOrder?t.renderOrder-p.renderOrder:t.program!==p.program?t.program.id-p.program.id:t.material.id!==p.material.id?t.material.id-p.material.id:t.z!==p.z?t.z-p.z:t.id-p.id}function reversePainterSortStable(t,p){return t.groupOrder!==p.groupOrder?t.groupOrder-p.groupOrder:t.renderOrder!==p.renderOrder?t.renderOrder-p.renderOrder:t.z!==p.z?p.z-t.z:t.id-p.id}function WebGLRenderList(){var t=[],p=0,h=[],x=[],M={id:-1};function getNextRenderItem(h,x,k,I,N,V){var ee=t[p];return void 0===ee?(ee={id:h.id,object:h,geometry:x,material:k,program:k.program||M,groupOrder:I,renderOrder:h.renderOrder,z:N,group:V},t[p]=ee):(ee.id=h.id,ee.object=h,ee.geometry=x,ee.material=k,ee.program=k.program||M,ee.groupOrder=I,ee.renderOrder=h.renderOrder,ee.z=N,ee.group=V),p++,ee}return{opaque:h,transparent:x,init:function init(){p=0,h.length=0,x.length=0},push:function push(t,p,M,k,I,N){var V=getNextRenderItem(t,p,M,k,I,N);(!0===M.transparent?x:h).push(V)},unshift:function unshift(t,p,M,k,I,N){var V=getNextRenderItem(t,p,M,k,I,N);(!0===M.transparent?x:h).unshift(V)},sort:function sort(t,p){h.length>1&&h.sort(t||painterSortStable),x.length>1&&x.sort(p||reversePainterSortStable)}}}function WebGLRenderLists(){var t=new WeakMap;function onSceneDispose(p){var h=p.target;h.removeEventListener("dispose",onSceneDispose),t.delete(h)}return{get:function get(p,h){var x,M=t.get(p);return void 0===M?(x=new WebGLRenderList,t.set(p,new WeakMap),t.get(p).set(h,x),p.addEventListener("dispose",onSceneDispose)):void 0===(x=M.get(h))&&(x=new WebGLRenderList,M.set(h,x)),x},dispose:function dispose(){t=new WeakMap}}}function UniformsCache(){var t={};return{get:function get(p){if(void 0!==t[p.id])return t[p.id];var h;switch(p.type){case"DirectionalLight":h={direction:new Vector3,color:new Color,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":h={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":h={position:new Vector3,color:new Color,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":h={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":h={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3}}return t[p.id]=h,h}}}var of=0;function shadowCastingLightsFirst(t,p){return(p.castShadow?1:0)-(t.castShadow?1:0)}function WebGLLights(){for(var t=new UniformsCache,p={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},h=0;h<9;h++)p.probe.push(new Vector3);var x=new Vector3,M=new Matrix4,k=new Matrix4;return{setup:function setup(h,I,N){for(var V=0,ee=0,te=0,re=0;re<9;re++)p.probe[re].set(0,0,0);var ne=0,ie=0,ae=0,oe=0,se=0,ce=0,ue=0,le=0,pe=N.matrixWorldInverse;h.sort(shadowCastingLightsFirst),re=0;for(var he=h.length;re<he;re++){var fe=h[re],de=fe.color,me=fe.intensity,ge=fe.distance,ve=fe.shadow&&fe.shadow.map?fe.shadow.map.texture:null;if(fe.isAmbientLight)V+=de.r*me,ee+=de.g*me,te+=de.b*me;else if(fe.isLightProbe)for(var ye=0;ye<9;ye++)p.probe[ye].addScaledVector(fe.sh.coefficients[ye],me);else if(fe.isDirectionalLight){if((be=t.get(fe)).color.copy(fe.color).multiplyScalar(fe.intensity),be.direction.setFromMatrixPosition(fe.matrixWorld),x.setFromMatrixPosition(fe.target.matrixWorld),be.direction.sub(x),be.direction.transformDirection(pe),be.shadow=fe.castShadow,fe.castShadow){var xe=fe.shadow;be.shadowBias=xe.bias,be.shadowRadius=xe.radius,be.shadowMapSize=xe.mapSize,p.directionalShadowMap[ne]=ve,p.directionalShadowMatrix[ne]=fe.shadow.matrix,ce++}p.directional[ne]=be,ne++}else if(fe.isSpotLight){if((be=t.get(fe)).position.setFromMatrixPosition(fe.matrixWorld),be.position.applyMatrix4(pe),be.color.copy(de).multiplyScalar(me),be.distance=ge,be.direction.setFromMatrixPosition(fe.matrixWorld),x.setFromMatrixPosition(fe.target.matrixWorld),be.direction.sub(x),be.direction.transformDirection(pe),be.coneCos=Math.cos(fe.angle),be.penumbraCos=Math.cos(fe.angle*(1-fe.penumbra)),be.decay=fe.decay,be.shadow=fe.castShadow,fe.castShadow){xe=fe.shadow;be.shadowBias=xe.bias,be.shadowRadius=xe.radius,be.shadowMapSize=xe.mapSize,p.spotShadowMap[ae]=ve,p.spotShadowMatrix[ae]=fe.shadow.matrix,le++}p.spot[ae]=be,ae++}else if(fe.isRectAreaLight){(be=t.get(fe)).color.copy(de).multiplyScalar(me),be.position.setFromMatrixPosition(fe.matrixWorld),be.position.applyMatrix4(pe),k.identity(),M.copy(fe.matrixWorld),M.premultiply(pe),k.extractRotation(M),be.halfWidth.set(.5*fe.width,0,0),be.halfHeight.set(0,.5*fe.height,0),be.halfWidth.applyMatrix4(k),be.halfHeight.applyMatrix4(k),p.rectArea[oe]=be,oe++}else if(fe.isPointLight){if((be=t.get(fe)).position.setFromMatrixPosition(fe.matrixWorld),be.position.applyMatrix4(pe),be.color.copy(fe.color).multiplyScalar(fe.intensity),be.distance=fe.distance,be.decay=fe.decay,be.shadow=fe.castShadow,fe.castShadow){xe=fe.shadow;be.shadowBias=xe.bias,be.shadowRadius=xe.radius,be.shadowMapSize=xe.mapSize,be.shadowCameraNear=xe.camera.near,be.shadowCameraFar=xe.camera.far,p.pointShadowMap[ie]=ve,p.pointShadowMatrix[ie]=fe.shadow.matrix,ue++}p.point[ie]=be,ie++}else if(fe.isHemisphereLight){var be;(be=t.get(fe)).direction.setFromMatrixPosition(fe.matrixWorld),be.direction.transformDirection(pe),be.direction.normalize(),be.skyColor.copy(fe.color).multiplyScalar(me),be.groundColor.copy(fe.groundColor).multiplyScalar(me),p.hemi[se]=be,se++}}p.ambient[0]=V,p.ambient[1]=ee,p.ambient[2]=te;var _e=p.hash;_e.directionalLength===ne&&_e.pointLength===ie&&_e.spotLength===ae&&_e.rectAreaLength===oe&&_e.hemiLength===se&&_e.numDirectionalShadows===ce&&_e.numPointShadows===ue&&_e.numSpotShadows===le||(p.directional.length=ne,p.spot.length=ae,p.rectArea.length=oe,p.point.length=ie,p.hemi.length=se,p.directionalShadowMap.length=ce,p.pointShadowMap.length=ue,p.spotShadowMap.length=le,p.directionalShadowMatrix.length=ce,p.pointShadowMatrix.length=ue,p.spotShadowMatrix.length=le,_e.directionalLength=ne,_e.pointLength=ie,_e.spotLength=ae,_e.rectAreaLength=oe,_e.hemiLength=se,_e.numDirectionalShadows=ce,_e.numPointShadows=ue,_e.numSpotShadows=le,p.version=of++)},state:p}}function WebGLRenderState(){var t=new WebGLLights,p=[],h=[];return{init:function init(){p.length=0,h.length=0},state:{lightsArray:p,shadowsArray:h,lights:t},setupLights:function setupLights(x){t.setup(p,h,x)},pushLight:function pushLight(t){p.push(t)},pushShadow:function pushShadow(t){h.push(t)}}}function WebGLRenderStates(){var t=new WeakMap;function onSceneDispose(p){var h=p.target;h.removeEventListener("dispose",onSceneDispose),t.delete(h)}return{get:function get(p,h){var x;return!1===t.has(p)?(x=new WebGLRenderState,t.set(p,new WeakMap),t.get(p).set(h,x),p.addEventListener("dispose",onSceneDispose)):!1===t.get(p).has(h)?(x=new WebGLRenderState,t.get(p).set(h,x)):x=t.get(p).get(h),x},dispose:function dispose(){t=new WeakMap}}}function MeshDepthMaterial(t){Material.call(this),this.type="MeshDepthMaterial",this.depthPacking=Bl,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}function MeshDistanceMaterial(t){Material.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Vector3,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}MeshDepthMaterial.prototype=Object.create(Material.prototype),MeshDepthMaterial.prototype.constructor=MeshDepthMaterial,MeshDepthMaterial.prototype.isMeshDepthMaterial=!0,MeshDepthMaterial.prototype.copy=function(t){return Material.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},MeshDistanceMaterial.prototype=Object.create(Material.prototype),MeshDistanceMaterial.prototype.constructor=MeshDistanceMaterial,MeshDistanceMaterial.prototype.isMeshDistanceMaterial=!0,MeshDistanceMaterial.prototype.copy=function(t){return Material.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this};var sf="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n  float mean = 0.0;\n  float squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n    #ifdef HORIZONAL_PASS\n      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n    #else\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n    #endif\n  }\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n  float std_dev = sqrt( squared_mean - mean * mean );\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}",cf="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}";function WebGLShadowMap(t,p,h){var x=new Frustum,M=new Vector2,k=new Vector2,I=new Vector4,N=[],V=[],ee={},te={0:_c,1:bc,2:Mc},re=new ShaderMaterial({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:cf,fragmentShader:sf}),ne=re.clone();ne.defines.HORIZONAL_PASS=1;var ie=new BufferGeometry;ie.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var ae=new Mesh(ie,re),oe=this;function VSMPass(h,x){var M=p.update(ae);re.uniforms.shadow_pass.value=h.map.texture,re.uniforms.resolution.value=h.mapSize,re.uniforms.radius.value=h.radius,t.setRenderTarget(h.mapPass),t.clear(),t.renderBufferDirect(x,null,M,re,ae,null),ne.uniforms.shadow_pass.value=h.mapPass.texture,ne.uniforms.resolution.value=h.mapSize,ne.uniforms.radius.value=h.radius,t.setRenderTarget(h.map),t.clear(),t.renderBufferDirect(x,null,M,ne,ae,null)}function getDepthMaterialVariant(t,p,h){var x=t<<0|p<<1|h<<2,M=N[x];return void 0===M&&(M=new MeshDepthMaterial({depthPacking:Nl,morphTargets:t,skinning:p}),N[x]=M),M}function getDistanceMaterialVariant(t,p,h){var x=t<<0|p<<1|h<<2,M=V[x];return void 0===M&&(M=new MeshDistanceMaterial({morphTargets:t,skinning:p}),V[x]=M),M}function getDepthMaterial(p,h,x,M,k,I){var N=p.geometry,V=null,re=getDepthMaterialVariant,ne=p.customDepthMaterial;if(!0===x.isPointLight&&(re=getDistanceMaterialVariant,ne=p.customDistanceMaterial),void 0===ne){var ie=!1;!0===h.morphTargets&&(!0===N.isBufferGeometry?ie=N.morphAttributes&&N.morphAttributes.position&&N.morphAttributes.position.length>0:!0===N.isGeometry&&(ie=N.morphTargets&&N.morphTargets.length>0));var ae=!1;!0===p.isSkinnedMesh&&!0===h.skinning&&(ae=!0),V=re(ie,ae,!0===p.isInstancedMesh)}else V=ne;if(t.localClippingEnabled&&!0===h.clipShadows&&0!==h.clippingPlanes.length){var oe=V.uuid,se=h.uuid,ce=ee[oe];void 0===ce&&(ce={},ee[oe]=ce);var ue=ce[se];void 0===ue&&(ue=V.clone(),ce[se]=ue),V=ue}return V.visible=h.visible,V.wireframe=h.wireframe,V.side=I===xc?null!==h.shadowSide?h.shadowSide:h.side:null!==h.shadowSide?h.shadowSide:te[h.side],V.clipShadows=h.clipShadows,V.clippingPlanes=h.clippingPlanes,V.clipIntersection=h.clipIntersection,V.wireframeLinewidth=h.wireframeLinewidth,V.linewidth=h.linewidth,!0===x.isPointLight&&!0===V.isMeshDistanceMaterial&&(V.referencePosition.setFromMatrixPosition(x.matrixWorld),V.nearDistance=M,V.farDistance=k),V}function renderObject(h,M,k,I,N){if(!1!==h.visible){if(h.layers.test(M.layers)&&(h.isMesh||h.isLine||h.isPoints)&&(h.castShadow||h.receiveShadow&&N===xc)&&(!h.frustumCulled||x.intersectsObject(h))){h.modelViewMatrix.multiplyMatrices(k.matrixWorldInverse,h.matrixWorld);var V=p.update(h),ee=h.material;if(Array.isArray(ee))for(var te=V.groups,re=0,ne=te.length;re<ne;re++){var ie=te[re],ae=ee[ie.materialIndex];if(ae&&ae.visible){var oe=getDepthMaterial(h,ae,I,k.near,k.far,N);t.renderBufferDirect(k,null,V,oe,h,ie)}}else if(ee.visible){oe=getDepthMaterial(h,ee,I,k.near,k.far,N);t.renderBufferDirect(k,null,V,oe,h,null)}}for(var se=h.children,ce=0,ue=se.length;ce<ue;ce++)renderObject(se[ce],M,k,I,N)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=vc,this.render=function(p,N,V){if(!1!==oe.enabled&&(!1!==oe.autoUpdate||!1!==oe.needsUpdate)&&0!==p.length){var ee=t.getRenderTarget(),te=t.getActiveCubeFace(),re=t.getActiveMipmapLevel(),ne=t.state;ne.setBlending(wc),ne.buffers.color.setClear(1,1,1,1),ne.buffers.depth.setTest(!0),ne.setScissorTest(!1);for(var ie=0,ae=p.length;ie<ae;ie++){var se=p[ie],ce=se.shadow;if(void 0!==ce){M.copy(ce.mapSize);var ue=ce.getFrameExtents();if(M.multiply(ue),k.copy(ce.mapSize),(M.x>h||M.y>h)&&(M.x>h&&(k.x=Math.floor(h/ue.x),M.x=k.x*ue.x,ce.mapSize.x=k.x),M.y>h&&(k.y=Math.floor(h/ue.y),M.y=k.y*ue.y,ce.mapSize.y=k.y)),null===ce.map&&!ce.isPointLightShadow&&this.type===xc){var le={minFilter:Cu,magFilter:Cu,format:Vu};ce.map=new WebGLRenderTarget(M.x,M.y,le),ce.map.texture.name=se.name+".shadowMap",ce.mapPass=new WebGLRenderTarget(M.x,M.y,le),ce.camera.updateProjectionMatrix()}if(null===ce.map){le={minFilter:bu,magFilter:bu,format:Vu};ce.map=new WebGLRenderTarget(M.x,M.y,le),ce.map.texture.name=se.name+".shadowMap",ce.camera.updateProjectionMatrix()}t.setRenderTarget(ce.map),t.clear();for(var pe=ce.getViewportCount(),he=0;he<pe;he++){var fe=ce.getViewport(he);I.set(k.x*fe.x,k.y*fe.y,k.x*fe.z,k.y*fe.w),ne.viewport(I),ce.updateMatrices(se,he),x=ce.getFrustum(),renderObject(N,V,ce.camera,se,this.type)}ce.isPointLightShadow||this.type!==xc||VSMPass(ce,V)}}oe.needsUpdate=!1,t.setRenderTarget(ee,te,re)}}}function WebGLState(t,p,h){var x,M=h.isWebGL2;var k=new function ColorBuffer(){var p=!1,h=new Vector4,x=null,M=new Vector4(0,0,0,0);return{setMask:function setMask(h){x===h||p||(t.colorMask(h,h,h,h),x=h)},setLocked:function setLocked(t){p=t},setClear:function setClear(p,x,k,I,N){!0===N&&(p*=I,x*=I,k*=I),h.set(p,x,k,I),!1===M.equals(h)&&(t.clearColor(p,x,k,I),M.copy(h))},reset:function reset(){p=!1,x=null,M.set(-1,0,0,0)}}},I=new function DepthBuffer(){var p=!1,h=null,x=null,M=null;return{setTest:function setTest(t){t?enable(2929):disable(2929)},setMask:function setMask(x){h===x||p||(t.depthMask(x),h=x)},setFunc:function setFunc(p){if(x!==p){if(p)switch(p){case Yc:t.depthFunc(512);break;case Kc:t.depthFunc(519);break;case Xc:t.depthFunc(513);break;case qc:t.depthFunc(515);break;case Zc:t.depthFunc(514);break;case Jc:t.depthFunc(518);break;case Qc:t.depthFunc(516);break;case eu:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);x=p}},setLocked:function setLocked(t){p=t},setClear:function setClear(p){M!==p&&(t.clearDepth(p),M=p)},reset:function reset(){p=!1,h=null,x=null,M=null}}},N=new function StencilBuffer(){var p=!1,h=null,x=null,M=null,k=null,I=null,N=null,V=null,ee=null;return{setTest:function setTest(t){p||(t?enable(2960):disable(2960))},setMask:function setMask(x){h===x||p||(t.stencilMask(x),h=x)},setFunc:function setFunc(p,h,I){x===p&&M===h&&k===I||(t.stencilFunc(p,h,I),x=p,M=h,k=I)},setOp:function setOp(p,h,x){I===p&&N===h&&V===x||(t.stencilOp(p,h,x),I=p,N=h,V=x)},setLocked:function setLocked(t){p=t},setClear:function setClear(p){ee!==p&&(t.clearStencil(p),ee=p)},reset:function reset(){p=!1,h=null,x=null,M=null,k=null,I=null,N=null,V=null,ee=null}}},V=t.getParameter(34921),ee=new Uint8Array(V),te=new Uint8Array(V),re=new Uint8Array(V),ne={},ie=null,ae=null,oe=null,se=null,ce=null,ue=null,le=null,pe=null,he=null,fe=!1,de=null,me=null,ge=null,ve=null,ye=null,xe=t.getParameter(35661),be=!1,_e=0,Me=t.getParameter(7938);-1!==Me.indexOf("WebGL")?(_e=parseFloat(/^WebGL\ ([0-9])/.exec(Me)[1]),be=_e>=1):-1!==Me.indexOf("OpenGL ES")&&(_e=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(Me)[1]),be=_e>=2);var Ce=null,we={},Se=new Vector4,Te=new Vector4;function createTexture(p,h,x){var M=new Uint8Array(4),k=t.createTexture();t.bindTexture(p,k),t.texParameteri(p,10241,9728),t.texParameteri(p,10240,9728);for(var I=0;I<x;I++)t.texImage2D(h+I,0,6408,1,1,0,6408,5121,M);return k}var Ae={};function enableAttributeAndDivisor(h,x){(ee[h]=1,0===te[h]&&(t.enableVertexAttribArray(h),te[h]=1),re[h]!==x)&&((M?t:p.get("ANGLE_instanced_arrays"))[M?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](h,x),re[h]=x)}function enable(p){!0!==ne[p]&&(t.enable(p),ne[p]=!0)}function disable(p){!1!==ne[p]&&(t.disable(p),ne[p]=!1)}Ae[3553]=createTexture(3553,3553,1),Ae[34067]=createTexture(34067,34069,6),k.setClear(0,0,0,1),I.setClear(1),N.setClear(0),enable(2929),I.setFunc(qc),setFlipSided(!1),setCullFace(mc),enable(2884),setBlending(wc);var ke=_defineProperty(_defineProperty(_defineProperty({},Pc,32774),Oc,32778),Ic,32779);if(M)ke[Ec]=32775,ke[Rc]=32776;else{var De=p.get("EXT_blend_minmax");null!==De&&(ke[Ec]=De.MIN_EXT,ke[Rc]=De.MAX_EXT)}var Oe=(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(x={},Bc,0),Nc,1),Gc,768),Vc,770),$c,776),zc,774),jc,772),Fc,769),Uc,771),Hc,775),_defineProperty(x,Wc,773));function setBlending(p,h,x,M,k,I,N,V){if(p!==wc){if(ae||(enable(3042),ae=!0),p===Dc)k=k||h,I=I||x,N=N||M,h===se&&k===le||(t.blendEquationSeparate(ke[h],ke[k]),se=h,le=k),x===ce&&M===ue&&I===pe&&N===he||(t.blendFuncSeparate(Oe[x],Oe[M],Oe[I],Oe[N]),ce=x,ue=M,pe=I,he=N),oe=p,fe=null;else if(p!==oe||V!==fe){if(se===Pc&&le===Pc||(t.blendEquation(32774),se=Pc,le=Pc),V)switch(p){case Sc:t.blendFuncSeparate(1,771,1,771);break;case Tc:t.blendFunc(1,1);break;case Ac:t.blendFuncSeparate(0,0,769,771);break;case kc:t.blendFuncSeparate(0,768,0,770)}else switch(p){case Sc:t.blendFuncSeparate(770,771,1,771);break;case Tc:t.blendFunc(770,1);break;case Ac:t.blendFunc(0,769);break;case kc:t.blendFunc(0,768)}ce=null,ue=null,pe=null,he=null,oe=p,fe=V}}else ae&&(disable(3042),ae=!1)}function setFlipSided(p){de!==p&&(p?t.frontFace(2304):t.frontFace(2305),de=p)}function setCullFace(p){p!==dc?(enable(2884),p!==me&&(p===mc?t.cullFace(1029):p===gc?t.cullFace(1028):t.cullFace(1032))):disable(2884),me=p}function setPolygonOffset(p,h,x){p?(enable(32823),ve===h&&ye===x||(t.polygonOffset(h,x),ve=h,ye=x)):disable(32823)}function activeTexture(p){void 0===p&&(p=33984+xe-1),Ce!==p&&(t.activeTexture(p),Ce=p)}return{buffers:{color:k,depth:I,stencil:N},initAttributes:function initAttributes(){for(var t=0,p=ee.length;t<p;t++)ee[t]=0},enableAttribute:function enableAttribute(t){enableAttributeAndDivisor(t,0)},enableAttributeAndDivisor:enableAttributeAndDivisor,disableUnusedAttributes:function disableUnusedAttributes(){for(var p=0,h=te.length;p!==h;++p)te[p]!==ee[p]&&(t.disableVertexAttribArray(p),te[p]=0)},enable:enable,disable:disable,useProgram:function useProgram(p){return ie!==p&&(t.useProgram(p),ie=p,!0)},setBlending:setBlending,setMaterial:function setMaterial(t,p){t.side===Mc?disable(2884):enable(2884);var h=t.side===_c;p&&(h=!h),setFlipSided(h),t.blending===Sc&&!1===t.transparent?setBlending(wc):setBlending(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),I.setFunc(t.depthFunc),I.setTest(t.depthTest),I.setMask(t.depthWrite),k.setMask(t.colorWrite);var x=t.stencilWrite;N.setTest(x),x&&(N.setMask(t.stencilWriteMask),N.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),N.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),setPolygonOffset(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:setFlipSided,setCullFace:setCullFace,setLineWidth:function setLineWidth(p){p!==ge&&(be&&t.lineWidth(p),ge=p)},setPolygonOffset:setPolygonOffset,setScissorTest:function setScissorTest(t){t?enable(3089):disable(3089)},activeTexture:activeTexture,bindTexture:function bindTexture(p,h){null===Ce&&activeTexture();var x=we[Ce];void 0===x&&(x={type:void 0,texture:void 0},we[Ce]=x),x.type===p&&x.texture===h||(t.bindTexture(p,h||Ae[p]),x.type=p,x.texture=h)},unbindTexture:function unbindTexture(){var p=we[Ce];void 0!==p&&void 0!==p.type&&(t.bindTexture(p.type,null),p.type=void 0,p.texture=void 0)},compressedTexImage2D:function compressedTexImage2D(){try{t.compressedTexImage2D.apply(t,arguments)}catch(p){}},texImage2D:function texImage2D(){try{t.texImage2D.apply(t,arguments)}catch(p){}},texImage3D:function texImage3D(){try{t.texImage3D.apply(t,arguments)}catch(p){}},scissor:function scissor(p){!1===Se.equals(p)&&(t.scissor(p.x,p.y,p.z,p.w),Se.copy(p))},viewport:function viewport(p){!1===Te.equals(p)&&(t.viewport(p.x,p.y,p.z,p.w),Te.copy(p))},reset:function reset(){for(var p=0;p<te.length;p++)1===te[p]&&(t.disableVertexAttribArray(p),te[p]=0);ne={},Ce=null,we={},ie=null,oe=null,de=null,me=null,k.reset(),I.reset(),N.reset()}}}function WebGLTextures(t,p,h,x,M,k,I){var N,V=M.isWebGL2,ee=(M.maxTextures,M.maxCubemapSize),te=M.maxTextureSize,re=M.maxSamples,ne=new WeakMap,ie=!1;try{ie="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(le){}function createCanvas(t,p){return ie?new OffscreenCanvas(t,p):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function resizeImage(t,p,h,x){var M=1;if((t.width>x||t.height>x)&&(M=x/Math.max(t.width,t.height)),M<1||!0===p){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){var k=p?Yl.floorPowerOfTwo:Math.floor,I=k(M*t.width),V=k(M*t.height);void 0===N&&(N=createCanvas(I,V));var ee=h?createCanvas(I,V):N;return ee.width=I,ee.height=V,ee.getContext("2d").drawImage(t,0,0,I,V),ee}return t}return t}function isPowerOfTwo(t){return Yl.isPowerOfTwo(t.width)&&Yl.isPowerOfTwo(t.height)}function textureNeedsGenerateMipmaps(t,p){return t.generateMipmaps&&p&&t.minFilter!==bu&&t.minFilter!==Cu}function generateMipmap(p,h,M,k){t.generateMipmap(p),x.get(h).__maxMipLevel=Math.log(Math.max(M,k))*Math.LOG2E}function getInternalFormat(h,x,M){if(!1===V)return x;if(null!==h&&void 0!==t[h])return t[h];var k=x;return 6403===x&&(5126===M&&(k=33326),5131===M&&(k=33325),5121===M&&(k=33321)),6407===x&&(5126===M&&(k=34837),5131===M&&(k=34843),5121===M&&(k=32849)),6408===x&&(5126===M&&(k=34836),5131===M&&(k=34842),5121===M&&(k=32856)),33325!==k&&33326!==k&&34842!==k&&34836!==k||p.get("EXT_color_buffer_float"),k}function filterFallback(t){return t===bu||t===_u||t===Mu?9728:9729}function onTextureDispose(p){var h=p.target;h.removeEventListener("dispose",onTextureDispose),function deallocateTexture(p){var h=x.get(p);if(void 0===h.__webglInit)return;t.deleteTexture(h.__webglTexture),x.remove(p)}(h),h.isVideoTexture&&ne.delete(h),I.memory.textures--}function onRenderTargetDispose(p){var h=p.target;h.removeEventListener("dispose",onRenderTargetDispose),function deallocateRenderTarget(p){var h=x.get(p),M=x.get(p.texture);if(!p)return;void 0!==M.__webglTexture&&t.deleteTexture(M.__webglTexture);p.depthTexture&&p.depthTexture.dispose();if(p.isWebGLCubeRenderTarget)for(var k=0;k<6;k++)t.deleteFramebuffer(h.__webglFramebuffer[k]),h.__webglDepthbuffer&&t.deleteRenderbuffer(h.__webglDepthbuffer[k]);else t.deleteFramebuffer(h.__webglFramebuffer),h.__webglDepthbuffer&&t.deleteRenderbuffer(h.__webglDepthbuffer);if(p.isWebGLMultiviewRenderTarget){t.deleteTexture(h.__webglColorTexture),t.deleteTexture(h.__webglDepthStencilTexture),I.memory.textures-=2;k=0;for(var N=h.__webglViewFramebuffers.length;k<N;k++)t.deleteFramebuffer(h.__webglViewFramebuffers[k])}x.remove(p.texture),x.remove(p)}(h),I.memory.textures--}var ae=0;function setTexture2D(t,p){var M=x.get(t);if(t.isVideoTexture&&function updateVideoTexture(t){var p=I.render.frame;ne.get(t)!==p&&(ne.set(t,p),t.update())}(t),t.version>0&&M.__version!==t.version){var k=t.image;if(void 0===k);else if(!1!==k.complete)return void uploadTexture(M,t,p)}h.activeTexture(33984+p),h.bindTexture(3553,M.__webglTexture)}function setTextureCube(p,M){if(6===p.image.length){var I=x.get(p);if(p.version>0&&I.__version!==p.version){initTexture(I,p),h.activeTexture(33984+M),h.bindTexture(34067,I.__webglTexture),t.pixelStorei(37440,p.flipY);for(var N=p&&(p.isCompressedTexture||p.image[0].isCompressedTexture),te=p.image[0]&&p.image[0].isDataTexture,re=[],ne=0;ne<6;ne++)re[ne]=N||te?te?p.image[ne].image:p.image[ne]:resizeImage(p.image[ne],!1,!0,ee);var ie,ae=re[0],oe=isPowerOfTwo(ae)||V,se=k.convert(p.format),ce=k.convert(p.type),ue=getInternalFormat(p.internalFormat,se,ce);if(setTextureParameters(34067,p,oe),N){for(ne=0;ne<6;ne++){ie=re[ne].mipmaps;for(var le=0;le<ie.length;le++){var pe=ie[le];p.format!==Vu&&p.format!==Fu?null!==se&&h.compressedTexImage2D(34069+ne,le,ue,pe.width,pe.height,0,pe.data):h.texImage2D(34069+ne,le,ue,pe.width,pe.height,0,se,ce,pe.data)}}I.__maxMipLevel=ie.length-1}else{ie=p.mipmaps;for(ne=0;ne<6;ne++)if(te){h.texImage2D(34069+ne,0,ue,re[ne].width,re[ne].height,0,se,ce,re[ne].data);for(le=0;le<ie.length;le++){var he=(pe=ie[le]).image[ne].image;h.texImage2D(34069+ne,le+1,ue,he.width,he.height,0,se,ce,he.data)}}else{h.texImage2D(34069+ne,0,ue,se,ce,re[ne]);for(le=0;le<ie.length;le++){pe=ie[le];h.texImage2D(34069+ne,le+1,ue,se,ce,pe.image[ne])}}I.__maxMipLevel=ie.length}textureNeedsGenerateMipmaps(p,oe)&&generateMipmap(34067,p,ae.width,ae.height),I.__version=p.version,p.onUpdate&&p.onUpdate(p)}else h.activeTexture(33984+M),h.bindTexture(34067,I.__webglTexture)}}function setTextureCubeDynamic(t,p){h.activeTexture(33984+p),h.bindTexture(34067,x.get(t).__webglTexture)}var oe=_defineProperty(_defineProperty(_defineProperty({},vu,10497),yu,33071),xu,33648),se=_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({},bu,9728),_u,9984),Mu,9986),Cu,9729),wu,9985),Su,9987);function setTextureParameters(h,k,I){I?(t.texParameteri(h,10242,oe[k.wrapS]),t.texParameteri(h,10243,oe[k.wrapT]),32879!==h&&35866!==h||t.texParameteri(h,32882,oe[k.wrapR]),t.texParameteri(h,10240,se[k.magFilter]),t.texParameteri(h,10241,se[k.minFilter])):(t.texParameteri(h,10242,33071),t.texParameteri(h,10243,33071),32879!==h&&35866!==h||t.texParameteri(h,32882,33071),k.wrapS!==yu||k.wrapT,t.texParameteri(h,10240,filterFallback(k.magFilter)),t.texParameteri(h,10241,filterFallback(k.minFilter)),k.minFilter!==bu&&k.minFilter);var N=p.get("EXT_texture_filter_anisotropic");if(N){if(k.type===Iu&&null===p.get("OES_texture_float_linear"))return;if(k.type===Lu&&null===(V||p.get("OES_texture_half_float_linear")))return;(k.anisotropy>1||x.get(k).__currentAnisotropy)&&(t.texParameterf(h,N.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(k.anisotropy,M.getMaxAnisotropy())),x.get(k).__currentAnisotropy=k.anisotropy)}}function initTexture(p,h){void 0===p.__webglInit&&(p.__webglInit=!0,h.addEventListener("dispose",onTextureDispose),p.__webglTexture=t.createTexture(),I.memory.textures++)}function uploadTexture(p,x,M){var I=3553;x.isDataTexture2DArray&&(I=35866),x.isDataTexture3D&&(I=32879),initTexture(p,x),h.activeTexture(33984+M),h.bindTexture(I,p.__webglTexture),t.pixelStorei(37440,x.flipY),t.pixelStorei(37441,x.premultiplyAlpha),t.pixelStorei(3317,x.unpackAlignment);var N=function textureNeedsPowerOfTwo(t){return!V&&(t.wrapS!==yu||t.wrapT!==yu||t.minFilter!==bu&&t.minFilter!==Cu)}(x)&&!1===isPowerOfTwo(x.image),ee=resizeImage(x.image,N,!1,te),re=isPowerOfTwo(ee)||V,ne=k.convert(x.format),ie=k.convert(x.type),ae=getInternalFormat(x.internalFormat,ne,ie);setTextureParameters(I,x,re);var oe,se=x.mipmaps;if(x.isDepthTexture){if(ae=6402,x.type===Iu){if(!1===V)throw new Error("Float Depth Texture only supported in WebGL2.0");ae=36012}else V&&(ae=33189);x.format===zu&&6402===ae&&x.type!==Du&&x.type!==Ou&&(x.type=Du,ie=k.convert(x.type)),x.format===Hu&&(ae=34041,x.type!==Nu&&(x.type=Nu,ie=k.convert(x.type))),h.texImage2D(3553,0,ae,ee.width,ee.height,0,ne,ie,null)}else if(x.isDataTexture)if(se.length>0&&re){for(var ce=0,ue=se.length;ce<ue;ce++)oe=se[ce],h.texImage2D(3553,ce,ae,oe.width,oe.height,0,ne,ie,oe.data);x.generateMipmaps=!1,p.__maxMipLevel=se.length-1}else h.texImage2D(3553,0,ae,ee.width,ee.height,0,ne,ie,ee.data),p.__maxMipLevel=0;else if(x.isCompressedTexture){for(ce=0,ue=se.length;ce<ue;ce++)oe=se[ce],x.format!==Vu&&x.format!==Fu?null!==ne&&h.compressedTexImage2D(3553,ce,ae,oe.width,oe.height,0,oe.data):h.texImage2D(3553,ce,ae,oe.width,oe.height,0,ne,ie,oe.data);p.__maxMipLevel=se.length-1}else if(x.isDataTexture2DArray)h.texImage3D(35866,0,ae,ee.width,ee.height,ee.depth,0,ne,ie,ee.data),p.__maxMipLevel=0;else if(x.isDataTexture3D)h.texImage3D(32879,0,ae,ee.width,ee.height,ee.depth,0,ne,ie,ee.data),p.__maxMipLevel=0;else if(se.length>0&&re){for(ce=0,ue=se.length;ce<ue;ce++)oe=se[ce],h.texImage2D(3553,ce,ae,ne,ie,oe);x.generateMipmaps=!1,p.__maxMipLevel=se.length-1}else h.texImage2D(3553,0,ae,ne,ie,ee),p.__maxMipLevel=0;textureNeedsGenerateMipmaps(x,re)&&generateMipmap(I,x,ee.width,ee.height),p.__version=x.version,x.onUpdate&&x.onUpdate(x)}function setupFrameBufferTexture(p,M,I,N){var V=k.convert(M.texture.format),ee=k.convert(M.texture.type),te=getInternalFormat(M.texture.internalFormat,V,ee);h.texImage2D(N,0,te,M.width,M.height,0,V,ee,null),t.bindFramebuffer(36160,p),t.framebufferTexture2D(36160,I,N,x.get(M.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function setupRenderBufferStorage(p,h,x){if(t.bindRenderbuffer(36161,p),h.depthBuffer&&!h.stencilBuffer){if(x){var M=getRenderTargetSamples(h);t.renderbufferStorageMultisample(36161,M,33189,h.width,h.height)}else t.renderbufferStorage(36161,33189,h.width,h.height);t.framebufferRenderbuffer(36160,36096,36161,p)}else if(h.depthBuffer&&h.stencilBuffer){if(x){M=getRenderTargetSamples(h);t.renderbufferStorageMultisample(36161,M,35056,h.width,h.height)}else t.renderbufferStorage(36161,34041,h.width,h.height);t.framebufferRenderbuffer(36160,33306,36161,p)}else{var I=k.convert(h.texture.format),N=k.convert(h.texture.type),V=getInternalFormat(h.texture.internalFormat,I,N);if(x){M=getRenderTargetSamples(h);t.renderbufferStorageMultisample(36161,M,V,h.width,h.height)}else t.renderbufferStorage(36161,V,h.width,h.height)}t.bindRenderbuffer(36161,null)}function setupDepthRenderbuffer(p){var h=x.get(p),M=!0===p.isWebGLCubeRenderTarget;if(p.depthTexture){if(M)throw new Error("target.depthTexture not supported in Cube render targets");!function setupDepthTexture(p,h){if(h&&h.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,p),!h.depthTexture||!h.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");x.get(h.depthTexture).__webglTexture&&h.depthTexture.image.width===h.width&&h.depthTexture.image.height===h.height||(h.depthTexture.image.width=h.width,h.depthTexture.image.height=h.height,h.depthTexture.needsUpdate=!0),setTexture2D(h.depthTexture,0);var M=x.get(h.depthTexture).__webglTexture;if(h.depthTexture.format===zu)t.framebufferTexture2D(36160,36096,3553,M,0);else{if(h.depthTexture.format!==Hu)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,M,0)}}(h.__webglFramebuffer,p)}else if(M){h.__webglDepthbuffer=[];for(var k=0;k<6;k++)t.bindFramebuffer(36160,h.__webglFramebuffer[k]),h.__webglDepthbuffer[k]=t.createRenderbuffer(),setupRenderBufferStorage(h.__webglDepthbuffer[k],p)}else t.bindFramebuffer(36160,h.__webglFramebuffer),h.__webglDepthbuffer=t.createRenderbuffer(),setupRenderBufferStorage(h.__webglDepthbuffer,p);t.bindFramebuffer(36160,null)}function getRenderTargetSamples(t){return V&&t.isWebGLMultisampleRenderTarget?Math.min(re,t.samples):0}var ce=!1,ue=!1;this.allocateTextureUnit=function allocateTextureUnit(){var t=ae;return ae+=1,t},this.resetTextureUnits=function resetTextureUnits(){ae=0},this.setTexture2D=setTexture2D,this.setTexture2DArray=function setTexture2DArray(t,p){var M=x.get(t);t.version>0&&M.__version!==t.version?uploadTexture(M,t,p):(h.activeTexture(33984+p),h.bindTexture(35866,M.__webglTexture))},this.setTexture3D=function setTexture3D(t,p){var M=x.get(t);t.version>0&&M.__version!==t.version?uploadTexture(M,t,p):(h.activeTexture(33984+p),h.bindTexture(32879,M.__webglTexture))},this.setTextureCube=setTextureCube,this.setTextureCubeDynamic=setTextureCubeDynamic,this.setupRenderTarget=function setupRenderTarget(M){var N=x.get(M),ee=x.get(M.texture);M.addEventListener("dispose",onRenderTargetDispose),ee.__webglTexture=t.createTexture(),I.memory.textures++;var te=!0===M.isWebGLCubeRenderTarget,re=!0===M.isWebGLMultisampleRenderTarget,ne=!0===M.isWebGLMultiviewRenderTarget,ie=isPowerOfTwo(M)||V;if(te){N.__webglFramebuffer=[];for(var ae=0;ae<6;ae++)N.__webglFramebuffer[ae]=t.createFramebuffer()}else if(N.__webglFramebuffer=t.createFramebuffer(),re){if(V){N.__webglMultisampledFramebuffer=t.createFramebuffer(),N.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,N.__webglColorRenderbuffer);var oe=k.convert(M.texture.format),se=k.convert(M.texture.type),ce=getInternalFormat(M.texture.internalFormat,oe,se),ue=getRenderTargetSamples(M);t.renderbufferStorageMultisample(36161,ue,ce,M.width,M.height),t.bindFramebuffer(36160,N.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,N.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),M.depthBuffer&&(N.__webglDepthRenderbuffer=t.createRenderbuffer(),setupRenderBufferStorage(N.__webglDepthRenderbuffer,M,!0)),t.bindFramebuffer(36160,null)}}else if(ne){var le=M.width,pe=M.height,he=M.numViews;t.bindFramebuffer(36160,N.__webglFramebuffer);var fe=p.get("OVR_multiview2");I.memory.textures+=2;var de=t.createTexture();t.bindTexture(35866,de),t.texParameteri(35866,10240,9728),t.texParameteri(35866,10241,9728),t.texImage3D(35866,0,32856,le,pe,he,0,6408,5121,null),fe.framebufferTextureMultiviewOVR(36160,36064,de,0,0,he);var me=t.createTexture();t.bindTexture(35866,me),t.texParameteri(35866,10240,9728),t.texParameteri(35866,10241,9728),t.texImage3D(35866,0,35056,le,pe,he,0,34041,34042,null),fe.framebufferTextureMultiviewOVR(36160,33306,me,0,0,he);var ge=new Array(he);for(ae=0;ae<he;++ae)ge[ae]=t.createFramebuffer(),t.bindFramebuffer(36160,ge[ae]),t.framebufferTextureLayer(36160,36064,de,0,ae);N.__webglColorTexture=de,N.__webglDepthStencilTexture=me,N.__webglViewFramebuffers=ge,t.bindFramebuffer(36160,null),t.bindTexture(35866,null)}if(te){h.bindTexture(34067,ee.__webglTexture),setTextureParameters(34067,M.texture,ie);for(ae=0;ae<6;ae++)setupFrameBufferTexture(N.__webglFramebuffer[ae],M,36064,34069+ae);textureNeedsGenerateMipmaps(M.texture,ie)&&generateMipmap(34067,M.texture,M.width,M.height),h.bindTexture(34067,null)}else ne||(h.bindTexture(3553,ee.__webglTexture),setTextureParameters(3553,M.texture,ie),setupFrameBufferTexture(N.__webglFramebuffer,M,36064,3553),textureNeedsGenerateMipmaps(M.texture,ie)&&generateMipmap(3553,M.texture,M.width,M.height),h.bindTexture(3553,null));M.depthBuffer&&setupDepthRenderbuffer(M)},this.updateRenderTargetMipmap=function updateRenderTargetMipmap(t){var p=t.texture;if(textureNeedsGenerateMipmaps(p,isPowerOfTwo(t)||V)){var M=t.isWebGLCubeRenderTarget?34067:3553,k=x.get(p).__webglTexture;h.bindTexture(M,k),generateMipmap(M,p,t.width,t.height),h.bindTexture(M,null)}},this.updateMultisampleRenderTarget=function updateMultisampleRenderTarget(p){if(p.isWebGLMultisampleRenderTarget&&V){var h=x.get(p);t.bindFramebuffer(36008,h.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,h.__webglFramebuffer);var M=p.width,k=p.height,I=16384;p.depthBuffer&&(I|=256),p.stencilBuffer&&(I|=1024),t.blitFramebuffer(0,0,M,k,0,0,M,k,I,9728)}},this.safeSetTexture2D=function safeSetTexture2D(t,p){t&&t.isWebGLRenderTarget&&(!1===ce&&(ce=!0),t=t.texture),setTexture2D(t,p)},this.safeSetTextureCube=function safeSetTextureCube(t,p){t&&t.isWebGLCubeRenderTarget&&(!1===ue&&(ue=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?setTextureCube(t,p):setTextureCubeDynamic(t,p)}}function WebGLUtils(t,p,h){var x=h.isWebGL2;return{convert:function convert(t){var h;if(t===Tu)return 5121;if(t===Eu)return 32819;if(t===Ru)return 32820;if(t===Bu)return 33635;if(t===Au)return 5120;if(t===ku)return 5122;if(t===Du)return 5123;if(t===Pu)return 5124;if(t===Ou)return 5125;if(t===Iu)return 5126;if(t===Lu)return x?5131:null!==(h=p.get("OES_texture_half_float"))?h.HALF_FLOAT_OES:null;if(t===Gu)return 6406;if(t===Fu)return 6407;if(t===Vu)return 6408;if(t===Uu)return 6409;if(t===ju)return 6410;if(t===zu)return 6402;if(t===Hu)return 34041;if(t===$u)return 6403;if(t===Yu)return 36244;if(t===Ku)return 33319;if(t===Xu)return 33320;if(t===qu)return 36248;if(t===Zu)return 36249;if(t===Ju||t===Qu||t===el||t===tl){if(null===(h=p.get("WEBGL_compressed_texture_s3tc")))return null;if(t===Ju)return h.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===Qu)return h.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===el)return h.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===tl)return h.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t===rl||t===nl||t===il||t===ol){if(null===(h=p.get("WEBGL_compressed_texture_pvrtc")))return null;if(t===rl)return h.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===nl)return h.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===il)return h.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===ol)return h.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}return t===sl?null!==(h=p.get("WEBGL_compressed_texture_etc1"))?h.COMPRESSED_RGB_ETC1_WEBGL:null:t===cl||t===ul||t===ll||t===pl||t===hl||t===fl||t===dl||t===ml||t===gl||t===vl||t===yl||t===xl||t===bl||t===_l?null!==(h=p.get("WEBGL_compressed_texture_astc"))?t:null:t===Nu?x?34042:null!==(h=p.get("WEBGL_depth_texture"))?h.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}function WebGLMultiviewRenderTarget(t,p,h,x){WebGLRenderTarget.call(this,t,p,x),this.depthBuffer=!1,this.stencilBuffer=!1,this.numViews=h}function WebGLMultiview(t,p){var h,x,M,k,I,N,V,ee=2,te=t.extensions,re=t.properties,ne=0;function getCameraArray(t){return t.isArrayCamera?t.cameras:(I[0]=t,I)}this.isAvailable=function isAvailable(){if(void 0===V){var t=te.get("OVR_multiview2");if(V=null!==t&&!1===p.getContextAttributes().antialias){ne=p.getParameter(t.MAX_VIEWS_OVR),h=new WebGLMultiviewRenderTarget(0,0,ee),N=new Vector2,k=[],M=[],I=[];for(var x=0;x<ne;x++)k[x]=new Matrix4,M[x]=new Matrix3}}return V},this.attachCamera=function attachCamera(p){!1!==function isMultiviewCompatible(t){if(void 0===t.isArrayCamera)return!0;var p=t.cameras;if(p.length>ne)return!1;for(var h=1,x=p.length;h<x;h++)if(p[0].viewport.z!==p[h].viewport.z||p[0].viewport.w!==p[h].viewport.w)return!1;return!0}(p)&&(x=t.getRenderTarget(),function resizeRenderTarget(p){if(x?N.set(x.width,x.height):t.getDrawingBufferSize(N),p.isArrayCamera){var M=p.cameras[0].viewport;h.setSize(M.z,M.w),h.setNumViews(p.cameras.length)}else h.setSize(N.x,N.y),h.setNumViews(ee)}(p),t.setRenderTarget(h))},this.detachCamera=function detachCamera(M){h===t.getRenderTarget()&&(t.setRenderTarget(x),function flush(t){var x=h,M=x.numViews,k=re.get(x).__webglViewFramebuffers,I=x.width,V=x.height;if(t.isArrayCamera)for(var ee=0;ee<M;ee++){var te=t.cameras[ee].viewport,ne=te.x,ie=te.y,ae=ne+te.z,oe=ie+te.w;p.bindFramebuffer(36008,k[ee]),p.blitFramebuffer(0,0,I,V,ne,ie,ae,oe,16384,9728)}else p.bindFramebuffer(36008,k[0]),p.blitFramebuffer(0,0,I,V,0,0,N.x,N.y,16384,9728)}(M))},this.updateCameraProjectionMatricesUniform=function updateCameraProjectionMatricesUniform(t,h){for(var x=getCameraArray(t),M=0;M<x.length;M++)k[M].copy(x[M].projectionMatrix);h.setValue(p,"projectionMatrices",k)},this.updateCameraViewMatricesUniform=function updateCameraViewMatricesUniform(t,h){for(var x=getCameraArray(t),M=0;M<x.length;M++)k[M].copy(x[M].matrixWorldInverse);h.setValue(p,"viewMatrices",k)},this.updateObjectMatricesUniforms=function updateObjectMatricesUniforms(t,h,x){for(var I=getCameraArray(h),N=0;N<I.length;N++)k[N].multiplyMatrices(I[N].matrixWorldInverse,t.matrixWorld),M[N].getNormalMatrix(k[N]);x.setValue(p,"modelViewMatrices",k),x.setValue(p,"normalMatrices",M)}}function ArrayCamera(t){PerspectiveCamera.call(this),this.cameras=t||[]}function Group(){Object3D.call(this),this.type="Group"}function WebXRManager(t,p){var h=this,x=null,M=null,k="local-floor",I=null,N=[],V=new Map,ee=new PerspectiveCamera;ee.layers.enable(1),ee.viewport=new Vector4;var te=new PerspectiveCamera;te.layers.enable(2),te.viewport=new Vector4;var re=new ArrayCamera([ee,te]);re.layers.enable(1),re.layers.enable(2);var ne=null,ie=null;function onSessionEvent(t){var p=V.get(t.inputSource);p&&(p.targetRay&&p.targetRay.dispatchEvent({type:t.type}),p.grip&&p.grip.dispatchEvent({type:t.type}))}function onSessionEnd(){V.forEach((function(t,p){t.targetRay&&(t.targetRay.dispatchEvent({type:"disconnected",data:p}),t.targetRay.visible=!1),t.grip&&(t.grip.dispatchEvent({type:"disconnected",data:p}),t.grip.visible=!1)})),V.clear(),t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),ce.stop(),h.isPresenting=!1,h.dispatchEvent({type:"sessionend"})}function onRequestReferenceSpace(t){M=t,ce.setContext(x),ce.start(),h.isPresenting=!0,h.dispatchEvent({type:"sessionstart"})}function updateInputSources(t){for(var p=x.inputSources,h=0;h<N.length;h++)V.set(p[h],N[h]);for(h=0;h<t.removed.length;h++){var M=t.removed[h];(k=V.get(M))&&(k.targetRay&&k.targetRay.dispatchEvent({type:"disconnected",data:M}),k.grip&&k.grip.dispatchEvent({type:"disconnected",data:M}),V.delete(M))}for(h=0;h<t.added.length;h++){var k;M=t.added[h];(k=V.get(M))&&(k.targetRay&&k.targetRay.dispatchEvent({type:"connected",data:M}),k.grip&&k.grip.dispatchEvent({type:"connected",data:M}))}}this.enabled=!1,this.isPresenting=!1,this.getController=function(t){var p=N[t];return void 0===p&&(p={},N[t]=p),void 0===p.targetRay&&(p.targetRay=new Group,p.targetRay.matrixAutoUpdate=!1,p.targetRay.visible=!1),p.targetRay},this.getControllerGrip=function(t){var p=N[t];return void 0===p&&(p={},N[t]=p),void 0===p.grip&&(p.grip=new Group,p.grip.matrixAutoUpdate=!1,p.grip.visible=!1),p.grip},this.setFramebufferScaleFactor=function(){},this.setReferenceSpaceType=function(t){k=t},this.getReferenceSpace=function(){return M},this.getSession=function(){return x},this.setSession=function(t){if(null!==(x=t)){x.addEventListener("select",onSessionEvent),x.addEventListener("selectstart",onSessionEvent),x.addEventListener("selectend",onSessionEvent),x.addEventListener("squeeze",onSessionEvent),x.addEventListener("squeezestart",onSessionEvent),x.addEventListener("squeezeend",onSessionEvent),x.addEventListener("end",onSessionEnd);var h=p.getContextAttributes(),M={antialias:h.antialias,alpha:h.alpha,depth:h.depth,stencil:h.stencil},I=new XRWebGLLayer(x,p,M);x.updateRenderState({baseLayer:I}),x.requestReferenceSpace(k).then(onRequestReferenceSpace),x.addEventListener("inputsourceschange",updateInputSources)}};var ae=new Vector3,oe=new Vector3;function updateCamera(t,p){null===p?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(p.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}this.getCamera=function(t){re.near=te.near=ee.near=t.near,re.far=te.far=ee.far=t.far,ne===re.near&&ie===re.far||(x.updateRenderState({depthNear:re.near,depthFar:re.far}),ne=re.near,ie=re.far);var p=t.parent,h=re.cameras;updateCamera(re,p);for(var M=0;M<h.length;M++)updateCamera(h[M],p);t.matrixWorld.copy(re.matrixWorld);for(var k=t.children,I=(M=0,k.length);M<I;M++)k[M].updateMatrixWorld(!0);return function setProjectionFromUnion(t,p,h){ae.setFromMatrixPosition(p.matrixWorld),oe.setFromMatrixPosition(h.matrixWorld);var x=ae.distanceTo(oe),M=p.projectionMatrix.elements,k=h.projectionMatrix.elements,I=M[14]/(M[10]-1),N=M[14]/(M[10]+1),V=(M[9]+1)/M[5],ee=(M[9]-1)/M[5],te=(M[8]-1)/M[0],re=(k[8]+1)/k[0],ne=I*te,ie=I*re,se=x/(-te+re),ce=se*-te;p.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(ce),t.translateZ(se),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.getInverse(t.matrixWorld);var ue=I+se,le=N+se,pe=ne-ce,he=ie+(x-ce),fe=V*N/le*ue,de=ee*N/le*ue;t.projectionMatrix.makePerspective(pe,he,fe,de,ue,le)}(re,ee,te),re};var se=null;var ce=new WebGLAnimation;ce.setAnimationLoop((function onAnimationFrame(p,h){if(null!==(I=h.getViewerPose(M))){var k=I.views,V=x.renderState.baseLayer;t.setFramebuffer(V.framebuffer);for(var ee=0;ee<k.length;ee++){var te=k[ee],ne=V.getViewport(te),ie=re.cameras[ee];ie.matrix.fromArray(te.transform.matrix),ie.projectionMatrix.fromArray(te.projectionMatrix),ie.viewport.set(ne.x,ne.y,ne.width,ne.height),0===ee&&re.matrix.copy(ie.matrix)}}var ae=x.inputSources;for(ee=0;ee<N.length;ee++){var oe=N[ee],ce=ae[ee],ue=null,le=null;ce&&(oe.targetRay&&null!==(ue=h.getPose(ce.targetRaySpace,M))&&(oe.targetRay.matrix.fromArray(ue.transform.matrix),oe.targetRay.matrix.decompose(oe.targetRay.position,oe.targetRay.rotation,oe.targetRay.scale)),oe.grip&&ce.gripSpace&&null!==(le=h.getPose(ce.gripSpace,M))&&(oe.grip.matrix.fromArray(le.transform.matrix),oe.grip.matrix.decompose(oe.grip.position,oe.grip.rotation,oe.grip.scale))),oe.targetRay&&(oe.targetRay.visible=null!==ue),oe.grip&&(oe.grip.visible=null!==le)}se&&se(p,h)})),this.setAnimationLoop=function(t){se=t},this.dispose=function(){}}function WebGLRenderer(t){var p=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),h=void 0!==t.context?t.context:null,x=void 0!==t.alpha&&t.alpha,M=void 0===t.depth||t.depth,k=void 0===t.stencil||t.stencil,I=void 0!==t.antialias&&t.antialias,N=void 0===t.premultipliedAlpha||t.premultipliedAlpha,V=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,ee=void 0!==t.powerPreference?t.powerPreference:"default",te=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat,re=null,ne=null;this.domElement=p,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=kl,this.physicallyCorrectLights=!1,this.toneMapping=au,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var ie,ae,oe,se,ce,ue,le,pe,he,fe,de,me,ge,ve,ye,xe,be,_e,Me=this,Ce=!1,we=null,Se=0,Te=0,Ae=null,ke=null,De=-1,Oe={geometry:null,program:null,wireframe:!1},Ie=null,Le=null,Ee=new Vector4,Re=new Vector4,Be=null,Ne=p.width,Ge=p.height,Fe=1,Ve=null,Ue=null,je=new Vector4(0,0,Ne,Ge),We=new Vector4(0,0,Ne,Ge),ze=!1,He=new Frustum,$e=new WebGLClipping,Ye=!1,Ke=!1,Xe=new Matrix4,qe=new Vector3;function getTargetPixelRatio(){return null===Ae?Fe:1}try{var Ze={alpha:x,depth:M,stencil:k,antialias:I,premultipliedAlpha:N,preserveDrawingBuffer:V,powerPreference:ee,failIfMajorPerformanceCaveat:te,xrCompatible:!0};if(p.addEventListener("webglcontextlost",onContextLost,!1),p.addEventListener("webglcontextrestored",onContextRestore,!1),null===(ie=h||p.getContext("webgl",Ze)||p.getContext("experimental-webgl",Ze)))throw null!==p.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===ie.getShaderPrecisionFormat&&(ie.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(it){throw it}function initGLContext(){ae=new WebGLExtensions(ie),!1===(oe=new WebGLCapabilities(ie,ae,t)).isWebGL2&&(ae.get("WEBGL_depth_texture"),ae.get("OES_texture_float"),ae.get("OES_texture_half_float"),ae.get("OES_texture_half_float_linear"),ae.get("OES_standard_derivatives"),ae.get("OES_element_index_uint"),ae.get("ANGLE_instanced_arrays")),ae.get("OES_texture_float_linear"),_e=new WebGLUtils(ie,ae,oe),(se=new WebGLState(ie,ae,oe)).scissor(Re.copy(We).multiplyScalar(Fe).floor()),se.viewport(Ee.copy(je).multiplyScalar(Fe).floor()),ce=new WebGLInfo,ue=new WebGLProperties,le=new WebGLTextures(ie,ae,se,ue,oe,_e,ce),pe=new WebGLAttributes(ie,oe),he=new WebGLGeometries(ie,pe,ce),fe=new WebGLObjects(ie,he,pe,ce),ye=new WebGLMorphtargets(ie),de=new WebGLPrograms(Me,ae,oe),me=new WebGLRenderLists,ge=new WebGLRenderStates,ve=new WebGLBackground(Me,se,fe,N),xe=new WebGLBufferRenderer(ie,ae,ce,oe),be=new WebGLIndexedBufferRenderer(ie,ae,ce,oe),ce.programs=de.programs,Me.capabilities=oe,Me.extensions=ae,Me.properties=ue,Me.renderLists=me,Me.state=se,Me.info=ce}initGLContext();var Je=new WebXRManager(Me,ie);this.xr=Je;var Qe=new WebGLMultiview(Me,ie),et=new WebGLShadowMap(Me,fe,oe.maxTextureSize);function onContextLost(t){t.preventDefault(),Ce=!0}function onContextRestore(){Ce=!1,initGLContext()}function onMaterialDispose(t){var p=t.target;p.removeEventListener("dispose",onMaterialDispose),function deallocateMaterial(t){releaseMaterialProgramReference(t),ue.remove(t)}(p)}function releaseMaterialProgramReference(t){var p=ue.get(t).program;t.program=void 0,void 0!==p&&de.releaseProgram(p)}this.shadowMap=et,this.getContext=function(){return ie},this.getContextAttributes=function(){return ie.getContextAttributes()},this.forceContextLoss=function(){var t=ae.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=ae.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return Fe},this.setPixelRatio=function(t){void 0!==t&&(Fe=t,this.setSize(Ne,Ge,!1))},this.getSize=function(t){return void 0===t&&(t=new Vector2),t.set(Ne,Ge)},this.setSize=function(t,h,x){Je.isPresenting||(Ne=t,Ge=h,p.width=Math.floor(t*Fe),p.height=Math.floor(h*Fe),!1!==x&&(p.style.width=t+"px",p.style.height=h+"px"),this.setViewport(0,0,t,h))},this.getDrawingBufferSize=function(t){return void 0===t&&(t=new Vector2),t.set(Ne*Fe,Ge*Fe).floor()},this.setDrawingBufferSize=function(t,h,x){Ne=t,Ge=h,Fe=x,p.width=Math.floor(t*x),p.height=Math.floor(h*x),this.setViewport(0,0,t,h)},this.getCurrentViewport=function(t){return void 0===t&&(t=new Vector4),t.copy(Ee)},this.getViewport=function(t){return t.copy(je)},this.setViewport=function(t,p,h,x){t.isVector4?je.set(t.x,t.y,t.z,t.w):je.set(t,p,h,x),se.viewport(Ee.copy(je).multiplyScalar(Fe).floor())},this.getScissor=function(t){return t.copy(We)},this.setScissor=function(t,p,h,x){t.isVector4?We.set(t.x,t.y,t.z,t.w):We.set(t,p,h,x),se.scissor(Re.copy(We).multiplyScalar(Fe).floor())},this.getScissorTest=function(){return ze},this.setScissorTest=function(t){se.setScissorTest(ze=t)},this.setOpaqueSort=function(t){Ve=t},this.setTransparentSort=function(t){Ue=t},this.getClearColor=function(){return ve.getClearColor()},this.setClearColor=function(){ve.setClearColor.apply(ve,arguments)},this.getClearAlpha=function(){return ve.getClearAlpha()},this.setClearAlpha=function(){ve.setClearAlpha.apply(ve,arguments)},this.clear=function(t,p,h){var x=0;(void 0===t||t)&&(x|=16384),(void 0===p||p)&&(x|=256),(void 0===h||h)&&(x|=1024),ie.clear(x)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){p.removeEventListener("webglcontextlost",onContextLost,!1),p.removeEventListener("webglcontextrestored",onContextRestore,!1),me.dispose(),ge.dispose(),ue.dispose(),fe.dispose(),Je.dispose(),nt.stop()},this.renderBufferImmediate=function(t,p){se.initAttributes();var h=ue.get(t);t.hasPositions&&!h.position&&(h.position=ie.createBuffer()),t.hasNormals&&!h.normal&&(h.normal=ie.createBuffer()),t.hasUvs&&!h.uv&&(h.uv=ie.createBuffer()),t.hasColors&&!h.color&&(h.color=ie.createBuffer());var x=p.getAttributes();t.hasPositions&&(ie.bindBuffer(34962,h.position),ie.bufferData(34962,t.positionArray,35048),se.enableAttribute(x.position),ie.vertexAttribPointer(x.position,3,5126,!1,0,0)),t.hasNormals&&(ie.bindBuffer(34962,h.normal),ie.bufferData(34962,t.normalArray,35048),se.enableAttribute(x.normal),ie.vertexAttribPointer(x.normal,3,5126,!1,0,0)),t.hasUvs&&(ie.bindBuffer(34962,h.uv),ie.bufferData(34962,t.uvArray,35048),se.enableAttribute(x.uv),ie.vertexAttribPointer(x.uv,2,5126,!1,0,0)),t.hasColors&&(ie.bindBuffer(34962,h.color),ie.bufferData(34962,t.colorArray,35048),se.enableAttribute(x.color),ie.vertexAttribPointer(x.color,3,5126,!1,0,0)),se.disableUnusedAttributes(),ie.drawArrays(4,0,t.count),t.count=0};var tt=new Scene;this.renderBufferDirect=function(t,p,h,x,M,k){null===p&&(p=tt);var I=M.isMesh&&M.matrixWorld.determinant()<0,N=setProgram(t,p,x,M);se.setMaterial(x,I);var V=!1;Oe.geometry===h.id&&Oe.program===N.id&&Oe.wireframe===(!0===x.wireframe)||(Oe.geometry=h.id,Oe.program=N.id,Oe.wireframe=!0===x.wireframe,V=!0),(x.morphTargets||x.morphNormals)&&(ye.update(M,h,x,N),V=!0);var ee=h.index,te=h.attributes.position;if(null===ee){if(void 0===te||0===te.count)return}else if(0===ee.count)return;var re,ne=1;!0===x.wireframe&&(ee=he.getWireframeAttribute(h),ne=2);var ce=xe;null!==ee&&(re=pe.get(ee),(ce=be).setIndex(re)),V&&(!function setupVertexAttributes(t,p,h,x){if(!1===oe.isWebGL2&&(t.isInstancedMesh||p.isInstancedBufferGeometry)&&null===ae.get("ANGLE_instanced_arrays"))return;se.initAttributes();var M=p.attributes,k=x.getAttributes(),I=h.defaultAttributeValues;for(var N in k){var V=k[N];if(V>=0){var ee=M[N];if(void 0!==ee){var te=ee.normalized,re=ee.itemSize;if(void 0===(de=pe.get(ee)))continue;var ne=de.buffer,ce=de.type,ue=de.bytesPerElement;if(ee.isInterleavedBufferAttribute){var le=ee.data,he=le.stride,fe=ee.offset;le&&le.isInstancedInterleavedBuffer?(se.enableAttributeAndDivisor(V,le.meshPerAttribute),void 0===p.maxInstancedCount&&(p.maxInstancedCount=le.meshPerAttribute*le.count)):se.enableAttribute(V),ie.bindBuffer(34962,ne),ie.vertexAttribPointer(V,re,ce,te,he*ue,fe*ue)}else ee.isInstancedBufferAttribute?(se.enableAttributeAndDivisor(V,ee.meshPerAttribute),void 0===p.maxInstancedCount&&(p.maxInstancedCount=ee.meshPerAttribute*ee.count)):se.enableAttribute(V),ie.bindBuffer(34962,ne),ie.vertexAttribPointer(V,re,ce,te,0,0)}else if("instanceMatrix"===N){var de;if(void 0===(de=pe.get(t.instanceMatrix)))continue;ne=de.buffer,ce=de.type;se.enableAttributeAndDivisor(V+0,1),se.enableAttributeAndDivisor(V+1,1),se.enableAttributeAndDivisor(V+2,1),se.enableAttributeAndDivisor(V+3,1),ie.bindBuffer(34962,ne),ie.vertexAttribPointer(V+0,4,ce,!1,64,0),ie.vertexAttribPointer(V+1,4,ce,!1,64,16),ie.vertexAttribPointer(V+2,4,ce,!1,64,32),ie.vertexAttribPointer(V+3,4,ce,!1,64,48)}else if(void 0!==I){var me=I[N];if(void 0!==me)switch(me.length){case 2:ie.vertexAttrib2fv(V,me);break;case 3:ie.vertexAttrib3fv(V,me);break;case 4:ie.vertexAttrib4fv(V,me);break;default:ie.vertexAttrib1fv(V,me)}}}}se.disableUnusedAttributes()}(M,h,x,N),null!==ee&&ie.bindBuffer(34963,re.buffer));var ue=null!==ee?ee.count:te.count,le=h.drawRange.start*ne,fe=h.drawRange.count*ne,de=null!==k?k.start*ne:0,me=null!==k?k.count*ne:1/0,ge=Math.max(le,de),ve=Math.min(ue,le+fe,de+me)-1,_e=Math.max(0,ve-ge+1);if(0!==_e){if(M.isMesh)!0===x.wireframe?(se.setLineWidth(x.wireframeLinewidth*getTargetPixelRatio()),ce.setMode(1)):ce.setMode(4);else if(M.isLine){var Me=x.linewidth;void 0===Me&&(Me=1),se.setLineWidth(Me*getTargetPixelRatio()),M.isLineSegments?ce.setMode(1):M.isLineLoop?ce.setMode(2):ce.setMode(3)}else M.isPoints?ce.setMode(0):M.isSprite&&ce.setMode(4);M.isInstancedMesh?ce.renderInstances(h,ge,_e,M.count):h.isInstancedBufferGeometry?ce.renderInstances(h,ge,_e,h.maxInstancedCount):ce.render(ge,_e)}},this.compile=function(t,p){(ne=ge.get(t,p)).init(),t.traverse((function(t){t.isLight&&(ne.pushLight(t),t.castShadow&&ne.pushShadow(t))})),ne.setupLights(p);var h={};t.traverse((function(p){if(p.material)if(Array.isArray(p.material))for(var x=0;x<p.material.length;x++)p.material[x].uuid in h==!1&&(initMaterial(p.material[x],t,p),h[p.material[x].uuid]=!0);else p.material.uuid in h==!1&&(initMaterial(p.material,t,p),h[p.material.uuid]=!0)}))};var rt=null;var nt=new WebGLAnimation;function projectObject(t,p,h,x){if(!1!==t.visible){if(t.layers.test(p.layers))if(t.isGroup)h=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(p);else if(t.isLight)ne.pushLight(t),t.castShadow&&ne.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||He.intersectsSprite(t)){x&&qe.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Xe);var M=fe.update(t);(k=t.material).visible&&re.push(t,M,k,h,qe.z,null)}}else if(t.isImmediateRenderObject)x&&qe.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Xe),re.push(t,null,t.material,h,qe.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==ce.render.frame&&(t.skeleton.update(),t.skeleton.frame=ce.render.frame),!t.frustumCulled||He.intersectsObject(t))){x&&qe.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Xe);M=fe.update(t);var k=t.material;if(Array.isArray(k))for(var I=M.groups,N=0,V=I.length;N<V;N++){var ee=I[N],te=k[ee.materialIndex];te&&te.visible&&re.push(t,M,te,h,qe.z,ee)}else k.visible&&re.push(t,M,k,h,qe.z,null)}var ie=t.children;for(N=0,V=ie.length;N<V;N++)projectObject(ie[N],p,h,x)}}function renderObjects(t,p,h,x){for(var M=0,k=t.length;M<k;M++){var I=t[M],N=I.object,V=I.geometry,ee=void 0===x?I.material:x,te=I.group;if(h.isArrayCamera)if(Le=h,Je.enabled&&Qe.isAvailable())renderObject(N,p,h,V,ee,te);else for(var re=h.cameras,ie=0,ae=re.length;ie<ae;ie++){var oe=re[ie];N.layers.test(oe.layers)&&(se.viewport(Ee.copy(oe.viewport)),ne.setupLights(oe),renderObject(N,p,oe,V,ee,te))}else Le=null,renderObject(N,p,h,V,ee,te)}}function renderObject(t,p,h,x,M,k){if(t.onBeforeRender(Me,p,h,x,M,k),ne=ge.get(p,Le||h),t.modelViewMatrix.multiplyMatrices(h.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){var I=setProgram(h,p,M,t);se.setMaterial(M),Oe.geometry=null,Oe.program=null,Oe.wireframe=!1,function renderObjectImmediate(t,p){t.render((function(t){Me.renderBufferImmediate(t,p)}))}(t,I)}else Me.renderBufferDirect(h,p,x,M,t,k);t.onAfterRender(Me,p,h,x,M,k),ne=ge.get(p,Le||h)}function initMaterial(t,p,h){var x=ue.get(t),M=ne.state.lights,k=ne.state.shadowsArray,I=M.state.version,N=de.getParameters(t,M.state,k,p,$e.numPlanes,$e.numIntersection,h),V=de.getProgramCacheKey(N),ee=x.program,te=!0;if(void 0===ee)t.addEventListener("dispose",onMaterialDispose);else if(ee.cacheKey!==V)releaseMaterialProgramReference(t);else if(x.lightsStateVersion!==I)x.lightsStateVersion=I,te=!1;else{if(void 0!==N.shaderID)return;te=!1}te&&(ee=de.acquireProgram(N,V),x.program=ee,x.uniforms=N.uniforms,x.environment=t.isMeshStandardMaterial?p.environment:null,x.outputEncoding=Me.outputEncoding,t.program=ee);var re=ee.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var ie=0;ie<Me.maxMorphTargets;ie++)re["morphTarget"+ie]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;for(ie=0;ie<Me.maxMorphNormals;ie++)re["morphNormal"+ie]>=0&&t.numSupportedMorphNormals++}var ae=x.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(x.numClippingPlanes=$e.numPlanes,x.numIntersection=$e.numIntersection,ae.clippingPlanes=$e.uniform),x.fog=p.fog,x.needsLights=function materialNeedsLights(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),x.lightsStateVersion=I,x.needsLights&&(ae.ambientLightColor.value=M.state.ambient,ae.lightProbe.value=M.state.probe,ae.directionalLights.value=M.state.directional,ae.spotLights.value=M.state.spot,ae.rectAreaLights.value=M.state.rectArea,ae.pointLights.value=M.state.point,ae.hemisphereLights.value=M.state.hemi,ae.directionalShadowMap.value=M.state.directionalShadowMap,ae.directionalShadowMatrix.value=M.state.directionalShadowMatrix,ae.spotShadowMap.value=M.state.spotShadowMap,ae.spotShadowMatrix.value=M.state.spotShadowMatrix,ae.pointShadowMap.value=M.state.pointShadowMap,ae.pointShadowMatrix.value=M.state.pointShadowMatrix);var oe=x.program.getUniforms(),se=WebGLUniforms.seqWithValue(oe.seq,ae);x.uniformsList=se}function setProgram(t,p,h,x){le.resetTextureUnits();var M=p.fog,k=h.isMeshStandardMaterial?p.environment:null,I=ue.get(h),N=ne.state.lights;if(Ye&&(Ke||t!==Ie)){var V=t===Ie&&h.id===De;$e.setState(h.clippingPlanes,h.clipIntersection,h.clipShadows,t,I,V)}h.version===I.__version?void 0===I.program||h.fog&&I.fog!==M||I.environment!==k||I.needsLights&&I.lightsStateVersion!==N.state.version?initMaterial(h,p,x):void 0===I.numClippingPlanes||I.numClippingPlanes===$e.numPlanes&&I.numIntersection===$e.numIntersection?I.outputEncoding!==Me.outputEncoding&&initMaterial(h,p,x):initMaterial(h,p,x):(initMaterial(h,p,x),I.__version=h.version);var ee=!1,te=!1,re=!1,ae=I.program,ce=ae.getUniforms(),pe=I.uniforms;if(se.useProgram(ae.program)&&(ee=!0,te=!0,re=!0),h.id!==De&&(De=h.id,te=!0),ee||Ie!==t){if(ae.numMultiviewViews>0?Qe.updateCameraProjectionMatricesUniform(t,ce):ce.setValue(ie,"projectionMatrix",t.projectionMatrix),oe.logarithmicDepthBuffer&&ce.setValue(ie,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),Ie!==t&&(Ie=t,te=!0,re=!0),h.isShaderMaterial||h.isMeshPhongMaterial||h.isMeshToonMaterial||h.isMeshStandardMaterial||h.envMap){var he=ce.map.cameraPosition;void 0!==he&&he.setValue(ie,qe.setFromMatrixPosition(t.matrixWorld))}(h.isMeshPhongMaterial||h.isMeshToonMaterial||h.isMeshLambertMaterial||h.isMeshBasicMaterial||h.isMeshStandardMaterial||h.isShaderMaterial)&&ce.setValue(ie,"isOrthographic",!0===t.isOrthographicCamera),(h.isMeshPhongMaterial||h.isMeshToonMaterial||h.isMeshLambertMaterial||h.isMeshBasicMaterial||h.isMeshStandardMaterial||h.isShaderMaterial||h.skinning)&&(ae.numMultiviewViews>0?Qe.updateCameraViewMatricesUniform(t,ce):ce.setValue(ie,"viewMatrix",t.matrixWorldInverse))}if(h.skinning){ce.setOptional(ie,x,"bindMatrix"),ce.setOptional(ie,x,"bindMatrixInverse");var fe=x.skeleton;if(fe){var de=fe.bones;if(oe.floatVertexTextures){if(void 0===fe.boneTexture){var me=Math.sqrt(4*de.length);me=Yl.ceilPowerOfTwo(me),me=Math.max(me,4);var ge=new Float32Array(me*me*4);ge.set(fe.boneMatrices);var ve=new DataTexture(ge,me,me,Vu,Iu);fe.boneMatrices=ge,fe.boneTexture=ve,fe.boneTextureSize=me}ce.setValue(ie,"boneTexture",fe.boneTexture,le),ce.setValue(ie,"boneTextureSize",fe.boneTextureSize)}else ce.setOptional(ie,fe,"boneMatrices")}}return(te||I.receiveShadow!==x.receiveShadow)&&(I.receiveShadow=x.receiveShadow,ce.setValue(ie,"receiveShadow",x.receiveShadow)),te&&(ce.setValue(ie,"toneMappingExposure",Me.toneMappingExposure),ce.setValue(ie,"toneMappingWhitePoint",Me.toneMappingWhitePoint),I.needsLights&&function markUniformsLightsNeedsUpdate(t,p){t.ambientLightColor.needsUpdate=p,t.lightProbe.needsUpdate=p,t.directionalLights.needsUpdate=p,t.pointLights.needsUpdate=p,t.spotLights.needsUpdate=p,t.rectAreaLights.needsUpdate=p,t.hemisphereLights.needsUpdate=p}(pe,re),M&&h.fog&&function refreshUniformsFog(t,p){t.fogColor.value.copy(p.color),p.isFog?(t.fogNear.value=p.near,t.fogFar.value=p.far):p.isFogExp2&&(t.fogDensity.value=p.density)}(pe,M),h.isMeshBasicMaterial?refreshUniformsCommon(pe,h):h.isMeshLambertMaterial?(refreshUniformsCommon(pe,h),function refreshUniformsLambert(t,p){p.emissiveMap&&(t.emissiveMap.value=p.emissiveMap)}(pe,h)):h.isMeshToonMaterial?(refreshUniformsCommon(pe,h),function refreshUniformsToon(t,p){t.specular.value.copy(p.specular),t.shininess.value=Math.max(p.shininess,1e-4),p.gradientMap&&(t.gradientMap.value=p.gradientMap);p.emissiveMap&&(t.emissiveMap.value=p.emissiveMap);p.bumpMap&&(t.bumpMap.value=p.bumpMap,t.bumpScale.value=p.bumpScale,p.side===_c&&(t.bumpScale.value*=-1));p.normalMap&&(t.normalMap.value=p.normalMap,t.normalScale.value.copy(p.normalScale),p.side===_c&&t.normalScale.value.negate());p.displacementMap&&(t.displacementMap.value=p.displacementMap,t.displacementScale.value=p.displacementScale,t.displacementBias.value=p.displacementBias)}(pe,h)):h.isMeshPhongMaterial?(refreshUniformsCommon(pe,h),function refreshUniformsPhong(t,p){t.specular.value.copy(p.specular),t.shininess.value=Math.max(p.shininess,1e-4),p.emissiveMap&&(t.emissiveMap.value=p.emissiveMap);p.bumpMap&&(t.bumpMap.value=p.bumpMap,t.bumpScale.value=p.bumpScale,p.side===_c&&(t.bumpScale.value*=-1));p.normalMap&&(t.normalMap.value=p.normalMap,t.normalScale.value.copy(p.normalScale),p.side===_c&&t.normalScale.value.negate());p.displacementMap&&(t.displacementMap.value=p.displacementMap,t.displacementScale.value=p.displacementScale,t.displacementBias.value=p.displacementBias)}(pe,h)):h.isMeshStandardMaterial?(refreshUniformsCommon(pe,h,k),h.isMeshPhysicalMaterial?function refreshUniformsPhysical(t,p,h){refreshUniformsStandard(t,p,h),t.reflectivity.value=p.reflectivity,t.clearcoat.value=p.clearcoat,t.clearcoatRoughness.value=p.clearcoatRoughness,p.sheen&&t.sheen.value.copy(p.sheen);p.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(p.clearcoatNormalScale),t.clearcoatNormalMap.value=p.clearcoatNormalMap,p.side===_c&&t.clearcoatNormalScale.value.negate());t.transparency.value=p.transparency}(pe,h,k):refreshUniformsStandard(pe,h,k)):h.isMeshMatcapMaterial?(refreshUniformsCommon(pe,h),function refreshUniformsMatcap(t,p){p.matcap&&(t.matcap.value=p.matcap);p.bumpMap&&(t.bumpMap.value=p.bumpMap,t.bumpScale.value=p.bumpScale,p.side===_c&&(t.bumpScale.value*=-1));p.normalMap&&(t.normalMap.value=p.normalMap,t.normalScale.value.copy(p.normalScale),p.side===_c&&t.normalScale.value.negate());p.displacementMap&&(t.displacementMap.value=p.displacementMap,t.displacementScale.value=p.displacementScale,t.displacementBias.value=p.displacementBias)}(pe,h)):h.isMeshDepthMaterial?(refreshUniformsCommon(pe,h),function refreshUniformsDepth(t,p){p.displacementMap&&(t.displacementMap.value=p.displacementMap,t.displacementScale.value=p.displacementScale,t.displacementBias.value=p.displacementBias)}(pe,h)):h.isMeshDistanceMaterial?(refreshUniformsCommon(pe,h),function refreshUniformsDistance(t,p){p.displacementMap&&(t.displacementMap.value=p.displacementMap,t.displacementScale.value=p.displacementScale,t.displacementBias.value=p.displacementBias);t.referencePosition.value.copy(p.referencePosition),t.nearDistance.value=p.nearDistance,t.farDistance.value=p.farDistance}(pe,h)):h.isMeshNormalMaterial?(refreshUniformsCommon(pe,h),function refreshUniformsNormal(t,p){p.bumpMap&&(t.bumpMap.value=p.bumpMap,t.bumpScale.value=p.bumpScale,p.side===_c&&(t.bumpScale.value*=-1));p.normalMap&&(t.normalMap.value=p.normalMap,t.normalScale.value.copy(p.normalScale),p.side===_c&&t.normalScale.value.negate());p.displacementMap&&(t.displacementMap.value=p.displacementMap,t.displacementScale.value=p.displacementScale,t.displacementBias.value=p.displacementBias)}(pe,h)):h.isLineBasicMaterial?(!function refreshUniformsLine(t,p){t.diffuse.value.copy(p.color),t.opacity.value=p.opacity}(pe,h),h.isLineDashedMaterial&&function refreshUniformsDash(t,p){t.dashSize.value=p.dashSize,t.totalSize.value=p.dashSize+p.gapSize,t.scale.value=p.scale}(pe,h)):h.isPointsMaterial?function refreshUniformsPoints(t,p){t.diffuse.value.copy(p.color),t.opacity.value=p.opacity,t.size.value=p.size*Fe,t.scale.value=.5*Ge,p.map&&(t.map.value=p.map);p.alphaMap&&(t.alphaMap.value=p.alphaMap);var h;p.map?h=p.map:p.alphaMap&&(h=p.alphaMap);void 0!==h&&(!0===h.matrixAutoUpdate&&h.updateMatrix(),t.uvTransform.value.copy(h.matrix))}(pe,h):h.isSpriteMaterial?function refreshUniformsSprites(t,p){t.diffuse.value.copy(p.color),t.opacity.value=p.opacity,t.rotation.value=p.rotation,p.map&&(t.map.value=p.map);p.alphaMap&&(t.alphaMap.value=p.alphaMap);var h;p.map?h=p.map:p.alphaMap&&(h=p.alphaMap);void 0!==h&&(!0===h.matrixAutoUpdate&&h.updateMatrix(),t.uvTransform.value.copy(h.matrix))}(pe,h):h.isShadowMaterial&&(pe.color.value.copy(h.color),pe.opacity.value=h.opacity),void 0!==pe.ltc_1&&(pe.ltc_1.value=jh.LTC_1),void 0!==pe.ltc_2&&(pe.ltc_2.value=jh.LTC_2),WebGLUniforms.upload(ie,I.uniformsList,pe,le),h.isShaderMaterial&&(h.uniformsNeedUpdate=!1)),h.isShaderMaterial&&!0===h.uniformsNeedUpdate&&(WebGLUniforms.upload(ie,I.uniformsList,pe,le),h.uniformsNeedUpdate=!1),h.isSpriteMaterial&&ce.setValue(ie,"center",x.center),ae.numMultiviewViews>0?Qe.updateObjectMatricesUniforms(x,t,ce):(ce.setValue(ie,"modelViewMatrix",x.modelViewMatrix),ce.setValue(ie,"normalMatrix",x.normalMatrix)),ce.setValue(ie,"modelMatrix",x.matrixWorld),ae}function refreshUniformsCommon(t,p,h){t.opacity.value=p.opacity,p.color&&t.diffuse.value.copy(p.color),p.emissive&&t.emissive.value.copy(p.emissive).multiplyScalar(p.emissiveIntensity),p.map&&(t.map.value=p.map),p.alphaMap&&(t.alphaMap.value=p.alphaMap),p.specularMap&&(t.specularMap.value=p.specularMap);var x,M,k=p.envMap||h;k&&(t.envMap.value=k,t.flipEnvMap.value=k.isCubeTexture?-1:1,t.reflectivity.value=p.reflectivity,t.refractionRatio.value=p.refractionRatio,t.maxMipLevel.value=ue.get(k).__maxMipLevel),p.lightMap&&(t.lightMap.value=p.lightMap,t.lightMapIntensity.value=p.lightMapIntensity),p.aoMap&&(t.aoMap.value=p.aoMap,t.aoMapIntensity.value=p.aoMapIntensity),p.map?x=p.map:p.specularMap?x=p.specularMap:p.displacementMap?x=p.displacementMap:p.normalMap?x=p.normalMap:p.bumpMap?x=p.bumpMap:p.roughnessMap?x=p.roughnessMap:p.metalnessMap?x=p.metalnessMap:p.alphaMap?x=p.alphaMap:p.emissiveMap&&(x=p.emissiveMap),void 0!==x&&(x.isWebGLRenderTarget&&(x=x.texture),!0===x.matrixAutoUpdate&&x.updateMatrix(),t.uvTransform.value.copy(x.matrix)),p.aoMap?M=p.aoMap:p.lightMap&&(M=p.lightMap),void 0!==M&&(M.isWebGLRenderTarget&&(M=M.texture),!0===M.matrixAutoUpdate&&M.updateMatrix(),t.uv2Transform.value.copy(M.matrix))}function refreshUniformsStandard(t,p,h){t.roughness.value=p.roughness,t.metalness.value=p.metalness,p.roughnessMap&&(t.roughnessMap.value=p.roughnessMap),p.metalnessMap&&(t.metalnessMap.value=p.metalnessMap),p.emissiveMap&&(t.emissiveMap.value=p.emissiveMap),p.bumpMap&&(t.bumpMap.value=p.bumpMap,t.bumpScale.value=p.bumpScale,p.side===_c&&(t.bumpScale.value*=-1)),p.normalMap&&(t.normalMap.value=p.normalMap,t.normalScale.value.copy(p.normalScale),p.side===_c&&t.normalScale.value.negate()),p.displacementMap&&(t.displacementMap.value=p.displacementMap,t.displacementScale.value=p.displacementScale,t.displacementBias.value=p.displacementBias),(p.envMap||h)&&(t.envMapIntensity.value=p.envMapIntensity)}nt.setAnimationLoop((function onAnimationFrame(t){Je.isPresenting||rt&&rt(t)})),"undefined"!=typeof window&&nt.setContext(window),this.setAnimationLoop=function(t){rt=t,Je.setAnimationLoop(t),nt.start()},this.render=function(t,p){var h,x;if(void 0!==arguments[2]&&(h=arguments[2]),void 0!==arguments[3]&&(x=arguments[3]),p&&p.isCamera&&!Ce){Oe.geometry=null,Oe.program=null,Oe.wireframe=!1,De=-1,Ie=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===p.parent&&p.updateMatrixWorld(),Je.enabled&&Je.isPresenting&&(p=Je.getCamera(p)),(ne=ge.get(t,p)).init(),t.onBeforeRender(Me,t,p,h||Ae),Xe.multiplyMatrices(p.projectionMatrix,p.matrixWorldInverse),He.setFromProjectionMatrix(Xe),Ke=this.localClippingEnabled,Ye=$e.init(this.clippingPlanes,Ke,p),(re=me.get(t,p)).init(),projectObject(t,p,0,Me.sortObjects),!0===Me.sortObjects&&re.sort(Ve,Ue),Ye&&$e.beginShadows();var M=ne.state.shadowsArray;et.render(M,t,p),ne.setupLights(p),Ye&&$e.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==h&&this.setRenderTarget(h),Je.enabled&&Qe.isAvailable()&&Qe.attachCamera(p),ve.render(re,t,p,x);var k=re.opaque,I=re.transparent;if(t.overrideMaterial){var N=t.overrideMaterial;k.length&&renderObjects(k,t,p,N),I.length&&renderObjects(I,t,p,N)}else k.length&&renderObjects(k,t,p),I.length&&renderObjects(I,t,p);t.onAfterRender(Me,t,p),null!==Ae&&(le.updateRenderTargetMipmap(Ae),le.updateMultisampleRenderTarget(Ae)),se.buffers.depth.setTest(!0),se.buffers.depth.setMask(!0),se.buffers.color.setMask(!0),se.setPolygonOffset(!1),Je.enabled&&Qe.isAvailable()&&Qe.detachCamera(p),re=null,ne=null}},this.setFramebuffer=function(t){we!==t&&null===Ae&&ie.bindFramebuffer(36160,t),we=t},this.getActiveCubeFace=function(){return Se},this.getActiveMipmapLevel=function(){return Te},this.getRenderTarget=function(){return Ae},this.setRenderTarget=function(t,p,h){Ae=t,Se=p,Te=h,t&&void 0===ue.get(t).__webglFramebuffer&&le.setupRenderTarget(t);var x=we,M=!1;if(t){var k=ue.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(x=k[p||0],M=!0):x=t.isWebGLMultisampleRenderTarget?ue.get(t).__webglMultisampledFramebuffer:k,Ee.copy(t.viewport),Re.copy(t.scissor),Be=t.scissorTest}else Ee.copy(je).multiplyScalar(Fe).floor(),Re.copy(We).multiplyScalar(Fe).floor(),Be=ze;if(ke!==x&&(ie.bindFramebuffer(36160,x),ke=x),se.viewport(Ee),se.scissor(Re),se.setScissorTest(Be),M){var I=ue.get(t.texture);ie.framebufferTexture2D(36160,36064,34069+(p||0),I.__webglTexture,h||0)}},this.readRenderTargetPixels=function(t,p,h,x,M,k,I){if(t&&t.isWebGLRenderTarget){var N=ue.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==I&&(N=N[I]),N){var V=!1;N!==ke&&(ie.bindFramebuffer(36160,N),V=!0);try{var ee=t.texture,te=ee.format,re=ee.type;if(te!==Vu&&_e.convert(te)!==ie.getParameter(35739))return;if(!(re===Tu||_e.convert(re)===ie.getParameter(35738)||re===Iu&&(oe.isWebGL2||ae.get("OES_texture_float")||ae.get("WEBGL_color_buffer_float"))||re===Lu&&(oe.isWebGL2?ae.get("EXT_color_buffer_float"):ae.get("EXT_color_buffer_half_float"))))return;36053===ie.checkFramebufferStatus(36160)&&p>=0&&p<=t.width-x&&h>=0&&h<=t.height-M&&ie.readPixels(p,h,x,M,_e.convert(te),_e.convert(re),k)}finally{V&&ie.bindFramebuffer(36160,ke)}}}},this.copyFramebufferToTexture=function(t,p,h){void 0===h&&(h=0);var x=Math.pow(2,-h),M=Math.floor(p.image.width*x),k=Math.floor(p.image.height*x),I=_e.convert(p.format);le.setTexture2D(p,0),ie.copyTexImage2D(3553,h,I,t.x,t.y,M,k,0),se.unbindTexture()},this.copyTextureToTexture=function(t,p,h,x){var M=p.image.width,k=p.image.height,I=_e.convert(h.format),N=_e.convert(h.type);le.setTexture2D(h,0),p.isDataTexture?ie.texSubImage2D(3553,x||0,t.x,t.y,M,k,I,N,p.image.data):ie.texSubImage2D(3553,x||0,t.x,t.y,I,N,p.image),se.unbindTexture()},this.initTexture=function(t){le.setTexture2D(t,0),se.unbindTexture()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function FogExp2(t,p){this.name="",this.color=new Color(t),this.density=void 0!==p?p:25e-5}function Fog(t,p,h){this.name="",this.color=new Color(t),this.near=void 0!==p?p:1,this.far=void 0!==h?h:1e3}function InterleavedBuffer(t,p){this.array=t,this.stride=p,this.count=void 0!==t?t.length/p:0,this.usage=jl,this.updateRange={offset:0,count:-1},this.version=0}WebGLMultiviewRenderTarget.prototype=Object.assign(Object.create(WebGLRenderTarget.prototype),{constructor:WebGLMultiviewRenderTarget,isWebGLMultiviewRenderTarget:!0,copy:function copy(t){return WebGLRenderTarget.prototype.copy.call(this,t),this.numViews=t.numViews,this},setNumViews:function setNumViews(t){return this.numViews!==t&&(this.numViews=t,this.dispose()),this}}),ArrayCamera.prototype=Object.assign(Object.create(PerspectiveCamera.prototype),{constructor:ArrayCamera,isArrayCamera:!0}),Group.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Group,isGroup:!0}),Object.assign(WebXRManager.prototype,EventDispatcher.prototype),Object.assign(FogExp2.prototype,{isFogExp2:!0,clone:function clone(){return new FogExp2(this.color,this.density)},toJSON:function toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(Fog.prototype,{isFog:!0,clone:function clone(){return new Fog(this.color,this.near,this.far)},toJSON:function toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(InterleavedBuffer.prototype,"needsUpdate",{set:function set(t){!0===t&&this.version++}}),Object.assign(InterleavedBuffer.prototype,{isInterleavedBuffer:!0,onUploadCallback:function onUploadCallback(){},setUsage:function setUsage(t){return this.usage=t,this},copy:function copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function copyAt(t,p,h){t*=this.stride,h*=p.stride;for(var x=0,M=this.stride;x<M;x++)this.array[t+x]=p.array[h+x];return this},set:function set(t,p){return void 0===p&&(p=0),this.array.set(t,p),this},clone:function clone(){return(new this.constructor).copy(this)},onUpload:function onUpload(t){return this.onUploadCallback=t,this}});var uf,lf=new Vector3;function InterleavedBufferAttribute(t,p,h,x){this.data=t,this.itemSize=p,this.offset=h,this.normalized=!0===x}function SpriteMaterial(t){Material.call(this),this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}Object.defineProperties(InterleavedBufferAttribute.prototype,{count:{get:function get(){return this.data.count}},array:{get:function get(){return this.data.array}}}),Object.assign(InterleavedBufferAttribute.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function applyMatrix4(t){for(var p=0,h=this.data.count;p<h;p++)lf.x=this.getX(p),lf.y=this.getY(p),lf.z=this.getZ(p),lf.applyMatrix4(t),this.setXYZ(p,lf.x,lf.y,lf.z);return this},setX:function setX(t,p){return this.data.array[t*this.data.stride+this.offset]=p,this},setY:function setY(t,p){return this.data.array[t*this.data.stride+this.offset+1]=p,this},setZ:function setZ(t,p){return this.data.array[t*this.data.stride+this.offset+2]=p,this},setW:function setW(t,p){return this.data.array[t*this.data.stride+this.offset+3]=p,this},getX:function getX(t){return this.data.array[t*this.data.stride+this.offset]},getY:function getY(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function getZ(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function getW(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function setXY(t,p,h){return t=t*this.data.stride+this.offset,this.data.array[t+0]=p,this.data.array[t+1]=h,this},setXYZ:function setXYZ(t,p,h,x){return t=t*this.data.stride+this.offset,this.data.array[t+0]=p,this.data.array[t+1]=h,this.data.array[t+2]=x,this},setXYZW:function setXYZW(t,p,h,x,M){return t=t*this.data.stride+this.offset,this.data.array[t+0]=p,this.data.array[t+1]=h,this.data.array[t+2]=x,this.data.array[t+3]=M,this}}),SpriteMaterial.prototype=Object.create(Material.prototype),SpriteMaterial.prototype.constructor=SpriteMaterial,SpriteMaterial.prototype.isSpriteMaterial=!0,SpriteMaterial.prototype.copy=function(t){return Material.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};var pf=new Vector3,hf=new Vector3,ff=new Vector3,df=new Vector2,mf=new Vector2,gf=new Matrix4,vf=new Vector3,yf=new Vector3,xf=new Vector3,bf=new Vector2,_f=new Vector2,Mf=new Vector2;function Sprite(t){if(Object3D.call(this),this.type="Sprite",void 0===uf){uf=new BufferGeometry;var p=new InterleavedBuffer(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);uf.setIndex([0,1,2,0,2,3]),uf.setAttribute("position",new InterleavedBufferAttribute(p,3,0,!1)),uf.setAttribute("uv",new InterleavedBufferAttribute(p,2,3,!1))}this.geometry=uf,this.material=void 0!==t?t:new SpriteMaterial,this.center=new Vector2(.5,.5)}function transformVertex(t,p,h,x,M,k){df.subVectors(t,h).addScalar(.5).multiply(x),void 0!==M?(mf.x=k*df.x-M*df.y,mf.y=M*df.x+k*df.y):mf.copy(df),t.copy(p),t.x+=mf.x,t.y+=mf.y,t.applyMatrix4(gf)}Sprite.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Sprite,isSprite:!0,raycast:function raycast(t,p){t.camera,hf.setFromMatrixScale(this.matrixWorld),gf.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),ff.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&hf.multiplyScalar(-ff.z);var h,x,M=this.material.rotation;0!==M&&(x=Math.cos(M),h=Math.sin(M));var k=this.center;transformVertex(vf.set(-.5,-.5,0),ff,k,hf,h,x),transformVertex(yf.set(.5,-.5,0),ff,k,hf,h,x),transformVertex(xf.set(.5,.5,0),ff,k,hf,h,x),bf.set(0,0),_f.set(1,0),Mf.set(1,1);var I=t.ray.intersectTriangle(vf,yf,xf,!1,pf);if(null!==I||(transformVertex(yf.set(-.5,.5,0),ff,k,hf,h,x),_f.set(0,1),null!==(I=t.ray.intersectTriangle(vf,xf,yf,!1,pf)))){var N=t.ray.origin.distanceTo(pf);N<t.near||N>t.far||p.push({distance:N,point:pf.clone(),uv:Triangle.getUV(pf,vf,yf,xf,bf,_f,Mf,new Vector2),face:null,object:this})}},clone:function clone(){return new this.constructor(this.material).copy(this)},copy:function copy(t){return Object3D.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}});var Cf=new Vector3,wf=new Vector3;function LOD(){Object3D.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function SkinnedMesh(t,p){t&&t.isGeometry,Mesh.call(this,t,p),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4}LOD.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:LOD,isLOD:!0,copy:function copy(t){Object3D.prototype.copy.call(this,t,!1);for(var p=t.levels,h=0,x=p.length;h<x;h++){var M=p[h];this.addLevel(M.object.clone(),M.distance)}return this.autoUpdate=t.autoUpdate,this},addLevel:function addLevel(t,p){void 0===p&&(p=0),p=Math.abs(p);for(var h=this.levels,x=0;x<h.length&&!(p<h[x].distance);x++);return h.splice(x,0,{distance:p,object:t}),this.add(t),this},getObjectForDistance:function getObjectForDistance(t){var p=this.levels;if(p.length>0){for(var h=1,x=p.length;h<x&&!(t<p[h].distance);h++);return p[h-1].object}return null},raycast:function raycast(t,p){if(this.levels.length>0){Cf.setFromMatrixPosition(this.matrixWorld);var h=t.ray.origin.distanceTo(Cf);this.getObjectForDistance(h).raycast(t,p)}},update:function update(t){var p=this.levels;if(p.length>1){Cf.setFromMatrixPosition(t.matrixWorld),wf.setFromMatrixPosition(this.matrixWorld);var h=Cf.distanceTo(wf);p[0].object.visible=!0;for(var x=1,M=p.length;x<M&&h>=p[x].distance;x++)p[x-1].object.visible=!1,p[x].object.visible=!0;for(;x<M;x++)p[x].object.visible=!1}},toJSON:function toJSON(t){var p=Object3D.prototype.toJSON.call(this,t);!1===this.autoUpdate&&(p.object.autoUpdate=!1),p.object.levels=[];for(var h=this.levels,x=0,M=h.length;x<M;x++){var k=h[x];p.object.levels.push({object:k.object.uuid,distance:k.distance})}return p}}),SkinnedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:SkinnedMesh,isSkinnedMesh:!0,bind:function bind(t,p){this.skeleton=t,void 0===p&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),p=this.matrixWorld),this.bindMatrix.copy(p),this.bindMatrixInverse.getInverse(p)},pose:function pose(){this.skeleton.pose()},normalizeSkinWeights:function normalizeSkinWeights(){for(var t=new Vector4,p=this.geometry.attributes.skinWeight,h=0,x=p.count;h<x;h++){t.x=p.getX(h),t.y=p.getY(h),t.z=p.getZ(h),t.w=p.getW(h);var M=1/t.manhattanLength();M!==1/0?t.multiplyScalar(M):t.set(1,0,0,0),p.setXYZW(h,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function updateMatrixWorld(t){Mesh.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode&&this.bindMatrixInverse.getInverse(this.bindMatrix)},clone:function clone(){return new this.constructor(this.geometry,this.material).copy(this)}});var Sf=new Matrix4,Tf=new Matrix4;function Skeleton(t,p){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===p)this.calculateInverses();else if(this.bones.length===p.length)this.boneInverses=p.slice(0);else{this.boneInverses=[];for(var h=0,x=this.bones.length;h<x;h++)this.boneInverses.push(new Matrix4)}}function Bone(){Object3D.call(this),this.type="Bone"}Object.assign(Skeleton.prototype,{calculateInverses:function calculateInverses(){this.boneInverses=[];for(var t=0,p=this.bones.length;t<p;t++){var h=new Matrix4;this.bones[t]&&h.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(h)}},pose:function pose(){var t,p,h;for(p=0,h=this.bones.length;p<h;p++)(t=this.bones[p])&&t.matrixWorld.getInverse(this.boneInverses[p]);for(p=0,h=this.bones.length;p<h;p++)(t=this.bones[p])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function update(){for(var t=this.bones,p=this.boneInverses,h=this.boneMatrices,x=this.boneTexture,M=0,k=t.length;M<k;M++){var I=t[M]?t[M].matrixWorld:Tf;Sf.multiplyMatrices(I,p[M]),Sf.toArray(h,16*M)}void 0!==x&&(x.needsUpdate=!0)},clone:function clone(){return new Skeleton(this.bones,this.boneInverses)},getBoneByName:function getBoneByName(t){for(var p=0,h=this.bones.length;p<h;p++){var x=this.bones[p];if(x.name===t)return x}}}),Bone.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Bone,isBone:!0});var Af=new Matrix4,kf=new Matrix4,Df=[],Pf=new Mesh;function InstancedMesh(t,p,h){Mesh.call(this,t,p),this.instanceMatrix=new BufferAttribute(new Float32Array(16*h),16),this.count=h,this.frustumCulled=!1}function LineBasicMaterial(t){Material.call(this),this.type="LineBasicMaterial",this.color=new Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(t)}InstancedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:InstancedMesh,isInstancedMesh:!0,getMatrixAt:function getMatrixAt(t,p){p.fromArray(this.instanceMatrix.array,16*t)},raycast:function raycast(t,p){var h=this.matrixWorld,x=this.count;if(Pf.geometry=this.geometry,Pf.material=this.material,void 0!==Pf.material)for(var M=0;M<x;M++)this.getMatrixAt(M,Af),kf.multiplyMatrices(h,Af),Pf.matrixWorld=kf,Pf.raycast(t,Df),Df.length>0&&(Df[0].instanceId=M,Df[0].object=this,p.push(Df[0]),Df.length=0)},setMatrixAt:function setMatrixAt(t,p){p.toArray(this.instanceMatrix.array,16*t)},updateMorphTargets:function updateMorphTargets(){}}),LineBasicMaterial.prototype=Object.create(Material.prototype),LineBasicMaterial.prototype.constructor=LineBasicMaterial,LineBasicMaterial.prototype.isLineBasicMaterial=!0,LineBasicMaterial.prototype.copy=function(t){return Material.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this};var Of=new Vector3,If=new Vector3,Lf=new Matrix4,Ef=new Ray,Rf=new Sphere;function Line(t,p,h){Object3D.call(this),this.type="Line",this.geometry=void 0!==t?t:new BufferGeometry,this.material=void 0!==p?p:new LineBasicMaterial}Line.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Line,isLine:!0,computeLineDistances:function computeLineDistances(){var t=this.geometry;if(t.isBufferGeometry){if(null===t.index){for(var p=t.attributes.position,h=[0],x=1,M=p.count;x<M;x++)Of.fromBufferAttribute(p,x-1),If.fromBufferAttribute(p,x),h[x]=h[x-1],h[x]+=Of.distanceTo(If);t.setAttribute("lineDistance",new Float32BufferAttribute(h,1))}}else if(t.isGeometry){var k=t.vertices;(h=t.lineDistances)[0]=0;for(x=1,M=k.length;x<M;x++)h[x]=h[x-1],h[x]+=k[x-1].distanceTo(k[x])}return this},raycast:function raycast(t,p){var h=t.linePrecision,x=this.geometry,M=this.matrixWorld;if(null===x.boundingSphere&&x.computeBoundingSphere(),Rf.copy(x.boundingSphere),Rf.applyMatrix4(M),Rf.radius+=h,!1!==t.ray.intersectsSphere(Rf)){Lf.getInverse(M),Ef.copy(t.ray).applyMatrix4(Lf);var k=h/((this.scale.x+this.scale.y+this.scale.z)/3),I=k*k,N=new Vector3,V=new Vector3,ee=new Vector3,te=new Vector3,re=this&&this.isLineSegments?2:1;if(x.isBufferGeometry){var ne=x.index,ie=x.attributes.position.array;if(null!==ne)for(var ae=ne.array,oe=0,se=ae.length-1;oe<se;oe+=re){var ce=ae[oe],ue=ae[oe+1];if(N.fromArray(ie,3*ce),V.fromArray(ie,3*ue),!(Ef.distanceSqToSegment(N,V,te,ee)>I))te.applyMatrix4(this.matrixWorld),(he=t.ray.origin.distanceTo(te))<t.near||he>t.far||p.push({distance:he,point:ee.clone().applyMatrix4(this.matrixWorld),index:oe,face:null,faceIndex:null,object:this})}else for(oe=0,se=ie.length/3-1;oe<se;oe+=re){if(N.fromArray(ie,3*oe),V.fromArray(ie,3*oe+3),!(Ef.distanceSqToSegment(N,V,te,ee)>I))te.applyMatrix4(this.matrixWorld),(he=t.ray.origin.distanceTo(te))<t.near||he>t.far||p.push({distance:he,point:ee.clone().applyMatrix4(this.matrixWorld),index:oe,face:null,faceIndex:null,object:this})}}else if(x.isGeometry){var le=x.vertices,pe=le.length;for(oe=0;oe<pe-1;oe+=re){var he;if(!(Ef.distanceSqToSegment(le[oe],le[oe+1],te,ee)>I))te.applyMatrix4(this.matrixWorld),(he=t.ray.origin.distanceTo(te))<t.near||he>t.far||p.push({distance:he,point:ee.clone().applyMatrix4(this.matrixWorld),index:oe,face:null,faceIndex:null,object:this})}}}},clone:function clone(){return new this.constructor(this.geometry,this.material).copy(this)}});var Bf=new Vector3,Nf=new Vector3;function LineSegments(t,p){Line.call(this,t,p),this.type="LineSegments"}function LineLoop(t,p){Line.call(this,t,p),this.type="LineLoop"}function PointsMaterial(t){Material.call(this),this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}LineSegments.prototype=Object.assign(Object.create(Line.prototype),{constructor:LineSegments,isLineSegments:!0,computeLineDistances:function computeLineDistances(){var t=this.geometry;if(t.isBufferGeometry){if(null===t.index){for(var p=t.attributes.position,h=[],x=0,M=p.count;x<M;x+=2)Bf.fromBufferAttribute(p,x),Nf.fromBufferAttribute(p,x+1),h[x]=0===x?0:h[x-1],h[x+1]=h[x]+Bf.distanceTo(Nf);t.setAttribute("lineDistance",new Float32BufferAttribute(h,1))}}else if(t.isGeometry){var k=t.vertices;for(h=t.lineDistances,x=0,M=k.length;x<M;x+=2)Bf.copy(k[x]),Nf.copy(k[x+1]),h[x]=0===x?0:h[x-1],h[x+1]=h[x]+Bf.distanceTo(Nf)}return this}}),LineLoop.prototype=Object.assign(Object.create(Line.prototype),{constructor:LineLoop,isLineLoop:!0}),PointsMaterial.prototype=Object.create(Material.prototype),PointsMaterial.prototype.constructor=PointsMaterial,PointsMaterial.prototype.isPointsMaterial=!0,PointsMaterial.prototype.copy=function(t){return Material.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this};var Gf=new Matrix4,Ff=new Ray,Vf=new Sphere,Uf=new Vector3;function Points(t,p){Object3D.call(this),this.type="Points",this.geometry=void 0!==t?t:new BufferGeometry,this.material=void 0!==p?p:new PointsMaterial,this.updateMorphTargets()}function testPoint(t,p,h,x,M,k,I){var N=Ff.distanceSqToPoint(t);if(N<h){var V=new Vector3;Ff.closestPointToPoint(t,V),V.applyMatrix4(x);var ee=M.ray.origin.distanceTo(V);if(ee<M.near||ee>M.far)return;k.push({distance:ee,distanceToRay:Math.sqrt(N),point:V,index:p,face:null,object:I})}}function VideoTexture(t,p,h,x,M,k,I,N,V){Texture.call(this,t,p,h,x,M,k,I,N,V),this.format=void 0!==I?I:Fu,this.minFilter=void 0!==k?k:Cu,this.magFilter=void 0!==M?M:Cu,this.generateMipmaps=!1}function CompressedTexture(t,p,h,x,M,k,I,N,V,ee,te,re){Texture.call(this,null,k,I,N,V,ee,x,M,te,re),this.image={width:p,height:h},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function CanvasTexture(t,p,h,x,M,k,I,N,V){Texture.call(this,t,p,h,x,M,k,I,N,V),this.needsUpdate=!0}function DepthTexture(t,p,h,x,M,k,I,N,V,ee){if((ee=void 0!==ee?ee:zu)!==zu&&ee!==Hu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===h&&ee===zu&&(h=Du),void 0===h&&ee===Hu&&(h=Nu),Texture.call(this,null,x,M,k,I,N,ee,h,V),this.image={width:t,height:p},this.magFilter=void 0!==I?I:bu,this.minFilter=void 0!==N?N:bu,this.flipY=!1,this.generateMipmaps=!1}function WireframeGeometry(t){BufferGeometry.call(this),this.type="WireframeGeometry";var p,h,x,M,k,I,N,V,ee,te,re=[],ne=[0,0],ie={},ae=["a","b","c"];if(t&&t.isGeometry){var oe=t.faces;for(p=0,x=oe.length;p<x;p++){var se=oe[p];for(h=0;h<3;h++)N=se[ae[h]],V=se[ae[(h+1)%3]],ne[0]=Math.min(N,V),ne[1]=Math.max(N,V),void 0===ie[ee=ne[0]+","+ne[1]]&&(ie[ee]={index1:ne[0],index2:ne[1]})}for(ee in ie)I=ie[ee],te=t.vertices[I.index1],re.push(te.x,te.y,te.z),te=t.vertices[I.index2],re.push(te.x,te.y,te.z)}else if(t&&t.isBufferGeometry){var ce,ue,le,pe,he,fe,de;if(te=new Vector3,null!==t.index){for(ce=t.attributes.position,ue=t.index,0===(le=t.groups).length&&(le=[{start:0,count:ue.count,materialIndex:0}]),M=0,k=le.length;M<k;++M)for(p=he=(pe=le[M]).start,x=he+pe.count;p<x;p+=3)for(h=0;h<3;h++)N=ue.getX(p+h),V=ue.getX(p+(h+1)%3),ne[0]=Math.min(N,V),ne[1]=Math.max(N,V),void 0===ie[ee=ne[0]+","+ne[1]]&&(ie[ee]={index1:ne[0],index2:ne[1]});for(ee in ie)I=ie[ee],te.fromBufferAttribute(ce,I.index1),re.push(te.x,te.y,te.z),te.fromBufferAttribute(ce,I.index2),re.push(te.x,te.y,te.z)}else for(p=0,x=(ce=t.attributes.position).count/3;p<x;p++)for(h=0;h<3;h++)fe=3*p+h,te.fromBufferAttribute(ce,fe),re.push(te.x,te.y,te.z),de=3*p+(h+1)%3,te.fromBufferAttribute(ce,de),re.push(te.x,te.y,te.z)}this.setAttribute("position",new Float32BufferAttribute(re,3))}function ParametricGeometry(t,p,h){Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:p,stacks:h},this.fromBufferGeometry(new ParametricBufferGeometry(t,p,h)),this.mergeVertices()}function ParametricBufferGeometry(t,p,h){BufferGeometry.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:p,stacks:h};var x,M,k=[],I=[],N=[],V=[],ee=1e-5,te=new Vector3,re=new Vector3,ne=new Vector3,ie=new Vector3,ae=new Vector3;t.length;var oe=p+1;for(x=0;x<=h;x++){var se=x/h;for(M=0;M<=p;M++){var ce=M/p;t(ce,se,re),I.push(re.x,re.y,re.z),ce-ee>=0?(t(ce-ee,se,ne),ie.subVectors(re,ne)):(t(ce+ee,se,ne),ie.subVectors(ne,re)),se-ee>=0?(t(ce,se-ee,ne),ae.subVectors(re,ne)):(t(ce,se+ee,ne),ae.subVectors(ne,re)),te.crossVectors(ie,ae).normalize(),N.push(te.x,te.y,te.z),V.push(ce,se)}}for(x=0;x<h;x++)for(M=0;M<p;M++){var ue=x*oe+M,le=x*oe+M+1,pe=(x+1)*oe+M+1,he=(x+1)*oe+M;k.push(ue,le,he),k.push(le,pe,he)}this.setIndex(k),this.setAttribute("position",new Float32BufferAttribute(I,3)),this.setAttribute("normal",new Float32BufferAttribute(N,3)),this.setAttribute("uv",new Float32BufferAttribute(V,2))}function PolyhedronGeometry(t,p,h,x){Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:p,radius:h,detail:x},this.fromBufferGeometry(new PolyhedronBufferGeometry(t,p,h,x)),this.mergeVertices()}function PolyhedronBufferGeometry(t,p,h,x){BufferGeometry.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:p,radius:h,detail:x},h=h||1;var M=[],k=[];function subdivideFace(t,p,h,x){var M,k,I=Math.pow(2,x),N=[];for(M=0;M<=I;M++){N[M]=[];var V=t.clone().lerp(h,M/I),ee=p.clone().lerp(h,M/I),te=I-M;for(k=0;k<=te;k++)N[M][k]=0===k&&M===I?V:V.clone().lerp(ee,k/te)}for(M=0;M<I;M++)for(k=0;k<2*(I-M)-1;k++){var re=Math.floor(k/2);k%2==0?(pushVertex(N[M][re+1]),pushVertex(N[M+1][re]),pushVertex(N[M][re])):(pushVertex(N[M][re+1]),pushVertex(N[M+1][re+1]),pushVertex(N[M+1][re]))}}function pushVertex(t){M.push(t.x,t.y,t.z)}function getVertexByIndex(p,h){var x=3*p;h.x=t[x+0],h.y=t[x+1],h.z=t[x+2]}function correctUV(t,p,h,x){x<0&&1===t.x&&(k[p]=t.x-1),0===h.x&&0===h.z&&(k[p]=x/2/Math.PI+.5)}function azimuth(t){return Math.atan2(t.z,-t.x)}!function subdivide(t){for(var h=new Vector3,x=new Vector3,M=new Vector3,k=0;k<p.length;k+=3)getVertexByIndex(p[k+0],h),getVertexByIndex(p[k+1],x),getVertexByIndex(p[k+2],M),subdivideFace(h,x,M,t)}(x=x||0),function applyRadius(t){for(var p=new Vector3,h=0;h<M.length;h+=3)p.x=M[h+0],p.y=M[h+1],p.z=M[h+2],p.normalize().multiplyScalar(t),M[h+0]=p.x,M[h+1]=p.y,M[h+2]=p.z}(h),function generateUVs(){for(var t=new Vector3,p=0;p<M.length;p+=3){t.x=M[p+0],t.y=M[p+1],t.z=M[p+2];var h=azimuth(t)/2/Math.PI+.5,x=(I=t,Math.atan2(-I.y,Math.sqrt(I.x*I.x+I.z*I.z))/Math.PI+.5);k.push(h,1-x)}var I;(function correctUVs(){for(var t=new Vector3,p=new Vector3,h=new Vector3,x=new Vector3,I=new Vector2,N=new Vector2,V=new Vector2,ee=0,te=0;ee<M.length;ee+=9,te+=6){t.set(M[ee+0],M[ee+1],M[ee+2]),p.set(M[ee+3],M[ee+4],M[ee+5]),h.set(M[ee+6],M[ee+7],M[ee+8]),I.set(k[te+0],k[te+1]),N.set(k[te+2],k[te+3]),V.set(k[te+4],k[te+5]),x.copy(t).add(p).add(h).divideScalar(3);var re=azimuth(x);correctUV(I,te+0,t,re),correctUV(N,te+2,p,re),correctUV(V,te+4,h,re)}})(),function correctSeam(){for(var t=0;t<k.length;t+=6){var p=k[t+0],h=k[t+2],x=k[t+4],M=Math.max(p,h,x),I=Math.min(p,h,x);M>.9&&I<.1&&(p<.2&&(k[t+0]+=1),h<.2&&(k[t+2]+=1),x<.2&&(k[t+4]+=1))}}()}(),this.setAttribute("position",new Float32BufferAttribute(M,3)),this.setAttribute("normal",new Float32BufferAttribute(M.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(k,2)),0===x?this.computeVertexNormals():this.normalizeNormals()}function TetrahedronGeometry(t,p){Geometry.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:p},this.fromBufferGeometry(new TetrahedronBufferGeometry(t,p)),this.mergeVertices()}function TetrahedronBufferGeometry(t,p){PolyhedronBufferGeometry.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,p),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:p}}function OctahedronGeometry(t,p){Geometry.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:p},this.fromBufferGeometry(new OctahedronBufferGeometry(t,p)),this.mergeVertices()}function OctahedronBufferGeometry(t,p){PolyhedronBufferGeometry.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,p),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:p}}function IcosahedronGeometry(t,p){Geometry.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:p},this.fromBufferGeometry(new IcosahedronBufferGeometry(t,p)),this.mergeVertices()}function IcosahedronBufferGeometry(t,p){var h=(1+Math.sqrt(5))/2,x=[-1,h,0,1,h,0,-1,-h,0,1,-h,0,0,-1,h,0,1,h,0,-1,-h,0,1,-h,h,0,-1,h,0,1,-h,0,-1,-h,0,1];PolyhedronBufferGeometry.call(this,x,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,p),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:p}}function DodecahedronGeometry(t,p){Geometry.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:p},this.fromBufferGeometry(new DodecahedronBufferGeometry(t,p)),this.mergeVertices()}function DodecahedronBufferGeometry(t,p){var h=(1+Math.sqrt(5))/2,x=1/h,M=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-x,-h,0,-x,h,0,x,-h,0,x,h,-x,-h,0,-x,h,0,x,-h,0,x,h,0,-h,0,-x,h,0,-x,-h,0,x,h,0,x];PolyhedronBufferGeometry.call(this,M,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,p),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:p}}function TubeGeometry(t,p,h,x,M,k){Geometry.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:p,radius:h,radialSegments:x,closed:M};var I=new TubeBufferGeometry(t,p,h,x,M);this.tangents=I.tangents,this.normals=I.normals,this.binormals=I.binormals,this.fromBufferGeometry(I),this.mergeVertices()}function TubeBufferGeometry(t,p,h,x,M){BufferGeometry.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:p,radius:h,radialSegments:x,closed:M},p=p||64,h=h||1,x=x||8,M=M||!1;var k=t.computeFrenetFrames(p,M);this.tangents=k.tangents,this.normals=k.normals,this.binormals=k.binormals;var I,N,V=new Vector3,ee=new Vector3,te=new Vector2,re=new Vector3,ne=[],ie=[],ae=[],oe=[];function generateSegment(M){re=t.getPointAt(M/p,re);var I=k.normals[M],te=k.binormals[M];for(N=0;N<=x;N++){var ae=N/x*Math.PI*2,oe=Math.sin(ae),se=-Math.cos(ae);ee.x=se*I.x+oe*te.x,ee.y=se*I.y+oe*te.y,ee.z=se*I.z+oe*te.z,ee.normalize(),ie.push(ee.x,ee.y,ee.z),V.x=re.x+h*ee.x,V.y=re.y+h*ee.y,V.z=re.z+h*ee.z,ne.push(V.x,V.y,V.z)}}!function generateBufferData(){for(I=0;I<p;I++)generateSegment(I);generateSegment(!1===M?p:0),function generateUVs(){for(I=0;I<=p;I++)for(N=0;N<=x;N++)te.x=I/p,te.y=N/x,ae.push(te.x,te.y)}(),function generateIndices(){for(N=1;N<=p;N++)for(I=1;I<=x;I++){var t=(x+1)*(N-1)+(I-1),h=(x+1)*N+(I-1),M=(x+1)*N+I,k=(x+1)*(N-1)+I;oe.push(t,h,k),oe.push(h,M,k)}}()}(),this.setIndex(oe),this.setAttribute("position",new Float32BufferAttribute(ne,3)),this.setAttribute("normal",new Float32BufferAttribute(ie,3)),this.setAttribute("uv",new Float32BufferAttribute(ae,2))}function TorusKnotGeometry(t,p,h,x,M,k,I){Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:p,tubularSegments:h,radialSegments:x,p:M,q:k},this.fromBufferGeometry(new TorusKnotBufferGeometry(t,p,h,x,M,k)),this.mergeVertices()}function TorusKnotBufferGeometry(t,p,h,x,M,k){BufferGeometry.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:p,tubularSegments:h,radialSegments:x,p:M,q:k},t=t||1,p=p||.4,h=Math.floor(h)||64,x=Math.floor(x)||8,M=M||2,k=k||3;var I,N,V=[],ee=[],te=[],re=[],ne=new Vector3,ie=new Vector3,ae=new Vector3,oe=new Vector3,se=new Vector3,ce=new Vector3,ue=new Vector3;for(I=0;I<=h;++I){var le=I/h*M*Math.PI*2;for(calculatePositionOnCurve(le,M,k,t,ae),calculatePositionOnCurve(le+.01,M,k,t,oe),ce.subVectors(oe,ae),ue.addVectors(oe,ae),se.crossVectors(ce,ue),ue.crossVectors(se,ce),se.normalize(),ue.normalize(),N=0;N<=x;++N){var pe=N/x*Math.PI*2,he=-p*Math.cos(pe),fe=p*Math.sin(pe);ne.x=ae.x+(he*ue.x+fe*se.x),ne.y=ae.y+(he*ue.y+fe*se.y),ne.z=ae.z+(he*ue.z+fe*se.z),ee.push(ne.x,ne.y,ne.z),ie.subVectors(ne,ae).normalize(),te.push(ie.x,ie.y,ie.z),re.push(I/h),re.push(N/x)}}for(N=1;N<=h;N++)for(I=1;I<=x;I++){var de=(x+1)*(N-1)+(I-1),me=(x+1)*N+(I-1),ge=(x+1)*N+I,ve=(x+1)*(N-1)+I;V.push(de,me,ve),V.push(me,ge,ve)}function calculatePositionOnCurve(t,p,h,x,M){var k=Math.cos(t),I=Math.sin(t),N=h/p*t,V=Math.cos(N);M.x=x*(2+V)*.5*k,M.y=x*(2+V)*I*.5,M.z=x*Math.sin(N)*.5}this.setIndex(V),this.setAttribute("position",new Float32BufferAttribute(ee,3)),this.setAttribute("normal",new Float32BufferAttribute(te,3)),this.setAttribute("uv",new Float32BufferAttribute(re,2))}function TorusGeometry(t,p,h,x,M){Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:p,radialSegments:h,tubularSegments:x,arc:M},this.fromBufferGeometry(new TorusBufferGeometry(t,p,h,x,M)),this.mergeVertices()}function TorusBufferGeometry(t,p,h,x,M){BufferGeometry.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:p,radialSegments:h,tubularSegments:x,arc:M},t=t||1,p=p||.4,h=Math.floor(h)||8,x=Math.floor(x)||6,M=M||2*Math.PI;var k,I,N=[],V=[],ee=[],te=[],re=new Vector3,ne=new Vector3,ie=new Vector3;for(k=0;k<=h;k++)for(I=0;I<=x;I++){var ae=I/x*M,oe=k/h*Math.PI*2;ne.x=(t+p*Math.cos(oe))*Math.cos(ae),ne.y=(t+p*Math.cos(oe))*Math.sin(ae),ne.z=p*Math.sin(oe),V.push(ne.x,ne.y,ne.z),re.x=t*Math.cos(ae),re.y=t*Math.sin(ae),ie.subVectors(ne,re).normalize(),ee.push(ie.x,ie.y,ie.z),te.push(I/x),te.push(k/h)}for(k=1;k<=h;k++)for(I=1;I<=x;I++){var se=(x+1)*k+I-1,ce=(x+1)*(k-1)+I-1,ue=(x+1)*(k-1)+I,le=(x+1)*k+I;N.push(se,ce,le),N.push(ce,ue,le)}this.setIndex(N),this.setAttribute("position",new Float32BufferAttribute(V,3)),this.setAttribute("normal",new Float32BufferAttribute(ee,3)),this.setAttribute("uv",new Float32BufferAttribute(te,2))}Points.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Points,isPoints:!0,raycast:function raycast(t,p){var h=this.geometry,x=this.matrixWorld,M=t.params.Points.threshold;if(null===h.boundingSphere&&h.computeBoundingSphere(),Vf.copy(h.boundingSphere),Vf.applyMatrix4(x),Vf.radius+=M,!1!==t.ray.intersectsSphere(Vf)){Gf.getInverse(x),Ff.copy(t.ray).applyMatrix4(Gf);var k=M/((this.scale.x+this.scale.y+this.scale.z)/3),I=k*k;if(h.isBufferGeometry){var N=h.index,V=h.attributes.position.array;if(null!==N)for(var ee=N.array,te=0,re=ee.length;te<re;te++){var ne=ee[te];Uf.fromArray(V,3*ne),testPoint(Uf,ne,I,x,t,p,this)}else{te=0;for(var ie=V.length/3;te<ie;te++)Uf.fromArray(V,3*te),testPoint(Uf,te,I,x,t,p,this)}}else{var ae=h.vertices;for(te=0,ie=ae.length;te<ie;te++)testPoint(ae[te],te,I,x,t,p,this)}}},updateMorphTargets:function updateMorphTargets(){var t,p,h,x=this.geometry;if(x.isBufferGeometry){var M=x.morphAttributes,k=Object.keys(M);if(k.length>0){var I=M[k[0]];if(void 0!==I)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,p=I.length;t<p;t++)h=I[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=t}}else{var N=x.morphTargets;void 0!==N&&N.length}},clone:function clone(){return new this.constructor(this.geometry,this.material).copy(this)}}),VideoTexture.prototype=Object.assign(Object.create(Texture.prototype),{constructor:VideoTexture,isVideoTexture:!0,update:function update(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),CompressedTexture.prototype=Object.create(Texture.prototype),CompressedTexture.prototype.constructor=CompressedTexture,CompressedTexture.prototype.isCompressedTexture=!0,CanvasTexture.prototype=Object.create(Texture.prototype),CanvasTexture.prototype.constructor=CanvasTexture,CanvasTexture.prototype.isCanvasTexture=!0,DepthTexture.prototype=Object.create(Texture.prototype),DepthTexture.prototype.constructor=DepthTexture,DepthTexture.prototype.isDepthTexture=!0,WireframeGeometry.prototype=Object.create(BufferGeometry.prototype),WireframeGeometry.prototype.constructor=WireframeGeometry,ParametricGeometry.prototype=Object.create(Geometry.prototype),ParametricGeometry.prototype.constructor=ParametricGeometry,ParametricBufferGeometry.prototype=Object.create(BufferGeometry.prototype),ParametricBufferGeometry.prototype.constructor=ParametricBufferGeometry,PolyhedronGeometry.prototype=Object.create(Geometry.prototype),PolyhedronGeometry.prototype.constructor=PolyhedronGeometry,PolyhedronBufferGeometry.prototype=Object.create(BufferGeometry.prototype),PolyhedronBufferGeometry.prototype.constructor=PolyhedronBufferGeometry,TetrahedronGeometry.prototype=Object.create(Geometry.prototype),TetrahedronGeometry.prototype.constructor=TetrahedronGeometry,TetrahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype),TetrahedronBufferGeometry.prototype.constructor=TetrahedronBufferGeometry,OctahedronGeometry.prototype=Object.create(Geometry.prototype),OctahedronGeometry.prototype.constructor=OctahedronGeometry,OctahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype),OctahedronBufferGeometry.prototype.constructor=OctahedronBufferGeometry,IcosahedronGeometry.prototype=Object.create(Geometry.prototype),IcosahedronGeometry.prototype.constructor=IcosahedronGeometry,IcosahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype),IcosahedronBufferGeometry.prototype.constructor=IcosahedronBufferGeometry,DodecahedronGeometry.prototype=Object.create(Geometry.prototype),DodecahedronGeometry.prototype.constructor=DodecahedronGeometry,DodecahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype),DodecahedronBufferGeometry.prototype.constructor=DodecahedronBufferGeometry,TubeGeometry.prototype=Object.create(Geometry.prototype),TubeGeometry.prototype.constructor=TubeGeometry,TubeBufferGeometry.prototype=Object.create(BufferGeometry.prototype),TubeBufferGeometry.prototype.constructor=TubeBufferGeometry,TubeBufferGeometry.prototype.toJSON=function(){var t=BufferGeometry.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t},TorusKnotGeometry.prototype=Object.create(Geometry.prototype),TorusKnotGeometry.prototype.constructor=TorusKnotGeometry,TorusKnotBufferGeometry.prototype=Object.create(BufferGeometry.prototype),TorusKnotBufferGeometry.prototype.constructor=TorusKnotBufferGeometry,TorusGeometry.prototype=Object.create(Geometry.prototype),TorusGeometry.prototype.constructor=TorusGeometry,TorusBufferGeometry.prototype=Object.create(BufferGeometry.prototype),TorusBufferGeometry.prototype.constructor=TorusBufferGeometry;var jf=function triangulate(t,p,h){h=h||2;var x,M,k,I,N,V,ee,te=p&&p.length,re=te?p[0]*h:t.length,ne=linkedList(t,0,re,h,!0),ie=[];if(!ne||ne.next===ne.prev)return ie;if(te&&(ne=function eliminateHoles(t,p,h,x){var M,k,I,N=[];for(M=0,k=p.length;M<k;M++)(I=linkedList(t,p[M]*x,M<k-1?p[M+1]*x:t.length,x,!1))===I.next&&(I.steiner=!0),N.push(getLeftmost(I));for(N.sort(compareX),M=0;M<N.length;M++)eliminateHole(N[M],h),h=filterPoints(h,h.next);return h}(t,p,ne,h)),t.length>80*h){x=k=t[0],M=I=t[1];for(var ae=h;ae<re;ae+=h)(N=t[ae])<x&&(x=N),(V=t[ae+1])<M&&(M=V),N>k&&(k=N),V>I&&(I=V);ee=0!==(ee=Math.max(k-x,I-M))?1/ee:0}return earcutLinked(ne,ie,h,x,M,ee),ie};function linkedList(t,p,h,x,M){var k,I;if(M===function signedArea(t,p,h,x){for(var M=0,k=p,I=h-x;k<h;k+=x)M+=(t[I]-t[k])*(t[k+1]+t[I+1]),I=k;return M}(t,p,h,x)>0)for(k=p;k<h;k+=x)I=insertNode(k,t[k],t[k+1],I);else for(k=h-x;k>=p;k-=x)I=insertNode(k,t[k],t[k+1],I);return I&&equals(I,I.next)&&(removeNode(I),I=I.next),I}function filterPoints(t,p){if(!t)return t;p||(p=t);var h,x=t;do{if(h=!1,x.steiner||!equals(x,x.next)&&0!==area(x.prev,x,x.next))x=x.next;else{if(removeNode(x),(x=p=x.prev)===x.next)break;h=!0}}while(h||x!==p);return p}function earcutLinked(t,p,h,x,M,k,I){if(t){!I&&k&&function indexCurve(t,p,h,x){var M=t;do{null===M.z&&(M.z=zOrder(M.x,M.y,p,h,x)),M.prevZ=M.prev,M.nextZ=M.next,M=M.next}while(M!==t);M.prevZ.nextZ=null,M.prevZ=null,function sortLinked(t){var p,h,x,M,k,I,N,V,ee=1;do{for(h=t,t=null,k=null,I=0;h;){for(I++,x=h,N=0,p=0;p<ee&&(N++,x=x.nextZ);p++);for(V=ee;N>0||V>0&&x;)0!==N&&(0===V||!x||h.z<=x.z)?(M=h,h=h.nextZ,N--):(M=x,x=x.nextZ,V--),k?k.nextZ=M:t=M,M.prevZ=k,k=M;h=x}k.nextZ=null,ee*=2}while(I>1);return t}(M)}(t,x,M,k);for(var N,V,ee=t;t.prev!==t.next;)if(N=t.prev,V=t.next,k?isEarHashed(t,x,M,k):isEar(t))p.push(N.i/h),p.push(t.i/h),p.push(V.i/h),removeNode(t),t=V.next,ee=V.next;else if((t=V)===ee){I?1===I?earcutLinked(t=cureLocalIntersections(t,p,h),p,h,x,M,k,2):2===I&&splitEarcut(t,p,h,x,M,k):earcutLinked(filterPoints(t),p,h,x,M,k,1);break}}}function isEar(t){var p=t.prev,h=t,x=t.next;if(area(p,h,x)>=0)return!1;for(var M=t.next.next;M!==t.prev;){if(pointInTriangle(p.x,p.y,h.x,h.y,x.x,x.y,M.x,M.y)&&area(M.prev,M,M.next)>=0)return!1;M=M.next}return!0}function isEarHashed(t,p,h,x){var M=t.prev,k=t,I=t.next;if(area(M,k,I)>=0)return!1;for(var N=M.x<k.x?M.x<I.x?M.x:I.x:k.x<I.x?k.x:I.x,V=M.y<k.y?M.y<I.y?M.y:I.y:k.y<I.y?k.y:I.y,ee=M.x>k.x?M.x>I.x?M.x:I.x:k.x>I.x?k.x:I.x,te=M.y>k.y?M.y>I.y?M.y:I.y:k.y>I.y?k.y:I.y,re=zOrder(N,V,p,h,x),ne=zOrder(ee,te,p,h,x),ie=t.prevZ,ae=t.nextZ;ie&&ie.z>=re&&ae&&ae.z<=ne;){if(ie!==t.prev&&ie!==t.next&&pointInTriangle(M.x,M.y,k.x,k.y,I.x,I.y,ie.x,ie.y)&&area(ie.prev,ie,ie.next)>=0)return!1;if(ie=ie.prevZ,ae!==t.prev&&ae!==t.next&&pointInTriangle(M.x,M.y,k.x,k.y,I.x,I.y,ae.x,ae.y)&&area(ae.prev,ae,ae.next)>=0)return!1;ae=ae.nextZ}for(;ie&&ie.z>=re;){if(ie!==t.prev&&ie!==t.next&&pointInTriangle(M.x,M.y,k.x,k.y,I.x,I.y,ie.x,ie.y)&&area(ie.prev,ie,ie.next)>=0)return!1;ie=ie.prevZ}for(;ae&&ae.z<=ne;){if(ae!==t.prev&&ae!==t.next&&pointInTriangle(M.x,M.y,k.x,k.y,I.x,I.y,ae.x,ae.y)&&area(ae.prev,ae,ae.next)>=0)return!1;ae=ae.nextZ}return!0}function cureLocalIntersections(t,p,h){var x=t;do{var M=x.prev,k=x.next.next;!equals(M,k)&&intersects(M,x,x.next,k)&&locallyInside(M,k)&&locallyInside(k,M)&&(p.push(M.i/h),p.push(x.i/h),p.push(k.i/h),removeNode(x),removeNode(x.next),x=t=k),x=x.next}while(x!==t);return x}function splitEarcut(t,p,h,x,M,k){var I=t;do{for(var N=I.next.next;N!==I.prev;){if(I.i!==N.i&&isValidDiagonal(I,N)){var V=splitPolygon(I,N);return I=filterPoints(I,I.next),V=filterPoints(V,V.next),earcutLinked(I,p,h,x,M,k),void earcutLinked(V,p,h,x,M,k)}N=N.next}I=I.next}while(I!==t)}function compareX(t,p){return t.x-p.x}function eliminateHole(t,p){if(p=function findHoleBridge(t,p){var h,x=p,M=t.x,k=t.y,I=-1/0;do{if(k<=x.y&&k>=x.next.y&&x.next.y!==x.y){var N=x.x+(k-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(N<=M&&N>I){if(I=N,N===M){if(k===x.y)return x;if(k===x.next.y)return x.next}h=x.x<x.next.x?x:x.next}}x=x.next}while(x!==p);if(!h)return null;if(M===I)return h.prev;var V,ee=h,te=h.x,re=h.y,ne=1/0;x=h.next;for(;x!==ee;)M>=x.x&&x.x>=te&&M!==x.x&&pointInTriangle(k<re?M:I,k,te,re,k<re?I:M,k,x.x,x.y)&&((V=Math.abs(k-x.y)/(M-x.x))<ne||V===ne&&x.x>h.x)&&locallyInside(x,t)&&(h=x,ne=V),x=x.next;return h}(t,p),p){var h=splitPolygon(p,t);filterPoints(h,h.next)}}function zOrder(t,p,h,x,M){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-h)*M)|t<<8))|t<<4))|t<<2))|t<<1))|(p=1431655765&((p=858993459&((p=252645135&((p=16711935&((p=32767*(p-x)*M)|p<<8))|p<<4))|p<<2))|p<<1))<<1}function getLeftmost(t){var p=t,h=t;do{(p.x<h.x||p.x===h.x&&p.y<h.y)&&(h=p),p=p.next}while(p!==t);return h}function pointInTriangle(t,p,h,x,M,k,I,N){return(M-I)*(p-N)-(t-I)*(k-N)>=0&&(t-I)*(x-N)-(h-I)*(p-N)>=0&&(h-I)*(k-N)-(M-I)*(x-N)>=0}function isValidDiagonal(t,p){return t.next.i!==p.i&&t.prev.i!==p.i&&!function intersectsPolygon(t,p){var h=t;do{if(h.i!==t.i&&h.next.i!==t.i&&h.i!==p.i&&h.next.i!==p.i&&intersects(h,h.next,t,p))return!0;h=h.next}while(h!==t);return!1}(t,p)&&locallyInside(t,p)&&locallyInside(p,t)&&function middleInside(t,p){var h=t,x=!1,M=(t.x+p.x)/2,k=(t.y+p.y)/2;do{h.y>k!=h.next.y>k&&h.next.y!==h.y&&M<(h.next.x-h.x)*(k-h.y)/(h.next.y-h.y)+h.x&&(x=!x),h=h.next}while(h!==t);return x}(t,p)}function area(t,p,h){return(p.y-t.y)*(h.x-p.x)-(p.x-t.x)*(h.y-p.y)}function equals(t,p){return t.x===p.x&&t.y===p.y}function intersects(t,p,h,x){return!!(equals(t,h)&&equals(p,x)||equals(t,x)&&equals(h,p))||area(t,p,h)>0!=area(t,p,x)>0&&area(h,x,t)>0!=area(h,x,p)>0}function locallyInside(t,p){return area(t.prev,t,t.next)<0?area(t,p,t.next)>=0&&area(t,t.prev,p)>=0:area(t,p,t.prev)<0||area(t,t.next,p)<0}function splitPolygon(t,p){var h=new Node(t.i,t.x,t.y),x=new Node(p.i,p.x,p.y),M=t.next,k=p.prev;return t.next=p,p.prev=t,h.next=M,M.prev=h,x.next=h,h.prev=x,k.next=x,x.prev=k,x}function insertNode(t,p,h,x){var M=new Node(t,p,h);return x?(M.next=x.next,M.prev=x,x.next.prev=M,x.next=M):(M.prev=M,M.next=M),M}function removeNode(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Node(t,p,h){this.i=t,this.x=p,this.y=h,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var Wf={area:function area(t){for(var p=t.length,h=0,x=p-1,M=0;M<p;x=M++)h+=t[x].x*t[M].y-t[M].x*t[x].y;return.5*h},isClockWise:function isClockWise(t){return Wf.area(t)<0},triangulateShape:function triangulateShape(t,p){var h=[],x=[],M=[];removeDupEndPts(t),addContour(h,t);var k=t.length;p.forEach(removeDupEndPts);for(var I=0;I<p.length;I++)x.push(k),k+=p[I].length,addContour(h,p[I]);var N=jf(h,x);for(I=0;I<N.length;I+=3)M.push(N.slice(I,I+3));return M}};function removeDupEndPts(t){var p=t.length;p>2&&t[p-1].equals(t[0])&&t.pop()}function addContour(t,p){for(var h=0;h<p.length;h++)t.push(p[h].x),t.push(p[h].y)}function ExtrudeGeometry(t,p){Geometry.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:p},this.fromBufferGeometry(new ExtrudeBufferGeometry(t,p)),this.mergeVertices()}function ExtrudeBufferGeometry(t,p){BufferGeometry.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:p},t=Array.isArray(t)?t:[t];for(var h=this,x=[],M=[],k=0,I=t.length;k<I;k++){addShape(t[k])}function addShape(t){var k=[],I=void 0!==p.curveSegments?p.curveSegments:12,N=void 0!==p.steps?p.steps:1,V=void 0!==p.depth?p.depth:100,ee=void 0===p.bevelEnabled||p.bevelEnabled,te=void 0!==p.bevelThickness?p.bevelThickness:6,re=void 0!==p.bevelSize?p.bevelSize:te-2,ne=void 0!==p.bevelOffset?p.bevelOffset:0,ie=void 0!==p.bevelSegments?p.bevelSegments:3,ae=p.extrudePath,oe=void 0!==p.UVGenerator?p.UVGenerator:zf;void 0!==p.amount&&(V=p.amount);var se,ce,ue,le,pe,he,fe,de,me=!1;ae&&(se=ae.getSpacedPoints(N),me=!0,ee=!1,ce=ae.computeFrenetFrames(N,!1),ue=new Vector3,le=new Vector3,pe=new Vector3),ee||(ie=0,te=0,re=0,ne=0);var ge=t.extractPoints(I),ve=ge.shape,ye=ge.holes;if(!Wf.isClockWise(ve))for(ve=ve.reverse(),fe=0,de=ye.length;fe<de;fe++)he=ye[fe],Wf.isClockWise(he)&&(ye[fe]=he.reverse());var xe=Wf.triangulateShape(ve,ye),be=ve;for(fe=0,de=ye.length;fe<de;fe++)he=ye[fe],ve=ve.concat(he);function scalePt2(t,p,h){return p.clone().multiplyScalar(h).add(t)}var _e,Me,Ce,we,Se,Te,Ae=ve.length,ke=xe.length;function getBevelVec(t,p,h){var x,M,k,I=t.x-p.x,N=t.y-p.y,V=h.x-t.x,ee=h.y-t.y,te=I*I+N*N,re=I*ee-N*V;if(Math.abs(re)>Number.EPSILON){var ne=Math.sqrt(te),ie=Math.sqrt(V*V+ee*ee),ae=p.x-N/ne,oe=p.y+I/ne,se=((h.x-ee/ie-ae)*ee-(h.y+V/ie-oe)*V)/(I*ee-N*V),ce=(x=ae+I*se-t.x)*x+(M=oe+N*se-t.y)*M;if(ce<=2)return new Vector2(x,M);k=Math.sqrt(ce/2)}else{var ue=!1;I>Number.EPSILON?V>Number.EPSILON&&(ue=!0):I<-Number.EPSILON?V<-Number.EPSILON&&(ue=!0):Math.sign(N)===Math.sign(ee)&&(ue=!0),ue?(x=-N,M=I,k=Math.sqrt(te)):(x=I,M=N,k=Math.sqrt(te/2))}return new Vector2(x/k,M/k)}for(var De=[],Oe=0,Ie=be.length,Le=Ie-1,Ee=Oe+1;Oe<Ie;Oe++,Le++,Ee++)Le===Ie&&(Le=0),Ee===Ie&&(Ee=0),De[Oe]=getBevelVec(be[Oe],be[Le],be[Ee]);var Re,Be,Ne=[],Ge=De.concat();for(fe=0,de=ye.length;fe<de;fe++){for(he=ye[fe],Re=[],Oe=0,Le=(Ie=he.length)-1,Ee=Oe+1;Oe<Ie;Oe++,Le++,Ee++)Le===Ie&&(Le=0),Ee===Ie&&(Ee=0),Re[Oe]=getBevelVec(he[Oe],he[Le],he[Ee]);Ne.push(Re),Ge=Ge.concat(Re)}for(_e=0;_e<ie;_e++){for(Ce=_e/ie,we=te*Math.cos(Ce*Math.PI/2),Me=re*Math.sin(Ce*Math.PI/2)+ne,Oe=0,Ie=be.length;Oe<Ie;Oe++)v((Se=scalePt2(be[Oe],De[Oe],Me)).x,Se.y,-we);for(fe=0,de=ye.length;fe<de;fe++)for(he=ye[fe],Re=Ne[fe],Oe=0,Ie=he.length;Oe<Ie;Oe++)v((Se=scalePt2(he[Oe],Re[Oe],Me)).x,Se.y,-we)}for(Me=re+ne,Oe=0;Oe<Ae;Oe++)Se=ee?scalePt2(ve[Oe],Ge[Oe],Me):ve[Oe],me?(le.copy(ce.normals[0]).multiplyScalar(Se.x),ue.copy(ce.binormals[0]).multiplyScalar(Se.y),pe.copy(se[0]).add(le).add(ue),v(pe.x,pe.y,pe.z)):v(Se.x,Se.y,0);for(Be=1;Be<=N;Be++)for(Oe=0;Oe<Ae;Oe++)Se=ee?scalePt2(ve[Oe],Ge[Oe],Me):ve[Oe],me?(le.copy(ce.normals[Be]).multiplyScalar(Se.x),ue.copy(ce.binormals[Be]).multiplyScalar(Se.y),pe.copy(se[Be]).add(le).add(ue),v(pe.x,pe.y,pe.z)):v(Se.x,Se.y,V/N*Be);for(_e=ie-1;_e>=0;_e--){for(Ce=_e/ie,we=te*Math.cos(Ce*Math.PI/2),Me=re*Math.sin(Ce*Math.PI/2)+ne,Oe=0,Ie=be.length;Oe<Ie;Oe++)v((Se=scalePt2(be[Oe],De[Oe],Me)).x,Se.y,V+we);for(fe=0,de=ye.length;fe<de;fe++)for(he=ye[fe],Re=Ne[fe],Oe=0,Ie=he.length;Oe<Ie;Oe++)Se=scalePt2(he[Oe],Re[Oe],Me),me?v(Se.x,Se.y+se[N-1].y,se[N-1].x+we):v(Se.x,Se.y,V+we)}function sidewalls(t,p){var h,x;for(Oe=t.length;--Oe>=0;){h=Oe,(x=Oe-1)<0&&(x=t.length-1);var M=0,k=N+2*ie;for(M=0;M<k;M++){var I=Ae*M,V=Ae*(M+1);f4(p+h+I,p+x+I,p+x+V,p+h+V)}}}function v(t,p,h){k.push(t),k.push(p),k.push(h)}function f3(t,p,M){addVertex(t),addVertex(p),addVertex(M);var k=x.length/3,I=oe.generateTopUV(h,x,k-3,k-2,k-1);addUV(I[0]),addUV(I[1]),addUV(I[2])}function f4(t,p,M,k){addVertex(t),addVertex(p),addVertex(k),addVertex(p),addVertex(M),addVertex(k);var I=x.length/3,N=oe.generateSideWallUV(h,x,I-6,I-3,I-2,I-1);addUV(N[0]),addUV(N[1]),addUV(N[3]),addUV(N[1]),addUV(N[2]),addUV(N[3])}function addVertex(t){x.push(k[3*t+0]),x.push(k[3*t+1]),x.push(k[3*t+2])}function addUV(t){M.push(t.x),M.push(t.y)}!function buildLidFaces(){var t=x.length/3;if(ee){var p=0,M=Ae*p;for(Oe=0;Oe<ke;Oe++)f3((Te=xe[Oe])[2]+M,Te[1]+M,Te[0]+M);for(M=Ae*(p=N+2*ie),Oe=0;Oe<ke;Oe++)f3((Te=xe[Oe])[0]+M,Te[1]+M,Te[2]+M)}else{for(Oe=0;Oe<ke;Oe++)f3((Te=xe[Oe])[2],Te[1],Te[0]);for(Oe=0;Oe<ke;Oe++)f3((Te=xe[Oe])[0]+Ae*N,Te[1]+Ae*N,Te[2]+Ae*N)}h.addGroup(t,x.length/3-t,0)}(),function buildSideFaces(){var t=x.length/3,p=0;for(sidewalls(be,p),p+=be.length,fe=0,de=ye.length;fe<de;fe++)sidewalls(he=ye[fe],p),p+=he.length;h.addGroup(t,x.length/3-t,1)}()}this.setAttribute("position",new Float32BufferAttribute(x,3)),this.setAttribute("uv",new Float32BufferAttribute(M,2)),this.computeVertexNormals()}ExtrudeGeometry.prototype=Object.create(Geometry.prototype),ExtrudeGeometry.prototype.constructor=ExtrudeGeometry,ExtrudeGeometry.prototype.toJSON=function(){var t=Geometry.prototype.toJSON.call(this);return toJSON(this.parameters.shapes,this.parameters.options,t)},ExtrudeBufferGeometry.prototype=Object.create(BufferGeometry.prototype),ExtrudeBufferGeometry.prototype.constructor=ExtrudeBufferGeometry,ExtrudeBufferGeometry.prototype.toJSON=function(){var t=BufferGeometry.prototype.toJSON.call(this);return toJSON(this.parameters.shapes,this.parameters.options,t)};var zf={generateTopUV:function generateTopUV(t,p,h,x,M){var k=p[3*h],I=p[3*h+1],N=p[3*x],V=p[3*x+1],ee=p[3*M],te=p[3*M+1];return[new Vector2(k,I),new Vector2(N,V),new Vector2(ee,te)]},generateSideWallUV:function generateSideWallUV(t,p,h,x,M,k){var I=p[3*h],N=p[3*h+1],V=p[3*h+2],ee=p[3*x],te=p[3*x+1],re=p[3*x+2],ne=p[3*M],ie=p[3*M+1],ae=p[3*M+2],oe=p[3*k],se=p[3*k+1],ce=p[3*k+2];return Math.abs(N-te)<.01?[new Vector2(I,1-V),new Vector2(ee,1-re),new Vector2(ne,1-ae),new Vector2(oe,1-ce)]:[new Vector2(N,1-V),new Vector2(te,1-re),new Vector2(ie,1-ae),new Vector2(se,1-ce)]}};function toJSON(t,p,h){if(h.shapes=[],Array.isArray(t))for(var x=0,M=t.length;x<M;x++){var k=t[x];h.shapes.push(k.uuid)}else h.shapes.push(t.uuid);return void 0!==p.extrudePath&&(h.options.extrudePath=p.extrudePath.toJSON()),h}function TextGeometry(t,p){Geometry.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:p},this.fromBufferGeometry(new TextBufferGeometry(t,p)),this.mergeVertices()}function TextBufferGeometry(t,p){var h=(p=p||{}).font;if(!h||!h.isFont)return new Geometry;var x=h.generateShapes(t,p.size);p.depth=void 0!==p.height?p.height:50,void 0===p.bevelThickness&&(p.bevelThickness=10),void 0===p.bevelSize&&(p.bevelSize=8),void 0===p.bevelEnabled&&(p.bevelEnabled=!1),ExtrudeBufferGeometry.call(this,x,p),this.type="TextBufferGeometry"}function SphereGeometry(t,p,h,x,M,k,I){Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:p,heightSegments:h,phiStart:x,phiLength:M,thetaStart:k,thetaLength:I},this.fromBufferGeometry(new SphereBufferGeometry(t,p,h,x,M,k,I)),this.mergeVertices()}function SphereBufferGeometry(t,p,h,x,M,k,I){BufferGeometry.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:p,heightSegments:h,phiStart:x,phiLength:M,thetaStart:k,thetaLength:I},t=t||1,p=Math.max(3,Math.floor(p)||8),h=Math.max(2,Math.floor(h)||6),x=void 0!==x?x:0,M=void 0!==M?M:2*Math.PI,k=void 0!==k?k:0,I=void 0!==I?I:Math.PI;var N,V,ee=Math.min(k+I,Math.PI),te=0,re=[],ne=new Vector3,ie=new Vector3,ae=[],oe=[],se=[],ce=[];for(V=0;V<=h;V++){var ue=[],le=V/h,pe=0;for(0==V&&0==k?pe=.5/p:V==h&&ee==Math.PI&&(pe=-.5/p),N=0;N<=p;N++){var he=N/p;ne.x=-t*Math.cos(x+he*M)*Math.sin(k+le*I),ne.y=t*Math.cos(k+le*I),ne.z=t*Math.sin(x+he*M)*Math.sin(k+le*I),oe.push(ne.x,ne.y,ne.z),ie.copy(ne).normalize(),se.push(ie.x,ie.y,ie.z),ce.push(he+pe,1-le),ue.push(te++)}re.push(ue)}for(V=0;V<h;V++)for(N=0;N<p;N++){var fe=re[V][N+1],de=re[V][N],me=re[V+1][N],ge=re[V+1][N+1];(0!==V||k>0)&&ae.push(fe,de,ge),(V!==h-1||ee<Math.PI)&&ae.push(de,me,ge)}this.setIndex(ae),this.setAttribute("position",new Float32BufferAttribute(oe,3)),this.setAttribute("normal",new Float32BufferAttribute(se,3)),this.setAttribute("uv",new Float32BufferAttribute(ce,2))}function RingGeometry(t,p,h,x,M,k){Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:p,thetaSegments:h,phiSegments:x,thetaStart:M,thetaLength:k},this.fromBufferGeometry(new RingBufferGeometry(t,p,h,x,M,k)),this.mergeVertices()}function RingBufferGeometry(t,p,h,x,M,k){BufferGeometry.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:p,thetaSegments:h,phiSegments:x,thetaStart:M,thetaLength:k},t=t||.5,p=p||1,M=void 0!==M?M:0,k=void 0!==k?k:2*Math.PI,h=void 0!==h?Math.max(3,h):8;var I,N,V,ee=[],te=[],re=[],ne=[],ie=t,ae=(p-t)/(x=void 0!==x?Math.max(1,x):1),oe=new Vector3,se=new Vector2;for(N=0;N<=x;N++){for(V=0;V<=h;V++)I=M+V/h*k,oe.x=ie*Math.cos(I),oe.y=ie*Math.sin(I),te.push(oe.x,oe.y,oe.z),re.push(0,0,1),se.x=(oe.x/p+1)/2,se.y=(oe.y/p+1)/2,ne.push(se.x,se.y);ie+=ae}for(N=0;N<x;N++){var ce=N*(h+1);for(V=0;V<h;V++){var ue=I=V+ce,le=I+h+1,pe=I+h+2,he=I+1;ee.push(ue,le,he),ee.push(le,pe,he)}}this.setIndex(ee),this.setAttribute("position",new Float32BufferAttribute(te,3)),this.setAttribute("normal",new Float32BufferAttribute(re,3)),this.setAttribute("uv",new Float32BufferAttribute(ne,2))}function LatheGeometry(t,p,h,x){Geometry.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:p,phiStart:h,phiLength:x},this.fromBufferGeometry(new LatheBufferGeometry(t,p,h,x)),this.mergeVertices()}function LatheBufferGeometry(t,p,h,x){BufferGeometry.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:p,phiStart:h,phiLength:x},p=Math.floor(p)||12,h=h||0,x=x||2*Math.PI,x=Yl.clamp(x,0,2*Math.PI);var M,k,I,N=[],V=[],ee=[],te=1/p,re=new Vector3,ne=new Vector2;for(k=0;k<=p;k++){var ie=h+k*te*x,ae=Math.sin(ie),oe=Math.cos(ie);for(I=0;I<=t.length-1;I++)re.x=t[I].x*ae,re.y=t[I].y,re.z=t[I].x*oe,V.push(re.x,re.y,re.z),ne.x=k/p,ne.y=I/(t.length-1),ee.push(ne.x,ne.y)}for(k=0;k<p;k++)for(I=0;I<t.length-1;I++){var se=M=I+k*t.length,ce=M+t.length,ue=M+t.length+1,le=M+1;N.push(se,ce,le),N.push(ce,ue,le)}if(this.setIndex(N),this.setAttribute("position",new Float32BufferAttribute(V,3)),this.setAttribute("uv",new Float32BufferAttribute(ee,2)),this.computeVertexNormals(),x===2*Math.PI){var pe=this.attributes.normal.array,he=new Vector3,fe=new Vector3,de=new Vector3;for(M=p*t.length*3,k=0,I=0;k<t.length;k++,I+=3)he.x=pe[I+0],he.y=pe[I+1],he.z=pe[I+2],fe.x=pe[M+I+0],fe.y=pe[M+I+1],fe.z=pe[M+I+2],de.addVectors(he,fe).normalize(),pe[I+0]=pe[M+I+0]=de.x,pe[I+1]=pe[M+I+1]=de.y,pe[I+2]=pe[M+I+2]=de.z}}function ShapeGeometry(t,p){Geometry.call(this),this.type="ShapeGeometry","object"===_typeof$2(p)&&(p=p.curveSegments),this.parameters={shapes:t,curveSegments:p},this.fromBufferGeometry(new ShapeBufferGeometry(t,p)),this.mergeVertices()}function ShapeBufferGeometry(t,p){BufferGeometry.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:p},p=p||12;var h=[],x=[],M=[],k=[],I=0,N=0;if(!1===Array.isArray(t))addShape(t);else for(var V=0;V<t.length;V++)addShape(t[V]),this.addGroup(I,N,V),I+=N,N=0;function addShape(t){var I,V,ee,te=x.length/3,re=t.extractPoints(p),ne=re.shape,ie=re.holes;for(!1===Wf.isClockWise(ne)&&(ne=ne.reverse()),I=0,V=ie.length;I<V;I++)ee=ie[I],!0===Wf.isClockWise(ee)&&(ie[I]=ee.reverse());var ae=Wf.triangulateShape(ne,ie);for(I=0,V=ie.length;I<V;I++)ee=ie[I],ne=ne.concat(ee);for(I=0,V=ne.length;I<V;I++){var oe=ne[I];x.push(oe.x,oe.y,0),M.push(0,0,1),k.push(oe.x,oe.y)}for(I=0,V=ae.length;I<V;I++){var se=ae[I],ce=se[0]+te,ue=se[1]+te,le=se[2]+te;h.push(ce,ue,le),N+=3}}this.setIndex(h),this.setAttribute("position",new Float32BufferAttribute(x,3)),this.setAttribute("normal",new Float32BufferAttribute(M,3)),this.setAttribute("uv",new Float32BufferAttribute(k,2))}function toJSON$1(t,p){if(p.shapes=[],Array.isArray(t))for(var h=0,x=t.length;h<x;h++){var M=t[h];p.shapes.push(M.uuid)}else p.shapes.push(t.uuid);return p}function EdgesGeometry(t,p){BufferGeometry.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:p},p=void 0!==p?p:1;var h,x,M,k,I=[],N=Math.cos(Yl.DEG2RAD*p),V=[0,0],ee={},te=["a","b","c"];t.isBufferGeometry?(k=new Geometry).fromBufferGeometry(t):k=t.clone(),k.mergeVertices(),k.computeFaceNormals();for(var re=k.vertices,ne=k.faces,ie=0,ae=ne.length;ie<ae;ie++)for(var oe=ne[ie],se=0;se<3;se++)h=oe[te[se]],x=oe[te[(se+1)%3]],V[0]=Math.min(h,x),V[1]=Math.max(h,x),void 0===ee[M=V[0]+","+V[1]]?ee[M]={index1:V[0],index2:V[1],face1:ie,face2:void 0}:ee[M].face2=ie;for(M in ee){var ce=ee[M];if(void 0===ce.face2||ne[ce.face1].normal.dot(ne[ce.face2].normal)<=N){var ue=re[ce.index1];I.push(ue.x,ue.y,ue.z),ue=re[ce.index2],I.push(ue.x,ue.y,ue.z)}}this.setAttribute("position",new Float32BufferAttribute(I,3))}function CylinderGeometry(t,p,h,x,M,k,I,N){Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:p,height:h,radialSegments:x,heightSegments:M,openEnded:k,thetaStart:I,thetaLength:N},this.fromBufferGeometry(new CylinderBufferGeometry(t,p,h,x,M,k,I,N)),this.mergeVertices()}function CylinderBufferGeometry(t,p,h,x,M,k,I,N){BufferGeometry.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:p,height:h,radialSegments:x,heightSegments:M,openEnded:k,thetaStart:I,thetaLength:N};var V=this;t=void 0!==t?t:1,p=void 0!==p?p:1,h=h||1,x=Math.floor(x)||8,M=Math.floor(M)||1,k=void 0!==k&&k,I=void 0!==I?I:0,N=void 0!==N?N:2*Math.PI;var ee=[],te=[],re=[],ne=[],ie=0,ae=[],oe=h/2,se=0;function generateCap(h){var M,k,ae,ce=new Vector2,ue=new Vector3,le=0,pe=!0===h?t:p,he=!0===h?1:-1;for(k=ie,M=1;M<=x;M++)te.push(0,oe*he,0),re.push(0,he,0),ne.push(.5,.5),ie++;for(ae=ie,M=0;M<=x;M++){var fe=M/x*N+I,de=Math.cos(fe),me=Math.sin(fe);ue.x=pe*me,ue.y=oe*he,ue.z=pe*de,te.push(ue.x,ue.y,ue.z),re.push(0,he,0),ce.x=.5*de+.5,ce.y=.5*me*he+.5,ne.push(ce.x,ce.y),ie++}for(M=0;M<x;M++){var ge=k+M,ve=ae+M;!0===h?ee.push(ve,ve+1,ge):ee.push(ve+1,ve,ge),le+=3}V.addGroup(se,le,!0===h?1:2),se+=le}!function generateTorso(){var k,ce,ue=new Vector3,le=new Vector3,pe=0,he=(p-t)/h;for(ce=0;ce<=M;ce++){var fe=[],de=ce/M,me=de*(p-t)+t;for(k=0;k<=x;k++){var ge=k/x,ve=ge*N+I,ye=Math.sin(ve),xe=Math.cos(ve);le.x=me*ye,le.y=-de*h+oe,le.z=me*xe,te.push(le.x,le.y,le.z),ue.set(ye,he,xe).normalize(),re.push(ue.x,ue.y,ue.z),ne.push(ge,1-de),fe.push(ie++)}ae.push(fe)}for(k=0;k<x;k++)for(ce=0;ce<M;ce++){var be=ae[ce][k],_e=ae[ce+1][k],Me=ae[ce+1][k+1],Ce=ae[ce][k+1];ee.push(be,_e,Ce),ee.push(_e,Me,Ce),pe+=6}V.addGroup(se,pe,0),se+=pe}(),!1===k&&(t>0&&generateCap(!0),p>0&&generateCap(!1)),this.setIndex(ee),this.setAttribute("position",new Float32BufferAttribute(te,3)),this.setAttribute("normal",new Float32BufferAttribute(re,3)),this.setAttribute("uv",new Float32BufferAttribute(ne,2))}function ConeGeometry(t,p,h,x,M,k,I){CylinderGeometry.call(this,0,t,p,h,x,M,k,I),this.type="ConeGeometry",this.parameters={radius:t,height:p,radialSegments:h,heightSegments:x,openEnded:M,thetaStart:k,thetaLength:I}}function ConeBufferGeometry(t,p,h,x,M,k,I){CylinderBufferGeometry.call(this,0,t,p,h,x,M,k,I),this.type="ConeBufferGeometry",this.parameters={radius:t,height:p,radialSegments:h,heightSegments:x,openEnded:M,thetaStart:k,thetaLength:I}}function CircleGeometry(t,p,h,x){Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:p,thetaStart:h,thetaLength:x},this.fromBufferGeometry(new CircleBufferGeometry(t,p,h,x)),this.mergeVertices()}function CircleBufferGeometry(t,p,h,x){BufferGeometry.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:p,thetaStart:h,thetaLength:x},t=t||1,p=void 0!==p?Math.max(3,p):8,h=void 0!==h?h:0,x=void 0!==x?x:2*Math.PI;var M,k,I=[],N=[],V=[],ee=[],te=new Vector3,re=new Vector2;for(N.push(0,0,0),V.push(0,0,1),ee.push(.5,.5),k=0,M=3;k<=p;k++,M+=3){var ne=h+k/p*x;te.x=t*Math.cos(ne),te.y=t*Math.sin(ne),N.push(te.x,te.y,te.z),V.push(0,0,1),re.x=(N[M]/t+1)/2,re.y=(N[M+1]/t+1)/2,ee.push(re.x,re.y)}for(M=1;M<=p;M++)I.push(M,M+1,0);this.setIndex(I),this.setAttribute("position",new Float32BufferAttribute(N,3)),this.setAttribute("normal",new Float32BufferAttribute(V,3)),this.setAttribute("uv",new Float32BufferAttribute(ee,2))}TextGeometry.prototype=Object.create(Geometry.prototype),TextGeometry.prototype.constructor=TextGeometry,TextBufferGeometry.prototype=Object.create(ExtrudeBufferGeometry.prototype),TextBufferGeometry.prototype.constructor=TextBufferGeometry,SphereGeometry.prototype=Object.create(Geometry.prototype),SphereGeometry.prototype.constructor=SphereGeometry,SphereBufferGeometry.prototype=Object.create(BufferGeometry.prototype),SphereBufferGeometry.prototype.constructor=SphereBufferGeometry,RingGeometry.prototype=Object.create(Geometry.prototype),RingGeometry.prototype.constructor=RingGeometry,RingBufferGeometry.prototype=Object.create(BufferGeometry.prototype),RingBufferGeometry.prototype.constructor=RingBufferGeometry,LatheGeometry.prototype=Object.create(Geometry.prototype),LatheGeometry.prototype.constructor=LatheGeometry,LatheBufferGeometry.prototype=Object.create(BufferGeometry.prototype),LatheBufferGeometry.prototype.constructor=LatheBufferGeometry,ShapeGeometry.prototype=Object.create(Geometry.prototype),ShapeGeometry.prototype.constructor=ShapeGeometry,ShapeGeometry.prototype.toJSON=function(){var t=Geometry.prototype.toJSON.call(this);return toJSON$1(this.parameters.shapes,t)},ShapeBufferGeometry.prototype=Object.create(BufferGeometry.prototype),ShapeBufferGeometry.prototype.constructor=ShapeBufferGeometry,ShapeBufferGeometry.prototype.toJSON=function(){var t=BufferGeometry.prototype.toJSON.call(this);return toJSON$1(this.parameters.shapes,t)},EdgesGeometry.prototype=Object.create(BufferGeometry.prototype),EdgesGeometry.prototype.constructor=EdgesGeometry,CylinderGeometry.prototype=Object.create(Geometry.prototype),CylinderGeometry.prototype.constructor=CylinderGeometry,CylinderBufferGeometry.prototype=Object.create(BufferGeometry.prototype),CylinderBufferGeometry.prototype.constructor=CylinderBufferGeometry,ConeGeometry.prototype=Object.create(CylinderGeometry.prototype),ConeGeometry.prototype.constructor=ConeGeometry,ConeBufferGeometry.prototype=Object.create(CylinderBufferGeometry.prototype),ConeBufferGeometry.prototype.constructor=ConeBufferGeometry,CircleGeometry.prototype=Object.create(Geometry.prototype),CircleGeometry.prototype.constructor=CircleGeometry,CircleBufferGeometry.prototype=Object.create(BufferGeometry.prototype),CircleBufferGeometry.prototype.constructor=CircleBufferGeometry;var Hf=Object.freeze({__proto__:null,WireframeGeometry:WireframeGeometry,ParametricGeometry:ParametricGeometry,ParametricBufferGeometry:ParametricBufferGeometry,TetrahedronGeometry:TetrahedronGeometry,TetrahedronBufferGeometry:TetrahedronBufferGeometry,OctahedronGeometry:OctahedronGeometry,OctahedronBufferGeometry:OctahedronBufferGeometry,IcosahedronGeometry:IcosahedronGeometry,IcosahedronBufferGeometry:IcosahedronBufferGeometry,DodecahedronGeometry:DodecahedronGeometry,DodecahedronBufferGeometry:DodecahedronBufferGeometry,PolyhedronGeometry:PolyhedronGeometry,PolyhedronBufferGeometry:PolyhedronBufferGeometry,TubeGeometry:TubeGeometry,TubeBufferGeometry:TubeBufferGeometry,TorusKnotGeometry:TorusKnotGeometry,TorusKnotBufferGeometry:TorusKnotBufferGeometry,TorusGeometry:TorusGeometry,TorusBufferGeometry:TorusBufferGeometry,TextGeometry:TextGeometry,TextBufferGeometry:TextBufferGeometry,SphereGeometry:SphereGeometry,SphereBufferGeometry:SphereBufferGeometry,RingGeometry:RingGeometry,RingBufferGeometry:RingBufferGeometry,PlaneGeometry:PlaneGeometry,PlaneBufferGeometry:PlaneBufferGeometry,LatheGeometry:LatheGeometry,LatheBufferGeometry:LatheBufferGeometry,ShapeGeometry:ShapeGeometry,ShapeBufferGeometry:ShapeBufferGeometry,ExtrudeGeometry:ExtrudeGeometry,ExtrudeBufferGeometry:ExtrudeBufferGeometry,EdgesGeometry:EdgesGeometry,ConeGeometry:ConeGeometry,ConeBufferGeometry:ConeBufferGeometry,CylinderGeometry:CylinderGeometry,CylinderBufferGeometry:CylinderBufferGeometry,CircleGeometry:CircleGeometry,CircleBufferGeometry:CircleBufferGeometry,BoxGeometry:Eh,BoxBufferGeometry:Rh});function ShadowMaterial(t){Material.call(this),this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.setValues(t)}function RawShaderMaterial(t){ShaderMaterial.call(this,t),this.type="RawShaderMaterial"}function MeshStandardMaterial(t){Material.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gl,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function MeshPhysicalMaterial(t){MeshStandardMaterial.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearcoat=0,this.clearcoatRoughness=0,this.sheen=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.transparency=0,this.setValues(t)}function MeshPhongMaterial(t){Material.call(this),this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gl,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=tu,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function MeshToonMaterial(t){Material.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gl,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function MeshNormalMaterial(t){Material.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gl,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function MeshLambertMaterial(t){Material.call(this),this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=tu,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function MeshMatcapMaterial(t){Material.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gl,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function LineDashedMaterial(t){LineBasicMaterial.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}ShadowMaterial.prototype=Object.create(Material.prototype),ShadowMaterial.prototype.constructor=ShadowMaterial,ShadowMaterial.prototype.isShadowMaterial=!0,ShadowMaterial.prototype.copy=function(t){return Material.prototype.copy.call(this,t),this.color.copy(t.color),this},RawShaderMaterial.prototype=Object.create(ShaderMaterial.prototype),RawShaderMaterial.prototype.constructor=RawShaderMaterial,RawShaderMaterial.prototype.isRawShaderMaterial=!0,MeshStandardMaterial.prototype=Object.create(Material.prototype),MeshStandardMaterial.prototype.constructor=MeshStandardMaterial,MeshStandardMaterial.prototype.isMeshStandardMaterial=!0,MeshStandardMaterial.prototype.copy=function(t){return Material.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},MeshPhysicalMaterial.prototype=Object.create(MeshStandardMaterial.prototype),MeshPhysicalMaterial.prototype.constructor=MeshPhysicalMaterial,MeshPhysicalMaterial.prototype.isMeshPhysicalMaterial=!0,MeshPhysicalMaterial.prototype.copy=function(t){return MeshStandardMaterial.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearcoat=t.clearcoat,this.clearcoatRoughness=t.clearcoatRoughness,t.sheen?this.sheen=(this.sheen||new Color).copy(t.sheen):this.sheen=null,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.transparency=t.transparency,this},MeshPhongMaterial.prototype=Object.create(Material.prototype),MeshPhongMaterial.prototype.constructor=MeshPhongMaterial,MeshPhongMaterial.prototype.isMeshPhongMaterial=!0,MeshPhongMaterial.prototype.copy=function(t){return Material.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},MeshToonMaterial.prototype=Object.create(Material.prototype),MeshToonMaterial.prototype.constructor=MeshToonMaterial,MeshToonMaterial.prototype.isMeshToonMaterial=!0,MeshToonMaterial.prototype.copy=function(t){return Material.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},MeshNormalMaterial.prototype=Object.create(Material.prototype),MeshNormalMaterial.prototype.constructor=MeshNormalMaterial,MeshNormalMaterial.prototype.isMeshNormalMaterial=!0,MeshNormalMaterial.prototype.copy=function(t){return Material.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},MeshLambertMaterial.prototype=Object.create(Material.prototype),MeshLambertMaterial.prototype.constructor=MeshLambertMaterial,MeshLambertMaterial.prototype.isMeshLambertMaterial=!0,MeshLambertMaterial.prototype.copy=function(t){return Material.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},MeshMatcapMaterial.prototype=Object.create(Material.prototype),MeshMatcapMaterial.prototype.constructor=MeshMatcapMaterial,MeshMatcapMaterial.prototype.isMeshMatcapMaterial=!0,MeshMatcapMaterial.prototype.copy=function(t){return Material.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},LineDashedMaterial.prototype=Object.create(LineBasicMaterial.prototype),LineDashedMaterial.prototype.constructor=LineDashedMaterial,LineDashedMaterial.prototype.isLineDashedMaterial=!0,LineDashedMaterial.prototype.copy=function(t){return LineBasicMaterial.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var $f=Object.freeze({__proto__:null,ShadowMaterial:ShadowMaterial,SpriteMaterial:SpriteMaterial,RawShaderMaterial:RawShaderMaterial,ShaderMaterial:ShaderMaterial,PointsMaterial:PointsMaterial,MeshPhysicalMaterial:MeshPhysicalMaterial,MeshStandardMaterial:MeshStandardMaterial,MeshPhongMaterial:MeshPhongMaterial,MeshToonMaterial:MeshToonMaterial,MeshNormalMaterial:MeshNormalMaterial,MeshLambertMaterial:MeshLambertMaterial,MeshDepthMaterial:MeshDepthMaterial,MeshDistanceMaterial:MeshDistanceMaterial,MeshBasicMaterial:MeshBasicMaterial,MeshMatcapMaterial:MeshMatcapMaterial,LineDashedMaterial:LineDashedMaterial,LineBasicMaterial:LineBasicMaterial,Material:Material}),Yf={arraySlice:function arraySlice(t,p,h){return Yf.isTypedArray(t)?new t.constructor(t.subarray(p,void 0!==h?h:t.length)):t.slice(p,h)},convertArray:function convertArray(t,p,h){return!t||!h&&t.constructor===p?t:"number"==typeof p.BYTES_PER_ELEMENT?new p(t):Array.prototype.slice.call(t)},isTypedArray:function isTypedArray(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function getKeyframeOrder(t){for(var p=t.length,h=new Array(p),x=0;x!==p;++x)h[x]=x;return h.sort((function compareTime(p,h){return t[p]-t[h]})),h},sortedArray:function sortedArray(t,p,h){for(var x=t.length,M=new t.constructor(x),k=0,I=0;I!==x;++k)for(var N=h[k]*p,V=0;V!==p;++V)M[I++]=t[N+V];return M},flattenJSON:function flattenJSON(t,p,h,x){for(var M=1,k=t[0];void 0!==k&&void 0===k[x];)k=t[M++];if(void 0!==k){var I=k[x];if(void 0!==I)if(Array.isArray(I))do{void 0!==(I=k[x])&&(p.push(k.time),h.push.apply(h,I)),k=t[M++]}while(void 0!==k);else if(void 0!==I.toArray)do{void 0!==(I=k[x])&&(p.push(k.time),I.toArray(h,h.length)),k=t[M++]}while(void 0!==k);else do{void 0!==(I=k[x])&&(p.push(k.time),h.push(I)),k=t[M++]}while(void 0!==k)}},subclip:function subclip(t,p,h,x,M){M=M||30;var k=t.clone();k.name=p;for(var I=[],N=0;N<k.tracks.length;++N){for(var V=k.tracks[N],ee=V.getValueSize(),te=[],re=[],ne=0;ne<V.times.length;++ne){var ie=V.times[ne]*M;if(!(ie<h||ie>=x)){te.push(V.times[ne]);for(var ae=0;ae<ee;++ae)re.push(V.values[ne*ee+ae])}}0!==te.length&&(V.times=Yf.convertArray(te,V.times.constructor),V.values=Yf.convertArray(re,V.values.constructor),I.push(V))}k.tracks=I;var oe=1/0;for(N=0;N<k.tracks.length;++N)oe>k.tracks[N].times[0]&&(oe=k.tracks[N].times[0]);for(N=0;N<k.tracks.length;++N)k.tracks[N].shift(-1*oe);return k.resetDuration(),k}};function Interpolant(t,p,h,x){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==x?x:new p.constructor(h),this.sampleValues=p,this.valueSize=h}function CubicInterpolant(t,p,h,x){Interpolant.call(this,t,p,h,x),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function LinearInterpolant(t,p,h,x){Interpolant.call(this,t,p,h,x)}function DiscreteInterpolant(t,p,h,x){Interpolant.call(this,t,p,h,x)}function KeyframeTrack(t,p,h,x){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===p||0===p.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Yf.convertArray(p,this.TimeBufferType),this.values=Yf.convertArray(h,this.ValueBufferType),this.setInterpolation(x||this.DefaultInterpolation)}function BooleanKeyframeTrack(t,p,h){KeyframeTrack.call(this,t,p,h)}function ColorKeyframeTrack(t,p,h,x){KeyframeTrack.call(this,t,p,h,x)}function NumberKeyframeTrack(t,p,h,x){KeyframeTrack.call(this,t,p,h,x)}function QuaternionLinearInterpolant(t,p,h,x){Interpolant.call(this,t,p,h,x)}function QuaternionKeyframeTrack(t,p,h,x){KeyframeTrack.call(this,t,p,h,x)}function StringKeyframeTrack(t,p,h,x){KeyframeTrack.call(this,t,p,h,x)}function VectorKeyframeTrack(t,p,h,x){KeyframeTrack.call(this,t,p,h,x)}function AnimationClip(t,p,h){this.name=t,this.tracks=h,this.duration=void 0!==p?p:-1,this.uuid=Yl.generateUUID(),this.duration<0&&this.resetDuration()}function parseKeyframeTrack(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var p=function getTrackTypeForValueTypeName(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){var h=[],x=[];Yf.flattenJSON(t.keys,h,x,"value"),t.times=h,t.values=x}return void 0!==p.parse?p.parse(t):new p(t.name,t.times,t.values,t.interpolation)}Object.assign(Interpolant.prototype,{evaluate:function evaluate(t){var p=this.parameterPositions,h=this._cachedIndex,x=p[h],M=p[h-1];e:{t:{var k;r:{n:if(!(t<x)){for(var I=h+2;;){if(void 0===x){if(t<M)break n;return h=p.length,this._cachedIndex=h,this.afterEnd_(h-1,t,M)}if(h===I)break;if(M=x,t<(x=p[++h]))break t}k=p.length;break r}if(t>=M)break e;var N=p[1];t<N&&(h=2,M=N);for(I=h-2;;){if(void 0===M)return this._cachedIndex=0,this.beforeStart_(0,t,x);if(h===I)break;if(x=M,t>=(M=p[--h-1]))break t}k=h,h=0}for(;h<k;){var V=h+k>>>1;t<p[V]?k=V:h=V+1}if(x=p[h],void 0===(M=p[h-1]))return this._cachedIndex=0,this.beforeStart_(0,t,x);if(void 0===x)return h=p.length,this._cachedIndex=h,this.afterEnd_(h-1,M,t)}this._cachedIndex=h,this.intervalChanged_(h,M,x)}return this.interpolate_(h,M,t,x)},settings:null,DefaultSettings_:{},getSettings_:function getSettings_(){return this.settings||this.DefaultSettings_},copySampleValue_:function copySampleValue_(t){for(var p=this.resultBuffer,h=this.sampleValues,x=this.valueSize,M=t*x,k=0;k!==x;++k)p[k]=h[M+k];return p},interpolate_:function interpolate_(){throw new Error("call to abstract method")},intervalChanged_:function intervalChanged_(){}}),//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(Interpolant.prototype,{beforeStart_:Interpolant.prototype.copySampleValue_,afterEnd_:Interpolant.prototype.copySampleValue_}),CubicInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:CubicInterpolant,DefaultSettings_:{endingStart:Sl,endingEnd:Sl},intervalChanged_:function intervalChanged_(t,p,h){var x=this.parameterPositions,M=t-2,k=t+1,I=x[M],N=x[k];if(void 0===I)switch(this.getSettings_().endingStart){case Tl:M=t,I=2*p-h;break;case Al:I=p+x[M=x.length-2]-x[M+1];break;default:M=t,I=h}if(void 0===N)switch(this.getSettings_().endingEnd){case Tl:k=t,N=2*h-p;break;case Al:k=1,N=h+x[1]-x[0];break;default:k=t-1,N=p}var V=.5*(h-p),ee=this.valueSize;this._weightPrev=V/(p-I),this._weightNext=V/(N-h),this._offsetPrev=M*ee,this._offsetNext=k*ee},interpolate_:function interpolate_(t,p,h,x){for(var M=this.resultBuffer,k=this.sampleValues,I=this.valueSize,N=t*I,V=N-I,ee=this._offsetPrev,te=this._offsetNext,re=this._weightPrev,ne=this._weightNext,ie=(h-p)/(x-p),ae=ie*ie,oe=ae*ie,se=-re*oe+2*re*ae-re*ie,ce=(1+re)*oe+(-1.5-2*re)*ae+(-.5+re)*ie+1,ue=(-1-ne)*oe+(1.5+ne)*ae+.5*ie,le=ne*oe-ne*ae,pe=0;pe!==I;++pe)M[pe]=se*k[ee+pe]+ce*k[V+pe]+ue*k[N+pe]+le*k[te+pe];return M}}),LinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:LinearInterpolant,interpolate_:function interpolate_(t,p,h,x){for(var M=this.resultBuffer,k=this.sampleValues,I=this.valueSize,N=t*I,V=N-I,ee=(h-p)/(x-p),te=1-ee,re=0;re!==I;++re)M[re]=k[V+re]*te+k[N+re]*ee;return M}}),DiscreteInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:DiscreteInterpolant,interpolate_:function interpolate_(t){return this.copySampleValue_(t-1)}}),Object.assign(KeyframeTrack,{toJSON:function toJSON(t){var p,h=t.constructor;if(void 0!==h.toJSON)p=h.toJSON(t);else{p={name:t.name,times:Yf.convertArray(t.times,Array),values:Yf.convertArray(t.values,Array)};var x=t.getInterpolation();x!==t.DefaultInterpolation&&(p.interpolation=x)}return p.type=t.ValueTypeName,p}}),Object.assign(KeyframeTrack.prototype,{constructor:KeyframeTrack,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Cl,InterpolantFactoryMethodDiscrete:function InterpolantFactoryMethodDiscrete(t){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function InterpolantFactoryMethodLinear(t){return new LinearInterpolant(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function InterpolantFactoryMethodSmooth(t){return new CubicInterpolant(this.times,this.values,this.getValueSize(),t)},setInterpolation:function setInterpolation(t){var p;switch(t){case Ml:p=this.InterpolantFactoryMethodDiscrete;break;case Cl:p=this.InterpolantFactoryMethodLinear;break;case wl:p=this.InterpolantFactoryMethodSmooth}if(void 0===p){var h="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(h);this.setInterpolation(this.DefaultInterpolation)}return this}return this.createInterpolant=p,this},getInterpolation:function getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ml;case this.InterpolantFactoryMethodLinear:return Cl;case this.InterpolantFactoryMethodSmooth:return wl}},getValueSize:function getValueSize(){return this.values.length/this.times.length},shift:function shift(t){if(0!==t)for(var p=this.times,h=0,x=p.length;h!==x;++h)p[h]+=t;return this},scale:function scale(t){if(1!==t)for(var p=this.times,h=0,x=p.length;h!==x;++h)p[h]*=t;return this},trim:function trim(t,p){for(var h=this.times,x=h.length,M=0,k=x-1;M!==x&&h[M]<t;)++M;for(;-1!==k&&h[k]>p;)--k;if(++k,0!==M||k!==x){M>=k&&(M=(k=Math.max(k,1))-1);var I=this.getValueSize();this.times=Yf.arraySlice(h,M,k),this.values=Yf.arraySlice(this.values,M*I,k*I)}return this},validate:function validate(){var t=!0,p=this.getValueSize();p-Math.floor(p)!=0&&(t=!1);var h=this.times,x=this.values,M=h.length;0===M&&(t=!1);for(var k=null,I=0;I!==M;I++){var N=h[I];if("number"==typeof N&&isNaN(N)){t=!1;break}if(null!==k&&k>N){t=!1;break}k=N}if(void 0!==x&&Yf.isTypedArray(x)){I=0;for(var V=x.length;I!==V;++I){var ee=x[I];if(isNaN(ee)){t=!1;break}}}return t},optimize:function optimize(){for(var t=Yf.arraySlice(this.times),p=Yf.arraySlice(this.values),h=this.getValueSize(),x=this.getInterpolation()===wl,M=1,k=t.length-1,I=1;I<k;++I){var N=!1,V=t[I];if(V!==t[I+1]&&(1!==I||V!==V[0]))if(x)N=!0;else for(var ee=I*h,te=ee-h,re=ee+h,ne=0;ne!==h;++ne){var ie=p[ee+ne];if(ie!==p[te+ne]||ie!==p[re+ne]){N=!0;break}}if(N){if(I!==M){t[M]=t[I];var ae=I*h,oe=M*h;for(ne=0;ne!==h;++ne)p[oe+ne]=p[ae+ne]}++M}}if(k>0){t[M]=t[k];for(ae=k*h,oe=M*h,ne=0;ne!==h;++ne)p[oe+ne]=p[ae+ne];++M}return M!==t.length?(this.times=Yf.arraySlice(t,0,M),this.values=Yf.arraySlice(p,0,M*h)):(this.times=t,this.values=p),this},clone:function clone(){var t=Yf.arraySlice(this.times,0),p=Yf.arraySlice(this.values,0),h=new(0,this.constructor)(this.name,t,p);return h.createInterpolant=this.createInterpolant,h}}),BooleanKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:BooleanKeyframeTrack,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Ml,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),ColorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:ColorKeyframeTrack,ValueTypeName:"color"}),NumberKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:NumberKeyframeTrack,ValueTypeName:"number"}),QuaternionLinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:QuaternionLinearInterpolant,interpolate_:function interpolate_(t,p,h,x){for(var M=this.resultBuffer,k=this.sampleValues,I=this.valueSize,N=t*I,V=(h-p)/(x-p),ee=N+I;N!==ee;N+=4)Quaternion.slerpFlat(M,0,k,N-I,k,N,V);return M}}),QuaternionKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:QuaternionKeyframeTrack,ValueTypeName:"quaternion",DefaultInterpolation:Cl,InterpolantFactoryMethodLinear:function InterpolantFactoryMethodLinear(t){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),StringKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:StringKeyframeTrack,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Ml,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),VectorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:VectorKeyframeTrack,ValueTypeName:"vector"}),Object.assign(AnimationClip,{parse:function parse(t){for(var p=[],h=t.tracks,x=1/(t.fps||1),M=0,k=h.length;M!==k;++M)p.push(parseKeyframeTrack(h[M]).scale(x));return new AnimationClip(t.name,t.duration,p)},toJSON:function toJSON(t){for(var p=[],h=t.tracks,x={name:t.name,duration:t.duration,tracks:p,uuid:t.uuid},M=0,k=h.length;M!==k;++M)p.push(KeyframeTrack.toJSON(h[M]));return x},CreateFromMorphTargetSequence:function CreateFromMorphTargetSequence(t,p,h,x){for(var M=p.length,k=[],I=0;I<M;I++){var N=[],V=[];N.push((I+M-1)%M,I,(I+1)%M),V.push(0,1,0);var ee=Yf.getKeyframeOrder(N);N=Yf.sortedArray(N,1,ee),V=Yf.sortedArray(V,1,ee),x||0!==N[0]||(N.push(M),V.push(V[0])),k.push(new NumberKeyframeTrack(".morphTargetInfluences["+p[I].name+"]",N,V).scale(1/h))}return new AnimationClip(t,-1,k)},findByName:function findByName(t,p){var h=t;if(!Array.isArray(t)){var x=t;h=x.geometry&&x.geometry.animations||x.animations}for(var M=0;M<h.length;M++)if(h[M].name===p)return h[M];return null},CreateClipsFromMorphTargetSequences:function CreateClipsFromMorphTargetSequences(t,p,h){for(var x={},M=/^([\w-]*?)([\d]+)$/,k=0,I=t.length;k<I;k++){var N=t[k],V=N.name.match(M);if(V&&V.length>1){var ee=x[re=V[1]];ee||(x[re]=ee=[]),ee.push(N)}}var te=[];for(var re in x)te.push(AnimationClip.CreateFromMorphTargetSequence(re,x[re],p,h));return te},parseAnimation:function parseAnimation(t,p){if(!t)return null;for(var h=function addNonemptyTrack(t,p,h,x,M){if(0!==h.length){var k=[],I=[];Yf.flattenJSON(h,k,I,x),0!==k.length&&M.push(new t(p,k,I))}},x=[],M=t.name||"default",k=t.length||-1,I=t.fps||30,N=t.hierarchy||[],V=0;V<N.length;V++){var ee=N[V].keys;if(ee&&0!==ee.length)if(ee[0].morphTargets){for(var te={},re=0;re<ee.length;re++)if(ee[re].morphTargets)for(var ne=0;ne<ee[re].morphTargets.length;ne++)te[ee[re].morphTargets[ne]]=-1;for(var ie in te){var ae=[],oe=[];for(ne=0;ne!==ee[re].morphTargets.length;++ne){var se=ee[re];ae.push(se.time),oe.push(se.morphTarget===ie?1:0)}x.push(new NumberKeyframeTrack(".morphTargetInfluence["+ie+"]",ae,oe))}k=te.length*(I||1)}else{var ce=".bones["+p[V].name+"]";h(VectorKeyframeTrack,ce+".position",ee,"pos",x),h(QuaternionKeyframeTrack,ce+".quaternion",ee,"rot",x),h(VectorKeyframeTrack,ce+".scale",ee,"scl",x)}}return 0===x.length?null:new AnimationClip(M,k,x)}}),Object.assign(AnimationClip.prototype,{resetDuration:function resetDuration(){for(var t=0,p=0,h=this.tracks.length;p!==h;++p){var x=this.tracks[p];t=Math.max(t,x.times[x.times.length-1])}return this.duration=t,this},trim:function trim(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function validate(){for(var t=!0,p=0;p<this.tracks.length;p++)t=t&&this.tracks[p].validate();return t},optimize:function optimize(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function clone(){for(var t=[],p=0;p<this.tracks.length;p++)t.push(this.tracks[p].clone());return new AnimationClip(this.name,this.duration,t)}});var Kf={enabled:!1,files:{},add:function add(t,p){!1!==this.enabled&&(this.files[t]=p)},get:function get(t){if(!1!==this.enabled)return this.files[t]},remove:function remove(t){delete this.files[t]},clear:function clear(){this.files={}}};function LoadingManager(t,p,h){var x=this,M=!1,k=0,I=0,N=void 0,V=[];this.onStart=void 0,this.onLoad=t,this.onProgress=p,this.onError=h,this.itemStart=function(t){I++,!1===M&&void 0!==x.onStart&&x.onStart(t,k,I),M=!0},this.itemEnd=function(t){k++,void 0!==x.onProgress&&x.onProgress(t,k,I),k===I&&(M=!1,void 0!==x.onLoad&&x.onLoad())},this.itemError=function(t){void 0!==x.onError&&x.onError(t)},this.resolveURL=function(t){return N?N(t):t},this.setURLModifier=function(t){return N=t,this},this.addHandler=function(t,p){return V.push(t,p),this},this.removeHandler=function(t){var p=V.indexOf(t);return-1!==p&&V.splice(p,2),this},this.getHandler=function(t){for(var p=0,h=V.length;p<h;p+=2){var x=V[p],M=V[p+1];if(x.global&&(x.lastIndex=0),x.test(t))return M}return null}}var Xf=new LoadingManager;function Loader(t){this.manager=void 0!==t?t:Xf,this.crossOrigin="anonymous",this.path="",this.resourcePath=""}Object.assign(Loader.prototype,{load:function load(){},parse:function parse(){},setCrossOrigin:function setCrossOrigin(t){return this.crossOrigin=t,this},setPath:function setPath(t){return this.path=t,this},setResourcePath:function setResourcePath(t){return this.resourcePath=t,this}});var qf={};function FileLoader(t){Loader.call(this,t)}function AnimationLoader(t){Loader.call(this,t)}function CompressedTextureLoader(t){Loader.call(this,t)}function DataTextureLoader(t){Loader.call(this,t)}function ImageLoader(t){Loader.call(this,t)}function CubeTextureLoader(t){Loader.call(this,t)}function TextureLoader(t){Loader.call(this,t)}function Curve(){this.type="Curve",this.arcLengthDivisions=200}function EllipseCurve(t,p,h,x,M,k,I,N){Curve.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=p||0,this.xRadius=h||1,this.yRadius=x||1,this.aStartAngle=M||0,this.aEndAngle=k||2*Math.PI,this.aClockwise=I||!1,this.aRotation=N||0}function ArcCurve(t,p,h,x,M,k){EllipseCurve.call(this,t,p,h,h,x,M,k),this.type="ArcCurve"}function CubicPoly(){var t=0,p=0,h=0,x=0;function init(M,k,I,N){t=M,p=I,h=-3*M+3*k-2*I-N,x=2*M-2*k+I+N}return{initCatmullRom:function initCatmullRom(t,p,h,x,M){init(p,h,M*(h-t),M*(x-p))},initNonuniformCatmullRom:function initNonuniformCatmullRom(t,p,h,x,M,k,I){var N=(p-t)/M-(h-t)/(M+k)+(h-p)/k,V=(h-p)/k-(x-p)/(k+I)+(x-h)/I;init(p,h,N*=k,V*=k)},calc:function calc(M){var k=M*M;return t+p*M+h*k+x*(k*M)}}}FileLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FileLoader,load:function load(t,p,h,x){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var M=this,k=Kf.get(t);if(void 0!==k)return M.manager.itemStart(t),setTimeout((function(){p&&p(k),M.manager.itemEnd(t)}),0),k;if(void 0===qf[t]){var I=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(I){var N=I[1],V=!!I[2],ee=I[3];ee=decodeURIComponent(ee),V&&(ee=atob(ee));try{var te,re=(this.responseType||"").toLowerCase();switch(re){case"arraybuffer":case"blob":for(var ne=new Uint8Array(ee.length),ie=0;ie<ee.length;ie++)ne[ie]=ee.charCodeAt(ie);te="blob"===re?new Blob([ne.buffer],{type:N}):ne.buffer;break;case"document":var ae=new DOMParser;te=ae.parseFromString(ee,N);break;case"json":te=JSON.parse(ee);break;default:te=ee}setTimeout((function(){p&&p(te),M.manager.itemEnd(t)}),0)}catch(ce){setTimeout((function(){x&&x(ce),M.manager.itemError(t),M.manager.itemEnd(t)}),0)}}else{qf[t]=[],qf[t].push({onLoad:p,onProgress:h,onError:x});var oe=new XMLHttpRequest;for(var se in oe.open("GET",t,!0),oe.addEventListener("load",(function(p){var h=this.response,x=qf[t];if(delete qf[t],200===this.status||0===this.status){this.status,Kf.add(t,h);for(var k=0,I=x.length;k<I;k++){(N=x[k]).onLoad&&N.onLoad(h)}M.manager.itemEnd(t)}else{for(k=0,I=x.length;k<I;k++){var N;(N=x[k]).onError&&N.onError(p)}M.manager.itemError(t),M.manager.itemEnd(t)}}),!1),oe.addEventListener("progress",(function(p){for(var h=qf[t],x=0,M=h.length;x<M;x++){var k=h[x];k.onProgress&&k.onProgress(p)}}),!1),oe.addEventListener("error",(function(p){var h=qf[t];delete qf[t];for(var x=0,k=h.length;x<k;x++){var I=h[x];I.onError&&I.onError(p)}M.manager.itemError(t),M.manager.itemEnd(t)}),!1),oe.addEventListener("abort",(function(p){var h=qf[t];delete qf[t];for(var x=0,k=h.length;x<k;x++){var I=h[x];I.onError&&I.onError(p)}M.manager.itemError(t),M.manager.itemEnd(t)}),!1),void 0!==this.responseType&&(oe.responseType=this.responseType),void 0!==this.withCredentials&&(oe.withCredentials=this.withCredentials),oe.overrideMimeType&&oe.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)oe.setRequestHeader(se,this.requestHeader[se]);oe.send(null)}return M.manager.itemStart(t),oe}qf[t].push({onLoad:p,onProgress:h,onError:x})},setResponseType:function setResponseType(t){return this.responseType=t,this},setWithCredentials:function setWithCredentials(t){return this.withCredentials=t,this},setMimeType:function setMimeType(t){return this.mimeType=t,this},setRequestHeader:function setRequestHeader(t){return this.requestHeader=t,this}}),AnimationLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AnimationLoader,load:function load(t,p,h,x){var M=this,k=new FileLoader(M.manager);k.setPath(M.path),k.load(t,(function(t){p(M.parse(JSON.parse(t)))}),h,x)},parse:function parse(t){for(var p=[],h=0;h<t.length;h++){var x=AnimationClip.parse(t[h]);p.push(x)}return p}}),CompressedTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CompressedTextureLoader,load:function load(t,p,h,x){var M=this,k=[],I=new CompressedTexture;I.image=k;var N=new FileLoader(this.manager);function loadTexture(ee){N.load(t[ee],(function(t){var h=M.parse(t,!0);k[ee]={width:h.width,height:h.height,format:h.format,mipmaps:h.mipmaps},6===(V+=1)&&(1===h.mipmapCount&&(I.minFilter=Cu),I.format=h.format,I.needsUpdate=!0,p&&p(I))}),h,x)}if(N.setPath(this.path),N.setResponseType("arraybuffer"),Array.isArray(t))for(var V=0,ee=0,te=t.length;ee<te;++ee)loadTexture(ee);else N.load(t,(function(t){var h=M.parse(t,!0);if(h.isCubemap)for(var x=h.mipmaps.length/h.mipmapCount,N=0;N<x;N++){k[N]={mipmaps:[]};for(var V=0;V<h.mipmapCount;V++)k[N].mipmaps.push(h.mipmaps[N*h.mipmapCount+V]),k[N].format=h.format,k[N].width=h.width,k[N].height=h.height}else I.image.width=h.width,I.image.height=h.height,I.mipmaps=h.mipmaps;1===h.mipmapCount&&(I.minFilter=Cu),I.format=h.format,I.needsUpdate=!0,p&&p(I)}),h,x);return I}}),DataTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:DataTextureLoader,load:function load(t,p,h,x){var M=this,k=new DataTexture,I=new FileLoader(this.manager);return I.setResponseType("arraybuffer"),I.setPath(this.path),I.load(t,(function(t){var h=M.parse(t);h&&(void 0!==h.image?k.image=h.image:void 0!==h.data&&(k.image.width=h.width,k.image.height=h.height,k.image.data=h.data),k.wrapS=void 0!==h.wrapS?h.wrapS:yu,k.wrapT=void 0!==h.wrapT?h.wrapT:yu,k.magFilter=void 0!==h.magFilter?h.magFilter:Cu,k.minFilter=void 0!==h.minFilter?h.minFilter:Cu,k.anisotropy=void 0!==h.anisotropy?h.anisotropy:1,void 0!==h.format&&(k.format=h.format),void 0!==h.type&&(k.type=h.type),void 0!==h.mipmaps&&(k.mipmaps=h.mipmaps,k.minFilter=Su),1===h.mipmapCount&&(k.minFilter=Cu),k.needsUpdate=!0,p&&p(k,h))}),h,x),k}}),ImageLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageLoader,load:function load(t,p,h,x){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var M=this,k=Kf.get(t);if(void 0!==k)return M.manager.itemStart(t),setTimeout((function(){p&&p(k),M.manager.itemEnd(t)}),0),k;var I=document.createElementNS("http://www.w3.org/1999/xhtml","img");function onImageLoad(){I.removeEventListener("load",onImageLoad,!1),I.removeEventListener("error",onImageError,!1),Kf.add(t,this),p&&p(this),M.manager.itemEnd(t)}function onImageError(p){I.removeEventListener("load",onImageLoad,!1),I.removeEventListener("error",onImageError,!1),x&&x(p),M.manager.itemError(t),M.manager.itemEnd(t)}return I.addEventListener("load",onImageLoad,!1),I.addEventListener("error",onImageError,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(I.crossOrigin=this.crossOrigin),M.manager.itemStart(t),I.src=t,I}}),CubeTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CubeTextureLoader,load:function load(t,p,h,x){var M=new CubeTexture,k=new ImageLoader(this.manager);k.setCrossOrigin(this.crossOrigin),k.setPath(this.path);var I=0;function loadTexture(h){k.load(t[h],(function(t){M.images[h]=t,6===++I&&(M.needsUpdate=!0,p&&p(M))}),void 0,x)}for(var N=0;N<t.length;++N)loadTexture(N);return M}}),TextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:TextureLoader,load:function load(t,p,h,x){var M=new Texture,k=new ImageLoader(this.manager);return k.setCrossOrigin(this.crossOrigin),k.setPath(this.path),k.load(t,(function(h){M.image=h;var x=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);M.format=x?Fu:Vu,M.needsUpdate=!0,void 0!==p&&p(M)}),h,x),M}}),Object.assign(Curve.prototype,{getPoint:function getPoint(){return null},getPointAt:function getPointAt(t,p){var h=this.getUtoTmapping(t);return this.getPoint(h,p)},getPoints:function getPoints(t){void 0===t&&(t=5);for(var p=[],h=0;h<=t;h++)p.push(this.getPoint(h/t));return p},getSpacedPoints:function getSpacedPoints(t){void 0===t&&(t=5);for(var p=[],h=0;h<=t;h++)p.push(this.getPointAt(h/t));return p},getLength:function getLength(){var t=this.getLengths();return t[t.length-1]},getLengths:function getLengths(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var p,h,x=[],M=this.getPoint(0),k=0;for(x.push(0),h=1;h<=t;h++)k+=(p=this.getPoint(h/t)).distanceTo(M),x.push(k),M=p;return this.cacheArcLengths=x,x},updateArcLengths:function updateArcLengths(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function getUtoTmapping(t,p){var h,x=this.getLengths(),M=0,k=x.length;h=p||t*x[k-1];for(var I,N=0,V=k-1;N<=V;)if((I=x[M=Math.floor(N+(V-N)/2)]-h)<0)N=M+1;else{if(!(I>0)){V=M;break}V=M-1}if(x[M=V]===h)return M/(k-1);var ee=x[M];return(M+(h-ee)/(x[M+1]-ee))/(k-1)},getTangent:function getTangent(t){var p=1e-4,h=t-p,x=t+p;h<0&&(h=0),x>1&&(x=1);var M=this.getPoint(h);return this.getPoint(x).clone().sub(M).normalize()},getTangentAt:function getTangentAt(t){var p=this.getUtoTmapping(t);return this.getTangent(p)},computeFrenetFrames:function computeFrenetFrames(t,p){var h,x,M,k=new Vector3,I=[],N=[],V=[],ee=new Vector3,te=new Matrix4;for(h=0;h<=t;h++)x=h/t,I[h]=this.getTangentAt(x),I[h].normalize();N[0]=new Vector3,V[0]=new Vector3;var re=Number.MAX_VALUE,ne=Math.abs(I[0].x),ie=Math.abs(I[0].y),ae=Math.abs(I[0].z);for(ne<=re&&(re=ne,k.set(1,0,0)),ie<=re&&(re=ie,k.set(0,1,0)),ae<=re&&k.set(0,0,1),ee.crossVectors(I[0],k).normalize(),N[0].crossVectors(I[0],ee),V[0].crossVectors(I[0],N[0]),h=1;h<=t;h++)N[h]=N[h-1].clone(),V[h]=V[h-1].clone(),ee.crossVectors(I[h-1],I[h]),ee.length()>Number.EPSILON&&(ee.normalize(),M=Math.acos(Yl.clamp(I[h-1].dot(I[h]),-1,1)),N[h].applyMatrix4(te.makeRotationAxis(ee,M))),V[h].crossVectors(I[h],N[h]);if(!0===p)for(M=Math.acos(Yl.clamp(N[0].dot(N[t]),-1,1)),M/=t,I[0].dot(ee.crossVectors(N[0],N[t]))>0&&(M=-M),h=1;h<=t;h++)N[h].applyMatrix4(te.makeRotationAxis(I[h],M*h)),V[h].crossVectors(I[h],N[h]);return{tangents:I,normals:N,binormals:V}},clone:function clone(){return(new this.constructor).copy(this)},copy:function copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function toJSON(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),EllipseCurve.prototype=Object.create(Curve.prototype),EllipseCurve.prototype.constructor=EllipseCurve,EllipseCurve.prototype.isEllipseCurve=!0,EllipseCurve.prototype.getPoint=function(t,p){for(var h=p||new Vector2,x=2*Math.PI,M=this.aEndAngle-this.aStartAngle,k=Math.abs(M)<Number.EPSILON;M<0;)M+=x;for(;M>x;)M-=x;M<Number.EPSILON&&(M=k?0:x),!0!==this.aClockwise||k||(M===x?M=-x:M-=x);var I=this.aStartAngle+t*M,N=this.aX+this.xRadius*Math.cos(I),V=this.aY+this.yRadius*Math.sin(I);if(0!==this.aRotation){var ee=Math.cos(this.aRotation),te=Math.sin(this.aRotation),re=N-this.aX,ne=V-this.aY;N=re*ee-ne*te+this.aX,V=re*te+ne*ee+this.aY}return h.set(N,V)},EllipseCurve.prototype.copy=function(t){return Curve.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},EllipseCurve.prototype.toJSON=function(){var t=Curve.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},EllipseCurve.prototype.fromJSON=function(t){return Curve.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},ArcCurve.prototype=Object.create(EllipseCurve.prototype),ArcCurve.prototype.constructor=ArcCurve,ArcCurve.prototype.isArcCurve=!0;var Zf=new Vector3,Jf=new CubicPoly,Qf=new CubicPoly,ed=new CubicPoly;function CatmullRomCurve3(t,p,h,x){Curve.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=p||!1,this.curveType=h||"centripetal",this.tension=x||.5}function CatmullRom(t,p,h,x,M){var k=.5*(x-p),I=.5*(M-h),N=t*t;return(2*h-2*x+k+I)*(t*N)+(-3*h+3*x-2*k-I)*N+k*t+h}function QuadraticBezier(t,p,h,x){return function QuadraticBezierP0(t,p){var h=1-t;return h*h*p}(t,p)+function QuadraticBezierP1(t,p){return 2*(1-t)*t*p}(t,h)+function QuadraticBezierP2(t,p){return t*t*p}(t,x)}function CubicBezier(t,p,h,x,M){return function CubicBezierP0(t,p){var h=1-t;return h*h*h*p}(t,p)+function CubicBezierP1(t,p){var h=1-t;return 3*h*h*t*p}(t,h)+function CubicBezierP2(t,p){return 3*(1-t)*t*t*p}(t,x)+function CubicBezierP3(t,p){return t*t*t*p}(t,M)}function CubicBezierCurve(t,p,h,x){Curve.call(this),this.type="CubicBezierCurve",this.v0=t||new Vector2,this.v1=p||new Vector2,this.v2=h||new Vector2,this.v3=x||new Vector2}function CubicBezierCurve3(t,p,h,x){Curve.call(this),this.type="CubicBezierCurve3",this.v0=t||new Vector3,this.v1=p||new Vector3,this.v2=h||new Vector3,this.v3=x||new Vector3}function LineCurve(t,p){Curve.call(this),this.type="LineCurve",this.v1=t||new Vector2,this.v2=p||new Vector2}function LineCurve3(t,p){Curve.call(this),this.type="LineCurve3",this.v1=t||new Vector3,this.v2=p||new Vector3}function QuadraticBezierCurve(t,p,h){Curve.call(this),this.type="QuadraticBezierCurve",this.v0=t||new Vector2,this.v1=p||new Vector2,this.v2=h||new Vector2}function QuadraticBezierCurve3(t,p,h){Curve.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new Vector3,this.v1=p||new Vector3,this.v2=h||new Vector3}function SplineCurve(t){Curve.call(this),this.type="SplineCurve",this.points=t||[]}CatmullRomCurve3.prototype=Object.create(Curve.prototype),CatmullRomCurve3.prototype.constructor=CatmullRomCurve3,CatmullRomCurve3.prototype.isCatmullRomCurve3=!0,CatmullRomCurve3.prototype.getPoint=function(t,p){var h,x,M,k,I=p||new Vector3,N=this.points,V=N.length,ee=(V-(this.closed?0:1))*t,te=Math.floor(ee),re=ee-te;if(this.closed?te+=te>0?0:(Math.floor(Math.abs(te)/V)+1)*V:0===re&&te===V-1&&(te=V-2,re=1),this.closed||te>0?h=N[(te-1)%V]:(Zf.subVectors(N[0],N[1]).add(N[0]),h=Zf),x=N[te%V],M=N[(te+1)%V],this.closed||te+2<V?k=N[(te+2)%V]:(Zf.subVectors(N[V-1],N[V-2]).add(N[V-1]),k=Zf),"centripetal"===this.curveType||"chordal"===this.curveType){var ne="chordal"===this.curveType?.5:.25,ie=Math.pow(h.distanceToSquared(x),ne),ae=Math.pow(x.distanceToSquared(M),ne),oe=Math.pow(M.distanceToSquared(k),ne);ae<1e-4&&(ae=1),ie<1e-4&&(ie=ae),oe<1e-4&&(oe=ae),Jf.initNonuniformCatmullRom(h.x,x.x,M.x,k.x,ie,ae,oe),Qf.initNonuniformCatmullRom(h.y,x.y,M.y,k.y,ie,ae,oe),ed.initNonuniformCatmullRom(h.z,x.z,M.z,k.z,ie,ae,oe)}else"catmullrom"===this.curveType&&(Jf.initCatmullRom(h.x,x.x,M.x,k.x,this.tension),Qf.initCatmullRom(h.y,x.y,M.y,k.y,this.tension),ed.initCatmullRom(h.z,x.z,M.z,k.z,this.tension));return I.set(Jf.calc(re),Qf.calc(re),ed.calc(re)),I},CatmullRomCurve3.prototype.copy=function(t){Curve.prototype.copy.call(this,t),this.points=[];for(var p=0,h=t.points.length;p<h;p++){var x=t.points[p];this.points.push(x.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},CatmullRomCurve3.prototype.toJSON=function(){var t=Curve.prototype.toJSON.call(this);t.points=[];for(var p=0,h=this.points.length;p<h;p++){var x=this.points[p];t.points.push(x.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},CatmullRomCurve3.prototype.fromJSON=function(t){Curve.prototype.fromJSON.call(this,t),this.points=[];for(var p=0,h=t.points.length;p<h;p++){var x=t.points[p];this.points.push((new Vector3).fromArray(x))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},CubicBezierCurve.prototype=Object.create(Curve.prototype),CubicBezierCurve.prototype.constructor=CubicBezierCurve,CubicBezierCurve.prototype.isCubicBezierCurve=!0,CubicBezierCurve.prototype.getPoint=function(t,p){var h=p||new Vector2,x=this.v0,M=this.v1,k=this.v2,I=this.v3;return h.set(CubicBezier(t,x.x,M.x,k.x,I.x),CubicBezier(t,x.y,M.y,k.y,I.y)),h},CubicBezierCurve.prototype.copy=function(t){return Curve.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},CubicBezierCurve.prototype.toJSON=function(){var t=Curve.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},CubicBezierCurve.prototype.fromJSON=function(t){return Curve.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},CubicBezierCurve3.prototype=Object.create(Curve.prototype),CubicBezierCurve3.prototype.constructor=CubicBezierCurve3,CubicBezierCurve3.prototype.isCubicBezierCurve3=!0,CubicBezierCurve3.prototype.getPoint=function(t,p){var h=p||new Vector3,x=this.v0,M=this.v1,k=this.v2,I=this.v3;return h.set(CubicBezier(t,x.x,M.x,k.x,I.x),CubicBezier(t,x.y,M.y,k.y,I.y),CubicBezier(t,x.z,M.z,k.z,I.z)),h},CubicBezierCurve3.prototype.copy=function(t){return Curve.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},CubicBezierCurve3.prototype.toJSON=function(){var t=Curve.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},CubicBezierCurve3.prototype.fromJSON=function(t){return Curve.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},LineCurve.prototype=Object.create(Curve.prototype),LineCurve.prototype.constructor=LineCurve,LineCurve.prototype.isLineCurve=!0,LineCurve.prototype.getPoint=function(t,p){var h=p||new Vector2;return 1===t?h.copy(this.v2):(h.copy(this.v2).sub(this.v1),h.multiplyScalar(t).add(this.v1)),h},LineCurve.prototype.getPointAt=function(t,p){return this.getPoint(t,p)},LineCurve.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},LineCurve.prototype.copy=function(t){return Curve.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},LineCurve.prototype.toJSON=function(){var t=Curve.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},LineCurve.prototype.fromJSON=function(t){return Curve.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},LineCurve3.prototype=Object.create(Curve.prototype),LineCurve3.prototype.constructor=LineCurve3,LineCurve3.prototype.isLineCurve3=!0,LineCurve3.prototype.getPoint=function(t,p){var h=p||new Vector3;return 1===t?h.copy(this.v2):(h.copy(this.v2).sub(this.v1),h.multiplyScalar(t).add(this.v1)),h},LineCurve3.prototype.getPointAt=function(t,p){return this.getPoint(t,p)},LineCurve3.prototype.copy=function(t){return Curve.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},LineCurve3.prototype.toJSON=function(){var t=Curve.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},LineCurve3.prototype.fromJSON=function(t){return Curve.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},QuadraticBezierCurve.prototype=Object.create(Curve.prototype),QuadraticBezierCurve.prototype.constructor=QuadraticBezierCurve,QuadraticBezierCurve.prototype.isQuadraticBezierCurve=!0,QuadraticBezierCurve.prototype.getPoint=function(t,p){var h=p||new Vector2,x=this.v0,M=this.v1,k=this.v2;return h.set(QuadraticBezier(t,x.x,M.x,k.x),QuadraticBezier(t,x.y,M.y,k.y)),h},QuadraticBezierCurve.prototype.copy=function(t){return Curve.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},QuadraticBezierCurve.prototype.toJSON=function(){var t=Curve.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},QuadraticBezierCurve.prototype.fromJSON=function(t){return Curve.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},QuadraticBezierCurve3.prototype=Object.create(Curve.prototype),QuadraticBezierCurve3.prototype.constructor=QuadraticBezierCurve3,QuadraticBezierCurve3.prototype.isQuadraticBezierCurve3=!0,QuadraticBezierCurve3.prototype.getPoint=function(t,p){var h=p||new Vector3,x=this.v0,M=this.v1,k=this.v2;return h.set(QuadraticBezier(t,x.x,M.x,k.x),QuadraticBezier(t,x.y,M.y,k.y),QuadraticBezier(t,x.z,M.z,k.z)),h},QuadraticBezierCurve3.prototype.copy=function(t){return Curve.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},QuadraticBezierCurve3.prototype.toJSON=function(){var t=Curve.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},QuadraticBezierCurve3.prototype.fromJSON=function(t){return Curve.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},SplineCurve.prototype=Object.create(Curve.prototype),SplineCurve.prototype.constructor=SplineCurve,SplineCurve.prototype.isSplineCurve=!0,SplineCurve.prototype.getPoint=function(t,p){var h=p||new Vector2,x=this.points,M=(x.length-1)*t,k=Math.floor(M),I=M-k,N=x[0===k?k:k-1],V=x[k],ee=x[k>x.length-2?x.length-1:k+1],te=x[k>x.length-3?x.length-1:k+2];return h.set(CatmullRom(I,N.x,V.x,ee.x,te.x),CatmullRom(I,N.y,V.y,ee.y,te.y)),h},SplineCurve.prototype.copy=function(t){Curve.prototype.copy.call(this,t),this.points=[];for(var p=0,h=t.points.length;p<h;p++){var x=t.points[p];this.points.push(x.clone())}return this},SplineCurve.prototype.toJSON=function(){var t=Curve.prototype.toJSON.call(this);t.points=[];for(var p=0,h=this.points.length;p<h;p++){var x=this.points[p];t.points.push(x.toArray())}return t},SplineCurve.prototype.fromJSON=function(t){Curve.prototype.fromJSON.call(this,t),this.points=[];for(var p=0,h=t.points.length;p<h;p++){var x=t.points[p];this.points.push((new Vector2).fromArray(x))}return this};var td=Object.freeze({__proto__:null,ArcCurve:ArcCurve,CatmullRomCurve3:CatmullRomCurve3,CubicBezierCurve:CubicBezierCurve,CubicBezierCurve3:CubicBezierCurve3,EllipseCurve:EllipseCurve,LineCurve:LineCurve,LineCurve3:LineCurve3,QuadraticBezierCurve:QuadraticBezierCurve,QuadraticBezierCurve3:QuadraticBezierCurve3,SplineCurve:SplineCurve});function CurvePath(){Curve.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Path(t){CurvePath.call(this),this.type="Path",this.currentPoint=new Vector2,t&&this.setFromPoints(t)}function Shape(t){Path.call(this,t),this.uuid=Yl.generateUUID(),this.type="Shape",this.holes=[]}function Light(t,p){Object3D.call(this),this.type="Light",this.color=new Color(t),this.intensity=void 0!==p?p:1,this.receiveShadow=void 0}function HemisphereLight(t,p,h){Light.call(this,t,h),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.groundColor=new Color(p)}function LightShadow(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}function SpotLightShadow(){LightShadow.call(this,new PerspectiveCamera(50,1,.5,500))}function SpotLight(t,p,h,x,M,k){Light.call(this,t,p),this.type="SpotLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,Object.defineProperty(this,"power",{get:function get(){return this.intensity*Math.PI},set:function set(t){this.intensity=t/Math.PI}}),this.distance=void 0!==h?h:0,this.angle=void 0!==x?x:Math.PI/3,this.penumbra=void 0!==M?M:0,this.decay=void 0!==k?k:1,this.shadow=new SpotLightShadow}function PointLightShadow(){LightShadow.call(this,new PerspectiveCamera(90,1,.5,500)),this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}function PointLight(t,p,h,x){Light.call(this,t,p),this.type="PointLight",Object.defineProperty(this,"power",{get:function get(){return 4*this.intensity*Math.PI},set:function set(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==h?h:0,this.decay=void 0!==x?x:1,this.shadow=new PointLightShadow}function OrthographicCamera(t,p,h,x,M,k){Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==p?p:1,this.top=void 0!==h?h:1,this.bottom=void 0!==x?x:-1,this.near=void 0!==M?M:.1,this.far=void 0!==k?k:2e3,this.updateProjectionMatrix()}function DirectionalLightShadow(){LightShadow.call(this,new OrthographicCamera(-5,5,5,-5,.5,500))}function DirectionalLight(t,p){Light.call(this,t,p),this.type="DirectionalLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}function AmbientLight(t,p){Light.call(this,t,p),this.type="AmbientLight",this.castShadow=void 0}function RectAreaLight(t,p,h,x){Light.call(this,t,p),this.type="RectAreaLight",this.width=void 0!==h?h:10,this.height=void 0!==x?x:10}function MaterialLoader(t){Loader.call(this,t),this.textures={}}CurvePath.prototype=Object.assign(Object.create(Curve.prototype),{constructor:CurvePath,add:function add(t){this.curves.push(t)},closePath:function closePath(){var t=this.curves[0].getPoint(0),p=this.curves[this.curves.length-1].getPoint(1);t.equals(p)||this.curves.push(new LineCurve(p,t))},getPoint:function getPoint(t){for(var p=t*this.getLength(),h=this.getCurveLengths(),x=0;x<h.length;){if(h[x]>=p){var M=h[x]-p,k=this.curves[x],I=k.getLength(),N=0===I?0:1-M/I;return k.getPointAt(N)}x++}return null},getLength:function getLength(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],p=0,h=0,x=this.curves.length;h<x;h++)p+=this.curves[h].getLength(),t.push(p);return this.cacheLengths=t,t},getSpacedPoints:function getSpacedPoints(t){void 0===t&&(t=40);for(var p=[],h=0;h<=t;h++)p.push(this.getPoint(h/t));return this.autoClose&&p.push(p[0]),p},getPoints:function getPoints(t){t=t||12;for(var p,h=[],x=0,M=this.curves;x<M.length;x++)for(var k=M[x],I=k&&k.isEllipseCurve?2*t:k&&(k.isLineCurve||k.isLineCurve3)?1:k&&k.isSplineCurve?t*k.points.length:t,N=k.getPoints(I),V=0;V<N.length;V++){var ee=N[V];p&&p.equals(ee)||(h.push(ee),p=ee)}return this.autoClose&&h.length>1&&!h[h.length-1].equals(h[0])&&h.push(h[0]),h},copy:function copy(t){Curve.prototype.copy.call(this,t),this.curves=[];for(var p=0,h=t.curves.length;p<h;p++){var x=t.curves[p];this.curves.push(x.clone())}return this.autoClose=t.autoClose,this},toJSON:function toJSON(){var t=Curve.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var p=0,h=this.curves.length;p<h;p++){var x=this.curves[p];t.curves.push(x.toJSON())}return t},fromJSON:function fromJSON(t){Curve.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var p=0,h=t.curves.length;p<h;p++){var x=t.curves[p];this.curves.push((new td[x.type]).fromJSON(x))}return this}}),Path.prototype=Object.assign(Object.create(CurvePath.prototype),{constructor:Path,setFromPoints:function setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(var p=1,h=t.length;p<h;p++)this.lineTo(t[p].x,t[p].y);return this},moveTo:function moveTo(t,p){return this.currentPoint.set(t,p),this},lineTo:function lineTo(t,p){var h=new LineCurve(this.currentPoint.clone(),new Vector2(t,p));return this.curves.push(h),this.currentPoint.set(t,p),this},quadraticCurveTo:function quadraticCurveTo(t,p,h,x){var M=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(t,p),new Vector2(h,x));return this.curves.push(M),this.currentPoint.set(h,x),this},bezierCurveTo:function bezierCurveTo(t,p,h,x,M,k){var I=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(t,p),new Vector2(h,x),new Vector2(M,k));return this.curves.push(I),this.currentPoint.set(M,k),this},splineThru:function splineThru(t){var p=new SplineCurve([this.currentPoint.clone()].concat(t));return this.curves.push(p),this.currentPoint.copy(t[t.length-1]),this},arc:function arc(t,p,h,x,M,k){var I=this.currentPoint.x,N=this.currentPoint.y;return this.absarc(t+I,p+N,h,x,M,k),this},absarc:function absarc(t,p,h,x,M,k){return this.absellipse(t,p,h,h,x,M,k),this},ellipse:function ellipse(t,p,h,x,M,k,I,N){var V=this.currentPoint.x,ee=this.currentPoint.y;return this.absellipse(t+V,p+ee,h,x,M,k,I,N),this},absellipse:function absellipse(t,p,h,x,M,k,I,N){var V=new EllipseCurve(t,p,h,x,M,k,I,N);if(this.curves.length>0){var ee=V.getPoint(0);ee.equals(this.currentPoint)||this.lineTo(ee.x,ee.y)}this.curves.push(V);var te=V.getPoint(1);return this.currentPoint.copy(te),this},copy:function copy(t){return CurvePath.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function toJSON(){var t=CurvePath.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function fromJSON(t){return CurvePath.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),Shape.prototype=Object.assign(Object.create(Path.prototype),{constructor:Shape,getPointsHoles:function getPointsHoles(t){for(var p=[],h=0,x=this.holes.length;h<x;h++)p[h]=this.holes[h].getPoints(t);return p},extractPoints:function extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function copy(t){Path.prototype.copy.call(this,t),this.holes=[];for(var p=0,h=t.holes.length;p<h;p++){var x=t.holes[p];this.holes.push(x.clone())}return this},toJSON:function toJSON(){var t=Path.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var p=0,h=this.holes.length;p<h;p++){var x=this.holes[p];t.holes.push(x.toJSON())}return t},fromJSON:function fromJSON(t){Path.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var p=0,h=t.holes.length;p<h;p++){var x=t.holes[p];this.holes.push((new Path).fromJSON(x))}return this}}),Light.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Light,isLight:!0,copy:function copy(t){return Object3D.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function toJSON(t){var p=Object3D.prototype.toJSON.call(this,t);return p.object.color=this.color.getHex(),p.object.intensity=this.intensity,void 0!==this.groundColor&&(p.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(p.object.distance=this.distance),void 0!==this.angle&&(p.object.angle=this.angle),void 0!==this.decay&&(p.object.decay=this.decay),void 0!==this.penumbra&&(p.object.penumbra=this.penumbra),void 0!==this.shadow&&(p.object.shadow=this.shadow.toJSON()),p}}),HemisphereLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:HemisphereLight,isHemisphereLight:!0,copy:function copy(t){return Light.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(LightShadow.prototype,{_projScreenMatrix:new Matrix4,_lightPositionWorld:new Vector3,_lookTarget:new Vector3,getViewportCount:function getViewportCount(){return this._viewportCount},getFrustum:function getFrustum(){return this._frustum},updateMatrices:function updateMatrices(t){var p=this.camera,h=this.matrix,x=this._projScreenMatrix,M=this._lookTarget,k=this._lightPositionWorld;k.setFromMatrixPosition(t.matrixWorld),p.position.copy(k),M.setFromMatrixPosition(t.target.matrixWorld),p.lookAt(M),p.updateMatrixWorld(),x.multiplyMatrices(p.projectionMatrix,p.matrixWorldInverse),this._frustum.setFromProjectionMatrix(x),h.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),h.multiply(p.projectionMatrix),h.multiply(p.matrixWorldInverse)},getViewport:function getViewport(t){return this._viewports[t]},getFrameExtents:function getFrameExtents(){return this._frameExtents},copy:function copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function clone(){return(new this.constructor).copy(this)},toJSON:function toJSON(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),SpotLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:SpotLightShadow,isSpotLightShadow:!0,updateMatrices:function updateMatrices(t){var p=this.camera,h=2*Yl.RAD2DEG*t.angle,x=this.mapSize.width/this.mapSize.height,M=t.distance||p.far;h===p.fov&&x===p.aspect&&M===p.far||(p.fov=h,p.aspect=x,p.far=M,p.updateProjectionMatrix()),LightShadow.prototype.updateMatrices.call(this,t)}}),SpotLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:SpotLight,isSpotLight:!0,copy:function copy(t){return Light.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),PointLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:PointLightShadow,isPointLightShadow:!0,updateMatrices:function updateMatrices(t,p){void 0===p&&(p=0);var h=this.camera,x=this.matrix,M=this._lightPositionWorld,k=this._lookTarget,I=this._projScreenMatrix;M.setFromMatrixPosition(t.matrixWorld),h.position.copy(M),k.copy(h.position),k.add(this._cubeDirections[p]),h.up.copy(this._cubeUps[p]),h.lookAt(k),h.updateMatrixWorld(),x.makeTranslation(-M.x,-M.y,-M.z),I.multiplyMatrices(h.projectionMatrix,h.matrixWorldInverse),this._frustum.setFromProjectionMatrix(I)}}),PointLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:PointLight,isPointLight:!0,copy:function copy(t){return Light.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),OrthographicCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:OrthographicCamera,isOrthographicCamera:!0,copy:function copy(t,p){return Camera.prototype.copy.call(this,t,p),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function setViewOffset(t,p,h,x,M,k){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=p,this.view.offsetX=h,this.view.offsetY=x,this.view.width=M,this.view.height=k,this.updateProjectionMatrix()},clearViewOffset:function clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function updateProjectionMatrix(){var t=(this.right-this.left)/(2*this.zoom),p=(this.top-this.bottom)/(2*this.zoom),h=(this.right+this.left)/2,x=(this.top+this.bottom)/2,M=h-t,k=h+t,I=x+p,N=x-p;if(null!==this.view&&this.view.enabled){var V=(this.right-this.left)/this.view.fullWidth/this.zoom,ee=(this.top-this.bottom)/this.view.fullHeight/this.zoom;k=(M+=V*this.view.offsetX)+V*this.view.width,N=(I-=ee*this.view.offsetY)-ee*this.view.height}this.projectionMatrix.makeOrthographic(M,k,I,N,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function toJSON(t){var p=Object3D.prototype.toJSON.call(this,t);return p.object.zoom=this.zoom,p.object.left=this.left,p.object.right=this.right,p.object.top=this.top,p.object.bottom=this.bottom,p.object.near=this.near,p.object.far=this.far,null!==this.view&&(p.object.view=Object.assign({},this.view)),p}}),DirectionalLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:DirectionalLightShadow,isDirectionalLightShadow:!0,updateMatrices:function updateMatrices(t){LightShadow.prototype.updateMatrices.call(this,t)}}),DirectionalLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:DirectionalLight,isDirectionalLight:!0,copy:function copy(t){return Light.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),AmbientLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:AmbientLight,isAmbientLight:!0}),RectAreaLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:RectAreaLight,isRectAreaLight:!0,copy:function copy(t){return Light.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function toJSON(t){var p=Light.prototype.toJSON.call(this,t);return p.object.width=this.width,p.object.height=this.height,p}}),MaterialLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:MaterialLoader,load:function load(t,p,h,x){var M=this,k=new FileLoader(M.manager);k.setPath(M.path),k.load(t,(function(t){p(M.parse(JSON.parse(t)))}),h,x)},parse:function parse(t){var p=this.textures;function getTexture(t){return p[t],p[t]}var h=new $f[t.type];if(void 0!==t.uuid&&(h.uuid=t.uuid),void 0!==t.name&&(h.name=t.name),void 0!==t.color&&h.color.setHex(t.color),void 0!==t.roughness&&(h.roughness=t.roughness),void 0!==t.metalness&&(h.metalness=t.metalness),void 0!==t.sheen&&(h.sheen=(new Color).setHex(t.sheen)),void 0!==t.emissive&&h.emissive.setHex(t.emissive),void 0!==t.specular&&h.specular.setHex(t.specular),void 0!==t.shininess&&(h.shininess=t.shininess),void 0!==t.clearcoat&&(h.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(h.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.vertexColors&&(h.vertexColors=t.vertexColors),void 0!==t.fog&&(h.fog=t.fog),void 0!==t.flatShading&&(h.flatShading=t.flatShading),void 0!==t.blending&&(h.blending=t.blending),void 0!==t.combine&&(h.combine=t.combine),void 0!==t.side&&(h.side=t.side),void 0!==t.opacity&&(h.opacity=t.opacity),void 0!==t.transparent&&(h.transparent=t.transparent),void 0!==t.alphaTest&&(h.alphaTest=t.alphaTest),void 0!==t.depthTest&&(h.depthTest=t.depthTest),void 0!==t.depthWrite&&(h.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(h.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(h.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(h.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(h.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(h.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(h.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(h.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(h.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(h.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(h.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(h.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(h.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(h.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(h.rotation=t.rotation),1!==t.linewidth&&(h.linewidth=t.linewidth),void 0!==t.dashSize&&(h.dashSize=t.dashSize),void 0!==t.gapSize&&(h.gapSize=t.gapSize),void 0!==t.scale&&(h.scale=t.scale),void 0!==t.polygonOffset&&(h.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(h.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(h.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(h.skinning=t.skinning),void 0!==t.morphTargets&&(h.morphTargets=t.morphTargets),void 0!==t.morphNormals&&(h.morphNormals=t.morphNormals),void 0!==t.dithering&&(h.dithering=t.dithering),void 0!==t.visible&&(h.visible=t.visible),void 0!==t.toneMapped&&(h.toneMapped=t.toneMapped),void 0!==t.userData&&(h.userData=t.userData),void 0!==t.uniforms)for(var x in t.uniforms){var M=t.uniforms[x];switch(h.uniforms[x]={},M.type){case"t":h.uniforms[x].value=getTexture(M.value);break;case"c":h.uniforms[x].value=(new Color).setHex(M.value);break;case"v2":h.uniforms[x].value=(new Vector2).fromArray(M.value);break;case"v3":h.uniforms[x].value=(new Vector3).fromArray(M.value);break;case"v4":h.uniforms[x].value=(new Vector4).fromArray(M.value);break;case"m3":h.uniforms[x].value=(new Matrix3).fromArray(M.value);case"m4":h.uniforms[x].value=(new Matrix4).fromArray(M.value);break;default:h.uniforms[x].value=M.value}}if(void 0!==t.defines&&(h.defines=t.defines),void 0!==t.vertexShader&&(h.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(h.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var k in t.extensions)h.extensions[k]=t.extensions[k];if(void 0!==t.shading&&(h.flatShading=1===t.shading),void 0!==t.size&&(h.size=t.size),void 0!==t.sizeAttenuation&&(h.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(h.map=getTexture(t.map)),void 0!==t.matcap&&(h.matcap=getTexture(t.matcap)),void 0!==t.alphaMap&&(h.alphaMap=getTexture(t.alphaMap),h.transparent=!0),void 0!==t.bumpMap&&(h.bumpMap=getTexture(t.bumpMap)),void 0!==t.bumpScale&&(h.bumpScale=t.bumpScale),void 0!==t.normalMap&&(h.normalMap=getTexture(t.normalMap)),void 0!==t.normalMapType&&(h.normalMapType=t.normalMapType),void 0!==t.normalScale){var I=t.normalScale;!1===Array.isArray(I)&&(I=[I,I]),h.normalScale=(new Vector2).fromArray(I)}return void 0!==t.displacementMap&&(h.displacementMap=getTexture(t.displacementMap)),void 0!==t.displacementScale&&(h.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(h.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(h.roughnessMap=getTexture(t.roughnessMap)),void 0!==t.metalnessMap&&(h.metalnessMap=getTexture(t.metalnessMap)),void 0!==t.emissiveMap&&(h.emissiveMap=getTexture(t.emissiveMap)),void 0!==t.emissiveIntensity&&(h.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(h.specularMap=getTexture(t.specularMap)),void 0!==t.envMap&&(h.envMap=getTexture(t.envMap)),void 0!==t.envMapIntensity&&(h.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(h.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(h.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(h.lightMap=getTexture(t.lightMap)),void 0!==t.lightMapIntensity&&(h.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(h.aoMap=getTexture(t.aoMap)),void 0!==t.aoMapIntensity&&(h.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(h.gradientMap=getTexture(t.gradientMap)),void 0!==t.clearcoatNormalMap&&(h.clearcoatNormalMap=getTexture(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(h.clearcoatNormalScale=(new Vector2).fromArray(t.clearcoatNormalScale)),h},setTextures:function setTextures(t){return this.textures=t,this}});var rd=function extractUrlBase(t){var p=t.lastIndexOf("/");return-1===p?"./":t.substr(0,p+1)};function InstancedBufferGeometry(){BufferGeometry.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function InstancedBufferAttribute(t,p,h,x){"number"==typeof h&&(x=h,h=!1),BufferAttribute.call(this,t,p,h),this.meshPerAttribute=x||1}function BufferGeometryLoader(t){Loader.call(this,t)}InstancedBufferGeometry.prototype=Object.assign(Object.create(BufferGeometry.prototype),{constructor:InstancedBufferGeometry,isInstancedBufferGeometry:!0,copy:function copy(t){return BufferGeometry.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function clone(){return(new this.constructor).copy(this)},toJSON:function toJSON(){var t=BufferGeometry.prototype.toJSON.call(this);return t.maxInstancedCount=this.maxInstancedCount,t.isInstancedBufferGeometry=!0,t}}),InstancedBufferAttribute.prototype=Object.assign(Object.create(BufferAttribute.prototype),{constructor:InstancedBufferAttribute,isInstancedBufferAttribute:!0,copy:function copy(t){return BufferAttribute.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function toJSON(){var t=BufferAttribute.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),BufferGeometryLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:BufferGeometryLoader,load:function load(t,p,h,x){var M=this,k=new FileLoader(M.manager);k.setPath(M.path),k.load(t,(function(t){p(M.parse(JSON.parse(t)))}),h,x)},parse:function parse(t){var p=t.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,h=t.data.index;if(void 0!==h){var x=new nd[h.type](h.array);p.setIndex(new BufferAttribute(x,1))}var M=t.data.attributes;for(var k in M){var I=M[k],N=(x=new nd[I.type](I.array),new(I.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute)(x,I.itemSize,I.normalized));void 0!==I.name&&(N.name=I.name),p.setAttribute(k,N)}var V=t.data.morphAttributes;if(V)for(var k in V){for(var ee=V[k],te=[],re=0,ne=ee.length;re<ne;re++){I=ee[re],N=new BufferAttribute(x=new nd[I.type](I.array),I.itemSize,I.normalized);void 0!==I.name&&(N.name=I.name),te.push(N)}p.morphAttributes[k]=te}t.data.morphTargetsRelative&&(p.morphTargetsRelative=!0);var ie=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==ie){re=0;for(var ae=ie.length;re!==ae;++re){var oe=ie[re];p.addGroup(oe.start,oe.count,oe.materialIndex)}}var se=t.data.boundingSphere;if(void 0!==se){var ce=new Vector3;void 0!==se.center&&ce.fromArray(se.center),p.boundingSphere=new Sphere(ce,se.radius)}return t.name&&(p.name=t.name),t.userData&&(p.userData=t.userData),p}});var nd={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function ObjectLoader(t){Loader.call(this,t)}ObjectLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ObjectLoader,load:function load(t,p,h,x){var M=this,k=""===this.path?rd(t):this.path;this.resourcePath=this.resourcePath||k;var I=new FileLoader(M.manager);I.setPath(this.path),I.load(t,(function(t){var h=null;try{h=JSON.parse(t)}catch(I){return void(void 0!==x&&x(I))}var k=h.metadata;void 0!==k&&void 0!==k.type&&"geometry"!==k.type.toLowerCase()&&M.parse(h,p)}),h,x)},parse:function parse(t,p){var h=this.parseShape(t.shapes),x=this.parseGeometries(t.geometries,h),M=this.parseImages(t.images,(function(){void 0!==p&&p(N)})),k=this.parseTextures(t.textures,M),I=this.parseMaterials(t.materials,k),N=this.parseObject(t.object,x,I);return t.animations&&(N.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==p&&p(N),N},parseShape:function parseShape(t){var p={};if(void 0!==t)for(var h=0,x=t.length;h<x;h++){var M=(new Shape).fromJSON(t[h]);p[M.uuid]=M}return p},parseGeometries:function parseGeometries(t,p){var h={};if(void 0!==t)for(var x=new BufferGeometryLoader,M=0,k=t.length;M<k;M++){var I,N=t[M];switch(N.type){case"PlaneGeometry":case"PlaneBufferGeometry":I=new Hf[N.type](N.width,N.height,N.widthSegments,N.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":I=new Hf[N.type](N.width,N.height,N.depth,N.widthSegments,N.heightSegments,N.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":I=new Hf[N.type](N.radius,N.segments,N.thetaStart,N.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":I=new Hf[N.type](N.radiusTop,N.radiusBottom,N.height,N.radialSegments,N.heightSegments,N.openEnded,N.thetaStart,N.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":I=new Hf[N.type](N.radius,N.height,N.radialSegments,N.heightSegments,N.openEnded,N.thetaStart,N.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":I=new Hf[N.type](N.radius,N.widthSegments,N.heightSegments,N.phiStart,N.phiLength,N.thetaStart,N.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":I=new Hf[N.type](N.radius,N.detail);break;case"RingGeometry":case"RingBufferGeometry":I=new Hf[N.type](N.innerRadius,N.outerRadius,N.thetaSegments,N.phiSegments,N.thetaStart,N.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":I=new Hf[N.type](N.radius,N.tube,N.radialSegments,N.tubularSegments,N.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":I=new Hf[N.type](N.radius,N.tube,N.tubularSegments,N.radialSegments,N.p,N.q);break;case"TubeGeometry":case"TubeBufferGeometry":I=new Hf[N.type]((new td[N.path.type]).fromJSON(N.path),N.tubularSegments,N.radius,N.radialSegments,N.closed);break;case"LatheGeometry":case"LatheBufferGeometry":I=new Hf[N.type](N.points,N.segments,N.phiStart,N.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":I=new Hf[N.type](N.vertices,N.indices,N.radius,N.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var V=[],ee=0,te=N.shapes.length;ee<te;ee++){var re=p[N.shapes[ee]];V.push(re)}I=new Hf[N.type](V,N.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(V=[],ee=0,te=N.shapes.length;ee<te;ee++){re=p[N.shapes[ee]];V.push(re)}var ne=N.options.extrudePath;void 0!==ne&&(N.options.extrudePath=(new td[ne.type]).fromJSON(ne)),I=new Hf[N.type](V,N.options);break;case"BufferGeometry":case"InstancedBufferGeometry":I=x.parse(N);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE)I=(new THREE.LegacyJSONLoader).parse(N,this.resourcePath).geometry;break;default:continue}I.uuid=N.uuid,void 0!==N.name&&(I.name=N.name),!0===I.isBufferGeometry&&void 0!==N.userData&&(I.userData=N.userData),h[N.uuid]=I}return h},parseMaterials:function parseMaterials(t,p){var h={},x={};if(void 0!==t){var M=new MaterialLoader;M.setTextures(p);for(var k=0,I=t.length;k<I;k++){var N=t[k];if("MultiMaterial"===N.type){for(var V=[],ee=0;ee<N.materials.length;ee++){var te=N.materials[ee];void 0===h[te.uuid]&&(h[te.uuid]=M.parse(te)),V.push(h[te.uuid])}x[N.uuid]=V}else void 0===h[N.uuid]&&(h[N.uuid]=M.parse(N)),x[N.uuid]=h[N.uuid]}}return x},parseAnimations:function parseAnimations(t){for(var p=[],h=0;h<t.length;h++){var x=t[h],M=AnimationClip.parse(x);void 0!==x.uuid&&(M.uuid=x.uuid),p.push(M)}return p},parseImages:function parseImages(t,p){var h=this,x={};function loadImage(t){return h.manager.itemStart(t),M.load(t,(function(){h.manager.itemEnd(t)}),void 0,(function(){h.manager.itemError(t),h.manager.itemEnd(t)}))}if(void 0!==t&&t.length>0){var M=new ImageLoader(new LoadingManager(p));M.setCrossOrigin(this.crossOrigin);for(var k=0,I=t.length;k<I;k++){var N=t[k],V=N.url;if(Array.isArray(V)){x[N.uuid]=[];for(var ee=0,te=V.length;ee<te;ee++){var re=V[ee],ne=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(re)?re:h.resourcePath+re;x[N.uuid].push(loadImage(ne))}}else{ne=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(N.url)?N.url:h.resourcePath+N.url;x[N.uuid]=loadImage(ne)}}}return x},parseTextures:function parseTextures(t,p){function parseConstant(t,p){return"number"==typeof t?t:p[t]}var h={};if(void 0!==t)for(var x=0,M=t.length;x<M;x++){var k,I=t[x];I.image,p[I.image],(k=Array.isArray(p[I.image])?new CubeTexture(p[I.image]):new Texture(p[I.image])).needsUpdate=!0,k.uuid=I.uuid,void 0!==I.name&&(k.name=I.name),void 0!==I.mapping&&(k.mapping=parseConstant(I.mapping,ad)),void 0!==I.offset&&k.offset.fromArray(I.offset),void 0!==I.repeat&&k.repeat.fromArray(I.repeat),void 0!==I.center&&k.center.fromArray(I.center),void 0!==I.rotation&&(k.rotation=I.rotation),void 0!==I.wrap&&(k.wrapS=parseConstant(I.wrap[0],od),k.wrapT=parseConstant(I.wrap[1],od)),void 0!==I.format&&(k.format=I.format),void 0!==I.type&&(k.type=I.type),void 0!==I.encoding&&(k.encoding=I.encoding),void 0!==I.minFilter&&(k.minFilter=parseConstant(I.minFilter,sd)),void 0!==I.magFilter&&(k.magFilter=parseConstant(I.magFilter,sd)),void 0!==I.anisotropy&&(k.anisotropy=I.anisotropy),void 0!==I.flipY&&(k.flipY=I.flipY),void 0!==I.premultiplyAlpha&&(k.premultiplyAlpha=I.premultiplyAlpha),void 0!==I.unpackAlignment&&(k.unpackAlignment=I.unpackAlignment),h[I.uuid]=k}return h},parseObject:function parseObject(t,p,h){var x;function getGeometry(t){return p[t],p[t]}function getMaterial(t){if(void 0!==t){if(Array.isArray(t)){for(var p=[],x=0,M=t.length;x<M;x++){var k=t[x];h[k],p.push(h[k])}return p}return h[t],h[t]}}switch(t.type){case"Scene":x=new Scene,void 0!==t.background&&Number.isInteger(t.background)&&(x.background=new Color(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?x.fog=new Fog(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(x.fog=new FogExp2(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":x=new PerspectiveCamera(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(x.focus=t.focus),void 0!==t.zoom&&(x.zoom=t.zoom),void 0!==t.filmGauge&&(x.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(x.filmOffset=t.filmOffset),void 0!==t.view&&(x.view=Object.assign({},t.view));break;case"OrthographicCamera":x=new OrthographicCamera(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(x.zoom=t.zoom),void 0!==t.view&&(x.view=Object.assign({},t.view));break;case"AmbientLight":x=new AmbientLight(t.color,t.intensity);break;case"DirectionalLight":x=new DirectionalLight(t.color,t.intensity);break;case"PointLight":x=new PointLight(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":x=new RectAreaLight(t.color,t.intensity,t.width,t.height);break;case"SpotLight":x=new SpotLight(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":x=new HemisphereLight(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":case"Mesh":var M=getGeometry(t.geometry),k=getMaterial(t.material);x=M.bones&&M.bones.length>0?new SkinnedMesh(M,k):new Mesh(M,k);break;case"InstancedMesh":M=getGeometry(t.geometry),k=getMaterial(t.material);var I=t.count,N=t.instanceMatrix;(x=new InstancedMesh(M,k,I)).instanceMatrix=new BufferAttribute(new Float32Array(N.array),16);break;case"LOD":x=new LOD;break;case"Line":x=new Line(getGeometry(t.geometry),getMaterial(t.material),t.mode);break;case"LineLoop":x=new LineLoop(getGeometry(t.geometry),getMaterial(t.material));break;case"LineSegments":x=new LineSegments(getGeometry(t.geometry),getMaterial(t.material));break;case"PointCloud":case"Points":x=new Points(getGeometry(t.geometry),getMaterial(t.material));break;case"Sprite":x=new Sprite(getMaterial(t.material));break;case"Group":x=new Group;break;default:x=new Object3D}if(x.uuid=t.uuid,void 0!==t.name&&(x.name=t.name),void 0!==t.matrix?(x.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(x.matrixAutoUpdate=t.matrixAutoUpdate),x.matrixAutoUpdate&&x.matrix.decompose(x.position,x.quaternion,x.scale)):(void 0!==t.position&&x.position.fromArray(t.position),void 0!==t.rotation&&x.rotation.fromArray(t.rotation),void 0!==t.quaternion&&x.quaternion.fromArray(t.quaternion),void 0!==t.scale&&x.scale.fromArray(t.scale)),void 0!==t.castShadow&&(x.castShadow=t.castShadow),void 0!==t.receiveShadow&&(x.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(x.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(x.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&x.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(x.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(x.visible=t.visible),void 0!==t.frustumCulled&&(x.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(x.renderOrder=t.renderOrder),void 0!==t.userData&&(x.userData=t.userData),void 0!==t.layers&&(x.layers.mask=t.layers),void 0!==t.children)for(var V=t.children,ee=0;ee<V.length;ee++)x.add(this.parseObject(V[ee],p,h));if("LOD"===t.type){void 0!==t.autoUpdate&&(x.autoUpdate=t.autoUpdate);for(var te=t.levels,re=0;re<te.length;re++){var ne=te[re],ie=x.getObjectByProperty("uuid",ne.object);void 0!==ie&&x.addLevel(ie,ne.distance)}}return x}});var id,ad={UVMapping:300,CubeReflectionMapping:lu,CubeRefractionMapping:pu,EquirectangularReflectionMapping:hu,EquirectangularRefractionMapping:fu,SphericalReflectionMapping:du,CubeUVReflectionMapping:mu,CubeUVRefractionMapping:gu},od={RepeatWrapping:vu,ClampToEdgeWrapping:yu,MirroredRepeatWrapping:xu},sd={NearestFilter:bu,NearestMipmapNearestFilter:_u,NearestMipmapLinearFilter:Mu,LinearFilter:Cu,LinearMipmapNearestFilter:wu,LinearMipmapLinearFilter:Su};function ImageBitmapLoader(t){Loader.call(this,t),this.options=void 0}function ShapePath(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}function Font(t){this.type="Font",this.data=t}function createPath(t,p,h,x,M){var k=M.glyphs[t]||M.glyphs["?"];if(k){var I,N,V,ee,te,re,ne,ie,ae=new ShapePath;if(k.o)for(var oe=k._cachedOutline||(k._cachedOutline=k.o.split(" ")),se=0,ce=oe.length;se<ce;){switch(oe[se++]){case"m":I=oe[se++]*p+h,N=oe[se++]*p+x,ae.moveTo(I,N);break;case"l":I=oe[se++]*p+h,N=oe[se++]*p+x,ae.lineTo(I,N);break;case"q":V=oe[se++]*p+h,ee=oe[se++]*p+x,te=oe[se++]*p+h,re=oe[se++]*p+x,ae.quadraticCurveTo(te,re,V,ee);break;case"b":V=oe[se++]*p+h,ee=oe[se++]*p+x,te=oe[se++]*p+h,re=oe[se++]*p+x,ne=oe[se++]*p+h,ie=oe[se++]*p+x,ae.bezierCurveTo(te,re,ne,ie,V,ee)}}return{offsetX:k.ha*p,path:ae}}}function FontLoader(t){Loader.call(this,t)}ImageBitmapLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageBitmapLoader,setOptions:function setOptions(t){return this.options=t,this},load:function load(t,p,h,x){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var M=this,k=Kf.get(t);if(void 0!==k)return M.manager.itemStart(t),setTimeout((function(){p&&p(k),M.manager.itemEnd(t)}),0),k;fetch(t).then((function(t){return t.blob()})).then((function(t){return void 0===M.options?createImageBitmap(t):createImageBitmap(t,M.options)})).then((function(h){Kf.add(t,h),p&&p(h),M.manager.itemEnd(t)})).catch((function(p){x&&x(p),M.manager.itemError(t),M.manager.itemEnd(t)})),M.manager.itemStart(t)}}),Object.assign(ShapePath.prototype,{moveTo:function moveTo(t,p){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,p),this},lineTo:function lineTo(t,p){return this.currentPath.lineTo(t,p),this},quadraticCurveTo:function quadraticCurveTo(t,p,h,x){return this.currentPath.quadraticCurveTo(t,p,h,x),this},bezierCurveTo:function bezierCurveTo(t,p,h,x,M,k){return this.currentPath.bezierCurveTo(t,p,h,x,M,k),this},splineThru:function splineThru(t){return this.currentPath.splineThru(t),this},toShapes:function toShapes(t,p){function toShapesNoHoles(t){for(var p=[],h=0,x=t.length;h<x;h++){var M=t[h],k=new Shape;k.curves=M.curves,p.push(k)}return p}function isPointInsidePolygon(t,p){for(var h=p.length,x=!1,M=h-1,k=0;k<h;M=k++){var I=p[M],N=p[k],V=N.x-I.x,ee=N.y-I.y;if(Math.abs(ee)>Number.EPSILON){if(ee<0&&(I=p[k],V=-V,N=p[M],ee=-ee),t.y<I.y||t.y>N.y)continue;if(t.y===I.y){if(t.x===I.x)return!0}else{var te=ee*(t.x-I.x)-V*(t.y-I.y);if(0===te)return!0;if(te<0)continue;x=!x}}else{if(t.y!==I.y)continue;if(N.x<=t.x&&t.x<=I.x||I.x<=t.x&&t.x<=N.x)return!0}}return x}var h=Wf.isClockWise,x=this.subPaths;if(0===x.length)return[];if(!0===p)return toShapesNoHoles(x);var M,k,I,N=[];if(1===x.length)return k=x[0],(I=new Shape).curves=k.curves,N.push(I),N;var V=!h(x[0].getPoints());V=t?!V:V;var ee,te,re=[],ne=[],ie=[],ae=0;ne[ae]=void 0,ie[ae]=[];for(var oe=0,se=x.length;oe<se;oe++)M=h(ee=(k=x[oe]).getPoints()),(M=t?!M:M)?(!V&&ne[ae]&&ae++,ne[ae]={s:new Shape,p:ee},ne[ae].s.curves=k.curves,V&&ae++,ie[ae]=[]):ie[ae].push({h:k,p:ee[0]});if(!ne[0])return toShapesNoHoles(x);if(ne.length>1){for(var ce=!1,ue=[],le=0,pe=ne.length;le<pe;le++)re[le]=[];for(le=0,pe=ne.length;le<pe;le++)for(var he=ie[le],fe=0;fe<he.length;fe++){for(var de=he[fe],me=!0,ge=0;ge<ne.length;ge++)isPointInsidePolygon(de.p,ne[ge].p)&&(le!==ge&&ue.push({froms:le,tos:ge,hole:fe}),me?(me=!1,re[ge].push(de)):ce=!0);me&&re[le].push(de)}ue.length>0&&(ce||(ie=re))}oe=0;for(var ve=ne.length;oe<ve;oe++){I=ne[oe].s,N.push(I);for(var ye=0,xe=(te=ie[oe]).length;ye<xe;ye++)I.holes.push(te[ye].h)}return N}}),Object.assign(Font.prototype,{isFont:!0,generateShapes:function generateShapes(t,p){void 0===p&&(p=100);for(var h=[],x=function createPaths(t,p,h){for(var x=Array.from?Array.from(t):String(t).split(""),M=p/h.resolution,k=(h.boundingBox.yMax-h.boundingBox.yMin+h.underlineThickness)*M,I=[],N=0,V=0,ee=0;ee<x.length;ee++){var te=x[ee];if("\n"===te)N=0,V-=k;else{var re=createPath(te,M,N,V,h);N+=re.offsetX,I.push(re.path)}}return I}(t,p,this.data),M=0,k=x.length;M<k;M++)Array.prototype.push.apply(h,x[M].toShapes());return h}}),FontLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FontLoader,load:function load(t,p,h,x){var M=this,k=new FileLoader(this.manager);k.setPath(this.path),k.load(t,(function(t){var h;try{h=JSON.parse(t)}catch(bm){h=JSON.parse(t.substring(65,t.length-2))}var x=M.parse(h);p&&p(x)}),h,x)},parse:function parse(t){return new Font(t)}});var cd=function getContext(){return void 0===id&&(id=new(window.AudioContext||window.webkitAudioContext)),id};function AudioLoader(t){Loader.call(this,t)}function SphericalHarmonics3(){this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new Vector3)}function LightProbe(t,p){Light.call(this,void 0,p),this.sh=void 0!==t?t:new SphericalHarmonics3}function HemisphereLightProbe(t,p,h){LightProbe.call(this,void 0,h);var x=(new Color).set(t),M=(new Color).set(p),k=new Vector3(x.r,x.g,x.b),I=new Vector3(M.r,M.g,M.b),N=Math.sqrt(Math.PI),V=N*Math.sqrt(.75);this.sh.coefficients[0].copy(k).add(I).multiplyScalar(N),this.sh.coefficients[1].copy(k).sub(I).multiplyScalar(V)}function AmbientLightProbe(t,p){LightProbe.call(this,void 0,p);var h=(new Color).set(t);this.sh.coefficients[0].set(h.r,h.g,h.b).multiplyScalar(2*Math.sqrt(Math.PI))}AudioLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AudioLoader,load:function load(t,p,h,x){var M=new FileLoader(this.manager);M.setResponseType("arraybuffer"),M.setPath(this.path),M.load(t,(function(t){var h=t.slice(0);cd().decodeAudioData(h,(function(t){p(t)}))}),h,x)}}),Object.assign(SphericalHarmonics3.prototype,{isSphericalHarmonics3:!0,set:function set(t){for(var p=0;p<9;p++)this.coefficients[p].copy(t[p]);return this},zero:function zero(){for(var t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this},getAt:function getAt(t,p){var h=t.x,x=t.y,M=t.z,k=this.coefficients;return p.copy(k[0]).multiplyScalar(.282095),p.addScale(k[1],.488603*x),p.addScale(k[2],.488603*M),p.addScale(k[3],.488603*h),p.addScale(k[4],h*x*1.092548),p.addScale(k[5],x*M*1.092548),p.addScale(k[6],.315392*(3*M*M-1)),p.addScale(k[7],h*M*1.092548),p.addScale(k[8],.546274*(h*h-x*x)),p},getIrradianceAt:function getIrradianceAt(t,p){var h=t.x,x=t.y,M=t.z,k=this.coefficients;return p.copy(k[0]).multiplyScalar(.886227),p.addScale(k[1],1.023328*x),p.addScale(k[2],1.023328*M),p.addScale(k[3],1.023328*h),p.addScale(k[4],.858086*h*x),p.addScale(k[5],.858086*x*M),p.addScale(k[6],.743125*M*M-.247708),p.addScale(k[7],.858086*h*M),p.addScale(k[8],.429043*(h*h-x*x)),p},add:function add(t){for(var p=0;p<9;p++)this.coefficients[p].add(t.coefficients[p]);return this},scale:function scale(t){for(var p=0;p<9;p++)this.coefficients[p].multiplyScalar(t);return this},lerp:function lerp(t,p){for(var h=0;h<9;h++)this.coefficients[h].lerp(t.coefficients[h],p);return this},equals:function equals(t){for(var p=0;p<9;p++)if(!this.coefficients[p].equals(t.coefficients[p]))return!1;return!0},copy:function copy(t){return this.set(t.coefficients)},clone:function clone(){return(new this.constructor).copy(this)},fromArray:function fromArray(t,p){void 0===p&&(p=0);for(var h=this.coefficients,x=0;x<9;x++)h[x].fromArray(t,p+3*x);return this},toArray:function toArray(t,p){void 0===t&&(t=[]),void 0===p&&(p=0);for(var h=this.coefficients,x=0;x<9;x++)h[x].toArray(t,p+3*x);return t}}),Object.assign(SphericalHarmonics3,{getBasisAt:function getBasisAt(t,p){var h=t.x,x=t.y,M=t.z;p[0]=.282095,p[1]=.488603*x,p[2]=.488603*M,p[3]=.488603*h,p[4]=1.092548*h*x,p[5]=1.092548*x*M,p[6]=.315392*(3*M*M-1),p[7]=1.092548*h*M,p[8]=.546274*(h*h-x*x)}}),LightProbe.prototype=Object.assign(Object.create(Light.prototype),{constructor:LightProbe,isLightProbe:!0,copy:function copy(t){return Light.prototype.copy.call(this,t),this.sh.copy(t.sh),this.intensity=t.intensity,this},toJSON:function toJSON(t){return Light.prototype.toJSON.call(this,t)}}),HemisphereLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:HemisphereLightProbe,isHemisphereLightProbe:!0,copy:function copy(t){return LightProbe.prototype.copy.call(this,t),this},toJSON:function toJSON(t){return LightProbe.prototype.toJSON.call(this,t)}}),AmbientLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:AmbientLightProbe,isAmbientLightProbe:!0,copy:function copy(t){return LightProbe.prototype.copy.call(this,t),this},toJSON:function toJSON(t){return LightProbe.prototype.toJSON.call(this,t)}});var ud=new Matrix4,ld=new Matrix4;function Clock(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(function StereoCamera(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}.prototype,{update:function update(t){var p=this._cache;if(p.focus!==t.focus||p.fov!==t.fov||p.aspect!==t.aspect*this.aspect||p.near!==t.near||p.far!==t.far||p.zoom!==t.zoom||p.eyeSep!==this.eyeSep){p.focus=t.focus,p.fov=t.fov,p.aspect=t.aspect*this.aspect,p.near=t.near,p.far=t.far,p.zoom=t.zoom,p.eyeSep=this.eyeSep;var h,x,M=t.projectionMatrix.clone(),k=p.eyeSep/2,I=k*p.near/p.focus,N=p.near*Math.tan(Yl.DEG2RAD*p.fov*.5)/p.zoom;ld.elements[12]=-k,ud.elements[12]=k,h=-N*p.aspect+I,x=N*p.aspect+I,M.elements[0]=2*p.near/(x-h),M.elements[8]=(x+h)/(x-h),this.cameraL.projectionMatrix.copy(M),h=-N*p.aspect-I,x=N*p.aspect-I,M.elements[0]=2*p.near/(x-h),M.elements[8]=(x+h)/(x-h),this.cameraR.projectionMatrix.copy(M)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(ld),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(ud)}}),Object.assign(Clock.prototype,{start:function start(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function getElapsedTime(){return this.getDelta(),this.elapsedTime},getDelta:function getDelta(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var p=("undefined"==typeof performance?Date:performance).now();t=(p-this.oldTime)/1e3,this.oldTime=p,this.elapsedTime+=t}return t}});var pd=new Vector3,hd=new Quaternion,fd=new Vector3,dd=new Vector3;function AudioListener(){Object3D.call(this),this.type="AudioListener",this.context=cd(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}function Audio(t){Object3D.call(this),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._pausedAt=0,this.filters=[]}AudioListener.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:AudioListener,getInput:function getInput(){return this.gain},removeFilter:function removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function getFilter(){return this.filter},setFilter:function setFilter(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function getMasterVolume(){return this.gain.gain.value},setMasterVolume:function setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},updateMatrixWorld:function updateMatrixWorld(t){Object3D.prototype.updateMatrixWorld.call(this,t);var p=this.context.listener,h=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(pd,hd,fd),dd.set(0,0,-1).applyQuaternion(hd),p.positionX){var x=this.context.currentTime+this.timeDelta;p.positionX.linearRampToValueAtTime(pd.x,x),p.positionY.linearRampToValueAtTime(pd.y,x),p.positionZ.linearRampToValueAtTime(pd.z,x),p.forwardX.linearRampToValueAtTime(dd.x,x),p.forwardY.linearRampToValueAtTime(dd.y,x),p.forwardZ.linearRampToValueAtTime(dd.z,x),p.upX.linearRampToValueAtTime(h.x,x),p.upY.linearRampToValueAtTime(h.y,x),p.upZ.linearRampToValueAtTime(h.z,x)}else p.setPosition(pd.x,pd.y,pd.z),p.setOrientation(dd.x,dd.y,dd.z,h.x,h.y,h.z)}}),Audio.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Audio,getOutput:function getOutput(){return this.gain},setNodeSource:function setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setMediaElementSource:function setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this},setMediaStreamSource:function setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this},setBuffer:function setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function play(t){if(void 0===t&&(t=0),!0!==this.isPlaying&&!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+t;var p=this.context.createBufferSource();return p.buffer=this.buffer,p.loop=this.loop,p.loopStart=this.loopStart,p.loopEnd=this.loopEnd,p.onended=this.onEnded.bind(this),p.start(this._startedAt,this._pausedAt+this.offset,this.duration),this.isPlaying=!0,this.source=p,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}},pause:function pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._pausedAt=(this.context.currentTime-this._startedAt)*this.playbackRate,this.source.stop(),this.source.onended=null,this.isPlaying=!1),this},stop:function stop(){if(!1!==this.hasPlaybackControl)return this._pausedAt=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this},connect:function connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,p=this.filters.length;t<p;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,p=this.filters.length;t<p;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function getFilters(){return this.filters},setFilters:function setFilters(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},setDetune:function setDetune(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function getDetune(){return this.detune},getFilter:function getFilter(){return this.getFilters()[0]},setFilter:function setFilter(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},getPlaybackRate:function getPlaybackRate(){return this.playbackRate},onEnded:function onEnded(){this.isPlaying=!1},getLoop:function getLoop(){return!1!==this.hasPlaybackControl&&this.loop},setLoop:function setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this},setLoopStart:function setLoopStart(t){return this.loopStart=t,this},setLoopEnd:function setLoopEnd(t){return this.loopEnd=t,this},getVolume:function getVolume(){return this.gain.gain.value},setVolume:function setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}});var md=new Vector3,gd=new Quaternion,vd=new Vector3,yd=new Vector3;function PositionalAudio(t){Audio.call(this,t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function AudioAnalyser(t,p){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==p?p:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function PropertyMixer(t,p,h){this.binding=t,this.valueSize=h;var x,M=Float64Array;switch(p){case"quaternion":x=this._slerp;break;case"string":case"bool":M=Array,x=this._select;break;default:x=this._lerp}this.buffer=new M(4*h),this._mixBufferRegion=x,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}PositionalAudio.prototype=Object.assign(Object.create(Audio.prototype),{constructor:PositionalAudio,getOutput:function getOutput(){return this.panner},getRefDistance:function getRefDistance(){return this.panner.refDistance},setRefDistance:function setRefDistance(t){return this.panner.refDistance=t,this},getRolloffFactor:function getRolloffFactor(){return this.panner.rolloffFactor},setRolloffFactor:function setRolloffFactor(t){return this.panner.rolloffFactor=t,this},getDistanceModel:function getDistanceModel(){return this.panner.distanceModel},setDistanceModel:function setDistanceModel(t){return this.panner.distanceModel=t,this},getMaxDistance:function getMaxDistance(){return this.panner.maxDistance},setMaxDistance:function setMaxDistance(t){return this.panner.maxDistance=t,this},setDirectionalCone:function setDirectionalCone(t,p,h){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=p,this.panner.coneOuterGain=h,this},updateMatrixWorld:function updateMatrixWorld(t){if(Object3D.prototype.updateMatrixWorld.call(this,t),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(md,gd,vd),yd.set(0,0,1).applyQuaternion(gd);var p=this.panner;if(p.positionX){var h=this.context.currentTime+this.listener.timeDelta;p.positionX.linearRampToValueAtTime(md.x,h),p.positionY.linearRampToValueAtTime(md.y,h),p.positionZ.linearRampToValueAtTime(md.z,h),p.orientationX.linearRampToValueAtTime(yd.x,h),p.orientationY.linearRampToValueAtTime(yd.y,h),p.orientationZ.linearRampToValueAtTime(yd.z,h)}else p.setPosition(md.x,md.y,md.z),p.setOrientation(yd.x,yd.y,yd.z)}}}),Object.assign(AudioAnalyser.prototype,{getFrequencyData:function getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function getAverageFrequency(){for(var t=0,p=this.getFrequencyData(),h=0;h<p.length;h++)t+=p[h];return t/p.length}}),Object.assign(PropertyMixer.prototype,{accumulate:function accumulate(t,p){var h=this.buffer,x=this.valueSize,M=t*x+x,k=this.cumulativeWeight;if(0===k){for(var I=0;I!==x;++I)h[M+I]=h[I];k=p}else{var N=p/(k+=p);this._mixBufferRegion(h,M,0,N,x)}this.cumulativeWeight=k},apply:function apply(t){var p=this.valueSize,h=this.buffer,x=t*p+p,M=this.cumulativeWeight,k=this.binding;if(this.cumulativeWeight=0,M<1){var I=3*p;this._mixBufferRegion(h,x,I,1-M,p)}for(var N=p,V=p+p;N!==V;++N)if(h[N]!==h[N+p]){k.setValue(h,x);break}},saveOriginalState:function saveOriginalState(){var t=this.binding,p=this.buffer,h=this.valueSize,x=3*h;t.getValue(p,x);for(var M=h,k=x;M!==k;++M)p[M]=p[x+M%h];this.cumulativeWeight=0},restoreOriginalState:function restoreOriginalState(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function _select(t,p,h,x,M){if(x>=.5)for(var k=0;k!==M;++k)t[p+k]=t[h+k]},_slerp:function _slerp(t,p,h,x){Quaternion.slerpFlat(t,p,t,p,t,h,x)},_lerp:function _lerp(t,p,h,x,M){for(var k=1-x,I=0;I!==M;++I){var N=p+I;t[N]=t[N]*k+t[h+I]*x}}});var xd="\\[\\]\\.:\\/",bd=new RegExp("["+xd+"]","g"),_d="[^"+xd+"]",Md="[^"+xd.replace("\\.","")+"]",Cd=/((?:WC+[\/:])*)/.source.replace("WC",_d),wd=/(WCOD+)?/.source.replace("WCOD",Md),Sd=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_d),Td=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_d),Ad=new RegExp("^"+Cd+wd+Sd+Td+"$"),kd=["material","materials","bones"];function Composite(t,p,h){var x=h||PropertyBinding.parseTrackName(p);this._targetGroup=t,this._bindings=t.subscribe_(p,x)}function PropertyBinding(t,p,h){this.path=p,this.parsedPath=h||PropertyBinding.parseTrackName(p),this.node=PropertyBinding.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function AnimationAction(t,p,h){this._mixer=t,this._clip=p,this._localRoot=h||null;for(var x=p.tracks,M=x.length,k=new Array(M),I={endingStart:Sl,endingEnd:Sl},N=0;N!==M;++N){var V=x[N].createInterpolant(null);k[N]=V,V.settings=I}this._interpolantSettings=I,this._interpolants=k,this._propertyBindings=new Array(M),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function AnimationMixer(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Uniform(t){"string"==typeof t&&(t=arguments[1]),this.value=t}function InstancedInterleavedBuffer(t,p,h){InterleavedBuffer.call(this,t,p),this.meshPerAttribute=h||1}function ascSort(t,p){return t.distance-p.distance}function _intersectObject(t,p,h,x){if(!1!==t.visible&&(t.raycast(p,h),!0===x))for(var M=t.children,k=0,I=M.length;k<I;k++)_intersectObject(M[k],p,h,!0)}Object.assign(Composite.prototype,{getValue:function getValue(t,p){this.bind();var h=this._targetGroup.nCachedObjects_,x=this._bindings[h];void 0!==x&&x.getValue(t,p)},setValue:function setValue(t,p){for(var h=this._bindings,x=this._targetGroup.nCachedObjects_,M=h.length;x!==M;++x)h[x].setValue(t,p)},bind:function bind(){for(var t=this._bindings,p=this._targetGroup.nCachedObjects_,h=t.length;p!==h;++p)t[p].bind()},unbind:function unbind(){for(var t=this._bindings,p=this._targetGroup.nCachedObjects_,h=t.length;p!==h;++p)t[p].unbind()}}),Object.assign(PropertyBinding,{Composite:Composite,create:function create(t,p,h){return t&&t.isAnimationObjectGroup?new PropertyBinding.Composite(t,p,h):new PropertyBinding(t,p,h)},sanitizeNodeName:function sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(bd,"")},parseTrackName:function parseTrackName(t){var p=Ad.exec(t);if(!p)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var h={nodeName:p[2],objectName:p[3],objectIndex:p[4],propertyName:p[5],propertyIndex:p[6]},x=h.nodeName&&h.nodeName.lastIndexOf(".");if(void 0!==x&&-1!==x){var M=h.nodeName.substring(x+1);-1!==kd.indexOf(M)&&(h.nodeName=h.nodeName.substring(0,x),h.objectName=M)}if(null===h.propertyName||0===h.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return h},findNode:function findNode(t,p){if(!p||""===p||"root"===p||"."===p||-1===p||p===t.name||p===t.uuid)return t;if(t.skeleton){var h=t.skeleton.getBoneByName(p);if(void 0!==h)return h}if(t.children){var x=function searchNodeSubtree(t){for(var h=0;h<t.length;h++){var x=t[h];if(x.name===p||x.uuid===p)return x;var M=searchNodeSubtree(x.children);if(M)return M}return null}(t.children);if(x)return x}return null}}),Object.assign(PropertyBinding.prototype,{_getValue_unavailable:function _getValue_unavailable(){},_setValue_unavailable:function _setValue_unavailable(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function getValue_direct(t,p){t[p]=this.node[this.propertyName]},function getValue_array(t,p){for(var h=this.resolvedProperty,x=0,M=h.length;x!==M;++x)t[p++]=h[x]},function getValue_arrayElement(t,p){t[p]=this.resolvedProperty[this.propertyIndex]},function getValue_toArray(t,p){this.resolvedProperty.toArray(t,p)}],SetterByBindingTypeAndVersioning:[[function setValue_direct(t,p){this.targetObject[this.propertyName]=t[p]},function setValue_direct_setNeedsUpdate(t,p){this.targetObject[this.propertyName]=t[p],this.targetObject.needsUpdate=!0},function setValue_direct_setMatrixWorldNeedsUpdate(t,p){this.targetObject[this.propertyName]=t[p],this.targetObject.matrixWorldNeedsUpdate=!0}],[function setValue_array(t,p){for(var h=this.resolvedProperty,x=0,M=h.length;x!==M;++x)h[x]=t[p++]},function setValue_array_setNeedsUpdate(t,p){for(var h=this.resolvedProperty,x=0,M=h.length;x!==M;++x)h[x]=t[p++];this.targetObject.needsUpdate=!0},function setValue_array_setMatrixWorldNeedsUpdate(t,p){for(var h=this.resolvedProperty,x=0,M=h.length;x!==M;++x)h[x]=t[p++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function setValue_arrayElement(t,p){this.resolvedProperty[this.propertyIndex]=t[p]},function setValue_arrayElement_setNeedsUpdate(t,p){this.resolvedProperty[this.propertyIndex]=t[p],this.targetObject.needsUpdate=!0},function setValue_arrayElement_setMatrixWorldNeedsUpdate(t,p){this.resolvedProperty[this.propertyIndex]=t[p],this.targetObject.matrixWorldNeedsUpdate=!0}],[function setValue_fromArray(t,p){this.resolvedProperty.fromArray(t,p)},function setValue_fromArray_setNeedsUpdate(t,p){this.resolvedProperty.fromArray(t,p),this.targetObject.needsUpdate=!0},function setValue_fromArray_setMatrixWorldNeedsUpdate(t,p){this.resolvedProperty.fromArray(t,p),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function getValue_unbound(t,p){this.bind(),this.getValue(t,p)},setValue:function getValue_unbound(t,p){this.bind(),this.setValue(t,p)},bind:function bind(){var t=this.node,p=this.parsedPath,h=p.objectName,x=p.propertyName,M=p.propertyIndex;if(t||(t=PropertyBinding.findNode(this.rootNode,p.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(h){var k=p.objectIndex;switch(h){case"materials":if(!t.material)return;if(!t.material.materials)return;t=t.material.materials;break;case"bones":if(!t.skeleton)return;t=t.skeleton.bones;for(var I=0;I<t.length;I++)if(t[I].name===k){k=I;break}break;default:if(void 0===t[h])return;t=t[h]}if(void 0!==k){if(void 0===t[k])return;t=t[k]}}var N=t[x];if(void 0!==N){var V=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?V=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(V=this.Versioning.MatrixWorldNeedsUpdate);var ee=this.BindingType.Direct;if(void 0!==M){if("morphTargetInfluences"===x){if(!t.geometry)return;if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return;for(I=0;I<this.node.geometry.morphAttributes.position.length;I++)if(t.geometry.morphAttributes.position[I].name===M){M=I;break}}else{if(!t.geometry.morphTargets)return;for(I=0;I<this.node.geometry.morphTargets.length;I++)if(t.geometry.morphTargets[I].name===M){M=I;break}}}ee=this.BindingType.ArrayElement,this.resolvedProperty=N,this.propertyIndex=M}else void 0!==N.fromArray&&void 0!==N.toArray?(ee=this.BindingType.HasFromToArray,this.resolvedProperty=N):Array.isArray(N)?(ee=this.BindingType.EntireArray,this.resolvedProperty=N):this.propertyName=x;this.getValue=this.GetterByBindingType[ee],this.setValue=this.SetterByBindingTypeAndVersioning[ee][V]}else p.nodeName}},unbind:function unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(PropertyBinding.prototype,{_getValue_unbound:PropertyBinding.prototype.getValue,_setValue_unbound:PropertyBinding.prototype.setValue}),Object.assign(function AnimationObjectGroup(){this.uuid=Yl.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var p=0,h=arguments.length;p!==h;++p)t[arguments[p].uuid]=p;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var x=this;this.stats={objects:{get total(){return x._objects.length},get inUse(){return this.total-x.nCachedObjects_}},get bindingsPerObject(){return x._bindings.length}}}.prototype,{isAnimationObjectGroup:!0,add:function add(){for(var t=this._objects,p=t.length,h=this.nCachedObjects_,x=this._indicesByUUID,M=this._paths,k=this._parsedPaths,I=this._bindings,N=I.length,V=0,ee=arguments.length;V!==ee;++V){var te=arguments[V],re=te.uuid,ne=x[re];if(void 0===ne){ne=p++,x[re]=ne,t.push(te);for(var ie=0,ae=N;ie!==ae;++ie)I[ie].push(new PropertyBinding(te,M[ie],k[ie]))}else if(ne<h){t[ne];var oe=--h,se=t[oe];x[se.uuid]=ne,t[ne]=se,x[re]=oe,t[oe]=te;for(ie=0,ae=N;ie!==ae;++ie){var ce=I[ie],ue=ce[oe],le=ce[ne];ce[ne]=ue,void 0===le&&(le=new PropertyBinding(te,M[ie],k[ie])),ce[oe]=le}}else t[ne]}this.nCachedObjects_=h},remove:function remove(){for(var t=this._objects,p=this.nCachedObjects_,h=this._indicesByUUID,x=this._bindings,M=x.length,k=0,I=arguments.length;k!==I;++k){var N=arguments[k],V=N.uuid,ee=h[V];if(void 0!==ee&&ee>=p){var te=p++,re=t[te];h[re.uuid]=ee,t[ee]=re,h[V]=te,t[te]=N;for(var ne=0,ie=M;ne!==ie;++ne){var ae=x[ne],oe=ae[te],se=ae[ee];ae[ee]=oe,ae[te]=se}}}this.nCachedObjects_=p},uncache:function uncache(){for(var t=this._objects,p=t.length,h=this.nCachedObjects_,x=this._indicesByUUID,M=this._bindings,k=M.length,I=0,N=arguments.length;I!==N;++I){var V=arguments[I].uuid,ee=x[V];if(void 0!==ee)if(delete x[V],ee<h){var te=--h,re=t[te],ne=t[ce=--p];x[re.uuid]=ee,t[ee]=re,x[ne.uuid]=te,t[te]=ne,t.pop();for(var ie=0,ae=k;ie!==ae;++ie){var oe=(ue=M[ie])[te],se=ue[ce];ue[ee]=oe,ue[te]=se,ue.pop()}}else{var ce;x[(ne=t[ce=--p]).uuid]=ee,t[ee]=ne,t.pop();for(ie=0,ae=k;ie!==ae;++ie){var ue;(ue=M[ie])[ee]=ue[ce],ue.pop()}}}this.nCachedObjects_=h},subscribe_:function subscribe_(t,p){var h=this._bindingsIndicesByPath,x=h[t],M=this._bindings;if(void 0!==x)return M[x];var k=this._paths,I=this._parsedPaths,N=this._objects,V=N.length,ee=this.nCachedObjects_,te=new Array(V);x=M.length,h[t]=x,k.push(t),I.push(p),M.push(te);for(var re=ee,ne=N.length;re!==ne;++re){var ie=N[re];te[re]=new PropertyBinding(ie,t,p)}return te},unsubscribe_:function unsubscribe_(t){var p=this._bindingsIndicesByPath,h=p[t];if(void 0!==h){var x=this._paths,M=this._parsedPaths,k=this._bindings,I=k.length-1,N=k[I];p[t[I]]=h,k[h]=N,k.pop(),M[h]=M[I],M.pop(),x[h]=x[I],x.pop()}}}),Object.assign(AnimationAction.prototype,{play:function play(){return this._mixer._activateAction(this),this},stop:function stop(){return this._mixer._deactivateAction(this),this.reset()},reset:function reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function isScheduled(){return this._mixer._isActiveAction(this)},startAt:function startAt(t){return this._startTime=t,this},setLoop:function setLoop(t,p){return this.loop=t,this.repetitions=p,this},setEffectiveWeight:function setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function getEffectiveWeight(){return this._effectiveWeight},fadeIn:function fadeIn(t){return this._scheduleFading(t,0,1)},fadeOut:function fadeOut(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function crossFadeFrom(t,p,h){if(t.fadeOut(p),this.fadeIn(p),h){var x=this._clip.duration,M=t._clip.duration,k=M/x,I=x/M;t.warp(1,k,p),this.warp(I,1,p)}return this},crossFadeTo:function crossFadeTo(t,p,h){return t.crossFadeFrom(this,p,h)},stopFading:function stopFading(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function getEffectiveTimeScale(){return this._effectiveTimeScale},setDuration:function setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function halt(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function warp(t,p,h){var x=this._mixer,M=x.time,k=this._timeScaleInterpolant,I=this.timeScale;null===k&&(k=x._lendControlInterpolant(),this._timeScaleInterpolant=k);var N=k.parameterPositions,V=k.sampleValues;return N[0]=M,N[1]=M+h,V[0]=t/I,V[1]=p/I,this},stopWarping:function stopWarping(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function getMixer(){return this._mixer},getClip:function getClip(){return this._clip},getRoot:function getRoot(){return this._localRoot||this._mixer._root},_update:function _update(t,p,h,x){if(this.enabled){var M=this._startTime;if(null!==M){var k=(t-M)*h;if(k<0||0===h)return;this._startTime=null,p=h*k}p*=this._updateTimeScale(t);var I=this._updateTime(p),N=this._updateWeight(t);if(N>0)for(var V=this._interpolants,ee=this._propertyBindings,te=0,re=V.length;te!==re;++te)V[te].evaluate(I),ee[te].accumulate(x,N)}else this._updateWeight(t)},_updateWeight:function _updateWeight(t){var p=0;if(this.enabled){p=this.weight;var h=this._weightInterpolant;if(null!==h){var x=h.evaluate(t)[0];p*=x,t>h.parameterPositions[1]&&(this.stopFading(),0===x&&(this.enabled=!1))}}return this._effectiveWeight=p,p},_updateTimeScale:function _updateTimeScale(t){var p=0;if(!this.paused){p=this.timeScale;var h=this._timeScaleInterpolant;if(null!==h)p*=h.evaluate(t)[0],t>h.parameterPositions[1]&&(this.stopWarping(),0===p?this.paused=!0:this.timeScale=p)}return this._effectiveTimeScale=p,p},_updateTime:function _updateTime(t){var p=this.time+t,h=this._clip.duration,x=this.loop,M=this._loopCount,k=2202===x;if(0===t)return-1===M?p:k&&1==(1&M)?h-p:p;if(2200===x){-1===M&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(p>=h)p=h;else{if(!(p<0)){this.time=p;break e}p=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=p,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===M&&(t>=0?(M=0,this._setEndings(!0,0===this.repetitions,k)):this._setEndings(0===this.repetitions,!0,k)),p>=h||p<0){var I=Math.floor(p/h);p-=h*I,M+=Math.abs(I);var N=this.repetitions-M;if(N<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,p=t>0?h:0,this.time=p,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===N){var V=t<0;this._setEndings(V,!V,k)}else this._setEndings(!1,!1,k);this._loopCount=M,this.time=p,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:I})}}else this.time=p;if(k&&1==(1&M))return h-p}return p},_setEndings:function _setEndings(t,p,h){var x=this._interpolantSettings;h?(x.endingStart=Tl,x.endingEnd=Tl):(x.endingStart=t?this.zeroSlopeAtStart?Tl:Sl:Al,x.endingEnd=p?this.zeroSlopeAtEnd?Tl:Sl:Al)},_scheduleFading:function _scheduleFading(t,p,h){var x=this._mixer,M=x.time,k=this._weightInterpolant;null===k&&(k=x._lendControlInterpolant(),this._weightInterpolant=k);var I=k.parameterPositions,N=k.sampleValues;return I[0]=M,N[0]=p,I[1]=M+t,N[1]=h,this}}),AnimationMixer.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:AnimationMixer,_bindAction:function _bindAction(t,p){var h=t._localRoot||this._root,x=t._clip.tracks,M=x.length,k=t._propertyBindings,I=t._interpolants,N=h.uuid,V=this._bindingsByRootAndName,ee=V[N];void 0===ee&&(ee={},V[N]=ee);for(var te=0;te!==M;++te){var re=x[te],ne=re.name,ie=ee[ne];if(void 0!==ie)k[te]=ie;else{if(void 0!==(ie=k[te])){null===ie._cacheIndex&&(++ie.referenceCount,this._addInactiveBinding(ie,N,ne));continue}var ae=p&&p._propertyBindings[te].binding.parsedPath;++(ie=new PropertyMixer(PropertyBinding.create(h,ne,ae),re.ValueTypeName,re.getValueSize())).referenceCount,this._addInactiveBinding(ie,N,ne),k[te]=ie}I[te].resultBuffer=ie.buffer}},_activateAction:function _activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var p=(t._localRoot||this._root).uuid,h=t._clip.uuid,x=this._actionsByClip[h];this._bindAction(t,x&&x.knownActions[0]),this._addInactiveAction(t,h,p)}for(var M=t._propertyBindings,k=0,I=M.length;k!==I;++k){var N=M[k];0==N.useCount++&&(this._lendBinding(N),N.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function _deactivateAction(t){if(this._isActiveAction(t)){for(var p=t._propertyBindings,h=0,x=p.length;h!==x;++h){var M=p[h];0==--M.useCount&&(M.restoreOriginalState(),this._takeBackBinding(M))}this._takeBackAction(t)}},_initMemoryManager:function _initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function _isActiveAction(t){var p=t._cacheIndex;return null!==p&&p<this._nActiveActions},_addInactiveAction:function _addInactiveAction(t,p,h){var x=this._actions,M=this._actionsByClip,k=M[p];if(void 0===k)k={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,M[p]=k;else{var I=k.knownActions;t._byClipCacheIndex=I.length,I.push(t)}t._cacheIndex=x.length,x.push(t),k.actionByRoot[h]=t},_removeInactiveAction:function _removeInactiveAction(t){var p=this._actions,h=p[p.length-1],x=t._cacheIndex;h._cacheIndex=x,p[x]=h,p.pop(),t._cacheIndex=null;var M=t._clip.uuid,k=this._actionsByClip,I=k[M],N=I.knownActions,V=N[N.length-1],ee=t._byClipCacheIndex;V._byClipCacheIndex=ee,N[ee]=V,N.pop(),t._byClipCacheIndex=null,delete I.actionByRoot[(t._localRoot||this._root).uuid],0===N.length&&delete k[M],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function _removeInactiveBindingsForAction(t){for(var p=t._propertyBindings,h=0,x=p.length;h!==x;++h){var M=p[h];0==--M.referenceCount&&this._removeInactiveBinding(M)}},_lendAction:function _lendAction(t){var p=this._actions,h=t._cacheIndex,x=this._nActiveActions++,M=p[x];t._cacheIndex=x,p[x]=t,M._cacheIndex=h,p[h]=M},_takeBackAction:function _takeBackAction(t){var p=this._actions,h=t._cacheIndex,x=--this._nActiveActions,M=p[x];t._cacheIndex=x,p[x]=t,M._cacheIndex=h,p[h]=M},_addInactiveBinding:function _addInactiveBinding(t,p,h){var x=this._bindingsByRootAndName,M=x[p],k=this._bindings;void 0===M&&(M={},x[p]=M),M[h]=t,t._cacheIndex=k.length,k.push(t)},_removeInactiveBinding:function _removeInactiveBinding(t){var p=this._bindings,h=t.binding,x=h.rootNode.uuid,M=h.path,k=this._bindingsByRootAndName,I=k[x],N=p[p.length-1],V=t._cacheIndex;N._cacheIndex=V,p[V]=N,p.pop(),delete I[M],0===Object.keys(I).length&&delete k[x]},_lendBinding:function _lendBinding(t){var p=this._bindings,h=t._cacheIndex,x=this._nActiveBindings++,M=p[x];t._cacheIndex=x,p[x]=t,M._cacheIndex=h,p[h]=M},_takeBackBinding:function _takeBackBinding(t){var p=this._bindings,h=t._cacheIndex,x=--this._nActiveBindings,M=p[x];t._cacheIndex=x,p[x]=t,M._cacheIndex=h,p[h]=M},_lendControlInterpolant:function _lendControlInterpolant(){var t=this._controlInterpolants,p=this._nActiveControlInterpolants++,h=t[p];return void 0===h&&((h=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=p,t[p]=h),h},_takeBackControlInterpolant:function _takeBackControlInterpolant(t){var p=this._controlInterpolants,h=t.__cacheIndex,x=--this._nActiveControlInterpolants,M=p[x];t.__cacheIndex=x,p[x]=t,M.__cacheIndex=h,p[h]=M},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function clipAction(t,p){var h=p||this._root,x=h.uuid,M="string"==typeof t?AnimationClip.findByName(h,t):t,k=null!==M?M.uuid:t,I=this._actionsByClip[k],N=null;if(void 0!==I){var V=I.actionByRoot[x];if(void 0!==V)return V;N=I.knownActions[0],null===M&&(M=N._clip)}if(null===M)return null;var ee=new AnimationAction(this,M,p);return this._bindAction(ee,N),this._addInactiveAction(ee,k,x),ee},existingAction:function existingAction(t,p){var h=p||this._root,x=h.uuid,M="string"==typeof t?AnimationClip.findByName(h,t):t,k=M?M.uuid:t,I=this._actionsByClip[k];return void 0!==I&&I.actionByRoot[x]||null},stopAllAction:function stopAllAction(){var t=this._actions,p=this._nActiveActions,h=this._bindings,x=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var M=0;M!==p;++M)t[M].reset();for(M=0;M!==x;++M)h[M].useCount=0;return this},update:function update(t){t*=this.timeScale;for(var p=this._actions,h=this._nActiveActions,x=this.time+=t,M=Math.sign(t),k=this._accuIndex^=1,I=0;I!==h;++I){p[I]._update(x,t,M,k)}var N=this._bindings,V=this._nActiveBindings;for(I=0;I!==V;++I)N[I].apply(k);return this},setTime:function setTime(t){this.time=0;for(var p=0;p<this._actions.length;p++)this._actions[p].time=0;return this.update(t)},getRoot:function getRoot(){return this._root},uncacheClip:function uncacheClip(t){var p=this._actions,h=t.uuid,x=this._actionsByClip,M=x[h];if(void 0!==M){for(var k=M.knownActions,I=0,N=k.length;I!==N;++I){var V=k[I];this._deactivateAction(V);var ee=V._cacheIndex,te=p[p.length-1];V._cacheIndex=null,V._byClipCacheIndex=null,te._cacheIndex=ee,p[ee]=te,p.pop(),this._removeInactiveBindingsForAction(V)}delete x[h]}},uncacheRoot:function uncacheRoot(t){var p=t.uuid,h=this._actionsByClip;for(var x in h){var M=h[x].actionByRoot[p];void 0!==M&&(this._deactivateAction(M),this._removeInactiveAction(M))}var k=this._bindingsByRootAndName[p];if(void 0!==k)for(var I in k){var N=k[I];N.restoreOriginalState(),this._removeInactiveBinding(N)}},uncacheAction:function uncacheAction(t,p){var h=this.existingAction(t,p);null!==h&&(this._deactivateAction(h),this._removeInactiveAction(h))}}),Uniform.prototype.clone=function(){return new Uniform(void 0===this.value.clone?this.value:this.value.clone())},InstancedInterleavedBuffer.prototype=Object.assign(Object.create(InterleavedBuffer.prototype),{constructor:InstancedInterleavedBuffer,isInstancedInterleavedBuffer:!0,copy:function copy(t){return InterleavedBuffer.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign(function Raycaster(t,p,h,x){this.ray=new Ray(t,p),this.near=h||0,this.far=x||1/0,this.camera=null,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function get(){return this.Points}}})}.prototype,{linePrecision:1,set:function set(t,p){this.ray.set(t,p)},setFromCamera:function setFromCamera(t,p){p&&p.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(p.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(p).sub(this.ray.origin).normalize(),this.camera=p):p&&p.isOrthographicCamera&&(this.ray.origin.set(t.x,t.y,(p.near+p.far)/(p.near-p.far)).unproject(p),this.ray.direction.set(0,0,-1).transformDirection(p.matrixWorld),this.camera=p)},intersectObject:function intersectObject(t,p,h){var x=h||[];return _intersectObject(t,this,x,p),x.sort(ascSort),x},intersectObjects:function intersectObjects(t,p,h){var x=h||[];if(!1===Array.isArray(t))return x;for(var M=0,k=t.length;M<k;M++)_intersectObject(t[M],this,x,p);return x.sort(ascSort),x}}),Object.assign(function Spherical(t,p,h){return this.radius=void 0!==t?t:1,this.phi=void 0!==p?p:0,this.theta=void 0!==h?h:0,this}.prototype,{set:function set(t,p,h){return this.radius=t,this.phi=p,this.theta=h,this},clone:function clone(){return(new this.constructor).copy(this)},copy:function copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function makeSafe(){var t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this},setFromVector3:function setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function setFromCartesianCoords(t,p,h){return this.radius=Math.sqrt(t*t+p*p+h*h),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,h),this.phi=Math.acos(Yl.clamp(p/this.radius,-1,1))),this}}),Object.assign(function Cylindrical(t,p,h){return this.radius=void 0!==t?t:1,this.theta=void 0!==p?p:0,this.y=void 0!==h?h:0,this}.prototype,{set:function set(t,p,h){return this.radius=t,this.theta=p,this.y=h,this},clone:function clone(){return(new this.constructor).copy(this)},copy:function copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function setFromCartesianCoords(t,p,h){return this.radius=Math.sqrt(t*t+h*h),this.theta=Math.atan2(t,h),this.y=p,this}});var Dd=new Vector2;function Box2(t,p){this.min=void 0!==t?t:new Vector2(1/0,1/0),this.max=void 0!==p?p:new Vector2(-1/0,-1/0)}Object.assign(Box2.prototype,{set:function set(t,p){return this.min.copy(t),this.max.copy(p),this},setFromPoints:function setFromPoints(t){this.makeEmpty();for(var p=0,h=t.length;p<h;p++)this.expandByPoint(t[p]);return this},setFromCenterAndSize:function setFromCenterAndSize(t,p){var h=Dd.copy(p).multiplyScalar(.5);return this.min.copy(t).sub(h),this.max.copy(t).add(h),this},clone:function clone(){return(new this.constructor).copy(this)},copy:function copy(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function getCenter(t){return void 0===t&&(t=new Vector2),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function getSize(t){return void 0===t&&(t=new Vector2),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function expandByPoint(t){return this.min.min(t),this.max.max(t),this},expandByVector:function expandByVector(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function getParameter(t,p){return void 0===p&&(p=new Vector2),p.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function clampPoint(t,p){return void 0===p&&(p=new Vector2),p.copy(t).clamp(this.min,this.max)},distanceToPoint:function distanceToPoint(t){return Dd.copy(t).clamp(this.min,this.max).sub(t).length()},intersect:function intersect(t){return this.min.max(t.min),this.max.min(t.max),this},union:function union(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function translate(t){return this.min.add(t),this.max.add(t),this},equals:function equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var Pd=new Vector3,Od=new Vector3;function Line3(t,p){this.start=void 0!==t?t:new Vector3,this.end=void 0!==p?p:new Vector3}function ImmediateRenderObject(t){Object3D.call(this),this.material=t,this.render=function(){}}Object.assign(Line3.prototype,{set:function set(t,p){return this.start.copy(t),this.end.copy(p),this},clone:function clone(){return(new this.constructor).copy(this)},copy:function copy(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function getCenter(t){return void 0===t&&(t=new Vector3),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function delta(t){return void 0===t&&(t=new Vector3),t.subVectors(this.end,this.start)},distanceSq:function distanceSq(){return this.start.distanceToSquared(this.end)},distance:function distance(){return this.start.distanceTo(this.end)},at:function at(t,p){return void 0===p&&(p=new Vector3),this.delta(p).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function closestPointToPointParameter(t,p){Pd.subVectors(t,this.start),Od.subVectors(this.end,this.start);var h=Od.dot(Od),x=Od.dot(Pd)/h;return p&&(x=Yl.clamp(x,0,1)),x},closestPointToPoint:function closestPointToPoint(t,p,h){var x=this.closestPointToPointParameter(t,p);return void 0===h&&(h=new Vector3),this.delta(h).multiplyScalar(x).add(this.start)},applyMatrix4:function applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),ImmediateRenderObject.prototype=Object.create(Object3D.prototype),ImmediateRenderObject.prototype.constructor=ImmediateRenderObject,ImmediateRenderObject.prototype.isImmediateRenderObject=!0;var Id=new Vector3;function SpotLightHelper(t,p){Object3D.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=p;for(var h=new BufferGeometry,x=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],M=0,k=1;M<32;M++,k++){var I=M/32*Math.PI*2,N=k/32*Math.PI*2;x.push(Math.cos(I),Math.sin(I),1,Math.cos(N),Math.sin(N),1)}h.setAttribute("position",new Float32BufferAttribute(x,3));var V=new LineBasicMaterial({fog:!1});this.cone=new LineSegments(h,V),this.add(this.cone),this.update()}SpotLightHelper.prototype=Object.create(Object3D.prototype),SpotLightHelper.prototype.constructor=SpotLightHelper,SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},SpotLightHelper.prototype.update=function(){this.light.updateMatrixWorld();var t=this.light.distance?this.light.distance:1e3,p=t*Math.tan(this.light.angle);this.cone.scale.set(p,p,t),Id.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Id),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var Ld=new Vector3,Ed=new Matrix4,Rd=new Matrix4;function getBoneList(t){var p=[];t&&t.isBone&&p.push(t);for(var h=0;h<t.children.length;h++)p.push.apply(p,getBoneList(t.children[h]));return p}function SkeletonHelper(t){for(var p=getBoneList(t),h=new BufferGeometry,x=[],M=[],k=new Color(0,0,1),I=new Color(0,1,0),N=0;N<p.length;N++){var V=p[N];V.parent&&V.parent.isBone&&(x.push(0,0,0),x.push(0,0,0),M.push(k.r,k.g,k.b),M.push(I.r,I.g,I.b))}h.setAttribute("position",new Float32BufferAttribute(x,3)),h.setAttribute("color",new Float32BufferAttribute(M,3));var ee=new LineBasicMaterial({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0});LineSegments.call(this,h,ee),this.root=t,this.bones=p,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function PointLightHelper(t,p,h){this.light=t,this.light.updateMatrixWorld(),this.color=h;var x=new SphereBufferGeometry(p,4,2),M=new MeshBasicMaterial({wireframe:!0,fog:!1});Mesh.call(this,x,M),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}SkeletonHelper.prototype=Object.create(LineSegments.prototype),SkeletonHelper.prototype.constructor=SkeletonHelper,SkeletonHelper.prototype.updateMatrixWorld=function(t){var p=this.bones,h=this.geometry,x=h.getAttribute("position");Rd.getInverse(this.root.matrixWorld);for(var M=0,k=0;M<p.length;M++){var I=p[M];I.parent&&I.parent.isBone&&(Ed.multiplyMatrices(Rd,I.matrixWorld),Ld.setFromMatrixPosition(Ed),x.setXYZ(k,Ld.x,Ld.y,Ld.z),Ed.multiplyMatrices(Rd,I.parent.matrixWorld),Ld.setFromMatrixPosition(Ed),x.setXYZ(k+1,Ld.x,Ld.y,Ld.z),k+=2)}h.getAttribute("position").needsUpdate=!0,Object3D.prototype.updateMatrixWorld.call(this,t)},PointLightHelper.prototype=Object.create(Mesh.prototype),PointLightHelper.prototype.constructor=PointLightHelper,PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},PointLightHelper.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var Bd=new Vector3,Nd=new Color,Gd=new Color;function HemisphereLightHelper(t,p,h){Object3D.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=h;var x=new OctahedronBufferGeometry(p);x.rotateY(.5*Math.PI),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=2);var M=x.getAttribute("position"),k=new Float32Array(3*M.count);x.setAttribute("color",new BufferAttribute(k,3)),this.add(new Mesh(x,this.material)),this.update()}function GridHelper(t,p,h,x){t=t||10,p=p||10,h=new Color(void 0!==h?h:4473924),x=new Color(void 0!==x?x:8947848);for(var M=p/2,k=t/p,I=t/2,N=[],V=[],ee=0,te=0,re=-I;ee<=p;ee++,re+=k){N.push(-I,0,re,I,0,re),N.push(re,0,-I,re,0,I);var ne=ee===M?h:x;ne.toArray(V,te),te+=3,ne.toArray(V,te),te+=3,ne.toArray(V,te),te+=3,ne.toArray(V,te),te+=3}var ie=new BufferGeometry;ie.setAttribute("position",new Float32BufferAttribute(N,3)),ie.setAttribute("color",new Float32BufferAttribute(V,3));var ae=new LineBasicMaterial({vertexColors:2});LineSegments.call(this,ie,ae)}function PolarGridHelper(t,p,h,x,M,k){t=t||10,p=p||16,h=h||8,x=x||64,M=new Color(void 0!==M?M:4473924),k=new Color(void 0!==k?k:8947848);var I,N,V,ee,te,re,ne,ie=[],ae=[];for(ee=0;ee<=p;ee++)V=ee/p*(2*Math.PI),I=Math.sin(V)*t,N=Math.cos(V)*t,ie.push(0,0,0),ie.push(I,0,N),ne=1&ee?M:k,ae.push(ne.r,ne.g,ne.b),ae.push(ne.r,ne.g,ne.b);for(ee=0;ee<=h;ee++)for(ne=1&ee?M:k,re=t-t/h*ee,te=0;te<x;te++)V=te/x*(2*Math.PI),I=Math.sin(V)*re,N=Math.cos(V)*re,ie.push(I,0,N),ae.push(ne.r,ne.g,ne.b),V=(te+1)/x*(2*Math.PI),I=Math.sin(V)*re,N=Math.cos(V)*re,ie.push(I,0,N),ae.push(ne.r,ne.g,ne.b);var oe=new BufferGeometry;oe.setAttribute("position",new Float32BufferAttribute(ie,3)),oe.setAttribute("color",new Float32BufferAttribute(ae,3));var se=new LineBasicMaterial({vertexColors:2});LineSegments.call(this,oe,se)}HemisphereLightHelper.prototype=Object.create(Object3D.prototype),HemisphereLightHelper.prototype.constructor=HemisphereLightHelper,HemisphereLightHelper.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},HemisphereLightHelper.prototype.update=function(){var t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var p=t.geometry.getAttribute("color");Nd.copy(this.light.color),Gd.copy(this.light.groundColor);for(var h=0,x=p.count;h<x;h++){var M=h<x/2?Nd:Gd;p.setXYZ(h,M.r,M.g,M.b)}p.needsUpdate=!0}t.lookAt(Bd.setFromMatrixPosition(this.light.matrixWorld).negate())},GridHelper.prototype=Object.assign(Object.create(LineSegments.prototype),{constructor:GridHelper,copy:function copy(t){return LineSegments.prototype.copy.call(this,t),this.geometry.copy(t.geometry),this.material.copy(t.material),this},clone:function clone(){return(new this.constructor).copy(this)}}),PolarGridHelper.prototype=Object.create(LineSegments.prototype),PolarGridHelper.prototype.constructor=PolarGridHelper;var Fd=new Vector3,Vd=new Vector3,Ud=new Vector3;function DirectionalLightHelper(t,p,h){Object3D.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=h,void 0===p&&(p=1);var x=new BufferGeometry;x.setAttribute("position",new Float32BufferAttribute([-p,p,0,p,p,0,p,-p,0,-p,-p,0,-p,p,0],3));var M=new LineBasicMaterial({fog:!1});this.lightPlane=new Line(x,M),this.add(this.lightPlane),(x=new BufferGeometry).setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line(x,M),this.add(this.targetLine),this.update()}DirectionalLightHelper.prototype=Object.create(Object3D.prototype),DirectionalLightHelper.prototype.constructor=DirectionalLightHelper,DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},DirectionalLightHelper.prototype.update=function(){Fd.setFromMatrixPosition(this.light.matrixWorld),Vd.setFromMatrixPosition(this.light.target.matrixWorld),Ud.subVectors(Vd,Fd),this.lightPlane.lookAt(Vd),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Vd),this.targetLine.scale.z=Ud.length()};var jd=new Vector3,Wd=new Camera;function CameraHelper(t){var p=new BufferGeometry,h=new LineBasicMaterial({color:16777215,vertexColors:1}),x=[],M=[],k={},I=new Color(16755200),N=new Color(16711680),V=new Color(43775),ee=new Color(16777215),te=new Color(3355443);function addLine(t,p,h){addPoint(t,h),addPoint(p,h)}function addPoint(t,p){x.push(0,0,0),M.push(p.r,p.g,p.b),void 0===k[t]&&(k[t]=[]),k[t].push(x.length/3-1)}addLine("n1","n2",I),addLine("n2","n4",I),addLine("n4","n3",I),addLine("n3","n1",I),addLine("f1","f2",I),addLine("f2","f4",I),addLine("f4","f3",I),addLine("f3","f1",I),addLine("n1","f1",I),addLine("n2","f2",I),addLine("n3","f3",I),addLine("n4","f4",I),addLine("p","n1",N),addLine("p","n2",N),addLine("p","n3",N),addLine("p","n4",N),addLine("u1","u2",V),addLine("u2","u3",V),addLine("u3","u1",V),addLine("c","t",ee),addLine("p","c",te),addLine("cn1","cn2",te),addLine("cn3","cn4",te),addLine("cf1","cf2",te),addLine("cf3","cf4",te),p.setAttribute("position",new Float32BufferAttribute(x,3)),p.setAttribute("color",new Float32BufferAttribute(M,3)),LineSegments.call(this,p,h),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=k,this.update()}function setPoint(t,p,h,x,M,k,I){jd.set(M,k,I).unproject(x);var N=p[t];if(void 0!==N)for(var V=h.getAttribute("position"),ee=0,te=N.length;ee<te;ee++)V.setXYZ(N[ee],jd.x,jd.y,jd.z)}CameraHelper.prototype=Object.create(LineSegments.prototype),CameraHelper.prototype.constructor=CameraHelper,CameraHelper.prototype.update=function(){var t=this.geometry,p=this.pointMap;Wd.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",p,t,Wd,0,0,-1),setPoint("t",p,t,Wd,0,0,1),setPoint("n1",p,t,Wd,-1,-1,-1),setPoint("n2",p,t,Wd,1,-1,-1),setPoint("n3",p,t,Wd,-1,1,-1),setPoint("n4",p,t,Wd,1,1,-1),setPoint("f1",p,t,Wd,-1,-1,1),setPoint("f2",p,t,Wd,1,-1,1),setPoint("f3",p,t,Wd,-1,1,1),setPoint("f4",p,t,Wd,1,1,1),setPoint("u1",p,t,Wd,.7,1.1,-1),setPoint("u2",p,t,Wd,-.7,1.1,-1),setPoint("u3",p,t,Wd,0,2,-1),setPoint("cf1",p,t,Wd,-1,0,1),setPoint("cf2",p,t,Wd,1,0,1),setPoint("cf3",p,t,Wd,0,-1,1),setPoint("cf4",p,t,Wd,0,1,1),setPoint("cn1",p,t,Wd,-1,0,-1),setPoint("cn2",p,t,Wd,1,0,-1),setPoint("cn3",p,t,Wd,0,-1,-1),setPoint("cn4",p,t,Wd,0,1,-1),t.getAttribute("position").needsUpdate=!0};var zd=new Box3;function BoxHelper(t,p){this.object=t,void 0===p&&(p=16776960);var h=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),x=new Float32Array(24),M=new BufferGeometry;M.setIndex(new BufferAttribute(h,1)),M.setAttribute("position",new BufferAttribute(x,3)),LineSegments.call(this,M,new LineBasicMaterial({color:p})),this.matrixAutoUpdate=!1,this.update()}function Box3Helper(t,p){this.type="Box3Helper",this.box=t,p=p||16776960;var h=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),x=new BufferGeometry;x.setIndex(new BufferAttribute(h,1)),x.setAttribute("position",new Float32BufferAttribute([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),LineSegments.call(this,x,new LineBasicMaterial({color:p})),this.geometry.computeBoundingSphere()}function PlaneHelper(t,p,h){this.type="PlaneHelper",this.plane=t,this.size=void 0===p?1:p;var x=void 0!==h?h:16776960,M=new BufferGeometry;M.setAttribute("position",new Float32BufferAttribute([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),M.computeBoundingSphere(),Line.call(this,M,new LineBasicMaterial({color:x}));var k=new BufferGeometry;k.setAttribute("position",new Float32BufferAttribute([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),k.computeBoundingSphere(),this.add(new Mesh(k,new MeshBasicMaterial({color:x,opacity:.2,transparent:!0,depthWrite:!1})))}BoxHelper.prototype=Object.create(LineSegments.prototype),BoxHelper.prototype.constructor=BoxHelper,BoxHelper.prototype.update=function(t){if(void 0!==this.object&&zd.setFromObject(this.object),!zd.isEmpty()){var p=zd.min,h=zd.max,x=this.geometry.attributes.position,M=x.array;M[0]=h.x,M[1]=h.y,M[2]=h.z,M[3]=p.x,M[4]=h.y,M[5]=h.z,M[6]=p.x,M[7]=p.y,M[8]=h.z,M[9]=h.x,M[10]=p.y,M[11]=h.z,M[12]=h.x,M[13]=h.y,M[14]=p.z,M[15]=p.x,M[16]=h.y,M[17]=p.z,M[18]=p.x,M[19]=p.y,M[20]=p.z,M[21]=h.x,M[22]=p.y,M[23]=p.z,x.needsUpdate=!0,this.geometry.computeBoundingSphere()}},BoxHelper.prototype.setFromObject=function(t){return this.object=t,this.update(),this},BoxHelper.prototype.copy=function(t){return LineSegments.prototype.copy.call(this,t),this.object=t.object,this},BoxHelper.prototype.clone=function(){return(new this.constructor).copy(this)},Box3Helper.prototype=Object.create(LineSegments.prototype),Box3Helper.prototype.constructor=Box3Helper,Box3Helper.prototype.updateMatrixWorld=function(t){var p=this.box;p.isEmpty()||(p.getCenter(this.position),p.getSize(this.scale),this.scale.multiplyScalar(.5),Object3D.prototype.updateMatrixWorld.call(this,t))},PlaneHelper.prototype=Object.create(Line.prototype),PlaneHelper.prototype.constructor=PlaneHelper,PlaneHelper.prototype.updateMatrixWorld=function(t){var p=-this.plane.constant;Math.abs(p)<1e-8&&(p=1e-8),this.scale.set(.5*this.size,.5*this.size,p),this.children[0].material.side=p<0?_c:bc,this.lookAt(this.plane.normal),Object3D.prototype.updateMatrixWorld.call(this,t)};var Hd,$d,Yd=new Vector3;function ArrowHelper(t,p,h,x,M,k){Object3D.call(this),void 0===t&&(t=new Vector3(0,0,1)),void 0===p&&(p=new Vector3(0,0,0)),void 0===h&&(h=1),void 0===x&&(x=16776960),void 0===M&&(M=.2*h),void 0===k&&(k=.2*M),void 0===Hd&&((Hd=new BufferGeometry).setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),($d=new CylinderBufferGeometry(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(p),this.line=new Line(Hd,new LineBasicMaterial({color:x})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh($d,new MeshBasicMaterial({color:x})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(h,M,k)}function AxesHelper(t){var p=[0,0,0,t=t||1,0,0,0,0,0,0,t,0,0,0,0,0,0,t],h=new BufferGeometry;h.setAttribute("position",new Float32BufferAttribute(p,3)),h.setAttribute("color",new Float32BufferAttribute([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var x=new LineBasicMaterial({vertexColors:2});LineSegments.call(this,h,x)}ArrowHelper.prototype=Object.create(Object3D.prototype),ArrowHelper.prototype.constructor=ArrowHelper,ArrowHelper.prototype.setDirection=function(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{Yd.set(t.z,0,-t.x).normalize();var p=Math.acos(t.y);this.quaternion.setFromAxisAngle(Yd,p)}},ArrowHelper.prototype.setLength=function(t,p,h){void 0===p&&(p=.2*t),void 0===h&&(h=.2*p),this.line.scale.set(1,Math.max(1e-4,t-p),1),this.line.updateMatrix(),this.cone.scale.set(h,p,h),this.cone.position.y=t,this.cone.updateMatrix()},ArrowHelper.prototype.setColor=function(t){this.line.material.color.set(t),this.cone.material.color.set(t)},ArrowHelper.prototype.copy=function(t){return Object3D.prototype.copy.call(this,t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this},ArrowHelper.prototype.clone=function(){return(new this.constructor).copy(this)},AxesHelper.prototype=Object.create(LineSegments.prototype),AxesHelper.prototype.constructor=AxesHelper;var Kd=4,Xd=8,qd=Math.pow(2,Xd),Zd=[.125,.215,.35,.446,.526,.582],Jd=Xd-Kd+1+Zd.length,Qd=20,em=_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({},kl,0),Dl,1),Ol,2),Ll,3),El,4),Rl,5),Pl,6),tm=new OrthographicCamera,rm=function _getBlurShader(t){var p=new Float32Array(t),h=new Vector3(0,1,0),x=new RawShaderMaterial({defines:{n:t},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:p},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:h},inputEncoding:{value:em[kl]},outputEncoding:{value:em[kl]}},vertexShader:"\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nattribute float faceIndex;\nvarying vec3 vOutputDirection;\nvec3 getDirection(vec2 uv, float face) {\n\tuv = 2.0 * uv - 1.0;\n\tvec3 direction = vec3(uv, 1.0);\n\tif (face == 0.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 1.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 3.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.x *= -1.0;\n\t} else if (face == 4.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.y *= -1.0;\n\t} else if (face == 5.0) {\n\t\tdirection.xz *= -1.0;\n\t}\n\treturn direction;\n}\nvoid main() {\n\tvOutputDirection = getDirection(uv, faceIndex);\n\tgl_Position = vec4( position, 1.0 );\n}\n\t",fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform int samples;\nuniform float weights[n];\nuniform bool latitudinal;\nuniform float dTheta;\nuniform float mipInt;\nuniform vec3 poleAxis;\n\n".concat("\nuniform int inputEncoding;\nuniform int outputEncoding;\n\n#include <encodings_pars_fragment>\n\nvec4 inputTexelToLinear(vec4 value){\n\tif(inputEncoding == 0){\n\t\treturn value;\n\t}else if(inputEncoding == 1){\n\t\treturn sRGBToLinear(value);\n\t}else if(inputEncoding == 2){\n\t\treturn RGBEToLinear(value);\n\t}else if(inputEncoding == 3){\n\t\treturn RGBMToLinear(value, 7.0);\n\t}else if(inputEncoding == 4){\n\t\treturn RGBMToLinear(value, 16.0);\n\t}else if(inputEncoding == 5){\n\t\treturn RGBDToLinear(value, 256.0);\n\t}else{\n\t\treturn GammaToLinear(value, 2.2);\n\t}\n}\n\nvec4 linearToOutputTexel(vec4 value){\n\tif(outputEncoding == 0){\n\t\treturn value;\n\t}else if(outputEncoding == 1){\n\t\treturn LinearTosRGB(value);\n\t}else if(outputEncoding == 2){\n\t\treturn LinearToRGBE(value);\n\t}else if(outputEncoding == 3){\n\t\treturn LinearToRGBM(value, 7.0);\n\t}else if(outputEncoding == 4){\n\t\treturn LinearToRGBM(value, 16.0);\n\t}else if(outputEncoding == 5){\n\t\treturn LinearToRGBD(value, 256.0);\n\t}else{\n\t\treturn LinearToGamma(value, 2.2);\n\t}\n}\n\nvec4 envMapTexelToLinear(vec4 color) {\n\treturn inputTexelToLinear(color);\n}\n\t","\n\n#define ENVMAP_TYPE_CUBE_UV\n#include <cube_uv_reflection_fragment>\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tfor (int i = 0; i < n; i++) {\n\t\tif (i >= samples)\n\t\t\tbreak;\n\t\tfor (int dir = -1; dir < 2; dir += 2) {\n\t\t\tif (i == 0 && dir == 1)\n\t\t\t\tcontinue;\n\t\t\tvec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);\n\t\t\tif (all(equal(axis, vec3(0.0))))\n\t\t\t\taxis = cross(vec3(0.0, 1.0, 0.0), vOutputDirection);\n\t\t\taxis = normalize(axis);\n\t\t\tfloat theta = dTheta * float(dir * i);\n\t\t\tfloat cosTheta = cos(theta);\n\t\t\t// Rodrigues' axis-angle rotation\n\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross(axis, vOutputDirection) * sin(theta)\n\t\t\t\t\t+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);\n\t\t\tgl_FragColor.rgb +=\n\t\t\t\t\tweights[i] * bilinearCubeUV(envMap, sampleDirection, mipInt);\n\t\t}\n\t}\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t"),blending:wc,depthTest:!1,depthWrite:!1});return x.type="SphericalGaussianBlur",x}(Qd),nm=null,im=null,am=function _createPlanes(){for(var t=[],p=[],h=[],x=Xd,M=0;M<Jd;M++){var k=Math.pow(2,x);p.push(k);var I=1/k;M>Xd-Kd?I=Zd[M-Xd+Kd-1]:0==M&&(I=0),h.push(I);for(var N=1/(k-1),V=-N/2,ee=1+N/2,te=[V,V,ee,V,ee,ee,V,V,ee,ee,V,ee],re=new Float32Array(108),ne=new Float32Array(72),ie=new Float32Array(36),ae=0;ae<6;ae++){var oe=ae%3*2/3-1,se=ae>2?0:-1,ce=[oe,se,0,oe+2/3,se,0,oe+2/3,se+1,0,oe,se,0,oe+2/3,se+1,0,oe,se+1,0];re.set(ce,18*ae),ne.set(te,12*ae);var ue=[ae,ae,ae,ae,ae,ae];ie.set(ue,6*ae)}var le=new BufferGeometry;le.setAttribute("position",new BufferAttribute(re,3)),le.setAttribute("uv",new BufferAttribute(ne,2)),le.setAttribute("faceIndex",new BufferAttribute(ie,1)),t.push(le),x>Kd&&x--}return{_lodPlanes:t,_sizeLods:p,_sigmas:h}}(),om=am._lodPlanes,sm=am._sizeLods,cm=am._sigmas,um=null,lm=null,pm=null,hm=(1+Math.sqrt(5))/2,fm=1/hm,dm=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,hm,fm),new Vector3(0,hm,-fm),new Vector3(fm,0,hm),new Vector3(-fm,0,hm),new Vector3(hm,fm,0),new Vector3(-hm,fm,0)];function PMREMGenerator(t){lm=t,_compileMaterial(rm)}function _allocateTargets(t){var p={magFilter:bu,minFilter:bu,generateMipmaps:!1,type:t?t.type:Tu,format:t?t.format:Wu,encoding:t?t.encoding:Ol,depthBuffer:!1,stencilBuffer:!1},h=_createRenderTarget(p);return h.depthBuffer=!t,um=_createRenderTarget(p),h}function _cleanup(t){um.dispose(),lm.setRenderTarget(pm),t.scissorTest=!1,t.setSize(t.width,t.height)}function _compileMaterial(t){var p=new Scene;p.add(new Mesh(om[0],t)),lm.compile(p,tm)}function _createRenderTarget(t){var p=new WebGLRenderTarget(3*qd,3*qd,t);return p.texture.mapping=mu,p.texture.name="PMREM.cubeUv",p.scissorTest=!0,p}function _setViewport(t,p,h,x,M){t.viewport.set(p,h,x,M),t.scissor.set(p,h,x,M)}function _applyPMREM(t){var p=lm.autoClear;lm.autoClear=!1;for(var h=1;h<Jd;h++){_blur(t,h-1,h,Math.sqrt(cm[h]*cm[h]-cm[h-1]*cm[h-1]),dm[(h-1)%dm.length])}lm.autoClear=p}function _blur(t,p,h,x,M){_halfBlur(t,um,p,h,x,"latitudinal",M),_halfBlur(um,t,h,h,x,"longitudinal",M)}function _halfBlur(t,p,h,x,M,k,I){var N=new Scene;N.add(new Mesh(om[x],rm));for(var V=rm.uniforms,ee=sm[h]-1,te=isFinite(M)?Math.PI/(2*ee):2*Math.PI/(2*Qd-1),re=M/te,ne=isFinite(M)?1+Math.floor(3*re):Qd,ie=[],ae=0,oe=0;oe<Qd;++oe){var se=oe/re,ce=Math.exp(-se*se/2);ie.push(ce),0==oe?ae+=ce:oe<ne&&(ae+=2*ce)}for(oe=0;oe<ie.length;oe++)ie[oe]=ie[oe]/ae;V.envMap.value=t.texture,V.samples.value=ne,V.weights.value=ie,V.latitudinal.value="latitudinal"===k,I&&(V.poleAxis.value=I),V.dTheta.value=te,V.mipInt.value=Xd-h,V.inputEncoding.value=em[t.texture.encoding],V.outputEncoding.value=em[t.texture.encoding];var ue=sm[x];_setViewport(p,se=3*Math.max(0,qd-2*ue),(0===x?0:2*qd)+2*ue*(x>Xd-Kd?x-Xd+Kd:0),3*ue,2*ue),lm.setRenderTarget(p),lm.render(N,tm)}function _getEquirectShader(){var t=new RawShaderMaterial({uniforms:{envMap:{value:null},texelSize:{value:new Vector2(1,1)},inputEncoding:{value:em[kl]},outputEncoding:{value:em[kl]}},vertexShader:"\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nattribute float faceIndex;\nvarying vec3 vOutputDirection;\nvec3 getDirection(vec2 uv, float face) {\n\tuv = 2.0 * uv - 1.0;\n\tvec3 direction = vec3(uv, 1.0);\n\tif (face == 0.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 1.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 3.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.x *= -1.0;\n\t} else if (face == 4.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.y *= -1.0;\n\t} else if (face == 5.0) {\n\t\tdirection.xz *= -1.0;\n\t}\n\treturn direction;\n}\nvoid main() {\n\tvOutputDirection = getDirection(uv, faceIndex);\n\tgl_Position = vec4( position, 1.0 );\n}\n\t",fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform vec2 texelSize;\n\n".concat("\nuniform int inputEncoding;\nuniform int outputEncoding;\n\n#include <encodings_pars_fragment>\n\nvec4 inputTexelToLinear(vec4 value){\n\tif(inputEncoding == 0){\n\t\treturn value;\n\t}else if(inputEncoding == 1){\n\t\treturn sRGBToLinear(value);\n\t}else if(inputEncoding == 2){\n\t\treturn RGBEToLinear(value);\n\t}else if(inputEncoding == 3){\n\t\treturn RGBMToLinear(value, 7.0);\n\t}else if(inputEncoding == 4){\n\t\treturn RGBMToLinear(value, 16.0);\n\t}else if(inputEncoding == 5){\n\t\treturn RGBDToLinear(value, 256.0);\n\t}else{\n\t\treturn GammaToLinear(value, 2.2);\n\t}\n}\n\nvec4 linearToOutputTexel(vec4 value){\n\tif(outputEncoding == 0){\n\t\treturn value;\n\t}else if(outputEncoding == 1){\n\t\treturn LinearTosRGB(value);\n\t}else if(outputEncoding == 2){\n\t\treturn LinearToRGBE(value);\n\t}else if(outputEncoding == 3){\n\t\treturn LinearToRGBM(value, 7.0);\n\t}else if(outputEncoding == 4){\n\t\treturn LinearToRGBM(value, 16.0);\n\t}else if(outputEncoding == 5){\n\t\treturn LinearToRGBD(value, 256.0);\n\t}else{\n\t\treturn LinearToGamma(value, 2.2);\n\t}\n}\n\nvec4 envMapTexelToLinear(vec4 color) {\n\treturn inputTexelToLinear(color);\n}\n\t","\n\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tvec3 outputDirection = normalize(vOutputDirection);\n\tvec2 uv;\n\tuv.y = asin(clamp(outputDirection.y, -1.0, 1.0)) * RECIPROCAL_PI + 0.5;\n\tuv.x = atan(outputDirection.z, outputDirection.x) * RECIPROCAL_PI2 + 0.5;\n\tvec2 f = fract(uv / texelSize - 0.5);\n\tuv -= f * texelSize;\n\tvec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x += texelSize.x;\n\tvec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.y += texelSize.y;\n\tvec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x -= texelSize.x;\n\tvec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tvec3 tm = mix(tl, tr, f.x);\n\tvec3 bm = mix(bl, br, f.x);\n\tgl_FragColor.rgb = mix(tm, bm, f.y);\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t"),blending:wc,depthTest:!1,depthWrite:!1});return t.type="EquirectangularToCubeUV",t}function _getCubemapShader(){var t=new RawShaderMaterial({uniforms:{envMap:{value:null},inputEncoding:{value:em[kl]},outputEncoding:{value:em[kl]}},vertexShader:"\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nattribute float faceIndex;\nvarying vec3 vOutputDirection;\nvec3 getDirection(vec2 uv, float face) {\n\tuv = 2.0 * uv - 1.0;\n\tvec3 direction = vec3(uv, 1.0);\n\tif (face == 0.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 1.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 3.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.x *= -1.0;\n\t} else if (face == 4.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.y *= -1.0;\n\t} else if (face == 5.0) {\n\t\tdirection.xz *= -1.0;\n\t}\n\treturn direction;\n}\nvoid main() {\n\tvOutputDirection = getDirection(uv, faceIndex);\n\tgl_Position = vec4( position, 1.0 );\n}\n\t",fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform samplerCube envMap;\n\n".concat("\nuniform int inputEncoding;\nuniform int outputEncoding;\n\n#include <encodings_pars_fragment>\n\nvec4 inputTexelToLinear(vec4 value){\n\tif(inputEncoding == 0){\n\t\treturn value;\n\t}else if(inputEncoding == 1){\n\t\treturn sRGBToLinear(value);\n\t}else if(inputEncoding == 2){\n\t\treturn RGBEToLinear(value);\n\t}else if(inputEncoding == 3){\n\t\treturn RGBMToLinear(value, 7.0);\n\t}else if(inputEncoding == 4){\n\t\treturn RGBMToLinear(value, 16.0);\n\t}else if(inputEncoding == 5){\n\t\treturn RGBDToLinear(value, 256.0);\n\t}else{\n\t\treturn GammaToLinear(value, 2.2);\n\t}\n}\n\nvec4 linearToOutputTexel(vec4 value){\n\tif(outputEncoding == 0){\n\t\treturn value;\n\t}else if(outputEncoding == 1){\n\t\treturn LinearTosRGB(value);\n\t}else if(outputEncoding == 2){\n\t\treturn LinearToRGBE(value);\n\t}else if(outputEncoding == 3){\n\t\treturn LinearToRGBM(value, 7.0);\n\t}else if(outputEncoding == 4){\n\t\treturn LinearToRGBM(value, 16.0);\n\t}else if(outputEncoding == 5){\n\t\treturn LinearToRGBD(value, 256.0);\n\t}else{\n\t\treturn LinearToGamma(value, 2.2);\n\t}\n}\n\nvec4 envMapTexelToLinear(vec4 color) {\n\treturn inputTexelToLinear(color);\n}\n\t","\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tgl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t"),blending:wc,depthTest:!1,depthWrite:!1});return t.type="CubemapToCubeUV",t}function Spline(t){CatmullRomCurve3.call(this,t),this.type="catmullrom"}PMREMGenerator.prototype={constructor:PMREMGenerator,fromScene:function fromScene(t){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,x=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;pm=lm.getRenderTarget();var M=_allocateTargets();return function _sceneToCubeUV(t,p,h,x){var M=90,k=1,I=new PerspectiveCamera(M,k,p,h),N=[1,1,1,1,-1,1],V=[1,1,-1,-1,-1,1],ee=lm.outputEncoding,te=lm.toneMapping,re=lm.toneMappingExposure,ne=lm.getClearColor(),ie=lm.getClearAlpha();lm.toneMapping=au,lm.toneMappingExposure=1,lm.outputEncoding=kl,t.scale.z*=-1;var ae=t.background;if(ae&&ae.isColor){ae.convertSRGBToLinear();var oe=Math.max(ae.r,ae.g,ae.b),se=Math.min(Math.max(Math.ceil(Math.log2(oe)),-128),127);ae=ae.multiplyScalar(Math.pow(2,-se));var ce=(se+128)/255;lm.setClearColor(ae,ce),t.background=null}for(var ue=0;ue<6;ue++){var le=ue%3;0==le?(I.up.set(0,N[ue],0),I.lookAt(V[ue],0,0)):1==le?(I.up.set(0,0,N[ue]),I.lookAt(0,V[ue],0)):(I.up.set(0,N[ue],0),I.lookAt(0,0,V[ue])),_setViewport(x,le*qd,ue>2?qd:0,qd,qd),lm.setRenderTarget(x),lm.render(t,I)}lm.toneMapping=te,lm.toneMappingExposure=re,lm.outputEncoding=ee,lm.setClearColor(ne,ie),t.scale.z*=-1}(t,h,x,M),p>0&&_blur(M,0,0,p),_applyPMREM(M),_cleanup(M),M},fromEquirectangular:function fromEquirectangular(t){return t.magFilter=bu,t.minFilter=bu,t.generateMipmaps=!1,this.fromCubemap(t)},fromCubemap:function fromCubemap(t){pm=lm.getRenderTarget();var p=_allocateTargets(t);return function _textureToCubeUV(t,p){var h=new Scene;t.isCubeTexture?null==im&&(im=_getCubemapShader()):null==nm&&(nm=_getEquirectShader());var x=t.isCubeTexture?im:nm;h.add(new Mesh(om[0],x));var M=x.uniforms;M.envMap.value=t,t.isCubeTexture||M.texelSize.value.set(1/t.image.width,1/t.image.height);M.inputEncoding.value=em[t.encoding],M.outputEncoding.value=em[t.encoding],_setViewport(p,0,0,3*qd,2*qd),lm.setRenderTarget(p),lm.render(h,tm)}(t,p),_applyPMREM(p),_cleanup(p),p},compileCubemapShader:function compileCubemapShader(){null==im&&_compileMaterial(im=_getCubemapShader())},compileEquirectangularShader:function compileEquirectangularShader(){null==nm&&_compileMaterial(nm=_getEquirectShader())},dispose:function dispose(){rm.dispose(),null!=im&&im.dispose(),null!=nm&&nm.dispose();for(var t=0;t<om.length;t++)om[t].dispose()}},Curve.create=function(t,p){return t.prototype=Object.create(Curve.prototype),t.prototype.constructor=t,t.prototype.getPoint=p,t},Object.assign(CurvePath.prototype,{createPointsGeometry:function createPointsGeometry(t){var p=this.getPoints(t);return this.createGeometry(p)},createSpacedPointsGeometry:function createSpacedPointsGeometry(t){var p=this.getSpacedPoints(t);return this.createGeometry(p)},createGeometry:function createGeometry(t){for(var p=new Geometry,h=0,x=t.length;h<x;h++){var M=t[h];p.vertices.push(new Vector3(M.x,M.y,M.z||0))}return p}}),Object.assign(Path.prototype,{fromPoints:function fromPoints(t){return this.setFromPoints(t)}}),Object.create(CatmullRomCurve3.prototype),Object.create(CatmullRomCurve3.prototype),Spline.prototype=Object.create(CatmullRomCurve3.prototype),Object.assign(Spline.prototype,{initFromArray:function initFromArray(){},getControlPointsArray:function getControlPointsArray(){},reparametrizeByArcLength:function reparametrizeByArcLength(){}}),GridHelper.prototype.setColors=function(){},SkeletonHelper.prototype.update=function(){},Object.assign(Loader.prototype,{extractUrlBase:function extractUrlBase(t){return rd(t)}}),Loader.Handlers={add:function add(){},get:function get(){}},Object.assign(ObjectLoader.prototype,{setTexturePath:function setTexturePath(t){return this.setResourcePath(t)}}),Object.assign(Box2.prototype,{center:function center(t){return this.getCenter(t)},empty:function empty(){return this.isEmpty()},isIntersectionBox:function isIntersectionBox(t){return this.intersectsBox(t)},size:function size(t){return this.getSize(t)}}),Object.assign(Box3.prototype,{center:function center(t){return this.getCenter(t)},empty:function empty(){return this.isEmpty()},isIntersectionBox:function isIntersectionBox(t){return this.intersectsBox(t)},isIntersectionSphere:function isIntersectionSphere(t){return this.intersectsSphere(t)},size:function size(t){return this.getSize(t)}}),Frustum.prototype.setFromMatrix=function(t){return this.setFromProjectionMatrix(t)},Line3.prototype.center=function(t){return this.getCenter(t)},Object.assign(Yl,{random16:function random16(){return Math.random()},nearestPowerOfTwo:function nearestPowerOfTwo(t){return Yl.floorPowerOfTwo(t)},nextPowerOfTwo:function nextPowerOfTwo(t){return Yl.ceilPowerOfTwo(t)}}),Object.assign(Matrix3.prototype,{flattenToArrayOffset:function flattenToArrayOffset(t,p){return this.toArray(t,p)},multiplyVector3:function multiplyVector3(t){return t.applyMatrix3(this)},multiplyVector3Array:function multiplyVector3Array(){},applyToBufferAttribute:function applyToBufferAttribute(t){return t.applyMatrix3(this)},applyToVector3Array:function applyToVector3Array(){}}),Object.assign(Matrix4.prototype,{extractPosition:function extractPosition(t){return this.copyPosition(t)},flattenToArrayOffset:function flattenToArrayOffset(t,p){return this.toArray(t,p)},getPosition:function getPosition(){return(new Vector3).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function setRotationFromQuaternion(t){return this.makeRotationFromQuaternion(t)},multiplyToArray:function multiplyToArray(){},multiplyVector3:function multiplyVector3(t){return t.applyMatrix4(this)},multiplyVector4:function multiplyVector4(t){return t.applyMatrix4(this)},multiplyVector3Array:function multiplyVector3Array(){},rotateAxis:function rotateAxis(t){t.transformDirection(this)},crossVector:function crossVector(t){return t.applyMatrix4(this)},translate:function translate(){},rotateX:function rotateX(){},rotateY:function rotateY(){},rotateZ:function rotateZ(){},rotateByAxis:function rotateByAxis(){},applyToBufferAttribute:function applyToBufferAttribute(t){return t.applyMatrix4(this)},applyToVector3Array:function applyToVector3Array(){},makeFrustum:function makeFrustum(t,p,h,x,M,k){return this.makePerspective(t,p,x,h,M,k)}}),Plane.prototype.isIntersectionLine=function(t){return this.intersectsLine(t)},Quaternion.prototype.multiplyVector3=function(t){return t.applyQuaternion(this)},Object.assign(Ray.prototype,{isIntersectionBox:function isIntersectionBox(t){return this.intersectsBox(t)},isIntersectionPlane:function isIntersectionPlane(t){return this.intersectsPlane(t)},isIntersectionSphere:function isIntersectionSphere(t){return this.intersectsSphere(t)}}),Object.assign(Triangle.prototype,{area:function area(){return this.getArea()},barycoordFromPoint:function barycoordFromPoint(t,p){return this.getBarycoord(t,p)},midpoint:function midpoint(t){return this.getMidpoint(t)},normal:function normal(t){return this.getNormal(t)},plane:function plane(t){return this.getPlane(t)}}),Object.assign(Triangle,{barycoordFromPoint:function barycoordFromPoint(t,p,h,x,M){return Triangle.getBarycoord(t,p,h,x,M)},normal:function normal(t,p,h,x){return Triangle.getNormal(t,p,h,x)}}),Object.assign(Shape.prototype,{extractAllPoints:function extractAllPoints(t){return this.extractPoints(t)},extrude:function extrude(t){return new ExtrudeGeometry(this,t)},makeGeometry:function makeGeometry(t){return new ShapeGeometry(this,t)}}),Object.assign(Vector2.prototype,{fromAttribute:function fromAttribute(t,p,h){return this.fromBufferAttribute(t,p,h)},distanceToManhattan:function distanceToManhattan(t){return this.manhattanDistanceTo(t)},lengthManhattan:function lengthManhattan(){return this.manhattanLength()}}),Object.assign(Vector3.prototype,{setEulerFromRotationMatrix:function setEulerFromRotationMatrix(){},setEulerFromQuaternion:function setEulerFromQuaternion(){},getPositionFromMatrix:function getPositionFromMatrix(t){return this.setFromMatrixPosition(t)},getScaleFromMatrix:function getScaleFromMatrix(t){return this.setFromMatrixScale(t)},getColumnFromMatrix:function getColumnFromMatrix(t,p){return this.setFromMatrixColumn(p,t)},applyProjection:function applyProjection(t){return this.applyMatrix4(t)},fromAttribute:function fromAttribute(t,p,h){return this.fromBufferAttribute(t,p,h)},distanceToManhattan:function distanceToManhattan(t){return this.manhattanDistanceTo(t)},lengthManhattan:function lengthManhattan(){return this.manhattanLength()}}),Object.assign(Vector4.prototype,{fromAttribute:function fromAttribute(t,p,h){return this.fromBufferAttribute(t,p,h)},lengthManhattan:function lengthManhattan(){return this.manhattanLength()}}),Object.assign(Geometry.prototype,{computeTangents:function computeTangents(){},computeLineDistances:function computeLineDistances(){},applyMatrix:function applyMatrix(t){return this.applyMatrix4(t)}}),Object.assign(Object3D.prototype,{getChildByName:function getChildByName(t){return this.getObjectByName(t)},renderDepth:function renderDepth(){},translate:function translate(t,p){return this.translateOnAxis(p,t)},getWorldRotation:function getWorldRotation(){},applyMatrix:function applyMatrix(t){return this.applyMatrix4(t)}}),Object.defineProperties(Object3D.prototype,{eulerOrder:{get:function get(){return this.rotation.order},set:function set(t){this.rotation.order=t}},useQuaternion:{get:function get(){},set:function set(){}}}),Object.assign(Mesh.prototype,{setDrawMode:function setDrawMode(){}}),Object.defineProperties(Mesh.prototype,{drawMode:{get:function get(){return 0},set:function set(){}}}),Object.defineProperties(LOD.prototype,{objects:{get:function get(){return this.levels}}}),Object.defineProperty(Skeleton.prototype,"useVertexTexture",{get:function get(){},set:function set(){}}),SkinnedMesh.prototype.initBones=function(){},Object.defineProperty(Curve.prototype,"__arcLengthDivisions",{get:function get(){return this.arcLengthDivisions},set:function set(t){this.arcLengthDivisions=t}}),PerspectiveCamera.prototype.setLens=function(t,p){void 0!==p&&(this.filmGauge=p),this.setFocalLength(t)},Object.defineProperties(Light.prototype,{onlyShadow:{set:function set(){}},shadowCameraFov:{set:function set(t){this.shadow.camera.fov=t}},shadowCameraLeft:{set:function set(t){this.shadow.camera.left=t}},shadowCameraRight:{set:function set(t){this.shadow.camera.right=t}},shadowCameraTop:{set:function set(t){this.shadow.camera.top=t}},shadowCameraBottom:{set:function set(t){this.shadow.camera.bottom=t}},shadowCameraNear:{set:function set(t){this.shadow.camera.near=t}},shadowCameraFar:{set:function set(t){this.shadow.camera.far=t}},shadowCameraVisible:{set:function set(){}},shadowBias:{set:function set(t){this.shadow.bias=t}},shadowDarkness:{set:function set(){}},shadowMapWidth:{set:function set(t){this.shadow.mapSize.width=t}},shadowMapHeight:{set:function set(t){this.shadow.mapSize.height=t}}}),Object.defineProperties(BufferAttribute.prototype,{length:{get:function get(){return this.array.length}},dynamic:{get:function get(){return this.usage===Wl},set:function set(){this.setUsage(Wl)}}}),Object.assign(BufferAttribute.prototype,{setDynamic:function setDynamic(t){return this.setUsage(!0===t?Wl:jl),this},copyIndicesArray:function copyIndicesArray(){},setArray:function setArray(){}}),Object.assign(BufferGeometry.prototype,{addIndex:function addIndex(t){this.setIndex(t)},addAttribute:function addAttribute(t,p){return p&&p.isBufferAttribute||p&&p.isInterleavedBufferAttribute?"index"===t?(this.setIndex(p),this):this.setAttribute(t,p):this.setAttribute(t,new BufferAttribute(arguments[1],arguments[2]))},addDrawCall:function addDrawCall(t,p,h){this.addGroup(t,p)},clearDrawCalls:function clearDrawCalls(){this.clearGroups()},computeTangents:function computeTangents(){},computeOffsets:function computeOffsets(){},removeAttribute:function removeAttribute(t){return this.deleteAttribute(t)},applyMatrix:function applyMatrix(t){return this.applyMatrix4(t)}}),Object.defineProperties(BufferGeometry.prototype,{drawcalls:{get:function get(){return this.groups}},offsets:{get:function get(){return this.groups}}}),Object.defineProperties(InterleavedBuffer.prototype,{dynamic:{get:function get(){return this.usage===Wl},set:function set(t){this.setUsage(t)}}}),Object.assign(InterleavedBuffer.prototype,{setDynamic:function setDynamic(t){return this.setUsage(!0===t?Wl:jl),this},setArray:function setArray(){}}),Object.assign(ExtrudeBufferGeometry.prototype,{getArrays:function getArrays(){},addShapeList:function addShapeList(){},addShape:function addShape(){}}),Object.defineProperties(Uniform.prototype,{dynamic:{set:function set(){}},onUpdate:{value:function value(){return this}}}),Object.defineProperties(Material.prototype,{wrapAround:{get:function get(){},set:function set(){}},overdraw:{get:function get(){},set:function set(){}},wrapRGB:{get:function get(){return new Color}},shading:{get:function get(){},set:function set(t){this.flatShading=1===t}},stencilMask:{get:function get(){return this.stencilFuncMask},set:function set(t){this.stencilFuncMask=t}}}),Object.defineProperties(MeshPhongMaterial.prototype,{metal:{get:function get(){return!1},set:function set(){}}}),Object.defineProperties(ShaderMaterial.prototype,{derivatives:{get:function get(){return this.extensions.derivatives},set:function set(t){this.extensions.derivatives=t}}}),Object.assign(WebGLRenderer.prototype,{clearTarget:function clearTarget(t,p,h,x){this.setRenderTarget(t),this.clear(p,h,x)},animate:function animate(t){this.setAnimationLoop(t)},getCurrentRenderTarget:function getCurrentRenderTarget(){return this.getRenderTarget()},getMaxAnisotropy:function getMaxAnisotropy(){return this.capabilities.getMaxAnisotropy()},getPrecision:function getPrecision(){return this.capabilities.precision},resetGLState:function resetGLState(){return this.state.reset()},supportsFloatTextures:function supportsFloatTextures(){return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function supportsHalfFloatTextures(){return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function supportsStandardDerivatives(){return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function supportsCompressedTextureS3TC(){return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function supportsCompressedTexturePVRTC(){return this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function supportsBlendMinMax(){return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function supportsVertexTextures(){return this.capabilities.vertexTextures},supportsInstancedArrays:function supportsInstancedArrays(){return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function enableScissorTest(t){this.setScissorTest(t)},initMaterial:function initMaterial(){},addPrePlugin:function addPrePlugin(){},addPostPlugin:function addPostPlugin(){},updateShadowMap:function updateShadowMap(){},setFaceCulling:function setFaceCulling(){},allocTextureUnit:function allocTextureUnit(){},setTexture:function setTexture(){},setTexture2D:function setTexture2D(){},setTextureCube:function setTextureCube(){},getActiveMipMapLevel:function getActiveMipMapLevel(){return this.getActiveMipmapLevel()}}),Object.defineProperties(WebGLRenderer.prototype,{shadowMapEnabled:{get:function get(){return this.shadowMap.enabled},set:function set(t){this.shadowMap.enabled=t}},shadowMapType:{get:function get(){return this.shadowMap.type},set:function set(t){this.shadowMap.type=t}},shadowMapCullFace:{get:function get(){},set:function set(){}},context:{get:function get(){return this.getContext()}},vr:{get:function get(){return this.xr}},gammaInput:{get:function get(){return!1},set:function set(){}},gammaOutput:{get:function get(){return!1},set:function set(t){this.outputEncoding=!0===t?Dl:kl}}}),Object.defineProperties(WebGLShadowMap.prototype,{cullFace:{get:function get(){},set:function set(){}},renderReverseSided:{get:function get(){},set:function set(){}},renderSingleSided:{get:function get(){},set:function set(){}}}),Object.defineProperties(WebGLRenderTarget.prototype,{wrapS:{get:function get(){return this.texture.wrapS},set:function set(t){this.texture.wrapS=t}},wrapT:{get:function get(){return this.texture.wrapT},set:function set(t){this.texture.wrapT=t}},magFilter:{get:function get(){return this.texture.magFilter},set:function set(t){this.texture.magFilter=t}},minFilter:{get:function get(){return this.texture.minFilter},set:function set(t){this.texture.minFilter=t}},anisotropy:{get:function get(){return this.texture.anisotropy},set:function set(t){this.texture.anisotropy=t}},offset:{get:function get(){return this.texture.offset},set:function set(t){this.texture.offset=t}},repeat:{get:function get(){return this.texture.repeat},set:function set(t){this.texture.repeat=t}},format:{get:function get(){return this.texture.format},set:function set(t){this.texture.format=t}},type:{get:function get(){return this.texture.type},set:function set(t){this.texture.type=t}},generateMipmaps:{get:function get(){return this.texture.generateMipmaps},set:function set(t){this.texture.generateMipmaps=t}}}),Object.defineProperties(Audio.prototype,{load:{value:function value(t){var p=this;return(new AudioLoader).load(t,(function(t){p.setBuffer(t)})),this}},startTime:{set:function set(){}}}),AudioAnalyser.prototype.getData=function(){return this.getFrequencyData()},CubeCamera.prototype.updateCubeMap=function(t,p){return this.update(t,p)},Kl.crossOrigin=void 0,Kl.loadTexture=function(t,p,h,x){var M=new TextureLoader;M.setCrossOrigin(this.crossOrigin);var k=M.load(t,h,void 0,x);return p&&(k.mapping=p),k},Kl.loadTextureCube=function(t,p,h,x){var M=new CubeTextureLoader;M.setCrossOrigin(this.crossOrigin);var k=M.load(t,h,void 0,x);return p&&(k.mapping=p),k},Kl.loadCompressedTexture=function(){},Kl.loadCompressedTextureCube=function(){},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"113"}}));var mm={};function _createSuper(t){var p=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(bm){return!1}}();return function _createSuperInternal(){var h,x=_getPrototypeOf$1(t);if(p){var M=_getPrototypeOf$1(this).constructor;h=Reflect.construct(x,arguments,M)}else h=x.apply(this,arguments);return _possibleConstructorReturn$1(this,h)}}!function(){var t=function a1(){function W(t){this.message="JPEG error: "+t}return W.prototype=new Error,W.prototype.name="JpegError",W.constructor=W,W}(),p=function ag(){var p=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),h=4017,x=799,M=3406,k=2276,I=1567,N=3784,V=5793,ee=2896;function ak(t){null==t&&(t={}),null==t.w&&(t.w=-1),this.V=t.n,this.N=t.w}function a5(t,p){for(var h,x,M,k=0,I=[],N=16;N>0&&!t[N-1];)N--;I.push({children:[],index:0});var V=I[0];for(h=0;h<N;h++){for(x=0;x<t[h];x++){for((V=I.pop()).children[V.index]=p[k];V.index>0;)V=I.pop();for(V.index++,I.push(V);I.length<=h;)I.push(M={children:[],index:0}),V.children[V.index]=M.children,V=M;k++}h+1<N&&(I.push(M={children:[],index:0}),V.children[V.index]=M.children,V=M)}return I[0].children}function a2(t,p,h){return 64*((t.P+1)*p+h)}function a7(h,x,M,k,I,N,V,ee,te,re){null==re&&(re=!1);var ne,ie,ae,oe,se,ce,ue,le,pe,he,fe,de=M.m,me=M.Z,ge=x,ve=0,ye=0,xe=0,be=0,_e=0,Me=0;function Y(){if(ye>0)return ye--,ve>>ye&1;if(255===(ve=h[x++])){var p=h[x++];if(p){if(220===p&&re){var k=Z(h,x+=2);if(x+=2,k>0&&k!==M.s)throw new DNLMarkerError("Found DNL marker (0xFFDC) while parsing scan data",k)}else if(217===p){if(re){var I=8*_e;if(I>0&&I<M.s/10)throw new DNLMarkerError("Found EOI marker (0xFFD9) while parsing scan data, possibly caused by incorrect `scanLines` parameter",I)}throw new EOIMarkerError("Found EOI marker (0xFFD9) while parsing scan data")}throw new t("unexpected marker")}}return ye=7,ve>>>7}function u(p){for(var h=p;;){switch(_typeof$2(h=h[Y()])){case"number":return h;case"object":continue}throw new t("invalid huffman sequence")}}function m(t){for(var p=0;t>0;)p=p<<1|Y(),t--;return p}function j(t){if(1===t)return 1===Y()?1:-1;var p=m(t);return p>=1<<t-1?p:p+(-1<<t)+1}function H(t,p,h,x,M){var k=h%de;_e=(h/de|0)*t.A+x;var I=k*t.h+M;p(t,a2(t,_e,I))}function w(t,p,h){_e=h/t.P|0;var x=h%t.P;p(t,a2(t,_e,x))}var Ce=k.length;for(ue=me?0===N?0===ee?function $(t,p){var h=u(t.J),x=0===h?0:j(h)<<te;t.D[p]=t.Q+=x}:function b(t,p){t.D[p]|=Y()<<te}:0===ee?function P(t,h){if(xe>0)xe--;else for(var x=N,M=V;x<=M;){var k=u(t.i),I=15&k,ee=k>>4;if(0!==I){var re=p[x+=ee];t.D[h+re]=j(I)*(1<<te),x++}else{if(ee<15){xe=m(ee)+(1<<ee)-1;break}x+=16}}}:function a4(h,x){for(var M,k,I=N,ee=V,re=0;I<=ee;){var ie=x+p[I],ae=h.D[ie]<0?-1:1;switch(be){case 0:if(re=(k=u(h.i))>>4,0==(M=15&k))re<15?(xe=m(re)+(1<<re),be=4):(re=16,be=1);else{if(1!==M)throw new t("invalid ACn encoding");ne=j(M),be=re?2:3}continue;case 1:case 2:h.D[ie]?h.D[ie]+=ae*(Y()<<te):0==--re&&(be=2===be?3:0);break;case 3:h.D[ie]?h.D[ie]+=ae*(Y()<<te):(h.D[ie]=ne<<te,be=0);break;case 4:h.D[ie]&&(h.D[ie]+=ae*(Y()<<te))}I++}4===be&&0==--xe&&(be=0)}:function v(t,h){var x=u(t.J),M=0===x?0:j(x),k=1;for(t.D[h]=t.Q+=M;k<64;){var I=u(t.i),N=15&I,V=I>>4;if(0!==N){var ee=p[k+=V];t.D[h+ee]=j(N),k++}else{if(V<15)break;k+=16}}},pe=1===Ce?k[0].P*k[0].c:de*M.R;Me<=pe;){var we=I?Math.min(pe-Me,I):pe;if(we>0){for(ae=0;ae<Ce;ae++)k[ae].Q=0;if(xe=0,1===Ce)for(ie=k[0],ce=0;ce<we;ce++)w(ie,ue,Me),Me++;else for(ce=0;ce<we;ce++){for(ae=0;ae<Ce;ae++)for(he=(ie=k[ae]).h,fe=ie.A,oe=0;oe<fe;oe++)for(se=0;se<he;se++)H(ie,ue,Me,oe,se);Me++}}if(ye=0,!(le=an(h,x)))break;if(le.u&&(x=le.offset),!(le.M>=65488&&le.M<=65495))break;x+=2}return x-ge}function al(p,te,re){var ne,ie,ae,oe,se,ce,ue,le,pe,he,fe,de,me,ge,ve,ye,xe,be=p.$,_e=p.D;if(!be)throw new t("missing required Quantization Table.");for(var Me=0;Me<64;Me+=8)pe=_e[te+Me],he=_e[te+Me+1],fe=_e[te+Me+2],de=_e[te+Me+3],me=_e[te+Me+4],ge=_e[te+Me+5],ve=_e[te+Me+6],ye=_e[te+Me+7],pe*=be[Me],0!=(he|fe|de|me|ge|ve|ye)?(he*=be[Me+1],fe*=be[Me+2],de*=be[Me+3],me*=be[Me+4],ge*=be[Me+5],ve*=be[Me+6],ye*=be[Me+7],ie=(ne=(ne=V*pe+128>>8)+(ie=V*me+128>>8)+1>>1)-ie,xe=(ae=fe)*N+(oe=ve)*I+128>>8,ae=ae*I-oe*N+128>>8,ue=(se=(se=ee*(he-ye)+128>>8)+(ue=ge<<4)+1>>1)-ue,ce=(le=(le=ee*(he+ye)+128>>8)+(ce=de<<4)+1>>1)-ce,oe=(ne=ne+(oe=xe)+1>>1)-oe,ae=(ie=ie+ae+1>>1)-ae,xe=se*k+le*M+2048>>12,se=se*M-le*k+2048>>12,le=xe,xe=ce*x+ue*h+2048>>12,ce=ce*h-ue*x+2048>>12,ue=xe,re[Me]=ne+le,re[Me+7]=ne-le,re[Me+1]=ie+ue,re[Me+6]=ie-ue,re[Me+2]=ae+ce,re[Me+5]=ae-ce,re[Me+3]=oe+se,re[Me+4]=oe-se):(xe=V*pe+512>>10,re[Me]=xe,re[Me+1]=xe,re[Me+2]=xe,re[Me+3]=xe,re[Me+4]=xe,re[Me+5]=xe,re[Me+6]=xe,re[Me+7]=xe);for(var Ce=0;Ce<8;++Ce)pe=re[Ce],0!=((he=re[Ce+8])|(fe=re[Ce+16])|(de=re[Ce+24])|(me=re[Ce+32])|(ge=re[Ce+40])|(ve=re[Ce+48])|(ye=re[Ce+56]))?(ie=(ne=4112+((ne=V*pe+2048>>12)+(ie=V*me+2048>>12)+1>>1))-ie,xe=(ae=fe)*N+(oe=ve)*I+2048>>12,ae=ae*I-oe*N+2048>>12,oe=xe,ue=(se=(se=ee*(he-ye)+2048>>12)+(ue=ge)+1>>1)-ue,ce=(le=(le=ee*(he+ye)+2048>>12)+(ce=de)+1>>1)-ce,xe=se*k+le*M+2048>>12,se=se*M-le*k+2048>>12,le=xe,xe=ce*x+ue*h+2048>>12,ce=ce*h-ue*x+2048>>12,(pe=(ne=ne+oe+1>>1)+le)<16?pe=0:pe>=4080?pe=255:pe>>=4,(he=(ie=ie+ae+1>>1)+(ue=xe))<16?he=0:he>=4080?he=255:he>>=4,(fe=(ae=ie-ae)+ce)<16?fe=0:fe>=4080?fe=255:fe>>=4,(de=(oe=ne-oe)+se)<16?de=0:de>=4080?de=255:de>>=4,(me=oe-se)<16?me=0:me>=4080?me=255:me>>=4,(ge=ae-ce)<16?ge=0:ge>=4080?ge=255:ge>>=4,(ve=ie-ue)<16?ve=0:ve>=4080?ve=255:ve>>=4,(ye=ne-le)<16?ye=0:ye>=4080?ye=255:ye>>=4,_e[te+Ce]=pe,_e[te+Ce+8]=he,_e[te+Ce+16]=fe,_e[te+Ce+24]=de,_e[te+Ce+32]=me,_e[te+Ce+40]=ge,_e[te+Ce+48]=ve,_e[te+Ce+56]=ye):(xe=(xe=V*pe+8192>>14)<-2040?0:xe>=2024?255:xe+2056>>4,_e[te+Ce]=xe,_e[te+Ce+8]=xe,_e[te+Ce+16]=xe,_e[te+Ce+24]=xe,_e[te+Ce+32]=xe,_e[te+Ce+40]=xe,_e[te+Ce+48]=xe,_e[te+Ce+56]=xe)}function a0(t,p){for(var h=p.P,x=p.c,M=new Int16Array(64),k=0;k<x;k++)for(var I=0;I<h;I++){al(p,a2(p,k,I),M)}return p.D}function an(t,p,h){null==h&&(h=p);var x=t.length-1,M=h<p?h:p;if(p>=x)return null;var k=Z(t,p);if(k>=65472&&k<=65534)return{u:null,M:k,offset:p};for(var I=Z(t,M);!(I>=65472&&I<=65534);){if(++M>=x)return null;I=Z(t,M)}return{u:k.toString(16),M:I,offset:M}}return ak.prototype={parse:function parse(h,x){null==x&&(x={});var M,k,I=x.F,N=0,V=null,ee=null,te=0;function G(){var t=Z(h,N),p=(N+=2)+t-2,x=an(h,p,N);x&&x.u&&(p=x.offset);var M=h.subarray(N,p);return N+=M.length,M}function n(t){for(var p=Math.ceil(t.o/8/t.X),h=Math.ceil(t.s/8/t.B),x=0;x<t.W.length;x++){Te=t.W[x];var M=Math.ceil(Math.ceil(t.o/8)*Te.h/t.X),k=Math.ceil(Math.ceil(t.s/8)*Te.A/t.B),I=p*Te.h,N=64*(h*Te.A)*(I+1);Te.D=new Int16Array(N),Te.P=M,Te.c=k}t.m=p,t.R=h}var re=[],ne=[],ie=[],ae=Z(h,N);if(N+=2,65496!==ae)throw new t("SOI not found");ae=Z(h,N),N+=2;e:for(;65497!==ae;){var oe,se,ce;switch(ae){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var ue=G();65504===ae&&74===ue[0]&&70===ue[1]&&73===ue[2]&&70===ue[3]&&0===ue[4]&&(V={version:{d:ue[5],T:ue[6]},K:ue[7],j:ue[8]<<8|ue[9],H:ue[10]<<8|ue[11],S:ue[12],I:ue[13],C:ue.subarray(14,14+3*ue[12]*ue[13])}),65518===ae&&65===ue[0]&&100===ue[1]&&111===ue[2]&&98===ue[3]&&101===ue[4]&&(ee={version:ue[5]<<8|ue[6],k:ue[7]<<8|ue[8],q:ue[9]<<8|ue[10],a:ue[11]});break;case 65499:for(var le=Z(h,N)+(N+=2)-2;N<le;){var pe=h[N++],he=new Uint16Array(64);if(pe>>4==0)for(se=0;se<64;se++)he[p[se]]=h[N++];else{if(pe>>4!=1)throw new t("DQT - invalid table spec");for(se=0;se<64;se++)he[p[se]]=Z(h,N),N+=2}re[15&pe]=he}break;case 65472:case 65473:case 65474:if(M)throw new t("Only single frame JPEGs supported");N+=2,(M={}).G=65473===ae,M.Z=65474===ae,M.precision=h[N++];var fe,de=Z(h,N),me=0,ge=0;N+=2,M.s=I||de,M.o=Z(h,N),N+=2,M.W=[],M._={};var ve=h[N++];for(oe=0;oe<ve;oe++){fe=h[N];var ye=h[N+1]>>4,xe=15&h[N+1];me<ye&&(me=ye),ge<xe&&(ge=xe);var be=h[N+2];ce=M.W.push({h:ye,A:xe,L:be,$:null}),M._[fe]=ce-1,N+=3}M.X=me,M.B=ge,n(M);break;case 65476:var _e=Z(h,N);for(N+=2,oe=2;oe<_e;){var Me=h[N++],Ce=new Uint8Array(16),we=0;for(se=0;se<16;se++,N++)we+=Ce[se]=h[N];var Se=new Uint8Array(we);for(se=0;se<we;se++,N++)Se[se]=h[N];oe+=17+we,(Me>>4==0?ie:ne)[15&Me]=a5(Ce,Se)}break;case 65501:k=Z(h,N+=2),N+=2;break;case 65498:var Te,Ae=1==++te&&!I;N+=2;var ke=h[N++],De=[];for(oe=0;oe<ke;oe++){var Oe=h[N++],Ie=M._[Oe];(Te=M.W[Ie]).index=Oe;var Le=h[N++];Te.J=ie[Le>>4],Te.i=ne[15&Le],De.push(Te)}var Ee=h[N++],Re=h[N++],Be=h[N++];try{var Ne=a7(h,N,M,De,k,Ee,Re,Be>>4,15&Be,Ae);N+=Ne}catch(Ve){if(Ve instanceof DNLMarkerError)return this.parse(h,{F:Ve.s});if(Ve instanceof EOIMarkerError)break e;throw Ve}break;case 65500:N+=4;break;case 65535:255!==h[N]&&N--;break;default:var Ge=an(h,N-2,N-3);if(Ge&&Ge.u){N=Ge.offset;break}if(N>=h.length-1)break e;throw new t("JpegImage.parse - unknown marker: "+ae.toString(16))}ae=Z(h,N),N+=2}for(this.width=M.o,this.height=M.s,this.g=V,this.b=ee,this.W=[],oe=0;oe<M.W.length;oe++){var Fe=re[(Te=M.W[oe]).L];Fe&&(Te.$=Fe),this.W.push({index:Te.index,e:a0(0,Te),l:Te.h/M.X,t:Te.A/M.B,P:Te.P,c:Te.c})}this.p=this.W.length},Y:function Y(t,p,h){null==h&&(h=!1);var x,M,k,I,N,V,ee,te,re,ne,ie,ae,oe=this.width/t,se=this.height/p,Y=0,ce=this.W.length,ue=t*p*ce,le=new Uint8ClampedArray(ue),pe=new Uint32Array(t),he=4294967288;for(ee=0;ee<ce;ee++){if(M=(x=this.W[ee]).l*oe,k=x.t*se,Y=ee,ie=x.e,I=x.P+1<<3,M!==ae){for(N=0;N<t;N++)te=0|N*M,pe[N]=(te&he)<<3|7&te;ae=M}for(V=0;V<p;V++)for(ne=I*((te=0|V*k)&he)|(7&te)<<3,N=0;N<t;N++)le[Y]=ie[ne+pe[N]],Y+=ce}var fe=this.V;if(h||4!==ce||fe||(fe=new Int32Array([-256,255,-256,255,-256,255,-256,255])),fe)for(ee=0;ee<ue;)for(te=0,re=0;te<ce;te++,ee++,re+=2)le[ee]=(le[ee]*fe[re]>>8)+fe[re+1];return le},get f(){return this.b?!!this.b.a:3===this.p?0!==this.N&&(82!==this.W[0].index||71!==this.W[1].index||66!==this.W[2].index):1===this.N},z:function aj(t){for(var p,h,x,M=0,k=t.length;M<k;M+=3)p=t[M],h=t[M+1],x=t[M+2],t[M]=p-179.456+1.402*x,t[M+1]=p+135.459-.344*h-.714*x,t[M+2]=p-226.816+1.772*h;return t},O:function aa(t){for(var p,h,x,M,k=0,I=0,N=t.length;I<N;I+=4)p=t[I],h=t[I+1],x=t[I+2],M=t[I+3],t[k++]=h*(-660635669420364e-19*h+.000437130475926232*x-54080610064599e-18*p+.00048449797120281*M-.154362151871126)-122.67195406894+x*(-.000957964378445773*x+.000817076911346625*p-.00477271405408747*M+1.53380253221734)+p*(.000961250184130688*p-.00266257332283933*M+.48357088451265)+M*(-.000336197177618394*M+.484791561490776),t[k++]=107.268039397724+h*(219927104525741e-19*h-.000640992018297945*x+.000659397001245577*p+.000426105652938837*M-.176491792462875)+x*(-.000778269941513683*x+.00130872261408275*p+.000770482631801132*M-.151051492775562)+p*(.00126935368114843*p-.00265090189010898*M+.25802910206845)+M*(-.000318913117588328*M-.213742400323665),t[k++]=h*(-.000570115196973677*h-263409051004589e-19*x+.0020741088115012*p-.00288260236853442*M+.814272968359295)-20.810012546947+x*(-153496057440975e-19*x-.000132689043961446*p+.000560833691242812*M-.195152027534049)+p*(.00174418132927582*p-.00255243321439347*M+.116935020465145)+M*(-.000343531996510555*M+.24165260232407);return t.subarray(0,k)},r:function a3(t){for(var p,h,x,M=0,k=t.length;M<k;M+=4)p=t[M],h=t[M+1],x=t[M+2],t[M]=434.456-p-1.402*x,t[M+1]=119.541-p+.344*h+.714*x,t[M+2]=481.816-p-1.772*h;return t},U:function as(t){for(var p,h,x,M,k=0,I=0,N=t.length;I<N;I+=4)p=t[I],h=t[I+1],x=t[I+2],M=t[I+3],t[k++]=255+p*(-6747147073602441e-20*p+.0008379262121013727*h+.0002894718188643294*x+.003264231057537806*M-1.1185611867203937)+h*(26374107616089405e-21*h-8626949158638572e-20*x-.0002748769067499491*M-.02155688794978967)+x*(-3878099212869363e-20*x-.0003267808279485286*M+.0686742238595345)-M*(.0003361971776183937*M+.7430659151342254),t[k++]=255+p*(.00013596372813588848*p+.000924537132573585*h+.00010567359618683593*x+.0004791864687436512*M-.3109689587515875)+h*(-.00023545346108370344*h+.0002702845253534714*x+.0020200308977307156*M-.7488052167015494)+x*(6834815998235662e-20*x+.00015168452363460973*M-.09751927774728933)-M*(.0003189131175883281*M+.7364883807733168),t[k++]=255+p*(13598650411385307e-21*p+.00012423956175490851*h+.0004751985097583589*x-36729317476630422e-22*M-.05562186980264034)+h*(.00016141380598724676*h+.0009692239130725186*x+.0007782692450036253*M-.44015232367526463)+x*(5.068882914068769e-7*x+.0017778369011375071*M-.7591454649749609)-M*(.0003435319965105553*M+.7063770186160144);return t.subarray(0,k)},getData:function getData(p){var h=p.width,x=p.height,M=p.forceRGB,k=p.isSourcePDF;if(this.p>4)throw new t("Unsupported color mode");var I=this.Y(h,x,k);if(1===this.p&&M){for(var N=I.length,V=new Uint8ClampedArray(3*N),ee=0,te=0;te<N;te++){var re=I[te];V[ee++]=re,V[ee++]=re,V[ee++]=re}return V}if(3===this.p&&this.f)return this.z(I);if(4===this.p){if(this.f)return M?this.O(I):this.r(I);if(M)return this.U(I)}return I}},ak}();function Z(t,p){return t[p]<<8|t[p+1]}mm.JpegDecoder=p}(),mm.encodeImage=function(t,p,h,x){var M={t256:[p],t257:[h],t258:[8,8,8,8],t259:[1],t262:[2],t273:[1e3],t277:[4],t278:[h],t279:[p*h*4],t282:[[72,1]],t283:[[72,1]],t284:[1],t286:[[0,1]],t287:[[0,1]],t296:[1],t305:["Photopea (UTIF.js)"],t338:[1]};if(x)for(var k in x)M[k]=x[k];var I=new Uint8Array(mm.encode([M])),N=new Uint8Array(t),V=new Uint8Array(1e3+p*h*4);for(k=0;k<I.length;k++)V[k]=I[k];for(k=0;k<N.length;k++)V[1e3+k]=N[k];return V.buffer},mm.encode=function(t){var p=new Uint8Array(2e4),h=4,x=mm._binBE;p[0]=p[1]=77,x.writeUshort(p,2,42);var M=8;x.writeUint(p,h,M),h+=4;for(var k=0;k<t.length;k++){var I=mm._writeIFD(x,mm._types.basic,p,M,t[k]);M=I[1],k<t.length-1&&(0!=(3&M)&&(M+=4-(3&M)),x.writeUint(p,I[0],M))}return p.slice(0,M).buffer},mm.decode=function(t,p){null==p&&(p={parseMN:!0,debug:!1});var h=new Uint8Array(t),x=0,M=mm._binBE.readASCII(h,x,2);x+=2;var k="II"==M?mm._binLE:mm._binBE;k.readUshort(h,x),x+=2;var I=k.readUint(h,x);x+=4;for(var N=[];;){var V=k.readUshort(h,I),ee=k.readUshort(h,I+4);if(0!=V&&(ee<1||13<ee)){log("error in TIFF");break}if(mm._readIFD(k,h,I,N,0,p),0==(I=k.readUint(h,I+2+12*V)))break}return N},mm.decodeImage=function(t,p,h){if(!p.data){var x=new Uint8Array(t),M=mm._binBE.readASCII(x,0,2);if(null!=p.t256){p.isLE="II"==M,p.width=p.t256[0],p.height=p.t257[0];var k=p.t259?p.t259[0]:1,I=p.t266?p.t266[0]:1;p.t284&&2==p.t284[0]&&log("PlanarConfiguration 2 should not be used!"),7==k&&p.t258&&p.t258.length>3&&(p.t258=p.t258.slice(0,3));var N=p.t277?p.t277[0]:1,V=(p.t258?p.t258[0]:1)*N;1==k&&null!=p.t279&&p.t278&&32803==p.t262[0]&&(V=Math.round(8*p.t279[0]/(p.width*p.t278[0]))),p.t50885&&4==p.t50885[0]&&(V=3*p.t258[0]);var ee=8*Math.ceil(p.width*V/8),te=p.t273;(null==te||p.t322)&&(te=p.t324);var re=p.t279;1==k&&1==te.length&&(re=[p.height*(ee>>>3)]),(null==re||p.t322)&&(re=p.t325);var ne=new Uint8Array(p.height*(ee>>>3)),ie=0;if(null!=p.t322){for(var ae=p.t322[0],oe=p.t323[0],se=Math.floor((p.width+ae-1)/ae),ce=Math.floor((p.height+oe-1)/oe),ue=new Uint8Array(0|Math.ceil(ae*oe*V/8)),le=0;le<ce;le++)for(var pe=0;pe<se;pe++){var he=le*se+pe;ue.fill(0),mm.decode._decompress(p,h,x,te[he],re[he],k,ue,0,I,ae,oe),6==k?ne=ue:mm._copyTile(ue,0|Math.ceil(ae*V/8),oe,ne,0|Math.ceil(p.width*V/8),p.height,0|Math.ceil(pe*ae*V/8),le*oe)}ie=8*ne.length}else{if(null==te)return;var fe=p.t278?p.t278[0]:p.height;fe=Math.min(fe,p.height);for(he=0;he<te.length;he++)mm.decode._decompress(p,h,x,te[he],re[he],k,ne,0|Math.ceil(ie/8),I,p.width,fe),ie+=ee*fe;ie=Math.min(ie,8*ne.length)}p.data=new Uint8Array(ne.buffer,0,0|Math.ceil(ie/8))}}},mm.decode._decompress=function(t,p,h,x,M,k,I,N,V,ee,te){if(t.t271&&"Panasonic"==t.t271[0]&&t.t45&&6==t.t45[0]&&(k=34316),1==k)for(var re=0;re<M;re++)I[N+re]=h[x+re];else if(2==k)mm.decode._decodeG2(h,x,M,I,N,ee,V);else if(3==k)mm.decode._decodeG3(h,x,M,I,N,ee,V,!!t.t292&&1==(1&t.t292[0]));else if(4==k)mm.decode._decodeG4(h,x,M,I,N,ee,V);else if(5==k)mm.decode._decodeLZW(h,x,M,I,N,8);else if(6==k)mm.decode._decodeOldJPEG(t,h,x,M,I,N);else if(7==k||34892==k)mm.decode._decodeNewJPEG(t,h,x,M,I,N);else if(8==k||32946==k){var ne=new Uint8Array(h.buffer,x+2,M-6),ie=mm._inflateRaw(ne);N+ie.length<=I.length&&I.set(ie,N)}else 9==k?mm.decode._decodeVC5(h,x,M,I,N,t.t33422):32767==k?mm.decode._decodeARW(t,h,x,M,I,N):32773==k?mm.decode._decodePackBits(h,x,M,I,N):32809==k?mm.decode._decodeThunder(h,x,M,I,N):34316==k?mm.decode._decodePanasonic(t,h,x,M,I,N):34713==k?mm.decode._decodeNikon(t,p,h,x,M,I,N):34676==k?mm.decode._decodeLogLuv32(t,h,x,M,I,N):log("Unknown compression",k);var ae=t.t258?Math.min(32,t.t258[0]):1,oe=t.t277?t.t277[0]:1,se=ae*oe>>>3,ce=Math.ceil(ae*oe*ee/8);if(16==ae&&!t.isLE&&null==t.t33422)for(var ue=0;ue<te;ue++)for(var le=N+ue*ce,pe=1;pe<ce;pe+=2){var he=I[le+pe];I[le+pe]=I[le+pe-1],I[le+pe-1]=he}if(t.t317&&2==t.t317[0])for(ue=0;ue<te;ue++){var fe=N+ue*ce;if(16==ae)for(re=se;re<ce;re+=2){var de=(I[fe+re+1]<<8|I[fe+re])+(I[fe+re-se+1]<<8|I[fe+re-se]);I[fe+re]=255&de,I[fe+re+1]=de>>>8&255}else if(3==oe)for(re=3;re<ce;re+=3)I[fe+re]=I[fe+re]+I[fe+re-3]&255,I[fe+re+1]=I[fe+re+1]+I[fe+re-2]&255,I[fe+re+2]=I[fe+re+2]+I[fe+re-1]&255;else for(re=se;re<ce;re++)I[fe+re]=I[fe+re]+I[fe+re-se]&255}},mm.decode._decodePanasonic=function(t,p,h,x,M,k){var I,N,V,ee,te,re,ne,ie,ae=p.buffer,oe=t.t2[0],se=t.t3[0],ce=t.t10[0],ue=t.t45[0],le=0,pe=0,he=0,fe=0,de=6==ue?new Uint32Array(18):new Uint8Array(16),me=[0,0],ge=[0,0],ve=0,ye=new Uint8Array(16384),xe=new Uint16Array(M.buffer);function getDataRaw(t){if(0==he){var p=new Uint8Array(ae,h+pe+8184,8200),x=new Uint8Array(ae,h+pe,8184);ye.set(p),ye.set(x,p.length),pe+=16384}if(5!=ue)return(ye[fe=(he=he-t&131071)>>3^16368]|ye[fe+1]<<8)>>(7&he)&~(-1<<t);for(I=0;I<16;I++)de[I]=ye[he++],he&=16383}function getBufferDataRW6(t){return ye[he+15-t]}function resetPredNonzeros(){me[0]=0,me[1]=0,ge[0]=0,ge[1]=0}if(7==ue)throw ue;if(6==ue){var be=12==ce,_e=be?function readPageRw6_bps12(){de[0]=getBufferDataRW6(0)<<4|getBufferDataRW6(1)>>4,de[1]=4095&((15&getBufferDataRW6(1))<<8|getBufferDataRW6(2)),de[2]=getBufferDataRW6(3)>>6&3,de[3]=(63&getBufferDataRW6(3))<<2|getBufferDataRW6(4)>>6,de[4]=(63&getBufferDataRW6(4))<<2|getBufferDataRW6(5)>>6,de[5]=(63&getBufferDataRW6(5))<<2|getBufferDataRW6(6)>>6,de[6]=getBufferDataRW6(6)>>4&3,de[7]=(15&getBufferDataRW6(6))<<4|getBufferDataRW6(7)>>4,de[8]=(15&getBufferDataRW6(7))<<4|getBufferDataRW6(8)>>4,de[9]=(15&getBufferDataRW6(8))<<4|getBufferDataRW6(9)>>4,de[10]=getBufferDataRW6(9)>>2&3,de[11]=(3&getBufferDataRW6(9))<<6|getBufferDataRW6(10)>>2,de[12]=(3&getBufferDataRW6(10))<<6|getBufferDataRW6(11)>>2,de[13]=(3&getBufferDataRW6(11))<<6|getBufferDataRW6(12)>>2,de[14]=3&getBufferDataRW6(12),de[15]=getBufferDataRW6(13),de[16]=getBufferDataRW6(14),de[17]=getBufferDataRW6(15),he+=16,fe=0}:function readPageRW6(){de[0]=getBufferDataRW6(0)<<6|getBufferDataRW6(1)>>2,de[1]=16383&((3&getBufferDataRW6(1))<<12|getBufferDataRW6(2)<<4|getBufferDataRW6(3)>>4),de[2]=getBufferDataRW6(3)>>2&3,de[3]=(3&getBufferDataRW6(3))<<8|getBufferDataRW6(4),de[4]=getBufferDataRW6(5)<<2|getBufferDataRW6(6)>>6,de[5]=(63&getBufferDataRW6(6))<<4|getBufferDataRW6(7)>>4,de[6]=getBufferDataRW6(7)>>2&3,de[7]=(3&getBufferDataRW6(7))<<8|getBufferDataRW6(8),de[8]=getBufferDataRW6(9)<<2&1020|getBufferDataRW6(10)>>6,de[9]=1023&(getBufferDataRW6(10)<<4|getBufferDataRW6(11)>>4),de[10]=getBufferDataRW6(11)>>2&3,de[11]=(3&getBufferDataRW6(11))<<8|getBufferDataRW6(12),de[12]=1023&(getBufferDataRW6(13)<<2&1020|getBufferDataRW6(14)>>6),de[13]=1023&(getBufferDataRW6(14)<<4|getBufferDataRW6(15)>>4),he+=16,fe=0},Me=be?14:11,Ce=be?128:512,we=be?2048:8192,Se=be?16383:65535,Te=be?4095:16383,Ae=oe/Me,ke=16*Ae,De=be?18:14;for(re=0;re<se-15;re+=16){var Oe=Math.min(16,se-re),Ie=ke*Oe;for(ye=new Uint8Array(ae,h+le,Ie),he=0,le+=Ie,ie=0,ne=0;ie<Oe;ie++,ne=0){ve=(re+ie)*oe;for(var Le=0;Le<Ae;Le++)for(_e(),resetPredNonzeros(),V=0,te=0,I=0;I<Me;I++){if(ee=1&I,I%3==2){var Ee=fe<De?de[fe++]:0;3==Ee&&(Ee=4),te=Ce<<Ee,V=1<<Ee}var Re=fe<De?de[fe++]:0;me[ee]?(Re*=V,te<we&&ge[ee]>te&&(Re+=ge[ee]-te),ge[ee]=Re):(me[ee]=Re,Re?ge[ee]=Re:Re=ge[ee]),xe[ve+ne++]=Re-15<=Se?Re-15&Se:Re+2147483633>>31&Te}}}}else if(5==ue){var Be=12==ce?10:9;for(re=0;re<se;re++)for(ne=0;ne<oe;ne+=Be)getDataRaw(0),12==ce?(xe[ve++]=((15&de[1])<<8)+de[0],xe[ve++]=16*de[2]+(de[1]>>4),xe[ve++]=((15&de[4])<<8)+de[3],xe[ve++]=16*de[5]+(de[4]>>4),xe[ve++]=((15&de[7])<<8)+de[6],xe[ve++]=16*de[8]+(de[7]>>4),xe[ve++]=((15&de[10])<<8)+de[9],xe[ve++]=16*de[11]+(de[10]>>4),xe[ve++]=((15&de[13])<<8)+de[12],xe[ve++]=16*de[14]+(de[13]>>4)):14==ce&&(xe[ve++]=de[0]+((63&de[1])<<8),xe[ve++]=(de[1]>>6)+4*de[2]+((15&de[3])<<10),xe[ve++]=(de[3]>>4)+16*de[4]+((3&de[5])<<12),xe[ve++]=((252&de[5])>>2)+(de[6]<<6),xe[ve++]=de[7]+((63&de[8])<<8),xe[ve++]=(de[8]>>6)+4*de[9]+((15&de[10])<<10),xe[ve++]=(de[10]>>4)+16*de[11]+((3&de[12])<<12),xe[ve++]=((252&de[12])>>2)+(de[13]<<6),xe[ve++]=de[14]+((63&de[15])<<8))}else{if(4!=ue)throw ue;for(re=0;re<se;re++)for(ne=0;ne<oe;ne++)ee=1&(I=ne%14),0==I&&resetPredNonzeros(),I%3==2&&(V=4>>3-getDataRaw(2)),ge[ee]?0!=(N=getDataRaw(8))&&(me[ee]-=128<<V,(me[ee]<0||4==V)&&(me[ee]&=~(-1<<V)),me[ee]+=N<<V):(ge[ee]=getDataRaw(8),(ge[ee]||I>11)&&(me[ee]=ge[ee]<<4|getDataRaw(4))),xe[ve++]=me[1&ne]}},mm.decode._decodeVC5=function(){var t,p,h,x=[1,0,1,0,2,2,1,1,3,7,1,2,5,25,1,3,6,48,1,4,6,54,1,5,7,111,1,8,7,99,1,6,7,105,12,0,7,107,1,7,8,209,20,0,8,212,1,9,8,220,1,10,9,393,1,11,9,394,32,0,9,416,1,12,9,427,1,13,10,887,1,18,10,784,1,14,10,790,1,15,10,835,60,0,10,852,1,16,10,885,1,17,11,1571,1,19,11,1668,1,20,11,1669,100,0,11,1707,1,21,11,1772,1,22,12,3547,1,29,12,3164,1,24,12,3166,1,25,12,3140,1,23,12,3413,1,26,12,3537,1,27,12,3539,1,28,13,7093,1,35,13,6283,1,30,13,6331,1,31,13,6335,180,0,13,6824,1,32,13,7072,1,33,13,7077,320,0,13,7076,1,34,14,12565,1,36,14,12661,1,37,14,12669,1,38,14,13651,1,39,14,14184,1,40,15,28295,1,46,15,28371,1,47,15,25320,1,42,15,25336,1,43,15,25128,1,41,15,27300,1,44,15,28293,1,45,16,50259,1,48,16,50643,1,49,16,50675,1,50,16,56740,1,53,16,56584,1,51,16,56588,1,52,17,113483,1,61,17,113482,1,60,17,101285,1,55,17,101349,1,56,17,109205,1,57,17,109207,1,58,17,100516,1,54,17,113171,1,59,18,202568,1,62,18,202696,1,63,18,218408,1,64,18,218412,1,65,18,226340,1,66,18,226356,1,67,18,226358,1,68,19,402068,1,69,19,405138,1,70,19,405394,1,71,19,436818,1,72,19,436826,1,73,19,452714,1,75,19,452718,1,76,19,452682,1,74,20,804138,1,77,20,810279,1,78,20,810790,1,79,20,873638,1,80,20,873654,1,81,20,905366,1,82,20,905430,1,83,20,905438,1,84,21,1608278,1,85,21,1620557,1,86,21,1621582,1,87,21,1621583,1,88,21,1747310,1,89,21,1810734,1,90,21,1810735,1,91,21,1810863,1,92,21,1810879,1,93,22,3621725,1,99,22,3621757,1,100,22,3241112,1,94,22,3494556,1,95,22,3494557,1,96,22,3494622,1,97,22,3494623,1,98,23,6482227,1,102,23,6433117,1,101,23,6989117,1,103,23,6989119,1,105,23,6989118,1,104,23,7243449,1,106,23,7243512,1,107,24,13978233,1,111,24,12964453,1,109,24,12866232,1,108,24,14486897,1,113,24,13978232,1,110,24,14486896,1,112,24,14487026,1,114,24,14487027,1,115,25,25732598,1,225,25,25732597,1,189,25,25732596,1,188,25,25732595,1,203,25,25732594,1,202,25,25732593,1,197,25,25732592,1,207,25,25732591,1,169,25,25732590,1,223,25,25732589,1,159,25,25732522,1,235,25,25732579,1,152,25,25732575,1,192,25,25732489,1,179,25,25732573,1,201,25,25732472,1,172,25,25732576,1,149,25,25732488,1,178,25,25732566,1,120,25,25732571,1,219,25,25732577,1,150,25,25732487,1,127,25,25732506,1,211,25,25732548,1,125,25,25732588,1,158,25,25732486,1,247,25,25732467,1,238,25,25732508,1,163,25,25732552,1,228,25,25732603,1,183,25,25732513,1,217,25,25732587,1,168,25,25732520,1,122,25,25732484,1,128,25,25732562,1,249,25,25732505,1,187,25,25732504,1,186,25,25732483,1,136,25,25928905,1,181,25,25732560,1,255,25,25732500,1,230,25,25732482,1,135,25,25732555,1,233,25,25732568,1,222,25,25732583,1,145,25,25732481,1,134,25,25732586,1,167,25,25732521,1,248,25,25732518,1,209,25,25732480,1,243,25,25732512,1,216,25,25732509,1,164,25,25732547,1,140,25,25732479,1,157,25,25732544,1,239,25,25732574,1,191,25,25732564,1,251,25,25732478,1,156,25,25732546,1,139,25,25732498,1,242,25,25732557,1,133,25,25732477,1,162,25,25732515,1,213,25,25732584,1,165,25,25732514,1,212,25,25732476,1,227,25,25732494,1,198,25,25732531,1,236,25,25732530,1,234,25,25732529,1,117,25,25732528,1,215,25,25732527,1,124,25,25732526,1,123,25,25732525,1,254,25,25732524,1,253,25,25732523,1,148,25,25732570,1,218,25,25732580,1,146,25,25732581,1,147,25,25732569,1,224,25,25732533,1,143,25,25732540,1,184,25,25732541,1,185,25,25732585,1,166,25,25732556,1,132,25,25732485,1,129,25,25732563,1,250,25,25732578,1,151,25,25732501,1,119,25,25732502,1,193,25,25732536,1,176,25,25732496,1,245,25,25732553,1,229,25,25732516,1,206,25,25732582,1,144,25,25732517,1,208,25,25732558,1,137,25,25732543,1,241,25,25732466,1,237,25,25732507,1,190,25,25732542,1,240,25,25732551,1,131,25,25732554,1,232,25,25732565,1,252,25,25732475,1,171,25,25732493,1,205,25,25732492,1,204,25,25732491,1,118,25,25732490,1,214,25,25928904,1,180,25,25732549,1,126,25,25732602,1,182,25,25732539,1,175,25,25732545,1,141,25,25732559,1,138,25,25732537,1,177,25,25732534,1,153,25,25732503,1,194,25,25732606,1,160,25,25732567,1,121,25,25732538,1,174,25,25732497,1,246,25,25732550,1,130,25,25732572,1,200,25,25732474,1,170,25,25732511,1,221,25,25732601,1,196,25,25732532,1,142,25,25732519,1,210,25,25732495,1,199,25,25732605,1,155,25,25732535,1,154,25,25732499,1,244,25,25732510,1,220,25,25732600,1,195,25,25732607,1,161,25,25732604,1,231,25,25732473,1,173,25,25732599,1,226,26,51465122,1,116,26,51465123,0,1],M=[3,3,3,3,2,2,2,1,1,1];function d(t){var p=t[1],h=t[0][p>>>3]>>>7-(7&p)&1;return t[1]++,h}function ag(p,h){if(null==t){t={};for(var M=0;M<x.length;M+=4)t[x[M+1]]=x.slice(M,M+4)}for(var k=d(p),I=t[k];null==I;)k=k<<1|d(p),I=t[k];var N=I[3];0!=N&&(N=0==d(p)?N:-N),h[0]=I[2],h[1]=N}function m(t,p){for(var h=0;h<p;h++)1==(1&t)&&t++,t>>>=1;return t}function A(t,p){return t>>p}function O(t,p,h,x,M,k){p[h]=A(A(11*t[M]-4*t[M+k]+t[M+k+k]+4,3)+t[x],1),p[h+k]=A(A(5*t[M]+4*t[M+k]-t[M+k+k]+4,3)-t[x],1)}function J(t,p,h,x,M,k){var I=t[M-k]-t[M+k],N=t[M],V=t[x];p[h]=A(A(I+4,3)+N+V,1),p[h+k]=A(A(4-I,3)+N-V,1)}function y(t,p,h,x,M,k){p[h]=A(A(5*t[M]+4*t[M-k]-t[M-k-k]+4,3)+t[x],1),p[h+k]=A(A(11*t[M]-4*t[M-k]+t[M-k-k]+4,3)-t[x],1)}function q(t){return t=h[t=t<0?0:t>4095?4095:t]>>>2}return function av(t,x,k,I,N,V){I=new Uint16Array(I.buffer),Date.now();var ee,te,re,ne,ie,ae,oe,se,ce=mm._binBE,ue=x+k;x+=4;for(var le=1==V[0];x<ue;){var pe=ce.readShort(t,x),he=ce.readUshort(t,x+2);if(x+=4,12==pe)xe=he;else if(20==pe)ee=he;else if(21==pe)te=he;else if(48==pe)re=he;else if(53==pe)ne=he;else if(35==pe);else if(62==pe)ie=he;else if(101==pe);else if(109==pe)ae=he;else if(84==pe);else if(106==pe);else if(107==pe);else if(108==pe);else if(102==pe);else if(104==pe)Ve=he;else if(105==pe);else{var fe=pe<0?-pe:pe,de=65280&fe,me=0;if(24576&fe&&(8192&fe?(me=65535&he,me+=(255&fe)<<16):me=65535&he),24576==(24576&fe)){if(null==oe){oe=[];for(var ge=0;ge<4;ge++)oe[ge]=new Int16Array((ee>>>1)*(te>>>1));se=new Int16Array((ee>>>1)*(te>>>1)),p=new Int16Array(1024);for(ge=0;ge<1024;ge++){var ve=ge-512,ye=Math.abs(ve),xe=Math.floor(768*ye*ye*ye/16581375)+ye;p[ge]=Math.sign(ve)*xe}h=new Uint16Array(4096);for(ge=0;ge<4096;ge++){var be=ge,_e=65535*(Math.pow(113,be/4095)-1)/112;h[ge]=Math.min(_e,65535)}}var Me=oe[ie],Ce=m(ee,1+M[re]),we=m(te,1+M[re]);if(0==re)for(var Se=0;Se<we;Se++)for(var Te=0;Te<Ce;Te++){var Ae=x+2*(Se*Ce+Te);Me[Se*(ee>>>1)+Te]=t[Ae]<<8|t[Ae+1]}else{var ke=[t,8*x],De=[],Oe=0,Ie=Ce*we,Le=[0,0],Ee=0;for(he=0;Oe<Ie;)for(ag(ke,Le),Ee=Le[0],he=Le[1];Ee>0;)De[Oe++]=he,Ee--;var Re=(re-1)%3,Be=1!=Re?Ce:0,Ne=0!=Re?we:0;for(Se=0;Se<we;Se++){var Ge=(Se+Ne)*(ee>>>1)+Be,Fe=Se*Ce;for(Te=0;Te<Ce;Te++)Me[Ge+Te]=p[De[Fe+Te]+512]*ne}if(2==Re){var Ve=ee>>>1,Ue=2*Ce,je=2*we;for(Se=0;Se<we;Se++)for(Te=0;Te<Ue;Te++){ge=2*Se*Ve+Te;var We=we*Ve+(He=Se*Ve+Te);0==Se?O(Me,se,ge,We,He,Ve):Se==we-1?y(Me,se,ge,We,He,Ve):J(Me,se,ge,We,He,Ve)}var ze=Me;Me=se,se=ze;for(Se=0;Se<je;Se++)for(Te=0;Te<Ce;Te++){var He;ge=Se*Ve+2*Te,We=Ce+(He=Se*Ve+Te);0==Te?O(Me,se,ge,We,He,1):Te==Ce-1?y(Me,se,ge,We,He,1):J(Me,se,ge,We,He,1)}ze=Me;Me=se,se=ze;for(var $e=[],Ye=2-~~((re-1)/3),Ke=0;Ke<3;Ke++)$e[Ke]=ae>>14-2*Ke&3;var Xe=$e[Ye];if(0!=Xe)for(Se=0;Se<je;Se++)for(Te=0;Te<Ue;Te++){Me[ge=Se*Ve+Te]=Me[ge]<<Xe}}}if(9==re&&3==ie){var qe=oe[0],Ze=oe[1],Je=oe[2],Qe=oe[3];for(Se=0;Se<te;Se+=2)for(Te=0;Te<ee;Te+=2){var et=Se*ee+Te,tt=qe[Ae=(Se>>>1)*(ee>>>1)+(Te>>>1)],rt=Ze[Ae]-2048,nt=Je[Ae]-2048,it=Qe[Ae]-2048,ot=(rt<<1)+tt,st=(nt<<1)+tt,ct=tt+it,ut=tt-it;le?(I[et]=q(ct),I[et+1]=q(st),I[et+ee]=q(ot),I[et+ee+1]=q(ut)):(I[et]=q(ot),I[et+1]=q(ct),I[et+ee]=q(ut),I[et+ee+1]=q(st))}}x+=4*me}else if(16388==fe)x+=4*me;else if(8192!=de&&8448!=de&&9216!=de)throw fe.toString(16)}}}}(),mm.decode._decodeLogLuv32=function(t,p,h,x,M,k){for(var I=t.width,N=4*I,V=0,ee=new Uint8Array(N);V<x;){for(var te=0;te<N;){var re=p[h+V];if(V++,re<128){for(var ne=0;ne<re;ne++)ee[te+ne]=p[h+V+ne];te+=re,V+=re}else{re-=126;for(ne=0;ne<re;ne++)ee[te+ne]=p[h+V];te+=re,V++}}for(var ie=0;ie<I;ie++)M[k+0]=ee[ie],M[k+1]=ee[ie+I],M[k+2]=ee[ie+2*I],M[k+4]=ee[ie+3*I],k+=6}},mm.decode._ljpeg_diff=function(t,p,h){var x,M,k=mm.decode._getbithuff;return x=k(t,p,h[0],h),0==((M=k(t,p,x,0))&1<<x-1)&&(M-=(1<<x)-1),M},mm.decode._decodeARW=function(t,p,h,x,M,k){var I=t.t256[0],N=t.t257[0],V=t.t258[0],ee=t.isLE?mm._binLE:mm._binBE;if(I*N==x||I*N*1.5==x)if(I*N*1.5!=x){var te,re,ne,ie,ae,oe,se,ce,ue=new Uint16Array(16),le=new Uint8Array(I+1);for(ye=0;ye<N;ye++){for(var pe=0;pe<I;pe++)le[pe]=p[h++];for(ce=0,ve=0;ve<I-30;ce+=16){for(re=2047&(te=ee.readUint(le,ce)),ne=2047&te>>>11,ie=15&te>>>22,ae=15&te>>>26,oe=0;oe<4&&128<<oe<=re-ne;oe++);for(se=30,he=0;he<16;he++)he==ie?ue[he]=re:he==ae?ue[he]=ne:(ue[he]=((ee.readUshort(le,ce+(se>>3))>>>(7&se)&127)<<oe)+ne,ue[he]>2047&&(ue[he]=2047),se+=7);for(he=0;he<16;he++,ve+=2){Te=ue[he]<<1;mm.decode._putsF(M,(ye*I+ve)*V,Te<<16-V)}ve-=1&ve?1:31}}}else for(var he=0;he<x;he+=3){var fe=p[h+he+0],de=p[h+he+1],me=p[h+he+2];M[k+he]=de<<4|fe>>>4,M[k+he+1]=fe<<4|me>>>4,M[k+he+2]=me<<4|de>>>4}else{N+=8;var ge,ve,ye,xe=[h,0,0,0],be=new Uint16Array(32770),_e=[3857,3856,3599,3342,3085,2828,2571,2314,2057,1800,1543,1286,1029,772,771,768,514,513],Me=0,Ce=mm.decode._ljpeg_diff;for(be[0]=15,ge=he=0;he<18;he++)for(var we=32768>>>(_e[he]>>>8),Se=0;Se<we;Se++)be[++ge]=_e[he];for(ve=I;ve--;)for(ye=0;ye<N+1;ye+=2)if(ye==N&&(ye=1),Me+=Ce(p,xe,be),ye<N){var Te=4095&Me;mm.decode._putsF(M,(ye*I+ve)*V,Te<<16-V)}}},mm.decode._decodeNikon=function(t,p,h,x,M,k,I){var N=[[0,0,1,5,1,1,1,1,1,1,2,0,0,0,0,0,0,5,4,3,6,2,7,1,0,8,9,11,10,12],[0,0,1,5,1,1,1,1,1,1,2,0,0,0,0,0,0,57,90,56,39,22,5,4,3,2,1,0,11,12,12],[0,0,1,4,2,3,1,2,0,0,0,0,0,0,0,0,0,5,4,6,3,7,2,8,1,9,0,10,11,12],[0,0,1,4,3,1,1,1,1,1,2,0,0,0,0,0,0,5,6,4,7,8,3,9,2,1,0,10,11,12,13,14],[0,0,1,5,1,1,1,1,1,1,1,2,0,0,0,0,0,8,92,75,58,41,7,6,5,4,3,2,1,0,13,14],[0,0,1,4,2,2,3,1,2,0,0,0,0,0,0,0,0,7,6,8,5,9,4,10,3,11,12,2,0,1,13,14]],V=t.t256[0],ee=t.t257[0],te=t.t258[0],re=0,ne=0,ie=mm.decode._make_decoder,ae=mm.decode._getbithuff,oe=p[0].exifIFD.makerNote,se=oe.t150?oe.t150:oe.t140,ce=0,ue=se[ce++],le=se[ce++];73!=ue&&88!=le||(ce+=2110),70==ue&&(re=2),14==te&&(re+=3);for(var pe=[[0,0],[0,0]],he=t.isLE?mm._binLE:mm._binBE,fe=0;fe<2;fe++)for(var de=0;de<2;de++)pe[fe][de]=he.readShort(se,ce),ce+=2;var me,ge,ve,ye,xe,be=1<<te&32767,_e=0,Me=he.readShort(se,ce);ce+=2,Me>1&&(_e=Math.floor(be/(Me-1))),68==ue&&32==le&&_e>0&&(ne=he.readShort(se,562));var Ce=[0,0],we=ie(N[re]),Se=[x,0,0,0];for(me=0;me<ee;me++)for(ne&&me==ne&&(we=ie(N[re+1])),ge=0;ge<V;ge++){fe=ae(h,Se,we[0],we),0==((xe=1+(ae(h,Se,(ve=15&fe)-(ye=fe>>>4),0)<<1)<<ye>>>1)&1<<ve-1)&&(xe-=(1<<ve)-(0==ye?1:0)),ge<2?Ce[ge]=pe[1&me][ge]+=xe:Ce[1&ge]+=xe;var Te=Math.min(Math.max(Ce[1&ge],0),(1<<te)-1),Ae=(me*V+ge)*te;mm.decode._putsF(k,Ae,Te<<16-te)}},mm.decode._putsF=function(t,p,h){h<<=8-(7&p);var x=p>>>3;t[x]|=h>>>16,t[x+1]|=h>>>8,t[x+2]|=h},mm.decode._getbithuff=function(t,p,h,x){var M;mm.decode._get_byte;var k=p[0],I=p[1],N=p[2],V=p[3];if(0==h||N<0)return 0;for(;!V&&N<h&&-1!=(M=t[k++])&&!(V=0);)I=(I<<8)+M,N+=8;if(M=I<<32-N>>>32-h,x?(N-=x[M+1]>>>8,M=255&x[M+1]):N-=h,N<0)throw"e";return p[0]=k,p[1]=I,p[2]=N,p[3]=V,M},mm.decode._make_decoder=function(t){var p,h,x,M,k,I=[];for(p=16;0!=p&&!t[p];p--);var N=17;for(I[0]=p,x=h=1;h<=p;h++)for(M=0;M<t[h];M++,++N)for(k=0;k<1<<p-h;k++)x<=1<<p&&(I[x++]=h<<8|t[N]);return I},mm.decode._decodeNewJPEG=function(t,p,h,x,M,k){x=Math.min(x,p.length-h);var I=t.t347,N=I?I.length:0,V=new Uint8Array(N+x);if(I){for(var ee=0,te=0;te<N-1&&(255!=I[te]||217!=I[te+1]);te++)V[ee++]=I[te];var re=p[h],ne=p[h+1];255==re&&216==ne||(V[ee++]=re,V[ee++]=ne);for(te=2;te<x;te++)V[ee++]=p[h+te]}else for(te=0;te<x;te++)V[te]=p[h+te];if(32803==t.t262[0]||7==t.t259[0]&&34892==t.t262[0]){var ie=t.t258[0],ae=mm.LosslessJpegDecode(V),oe=ae.length;if(16==ie)if(t.isLE)for(te=0;te<oe;te++)M[k+(te<<1)]=255&ae[te],M[k+(te<<1)+1]=ae[te]>>>8;else for(te=0;te<oe;te++)M[k+(te<<1)]=ae[te]>>>8,M[k+(te<<1)+1]=255&ae[te];else if(14==ie||12==ie||10==ie){var se=16-ie;for(te=0;te<oe;te++)mm.decode._putsF(M,te*ie,ae[te]<<se)}else{if(8!=ie)throw new Error("unsupported bit depth "+ie);for(te=0;te<oe;te++)M[k+te]=ae[te]}}else{var ce=new mm.JpegDecoder;ce.parse(V);var ue=ce.getData({width:ce.width,height:ce.height,forceRGB:!0,isSourcePDF:!1});for(te=0;te<ue.length;te++)M[k+te]=ue[te]}6==t.t262[0]&&(t.t262[0]=2)},mm.decode._decodeOldJPEGInit=function(t,p,h,x){var M,k,I,N,V,ee=216,te=0,re=0,ne=!1,ie=t.t513,ae=ie?ie[0]:0,oe=t.t514,se=oe?oe[0]:0,ce=t.t324||t.t273||ie,ue=t.t530,le=0,pe=0,he=t.t277?t.t277[0]:1,fe=t.t515;if(ce&&(re=ce[0],ne=ce.length>1),!ne){if(255==p[h]&&p[h+1]==ee)return{jpegOffset:h};if(null!=ie&&(255==p[h+ae]&&p[h+ae+1]==ee?te=h+ae:log("JPEGInterchangeFormat does not point to SOI"),null==oe?log("JPEGInterchangeFormatLength field is missing"):(ae>=re||ae+se<=re)&&log("JPEGInterchangeFormatLength field value is invalid"),null!=te))return{jpegOffset:te}}if(null!=ue&&(le=ue[0],pe=ue[1]),null!=ie&&null!=oe)if(se>=2&&ae+se<=re){for(M=255==p[h+ae+se-2]&&p[h+ae+se-1]==ee?new Uint8Array(se-2):new Uint8Array(se),I=0;I<M.length;I++)M[I]=p[h+ae+I];log("Incorrect JPEG interchange format: using JPEGInterchangeFormat offset to derive tables")}else log("JPEGInterchangeFormat+JPEGInterchangeFormatLength > offset to first strip or tile");if(null==M){var de=0,me=[];me[de++]=255,me[de++]=ee;var ge=t.t519;if(null==ge)throw new Error("JPEGQTables tag is missing");for(I=0;I<ge.length;I++)for(me[de++]=255,me[de++]=219,me[de++]=0,me[de++]=67,me[de++]=I,N=0;N<64;N++)me[de++]=p[h+ge[I]+N];for(V=0;V<2;V++){var ve=t[0==V?"t520":"t521"];if(null==ve)throw new Error((0==V?"JPEGDCTables":"JPEGACTables")+" tag is missing");for(I=0;I<ve.length;I++){me[de++]=255,me[de++]=196;var ye=19;for(N=0;N<16;N++)ye+=p[h+ve[I]+N];for(me[de++]=ye>>>8,me[de++]=255&ye,me[de++]=I|V<<4,N=0;N<16;N++)me[de++]=p[h+ve[I]+N];for(N=0;N<ye;N++)me[de++]=p[h+ve[I]+16+N]}}if(me[de++]=255,me[de++]=192,me[de++]=0,me[de++]=8+3*he,me[de++]=8,me[de++]=t.height>>>8&255,me[de++]=255&t.height,me[de++]=t.width>>>8&255,me[de++]=255&t.width,me[de++]=he,1==he)me[de++]=1,me[de++]=17,me[de++]=0;else for(I=0;I<3;I++)me[de++]=I+1,me[de++]=0!=I?17:(15&le)<<4|15&pe,me[de++]=I;null!=fe&&0!=fe[0]&&(me[de++]=255,me[de++]=221,me[de++]=0,me[de++]=4,me[de++]=fe[0]>>>8&255,me[de++]=255&fe[0]),M=new Uint8Array(me)}var xe=-1;for(I=0;I<M.length-1;){if(255==M[I]&&192==M[I+1]){xe=I;break}I++}if(-1==xe){var be=new Uint8Array(M.length+10+3*he);be.set(M);var _e=M.length;if(xe=M.length,(M=be)[_e++]=255,M[_e++]=192,M[_e++]=0,M[_e++]=8+3*he,M[_e++]=8,M[_e++]=t.height>>>8&255,M[_e++]=255&t.height,M[_e++]=t.width>>>8&255,M[_e++]=255&t.width,M[_e++]=he,1==he)M[_e++]=1,M[_e++]=17,M[_e++]=0;else for(I=0;I<3;I++)M[_e++]=I+1,M[_e++]=0!=I?17:(15&le)<<4|15&pe,M[_e++]=I}if(255==p[re]&&218==p[re+1]){var Me=p[re+2]<<8|p[re+3];for((k=new Uint8Array(Me+2))[0]=p[re],k[1]=p[re+1],k[2]=p[re+2],k[3]=p[re+3],I=0;I<Me-2;I++)k[I+4]=p[re+I+4]}else{var Ce=0;if((k=new Uint8Array(8+2*he))[Ce++]=255,k[Ce++]=218,k[Ce++]=0,k[Ce++]=6+2*he,k[Ce++]=he,1==he)k[Ce++]=1,k[Ce++]=0;else for(I=0;I<3;I++)k[Ce++]=I+1,k[Ce++]=I<<4|I;k[Ce++]=0,k[Ce++]=63,k[Ce++]=0}return{jpegOffset:h,tables:M,sosMarker:k,sofPosition:xe}},mm.decode._decodeOldJPEG=function(t,p,h,x,M,k){var I,N,V,ee,te=mm.decode._decodeOldJPEGInit(t,p,h,x);if(null!=te.jpegOffset)for(I=h+x-te.jpegOffset,V=new Uint8Array(I),ie=0;ie<I;ie++)V[ie]=p[te.jpegOffset+ie];else{for(N=te.tables.length,(V=new Uint8Array(N+te.sosMarker.length+x+2)).set(te.tables),ee=N,V[te.sofPosition+5]=t.height>>>8&255,V[te.sofPosition+6]=255&t.height,V[te.sofPosition+7]=t.width>>>8&255,V[te.sofPosition+8]=255&t.width,255==p[h]&&p[h+1]==SOS||(V.set(te.sosMarker,ee),ee+=sosMarker.length),ie=0;ie<x;ie++)V[ee++]=p[h+ie];V[ee++]=255,V[ee++]=EOI}var re=new mm.JpegDecoder;re.parse(V);for(var ne=re.getData({width:re.width,height:re.height,forceRGB:!0,isSourcePDF:!1}),ie=0;ie<ne.length;ie++)M[k+ie]=ne[ie];t.t262&&6==t.t262[0]&&(t.t262[0]=2)},mm.decode._decodePackBits=function(t,p,h,x,M){for(var k=new Int8Array(t.buffer),I=new Int8Array(x.buffer),N=p+h;p<N;){var V=k[p];if(p++,V>=0&&V<128)for(var ee=0;ee<V+1;ee++)I[M]=k[p],M++,p++;if(V>=-127&&V<0){for(ee=0;ee<1-V;ee++)I[M]=k[p],M++;p++}}return M},mm.decode._decodeThunder=function(t,p,h,x,M){for(var k=[0,1,0,-1],I=[0,1,2,3,0,-3,-2,-1],N=p+h,V=2*M,ee=0;p<N;){var te=t[p],re=te>>>6,ne=63&te;if(p++,3==re&&(ee=15&ne,x[V>>>1]|=ee<<4*(1-V&1),V++),0==re)for(var ie=0;ie<ne;ie++)x[V>>>1]|=ee<<4*(1-V&1),V++;if(2==re)for(ie=0;ie<2;ie++){4!=(ae=ne>>>3*(1-ie)&7)&&(ee+=I[ae],x[V>>>1]|=ee<<4*(1-V&1),V++)}if(1==re)for(ie=0;ie<3;ie++){var ae;2!=(ae=ne>>>2*(2-ie)&3)&&(ee+=k[ae],x[V>>>1]|=ee<<4*(1-V&1),V++)}}},mm.decode._dmap={1:0,"011":1,"000011":2,"0000011":3,"010":-1,"000010":-2,"0000010":-3},mm.decode._lens=function(){var t=function addKeys(t,p,h,x){for(var M=0;M<p.length;M++)t[p[M]]=h+M*x},p="00110101,000111,0111,1000,1011,1100,1110,1111,10011,10100,00111,01000,001000,000011,110100,110101,101010,101011,0100111,0001100,0001000,0010111,0000011,0000100,0101000,0101011,0010011,0100100,0011000,00000010,00000011,00011010,00011011,00010010,00010011,00010100,00010101,00010110,00010111,00101000,00101001,00101010,00101011,00101100,00101101,00000100,00000101,00001010,00001011,01010010,01010011,01010100,01010101,00100100,00100101,01011000,01011001,01011010,01011011,01001010,01001011,00110010,00110011,00110100",h="0000110111,010,11,10,011,0011,0010,00011,000101,000100,0000100,0000101,0000111,00000100,00000111,000011000,0000010111,0000011000,0000001000,00001100111,00001101000,00001101100,00000110111,00000101000,00000010111,00000011000,000011001010,000011001011,000011001100,000011001101,000001101000,000001101001,000001101010,000001101011,000011010010,000011010011,000011010100,000011010101,000011010110,000011010111,000001101100,000001101101,000011011010,000011011011,000001010100,000001010101,000001010110,000001010111,000001100100,000001100101,000001010010,000001010011,000000100100,000000110111,000000111000,000000100111,000000101000,000001011000,000001011001,000000101011,000000101100,000001011010,000001100110,000001100111",x="11011,10010,010111,0110111,00110110,00110111,01100100,01100101,01101000,01100111,011001100,011001101,011010010,011010011,011010100,011010101,011010110,011010111,011011000,011011001,011011010,011011011,010011000,010011001,010011010,011000,010011011",M="0000001111,000011001000,000011001001,000001011011,000000110011,000000110100,000000110101,0000001101100,0000001101101,0000001001010,0000001001011,0000001001100,0000001001101,0000001110010,0000001110011,0000001110100,0000001110101,0000001110110,0000001110111,0000001010010,0000001010011,0000001010100,0000001010101,0000001011010,0000001011011,0000001100100,0000001100101",k="00000001000,00000001100,00000001101,000000010010,000000010011,000000010100,000000010101,000000010110,000000010111,000000011100,000000011101,000000011110,000000011111";p=p.split(","),h=h.split(","),x=x.split(","),M=M.split(","),k=k.split(",");var I={},N={};return t(I,p,0,1),t(I,x,64,64),t(I,k,1792,64),t(N,h,0,1),t(N,M,64,64),t(N,k,1792,64),[I,N]}(),mm.decode._decodeG4=function(t,p,h,x,M,k,I){for(var N=mm.decode,V=p<<3,ee=0,te="",re=[],ne=[],ie=0;ie<k;ie++)ne.push(0);ne=N._makeDiff(ne);for(var ae=0,oe=0,se=0,ce=0,ue=0,le=0,pe="",he=0,fe=8*Math.ceil(k/8);V>>>3<p+h;){se=N._findDiff(ne,ae+(0==ae?0:1),1-ue),ce=N._findDiff(ne,se,ue);var de=0;if(1==I&&(de=t[V>>>3]>>>7-(7&V)&1),2==I&&(de=t[V>>>3]>>>(7&V)&1),V++,te+=de,"H"==pe){if(null!=N._lens[ue][te]){var me=N._lens[ue][te];te="",ee+=me,me<64&&(N._addNtimes(re,ee,ue),ae+=ee,ue=1-ue,ee=0,0==--he&&(pe=""))}}else"0001"==te&&(te="",N._addNtimes(re,ce-ae,ue),ae=ce),"001"==te&&(te="",pe="H",he=2),null!=N._dmap[te]&&(oe=se+N._dmap[te],N._addNtimes(re,oe-ae,ue),ae=oe,te="",ue=1-ue);re.length==k&&""==pe&&(N._writeBits(re,x,8*M+le*fe),ue=0,le++,ae=0,ne=N._makeDiff(re),re=[])}},mm.decode._findDiff=function(t,p,h){for(var x=0;x<t.length;x+=2)if(t[x]>=p&&t[x+1]==h)return t[x]},mm.decode._makeDiff=function(t){var p=[];1==t[0]&&p.push(0,1);for(var h=1;h<t.length;h++)t[h-1]!=t[h]&&p.push(h,t[h]);return p.push(t.length,0,t.length,1),p},mm.decode._decodeG2=function(t,p,h,x,M,k,I){for(var N=mm.decode,V=p<<3,ee=0,te="",re=[],ne=0,ie=0,ae=8*Math.ceil(k/8);V>>>3<p+h;){var oe=0;1==I&&(oe=t[V>>>3]>>>7-(7&V)&1),2==I&&(oe=t[V>>>3]>>>(7&V)&1),V++,te+=oe,null!=(ee=N._lens[ne][te])&&(N._addNtimes(re,ee,ne),te="",ee<64&&(ne=1-ne),re.length==k&&(N._writeBits(re,x,8*M+ie*ae),re=[],ie++,ne=0,0!=(7&V)&&(V+=8-(7&V)),ee>=64&&(V+=8)))}},mm.decode._decodeG3=function(t,p,h,x,M,k,I,N){for(var V=mm.decode,ee=p<<3,te=0,re="",ne=[],ie=[],ae=0;ae<k;ae++)ne.push(0);for(var oe=0,se=0,ce=0,ue=0,le=0,pe=-1,he="",fe=0,de=!0,me=8*Math.ceil(k/8);ee>>>3<p+h;){ce=V._findDiff(ie,oe+(0==oe?0:1),1-le),ue=V._findDiff(ie,ce,le);var ge=0;if(1==I&&(ge=t[ee>>>3]>>>7-(7&ee)&1),2==I&&(ge=t[ee>>>3]>>>(7&ee)&1),ee++,re+=ge,de){if(null!=V._lens[le][re]){var ve=V._lens[le][re];re="",te+=ve,ve<64&&(V._addNtimes(ne,te,le),le=1-le,te=0)}}else if("H"==he){if(null!=V._lens[le][re]){ve=V._lens[le][re];re="",te+=ve,ve<64&&(V._addNtimes(ne,te,le),oe+=te,le=1-le,te=0,0==--fe&&(he=""))}}else"0001"==re&&(re="",V._addNtimes(ne,ue-oe,le),oe=ue),"001"==re&&(re="",he="H",fe=2),null!=V._dmap[re]&&(se=ce+V._dmap[re],V._addNtimes(ne,se-oe,le),oe=se,re="",le=1-le);re.endsWith("000000000001")&&(pe>=0&&V._writeBits(ne,x,8*M+pe*me),N&&(1==I&&(de=1==(t[ee>>>3]>>>7-(7&ee)&1)),2==I&&(de=1==(t[ee>>>3]>>>(7&ee)&1)),ee++),re="",le=0,pe++,oe=0,ie=V._makeDiff(ne),ne=[])}ne.length==k&&V._writeBits(ne,x,8*M+pe*me)},mm.decode._addNtimes=function(t,p,h){for(var x=0;x<p;x++)t.push(h)},mm.decode._writeBits=function(t,p,h){for(var x=0;x<t.length;x++)p[h+x>>>3]|=t[x]<<7-(h+x&7)},mm.decode._decodeLZW=mm.decode._decodeLZW=function(){var t,p,h,x,M=0,k=0,I=0,N=0,V=function O(){var h=t>>>3,x=(p[h]<<16|p[h+1]<<8|p[h+2])>>>24-(7&t)-k&(1<<k)-1;return t+=k,x},ee=new Uint32Array(16384),te=0,re=function i(t){k=t+1,M=N+1},ne=function D(t){for(var p=t<<2,M=ee[p+2],k=x+M-1;65535!=p;)h[k--]=ee[p],p=ee[p+1];x+=M},ie=function L(t,p){var h=M<<2,x=t<<2;ee[h]=ee[3+(p<<2)],ee[h+1]=x,ee[h+2]=ee[x+2]+1,ee[h+3]=ee[x+3],++M+1==1<<k&&12!=k&&k++};return function T(k,ae,oe,se,ce,ue){t=ae<<3,p=k,h=se,x=ce;var le=ae+oe<<3,pe=0,he=0;for(!function m(t){if(t!=te){te=t,N=1+(I=1<<t);for(var p=0;p<N+1;p++)ee[4*p]=ee[4*p+3]=p,ee[4*p+1]=65535,ee[4*p+2]=1}}(ue),re(ue);t<le&&(pe=V())!=N;){if(pe==I){if(re(ue),(pe=V())==N)break;ne(pe)}else pe<M?(ne(pe),ie(he,pe)):(ie(he,he),ne(M-1));he=pe}return x}}(),mm.tags={},mm._types=function(){var t=new Array(250);t.fill(0);return{basic:{main:t=t.concat([0,0,0,0,4,3,3,3,3,3,0,0,3,0,0,0,3,0,0,2,2,2,2,4,3,0,0,3,4,4,3,3,5,5,3,2,5,5,0,0,0,0,4,4,0,0,3,3,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,2,2,3,5,5,3,0,3,3,4,4,4,3,4,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),rest:{33432:2,33434:5,33437:5,34665:4,34850:3,34853:4,34855:3,34864:3,34866:4,36864:7,36867:2,36868:2,37121:7,37377:10,37378:5,37380:10,37381:5,37383:3,37384:3,37385:3,37386:5,37510:7,37520:2,37521:2,37522:2,40960:7,40961:3,40962:4,40963:4,40965:4,41486:5,41487:5,41488:3,41985:3,41986:3,41987:3,41988:5,41989:3,41990:3,41993:3,41994:3,41995:7,41996:3,42032:2,42033:2,42034:5,42036:2,42037:2,59932:7}},gps:{main:[1,2,5,2,5,1,5,5,0,9],rest:{18:2,29:2}}}}(),mm._readIFD=function(t,p,h,x,M,k){var I=t.readUshort(p,h);h+=2;var N={};k.debug&&log("   ".repeat(M),x.length-1,">>>----------------");for(var V=0;V<I;V++){var ee=t.readUshort(p,h);h+=2;var te=t.readUshort(p,h);h+=2;var re=t.readUint(p,h);h+=4;var ne=t.readUint(p,h);h+=4;var ie=[];if(1==te||7==te){var ae=re<5?h-4:ne;ae+re>p.buffer.byteLength&&(re=p.buffer.byteLength-ae),ie=new Uint8Array(p.buffer,ae,re)}if(2==te){var oe=re<5?h-4:ne,se=p[oe],ce=Math.max(0,Math.min(re-1,p.length-oe));se<128||0==ce?ie.push(t.readASCII(p,oe,ce)):ie=new Uint8Array(p.buffer,oe,ce)}if(3==te)for(var ue=0;ue<re;ue++)ie.push(t.readUshort(p,(re<3?h-4:ne)+2*ue));if(4==te||13==te)for(ue=0;ue<re;ue++)ie.push(t.readUint(p,(re<2?h-4:ne)+4*ue));if(5==te||10==te){var le=5==te?t.readUint:t.readInt;for(ue=0;ue<re;ue++)ie.push([le(p,ne+8*ue),le(p,ne+8*ue+4)])}if(8==te)for(ue=0;ue<re;ue++)ie.push(t.readShort(p,(re<3?h-4:ne)+2*ue));if(9==te)for(ue=0;ue<re;ue++)ie.push(t.readInt(p,(re<2?h-4:ne)+4*ue));if(11==te)for(ue=0;ue<re;ue++)ie.push(t.readFloat(p,ne+4*ue));if(12==te)for(ue=0;ue<re;ue++)ie.push(t.readDouble(p,ne+8*ue));if(0==re||0!=ie.length){if(k.debug&&log("   ".repeat(M),ee,te,mm.tags[ee],ie),N["t"+ee]=ie,330==ee&&N.t272&&"DSLR-A100"==N.t272[0]);else if(330==ee||34665==ee||34853==ee||50740==ee&&t.readUshort(p,t.readUint(ie,0))<300||61440==ee){var pe=50740==ee?[t.readUint(ie,0)]:ie,he=[];for(ue=0;ue<pe.length;ue++)mm._readIFD(t,p,pe[ue],he,M+1,k);330==ee&&(N.subIFD=he),34665==ee&&(N.exifIFD=he[0]),34853==ee&&(N.gpsiIFD=he[0]),50740==ee&&(N.dngPrvt=he[0]),61440==ee&&(N.fujiIFD=he[0])}if(37500==ee&&k.parseMN){var fe=ie;if("Nikon"==t.readASCII(fe,0,5))N.makerNote=mm.decode(fe.slice(10).buffer)[0];else if("OLYMP"==t.readASCII(fe,0,5)||"OM SYSTEM"==t.readASCII(fe,0,9)){var de=[8208,8224,8240,8256,8272],me=[];mm._readIFD(t,fe,77==fe[1]?16:85==fe[5]?12:8,me,M+1,k);var ge=N.makerNote=me.pop();for(ue=0;ue<de.length;ue++){var ve="t"+de[ue];null!=ge[ve]&&(mm._readIFD(t,fe,ge[ve][0],me,M+1,k),ge[ve]=me.pop())}ge.t12288&&(mm._readIFD(t,ge.t12288,0,me,M+1,k),ge.t12288=me.pop())}else if(t.readUshort(p,ne)<300&&t.readUshort(p,ne+4)<=12){me=[];mm._readIFD(t,p,ne,me,M+1,k),N.makerNote=me[0]}}}else if(log(ee,"unknown TIFF tag type: ",te,"num:",re),0==V)return}return x.push(N),k.debug&&log("   ".repeat(M),"<<<---------------"),h},mm._writeIFD=function(t,p,h,x,M){var k=Object.keys(M),I=k.length;M.exifIFD&&I--,M.gpsiIFD&&I--,t.writeUshort(h,x,I);for(var N=(x+=2)+12*I+4,V=0;V<k.length;V++){var ee=k[V];if("t34665"!=ee&&"t34853"!=ee){"exifIFD"==ee&&(ee="t34665"),"gpsiIFD"==ee&&(ee="t34853");var te=parseInt(ee.slice(1)),re=p.main[te];if(null==re&&(re=p.rest[te]),null==re||0==re)throw new Error("unknown type of tag: "+te);var ne=M[ee];if(34665==te)ne=[N],N=mm._writeIFD(t,p,h,N,M.exifIFD)[1];if(34853==te)ne=[N],N=mm._writeIFD(t,mm._types.gps,h,N,M.gpsiIFD)[1];2==re&&(ne=ne[0]+"\0");var ie=ne.length;t.writeUshort(h,x,te),x+=2,t.writeUshort(h,x,re),x+=2,t.writeUint(h,x,ie);var ae=[-1,1,1,2,4,8,0,1,0,4,8,0,8][re]*ie,oe=x+=4;if(ae>4&&(t.writeUint(h,x,N),oe=N),1==re||7==re)for(var se=0;se<ie;se++)h[oe+se]=ne[se];else if(2==re)t.writeASCII(h,oe,ne);else if(3==re)for(se=0;se<ie;se++)t.writeUshort(h,oe+2*se,ne[se]);else if(4==re)for(se=0;se<ie;se++)t.writeUint(h,oe+4*se,ne[se]);else if(5==re||10==re){var ce=5==re?t.writeUint:t.writeInt;for(se=0;se<ie;se++){var ue=ne[se],le=ue[0],pe=ue[1];if(null==le)throw"e";ce(h,oe+8*se,le),ce(h,oe+8*se+4,pe)}}else if(9==re)for(se=0;se<ie;se++)t.writeInt(h,oe+4*se,ne[se]);else{if(12!=re)throw re;for(se=0;se<ie;se++)t.writeDouble(h,oe+8*se,ne[se])}ae>4&&(N+=ae+=1&ae),x+=4}}return[x,N]},mm.toRGBA8=function(t,p){function gamma(t){return t<.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055}var h=t.width,x=t.height,M=h*x,k=t.data,I=new Uint8Array(4*M),N=t.t262?t.t262[0]:2,V=t.t258?Math.min(32,t.t258[0]):1;null==t.t262&&1==V&&(N=0);var ee=t.t277?t.t277[0]:t.t258?t.t258.length:[1,1,3,1,1,4,3][N],te=t.t339?t.t339[0]:null;if(1==N&&32==V&&3!=te)throw"e";var re=Math.ceil(ee*V*h/8);if(0==N){p=1/256;for(var ne=0;ne<x;ne++){var ie=ne*re,ae=ne*h;if(1==V)for(var oe=0;oe<h;oe++){var se=ae+oe<<2,ce=k[ie+(oe>>3)]>>7-(7&oe)&1;I[se]=I[se+1]=I[se+2]=255*(1-ce),I[se+3]=255}if(4==V)for(oe=0;oe<h;oe++){se=ae+oe<<2,ce=k[ie+(oe>>1)]>>4-4*(1&oe)&15;I[se]=I[se+1]=I[se+2]=17*(15-ce),I[se+3]=255}if(8==V)for(oe=0;oe<h;oe++){se=ae+oe<<2,ce=k[ie+oe];I[se]=I[se+1]=I[se+2]=255-ce,I[se+3]=255}if(16==V)for(oe=0;oe<h;oe++){se=ae+oe<<2,ce=k[(le=ie+2*oe)+1]<<8|k[le];I[se]=I[se+1]=I[se+2]=Math.min(255,255-~~(ce*p)),I[se+3]=255}}}else if(1==N){null==p&&(p=1/256);var ue=0==(3&k.length)?new Float32Array(k.buffer):null;for(ne=0;ne<x;ne++){ie=ne*re,ae=ne*h;if(1==V)for(oe=0;oe<h;oe++){se=ae+oe<<2,ce=k[ie+(oe>>3)]>>7-(7&oe)&1;I[se]=I[se+1]=I[se+2]=255*ce,I[se+3]=255}if(2==V)for(oe=0;oe<h;oe++){se=ae+oe<<2,ce=k[ie+(oe>>2)]>>6-2*(3&oe)&3;I[se]=I[se+1]=I[se+2]=85*ce,I[se+3]=255}if(8==V)for(oe=0;oe<h;oe++){se=ae+oe<<2,ce=k[ie+oe*ee];I[se]=I[se+1]=I[se+2]=ce,I[se+3]=255}if(16==V)for(oe=0;oe<h;oe++){se=ae+oe<<2,ce=k[(le=ie+2*oe)+1]<<8|k[le];I[se]=I[se+1]=I[se+2]=Math.min(255,~~(ce*p)),I[se+3]=255}if(32==V)for(oe=0;oe<h;oe++){var le;se=ae+oe<<2,ce=ue[le=(ie>>>2)+oe];I[se]=I[se+1]=I[se+2]=~~(.5+255*ce),I[se+3]=255}}}else if(2==N)if(8==V){if(1==ee)for(oe=0;oe<M;oe++)I[4*oe]=I[4*oe+1]=I[4*oe+2]=k[oe],I[4*oe+3]=255;if(3==ee)for(oe=0;oe<M;oe++){var pe=3*oe;I[se=oe<<2]=k[pe],I[se+1]=k[pe+1],I[se+2]=k[pe+2],I[se+3]=255}if(ee>=4)for(oe=0;oe<M;oe++){pe=oe*ee;I[se=oe<<2]=k[pe],I[se+1]=k[pe+1],I[se+2]=k[pe+2],I[se+3]=k[pe+3]}}else if(16==V){if(4==ee)for(oe=0;oe<M;oe++){pe=8*oe+1;I[se=oe<<2]=k[pe],I[se+1]=k[pe+2],I[se+2]=k[pe+4],I[se+3]=k[pe+6]}if(3==ee)for(oe=0;oe<M;oe++){pe=6*oe+1;I[se=oe<<2]=k[pe],I[se+1]=k[pe+2],I[se+2]=k[pe+4],I[se+3]=255}}else{if(32!=V)throw V;var he=new Float32Array(k.buffer),fe=0;for(oe=0;oe<he.length;oe++)fe=Math.min(fe,he[oe]);if(fe<0)for(oe=0;oe<k.length;oe+=4){var de=k[oe];k[oe]=k[oe+3],k[oe+3]=de,de=k[oe+1],k[oe+1]=k[oe+2],k[oe+2]=de}var me=[];for(oe=0;oe<65536;oe++)me.push(gamma(oe/65535));for(oe=0;oe<he.length;oe++){var ge=Math.max(0,Math.min(1,he[oe]));he[oe]=me[~~(.5+65535*ge)]}if(3==ee)for(oe=0;oe<M;oe++){pe=3*oe;I[se=oe<<2]=~~(.5+255*he[pe]),I[se+1]=~~(.5+255*he[pe+1]),I[se+2]=~~(.5+255*he[pe+2]),I[se+3]=255}else{if(4!=ee)throw ee;for(oe=0;oe<M;oe++){pe=4*oe;I[se=oe<<2]=~~(.5+255*he[pe]),I[se+1]=~~(.5+255*he[pe+1]),I[se+2]=~~(.5+255*he[pe+2]),I[se+3]=~~(.5+255*he[pe+3])}}}else if(3==N){var ve=t.t320,ye=1<<V,xe=8==V&&ee>1&&t.t338&&0!=t.t338[0];for(ne=0;ne<x;ne++)for(var be=0;be<h;be++){se=(oe=ne*h+be)<<2;var _e=0,Me=ne*re;if(1==V)_e=k[Me+(be>>>3)]>>>7-(7&be)&1;else if(2==V)_e=k[Me+(be>>>2)]>>>6-2*(3&be)&3;else if(4==V)_e=k[Me+(be>>>1)]>>>4-4*(1&be)&15;else{if(8!=V)throw V;_e=k[Me+be*ee]}I[se]=ve[_e]>>8,I[se+1]=ve[ye+_e]>>8,I[se+2]=ve[ye+ye+_e]>>8,I[se+3]=xe?k[Me+be*ee+1]:255}}else if(5==N){var Ce=ee>4?1:0;for(oe=0;oe<M;oe++){se=oe<<2;var we=oe*ee;if(window.UDOC){var Se=k[we],Te=k[we+1],Ae=k[we+2],ke=k[we+3],De=UDOC.C.cmykToRgb([Se*(1/255),Te*(1/255),Ae*(1/255),ke*(1/255)]);I[se]=~~(.5+255*De[0]),I[se+1]=~~(.5+255*De[1]),I[se+2]=~~(.5+255*De[2])}else{Se=255-k[we],Te=255-k[we+1],Ae=255-k[we+2],ke=(255-k[we+3])*(1/255);I[se]=~~(Se*ke+.5),I[se+1]=~~(Te*ke+.5),I[se+2]=~~(Ae*ke+.5)}I[se+3]=255*(1-Ce)+k[we+4]*Ce}}else if(6==N&&t.t278){var Oe=t.t278[0];for(ne=0;ne<x;ne+=Oe){oe=ne*h;for(var Ie=Oe*h,Le=0;Le<Ie;Le++){se=4*(oe+Le),Ae=k[(we=3*oe+4*(Le>>>1))+(1&Le)];var Ee=k[we+2]-128,Re=k[we+3]-128,Be=Ae+((Re>>2)+(Re>>3)+(Re>>5)),Ne=Ae-((Ee>>2)+(Ee>>4)+(Ee>>5))-((Re>>1)+(Re>>3)+(Re>>4)+(Re>>5)),Ge=Ae+(Ee+(Ee>>1)+(Ee>>2)+(Ee>>6));I[se]=Math.max(0,Math.min(255,Be)),I[se+1]=Math.max(0,Math.min(255,Ne)),I[se+2]=Math.max(0,Math.min(255,Ge)),I[se+3]=255}}}else if(32845==N)for(ne=0;ne<x;ne++)for(be=0;be<h;be++){se=4*(ne*h+be);var Fe=k[(we=6*(ne*h+be))+1]<<8|k[we],Ve=(Fe=Math.pow(2,(Fe+.5)/256-64),(k[we+3]+.5)/410),Ue=(k[we+5]+.5)/410,je=9*Ve/(6*Ve-16*Ue+12),We=4*Ue/(6*Ve-16*Ue+12),ze=je*Fe/We,He=(1-je-We)*Fe/We;Be=2.69*ze-1.276*(Ae=Fe)-.414*He,Ne=-1.022*ze+1.978*Ae+.044*He,Ge=.061*ze-.224*Ae+1.163*He;I[se]=255*gamma(Math.min(Be,1)),I[se+1]=255*gamma(Math.min(Ne,1)),I[se+2]=255*gamma(Math.min(Ge,1)),I[se+3]=255}else log("Unknown Photometric interpretation: "+N);return I},mm.replaceIMG=function(t){null==t&&(t=document.getElementsByTagName("img"));for(var p=["tif","tiff","dng","cr2","nef"],h=0;h<t.length;h++){var x=t[h],M=x.getAttribute("src");if(null!=M){var k=M.split(".").pop().toLowerCase();if(-1!=p.indexOf(k)){var I=new XMLHttpRequest;mm._xhrs.push(I),mm._imgs.push(x),I.open("GET",M),I.responseType="arraybuffer",I.onload=mm._imgLoaded,I.send()}}}},mm._xhrs=[],mm._imgs=[],mm._imgLoaded=function(t){var p=mm._xhrs.indexOf(t.target),h=mm._imgs[p];mm._xhrs.splice(p,1),mm._imgs.splice(p,1),h.setAttribute("src",mm.bufferToURI(t.target.response))},mm.bufferToURI=function(t){var p=mm.decode(t),h=p,x=0,M=h[0];p[0].subIFD&&(h=h.concat(p[0].subIFD));for(var k=0;k<h.length;k++){var I=h[k];if(!(null==I.t258||I.t258.length<3)){var N=I.t256*I.t257;N>x&&(x=N,M=I)}}mm.decodeImage(t,M,p);var V=mm.toRGBA8(M),ee=M.width,te=M.height,re=document.createElement("canvas");re.width=ee,re.height=te;var ne=re.getContext("2d"),ie=new ImageData(new Uint8ClampedArray(V.buffer),ee,te);return ne.putImageData(ie,0,0),re.toDataURL()},mm._binBE={nextZero:function nextZero(t,p){for(;0!=t[p];)p++;return p},readUshort:function readUshort(t,p){return t[p]<<8|t[p+1]},readShort:function readShort(t,p){var h=mm._binBE.ui8;return h[0]=t[p+1],h[1]=t[p+0],mm._binBE.i16[0]},readInt:function readInt(t,p){var h=mm._binBE.ui8;return h[0]=t[p+3],h[1]=t[p+2],h[2]=t[p+1],h[3]=t[p+0],mm._binBE.i32[0]},readUint:function readUint(t,p){var h=mm._binBE.ui8;return h[0]=t[p+3],h[1]=t[p+2],h[2]=t[p+1],h[3]=t[p+0],mm._binBE.ui32[0]},readASCII:function readASCII(t,p,h){for(var x="",M=0;M<h;M++)x+=String.fromCharCode(t[p+M]);return x},readFloat:function readFloat(t,p){for(var h=mm._binBE.ui8,x=0;x<4;x++)h[x]=t[p+3-x];return mm._binBE.fl32[0]},readDouble:function readDouble(t,p){for(var h=mm._binBE.ui8,x=0;x<8;x++)h[x]=t[p+7-x];return mm._binBE.fl64[0]},writeUshort:function writeUshort(t,p,h){t[p]=h>>8&255,t[p+1]=255&h},writeInt:function writeInt(t,p,h){var x=mm._binBE.ui8;mm._binBE.i32[0]=h,t[p+3]=x[0],t[p+2]=x[1],t[p+1]=x[2],t[p+0]=x[3]},writeUint:function writeUint(t,p,h){t[p]=h>>24&255,t[p+1]=h>>16&255,t[p+2]=h>>8&255,t[p+3]=h>>0&255},writeASCII:function writeASCII(t,p,h){for(var x=0;x<h.length;x++)t[p+x]=h.charCodeAt(x)},writeDouble:function writeDouble(t,p,h){mm._binBE.fl64[0]=h;for(var x=0;x<8;x++)t[p+x]=mm._binBE.ui8[7-x]}},mm._binBE.ui8=new Uint8Array(8),mm._binBE.i16=new Int16Array(mm._binBE.ui8.buffer),mm._binBE.i32=new Int32Array(mm._binBE.ui8.buffer),mm._binBE.ui32=new Uint32Array(mm._binBE.ui8.buffer),mm._binBE.fl32=new Float32Array(mm._binBE.ui8.buffer),mm._binBE.fl64=new Float64Array(mm._binBE.ui8.buffer),mm._binLE={nextZero:mm._binBE.nextZero,readUshort:function readUshort(t,p){return t[p+1]<<8|t[p]},readShort:function readShort(t,p){var h=mm._binBE.ui8;return h[0]=t[p+0],h[1]=t[p+1],mm._binBE.i16[0]},readInt:function readInt(t,p){var h=mm._binBE.ui8;return h[0]=t[p+0],h[1]=t[p+1],h[2]=t[p+2],h[3]=t[p+3],mm._binBE.i32[0]},readUint:function readUint(t,p){var h=mm._binBE.ui8;return h[0]=t[p+0],h[1]=t[p+1],h[2]=t[p+2],h[3]=t[p+3],mm._binBE.ui32[0]},readASCII:mm._binBE.readASCII,readFloat:function readFloat(t,p){for(var h=mm._binBE.ui8,x=0;x<4;x++)h[x]=t[p+x];return mm._binBE.fl32[0]},readDouble:function readDouble(t,p){for(var h=mm._binBE.ui8,x=0;x<8;x++)h[x]=t[p+x];return mm._binBE.fl64[0]},writeUshort:function writeUshort(t,p,h){t[p]=255&h,t[p+1]=h>>8&255},writeInt:function writeInt(t,p,h){var x=mm._binBE.ui8;mm._binBE.i32[0]=h,t[p+0]=x[0],t[p+1]=x[1],t[p+2]=x[2],t[p+3]=x[3]},writeUint:function writeUint(t,p,h){t[p]=h>>>0&255,t[p+1]=h>>>8&255,t[p+2]=h>>>16&255,t[p+3]=h>>>24&255},writeASCII:mm._binBE.writeASCII},mm._copyTile=function(t,p,h,x,M,k,I,N){for(var V=Math.min(p,M-I),ee=Math.min(h,k-N),te=0;te<ee;te++)for(var re=(N+te)*M+I,ne=te*p,ie=0;ie<V;ie++)x[re+ie]=t[ne+ie]},mm._inflateRaw=function(){var t,p,h={};return h.H={},h.H.N=function(t,p){var x,M,k=Uint8Array,I=0,N=0,V=0,ee=0,te=0,re=0,ne=0,ie=0,ae=0;if(3==t[0]&&0==t[1])return p||new k(0);var oe=h.H,se=oe.b,ce=oe.e,ue=oe.R,le=oe.n,pe=oe.A,he=oe.Z,fe=oe.m,de=null==p;for(de&&(p=new k(t.length>>>2<<5));0==I;)if(I=se(t,ae,1),N=se(t,ae+1,2),ae+=3,0!=N){if(de&&(p=h.H.W(p,ie+(1<<17))),1==N&&(x=fe.J,M=fe.h,re=511,ne=31),2==N){V=ce(t,ae,5)+257,ee=ce(t,ae+5,5)+1,te=ce(t,ae+10,4)+4,ae+=14;for(var me=1,ge=0;ge<38;ge+=2)fe.Q[ge]=0,fe.Q[ge+1]=0;for(ge=0;ge<te;ge++){var ve=ce(t,ae+3*ge,3);fe.Q[1+(fe.X[ge]<<1)]=ve,ve>me&&(me=ve)}ae+=3*te,le(fe.Q,me),pe(fe.Q,me,fe.u),x=fe.w,M=fe.d,ae=ue(fe.u,(1<<me)-1,V+ee,t,ae,fe.v);var ye=oe.V(fe.v,0,V,fe.C);re=(1<<ye)-1;var xe=oe.V(fe.v,V,ee,fe.D);ne=(1<<xe)-1,le(fe.C,ye),pe(fe.C,ye,x),le(fe.D,xe),pe(fe.D,xe,M)}for(;;){var be=x[he(t,ae)&re];ae+=15&be;var _e=be>>>4;if(_e>>>8==0)p[ie++]=_e;else{if(256==_e)break;var Me=ie+_e-254;if(_e>264){var Ce=fe.q[_e-257];Me=ie+(Ce>>>3)+ce(t,ae,7&Ce),ae+=7&Ce}var we=M[he(t,ae)&ne];ae+=15&we;var Se=we>>>4,Te=fe.c[Se],Ae=(Te>>>4)+se(t,ae,15&Te);for(ae+=15&Te;ie<Me;)p[ie]=p[ie++-Ae],p[ie]=p[ie++-Ae],p[ie]=p[ie++-Ae],p[ie]=p[ie++-Ae];ie=Me}}}else{0!=(7&ae)&&(ae+=8-(7&ae));var ke=4+(ae>>>3),De=t[ke-4]|t[ke-3]<<8;de&&(p=h.H.W(p,ie+De)),p.set(new k(t.buffer,t.byteOffset+ke,De),ie),ae=ke+De<<3,ie+=De}return p.length==ie?p:p.slice(0,ie)},h.H.W=function(t,p){var h=t.length;if(p<=h)return t;var x=new Uint8Array(h<<1);return x.set(t,0),x},h.H.R=function(t,p,x,M,k,I){for(var N=h.H.e,V=h.H.Z,ee=0;ee<x;){var te=t[V(M,k)&p];k+=15&te;var re=te>>>4;if(re<=15)I[ee]=re,ee++;else{var ne=0,ie=0;16==re?(ie=3+N(M,k,2),k+=2,ne=I[ee-1]):17==re?(ie=3+N(M,k,3),k+=3):18==re&&(ie=11+N(M,k,7),k+=7);for(var ae=ee+ie;ee<ae;)I[ee]=ne,ee++}}return k},h.H.V=function(t,p,h,x){for(var M=0,k=0,I=x.length>>>1;k<h;){var N=t[k+p];x[k<<1]=0,x[1+(k<<1)]=N,N>M&&(M=N),k++}for(;k<I;)x[k<<1]=0,x[1+(k<<1)]=0,k++;return M},h.H.n=function(t,p){for(var x,M,k,I,N=h.H.m,V=t.length,ee=N.j,te=0;te<=p;te++)ee[te]=0;for(te=1;te<V;te+=2)ee[t[te]]++;var re=N.K;for(x=0,ee[0]=0,M=1;M<=p;M++)x=x+ee[M-1]<<1,re[M]=x;for(k=0;k<V;k+=2)0!=(I=t[k+1])&&(t[k]=re[I],re[I]++)},h.H.A=function(t,p,x){for(var M=t.length,k=h.H.m.r,I=0;I<M;I+=2)if(0!=t[I+1])for(var N=I>>1,V=t[I+1],ee=N<<4|V,te=p-V,re=t[I]<<te,ne=re+(1<<te);re!=ne;){x[k[re]>>>15-p]=ee,re++}},h.H.l=function(t,p){for(var x=h.H.m.r,M=15-p,k=0;k<t.length;k+=2){var I=t[k]<<p-t[k+1];t[k]=x[I]>>>M}},h.H.M=function(t,p,h){h<<=7&p;var x=p>>>3;t[x]|=h,t[x+1]|=h>>>8},h.H.I=function(t,p,h){h<<=7&p;var x=p>>>3;t[x]|=h,t[x+1]|=h>>>8,t[x+2]|=h>>>16},h.H.e=function(t,p,h){return(t[p>>>3]|t[1+(p>>>3)]<<8)>>>(7&p)&(1<<h)-1},h.H.b=function(t,p,h){return(t[p>>>3]|t[1+(p>>>3)]<<8|t[2+(p>>>3)]<<16)>>>(7&p)&(1<<h)-1},h.H.Z=function(t,p){return(t[p>>>3]|t[1+(p>>>3)]<<8|t[2+(p>>>3)]<<16)>>>(7&p)},h.H.i=function(t,p){return(t[p>>>3]|t[1+(p>>>3)]<<8|t[2+(p>>>3)]<<16|t[3+(p>>>3)]<<24)>>>(7&p)},h.H.m=(t=Uint16Array,p=Uint32Array,{K:new t(16),j:new t(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new t(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new p(32),J:new t(512),_:[],h:new t(32),$:[],w:new t(32768),C:[],v:[],d:new t(32768),D:[],u:new t(512),Q:[],r:new t(32768),s:new p(286),Y:new p(30),a:new p(19),t:new p(15e3),k:new t(65536),g:new t(32768)}),function(){for(var t=h.H.m,p=0;p<32768;p++){var x=p;x=(4278255360&(x=(4042322160&(x=(3435973836&(x=(2863311530&x)>>>1|(1431655765&x)<<1))>>>2|(858993459&x)<<2))>>>4|(252645135&x)<<4))>>>8|(16711935&x)<<8,t.r[p]=(x>>>16|x<<16)>>>17}function n(t,p,h){for(;0!=p--;)t.push(0,h)}for(p=0;p<32;p++)t.q[p]=t.S[p]<<3|t.T[p],t.c[p]=t.p[p]<<4|t.z[p];n(t._,144,8),n(t._,112,9),n(t._,24,7),n(t._,8,8),h.H.n(t._,9),h.H.A(t._,9,t.J),h.H.l(t._,9),n(t.$,32,5),h.H.n(t.$,5),h.H.A(t.$,5,t.h),h.H.l(t.$,5),n(t.Q,19,0),n(t.C,286,0),n(t.D,30,0),n(t.v,320,0)}(),h.H.N}(),mm.LosslessJpegDecode=function(){var t,p;function l(){return t[p++]}function m(){return t[p++]<<8|t[p++]}function a0(t){for(var p=l(),h=[0,0,0,255],x=[],M=0;M<16;M++)x[M]=l();for(M=0;M<16;M++)for(var k=0;k<x[M];k++){h[z(h,0,M+1,1)+3]=l()}var I=new Uint8Array(256);t[p]=[new Uint8Array(h),I];for(M=0;M<256;M++){for(var N=8,V=M,ee=0;255==h[ee+3]&&0!=N;)ee=h[ee+(V>>--N&1)];I[M]=ee}}function z(t,p,h,x){if(255!=t[p+3])return 0;if(0==h)return p;for(var M=0;M<2;M++){0==t[p+M]&&(t[p+M]=t.length,t.push(0,0,x,255));var k=z(t,t[p+M],h-1,x+1);if(0!=k)return k}return 0}function i(t){for(var p=t.b,h=t.f;p<25&&t.a<t.d;){var x=t.data[t.a++];255!=x||t.c||t.a++,h=h<<8|x,p+=8}if(p<0)throw"e";t.b=p,t.f=h}function H(t,p){return p.b<t&&i(p),p.f>>(p.b-=t)&65535>>16-t}function g(t,p){var h=t[0],x=0,M=255;p.b<16&&i(p);var k=p.f>>p.b-8&255;for(M=h[(x=t[1][k])+3],p.b-=h[x+2];255==M;)M=h[(x=h[x+(p.f>>--p.b&1)])+3];return M}function P(t,p){return t<32768>>16-p&&(t+=1-(1<<p)),t}function a2(t,p){var h=g(t,p);return 0==h?0:16==h?-32768:P(H(h,p),h)}function X(t,p,h,x,M,k){for(var I=0,N=0;N<k;N++){for(var V=N*p,ee=0;ee<p;ee+=M){I++;for(var te=0;te<M;te++)t[V+ee+te]=a2(x[te],h)}if(0!=h.e&&I%h.e==0&&0!=N){for(var re=h.a,ne=h.data;255!=ne[re]||!(208<=ne[re+1]&&ne[re+1]<=215);)re--;h.a=re+2,h.f=0,h.b=0}}}function o(t,p){return P(H(t,p),t)}function j(t,p,h,x,M,k,I,N){for(var V=h*I,ee=M;ee<k;ee++)t[ee]+=1<<N-1;for(var te=I;te<V;te+=I)for(ee=M;ee<k;ee++)t[te+ee]+=t[te+ee-I];for(var re=1;re<x;re++){var ne=re*V;for(ee=M;ee<k;ee++)t[ne+ee]+=t[ne+ee-V];for(te=I;te<V;te+=I)for(ee=M;ee<k;ee++){var ie=ne+te+ee,ae=ie-V,oe=t[ie-I],se=0;if(0==p)se=0;else if(1==p)se=oe;else if(2==p)se=t[ae];else if(3==p)se=t[ae-I];else if(4==p)se=oe+(t[ae]-t[ae-I]);else if(5==p)se=oe+(t[ae]-t[ae-I]>>>1);else if(6==p)se=t[ae]+(oe-t[ae-I]>>>1);else{if(7!=p)throw p;se=oe+t[ae]>>>1}t[ie]+=se}}}return function C(h){if(t=h,p=0,65496!=m())throw"e";for(var x=[],M=0,k=0,I=0,N=[],V=[],ee=[],te=0,re=0,ne=0;;){var ie=m();if(65535!=ie){var ae=m();if(65475==ie){k=l(),re=m(),ne=m(),te=l();for(var oe=0;oe<te;oe++){var se=l(),ce=l();if(0!=l())throw"e";x[se]=[oe,ce>>4,15&ce]}}else if(65476==ie)for(var ue=p+ae-2;p<ue;)a0(V);else{if(65498==ie){p++;for(oe=0;oe<te;oe++){var le=x[l()];ee[le[0]]=V[l()>>>4],N[le[0]]=le.slice(1)}M=l(),p+=2;break}65501==ie?I=m():p+=ae-2}}else p--}var pe=new(k>8?Uint16Array:Uint8Array)(re*ne*te),he={b:0,f:0,c:8==M,a:p,data:t,d:t.length,e:I};if(he.c)!function a1(h,x,M,k,I){for(var N=t.length-p,V=0;V<N;V+=4){var ee=t[p+V];t[p+V]=t[p+V+3],t[p+V+3]=ee,ee=t[p+V+1],t[p+V+1]=t[p+V+2],t[p+V+2]=ee}for(var te=0;te<I;te++)for(var re=32768,ne=32768,ie=0;ie<x;ie+=2){var ae=g(k,M),oe=g(k,M);0!=ae&&(re+=o(ae,M)),0!=oe&&(ne+=o(oe,M)),h[te*x+ie]=65535&re,h[te*x+ie+1]=65535&ne}}(pe,ne*te,he,ee[0],re);else{var fe=[],de=0,me=0;for(oe=0;oe<te;oe++){var ge=N[oe];(Te=ge[0])>de&&(de=Te),(Se=ge[1])>me&&(me=Se),fe.push(Te*Se)}if(1!=de||1!=me){if(3!=te||1!=fe[1]||1!=fe[2])throw"e";if(2!=de||1!=me&&2!=me)throw"e";var ve=[],ye=0;for(oe=0;oe<te;oe++){for(var xe=0;xe<fe[oe];xe++)ve.push(ee[oe]);ye+=fe[oe]}var be=ne/de,_e=re/me,Me=be*_e;X(pe,be*ye,he,ve,ye,_e),j(pe,M,be,_e,ye-2,ye,ye,k);var Ce=new Uint16Array(Me*fe[0]);if(2==de&&2==me){for(oe=0;oe<Me;oe++)Ce[4*oe]=pe[6*oe],Ce[4*oe+1]=pe[6*oe+1],Ce[4*oe+2]=pe[6*oe+2],Ce[4*oe+3]=pe[6*oe+3];j(Ce,M,4*be,_e,0,1,1,k);for(oe=0;oe<Me;oe++)pe[6*oe]=Ce[4*oe],pe[6*oe+1]=Ce[4*oe+1],pe[6*oe+2]=Ce[4*oe+2],pe[6*oe+3]=Ce[4*oe+3]}if(2==de&&1==me){for(oe=0;oe<Me;oe++)Ce[2*oe]=pe[4*oe],Ce[2*oe+1]=pe[4*oe+1];j(Ce,M,2*be,_e,0,1,1,k);for(oe=0;oe<Me;oe++)pe[4*oe]=Ce[2*oe],pe[4*oe+1]=Ce[2*oe+1]}for(var we=pe.slice(0),Se=0;Se<re;Se++)if(2==me)for(var Te=0;Te<ne;Te++){var Ae=((Se>>>1)*be+(Te>>>1))*ye,ke=2*(1&Se)+(1&Te);pe[De=(Se*ne+Te)*te]=we[Ae+ke],pe[De+1]=we[Ae+4],pe[De+2]=we[Ae+5]}else for(Te=0;Te<ne;Te++){var De;Ae=(Se*be+(Te>>>1))*ye,ke=1&Te;pe[De=(Se*ne+Te)*te]=we[Ae+ke],pe[De+1]=we[Ae+2],pe[De+2]=we[Ae+3]}}else if(X(pe,ne*te,he,ee,te,re),0==I)j(pe,M,ne,re,0,te,te,k);else{var Oe=Math.floor(I/ne);for(Se=0;Se<re;Se+=Oe){var Ie=pe.slice(Se*ne*te,(Se+Oe)*ne*te);j(Ie,M,ne,Oe,0,te,te,k),pe.set(Ie,Se*ne*te)}}}return pe}}(),function(){var t=2,p=4,h=5,x=6,M=7,k=12,I=13,N=14,V=15,ee=17;function a2(t){var p={c:new Int8Array(2<<t.u)};return function a1(t,p,h){var x=[p,3*p+18,5*p+67,7*p+276,h];t.o=p,t.w=(x[4]+2*p)/(2*p+1)+1|0,t.v=Math.ceil(Math.log2(t.w)),t.t=9,function a6(t,p){for(var h=-p[4],x=0;h<=p[4];x++,h++)t[x]=h<=-p[3]?-4:h<=-p[2]?-3:h<=-p[1]?-2:h<-p[0]?-1:h<=p[0]?0:h<p[1]?1:h<p[2]?2:h<p[3]?3:4}(t.c,x)}(p,0,t.g),p}function D(t){for(var p=[[],[],[]],h=Math.max(2,t.w+32>>>6),x=0;x<3;x++)for(var M=0;M<41;M++)p[x][M]=[h,1];return p}function K(t,p){var h=0,x=8-t.a;if(t.j,t.a,p){if(p>=x)do{h<<=x,p-=x,h|=t[t.j]&(1<<x)-1,t.j++,x=8}while(p>=8);p&&(h<<=p,x-=p,h|=t[t.j]>>>x&(1<<p)-1),t.a=8-x}return h}function r(t,p,h,x,M,k,I,N){null==N&&(N=0);var V,ee,te,re,ne,ie,ae=k+1,oe=ae%2,se=0,ce=x[M],ue=x[M-1],le=x[M-2][ae],pe=ue[ae-1],he=ue[ae],fe=ue[ae+1],de=ce[ae-1],me=ce[ae+1],ge=Math.abs;if(oe&&(te=ge(fe-he),re=ge(le-he),ne=ge(pe-he)),oe){if(ie=(ie=te>ne&&re<te?le+pe:te<ne&&re<ne?le+fe:fe+pe)+2*he>>>2,N)return void(ce[ae]=ie);V=p.t*p.c[t.g+he-le]+p.c[t.g+pe-he]}else ie=he>pe&&he>fe||he<pe&&he<fe?me+de+2*he>>>2:de+me>>>1,V=p.t*p.c[t.g+he-pe]+p.c[t.g+pe-de];ee=ge(V);var ve=function a4(t){for(var p=-1,h=0;!h;p++)h=t[t.j]>>>7-t.a&1,t.a++,t.a&=7,t.a||t.j++;return p}(h);if(ve<t.n-p.v-1){var ye=function a0(t,p){var h=0;if(p<t)for(;h<=14&&p<<++h<t;);return h}(I[ee][0],I[ee][1]);se=K(h,ye)+(ve<<ye)}else se=K(h,p.v)+1;se=1&se?-1-(se>>>1):se>>>1,I[ee][0]+=ge(se),I[ee][1]==t.f&&(I[ee][0]>>>=1,I[ee][1]>>>=1),I[ee][1]++,ie=V<0?ie-se:ie+se,t.i&&(ie<0?ie+=p.w:ie>t.g&&(ie-=p.w)),ce[ae]=ie>=0?Math.min(ie,t.g):0}function U(t,p,h){for(var x=t[0].length,M=p;M<=h;M++)t[M][0]=t[M-1][1],t[M][x-1]=t[M-1][x-2]}function B(h){U(h,M,k),U(h,t,p),U(h,V,ee)}function _(t,h,x,M,k,N,V,ee,te,re,ne,ie,ae){for(var oe=0,se=1,ce=k<I&&k>p;se<t.m;)oe<t.m&&(r(t,h,x,M,k,oe,V[te],t.h&&(ce&&re||!ce&&(ne||(oe&ie)==ae))),r(t,h,x,M,N,oe,V[te],t.h&&(!ce&&re||ce&&(ne||(oe&ie)==ae))),oe+=2),oe>8&&(r(t,h,x,M,k,se,ee[te]),r(t,h,x,M,N,se,ee[te]),se+=2);B(M)}function a8(h,x,I,N,te,re){_(h,x,I,N,t,M,te,re,0,0,1,0,8),_(h,x,I,N,8,V,te,re,1,0,1,0,8),_(h,x,I,N,3,9,te,re,2,1,0,3,0),_(h,x,I,N,10,16,te,re,0,0,0,3,2),_(h,x,I,N,p,11,te,re,1,0,0,3,2),_(h,x,I,N,k,ee,te,re,2,1,0,3,0)}function a9(p,h,x,k,I,N){var ee=N.length,te=p.l;I+1==p.s&&(te=p.e-I*p.l);for(var re=6*p.e*k+I*p.l,ne=0;ne<6;ne++){for(var ie=0;ie<te;ie++){var ae,oe=N[ne%ee][ie%ee];ae=0==oe?t+(ne>>>1):2==oe?V+(ne>>>1):M+ne;var se=p.h?(2*ie/3&2147483646|ie%3&1)+(ie%3>>>1):ie>>>1;h[re+ie]=x[ae][se+1]}re+=p.e}}mm._decompressRAF=function(M,V){var te=function a5(t){var p=mm._binBE.readUshort,h={b:p(t,0),i:t[2],C:t[3],u:t[4],q:p(t,5),k:p(t,7),e:p(t,9),l:p(t,11),s:t[13],d:p(t,14)};if(18771!=h.b||h.i>1||h.q<6||h.q%6||h.e<768||h.e%24||768!=h.l||h.k<h.l||h.k%h.l||h.k-h.e>=h.l||h.s>16||h.s!=h.k/h.l||h.s!=Math.ceil(h.e/h.l)||h.d!=h.q/6||12!=h.u&&14!=h.u&&16!=h.u||16!=h.C&&0!=h.C)throw"Invalid data";if(0==h.i)throw"Not implemented. We need this file!";return h.h=16==h.C,h.m=0|(h.h?2*h.l/3:h.l>>>1),h.A=h.m+2,h.f=64,h.g=(1<<h.u)-1,h.n=4*h.u,h}(M),re=function a7(t,p){var h=new Array(p.s),x=4*p.s,M=16+x;12&x&&(M+=16-(12&x));for(var k=0,I=16;k<p.s;I+=4){var N=mm._binBE.readUint(t,I);h[k]=t.slice(M,M+N),h[k].j=0,h[k].a=0,M+=N,k++}if(M!=t.length)throw"Invalid data";return h}(M,te),ne=a2(te),ie=new Int16Array(te.e*te.q);null==V&&(V=te.h?[[1,1,0,1,1,2],[1,1,2,1,1,0],[2,0,1,0,2,1],[1,1,2,1,1,0],[1,1,0,1,1,2],[0,2,1,2,0,1]]:[[0,1],[3,2]]);for(var ae=[[0,3],[1,p],[h,11],[x,k],[I,16],[N,ee]],oe=[],se=0;se<18;se++)oe[se]=new Uint16Array(te.A);for(var ce=0;ce<te.s;ce++){var ue=D(ne),le=D(ne);for(se=0;se<18;se++)for(var pe=0;pe<te.A;pe++)oe[se][pe]=0;for(var he=0;he<te.d;he++){a8(te,ne,re[ce],oe,ue,le);for(se=0;se<6;se++)for(pe=0;pe<te.A;pe++)oe[ae[se][0]][pe]=oe[ae[se][1]][pe];a9(te,ie,oe,he,ce,V);for(se=t;se<18;se++)if(-1==[h,x,I,N].indexOf(se))for(pe=0;pe<te.A;pe++)oe[se][pe]=0;B(oe)}}return ie}}();var gm=function(t){_inherits$1(TIFFLoader,t);var p=_createSuper(TIFFLoader);function TIFFLoader(t){return _classCallCheck$1(this,TIFFLoader),p.call(this,t)}return _createClass$1(TIFFLoader,[{key:"parse",value:function parse(t){var p=mm.decode(t);mm.decodeImage(t,p[0]);var h=mm.toRGBA8(p[0]);return{width:p[0].width,height:p[0].height,data:h,flipY:!0,magFilter:Cu,minFilter:Su}}}]),TIFFLoader}(DataTextureLoader),vm=function(){function MxTIFFLoader(){_classCallCheck$1(this,MxTIFFLoader),_defineProperty(this,"imp",new gm)}return _createClass$1(MxTIFFLoader,[{key:"load",value:function load(t,p,h){this.imp.load(t,p,void 0,h)}}]),MxTIFFLoader}();const ym=Object.freeze(Object.defineProperty({__proto__:null,b64Encode:b64Encode,b64Decode:b64Decode,saveAsFileDialog:saveAsFileDialog,downloadFile:downloadFile,downloadFileFromUrl:downloadFileFromUrl,getJsonFromUrl:ae,getFileFromUrl:oe,_ML_String:_ML_String,IsZero:IsZero,postMemoryFile:postMemoryFile,postEmscriptenIndexedDBFile:postEmscriptenIndexedDBFile,createCursor:createCursor,MxTools:se,MxCanvas2Image:ue,McGePoint3d:nn,McGeVector3d:sn,McGeMatrix3d:cn,McGeLongArray:un,McGeStringArray:ln,McGePoint3dArray:pn,McGeDoubleArray:hn,McGeBound:fn,MxCoordConvertType:xt,get MxCoordConvert(){return t.MxCoordConvert},getFilterImp:getFilterImp,MxCADResbuf:bt,MxCADUtilityClass:_t,MxCADUtility:Mt,MxCADSelectionSetStatus:Ct,MxCADSelectionSet:wt,MxCADUiPrBase:St,MxCADUiPrPoint:Tt,MxCADUiPrDist:At,MxCADUiPrAngle:kt,MxCADUiPrInt:Dt,MxCADUiPrKeyWord:Pt,MxCADUiPrString:Ot,MxCADUiPrEntity:It,McRxObject:dt,McObjectIdType:mt,McObjectId:gt,McDbObject:vt,McDbObjectArray:yt,DxfCode:wr,get McDb(){return t.McDb},McCmColor:Sr,McDbLinetypeTableRecord:Tr,McDbDimStyleTableRecord:Ar,McDbTextStyleTableRecord:kr,McDbLayerTableRecord:Dr,McDbLayerTable:Pr,McDbLinetypeTable:Or,McDbDimStyleTable:Ir,McDbTextStyleTable:Lr,McDbDatabase:Er,McDbBlockTableRecord:Rr,McDbBlockTable:Br,McDbRasterImageDef:Nr,McDbDictionary:Gr,McDbXrecord:Fr,McDbGroup:Vr,McDbEntity:Lt,McDbCurve:Et,McDbLine:Rt,McDbText:Bt,McDbAttribute:Nt,McDbAttributeDefinition:Gt,McDbMText:Ft,McDbCircle:Vt,McDbPolyline:Ut,McDbBlockReference:jt,McDbSpatialFilter:Wt,McDbDimension:zt,McDbAlignedDimension:Ht,McDbRotatedDimension:$t,McDb2LineAngularDimension:Yt,McDbArc:Kt,McDbEllipse:Xt,McDbPoint:qt,McDbHatch:Zt,McDbProxyEntity:Jt,McDbRasterImage:Qt,McDbWipeout:er,McDbBackgroundEntity:tr,McDbSpline:rr,FetchAttributes:zr,McObject:Hr,McAppType:$r,MxCppType:Yr,MxCADPluginMapDefaultData:Kr,MxCADPluginSampleCode:Xr,MxCADPluginBase:qr,MxPropertiesWindowCustomValueType:Zr,MxPropertiesWindowCustomValue:Jr,MxPropertiesWindowCustom:Qr,MxCompare:en,MxModifyColor:tn,MxCADTempForbiddenIntelliSelect:rn,MxCADCloneType:nr,MxCADWorldDrawType:ir,IMcDbDwgFiler:ar,MxCADWorldDraw:sr,McDbCustomEntity:cr,MxCADBaseCustomElement:dn,MxCADBaseCustomText:Xn,MxCADMText:qn,get MxCpp(){return t.MxCpp},loadMxCADassembly:loadMxCADassembly,MxCheckTheBrowser:MxCheckTheBrowser,Mx_About:Mx_About,createMxCad:Ti,ColorMethod:Ai,ColorIndexType:ki,getColorUtils:Di,createMcCmColor:Pi,setMcCmColor:Oi,drawText:drawText,drawCircle:drawCircle,drawLine:drawLine,drawMText:drawMText,drawPolyLine:drawPolyLine,drawPolygon:drawPolygon,drawArc:drawArc,drawEllipticalArc:drawEllipticalArc,Mx_Erase:Mx_Erase,drawRectang:Oa,get MdGe(){return t.MdGe},MxApp3D:Ea,MxCAD3DObject:Ra,Mx3dApplication:Ga,Mx3dBaseObject:Fa,Mx3dDimObject:Va,Mx3dSymbolObject:Ua,Mx3dAlgoObject:ja,Mx3dAspectObject:Wa,Mx3dGeObject:za,Mx3dGeCurve:Ha,Mx3dGeConic:$a,Mx3dGePoint:Ya,Mx3dGeTrsf:Ka,Mx3dGeAxis:qa,Mx3dGeDir:Za,Mx3dGeEllipse:Ja,Mx3dGeHyperbola:Qa,Mx3dGeVec:eo,Mx3dGeBndBox:to,Mx3dGeCircle:ro,Mx3dShapeObject:no,Mx3dShapeFace:io,Mx3dShapeVertex:ao,Mx3dShapeEdge:oo,Mx3dShapeWire:so,Mx3dShapeShell:co,Mx3dShapeSolid:uo,Mx3dShapeCompSolid:lo,Mx3dShapeCompound:po,Mx3dAlgoFillet:ho,Mx3dAlgoChamfer:fo,Mx3dAlgoFillet2d:mo,Mx3dDbObject:yo,Mx3dView:xo,Mx3dGeColor:bo,Mx3dGeCSYS:_o,Mx3dGeCSYSR:Mo,Mx3dGeCylinder:Co,Mx3dDbDocument:So,Mx3dDbLabel:To,Mx3dGeLocation:ko,Mx3dGePlane:Po,Mx3dSymbolText:Oo,Mx3dShapeDownCast:Io,Mx3dBrepCastGeom:Lo,Mx3dUtils:Eo,Mx3dGeLine:Ro,Mx3dGeomObject:Bo,Mx3dGeomCurve:No,Mx3dGeomConic:Go,Mx3dGeomCircle:Fo,Mx3dGeomLine:Uo,Mx3dGeomEllipse:jo,Mx3dGeomHyperbola:Wo,Mx3dGeomParabola:zo,Mx3dMkObject:Ho,Mx3dMkBox:$o,Mx3dMkCone:Yo,Mx3dMkCylinder:Ko,Mx3dMkRevol:Xo,Mx3dMkSphere:qo,Mx3dMkTorus:Zo,Mx3dMkPipe:Jo,Mx3dMkPipeShell:Qo,Mx3dMkPrism:es,Mx3dMkWedge:ts,Mx3dMkLoft:rs,Mx3dMkPolygon:ns,Mx3dMkFace:is,Mx3dMkThickSolid:os,Mx3dWireTool:ss,Mx3dGeomBoundedCurve:hs,Mx3dGeomBSplineCurve:fs,Mx3dGeomBezierCurve:ds,Mx3dGeomSurface:ms,Mx3dGeomElementarySurface:gs,Mx3dGeomPlane:vs,Mx3dGeomConicalSurface:ys,Mx3dGeomCylindricalSurface:xs,Mx3dGeomSphericalSurface:bs,Mx3dGeomToroidalSurface:_s,Mx3dGeomBoundedSurface:Ms,Mx3dGeomBSplineSurface:Cs,Mx3dGeomBezierSurface:ws,Mx3dGeMaterial:Ss,Mx3dAspectLine:Ts,Mx3dAspectText:As,Mx3dAspectArrow:ks,Mx3dAspectDim:Ds,Mx3dDimDiameter:Ps,Mx3dDimRadius:Os,Mx3dDimAngle:Is,Mx3dDimLength:Ls,Mx3dInterpolateBSplineCurve:Es,MxMap:Rs,MxMapAddRasterTileLayer:MxMapAddRasterTileLayer,MxMapAddGoogleCnLayer:MxMapAddGoogleCnLayer,mx_gps84_To_gcj02:mx_gps84_To_gcj02,mx_gcj02_To_gps84:mx_gcj02_To_gps84,MxTIFFLoader:vm},Symbol.toStringTag,{value:"Module"}));globalThis.Buffer=h.Buffer,globalThis.Buffer.alloc=h.Buffer.alloc,globalThis.Buffer.from=h.Buffer.from,t.ColorIndexType=ki,t.ColorMethod=Ai,t.DxfCode=wr,t.FetchAttributes=zr,t.IMcDbDwgFiler=ar,t.IsZero=IsZero,t.McAppType=$r,t.McCmColor=Sr,t.McDb2LineAngularDimension=Yt,t.McDbAlignedDimension=Ht,t.McDbArc=Kt,t.McDbAttribute=Nt,t.McDbAttributeDefinition=Gt,t.McDbBackgroundEntity=tr,t.McDbBlockReference=jt,t.McDbBlockTable=Br,t.McDbBlockTableRecord=Rr,t.McDbCircle=Vt,t.McDbCurve=Et,t.McDbCustomEntity=cr,t.McDbDatabase=Er,t.McDbDictionary=Gr,t.McDbDimStyleTable=Ir,t.McDbDimStyleTableRecord=Ar,t.McDbDimension=zt,t.McDbEllipse=Xt,t.McDbEntity=Lt,t.McDbGroup=Vr,t.McDbHatch=Zt,t.McDbLayerTable=Pr,t.McDbLayerTableRecord=Dr,t.McDbLine=Rt,t.McDbLinetypeTable=Or,t.McDbLinetypeTableRecord=Tr,t.McDbMText=Ft,t.McDbObject=vt,t.McDbObjectArray=yt,t.McDbPoint=qt,t.McDbPolyline=Ut,t.McDbProxyEntity=Jt,t.McDbRasterImage=Qt,t.McDbRasterImageDef=Nr,t.McDbRotatedDimension=$t,t.McDbSpatialFilter=Wt,t.McDbSpline=rr,t.McDbText=Bt,t.McDbTextStyleTable=Lr,t.McDbTextStyleTableRecord=kr,t.McDbWipeout=er,t.McDbXrecord=Fr,t.McGeBound=fn,t.McGeDoubleArray=hn,t.McGeLongArray=un,t.McGeMatrix3d=cn,t.McGePoint3d=nn,t.McGePoint3dArray=pn,t.McGeStringArray=ln,t.McGeVector3d=sn,t.McObject=Hr,t.McObjectId=gt,t.McObjectIdType=mt,t.McRxObject=dt,t.Mx3dAlgoChamfer=fo,t.Mx3dAlgoFillet=ho,t.Mx3dAlgoFillet2d=mo,t.Mx3dAlgoObject=ja,t.Mx3dApplication=Ga,t.Mx3dAspectArrow=ks,t.Mx3dAspectDim=Ds,t.Mx3dAspectLine=Ts,t.Mx3dAspectObject=Wa,t.Mx3dAspectText=As,t.Mx3dBaseObject=Fa,t.Mx3dBrepCastGeom=Lo,t.Mx3dDbDocument=So,t.Mx3dDbLabel=To,t.Mx3dDbObject=yo,t.Mx3dDimAngle=Is,t.Mx3dDimDiameter=Ps,t.Mx3dDimLength=Ls,t.Mx3dDimObject=Va,t.Mx3dDimRadius=Os,t.Mx3dGeAxis=qa,t.Mx3dGeBndBox=to,t.Mx3dGeCSYS=_o,t.Mx3dGeCSYSR=Mo,t.Mx3dGeCircle=ro,t.Mx3dGeColor=bo,t.Mx3dGeConic=$a,t.Mx3dGeCurve=Ha,t.Mx3dGeCylinder=Co,t.Mx3dGeDir=Za,t.Mx3dGeEllipse=Ja,t.Mx3dGeHyperbola=Qa,t.Mx3dGeLine=Ro,t.Mx3dGeLocation=ko,t.Mx3dGeMaterial=Ss,t.Mx3dGeObject=za,t.Mx3dGePlane=Po,t.Mx3dGePoint=Ya,t.Mx3dGeTrsf=Ka,t.Mx3dGeVec=eo,t.Mx3dGeomBSplineCurve=fs,t.Mx3dGeomBSplineSurface=Cs,t.Mx3dGeomBezierCurve=ds,t.Mx3dGeomBezierSurface=ws,t.Mx3dGeomBoundedCurve=hs,t.Mx3dGeomBoundedSurface=Ms,t.Mx3dGeomCircle=Fo,t.Mx3dGeomConic=Go,t.Mx3dGeomConicalSurface=ys,t.Mx3dGeomCurve=No,t.Mx3dGeomCylindricalSurface=xs,t.Mx3dGeomElementarySurface=gs,t.Mx3dGeomEllipse=jo,t.Mx3dGeomHyperbola=Wo,t.Mx3dGeomLine=Uo,t.Mx3dGeomObject=Bo,t.Mx3dGeomParabola=zo,t.Mx3dGeomPlane=vs,t.Mx3dGeomSphericalSurface=bs,t.Mx3dGeomSurface=ms,t.Mx3dGeomToroidalSurface=_s,t.Mx3dInterpolateBSplineCurve=Es,t.Mx3dMkBox=$o,t.Mx3dMkCone=Yo,t.Mx3dMkCylinder=Ko,t.Mx3dMkFace=is,t.Mx3dMkLoft=rs,t.Mx3dMkObject=Ho,t.Mx3dMkPipe=Jo,t.Mx3dMkPipeShell=Qo,t.Mx3dMkPolygon=ns,t.Mx3dMkPrism=es,t.Mx3dMkRevol=Xo,t.Mx3dMkSphere=qo,t.Mx3dMkThickSolid=os,t.Mx3dMkTorus=Zo,t.Mx3dMkWedge=ts,t.Mx3dShapeCompSolid=lo,t.Mx3dShapeCompound=po,t.Mx3dShapeDownCast=Io,t.Mx3dShapeEdge=oo,t.Mx3dShapeFace=io,t.Mx3dShapeObject=no,t.Mx3dShapeShell=co,t.Mx3dShapeSolid=uo,t.Mx3dShapeVertex=ao,t.Mx3dShapeWire=so,t.Mx3dSymbolObject=Ua,t.Mx3dSymbolText=Oo,t.Mx3dUtils=Eo,t.Mx3dView=xo,t.Mx3dWireTool=ss,t.MxApp3D=Ea,t.MxCAD3DObject=Ra,t.MxCADBaseCustomElement=dn,t.MxCADBaseCustomText=Xn,t.MxCADCloneType=nr,t.MxCADMText=qn,t.MxCADPluginBase=qr,t.MxCADPluginMapDefaultData=Kr,t.MxCADPluginSampleCode=Xr,t.MxCADResbuf=bt,t.MxCADSelectionSet=wt,t.MxCADSelectionSetStatus=Ct,t.MxCADTempForbiddenIntelliSelect=rn,t.MxCADUiPrAngle=kt,t.MxCADUiPrBase=St,t.MxCADUiPrDist=At,t.MxCADUiPrEntity=It,t.MxCADUiPrInt=Dt,t.MxCADUiPrKeyWord=Pt,t.MxCADUiPrPoint=Tt,t.MxCADUiPrString=Ot,t.MxCADUtility=Mt,t.MxCADUtilityClass=_t,t.MxCADWorldDraw=sr,t.MxCADWorldDrawType=ir,t.MxCanvas2Image=ue,t.MxCheckTheBrowser=MxCheckTheBrowser,t.MxCompare=en,t.MxCoordConvertType=xt,t.MxCppType=Yr,t.MxMap=Rs,t.MxMapAddGoogleCnLayer=MxMapAddGoogleCnLayer,t.MxMapAddRasterTileLayer=MxMapAddRasterTileLayer,t.MxModifyColor=tn,t.MxPropertiesWindowCustom=Qr,t.MxPropertiesWindowCustomValue=Jr,t.MxPropertiesWindowCustomValueType=Zr,t.MxTIFFLoader=vm,t.MxTools=se,t.Mx_About=Mx_About,t.Mx_Erase=Mx_Erase,t._ML_String=_ML_String,t.b64Decode=b64Decode,t.b64Encode=b64Encode,t.createCursor=createCursor,t.createMcCmColor=Pi,t.createMxCad=Ti,t.default=ym,t.downloadFile=downloadFile,t.downloadFileFromUrl=downloadFileFromUrl,t.drawArc=drawArc,t.drawCircle=drawCircle,t.drawEllipticalArc=drawEllipticalArc,t.drawLine=drawLine,t.drawMText=drawMText,t.drawPolyLine=drawPolyLine,t.drawPolygon=drawPolygon,t.drawRectang=Oa,t.drawText=drawText,t.getColorUtils=Di,t.getFileFromUrl=oe,t.getFilterImp=getFilterImp,t.getJsonFromUrl=ae,t.loadMxCADassembly=loadMxCADassembly,t.mx_gcj02_To_gps84=mx_gcj02_To_gps84,t.mx_gps84_To_gcj02=mx_gps84_To_gcj02,t.postEmscriptenIndexedDBFile=postEmscriptenIndexedDBFile,t.postMemoryFile=postMemoryFile,t.saveAsFileDialog=saveAsFileDialog,t.setMcCmColor=Oi,Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
